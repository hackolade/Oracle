"use strict";var Lh=Object.defineProperty;var T=(i,e)=>Lh(i,"name",{value:e,configurable:!0});var m=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var $a=m((iR,yh)=>{yh.exports={name:"Oracle",version:"0.2.9",author:"hackolade",engines:{hackolade:"6.11.1",hackoladePlugin:"1.2.0"},contributes:{target:{applicationTarget:"Oracle",title:"Oracle",versions:["12c","18c","19c","21c","23ai"]},features:{nestedCollections:!1,disablePatternField:!0,disableMultipleTypes:!0,enableForwardEngineering:!0,disableReverseEngineering:!1,disableChoices:!0,enableJsonType:!0,useJsonTypesWithComplexTypes:!0,reverseSchemaIntoOneColumn:!0,disableDenormalization:!0,enableComplexTypesNormalization:!0,restrictNestedFieldsAsPrimaryKey:!1,views:{enabled:!0,viewLevel:"model",disablePipelines:!0},relationships:{compositeRelationships:!0},enableFetchSystemEntitiesCheckbox:!0,discoverRelationships:!0}},description:"Hackolade plugin for Oracle and Autonomous databases",disabled:!1,dependencies:{"adm-zip":"0.5.9",lodash:"4.17.21",oracledb:"6.0.3",perplex:"0.11.0"},"lint-staged":{"*.{js,json}":"prettier --write"},"simple-git-hooks":{"pre-commit":"npx lint-staged","pre-push":"npx eslint ."},scripts:{lint:"eslint . --max-warnings=0",package:"node esbuild.package.js"},devDependencies:{"@hackolade/hck-esbuild-plugins-pack":"0.0.1","@typescript-eslint/eslint-plugin":"7.11.0","@typescript-eslint/parser":"7.11.0",esbuild:"0.20.2","esbuild-plugin-clean":"1.0.1","esbuild-plugin-copy":"2.1.1",eslint:"8.57.0","eslint-config-prettier":"9.1.0","eslint-formatter-teamcity":"^1.0.0","eslint-plugin-import":"^2.26.0","eslint-plugin-prettier":"5.1.3","eslint-plugin-unused-imports":"3.2.0","lint-staged":"14.0.1",prettier:"3.2.5","simple-git-hooks":"2.11.1"}}});var tT=m((nR,eT)=>{"use strict";var At=require("os"),Yh=$a(),Bh=T(i=>i<10?"0"+i:i,"prefixZero"),Uh=T(i=>i.reduce((e,t)=>Math.max(e,t.speed),0),"maxClock"),wh=T(i=>Math.floor(i/3600)+":"+Bh(parseInt((i/3600-Math.floor(i/3600))*60)),"toTime"),Mh=T(()=>Yh.version,"getPluginVersion"),Vh=T(i=>`Date: ${new Date}
Application version: ${i}
Plugin version: ${Mh()}

System information:
 Hostname:  ${At.hostname()}
 Platform:  ${At.platform()} ${At.arch()}
 Release:   ${At.release()}
 Uptime:    ${wh(At.uptime())}
 Total RAM: ${(At.totalmem()/1073741824).toFixed(2)} GB
 CPU Model: ${At.cpus()[0].model}
 CPU Clock: ${Uh(At.cpus())} MHZ
 CPU Cores: ${At.cpus().length} cores

`,"getSystemInfo"),xh=T((i,e,t)=>{t.clear(),t.log("info",Vh(e.appVersion),i),t.log("info",e,"connectionInfo",e.hiddenKeys)},"logInfo");eT.exports=xh});var rT=m((oR,sT)=>{sT.exports={VERSION_MAJOR:6,VERSION_MINOR:0,VERSION_PATCH:3,VERSION_SUFFIX:""}});var Be=m((aR,nT)=>{"use strict";var yt=rT(),iT=yt.VERSION_MAJOR+"."+yt.VERSION_MINOR+"."+yt.VERSION_PATCH+yt.VERSION_SUFFIX;nT.exports={VERSION_MAJOR:yt.VERSION_MAJOR,VERSION_MINOR:yt.VERSION_MINOR,VERSION_PATCH:yt.VERSION_PATCH,VERSION_SUFFIX:yt.VERSION_SUFFIX,VERSION_STRING:iT,DEFAULT_DRIVER_NAME:"node-oracledb : "+iT,DEFAULT_ERROR_URL:"https://node-oracledb.readthedocs.io/en/latest/user_guide/installation.html",DEFAULT_MAX_SIZE_FOR_OUT_BINDS:200,CSFRM_IMPLICIT:1,CSFRM_NCHAR:2,CQN_OPCODE_ALL_OPS:0,CQN_OPCODE_ALL_ROWS:1,CQN_OPCODE_ALTER:16,CQN_OPCODE_DELETE:8,CQN_OPCODE_DROP:32,CQN_OPCODE_INSERT:2,CQN_OPCODE_UPDATE:4,DEFAULT:0,STMT_TYPE_UNKNOWN:0,STMT_TYPE_SELECT:1,STMT_TYPE_UPDATE:2,STMT_TYPE_DELETE:3,STMT_TYPE_INSERT:4,STMT_TYPE_CREATE:5,STMT_TYPE_DROP:6,STMT_TYPE_ALTER:7,STMT_TYPE_BEGIN:8,STMT_TYPE_DECLARE:9,STMT_TYPE_CALL:10,STMT_TYPE_EXPLAIN_PLAN:15,STMT_TYPE_MERGE:16,STMT_TYPE_ROLLBACK:17,STMT_TYPE_COMMIT:21,SHUTDOWN_MODE_DEFAULT:0,SHUTDOWN_MODE_TRANSACTIONAL:1,SHUTDOWN_MODE_TRANSACTIONAL_LOCAL:2,SHUTDOWN_MODE_IMMEDIATE:3,SHUTDOWN_MODE_ABORT:4,SHUTDOWN_MODE_FINAL:5,STARTUP_MODE_DEFAULT:0,STARTUP_MODE_FORCE:1,STARTUP_MODE_RESTRICT:2,SUBSCR_EVENT_TYPE_SHUTDOWN:2,SUBSCR_EVENT_TYPE_SHUTDOWN_ANY:3,SUBSCR_EVENT_TYPE_STARTUP:1,SUBSCR_EVENT_TYPE_DEREG:5,SUBSCR_EVENT_TYPE_OBJ_CHANGE:6,SUBSCR_EVENT_TYPE_QUERY_CHANGE:7,SUBSCR_EVENT_TYPE_AQ:100,SUBSCR_GROUPING_CLASS_TIME:1,SUBSCR_GROUPING_TYPE_SUMMARY:1,SUBSCR_GROUPING_TYPE_LAST:2,SUBSCR_NAMESPACE_AQ:1,SUBSCR_NAMESPACE_DBCHANGE:2,SUBSCR_QOS_BEST_EFFORT:16,SUBSCR_QOS_DEREG_NFY:2,SUBSCR_QOS_QUERY:8,SUBSCR_QOS_RELIABLE:1,SUBSCR_QOS_ROWIDS:4,SYSASM:32768,SYSBACKUP:131072,SYSDBA:2,SYSDG:262144,SYSKM:524288,SYSOPER:4,SYSPRELIM:8,SYSRAC:1048576,BIND_IN:3001,BIND_INOUT:3002,BIND_OUT:3003,OUT_FORMAT_ARRAY:4001,OUT_FORMAT_OBJECT:4002,SODA_COLL_MAP_MODE:5001,POOL_STATUS_OPEN:6e3,POOL_STATUS_DRAINING:6001,POOL_STATUS_CLOSED:6002,POOL_STATUS_RECONFIGURING:6003,PURITY_DEFAULT:0,PURITY_NEW:1,PURITY_SELF:2,AQ_DEQ_NO_WAIT:0,AQ_DEQ_WAIT_FOREVER:4294967295,AQ_DEQ_MODE_BROWSE:1,AQ_DEQ_MODE_LOCKED:2,AQ_DEQ_MODE_REMOVE:3,AQ_DEQ_MODE_REMOVE_NO_DATA:4,AQ_DEQ_NAV_FIRST_MSG:1,AQ_DEQ_NAV_NEXT_TRANSACTION:2,AQ_DEQ_NAV_NEXT_MSG:3,AQ_MSG_DELIV_MODE_PERSISTENT:1,AQ_MSG_DELIV_MODE_BUFFERED:2,AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED:3,AQ_MSG_STATE_READY:0,AQ_MSG_STATE_WAITING:1,AQ_MSG_STATE_PROCESSED:2,AQ_MSG_STATE_EXPIRED:3,AQ_VISIBILITY_IMMEDIATE:1,AQ_VISIBILITY_ON_COMMIT:2,TPC_BEGIN_JOIN:2,TPC_BEGIN_NEW:1,TPC_BEGIN_PROMOTE:8,TPC_BEGIN_RESUME:4,TPC_END_NORMAL:0,TPC_END_SUSPEND:1048576}});var U=m((TR,_E)=>{"use strict";var Fh=require("util"),_T="NJS",oT=2,aT=3,Ti=4,ci=5,Ei=7,li=9,TT=10,cT=11,ET=12,lT=13,NT=15,ST=16,hT=17,AT=18,uT=19,PT=21,fT=22,dT=23,pT=24,RT=34,DT=35,mT=36,IT=37,CT=40,OT=41,gT=42,LT=43,yT=44,YT=45,BT=46,UT=47,wT=52,MT=55,VT=56,xT=57,FT=58,kT=59,bT=60,GT=61,HT=62,qT=63,vT=64,KT=65,WT=66,zT=67,Ni=68,XT=69,QT=70,jT=75,JT=76,ZT=78,$T=80,ec=81,tc=82,sc=83,rc=84,ic=85,nc=86,Si=87,hi=89,_c=90,oc=91,ac=92,Ai=95,Tc=97,cc=98,Ec=99,lc=100,Nc=101,Sc=102,hc=103,ui=104,Pi=105,Ac=106,fi=107,di=108,uc=109,Pc=110,fc=111,dc=112,pc=113,Rc=114,pi=115,Dc=116,mc=117,Ic=118,Cc=119,Oc=120,gc=121,Lc=122,Ri=123,yc=125,Yc=126,Bc=127,Uc=128,Di=129,wc=130,mi=131,Ii=132,Ci=133,Mc=134,Vc=135,xc=136,Fc=137,kc=138,vt=500,bc=501,Gc=503,Hc=504,qc=505,vc=506,Kc=507,Wc=508,zc=509,Xc=510,Qc=511,jc=512,Jc=513,Zc=514,$c=515,eE=516,tE=517,sE=518,rE=519,iE=520,nE=521,De=new Map;De.set("DPI-1010",vt);De.set("DPI-1024",[Ii,"at index ([0-9]+) does"]);De.set("DPI-1040",di);De.set("DPI-1044",pi);De.set("DPI-1055",Pi);De.set("DPI-1063",Ai);De.set("DPI-1067",[Ri,"call timeout of ([0-9]+) ms"]);De.set("DPI-1080",vt);De.set("OCI-22303",[Di,'type "([^"]*"."[^"]*)"']);De.set("OCI-22164",Ci);De.set("OCI-22165",[mi,/index \[([0-9]+)\] must be in the range of \[([0-9]+)\] to \[([0-9]+)\]/]);De.set("ORA-00028",vt);De.set("ORA-00600",vt);De.set("ORA-24338",fi);De.set("ORA-24422",ui);De.set("ORA-25708",Si);var d=new Map;d.set(oT,"invalid pool");d.set(aT,"invalid connection");d.set(Ti,'invalid value for property "%s"');d.set(ci,"invalid value for parameter %d");d.set(Ei,'invalid value for "%s" in parameter %d');d.set(li,"invalid number of parameters");d.set(TT,"unsupported data type %d in column %d");d.set(cT,"encountered bind value and type mismatch");d.set(ET,"encountered invalid bind data type in parameter %d");d.set(lT,"invalid bind direction");d.set(NT,"type was not specified for conversion");d.set(ST,"buffer is too small for OUT binds");d.set(hT,"concurrent operations on ResultSet are not allowed");d.set(AT,"invalid ResultSet");d.set(uT,"ResultSet cannot be returned for non-query statements");d.set(PT,"invalid type for conversion specified");d.set(fT,"invalid Lob");d.set(dT,"concurrent operations on a Lob are not allowed");d.set(pT,"memory allocation failed");d.set(RT,"data type is unsupported for array bind");d.set(DT,"maxArraySize is required for IN OUT array bind");d.set(mT,'length of given array is greater than "maxArraySize"');d.set(IT,'invalid data type at array index %d for bind ":%s"');d.set(CT,'connection request timeout. Request exceeded "queueTimeout" of %d');d.set(OT,"cannot convert ResultSet to QueryStream after invoking methods");d.set(gT,"cannot invoke ResultSet methods after converting to QueryStream");d.set(LT,"ResultSet already converted to QueryStream");d.set(yT,'bind object must contain one of the following attributes: "dir", "type", "maxSize", or "val"');d.set(YT,"cannot load a node-oracledb Thick mode binary for Node.js. Please try using Thin mode. %s");d.set(BT,'pool alias "%s" already exists in the connection pool cache');d.set(UT,'pool alias "%s" not found in connection pool cache');d.set(wT,"invalid data type at array index %d for bind position %d");d.set(MT,"binding by position and name cannot be mixed");d.set(VT,"maxSize for bind position %d must be specified and be greater than zero");d.set(xT,'maxSize for bind "%s" must be specified and greater than zero');d.set(FT,"maxSize of %d is too small for value of length %d in row %d");d.set(kT,"type must be specified for bind position %d");d.set(bT,'type must be specified for bind "%s"');d.set(GT,"invalid subscription");d.set(HT,"subscription notification callback missing");d.set(qT,"subscription notification SQL missing");d.set(vT,"connection pool is closing");d.set(KT,"connection pool was closed");d.set(WT,"invalid SODA document cursor");d.set(zT,"a pre-built node-oracledb Thick mode binary was not found for %s");d.set(Ni,"invalid error number %d supplied");d.set(XT,"node-oracledb %s requires Node.js %s or later");d.set(QT,"message must be a string, buffer, database object or an object containing a payload property which itself is a string, buffer or database object");d.set(jT,'only one of "connectString" and "connectionString" can be used');d.set(JT,'connection request rejected. Pool queue length "queueMax" %d reached');d.set(ZT,"unsupported data type %d in JSON value");d.set($T,'only one of "user" and "username" can be used');d.set(ec,"concurrent operations on a connection are disabled");d.set(tc,"connection pool is being reconfigured");d.set(sc,"pool statistics are not enabled");d.set(rc,"invalid access token");d.set(ic,'invalid connection pool configuration with token-based authentication. The "homogeneous" and "externalAuth" attributes must be set to true');d.set(nc,'invalid standalone configuration with token-based authentication. The "externalAuth" attribute must be set to true');d.set(Si,"access token has expired");d.set(hi,"%s is not supported by node-oracledb in Thin mode");d.set(_c,"initOracleClient() was already called with different arguments");d.set(oc,"file %s is missing");d.set(ac,'"poolMax" %d must be greater than or equal to "poolMin" %d');d.set(Ai,'setting "batchErrors" or "dmlRowCounts" to true is only permitted for DML statements');d.set(Tc,'no bind placeholder named ":%s" was found in the statement text');d.set(cc,"%s positional bind values are required but %s were provided");d.set(Ec,"internal error: buffer of length %s insufficient to hold %s bytes");d.set(lc,"national character set id %d is not supported by node-oracledb in Thin mode");d.set(Nc,"no credentials specified");d.set(Sc,"unexpected end of data: want %d bytes but only %d bytes are available");d.set(hc,"unexpected message type %d received at position %d of packet %d");d.set(ui,"connection pool cannot be closed because connections are busy");d.set(Pi,"value is not a number (NaN) and cannot be used in Oracle Database numbers");d.set(Ac,"internal error: %s");d.set(fi,"invalid cursor");d.set(di,"LOB was already closed");d.set(uc,"invalid type number %d");d.set(Pc,"invalid Oracle type number %d [csfrm: %d]");d.set(fc,"internal error: read a negative integer when expecting a positive integer at position %d of packet %d");d.set(dc,"internal error: read integer of length %d when expecting integer of no more than length %d at position %d of packet %d");d.set(pc,"unexpected data received: %s");d.set(Rc,"OSON field names may not exceed 255 UTF-8 encoded bytes");d.set(pi,"value cannot be represented as an Oracle Database number");d.set(Dc,"password verifier type 0x%s is not supported by node-oracledb in Thin mode");d.set(mc,"invalid private key. Headers and footers are not allowed");d.set(Ic,"node-oracledb Thick mode cannot be enabled because a Thin mode connection has already been created");d.set(Cc,"conversion from type %s to type %s is not supported");d.set(Oc,"fetchTypeHandler return value must be an object");d.set(gc,'fetchTypeHandler return value attribute "type" must be a valid database type');d.set(Lc,'fetchTypeHandler return value attribute "converter" must be a function');d.set(Ri,"call timeout of %d ms exceeded");d.set(yc,'"connectString" cannot be empty or undefined. Bequeath connections are not supported in Thin mode');d.set(Yc,"OSON version %s is not supported");d.set(Bc,"internal error: unknown server side piggyback opcode %s");d.set(Uc,'internal error: unknown column type name "%s"');d.set(Di,'invalid object type name: "%s"');d.set(wc,"Oracle TDS data type %d is not supported");d.set(mi,"given index %d must be in the range of %d to %d");d.set(Ii,"element at index %d does not exist");d.set(Ci,"cannot delete elements of a VARRAY");d.set(Mc,"value is of wrong type for attribute %s of object %s");d.set(Vc,"value is of wrong type for an element of object %s");d.set(xc,"user name and password cannot be set when using external authentication");d.set(Fc,'a bind variable replacement value for placeholder ":%s" was not provided');d.set(kc,"connections to this database server version are not supported by node-oracledb in Thin mode");d.set(vt,"connection to the Oracle Database was broken");d.set(bc,`connection to host %s port %d terminated unexpectedly. (CONNECTION_ID=%s)
%s`);d.set(Gc,`connection to host %s port %d could not be established. (CONNECTION_ID=%s)
%s`);d.set(Hc,`connection establishment through a web proxy at host %s port %d failed. (CONNECTION_ID=%s)
%s`);d.set(qc,"unable to initiate TLS connection. Please check if wallet credentials are valid");d.set(vc,`connection to host %s port %d encountered TLS handshake failure. (CONNECTION_ID=%s)
%s`);d.set(Kc,"TLS detected an invalid certificate. Server DN in certificate does not match the specified DN");d.set(Wc,"TLS detected an invalid certificate. %s not present in certificate");d.set(zc,"internal error: invalid packet type or malformed packet received");d.set(Xc,'connection to host %s port %d timed out. Request exceeded "%s" of %d seconds. (CONNECTION_ID=%s)');d.set(Qc,`connection to listener at host %s port %d was refused. (CONNECTION_ID=%s)
Cause: %s`);d.set(jc,`invalid connection string parameters.
%s`);d.set(Jc,"error received through in-band notification: %s");d.set(Zc,"syntax error in connection string");d.set($c,"error in Easy Connect connection string: %s: %s");d.set(eE,"no configuration directory set or available to search for tnsnames.ora");d.set(tE,'cannot connect to Oracle Database. Unable to find "%s" in "%s"');d.set(sE,'cannot connect to Oracle Database. Service "%s" is not registered with the listener at host %s port %s. (CONNECTION_ID=%s)');d.set(rE,'cannot connect to Oracle Database. SID "%s" is not registered with the listener at host %s port %s. (CONNECTION_ID=%s)');d.set(iE,"cannot connect to Oracle Database. File tnsnames.ora not found in %s");d.set(nE,"connection to host %s port %d received end-of-file on communication channel. (CONNECTION_ID=%s)");function ms(i){if(!i){let e=Array.prototype.slice.call(arguments,1);Oi(...e)}}T(ms,"assert");function kh(i,e,t){ms(i.length>=e&&i.length<=t,li)}T(kh,"assertArgCount");function bh(i,e,t){i[t]!==void 0&&ts(typeof i[t]=="boolean",e,t)}T(bh,"assertParamPropBool");function Gh(i,e,t){i[t]!==void 0&&ts(typeof i[t]=="function",e,t)}T(Gh,"assertParamPropFunction");function Hh(i,e,t){i[t]!==void 0&&ts(Number.isInteger(i[t]),e,t)}T(Hh,"assertParamPropInt");function qh(i,e,t){i[t]!==void 0&&ts(Number.isInteger(i[t])&&i[t]>=0,e,t)}T(qh,"assertParamPropUnsignedInt");function vh(i,e,t){i[t]!==void 0&&ts(typeof i[t]=="string",e,t)}T(vh,"assertParamPropString");function ts(i,e,t){ms(i,Ei,t,e)}T(ts,"assertParamPropValue");function Kh(i,e){ms(i,ci,e)}T(Kh,"assertParamValue");function Wh(i,e){ms(i,Ti,e)}T(Wh,"assertPropValue");function Zs(i){let e=d.get(i),t=[...arguments];e||(t=[void 0,i],i=Ni,e=d.get(i));let s=i.toString().padStart(3,"0"),r=`${_T}-${s}`;t[0]=`${r}: ${e}`;let _=new Error(Fh.format(...t));return _.code=r,Error.captureStackTrace(_,Zs),_}T(Zs,"getErr");function Oi(){throw Zs(...arguments)}T(Oi,"throwErr");function zh(i){Oi(hi,i)}T(zh,"throwNotImplemented");function Xh(i,e){if(!i.code){let t=i.message.indexOf(":");if(t>0&&(i.code=i.message.substr(0,t),De.has(i.code))){let s=[],r,_=De.get(i.code);if(typeof _=="number")r=_;else{r=_[0];let a=_[1],c=i.message.match(a);c&&(s=c.slice(1))}let o=Zs(r,...s);i.code=o.code,i.message=o.message+`
`+i.message}}return i.requiresStackCapture&&(delete i.requiresStackCapture,Error.captureStackTrace(i,e)),i}T(Xh,"transformErr");_E.exports={ERR_INVALID_POOL:oT,ERR_INVALID_CONNECTION:aT,ERR_INVALID_PROPERTY_VALUE:Ti,ERR_INVALID_PARAMETER_VALUE:ci,ERR_INVALID_PROPERTY_VALUE_IN_PARAM:Ei,ERR_INVALID_NUMBER_OF_PARAMETERS:li,ERR_UNSUPPORTED_DATA_TYPE:TT,ERR_BIND_VALUE_AND_TYPE_MISMATCH:cT,ERR_INVALID_BIND_DATA_TYPE:ET,ERR_INVALID_BIND_DIRECTION:lT,ERR_NO_TYPE_FOR_CONVERSION:NT,ERR_INSUFFICIENT_BUFFER_FOR_BINDS:ST,ERR_BUSY_RS:hT,ERR_INVALID_RS:AT,ERR_NOT_A_QUERY:uT,ERR_INVALID_TYPE_FOR_CONVERSION:PT,ERR_INVALID_LOB:fT,ERR_BUSY_LOB:dT,ERR_INSUFFICIENT_MEMORY:pT,ERR_INVALID_TYPE_FOR_ARRAY_BIND:RT,ERR_REQUIRED_MAX_ARRAY_SIZE:DT,ERR_INVALID_ARRAY_SIZE:mT,ERR_INCOMPATIBLE_TYPE_ARRAY_BIND:IT,ERR_CONN_REQUEST_TIMEOUT:CT,ERR_CANNOT_CONVERT_RS_TO_STREAM:OT,ERR_CANNOT_INVOKE_RS_METHODS:gT,ERR_RS_ALREADY_CONVERTED:LT,ERR_INVALID_BIND_UNIT:yT,ERR_CANNOT_LOAD_BINARY:YT,ERR_POOL_WITH_ALIAS_ALREADY_EXISTS:BT,ERR_POOL_WITH_ALIAS_NOT_FOUND:UT,ERR_INCOMPATIBLE_TYPE_ARRAY_INDEX_BIND:wT,ERR_MIXED_BIND:MT,ERR_MISSING_MAX_SIZE_BY_POS:VT,ERR_MISSING_MAX_SIZE_BY_NAME:xT,ERR_MAX_SIZE_TOO_SMALL:FT,ERR_MISSING_TYPE_BY_POS:kT,ERR_MISSING_TYPE_BY_NAME:bT,ERR_INVALID_SUBSCR:GT,ERR_MISSING_SUBSCR_CALLBACK:HT,ERR_MISSING_SUBSCR_SQL:qT,ERR_POOL_CLOSING:vT,ERR_POOL_CLOSED:KT,ERR_INVALID_SODA_DOC_CURSOR:WT,ERR_NO_BINARY_AVAILABLE:zT,ERR_INVALID_ERR_NUM:Ni,ERR_NODE_TOO_OLD:XT,ERR_INVALID_AQ_MESSAGE:QT,ERR_DBL_CONNECT_STRING:jT,ERR_QUEUE_MAX_EXCEEDED:JT,ERR_UNSUPPORTED_DATA_TYPE_IN_JSON:ZT,ERR_DBL_USER:$T,ERR_CONCURRENT_OPS:ec,ERR_POOL_RECONFIGURING:tc,ERR_POOL_STATISTICS_DISABLED:sc,ERR_TOKEN_BASED_AUTH:rc,ERR_POOL_TOKEN_BASED_AUTH:ic,ERR_CONN_TOKEN_BASED_AUTH:nc,ERR_TOKEN_HAS_EXPIRED:Si,ERR_NOT_IMPLEMENTED:hi,ERR_INIT_ORACLE_CLIENT_ARGS:_c,ERR_MISSING_FILE:oc,ERR_INVALID_NUMBER_OF_CONNECTIONS:ac,ERR_EXEC_MODE_ONLY_FOR_DML:Ai,ERR_CONNECTION_CLOSED:vt,ERR_CONNECTION_LOSTCONTACT:bc,ERR_CONNECTION_INCOMPLETE:Gc,ERR_PROXY_CONNECTION_FAILURE:Hc,ERR_TLS_INIT_FAILURE:qc,ERR_TLS_AUTH_FAILURE:vc,ERR_TLS_DNMATCH_FAILURE:Kc,ERR_TLS_HOSTMATCH_FAILURE:Wc,ERR_INVALID_PACKET:zc,ERR_CONNECTION_TIMEDOUT:Xc,ERR_CONNECTION_REFUSED:Qc,ERR_INVALID_CONNECT_STRING_PARAMETERS:jc,ERR_CONNECTION_INBAND:Jc,ERR_INVALID_CONNECT_STRING_SYNTAX:Zc,ERR_INVALID_EZCONNECT_SYNTAX:$c,ERR_NO_CONFIG_DIR:eE,ERR_TNS_ENTRY_NOT_FOUND:tE,ERR_CONNECTION_EOF:nE,ERR_INVALID_BIND_NAME:Tc,ERR_WRONG_NUMBER_OF_POSITIONAL_BINDS:cc,ERR_BUFFER_LENGTH_INSUFFICIENT:Ec,ERR_NCHAR_CS_NOT_SUPPORTED:lc,ERR_MISSING_CREDENTIALS:Nc,ERR_UNEXPECTED_END_OF_DATA:Sc,ERR_UNEXPECTED_MESSAGE_TYPE:hc,ERR_POOL_HAS_BUSY_CONNECTIONS:ui,ERR_INTERNAL:Ac,ERR_INVALID_REF_CURSOR:fi,ERR_UNSUPPORTED_VERIFIER_TYPE:Dc,ERR_NAN_VALUE:Pi,ERR_LOB_CLOSED:di,ERR_ORACLE_NUMBER_NO_REPR:pi,ERR_INVALID_SERVICE_NAME:sE,ERR_INVALID_SID:rE,ERR_TNS_NAMES_FILE_MISSING:iE,ERR_INVALID_TYPE_NUM:uc,ERR_INVALID_ORACLE_TYPE_NUM:Pc,ERR_UNEXPECTED_NEGATIVE_INTEGER:fc,ERR_INTEGER_TOO_LARGE:dc,ERR_UNEXPECTED_DATA:pc,ERR_OSON_FIELD_NAME_LIMITATION:Rc,ERR_OSON_VERSION_NOT_SUPPORTED:Yc,ERR_INVALID_PRIVATE_KEY:mc,ERR_THIN_CONNECTION_ALREADY_CREATED:Ic,ERR_UNSUPPORTED_CONVERSION:Cc,ERR_FETCH_TYPE_HANDLER_RETURN_VALUE:Oc,ERR_FETCH_TYPE_HANDLER_TYPE:gc,ERR_FETCH_TYPE_HANDLER_CONVERTER:Lc,ERR_CALL_TIMEOUT_EXCEEDED:Ri,ERR_EMPTY_CONNECT_STRING:yc,ERR_UNKOWN_SERVER_SIDE_PIGGYBACK:Bc,ERR_UNKNOWN_COLUMN_TYPE_NAME:Uc,ERR_INVALID_OBJECT_TYPE_NAME:Di,ERR_TDS_TYPE_NOT_SUPPORTED:wc,ERR_INVALID_COLL_INDEX_SET:mi,ERR_INVALID_COLL_INDEX_GET:Ii,ERR_DELETE_ELEMENTS_OF_VARRAY:Ci,ERR_WRONG_VALUE_FOR_DBOBJECT_ATTR:Mc,ERR_WRONG_VALUE_FOR_DBOBJECT_ELEM:Vc,ERR_WRONG_CRED_FOR_EXTAUTH:xc,ERR_MISSING_BIND_VALUE:Fc,ERR_SERVER_VERSION_NOT_SUPPORTED:kc,ERR_CONNECTION_CLOSED_CODE:`${_T}-${vt}`,assert:ms,assertArgCount:kh,assertParamPropBool:bh,assertParamPropFunction:Gh,assertParamPropInt:Hh,assertParamPropString:vh,assertParamPropUnsignedInt:qh,assertParamPropValue:ts,assertParamValue:Kh,assertPropValue:Wh,getErr:Zs,throwErr:Oi,throwNotImplemented:zh,transformErr:Xh}});var He=m((ER,TE)=>{"use strict";var Mt=Be(),ns=U(),Qh=require("util"),oE=new Map,aE=new Map,Je=new Map,Ui=class Ui{constructor(e,t,s,r){this.num=e,this.name=t,this.columnTypeName=s,this._bufferSizeFactor=r.bufferSizeFactor||0,this._oraTypeNum=r.oraTypeNum||0,this._csfrm=r.csfrm||0,oE.set(e,this);let _=(r.csfrm||0)*256+r.oraTypeNum;aE.set(_,this),Je.set(s,this)}[Symbol.toPrimitive](e){switch(e){case"number":return this.num;default:return this.toString()}}[Qh.inspect.custom](){return this.toString()}toString(){return`[DbType ${this.name}]`}};T(Ui,"DbType");var W=Ui;function jh(i){let e=Je.get(i);return e||ns.throwErr(ns.ERR_UNKNOWN_COLUMN_TYPE_NAME,i),e}T(jh,"getTypeByColumnTypeName");function Jh(i){let e=oE.get(i);return e||ns.throwErr(ns.ERR_INVALID_TYPE_NUM,i),e}T(Jh,"getTypeByNum");function Zh(i,e){let t=(e||0)*256+i,s=aE.get(t);return s||ns.throwErr(ns.ERR_INVALID_ORACLE_TYPE_NUM,i,e),s}T(Zh,"getTypeByOraTypeNum");var gi=new W(2020,"DB_TYPE_BFILE","BFILE",{oraTypeNum:114,bufferSizeFactor:112}),$s=new W(2008,"DB_TYPE_BINARY_DOUBLE","BINARY_DOUBLE",{oraTypeNum:101,bufferSizeFactor:8}),er=new W(2007,"DB_TYPE_BINARY_FLOAT","BINARY_FLOAT",{oraTypeNum:100,bufferSizeFactor:4}),Is=new W(2009,"DB_TYPE_BINARY_INTEGER","BINARY_INTEGER",{oraTypeNum:3,bufferSizeFactor:22}),tr=new W(2019,"DB_TYPE_BLOB","BLOB",{oraTypeNum:113,bufferSizeFactor:112}),sr=new W(2022,"DB_TYPE_BOOLEAN","BOOLEAN",{oraTypeNum:252,bufferSizeFactor:4}),ss=new W(2003,"DB_TYPE_CHAR","CHAR",{oraTypeNum:96,csfrm:Mt.CSFRM_IMPLICIT,bufferSizeFactor:4}),rr=new W(2017,"DB_TYPE_CLOB","CLOB",{oraTypeNum:112,csfrm:Mt.CSFRM_IMPLICIT,bufferSizeFactor:112}),Li=new W(2021,"DB_TYPE_CURSOR","CURSOR",{oraTypeNum:102,bufferSizeFactor:4}),ir=new W(2011,"DB_TYPE_DATE","DATE",{oraTypeNum:12,bufferSizeFactor:7}),yi=new W(2015,"DB_TYPE_INTERVAL_DS","INTERVAL DAY TO SECOND",{oraTypeNum:183,bufferSizeFactor:11}),Yi=new W(2016,"DB_TYPE_INTERVAL_YM","INTERVAL YEAR TO MONTH",{oraTypeNum:182}),nr=new W(2027,"DB_TYPE_JSON","JSON",{oraTypeNum:119}),ut=new W(2024,"DB_TYPE_LONG","LONG",{oraTypeNum:8,csfrm:Mt.CSFRM_IMPLICIT,bufferSizeFactor:2**31-1}),Yt=new W(2031,"DB_TYPE_LONG_NVARCHAR","LONG",{oraTypeNum:8,csfrm:Mt.CSFRM_NCHAR,bufferSizeFactor:2**31-1}),Bt=new W(2025,"DB_TYPE_LONG_RAW","LONG RAW",{oraTypeNum:24,bufferSizeFactor:2**31-1}),Ut=new W(2004,"DB_TYPE_NCHAR","NCHAR",{oraTypeNum:96,csfrm:Mt.CSFRM_NCHAR,bufferSizeFactor:4}),_r=new W(2018,"DB_TYPE_NCLOB","NCLOB",{oraTypeNum:112,csfrm:Mt.CSFRM_NCHAR,bufferSizeFactor:112}),ft=new W(2010,"DB_TYPE_NUMBER","NUMBER",{oraTypeNum:2,bufferSizeFactor:22}),Pt=new W(2002,"DB_TYPE_NVARCHAR","NVARCHAR2",{oraTypeNum:1,csfrm:Mt.CSFRM_NCHAR,bufferSizeFactor:4}),Bi=new W(2023,"DB_TYPE_OBJECT","OBJECT",{oraTypeNum:109}),rs=new W(2006,"DB_TYPE_RAW","RAW",{oraTypeNum:23,bufferSizeFactor:1}),is=new W(2005,"DB_TYPE_ROWID","ROWID",{oraTypeNum:11,bufferSizeFactor:18}),or=new W(2012,"DB_TYPE_TIMESTAMP","TIMESTAMP",{oraTypeNum:180,bufferSizeFactor:11}),at=new W(2014,"DB_TYPE_TIMESTAMP_LTZ","TIMESTAMP WITH LOCAL TIME ZONE",{oraTypeNum:231,bufferSizeFactor:11}),wt=new W(2013,"DB_TYPE_TIMESTAMP_TZ","TIMESTAMP WITH TIME ZONE",{oraTypeNum:181,bufferSizeFactor:13}),ar=new W(2030,"DB_TYPE_UROWID","UROWID",{oraTypeNum:208}),z=new W(2001,"DB_TYPE_VARCHAR","VARCHAR2",{oraTypeNum:1,csfrm:Mt.CSFRM_IMPLICIT,bufferSizeFactor:4}),$h=new Map([[$s,new Map([[z,z]])],[er,new Map([[z,z]])],[tr,new Map([[rs,Bt],[Bt,Bt]])],[ss,new Map([[z,z]])],[rr,new Map([[z,ut],[ut,ut]])],[ir,new Map([[z,z],[at,at]])],[nr,new Map([[z,z]])],[ut,new Map([[z,ut]])],[Bt,new Map([[rs,Bt]])],[Ut,new Map([[ss,Ut],[z,Pt],[Pt,Pt]])],[_r,new Map([[z,Yt],[Pt,Yt],[ut,Yt],[Yt,Yt]])],[ft,new Map([[z,z]])],[Pt,new Map([[ss,Ut],[Ut,Ut],[z,Pt]])],[rs,new Map([[z,z]])],[is,new Map([[z,is]])],[or,new Map([[z,z],[at,at]])],[at,new Map([[z,z],[wt,wt]])],[wt,new Map([[z,z],[at,at]])],[ar,new Map([[z,is]])]]),eA=new Map([[gi,gi],[$s,$s],[er,er],[Is,Is],[tr,tr],[sr,sr],[ss,ss],[rr,rr],[Li,Li],[ir,ir],[yi,yi],[Yi,Yi],[nr,nr],[ut,ut],[Yt,Yt],[Bt,Bt],[Ut,Ut],[_r,_r],[ft,ft],[Pt,Pt],[Bi,Bi],[rs,rs],[is,is],[or,or],[at,wt],[wt,wt],[ar,ar],[z,z]]);Je.set("DOUBLE PRECISION",ft);Je.set("FLOAT",ft);Je.set("INTEGER",ft);Je.set("PL/SQL BOOLEAN",sr);Je.set("PL/SQL BINARY INTEGER",Is);Je.set("PL/SQL PLS INTEGER",Is);Je.set("REAL",ft);Je.set("SMALLINT",ft);Je.set("TIMESTAMP WITH LOCAL TZ",at);Je.set("TIMESTAMP WITH TZ",wt);TE.exports={DbType:W,DB_TYPE_BFILE:gi,DB_TYPE_BINARY_DOUBLE:$s,DB_TYPE_BINARY_FLOAT:er,DB_TYPE_BINARY_INTEGER:Is,DB_TYPE_BLOB:tr,DB_TYPE_BOOLEAN:sr,DB_TYPE_CHAR:ss,DB_TYPE_CLOB:rr,DB_TYPE_CURSOR:Li,DB_TYPE_DATE:ir,DB_TYPE_INTERVAL_DS:yi,DB_TYPE_INTERVAL_YM:Yi,DB_TYPE_JSON:nr,DB_TYPE_LONG:ut,DB_TYPE_LONG_NVARCHAR:Yt,DB_TYPE_LONG_RAW:Bt,DB_TYPE_NCHAR:Ut,DB_TYPE_NCLOB:_r,DB_TYPE_NUMBER:ft,DB_TYPE_NVARCHAR:Pt,DB_TYPE_OBJECT:Bi,DB_TYPE_RAW:rs,DB_TYPE_ROWID:is,DB_TYPE_TIMESTAMP:or,DB_TYPE_TIMESTAMP_LTZ:at,DB_TYPE_TIMESTAMP_TZ:wt,DB_TYPE_UROWID:ar,DB_TYPE_VARCHAR:z,DB_TYPE_CONVERSION_MAP:$h,DB_TYPE_FETCH_TYPE_MAP:eA,getTypeByColumnTypeName:jh,getTypeByNum:Jh,getTypeByOraTypeNum:Zh}});var cE=m((NR,tA)=>{tA.exports={name:"oracledb",version:"6.0.3",description:"A Node.js module for Oracle Database access from JavaScript and TypeScript",license:"(Apache-2.0 OR UPL-1.0)",homepage:"http://oracle.github.io/node-oracledb/",keywords:["Oracle","Database","official","DB","SQL","JSON","PL/SQL","SODA","OCI","API","client","library","driver","add-on","extension","binding","interface","adapter","module"],repository:{type:"git",url:"git://github.com/oracle/node-oracledb.git"},scripts:{install:"node package/install.js",prune:"node package/prunebinaries.js"},engines:{node:">=14.6"},maintainers:[{name:"Oracle Corp."}],bugs:{url:"https://github.com/oracle/node-oracledb/issues"},main:"./index.js"}});var ve=m((SR,AE)=>{"use strict";var{Buffer:Cs}=require("buffer"),Ae=U(),qe=require("process"),sA=require("util"),rA=He(),EE;try{EE=cE()}catch{Ae.throwErr(Ae.ERR_MISSING_FILE,"package.json")}var lE=EE.version,iA="build/Release",nA="oracledb-"+lE+"-"+qe.platform+"-"+qe.arch+".node",_A="package/Staging";function NE(){return"Node-oracledb installation instructions: https://node-oracledb.readthedocs.io/en/latest/user_guide/installation.html"}T(NE,"getInstallURL");function oA(){let i,e,t=NE()+`
`;return qe.platform==="linux"?(qe.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html
`,i="64-bit"):qe.arch==="x32"?(e=`https://www.oracle.com/database/technologies/instant-client/linux-x86-32-downloads.html
`,i="32-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,i=qe.arch),t+="You must have Linux "+i+` Oracle Client libraries configured with ldconfig, or in LD_LIBRARY_PATH.
`,t+=`If you do not have Oracle Database on this computer, then install the Instant Client Basic or Basic Light package from 
`,t+=e):qe.platform==="darwin"?(qe.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/macos-intel-x86-downloads.html
`,i="64-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,i=qe.arch),t+="You must have macOS "+i+` Oracle Instant Client Basic or Basic Light package libraries in
`,t+=`/usr/local/lib or set by calling oracledb.initOracleClient({libDir: "/my/instant_client_directory"}).
`,t+="Oracle Instant Client can be downloaded from "+e):qe.platform==="win32"?(qe.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html
`,i="64-bit"):qe.arch==="x32"?(e=`https://www.oracle.com/database/technologies/instant-client/microsoft-windows-32-downloads.html
`,i="32-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,i=qe.arch),t+="You must have Windows "+i+` Oracle Client libraries in your PATH environment variable.
`,t+=`If you do not have Oracle Database on this computer, then install the Instant Client Basic or Basic Light package from
`,t+=e,t+=`A Microsoft Visual Studio Redistributable suitable for your Oracle client library version must be available.
`):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,t+="You must have "+qe.arch+` Oracle Client libraries in your operating system library search path.
`,t+=`If you do not have Oracle Database on this computer, then install an Instant Client Basic or Basic Light package from: 
`,t+=e),t}T(oA,"getInstallHelp");function wi(i){let e=T(function(){if(typeof arguments[arguments.length-1]!="function")return i.apply(this,arguments).catch(T(function r(_){throw Ae.transformErr(_,r)},"stackCapture"));let t=Array.prototype.slice.call(arguments,0,arguments.length-1),s=arguments[arguments.length-1];i.apply(this,t).then(function(r){s(null,r)},T(function r(_){s(Ae.transformErr(_,r))},"stackCapture"))},"wrapper");return i.name&&Object.defineProperty(e,"name",{value:i.name}),e}T(wi,"callbackify");function Mi(i){return async function(){let e;this._impl&&(e=this._impl._getConnImpl(),await e._acquireLock());try{return await i.apply(this,arguments)}finally{e&&e._releaseLock()}}}T(Mi,"serialize");function SE(i,e){return async function(){this._isActive&&Ae.throwErr(e),this._isActive=!0;try{return await i.apply(this,arguments)}finally{this._isActive=!1}}}T(SE,"preventConcurrent");function aA(i){let e=1,t;typeof arguments[1]=="number"&&(e=2,t=arguments[1]);for(let s=e;s<arguments.length;s++){let r=arguments[s],_=i[r];t?i[r]=wi(SE(Mi(_),t)):i[r]=wi(Mi(_))}}T(aA,"wrapFns");function TA(i){if(!Array.isArray(i))return!1;for(let e=0;e<i.length;e++)if(typeof i[e]!="string")return!1;return!0}T(TA,"isArrayOfStrings");function xi(i){return i!==null&&typeof i=="object"}T(xi,"isObject");function cA(i){return i!==null&&typeof i=="object"||Array.isArray(i)}T(cA,"isObjectOrArray");function EA(i){if(!Array.isArray(i))return!1;for(let e=0;e<i.length;e++){let t=i[e];if(!(typeof t=="string"||typeof t=="number"||Cs.isBuffer(t)||sA.isDate(t)))return!1}return!0}T(EA,"isShardingKey");function hE(i){return i!=null&&i._sodaDocumentMarker}T(hE,"isSodaDocument");function lA(i){return xi(i)&&Number.isInteger(i.formatId)&&(Cs.isBuffer(i.globalTransactionId)||typeof i.globalTransactionId=="string")&&(Cs.isBuffer(i.branchQualifier)||typeof i.branchQualifier=="string")}T(lA,"isXid");function NA(i){return hE(i)?i._impl:(Ae.assertParamValue(xi(i),1),Cs.from(JSON.stringify(i)))}T(NA,"verifySodaDoc");function Vi(i){Ae.assert(typeof i=="string",Ae.ERR_TOKEN_BASED_AUTH),i.split(".")[1]===void 0&&Ae.throwErr(Ae.ERR_TOKEN_BASED_AUTH);let t=i.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=Cs.from(t,"base64").toString("ascii"),_=JSON.parse(r).exp;return Ae.assert(_!=null,Ae.ERR_TOKEN_BASED_AUTH),_=_*1e3,new Date().getTime()>_}T(Vi,"isTokenExpired");function SA(i){switch(typeof i){case"string":return i===""&&Ae.throwErr(Ae.ERR_TOKEN_BASED_AUTH),!Vi(i);case"object":return(i.token===void 0||i.token===""||i.privateKey===void 0||i.privateKey==="")&&Ae.throwErr(Ae.ERR_TOKEN_BASED_AUTH),!Vi(i.token);default:Ae.throwErr(Ae.ERR_TOKEN_BASED_AUTH)}}T(SA,"isTokenValid");function hA(i){return Ae.assert(typeof i.privateKey=="string",Ae.ERR_TOKEN_BASED_AUTH),!(i.privateKey.startsWith("-----BEGIN PRIVATE KEY-----")||i.privateKey.endsWith("-----END PRIVATE KEY-----"))}T(hA,"isPrivateKeyValid");function AA(i,e){let t=e+"Class",s=e+"Name",r=i[t],_=i[e];typeof _=="number"&&(_=i[e]=rA.getTypeByNum(_)),r?i[s]=r.prototype.fqn:_&&(i[s]=_.columnTypeName)}T(AA,"addTypeProperties");AE.exports={BINARY_FILE:nA,PACKAGE_JSON_VERSION:lE,RELEASE_DIR:iA,STAGING_DIR:_A,addTypeProperties:AA,callbackify:wi,getInstallURL:NE,getInstallHelp:oA,isArrayOfStrings:TA,isObject:xi,isObjectOrArray:cA,isPrivateKeyValid:hA,isShardingKey:EA,isSodaDocument:hE,isTokenExpired:Vi,isTokenValid:SA,isXid:lA,preventConcurrent:SE,serialize:Mi,verifySodaDoc:NA,wrapFns:aA}});var PE=m((AR,uE)=>{"use strict";var me=U(),ki=class ki{getCondition(){me.throwNotImplemented("getting condition (dequeue options)")}getConsumerName(){me.throwNotImplemented("getting consumer name (dequeue options)")}getCorrelation(){me.throwNotImplemented("getting correlation (dequeue options)")}getMode(){me.throwNotImplemented("getting mode (dequeue options)")}getMsgId(){me.throwNotImplemented("getting message id (dequeue options)")}getNavigation(){me.throwNotImplemented("getting navigation (dequeue options)")}getTransformation(){me.throwNotImplemented("getting transformation (dequeue options)")}getVisibility(){me.throwNotImplemented("getting visibility (dequeue options)")}getWait(){me.throwNotImplemented("getting wait (dequeue options)")}setCondition(){me.throwNotImplemented("setting condition (dequeue options)")}setConsumerName(){me.throwNotImplemented("setting consumer name (dequeue options)")}setCorrelation(){me.throwNotImplemented("setting correlation (dequeue options)")}setMode(){me.throwNotImplemented("setting mode (dequeue options)")}setMsgId(){me.throwNotImplemented("setting message id (dequeue options)")}setNavigation(){me.throwNotImplemented("setting navigation (dequeue options)")}setTransformation(){me.throwNotImplemented("setting transformation (dequeue options)")}setVisibility(){me.throwNotImplemented("setting visibility (dequeue options)")}setWait(){me.throwNotImplemented("setting wait (dequeue options)")}};T(ki,"AqDeqOptionsImpl");var Fi=ki;uE.exports=Fi});var dE=m((PR,fE)=>{"use strict";var _s=U(),Gi=class Gi{getDeliveryMode(){_s.throwNotImplemented("getting delivery mode (enqueue options)")}getTransformation(){_s.throwNotImplemented("getting transformation (enqueue options)")}getVisibility(){_s.throwNotImplemented("getting visibility (enqueue options)")}setDeliveryMode(){_s.throwNotImplemented("setting delivery mode (enqueue options)")}setTransformation(){_s.throwNotImplemented("setting transformation (enqueue options)")}setVisibility(){_s.throwNotImplemented("setting visibility (enqueue options)")}};T(Gi,"AqEnqOptionsImpl");var bi=Gi;fE.exports=bi});var RE=m((dR,pE)=>{"use strict";var rt=U(),qi=class qi{getCorrelation(){rt.throwNotImplemented("getting correlation (message)")}getDelay(){rt.throwNotImplemented("getting delay (message)")}getDeliveryMode(){rt.throwNotImplemented("getting delivery mode (message)")}getExceptionQueue(){rt.throwNotImplemented("getting exception queue (message)")}getExpiration(){rt.throwNotImplemented("getting expiration (message)")}getMsgId(){rt.throwNotImplemented("getting message id (message)")}getNumAttempts(){rt.throwNotImplemented("getting number of attempts (message)")}getOriginalMsgId(){rt.throwNotImplemented("getting original message id (message)")}getPayload(){rt.throwNotImplemented("getting payload (message)")}getPriority(){rt.throwNotImplemented("getting priority (message)")}getState(){rt.throwNotImplemented("getting state (message)")}};T(qi,"AqMessageImpl");var Hi=qi;pE.exports=Hi});var mE=m((RR,DE)=>{"use strict";var Tr=U(),Ki=class Ki{_getConnImpl(){return this._connection}deqMany(){Tr.throwNotImplemented("dequeuing multiple items from a queue")}deqOne(){Tr.throwNotImplemented("dequeuing a single item from a queue")}enqMany(){Tr.throwNotImplemented("enqueuing multiple items from a queue")}enqOne(){Tr.throwNotImplemented("enqueuing a single item from a queue")}};T(Ki,"AqQueueImpl");var vi=Ki;DE.exports=vi});var cr=m((mR,IE)=>{"use strict";var ze=U(),zi=class zi{constructor(e){this._objType=e}append(){ze.throwNotImplemented("appending element to collection")}copy(){ze.throwNotImplemented("copying an object")}deleteElement(){ze.throwNotImplemented("deleting an element from a collection")}getElement(){ze.throwNotImplemented("getting an element from a collection")}getFirstIndex(){ze.throwNotImplemented("getting the first index in a collection")}getKeys(){ze.throwNotImplemented("returning the keys of a collection")}getLastIndex(){ze.throwNotImplemented("getting the last index in a collection")}getNextIndex(){ze.throwNotImplemented("getting the next index in a collection")}getPrevIndex(){ze.throwNotImplemented("getting the previous index in a collection")}getValues(){ze.throwNotImplemented("getting the values in a collection")}hasElement(){ze.throwNotImplemented("getting if value exists in a collection")}setElement(){ze.throwNotImplemented("setting an element in a collection")}trim(){ze.throwNotImplemented("trimming elements from a collection")}};T(zi,"DbObjectImpl");var Wi=zi;IE.exports=Wi});var Ze=m((CR,CE)=>{"use strict";var uA=Be(),Er=U(),G=He(),Qi=class Qi{constructor(){this.autoCommit=!1,this.connectionClass="",this.dbObjectAsPojo=!1,this.edition="",this.errorOnConcurrentExecute=!1,this.events=!1,this.externalAuth=!1,this.fetchArraySize=100,this.fetchAsBuffer=[],this.fetchAsString=[],this.lobPrefetchSize=16384,this.maxRows=0,this.outFormat=uA.OUT_FORMAT_ARRAY,this.poolIncrement=1,this.poolMax=4,this.poolMaxPerShard=0,this.poolMin=0,this.poolPingInterval=60,this.poolTimeout=60,this.prefetchRows=2,this.queueTimeout=6e4,this.queueMax=500,this.stmtCacheSize=30,this.thin=!0,this.thinDriverInitialized=!1,this.createFetchTypeMap(this.fetchAsString,this.fetchAsBuffer),this.fetchTypeHandler=void 0}_getDateComponents(e,t){return e?[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()*1e3*1e3]:[t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()*1e3*1e3]}_makeDate(e,t,s,r,_,o,a,c,N){return e?new Date(t,s-1,r,_,o,a,c):new Date(Date.UTC(t,s-1,r,_,o,a,c)-N*6e4)}addToOptions(e){for(let t=1;t<arguments.length;t++){let s=arguments[t];e[s]===void 0&&(e[s]=this[s])}}createFetchTypeMap(e,t){let s=new Map(G.DB_TYPE_FETCH_TYPE_MAP);for(let r of e)switch(r){case G.DB_TYPE_NUMBER:s.set(G.DB_TYPE_BINARY_DOUBLE,G.DB_TYPE_VARCHAR),s.set(G.DB_TYPE_BINARY_FLOAT,G.DB_TYPE_VARCHAR),s.set(G.DB_TYPE_BINARY_INTEGER,G.DB_TYPE_VARCHAR),s.set(G.DB_TYPE_NUMBER,G.DB_TYPE_VARCHAR);break;case G.DB_TYPE_TIMESTAMP:s.set(G.DB_TYPE_DATE,G.DB_TYPE_VARCHAR),s.set(G.DB_TYPE_TIMESTAMP,G.DB_TYPE_VARCHAR),s.set(G.DB_TYPE_TIMESTAMP_TZ,G.DB_TYPE_VARCHAR),s.set(G.DB_TYPE_TIMESTAMP_LTZ,G.DB_TYPE_VARCHAR);break;case G.DB_TYPE_CLOB:case G.DB_TYPE_NCLOB:s.set(G.DB_TYPE_CLOB,G.DB_TYPE_LONG),s.set(G.DB_TYPE_NCLOB,G.DB_TYPE_LONG_NVARCHAR);break;case G.DB_TYPE_RAW:s.set(G.DB_TYPE_RAW,G.DB_TYPE_VARCHAR);break;case G.DB_TYPE_JSON:s.set(G.DB_TYPE_JSON,G.DB_TYPE_VARCHAR);break;default:Er.throwErr(Er.ERR_INVALID_TYPE_FOR_CONVERSION)}for(let r of t)switch(r){case G.DB_TYPE_BLOB:s.set(G.DB_TYPE_BLOB,G.DB_TYPE_LONG_RAW);break;default:Er.throwErr(Er.ERR_INVALID_TYPE_FOR_CONVERSION)}this.fetchTypeMap=s}};T(Qi,"Settings");var Xi=Qi;CE.exports=new Xi});var lr=m((gR,OE)=>{"use strict";var PA=Ze(),V=U(),fA=require("util"),Ji=class Ji{constructor(){this._inProgress=!1,this._dbObjectTypes=new Map,this._requestQueue=[]}async _acquireLock(){this._inProgress&&(PA.errorOnConcurrentExecute&&V.throwErr(V.ERR_CONCURRENT_OPS),await new Promise((e,t)=>{let s={resolve:e,reject:t};this._requestQueue.push(s)})),this._inProgress=!0}_getConnImpl(){return this}_getDbObjectType(e,t,s,r){let _;if(r&&(_=this._dbObjectTypes.get(r),_))return _;let o=s?`${e}.${s}.${t}`:`${e}.${t}`;return _=this._dbObjectTypes.get(o),_||(_={oid:r,fqn:o,schema:e,name:t,packageName:s,partial:!0,isXmlType:e==="SYS"&&t==="XMLTYPE"},this._dbObjectTypes.set(o,_)),r&&!_.oid&&(_.oid=r,this._dbObjectTypes.set(r,_)),_}_isDate(e){return fA.isDate(e)}_releaseLock(){this._requestQueue.length>0?this._requestQueue.shift().resolve():this._inProgress=!1}breakExecution(){V.throwNotImplemented("getting Oracle Server version number")}changePassword(){V.throwNotImplemented("changing the password")}close(){V.throwNotImplemented("closing the connection")}commit(){V.throwNotImplemented("committing the transaction")}createLob(){V.throwNotImplemented("creating a temporary LOB")}execute(){V.throwNotImplemented("executing a SQL statement")}executeMany(){V.throwNotImplemented("executing a SQL statement multiple times")}getCallTimeout(){V.throwNotImplemented("getting call timeout")}getCurrentSchema(){V.throwNotImplemented("getting current schema")}getDbObjectClass(){V.throwNotImplemented("getting a database object class")}getExternalName(){V.throwNotImplemented("getting the external name")}getInternalName(){V.throwNotImplemented("getting the internal name")}getOracleServerVersion(){V.throwNotImplemented("getting Oracle Server version number")}getOracleServerVersionString(){V.throwNotImplemented("getting Oracle Server version as a string")}getQueue(){V.throwNotImplemented("getting a queue")}getSodaDatabase(){V.throwNotImplemented("getting a SODA database")}getStatementInfo(){V.throwNotImplemented("getting information about a statement")}getStmtCacheSize(){V.throwNotImplemented("getting the statement cache size")}getTag(){V.throwNotImplemented("getting the tag for the connection")}isHealthy(){V.throwNotImplemented("getting the health of the connection")}ping(){V.throwNotImplemented("sending a ping to the database")}rollback(){V.throwNotImplemented("rolling back a transaction")}setAction(){V.throwNotImplemented("setting end-to-end attribute 'action'")}setCallTimeout(){V.throwNotImplemented("setting call timeout")}setClientId(){V.throwNotImplemented("setting end-to-end attribute 'clientId'")}setClientInfo(){V.throwNotImplemented("setting end-to-end attribute 'clientInfo'")}setCurrentSchema(){V.throwNotImplemented("setting the current schema")}setDbOp(){V.throwNotImplemented("setting end-to-end attribute 'dbOp'")}setECID(){V.throwNotImplemented("setting end-to-end attribute 'ecid'")}setExternalName(){V.throwNotImplemented("setting the external name")}setInternalName(){V.throwNotImplemented("setting the internal name")}setStmtCacheSize(){V.throwNotImplemented("setting the size of the statement cache")}setModule(){V.throwNotImplemented("setting end-to-end attribute 'module'")}setTag(){V.throwNotImplemented("setting the tag for the connection")}shutdown(){V.throwNotImplemented("shutting down the database instance")}startup(){V.throwNotImplemented("starting up the database instance")}subscribe(){V.throwNotImplemented("subscribing to events in the database")}tpcBegin(){V.throwNotImplemented("starting a two-phase transaction")}tpcCommit(){V.throwNotImplemented("committing a two-phase transaction")}tpcEnd(){V.throwNotImplemented("ending a two-phase transaction")}tpcForget(){V.throwNotImplemented("forgetting a two-phase transaction")}tpcPrepare(){V.throwNotImplemented("preparing a two-phase transaction")}tpcRollback(){V.throwNotImplemented("rolling back a two-phase transaction")}unsubscribe(){V.throwNotImplemented("unsubscribing from events")}};T(Ji,"ConnectionImpl");var ji=Ji;OE.exports=ji});var en=m((yR,gE)=>{"use strict";var dA=lr(),Nr=U(),$i=class $i{_getConnImpl(){let e=this._parentObj;for(;!(e instanceof dA);)e=e._parentObj;return e}close(){Nr.throwNotImplemented("closing a LOB")}getData(){Nr.throwNotImplemented("getting all of the data from a LOB")}read(){Nr.throwNotImplemented("reading from a LOB")}write(){Nr.throwNotImplemented("writing to a LOB")}};T($i,"LobImpl");var Zi=$i;gE.exports=Zi});var rn=m((BR,LE)=>{"use strict";var Oe=U(),pA=ve(),sn=class sn{async _accessTokenHandler(e,t,s){let r;try{let _=e(s);_ instanceof Promise&&(_=await _),pA.isTokenValid(_)||Oe.throwErr(Oe.ERR_TOKEN_HAS_EXPIRED),r=_}finally{this.returnAccessToken(t,r)}}close(){Oe.throwNotImplemented("closing the pool")}create(){Oe.throwNotImplemented("creating the pool")}getConnection(){Oe.throwNotImplemented("getting a connection from the pool")}getConnectionsInUse(){Oe.throwNotImplemented("getting num connection in use")}getConnectionsOpen(){Oe.throwNotImplemented("getting num connection open")}getPoolIncrement(){Oe.throwNotImplemented("getting the pool increment")}getPoolMax(){Oe.throwNotImplemented("getting the pool max")}getPoolMaxPerShard(){Oe.throwNotImplemented("getting the pool max per shard")}getPoolMin(){Oe.throwNotImplemented("getting the pool min")}getPoolPingInterval(){Oe.throwNotImplemented("getting the pool ping interval")}getPoolTimeout(){Oe.throwNotImplemented("getting the pool timeout")}getStmtCacheSize(){Oe.throwNotImplemented("getting the pool statement cache size")}getSodaMetaDataCache(){Oe.throwNotImplemented("getting the SODA metadata cache flag")}reconfigure(){Oe.throwNotImplemented("reconfiguring the pool")}setAccessToken(){Oe.throwNotImplemented("sets the access token")}};T(sn,"PoolImpl");var tn=sn;LE.exports=tn});var on=m((wR,YE)=>{"use strict";var RA=Be(),Tt=U(),DA=ve(),yE=Ze(),ge=He(),_n=class _n{_determineFetchType(e,t){if(delete e.fetchType,delete e.converter,t.fetchTypeHandler){let s=t.fetchTypeHandler(e);s!==void 0&&(Tt.assert(typeof s=="object",Tt.ERR_FETCH_TYPE_HANDLER_RETURN_VALUE),s.type!==void 0&&Tt.assert(s.type instanceof ge.DbType,Tt.ERR_FETCH_TYPE_HANDLER_TYPE),s.converter!==void 0&&Tt.assert(typeof s.converter=="function",Tt.ERR_FETCH_TYPE_HANDLER_CONVERTER),e.fetchType=s.type,e.converter=s.converter)}if(e.fetchType||(t.fetchTypeMap&&t.fetchTypeMap.has(e.name)?(e.fetchType=t.fetchTypeMap.get(e.name),e.fetchType===RA.DEFAULT&&(e.fetchType=ge.DB_TYPE_FETCH_TYPE_MAP.get(e.dbType))):e.fetchType=yE.fetchTypeMap.get(e.dbType)),e.fetchType!==e.dbType){let s=ge.DB_TYPE_CONVERSION_MAP.get(e.dbType),r=s&&s.get(e.fetchType);r||Tt.throwErr(Tt.ERR_UNSUPPORTED_CONVERSION,e.dbType.name,e.fetchType.name),e.fetchType=r}if(yE.thin){let s,r=e.converter;if(e.dbType===ge.DB_TYPE_NUMBER&&e.fetchType===ge.DB_TYPE_NUMBER?s=T(_=>_===null?null:parseFloat(_),"converter"):e.fetchType===ge.DB_TYPE_VARCHAR&&(e.dbType===ge.DB_TYPE_BINARY_DOUBLE||e.dbType===ge.DB_TYPE_BINARY_FLOAT||e.dbType===ge.DB_TYPE_DATE||e.dbType===ge.DB_TYPE_TIMESTAMP||e.dbType===ge.DB_TYPE_TIMESTAMP_LTZ||e.dbType===ge.DB_TYPE_TIMESTAMP_TZ)&&(s=T(_=>_===null?null:_.toString(),"converter")),r&&s){let _=s;s=T(o=>r(_(o)),"converter")}s&&(e.converter=s)}}_getConnImpl(){return this._parentObj}_setup(e,t){this._parentObj=e.connection._impl,this.metaData=t,this.lobIndices=[],this.dbObjectIndices=[],this.nestedCursorIndices=[],this.converterIndices=[],this.outFormat=e.outFormat,this.fetchArraySize=e.fetchArraySize,this.dbObjectAsPojo=e.dbObjectAsPojo,this.maxRows=e.maxRows;let s=new Map;for(let r=0;r<t.length;r++){let _=t[r].name;s.has(_)||s.set(_,r)}for(let r=0;r<t.length;r++){let _=t[r];if(_.dbTypeClass){let a=e.connection._getDbObjectClass(_.dbTypeClass);_.dbTypeClass=a}DA.addTypeProperties(_,"dbType"),this._determineFetchType(_,e),_.fetchType===ge.DB_TYPE_CURSOR?this.nestedCursorIndices.push(r):_.fetchType===ge.DB_TYPE_CLOB||_.fetchType===ge.DB_TYPE_NCLOB||_.fetchType===ge.DB_TYPE_BLOB?this.lobIndices.push(r):_.fetchType===ge.DB_TYPE_OBJECT&&this.dbObjectIndices.push(r),_.converter&&this.converterIndices.push(r);let o=_.name;if(s.get(o)!==r){let a=0;for(;s.has(o);)a=a+1,o=`${_.name}_${a}`;s.set(o,r),_.name=o}}}close(){Tt.throwNotImplemented("closing a result set")}getRows(){Tt.throwNotImplemented("getting rows")}};T(_n,"ResultSetImpl");var nn=_n;YE.exports=nn});var UE=m((VR,BE)=>{"use strict";var Ke=U(),Tn=class Tn{_getConnImpl(){return this._database._connection}createIndex(){Ke.throwNotImplemented("creating an index on a SODA collection")}drop(){Ke.throwNotImplemented("dropping a SODA collection")}dropIndex(){Ke.throwNotImplemented("dropping an index on a SODA collection")}find(){Ke.throwNotImplemented("creating a SODA operation")}getDataGuide(){Ke.throwNotImplemented("getting the data guide for the collection")}getMetaData(){Ke.throwNotImplemented("getting the metadata for the collection")}getName(){Ke.throwNotImplemented("getting the name of the collection")}insertMany(){Ke.throwNotImplemented("inserting multiple docs into a collection")}insertManyAndGet(){Ke.throwNotImplemented("insert/return many docs in a collection")}insertOne(){Ke.throwNotImplemented("inserting a single doc into a collection")}insertOneAndGet(){Ke.throwNotImplemented("insert/return a single doc in a collection")}save(){Ke.throwNotImplemented("saving a single doc in a collection")}saveAndGet(){Ke.throwNotImplemented("saving a single doc in a collection")}truncate(){Ke.throwNotImplemented("removing all docs from a collection")}};T(Tn,"SodaCollectionImpl");var an=Tn;BE.exports=an});var ME=m((FR,wE)=>{"use strict";var Sr=U(),En=class En{_getConnImpl(){return this._connection}createCollection(){Sr.throwNotImplemented("creating a SODA collection")}createDocument(){Sr.throwNotImplemented("creating a SODA document")}getCollectionNames(){Sr.throwNotImplemented("getting a list of SODA collection names")}openCollection(){Sr.throwNotImplemented("getting a list of SODA collection names")}};T(En,"SodaDatabaseImpl");var cn=En;wE.exports=cn});var FE=m((bR,xE)=>{"use strict";var VE=U(),Nn=class Nn{_getConnImpl(){return this._operation._getConnImpl()}close(){VE.throwNotImplemented("closing a SODA document cursor")}getNext(){VE.throwNotImplemented("getting a document from a SODA doc cursor")}};T(Nn,"SodaDocCursorImpl");var ln=Nn;xE.exports=ln});var bE=m((HR,kE)=>{"use strict";var Kt=U(),hn=class hn{getContentAsBuffer(){Kt.throwNotImplemented("getting doc content as a buffer")}getContentAsString(){Kt.throwNotImplemented("getting doc content as a string")}getCreatedOn(){Kt.throwNotImplemented("getting the created date of a document")}getKey(){Kt.throwNotImplemented("getting the key of a document")}getLastModified(){Kt.throwNotImplemented("getting the last modified date of a doc")}getMediaType(){Kt.throwNotImplemented("getting the media type of a document")}getVersion(){Kt.throwNotImplemented("getting the version of a document")}};T(hn,"SodaDocumentImpl");var Sn=hn;kE.exports=Sn});var HE=m((vR,GE)=>{"use strict";var Wt=U(),un=class un{_getConnImpl(){return this._collection._database._connection}count(){Wt.throwNotImplemented("getting a count of documents")}getCursor(){Wt.throwNotImplemented("getting a cursor for documents")}getDocuments(){Wt.throwNotImplemented("getting a cursor for documents")}getOne(){Wt.throwNotImplemented("getting a single document")}remove(){Wt.throwNotImplemented("removing documents from a collection")}replaceOne(){Wt.throwNotImplemented("replacing a single document")}replaceOneAndGet(){Wt.throwNotImplemented("replacing/returning a single document")}};T(un,"SodaOperationImpl");var An=un;GE.exports=An});var os=m((WR,qE)=>{"use strict";var mA=PE(),IA=dE(),CA=RE(),OA=mE(),gA=cr(),LA=lr(),yA=en(),YA=rn(),BA=on(),UA=UE(),wA=ME(),MA=FE(),VA=bE(),xA=HE();qE.exports={AqDeqOptionsImpl:mA,AqEnqOptionsImpl:IA,AqMessageImpl:CA,AqQueueImpl:OA,DbObjectImpl:gA,ConnectionImpl:LA,LobImpl:yA,PoolImpl:YA,ResultSetImpl:BA,SodaCollectionImpl:UA,SodaDatabaseImpl:wA,SodaDocCursorImpl:MA,SodaDocumentImpl:VA,SodaOperationImpl:xA}});var dn=m((zR,vE)=>{"use strict";var{Buffer:FA}=require("buffer"),dt=Be(),pt=U(),fn=class fn{get condition(){return this._impl.getCondition()}set condition(e){pt.assertPropValue(typeof e=="string","condition"),this._impl.setCondition(e)}get consumerName(){return this._impl.getConsumerName()}set consumerName(e){pt.assertPropValue(typeof e=="string","consumerName"),this._impl.setConsumerName(e)}get correlation(){return this._impl.getCorrelation()}set correlation(e){pt.assertPropValue(typeof e=="string","correlation"),this._impl.setCorrelation(e)}get mode(){return this._impl.getMode()}set mode(e){pt.assertPropValue(e===dt.AQ_DEQ_MODE_BROWSE||e===dt.AQ_DEQ_MODE_LOCKED||e===dt.AQ_DEQ_MODE_REMOVE||e===dt.AQ_DEQ_MODE_REMOVE_NO_DATA,"mode"),this._impl.setMode(e)}get msgId(){return this._impl.getMsgId()}set msgId(e){pt.assertPropValue(FA.isBuffer(e),"msgId"),this._impl.setMsgId(e)}get navigation(){return this._impl.getNavigation()}set navigation(e){pt.assertPropValue(e===dt.AQ_DEQ_NAV_FIRST_MSG||e===dt.AQ_DEQ_NAV_NEXT_TRANSACTION||e===dt.AQ_DEQ_NAV_NEXT_MSG,"navigation"),this._impl.setNavigation(e)}get transformation(){return this._impl.getTransformation()}set transformation(e){pt.assertPropValue(typeof e=="string","transformation"),this._impl.setTransformation(e)}get visibility(){return this._impl.getVisibility()}set visibility(e){pt.assertPropValue(e===dt.AQ_VISIBILITY_IMMEDIATE||e===dt.AQ_VISIBILITY_ON_COMMIT,"visibility"),this._impl.setVisibility(e)}get wait(){return this._impl.getWait()}set wait(e){pt.assertPropValue(Number.isInteger(e)&&e>=0,"wait"),this._impl.setWait(e)}};T(fn,"AqDeqOptions");var Pn=fn;vE.exports=Pn});var mn=m((QR,KE)=>{"use strict";var Os=Be(),pn=U(),Dn=class Dn{get deliveryMode(){return this._impl.getDeliveryMode()}set deliveryMode(e){pn.assertPropValue(e===Os.AQ_MSG_DELIV_MODE_PERSISTENT||e===Os.AQ_MSG_DELIV_MODE_BUFFERED||e===Os.AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED,"deliveryMode"),this._impl.setDeliveryMode(e)}get transformation(){return this._impl.getTransformation()}set transformation(e){pn.assertPropValue(typeof e=="string","transformation"),this._impl.setTransformation(e)}get visibility(){return this._impl.getVisibility()}set visibility(e){pn.assertPropValue(e===Os.AQ_VISIBILITY_IMMEDIATE||e===Os.AQ_VISIBILITY_ON_COMMIT,"visibility"),this._impl.setVisibility(e)}};T(Dn,"AqEnqOptions");var Rn=Dn;KE.exports=Rn});var On=m((JR,WE)=>{"use strict";var kA=cr(),Cn=class Cn{get correlation(){return this._impl.getCorrelation()}get delay(){return this._impl.getDelay()}get deliveryMode(){return this._impl.getDeliveryMode()}get exceptionQueue(){return this._impl.getExceptionQueue()}get expiration(){return this._impl.getExpiration()}get msgId(){return this._impl.getMsgId()}get numAttempts(){return this._impl.getNumAttempts()}get originalMsgId(){return this._impl.getOriginalMsgId()}get payload(){let e=this._impl.getPayload();if(e instanceof kA){let t=Object.create(this._payloadTypeClass.prototype);return t._impl=e,t}return e}get priority(){return this._impl.getPriority()}get state(){return this._impl.getState()}};T(Cn,"AqMessage");var In=Cn;WE.exports=In});var as=m(($R,XE)=>{"use strict";var{Buffer:gn}=require("buffer"),{Duplex:bA}=require("stream"),zE=Be(),We=U(),Ln=ve(),GA=He(),yn=class yn extends bA{constructor(){super({decodeStrings:!1}),this.offset=1,this._isActive=!1,this.once("finish",function(){this._autoCloseLob&&this.destroy()})}async _destroy(e,t){if(e&&e.message.startsWith("NJS-108:")&&delete this._impl,this._impl){let s=this._impl;delete this._impl;try{await s.close()}catch(r){t(r);return}}t(e)}async _read(){try{let e=await this._serializedRead(this.offset);e?(this.offset+=e.length,this.push(e)):(this.push(null),this._autoCloseLob&&this.destroy())}catch(e){throw this._autoCloseLob&&this.destroy(e),e}}async _readData(e){We.assert(this._impl,We.ERR_INVALID_LOB);try{return await this._impl.read(e)}catch(t){throw We.transformErr(t,this._readData)}}_setup(e,t){this._impl=e,this._chunkSize=e.getChunkSize(),this._pieceSize=e.getPieceSize(),this._length=e.getLength(),this._type=e.getType(),typeof this._type=="number"&&(this._type=GA.getTypeByNum(this._type)),this._autoCloseLob=t}async _write(e,t,s){this.type==zE.DB_TYPE_BLOB&&!gn.isBuffer(e)?e=gn.from(e):this.type==zE.DB_TYPE_CLOB&&gn.isBuffer(e)&&(e=e.toString());try{await this._serializedWrite(this.offset,e)}catch(r){this._autoCloseLob&&this.destroy(r),s(r);return}this.offset+=e.length,s(null)}async _writeData(e,t){We.assert(this._impl,We.ERR_INVALID_LOB);try{await this._impl.write(e,t)}catch(s){throw We.transformErr(s,this._writeData)}}get chunkSize(){return this._chunkSize}async close(){if(We.assertArgCount(arguments,0,0),this._impl){let e=this._impl;delete this._impl;try{await e.close(),this.emit("close")}catch(t){this.destroy(t)}}}async getData(){return We.assertArgCount(arguments,0,0),We.assert(this._impl,We.ERR_INVALID_LOB),await this._impl.getData()}get length(){return this._length}get pieceSize(){return this._pieceSize}set pieceSize(e){We.assertPropValue(Number.isInteger(e)&&e>=0,"pieceSize"),We.assert(this._impl,We.ERR_INVALID_LOB),this._impl.setPieceSize(e),this._pieceSize=e}get type(){return this._type}};T(yn,"Lob");var Vt=yn;Ln.wrapFns(Vt.prototype,We.ERR_BUSY_LOB,"close","getData");Vt.prototype._serializedRead=Ln.serialize(Vt.prototype._readData);Vt.prototype._serializedWrite=Ln.serialize(Vt.prototype._writeData);XE.exports=Vt});var Un=m((tD,QE)=>{"use strict";var HA=require("process"),{Readable:qA}=require("stream"),Bn=class Bn extends qA{constructor(e){super({objectMode:!0}),this._fetching=!1,this._numRows=0,e&&HA.nextTick(()=>{this._open(e)})}async _destroy(e,t){if(this._resultSet){let s=this._resultSet;this._resultSet=null,this._fetching&&await new Promise(r=>this.once("_doneFetching",r));try{await s._impl.close()}catch(r){t(r);return}}t(e)}_open(e){this._resultSet=e,this.emit("open"),this.emit("metadata",e.metaData)}async _read(){if(!this._resultSet){this.once("open",this._read);return}try{this._fetching=!0,this._resultSet._allowGetRowCall=!0;let e=await this._resultSet.getRow();e?this.push(e):this.push(null)}catch(e){this.destroy(e)}finally{this._fetching=!1,this._resultSet?this._resultSet._allowGetRowCall=!1:this.emit("_doneFetching")}}};T(Bn,"QueryStream");var Yn=Bn;QE.exports=Yn});var ur=m((rD,jE)=>{"use strict";var vA=Un(),KA=Ts(),WA=ve(),zA=Be(),XA=as(),Ee=U(),Ar=class Ar{constructor(){this._rowCache=[],this._processingStarted=!1,this._convertedToStream=!1,this._allowGetRowCall=!1,this._isActive=!1}async _getAllRows(){try{let e=this._impl.maxRows,t=this._impl.fetchArraySize,s=[];for(;;){e>0&&t>=e&&(t=e);let r=await this._getRows(t);if(r&&(await this._processRows(r,!0),s=s.concat(r)),r.length==e||r.length<t)break;e>0&&(e-=r.length)}return s}finally{await this._impl.close(),delete this._impl}}async _getRows(e){let t={};return this._impl.nestedCursorIndices.length>0&&(t={connection:this._connection,outFormat:this._impl.outFormat,fetchArraySize:this._impl.fetchArraySize,dbObjectAsPojo:this._impl.dbObjectAsPojo,maxRows:this._impl.maxRows,fetchTypeMap:this._impl.fetchTypeMap}),await this._impl.getRows(e,t)}async _processRows(e,t){for(let s of this._impl.nestedCursorIndices)for(let r=0;r<e.length;r++){let _=e[r][s];if(_){let o=new Ar;o._setup(this._connection,_),this._impl.metaData[s].metaData=_.metaData,t?e[r][s]=await o._getAllRows():e[r][s]=o}}for(let s of this._impl.lobIndices)for(let r=0;r<e.length;r++){let _=e[r][s];_&&(e[r][s]=new XA)._setup(_,!0)}for(let s of this._impl.dbObjectIndices){let r=this._impl.metaData[s].dbTypeClass;for(let _=0;_<e.length;_++){let o=e[_][s];if(o){let a=e[_][s]=Object.create(r.prototype);a._impl=o,this._impl.dbObjectAsPojo?e[_][s]=a._toPojo():a.isCollection&&(e[_][s]=new Proxy(a,KA._collectionProxyHandler))}}}for(let s of this._impl.converterIndices){let r=this._impl.metaData[s].converter;this._connection._impl._inProgress=!1;try{for(let _=0;_<e.length;_++){let o=r(e[_][s]);o instanceof Promise&&(o=await o),e[_][s]=o}}finally{this._connection._impl._inProgress=!0}}if(this._impl.outFormat===zA.OUT_FORMAT_OBJECT)for(let s=0;s<e.length;s++){let r=e[s],_=e[s]={},o=this._impl.metaData;for(let a=0;a<o.length;a++)_[o[a].name]=r[a]}}_setup(e,t){this._connection=e,this._impl=t}async close(){Ee.assertArgCount(arguments,0,0),Ee.assert(this._impl&&this._connection._impl,Ee.ERR_INVALID_RS),this._convertedToStream&&Ee.throwErr(Ee.ERR_CANNOT_INVOKE_RS_METHODS),this._processingStarted=!0;let e=this._impl;delete this._impl,await e.close()}async getRow(){if(Ee.assertArgCount(arguments,0,0),Ee.assert(this._impl&&this._connection._impl,Ee.ERR_INVALID_RS),this._convertedToStream&&!this._allowGetRowCall&&Ee.throwErr(Ee.ERR_CANNOT_INVOKE_RS_METHODS),this._allowGetRowCall=!1,this._processingStarted=!0,this._rowCache.length==0){let e=await this._getRows(this._impl.fetchArraySize);await this._processRows(e,!1),this._rowCache=e}return this._rowCache.shift()}async getRows(e){let t;Ee.assertArgCount(arguments,0,1),Ee.assert(this._impl&&this._connection._impl,Ee.ERR_INVALID_RS),arguments.length==0?e=0:Ee.assertParamValue(Number.isInteger(e)&&e>=0,1),this._convertedToStream&&Ee.throwErr(Ee.ERR_CANNOT_INVOKE_RS_METHODS),this._processingStarted=!0;let s;if(e==0){s=this._rowCache;let r=this._impl.fetchArraySize;for(;;){let _=await this._getRows(r);if(_&&(await this._processRows(_,!1),s=s.concat(_)),_.length<r)break}return s}if(this._rowCache.length===0)s=await this._getRows(e),await this._processRows(s,!1);else if(t=e-this._rowCache.length,t<=0)s=this._rowCache.splice(0,e);else{let r=await this._getRows(t);await this._processRows(r,!1),s=this._rowCache.concat(r),this._rowCache=[]}return s}get metaData(){if(this._impl)return this._impl.metaData}toQueryStream(){return Ee.assertArgCount(arguments,0,0),this._processingStarted&&Ee.throwErr(Ee.ERR_CANNOT_CONVERT_RS_TO_STREAM),this._convertedToStream&&Ee.throwErr(Ee.ERR_RS_ALREADY_CONVERTED),this._convertedToStream=!0,new vA(this)}[Symbol.asyncIterator](){let e=this;return{async next(){let t=await e.getRow();return{value:t,done:t===void 0}},return(){return{done:!0}}}}};T(Ar,"ResultSet");var hr=Ar;WA.wrapFns(hr.prototype,Ee.ERR_BUSY_RS,"close","getRow","getRows");jE.exports=hr});var xn=m((nD,$E)=>{"use strict";var wn=Ts(),{Buffer:Mn}=require("buffer"),QA=as(),jA=ur(),JA=Be(),le=U(),JE=require("util"),se=He();function Rt(i,e){if(i.type===void 0&&arguments.length>2)i.type=arguments[2];else{let t=!1;for(let s=2;s<arguments.length;s++)if(i.type===arguments[s]){t=!0;break}t||(i.attrName?le.throwErr(le.ERR_WRONG_VALUE_FOR_DBOBJECT_ATTR,i.attrName,i.fqn):i.fqn?le.throwErr(le.ERR_WRONG_VALUE_FOR_DBOBJECT_ELEM,i.fqn):i.isArray&&i.name?le.throwErr(le.ERR_INCOMPATIBLE_TYPE_ARRAY_BIND,e.pos,i.name):i.isArray?le.throwErr(le.ERR_INCOMPATIBLE_TYPE_ARRAY_INDEX_BIND,e.pos,i.pos):le.throwErr(le.ERR_BIND_VALUE_AND_TYPE_MISMATCH))}}T(Rt,"checkType");function Vn(i){if(i==null||typeof i=="number"||typeof i=="string"||typeof i=="boolean"||Mn.isBuffer(i)||JE.isDate(i))return i;if(Array.isArray(i)){let t=new Array(i.length);for(let s=0;s<i.length;s++)t[s]=Vn(i[s]);return t}if(i instanceof wn)return{fields:[],values:[]};let e={};e.fields=Object.getOwnPropertyNames(i),e.values=new Array(e.fields.length);for(let t=0;t<e.fields.length;t++)e.values[t]=Vn(i[e.fields[t]]);return e}T(Vn,"transformJsonValue");function ZE(i,e,t){if(e!=null){if(i.type===se.DB_TYPE_OBJECT){let s=e;return e instanceof wn||(s=new i.typeClass(e)),s._impl}else{if(i.type===se.DB_TYPE_JSON)return Vn(e);if(typeof e=="string"){if(Rt(i,t,se.DB_TYPE_VARCHAR,se.DB_TYPE_NVARCHAR,se.DB_TYPE_CHAR,se.DB_TYPE_NCHAR,se.DB_TYPE_CLOB,se.DB_TYPE_NCLOB),i.type!==se.DB_TYPE_CLOB&&i.type!==se.DB_TYPE_NCLOB){let s=Mn.byteLength(e);(i.maxSize===void 0||s>i.maxSize)&&(i.checkSize&&le.throwErr(le.ERR_MAX_SIZE_TOO_SMALL,i.maxSize,s,t.pos),i.maxSize=s)}return e}else{if(typeof e=="number")return Rt(i,t,se.DB_TYPE_NUMBER,se.DB_TYPE_BINARY_INTEGER,se.DB_TYPE_BINARY_FLOAT,se.DB_TYPE_BINARY_DOUBLE),Number.isNaN(e)&&i.type===se.DB_TYPE_NUMBER&&le.throwErr(le.ERR_NAN_VALUE),e;if(typeof e=="boolean")return Rt(i,t,se.DB_TYPE_BOOLEAN),e;if(JE.isDate(e))return Rt(i,t,se.DB_TYPE_TIMESTAMP,se.DB_TYPE_TIMESTAMP_TZ,se.DB_TYPE_TIMESTAMP_LTZ,se.DB_TYPE_DATE),e;if(Mn.isBuffer(e))return Rt(i,t,se.DB_TYPE_RAW,se.DB_TYPE_BLOB),i.type===se.DB_TYPE_RAW&&(i.maxSize===void 0||e.length>i.maxSize)&&(i.checkSize&&le.throwErr(le.ERR_MAX_SIZE_TOO_SMALL,i.maxSize,e.length,t.pos),i.maxSize=e.length),e;if(e instanceof jA)return Rt(i,t,se.DB_TYPE_CURSOR),e._impl;if(e instanceof QA)return Rt(i,t,e.type),e._impl;if(e instanceof wn)return Rt(i,t,se.DB_TYPE_OBJECT),e._impl;if(t.allowArray&&Array.isArray(e)){i.isArray=!0,i.dir===JA.BIND_IN?i.maxArraySize=e.length||1:i.maxArraySize===void 0?le.throwErr(le.ERR_REQUIRED_MAX_ARRAY_SIZE):e.length>i.maxArraySize&&le.throwErr(le.ERR_INVALID_ARRAY_SIZE),t.allowArray=!1;let s=new Array(e.length);for(let r=0;r<e.length;r++)t.pos=r,s[r]=ZE(i,e[r],t);return s}}}i.type===void 0&&le.throwErr(le.ERR_INVALID_BIND_DATA_TYPE,2),Rt(i,t)}}T(ZE,"transformValueIn");$E.exports={transformValueIn:ZE}});var Ts=m((oD,tl)=>{"use strict";var ZA=as(),el=os(),Se=U(),$A=He(),Fn=require("util"),gs=class gs{_getAttrValue(e){let t=this._impl.getAttrValue(e);return this._transformValueOut(t,e.typeClass)}_setAttrValue(e,t){let s={fqn:this._objType.fqn,attrName:e.name,type:e.type,typeClass:e.typeClass},r={allowArray:!1};t=kn.transformValueIn(s,t,r),this._impl.setAttrValue(e,t)}_toPojo(){if(this.isCollection){let t=this.getValues();if(this.elementType===$A.DB_TYPE_OBJECT)for(let s=0;s<t.length;s++)t[s]=t[s]._toPojo();return t}let e={};for(let t in this.attributes){let s=this[t];s instanceof gs&&(s=s._toPojo()),e[t]=s}return e}_transformValueOut(e,t){let s=e;return e instanceof el.LobImpl?(s=new ZA,s._setup(e,!0)):e instanceof el.DbObjectImpl&&(s=Object.create(t.prototype),s._impl=e,s.isCollection&&(s=new Proxy(s,gs._collectionProxyHandler))),s}append(e){Se.assertArgCount(arguments,1,1);let t={fqn:this._objType.fqn,type:this._objType.elementType,typeClass:this._objType.elementTypeClass},s={allowArray:!1};e=kn.transformValueIn(t,e,s),this._impl.append(e)}get attributes(){if(!this._attributes){let e=this._objType.attributes||[],t={};for(let s=0;s<e.length;s++){let r=e[s],_={type:r.type,typeName:r.typeName};r.typeClass&&(_.typeClass=r.typeClass),t[r.name]=_}this._attributes=t}return this._attributes}deleteElement(e){return Se.assertArgCount(arguments,1,1),Se.assertParamValue(Number.isInteger(e),1),this._impl.deleteElement(e)}get elementType(){return this._objType.elementType}get elementTypeClass(){return this._objType.elementTypeClass}get elementTypeName(){return this._objType.elementTypeName}get fqn(){return this._objType.fqn}getElement(e){Se.assertArgCount(arguments,1,1),Se.assertParamValue(Number.isInteger(e),1);let t=this._impl.getElement(e);return this._transformValueOut(t,this.elementTypeClass)}getKeys(){return Se.assertArgCount(arguments,0,0),this._impl.getKeys()}getFirstIndex(){return Se.assertArgCount(arguments,0,0),this._impl.getFirstIndex()}getLastIndex(){return Se.assertArgCount(arguments,0,0),this._impl.getLastIndex()}getNextIndex(e){return Se.assertArgCount(arguments,1,1),Se.assertParamValue(Number.isInteger(e),1),this._impl.getNextIndex(e)}getPrevIndex(e){return Se.assertArgCount(arguments,1,1),Se.assertParamValue(Number.isInteger(e),1),this._impl.getPrevIndex(e)}getValues(){Se.assertArgCount(arguments,0,0);let e=this._impl.getValues();for(let t=0;t<e.length;t++)e[t]=this._transformValueOut(e[t],this.elementTypeClass);return e}hasElement(e){return Se.assertArgCount(arguments,1,1),Se.assertParamValue(Number.isInteger(e),1),this._impl.hasElement(e)}get isCollection(){return this._objType.isCollection}get name(){return this._objType.name}get schema(){return this._objType.schema}setElement(e,t){Se.assertArgCount(arguments,2,2),Se.assertParamValue(Number.isInteger(e),1);let s={fqn:this._objType.fqn,type:this._objType.elementType,typeClass:this._objType.elementTypeClass},r={allowArray:!1};t=kn.transformValueIn(s,t,r),this._impl.setElement(e,t)}trim(e){Se.assertArgCount(arguments,1,1),Se.assertParamValue(Number.isInteger(e)&&e>=0,1),this._impl.trim(e)}[Fn.inspect.custom](e,t){return"["+this.fqn+"] "+Fn.inspect(this._toPojo(),t)}[Symbol.iterator](){if(this.isCollection)return this.getValues()[Symbol.iterator]();throw TypeError("obj is not iterable")}[Symbol.toPrimitive](e){switch(e){case"number":return NaN;default:return"["+this.fqn+"] "+Fn.inspect(this._toPojo(),{})}}get[Symbol.toStringTag](){return this.fqn}toJSON(){return this._toPojo()}};T(gs,"BaseDbObject");var Ls=gs;function eu(i){return function(){try{return i.apply(this,arguments)}catch(e){throw Se.transformErr(e,Se.transformErr)}}}T(eu,"transformErr");function tu(i){for(let e=1;e<arguments.length;e++){let t=arguments[e];i[t]=eu(i[t])}}T(tu,"wrapFns");tu(Ls.prototype,"_getAttrValue","_setAttrValue","append","deleteElement","getElement","getKeys","getFirstIndex","getLastIndex","getNextIndex","getPrevIndex","getValues","hasElement","setElement","trim");Ls._collectionProxyHandler={deleteProperty(i,e){if(typeof e=="string"){let t=+e;if(!isNaN(t))return i.deleteElement(t)}return delete i[e]},get(i,e){if(typeof e=="string"){let s=+e;if(!isNaN(s))return i.getElement(s)}let t=i[e];return typeof t=="function"?t.bind(i):t},set(i,e,t){if(typeof e=="string"){let s=+e;if(!isNaN(s))return i.setElement(s,t),!0}return i[e]=t,!0}};tl.exports=Ls;var kn=xn()});var qn=m((TD,nl)=>{"use strict";var{Buffer:bn}=require("buffer"),sl=Be(),ke=U(),Gn=ve(),su=dn(),ru=mn(),rl=On(),il=Ts(),Hn=class Hn{_isPayload(e){return typeof e=="string"||bn.isBuffer(e)||e instanceof il}_verifyMessage(e){let t;return this._isPayload(e)?(t=e,e={}):(e={...e},this._isPayload(e.payload)?t=e.payload:this._payloadTypeClass?t=new this._payloadTypeClass(e.payload):ke.throwErr(ke.ERR_INVALID_AQ_MESSAGE)),typeof t=="string"?e.payload=bn.from(t):bn.isBuffer(t)?e.payload=t:e.payload=t._impl,e.correlation!==void 0&&ke.assertParamPropValue(typeof e.correlation=="string",1,"correlation"),e.delay!==void 0&&ke.assertParamPropValue(Number.isInteger(e.delay),1,"delay"),e.exceptionQueue!==void 0&&ke.assertParamPropValue(typeof e.exceptionQueue=="string",1,"exceptionQueue"),e.expiration!==void 0&&ke.assertParamPropValue(Number.isInteger(e.expiration),1,"expiration"),e.priority!==void 0&&ke.assertParamPropValue(Number.isInteger(e.priority),1,"priority"),e.recipients!==void 0&&ke.assertParamPropValue(Gn.isArrayOfStrings(e.recipients),1,"recipients"),e}async create(e,t,s){if(s.payloadType){if(typeof s.payloadType=="string"){let r=await e._getDbObjectClassForName(s.payloadType);this._payloadTypeClass=r,s.payloadType=r}else ke.assertParamPropValue(Gn.isObject(s.payloadType)&&s.payloadType.prototype instanceof il,2,"payloadType"),this._payloadTypeClass=s.payloadType;this._payloadType=sl.DB_TYPE_OBJECT,this._payloadTypeName=this._payloadTypeClass.prototype.name}else this._payloadType=sl.DB_TYPE_RAW,this._payloadTypeName="RAW";this._name=t,this._impl=await e._impl.getQueue(t,s)}async deqMany(e){ke.assertArgCount(arguments,1,1),ke.assertParamValue(Number.isInteger(e)&&e>0,1);let t=await this._impl.deqMany(e),s=new Array(t.length);for(let r=0;r<t.length;r++){let _=new rl;_._impl=t[r],_._payloadTypeClass=this._payloadTypeClass,s[r]=_}return s}async deqOne(){ke.assertArgCount(arguments,0,0);let e=await this._impl.deqOne();if(e){let t=new rl;return t._impl=e,t._payloadTypeClass=this._payloadTypeClass,t}}get deqOptions(){if(!this._deqOptions){let e=new su;e._impl=this._impl.deqOptions,this._deqOptions=e}return this._deqOptions}async enqMany(e){ke.assertArgCount(arguments,1,1),ke.assertParamValue(Array.isArray(e)&&e.length>0,1);let t=new Array(e.length);for(let s=0;s<e.length;s++)t[s]=this._verifyMessage(e[s]);return await this._impl.enqMany(t)}async enqOne(e){return ke.assertArgCount(arguments,1,1),e=this._verifyMessage(e),await this._impl.enqOne(e)}get enqOptions(){if(!this._enqOptions){let e=new ru;e._impl=this._impl.enqOptions,this._enqOptions=e}return this._enqOptions}get name(){return this._name}get payloadType(){return this._payloadType}get payloadTypeName(){return this._payloadTypeName}get payloadTypeClass(){return this._payloadTypeClass}};T(Hn,"AqQueue");var Pr=Hn;Gn.wrapFns(Pr.prototype,"deqOne","deqMany","enqOne","enqMany");nl.exports=Pr});var cs=m((ED,_l)=>{"use strict";var vn=class vn{get createdOn(){return this._impl.getCreatedOn()}getContent(){return JSON.parse(this._impl.getContentAsString())}getContentAsBuffer(){return this._impl.getContentAsBuffer()}getContentAsString(){return this._impl.getContentAsString()}get key(){return this._impl.getKey()}get lastModified(){return this._impl.getLastModified()}get mediaType(){return this._impl.getMediaType()}get version(){return this._impl.getVersion()}};T(vn,"SodaDocument");var fr=vn;fr.prototype._sodaDocumentMarker=!0;_l.exports=fr});var Wn=m((ND,ol)=>{"use strict";var Es=U(),iu=ve(),nu=cs(),Kn=class Kn{async close(){Es.assertArgCount(arguments,0,0),Es.assert(this._impl,Es.ERR_INVALID_SODA_DOC_CURSOR),await this._impl.close(),delete this._impl}async getNext(){Es.assertArgCount(arguments,0,0),Es.assert(this._impl,Es.ERR_INVALID_SODA_DOC_CURSOR);let e=await this._impl.getNext();if(e){let t=new nu;return t._impl=e,t}}};T(Kn,"SodaDocCursor");var dr=Kn;iu.wrapFns(dr.prototype,"close","getNext");ol.exports=dr});var Qn=m((hD,Tl)=>{"use strict";var _u=Wn(),zn=cs(),_e=U(),pr=ve(),al=Ze(),Xn=class Xn{constructor(){this._options={autoCommit:al.autoCommit,fetchArraySize:al.fetchArraySize}}async count(){return _e.assertArgCount(arguments,0,0),await this._impl.count(this._options)}async getCursor(){_e.assertArgCount(arguments,0,0);let e=new _u;return e._impl=await this._impl.getCursor(this._options),e}async getDocuments(){_e.assertArgCount(arguments,0,0);let e=await this._impl.getDocuments(this._options),t=new Array(e.length);for(let s=0;s<e.length;s++)t[s]=new zn,t[s]._impl=e[s];return t}async getOne(){_e.assertArgCount(arguments,0,0);let e=await this._impl.getOne(this._options);if(e){let t=new zn;return t._impl=e,t}}async replaceOne(e){return _e.assertArgCount(arguments,1,1),e=pr.verifySodaDoc(e),await this._impl.replaceOne(this._options,e)}async replaceOneAndGet(e){_e.assertArgCount(arguments,1,1),e=pr.verifySodaDoc(e);let t=await this._impl.replaceOneAndGet(this._options,e);if(t){let s=new zn;return s._impl=t,s}}async remove(){return _e.assertArgCount(arguments,0,0),await this._impl.remove(this._options)}fetchArraySize(e){return _e.assertArgCount(arguments,1,1),_e.assertParamValue(Number.isInteger(e)&&e>=0,1),this._options.fetchArraySize=e,this}filter(e){return _e.assertArgCount(arguments,1,1),_e.assertParamValue(pr.isObject(e),1),this._options.filter=JSON.stringify(e),this}hint(e){return _e.assertArgCount(arguments,1,1),_e.assertParamValue(typeof e=="string",1),this._options.hint=e,this}key(e){return _e.assertArgCount(arguments,1,1),_e.assertParamValue(typeof e=="string",1),this._options.key=e,this._options.keys=void 0,this}keys(e){_e.assertArgCount(arguments,1,1),_e.assertParamValue(Array.isArray(e),1);for(let t=0;t<e.length;t++)_e.assertParamValue(typeof e[t]=="string",1);return this._options.keys=e,this._options.key=void 0,this}limit(e){return _e.assertArgCount(arguments,1,1),_e.assertParamValue(typeof e=="number",1),this._options.limit=e,this}skip(e){return _e.assertArgCount(arguments,1,1),_e.assertParamValue(typeof e=="number",1),this._options.skip=e,this}version(e){return _e.assertArgCount(arguments,1,1),_e.assertParamValue(typeof e=="string",1),this._options.version=e,this}};T(Xn,"SodaOperation");var Rr=Xn;pr.wrapFns(Rr.prototype,"count","getCursor","getDocuments","getOne","remove","replaceOne","replaceOneAndGet");Tl.exports=Rr});var Jn=m((uD,cl)=>{"use strict";var Dr=cs(),ou=Qn(),oe=U(),it=ve(),Dt=Ze(),jn=class jn{async createIndex(e){oe.assertArgCount(arguments,1,1),oe.assertParamValue(it.isObject(e),1);let t={autoCommit:Dt.autoCommit};return await this._impl.createIndex(JSON.stringify(e),t)}async drop(){oe.assertArgCount(arguments,0,0);let e={autoCommit:Dt.autoCommit};return await this._impl.drop(e)}async dropIndex(e,t){let s={autoCommit:Dt.autoCommit};return oe.assertArgCount(arguments,1,2),oe.assertParamValue(typeof e=="string",1),arguments.length==2&&(oe.assertParamValue(typeof t=="object",2),t.force!==void 0&&(oe.assertParamPropValue(typeof t.force=="boolean",2,"force"),s.force=t.force)),await this._impl.dropIndex(e,s)}find(){oe.assertArgCount(arguments,0,0);let e=new ou;return e._impl=this._impl.find(),e}async getDataGuide(){oe.assertArgCount(arguments,0,0);let e=new Dr;return e._impl=await this._impl.getDataGuide(),e}async insertMany(e){oe.assertArgCount(arguments,1,1),oe.assertParamValue(Array.isArray(e)&&e.length>0,1);let t=Array(e.length);for(let r=0;r<e.length;r++)t[r]=it.verifySodaDoc(e[r]);let s={autoCommit:Dt.autoCommit};await this._impl.insertMany(t,s)}async insertManyAndGet(e,t){let s={autoCommit:Dt.autoCommit};oe.assertArgCount(arguments,1,2),oe.assertParamValue(Array.isArray(e)&&e.length>0,1),arguments.length==2&&(oe.assertParamValue(it.isObject(t),2),t.hint!==void 0&&(oe.assertParamPropValue(typeof t.hint=="string",2,"hint"),s.hint=t.hint));let r=Array(e.length);for(let o=0;o<e.length;o++)r[o]=it.verifySodaDoc(e[o]);let _=await this._impl.insertManyAndGet(r,s);for(let o=0;o<e.length;o++){let a=r[o]=new Dr;a._impl=_[o]}return r}async insertOne(e){oe.assertArgCount(arguments,1,1),e=it.verifySodaDoc(e);let t={autoCommit:Dt.autoCommit};await this._impl.insertOne(e,t)}async insertOneAndGet(e,t){let s={autoCommit:Dt.autoCommit};oe.assertArgCount(arguments,1,2),e=it.verifySodaDoc(e),arguments.length==2&&(oe.assertParamValue(it.isObject(t),2),t.hint!==void 0&&(oe.assertParamPropValue(typeof t.hint=="string",2,"hint"),s.hint=t.hint));let r=new Dr;return r._impl=await this._impl.insertOneAndGet(e,s),r}get metaData(){return JSON.parse(this._impl.getMetaData())}get name(){return this._impl.getName()}async save(e){oe.assertArgCount(arguments,1,1),e=it.verifySodaDoc(e);let t={autoCommit:Dt.autoCommit};await this._impl.save(e,t)}async saveAndGet(e,t){oe.assertArgCount(arguments,1,2),e=it.verifySodaDoc(e);let s={autoCommit:Dt.autoCommit};arguments.length==2&&(oe.assertParamValue(it.isObject(t),2),t.hint!==void 0&&(oe.assertParamPropValue(typeof t.hint=="string",2,"hint"),s.hint=t.hint));let r=new Dr;return r._impl=await this._impl.saveAndGet(e,s),r}async truncate(){oe.assertArgCount(arguments,0,0),await this._impl.truncate()}};T(jn,"SodaCollection");var mr=jn;it.wrapFns(mr.prototype,"createIndex","drop","dropIndex","getDataGuide","insertMany","insertManyAndGet","insertOne","insertOneAndGet","save","saveAndGet","truncate");cl.exports=mr});var e_=m((fD,Nl)=>{"use strict";var{Buffer:Zn}=require("buffer"),El=Jn(),au=cs(),Ue=U(),zt=ve(),ll=Ze(),$n=class $n{_getConnection(){return this._connection}async createCollection(e,t){let s={autoCommit:ll.autoCommit};Ue.assertArgCount(arguments,1,2),Ue.assertParamValue(typeof e=="string",1),arguments.length==2&&(Ue.assertParamValue(zt.isObject(t),2),t.mode!==void 0&&(Ue.assertParamPropValue(Number.isInteger(t.mode)&&t.mode>0,2,"mode"),s.mode=t.mode),t.metaData!==void 0&&(Ue.assertParamPropValue(zt.isObject(t.metaData),2,"metaData"),s.metaData=JSON.stringify(t.metaData)));let r=new El;return r._impl=await this._impl.createCollection(e,s),r}createDocument(e,t){let s={};Ue.assertArgCount(arguments,1,2),Ue.assertParamValue(Zn.isBuffer(e)||typeof e=="string"||zt.isObject(e),1),arguments.length>1&&(Ue.assertParamValue(zt.isObject(t),2),s=t,Ue.assertParamPropString(s,2,"key"),Ue.assertParamPropString(s,2,"mediaType")),typeof e=="string"?e=Zn.from(e):zt.isObject(e)&&(e=Zn.from(JSON.stringify(e)));let r=new au;return r._impl=this._impl.createDocument(e,s),r}async getCollectionNames(e){let t={};return Ue.assertArgCount(arguments,0,1),arguments.length==1&&(Ue.assertParamValue(zt.isObject(e),1),t=e,t.startsWith!==void 0&&Ue.assertParamPropValue(typeof t.startsWith=="string",1,"startsWith"),t.limit!==void 0&&Ue.assertParamPropValue(Number.isInteger(t.limit),1,"limit")),await this._impl.getCollectionNames(t)}async openCollection(e){Ue.assertArgCount(arguments,1,1),Ue.assertParamValue(typeof e=="string",1);let t={autoCommit:ll.autoCommit},s=await this._impl.openCollection(e,t);if(s){let r=new El;return r._impl=s,r}}};T($n,"SodaDatabase");var Ir=$n;zt.wrapFns(Ir.prototype,"createCollection","getCollectionNames","openCollection");Nl.exports=Ir});var i_=m((pD,Sl)=>{"use strict";var Tu=qn(),ls=Ts(),{Buffer:cu}=require("buffer"),t_=as(),Cr=ur(),Eu=e_(),lu=require("events"),Nu=Un(),l=U(),he=ve(),Or=os(),Su=require("process"),hu=require("util"),de=Be(),s_=Ze(),Au=xn(),$=He(),ys=new Map,r_=class r_ extends lu{constructor(){super(),this._dbObjectClasses=new Map,this._closing=!1}_addDefaultsToExecOpts(e){e.connection=this,e.keepInStmtCache===void 0&&(e.keepInStmtCache=!0),s_.addToOptions(e,"autoCommit","dbObjectAsPojo","fetchArraySize","fetchTypeHandler","maxRows","outFormat","prefetchRows")}_buildDbObjectClass(e){let t=T(function(s){if(this._impl=new Or.DbObjectImpl(e),this.isCollection){let r=new Proxy(this,ls._collectionProxyHandler);if(s!==void 0)for(let _=0;_<s.length;_++)this.append(s[_]);return r}else s!==void 0&&Object.assign(this,s)},"DbObject");if(t.prototype=Object.create(ls.prototype),t.prototype.constructor=t,t.prototype._objType=e,e.elementTypeClass){let s=this._getDbObjectClass(e.elementTypeClass);e.elementTypeClass=s}if(he.addTypeProperties(e,"elementType"),e.attributes){let s={};for(let r of e.attributes){r.typeClass&&(r.typeClass=this._getDbObjectClass(r.typeClass)),he.addTypeProperties(r,"type");let _={get(){return this._getAttrValue(r)},set(o){this._setAttrValue(r,o)}};s[r.name]=_}Object.defineProperties(t.prototype,s)}return t.toString=function(){return"DbObjectClass ["+e.fqn+"]"},t}_getDbObjectClass(e){if(e.prototype instanceof ls)return e;let t=this._dbObjectClasses.get(e);return t||(t=this._buildDbObjectClass(e),t._connection=this,t._objType=e,e._connection=this._impl,this._dbObjectClasses.set(e,t)),t}async _getDbObjectClassForName(e){let t=this._dbObjectClasses.get(e);if(!t){let s=await this._impl.getDbObjectClass(e);t=this._getDbObjectClass(s),this._dbObjectClasses.set(e,t)}return t}_isBindDir(e){return e===de.BIND_IN||e===de.BIND_OUT||e===de.BIND_INOUT}_isBindValue(e){return e==null||typeof e=="number"||typeof e=="string"||typeof e=="boolean"||Array.isArray(e)||cu.isBuffer(e)||hu.isDate(e)||e instanceof t_||e instanceof Cr||e instanceof ls}async _processBindUnit(e,t,s){let r=!1;if(t.dir===void 0?e.dir=de.BIND_IN:(l.assert(this._isBindDir(t.dir),l.ERR_INVALID_BIND_DIRECTION),e.dir=t.dir,r=!0),t.type!==void 0?(typeof t.type=="string"?(e.type=$.DB_TYPE_OBJECT,e.typeClass=await this._getDbObjectClassForName(t.type),e.objType=e.typeClass._objType):t.type.prototype instanceof ls?(e.type=$.DB_TYPE_OBJECT,e.typeClass=t.type,e.objType=e.typeClass._objType):(l.assert(t.type instanceof $.DbType,l.ERR_INVALID_BIND_DATA_TYPE,2),e.type=t.type),r=!0):s&&(e.name&&l.throwErr(l.ERR_MISSING_TYPE_BY_NAME,e.name),l.throwErr(l.ERR_MISSING_TYPE_BY_POS,e.pos)),(e.dir!==de.BIND_IN||s)&&(t.maxSize!==void 0?(l.assertParamPropValue(Number.isInteger(t.maxSize)&&t.maxSize>0,2,"maxSize"),e.maxSize=t.maxSize,e.checkSize=!0,r=!0):s?(e.type===$.DB_TYPE_VARCHAR||e.type===$.DB_TYPE_RAW)&&(e.name&&l.throwErr(l.ERR_MISSING_MAX_SIZE_BY_NAME,e.name),l.throwErr(l.ERR_MISSING_MAX_SIZE_BY_POS,e.pos)):e.maxSize=de.DEFAULT_MAX_SIZE_FOR_OUT_BINDS),e.isArray=!1,s||t.maxArraySize!==void 0&&(l.assertParamPropValue(Number.isInteger(t.maxArraySize)&&t.maxArraySize>0,2,"maxArraySize"),e.maxArraySize=t.maxArraySize,e.isArray=!0),!s&&t.val!==void 0)return t.val;r||l.throwErr(l.ERR_INVALID_BIND_UNIT)}async _processBindValue(e,t,s){let r=Au.transformValueIn(e,t,s);e.isArray?e.values=r.concat(e.values.slice(r.length)):e.values[s.pos]=r,e.type===$.DB_TYPE_OBJECT&&e.typeClass===void 0&&(e.typeClass=await this._getDbObjectClass(t._objType),e.objType=e.typeClass._objType)}async _processExecuteBind(e,t){e.isArray=!1;let s;if(this._isBindValue(t)?(e.dir=de.BIND_IN,s=t):s=await this._processBindUnit(e,t,!1),e.dir!==de.BIND_OUT){let r={pos:0,allowArray:!0};await this._processBindValue(e,s,r)}e.type===void 0&&(e.type=$.DB_TYPE_VARCHAR,e.maxSize===void 0&&(e.maxSize=1)),e.isArray&&e.type!==$.DB_TYPE_VARCHAR&&e.type!==$.DB_TYPE_NVARCHAR&&e.type!==$.DB_TYPE_CHAR&&e.type!==$.DB_TYPE_NCHAR&&e.type!==$.DB_TYPE_NUMBER&&e.type!==$.DB_TYPE_BINARY_FLOAT&&e.type!==$.DB_TYPE_BINARY_DOUBLE&&e.type!==$.DB_TYPE_DATE&&e.type!==$.DB_TYPE_TIMESTAMP&&e.type!==$.DB_TYPE_TIMESTAMP_LTZ&&e.type!==$.DB_TYPE_TIMESTAMP_TZ&&e.type!==$.DB_TYPE_RAW&&l.throwErr(l.ERR_INVALID_TYPE_FOR_ARRAY_BIND)}async _processExecuteBinds(e){let t=[];if(Array.isArray(e))for(let s=0;s<e.length;s++){let r=t[s]={pos:s+1,values:[]};await this._processExecuteBind(r,e[s])}else{l.assertParamValue(he.isObject(e),2);let s=Object.getOwnPropertyNames(e);for(let r=0;r<s.length;r++){let _=t[r]={name:s[r],values:[]};await this._processExecuteBind(_,e[s[r]])}}return t}async _processExecuteManyBinds(e,t){let s=[],r;if(t!==void 0)if(Array.isArray(t)){r=!0;for(let _=0;_<t.length;_++){let o=s[_]={pos:_+1,values:[]};await this._processBindUnit(o,t[_],!0)}}else{r=!1;let _=Object.getOwnPropertyNames(t);for(let o=0;o<_.length;o++){let a=s[o]={name:_[o],values:[]};await this._processBindUnit(a,t[_[o]],!0)}}else{let _=e[0];if(l.assertParamValue(he.isObjectOrArray(_),2),Array.isArray(_)){r=!0;for(let o=0;o<_.length;o++)s[o]={pos:o+1}}else{r=!1;let o=Object.getOwnPropertyNames(_);for(let a=0;a<o.length;a++)s[a]={name:o[a]}}for(let o=0;o<s.length;o++)s[o].dir=de.BIND_IN,s[o].isArray=!1,s[o].values=[]}for(let _=0;_<e.length;_++){let o=e[_],a={pos:_,allowArray:!1};l.assert(r&&Array.isArray(o)||!r&&he.isObject(o),l.ERR_MIXED_BIND);for(let c=0;c<s.length;c++){let N=s[c],E=r?o[c]:o[N.name];await this._processBindValue(N,E,a)}}for(let _=0;_<s.length;_++){let o=s[_];o.type===void 0&&(o.type=$.DB_TYPE_VARCHAR,o.maxSize=1)}return s}_transformOutBind(e,t){let s=e;if(Array.isArray(e)){s=[];for(let r=0;r<e.length;r++)s.push(this._transformOutBind(e[r],t))}else if(e instanceof Or.ResultSetImpl)s=new Cr,s._setup(this,e);else if(e instanceof Or.LobImpl)s=new t_,s._setup(e,!0);else if(e instanceof Or.DbObjectImpl){let r=this._dbObjectClasses.get(e._objType);s=Object.create(r.prototype),s._impl=e,t.dbObjectAsPojo?s=s._toPojo():s.isCollection&&(s=new Proxy(s,ls._collectionProxyHandler))}return s}_verifyExecOpts(e,t){let s={};if(l.assertParamValue(he.isObject(e),3),e.autoCommit!==void 0&&(l.assertParamPropValue(typeof e.autoCommit=="boolean",3,"autoCommit"),s.autoCommit=e.autoCommit),e.dbObjectAsPojo!==void 0&&(l.assertParamPropValue(typeof e.dbObjectAsPojo=="boolean",3,"dbObjectAsPojo"),s.dbObjectAsPojo=e.dbObjectAsPojo),e.keepInStmtCache!==void 0&&(l.assertParamPropValue(typeof e.keepInStmtCache=="boolean",3,"keepInStmtCache"),s.keepInStmtCache=e.keepInStmtCache),t)e.bindDefs!==void 0&&(l.assertParamPropValue(he.isObjectOrArray(e.bindDefs),3,"bindDefs"),s.bindDefs=e.bindDefs),e.batchErrors!==void 0&&(l.assertParamPropValue(typeof e.batchErrors=="boolean",3,"batchErrors"),s.batchErrors=e.batchErrors),e.dmlRowCounts!==void 0&&(l.assertParamPropValue(typeof e.dmlRowCounts=="boolean",3,"dmlRowCounts"),s.dmlRowCounts=e.dmlRowCounts);else{if(e.fetchArraySize!==void 0&&(l.assertParamPropValue(Number.isInteger(e.fetchArraySize)&&e.fetchArraySize>0,3,"fetchArraySize"),s.fetchArraySize=e.fetchArraySize),e.fetchInfo!==void 0){l.assertParamPropValue(he.isObject(e.fetchInfo),3,"fetchInfo");let r=Object.getOwnPropertyNames(e.fetchInfo),_=new Map(s_.fetchTypeMap);for(let o of r){let a=e.fetchInfo[o];a.type===void 0&&l.throwErr(l.ERR_NO_TYPE_FOR_CONVERSION),a.type!==de.DEFAULT&&a.type!==$.DB_TYPE_VARCHAR&&a.type!==$.DB_TYPE_RAW&&l.throwErr(l.ERR_INVALID_TYPE_FOR_CONVERSION),_.set(o,a.type)}s.fetchTypeMap=_}if(e.fetchTypeHandler!==void 0){let r=typeof e.fetchTypeHandler;l.assertParamPropValue(r==="function",3,"fetchTypeHandler"),s.fetchTypeHandler=e.fetchTypeHandler}e.maxRows!==void 0&&(l.assertParamPropValue(Number.isInteger(e.maxRows)&&e.maxRows>=0,3,"maxRows"),s.maxRows=e.maxRows),e.outFormat!==void 0&&(l.assertParamPropValue(e.outFormat===de.OUT_FORMAT_ARRAY||e.outFormat===de.OUT_FORMAT_OBJECT,3,"outFormat"),s.outFormat=e.outFormat),e.prefetchRows!==void 0&&(l.assertParamPropValue(Number.isInteger(e.prefetchRows)&&e.prefetchRows>=0,3,"prefetchRows"),s.prefetchRows=e.prefetchRows),e.resultSet!==void 0&&(l.assertParamPropValue(typeof e.resultSet=="boolean",3,"resultSet"),s.resultSet=e.resultSet)}return s}get action(){return null}set action(e){l.assertPropValue(typeof e=="string","action"),l.assert(this._impl,l.ERR_INVALID_CONNECTION),this._impl.setAction(e)}async breakExecution(){l.assertArgCount(arguments,0,0),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.breakExecution()}get callTimeout(){if(this._impl)return this._impl.getCallTimeout()}set callTimeout(e){l.assertPropValue(Number.isInteger(e)&&e>=0,"callTimeout"),l.assert(this._impl,l.ERR_INVALID_CONNECTION),this._impl.setCallTimeout(e)}async changePassword(e,t,s){l.assertArgCount(arguments,3,3),l.assertParamValue(typeof e=="string",1),l.assertParamValue(typeof t=="string",2),l.assertParamValue(typeof s=="string",3),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.changePassword(e,t,s)}get clientId(){return null}set clientId(e){l.assertPropValue(typeof e=="string","clientId"),l.assert(this._impl,l.ERR_INVALID_CONNECTION),this._impl.setClientId(e)}get clientInfo(){return null}set clientInfo(e){l.assertPropValue(typeof e=="string","clientInfo"),l.assert(this._impl,l.ERR_INVALID_CONNECTION),this._impl.setClientInfo(e)}async close(e){let t={};l.assertArgCount(arguments,0,1),arguments.length==1&&(l.assertParamValue(he.isObject(e),1),t=e,l.assertParamPropBool(t,1,"drop")),l.assert(this._impl&&!this._closing,l.ERR_INVALID_CONNECTION),this._closing=!0;try{await this._impl.close(t)}finally{this._closing=!1}delete this._impl,this._dbObjectClasses.clear(),this.emit("_afterConnClose")}async commit(){l.assertArgCount(arguments,0,0),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.commit()}async createLob(e){l.assertArgCount(arguments,1,1),l.assertParamValue(e===$.DB_TYPE_CLOB||e===$.DB_TYPE_BLOB||e===$.DB_TYPE_NCLOB,1),l.assert(this._impl,l.ERR_INVALID_CONNECTION);let t=new t_;return t._setup(await this._impl.createLob(e),!1),t}get currentSchema(){if(this._impl)return this._impl.getCurrentSchema()}set currentSchema(e){l.assertPropValue(typeof e=="string","currentSchema"),l.assert(this._impl,l.ERR_INVALID_CONNECTION),this._impl.setCurrentSchema(e)}get dbOp(){return null}set dbOp(e){l.assertPropValue(typeof e=="string","dbOp"),l.assert(this._impl,l.ERR_INVALID_CONNECTION),this._impl.setDbOp(e)}get thin(){return s_.thin}get ecid(){return null}set ecid(e){l.assertPropValue(typeof e=="string","ecid"),l.assert(this._impl,l.ERR_INVALID_CONNECTION),this._impl.setECID(e)}async execute(e,t,s){let _=[],o={};l.assertArgCount(arguments,1,3),l.assertParamValue(typeof e=="string",1),arguments.length>=2&&(_=await this._processExecuteBinds(t)),arguments.length==3&&(o=this._verifyExecOpts(s,!1)),this._addDefaultsToExecOpts(o),l.assert(this._impl,l.ERR_INVALID_CONNECTION);let a;try{a=await this._impl.execute(e,1,_,o,!1)}catch(c){throw c.errorNum===1406&&l.throwErr(l.ERR_INSUFFICIENT_BUFFER_FOR_BINDS),c}if(a.resultSet!==void 0){let c=new Cr;c._setup(this,a.resultSet),a.metaData=c._impl.metaData,o.resultSet?a.resultSet=c:(a.rows=await c._getAllRows(),delete a.resultSet)}if(a.outBinds!==void 0)for(let c in a.outBinds){let N=this._transformOutBind(a.outBinds[c],o);a.outBinds[c]=N}if(a.implicitResults)for(let c in a.implicitResults){let N=a.implicitResults[c],E=new Cr;E._setup(this,N),o.resultSet?a.implicitResults[c]=E:a.implicitResults[c]=await E._getAllRows()}return a}async executeMany(e,t,s){let r={},_=[],o;l.assertArgCount(arguments,2,3),l.assertParamValue(typeof e=="string",1),arguments.length==3&&(r=this._verifyExecOpts(s,!0)),this._addDefaultsToExecOpts(r),typeof t=="number"?(l.assertParamValue(Number.isInteger(t)&&t>0,2),o=t,r.bindDefs!==void 0&&(_=await this._processExecuteManyBinds([],r.bindDefs))):(l.assertParamValue(Array.isArray(t)&&t.length>0,2),o=t.length,_=await this._processExecuteManyBinds(t,r.bindDefs)),l.assert(this._impl,l.ERR_INVALID_CONNECTION);let a=await this._impl.execute(e,o,_,r,!0);if(a.outBinds!==void 0)for(let c=0;c<a.outBinds.length;c++){let N=a.outBinds[c];for(let E in N)N[E]=this._transformOutBind(N[E],r)}return a}get externalName(){if(this._impl)return this._impl.getExternalName()}set externalName(e){l.assertPropValue(typeof e=="string","externalName"),l.assert(this._impl,l.ERR_INVALID_CONNECTION),this._impl.setExternalName(e)}async getDbObjectClass(e){return l.assertArgCount(arguments,1,1),l.assertParamValue(typeof e=="string",1),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._getDbObjectClassForName(e)}async getQueue(e,t){let s={};l.assertArgCount(arguments,1,2),l.assertParamValue(typeof e=="string",1),arguments.length==2&&(l.assertParamValue(he.isObject(t),2),s={...t}),l.assert(this._impl,l.ERR_INVALID_CONNECTION);let r=new Tu;return await r.create(this,e,s),r}getSodaDatabase(){l.assertArgCount(arguments,0,0),l.assert(this._impl,l.ERR_INVALID_CONNECTION);let e=new Eu;return e._impl=this._impl.getSodaDatabase(),e}async getStatementInfo(e){l.assertArgCount(arguments,1,1),l.assertParamValue(typeof e=="string",1),l.assert(this._impl,l.ERR_INVALID_CONNECTION);let t=await this._impl.getStatementInfo(e);if(t.metaData)for(let s=0;s<t.metaData.length;s++){let r=t.metaData[s];he.addTypeProperties(r,"dbType"),r.fetchType=$.DB_TYPE_FETCH_TYPE_MAP.get(r.dbType)}return t}get internalName(){if(this._impl)return this._impl.getInternalName()}set internalName(e){l.assertPropValue(typeof e=="string","internalName"),l.assert(this._impl,l.ERR_INVALID_CONNECTION),this._impl.setInternalName(e)}isHealthy(){return this._impl!==void 0&&!this._closing&&this._impl.isHealthy()}get module(){return null}set module(e){l.assertPropValue(typeof e=="string","module"),l.assert(this._impl,l.ERR_INVALID_CONNECTION),this._impl.setModule(e)}get oracleServerVersion(){if(this._impl)return this._impl.getOracleServerVersion()}get oracleServerVersionString(){if(this._impl)return this._impl.getOracleServerVersionString()}async ping(){l.assertArgCount(arguments,0,0),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.ping()}queryStream(e,t,s){l.assertArgCount(arguments,1,3),l.assertParamValue(typeof e=="string",1),arguments.length==3?(l.assertParamValue(he.isObject(s),3),s={...s}):s={},s.resultSet=!0;let r=new Nu;return Su.nextTick(async()=>{try{let _=await this.execute(e,t||[],s);_.resultSet||l.throwErr(l.ERR_NOT_A_QUERY),r._open(_.resultSet)}catch(_){r.destroy(_);return}}),r}async rollback(){l.assertArgCount(arguments,0,0),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.rollback()}async shutdown(e){let t=de.SHUTDOWN_MODE_DEFAULT;l.assertArgCount(arguments,0,1),e!==void 0&&(l.assertParamValue(typeof t=="number",1),t=e),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.shutdown(t)}async startup(e){let t={};l.assertArgCount(arguments,0,1),arguments.length==1&&(l.assertParamValue(typeof t=="object",1),t=e,l.assertParamPropBool(t,1,"force"),l.assertParamPropBool(t,1,"restrict"),l.assertParamPropString(t,1,"pfile")),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.startup(t)}get stmtCacheSize(){if(this._impl)return this._impl.getStmtCacheSize()}set stmtCacheSize(e){l.assertPropValue(Number.isInteger(e)&&e>=0,"stmtCacheSize"),l.assert(this._impl,l.ERR_INVALID_CONNECTION),this._impl.setStmtCacheSize(e)}async subscribe(e,t){l.assertArgCount(arguments,2,2),l.assertParamValue(typeof e=="string",1),l.assertParamValue(he.isObject(t),2),t={...t},l.assertParamPropUnsignedInt(t,2,"namespace"),t.namespace===void 0&&(t.namespace=de.SUBSCR_NAMESPACE_DBCHANGE),l.assertParamPropString(t,2,"ipAddress"),l.assertParamPropUnsignedInt(t,2,"port"),l.assertParamPropUnsignedInt(t,2,"timeout"),l.assertParamPropUnsignedInt(t,2,"operations"),l.assertParamPropUnsignedInt(t,2,"qos"),l.assertParamPropUnsignedInt(t,2,"groupingClass"),l.assertParamPropUnsignedInt(t,2,"groupingValue"),l.assertParamPropUnsignedInt(t,2,"groupingType"),l.assertParamPropBool(t,2,"clientInitiated"),l.assertParamPropFunction(t,2,"callback"),l.assert(t.callback,l.ERR_MISSING_SUBSCR_CALLBACK),t.namespace===de.SUBSCR_NAMESPACE_DBCHANGE&&(l.assertParamPropString(t,2,"sql"),l.assert(t.sql&&t.sql.length>0,l.ERR_MISSING_SUBSCR_SQL),t.binds!==void 0&&(t.binds=await this._processExecuteBinds(t.binds))),l.assert(this._impl,l.ERR_INVALID_CONNECTION);let s=ys.get(e),r=await this._impl.subscribe(s,t),_;return t.namespace===de.SUBSCR_NAMESPACE_DBCHANGE?(_=r.subscription,delete r.subscription):(_=r,r=void 0),ys.set(e,_),r}get tag(){if(this._impl)return this._impl.getTag()}set tag(e){l.assertPropValue(typeof e=="string","tag"),l.assert(this._impl,l.ERR_INVALID_CONNECTION),this._impl.setTag(e)}async tpcBegin(e,t,s){l.assertArgCount(arguments,1,3),l.assertParamValue(he.isXid(e),1),arguments.length<3?s=60:l.assertParamValue(typeof s=="number",3),arguments.length<2?t=de.TPC_BEGIN_NEW:l.assertParamValue(typeof t=="number",2),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.tpcBegin(e,t,s)}async tpcCommit(e,t){l.assertArgCount(arguments,0,2),arguments.length<2?t=!1:l.assertParamValue(typeof t=="boolean",2),arguments.length>=1&&l.assertParamValue(he.isXid(e),1),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.tpcCommit(e,t)}async tpcEnd(e,t){l.assertArgCount(arguments,0,2),arguments.length<2?t=de.TPC_END_NORMAL:l.assertParamValue(typeof t=="number",2),arguments.length>=1&&l.assertParamValue(he.isXid(e),1),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.tpcEnd(e,t)}async tpcForget(e){l.assertArgCount(arguments,1,1),l.assertParamValue(he.isXid(e),1),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.tpcForget(e)}async tpcPrepare(e){return l.assertArgCount(arguments,0,1),arguments.length>=1&&l.assertParamValue(he.isXid(e),1),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.tpcPrepare(e)}async tpcRecover(e){l.assertArgCount(arguments,0,1),arguments.length==1?l.assertParamValue(typeof e=="boolean",1):e=!0;let t=`
      SELECT
          formatid as "formatId",
          UTL_RAW.CAST_TO_VARCHAR2(globalid) as "globalTransactionId",
          UTL_RAW.CAST_TO_VARCHAR2(branchid) as "branchQualifier"
      FROM DBA_PENDING_TRANSACTIONS`,s=`
      SELECT
          formatid as "formatId",
          globalid as "globalTransactionId",
          branchid as "branchQualifier"
      FROM DBA_PENDING_TRANSACTIONS`,r={outFormat:de.OUT_FORMAT_OBJECT,resultSet:!1};return(await this.execute(e?t:s,{},r)).rows}async tpcRollback(e){l.assertArgCount(arguments,0,1),arguments.length==1&&l.assertParamValue(he.isXid(e),1),l.assert(this._impl,l.ERR_INVALID_CONNECTION),await this._impl.tpcRollback(e)}async unsubscribe(e){l.assertArgCount(arguments,1,1),l.assertParamValue(typeof e=="string",1),l.assert(this._impl,l.ERR_INVALID_CONNECTION),l.assert(ys.has(e),l.ERR_INVALID_SUBSCR),await this._impl.unsubscribe(ys.get(e)),ys.delete(e)}};T(r_,"Connection");var xt=r_;xt.prototype.break=he.callbackify(xt.prototype.breakExecution);he.wrapFns(xt.prototype,"changePassword","close","commit","createLob","execute","executeMany","getDbObjectClass","getQueue","getStatementInfo","ping","rollback","shutdown","startup","subscribe","tpcBegin","tpcCommit","tpcEnd","tpcForget","tpcPrepare","tpcRecover","tpcRollback","unsubscribe");xt.prototype.release=xt.prototype.close;Sl.exports=xt});var o_=m((DD,hl)=>{"use strict";var uu=require("process"),Pu=Ze(),__=class __{constructor(e){let t=0;e._totalRequestsEnqueued!==0&&(t=Math.round(e._totalTimeInQueue/e._totalRequestsEnqueued)),this.gatheredDate=Date.now(),this.upTime=this.gatheredDate-e._createdDate,this.upTimeSinceReset=this.gatheredDate-e._timeOfReset,this.connectionRequests=e._totalConnectionRequests,this.requestsEnqueued=e._totalRequestsEnqueued,this.requestsDequeued=e._totalRequestsDequeued,this.failedRequests=e._totalFailedRequests,this.rejectedRequests=e._totalRequestsRejected,this.requestTimeouts=e._totalRequestTimeouts,this.maximumQueueLength=e._maximumQueueLength,this.currentQueueLength=e._connRequestQueue.length,this.timeInQueue=e._totalTimeInQueue,this.minimumTimeInQueue=e._minTimeInQueue,this.maximumTimeInQueue=e._maxTimeInQueue,this.averageTimeInQueue=t,this.connectionsInUse=e.connectionsInUse,this.connectionsOpen=e.connectionsOpen,this.connectString=e.connectString,this.edition=e.edition,this.events=e.events,this.externalAuth=e.externalAuth,this.homogeneous=e.homogeneous,this.poolAlias=e.poolAlias,this.poolIncrement=e.poolIncrement,this.poolMax=e.poolMax,this.poolMaxPerShard=e.poolMaxPerShard,this.poolMin=e.poolMin,this.poolPingInterval=e.poolPingInterval,this.poolTimeout=e.poolTimeout,this.queueMax=e.queueMax,this.queueTimeout=e.queueTimeout,this.sodaMetaDataCache=e.sodaMetaDataCache,this.stmtCacheSize=e.stmtCacheSize,this.user=e.user,this.threadPoolSize=uu.env.UV_THREADPOOL_SIZE,this.thin=Pu.thin}logStatistics(){console.log(`
Driver:`),console.log("...thin mode:",this.thin),console.log("Pool statistics:"),console.log("...gathered at:",new Date(this.gatheredDate).toISOString()),console.log("...up time (milliseconds):",this.upTime),console.log("...up time from last reset (milliseconds)",this.upTimeSinceReset),console.log("...connection requests:",this.connectionRequests),console.log("...requests enqueued:",this.requestsEnqueued),console.log("...requests dequeued:",this.requestsDequeued),console.log("...requests failed:",this.failedRequests),console.log("...requests exceeding queueMax:",this.rejectedRequests),console.log("...requests exceeding queueTimeout:",this.requestTimeouts),console.log("...current queue length:",this.currentQueueLength),console.log("...maximum queue length:",this.maximumQueueLength),console.log("...sum of time in queue (milliseconds):",this.timeInQueue),console.log("...minimum time in queue (milliseconds):",this.minimumTimeInQueue),console.log("...maximum time in queue (milliseconds):",this.maximumTimeInQueue),console.log("...average time in queue (milliseconds):",this.averageTimeInQueue),console.log("...pool connections in use:",this.connectionsInUse),console.log("...pool connections open:",this.connectionsOpen),console.log("Pool attributes:"),console.log("...connectString:",this.connectString),console.log("...edition:",this.edition),console.log("...events:",this.events),console.log("...externalAuth:",this.externalAuth),console.log("...homogeneous:",this.homogeneous),console.log("...poolAlias:",this.poolAlias),console.log("...poolIncrement:",this.poolIncrement),console.log("...poolMax:",this.poolMax),console.log("...poolMaxPerShard:",this.poolMaxPerShard),console.log("...poolMin:",this.poolMin),console.log("...poolPingInterval (seconds):",this.poolPingInterval),console.log("...poolTimeout (seconds):",this.poolTimeout),console.log("...queueMax:",this.queueMax),console.log("...queueTimeout (milliseconds):",this.queueTimeout),console.log("...sessionCallback:",this.sessionCallback),console.log("...sodaMetaDataCache:",this.sodaMetaDataCache),console.log("...stmtCacheSize:",this.stmtCacheSize),console.log("...user:",this.user),console.log("Related environment variables:"),console.log("...UV_THREADPOOL_SIZE:",this.threadPoolSize)}};T(__,"PoolStatistics");var n_=__;hl.exports=n_});var Pl=m((ID,ul)=>{"use strict";var fu=i_(),du=require("events"),mt=Be(),x=U(),Al=Ze(),It=ve(),pu=os(),Ru=o_(),a_=class a_ extends du{constructor(){super(),this._impl=new pu.PoolImpl,this._queueMax=0,this._queueTimeout=0,this._enableStatistics=!1,this._timeOfReset=this._createdDate=Date.now(),this._sessionCallback=void 0,this._connRequestQueue=[],this._connectionClass=Al.connectionClass}_checkPoolOpen(e){this.status===mt.POOL_STATUS_DRAINING?x.throwErr(x.ERR_POOL_CLOSING):this.status===mt.POOL_STATUS_CLOSED?x.throwErr(x.ERR_POOL_CLOSED):e||this.status===mt.POOL_STATUS_RECONFIGURING&&x.throwErr(x.ERR_POOL_RECONFIGURING)}_checkRequestQueue(){let e=this._connectionsOut;for(;this._connRequestQueue.length>0&&e<this.poolMax;){e+=1;let t=this._connRequestQueue.shift();this._enableStatistics&&(this._totalRequestsDequeued+=1,this._updateWaitStatistics(t)),t.timeoutHandle&&clearTimeout(t.timeoutHandle),t.resolve()}}get _enableStats(){return this._enableStatistics}_resetStatistics(){this._timeOfReset=Date.now(),this._totalConnectionRequests=0,this._totalRequestsEnqueued=0,this._totalRequestsDequeued=0,this._totalFailedRequests=0,this._totalRequestsRejected=0,this._totalRequestTimeouts=0,this._maximumQueueLength=this._connRequestQueue.length,this._totalTimeInQueue=0,this._minTimeInQueue=0,this._maxTimeInQueue=0}_setup(e,t){this._queueTimeout=e.queueTimeout,this._queueMax=e.queueMax,this._enableStatistics=e.enableStatistics,this._edition=e.edition,this._eventsFlag=e.events,this._externalAuth=e.externalAuth,this._homogeneous=e.homogeneous,this._user=e.user,this._connectString=e.connectString,this._status=mt.POOL_STATUS_OPEN,this._connectionsOut=0,this._poolAlias=t,this.on("_checkRequestQueue",this._checkRequestQueue),this._resetStatistics()}_updateWaitStatistics(e){let t=Date.now()-e.enqueuedTime;this._totalTimeInQueue+=t,this._minTimeInQueue===0?this._minTimeInQueue=t:this._minTimeInQueue=Math.min(this._minTimeInQueue,t),this._maxTimeInQueue=Math.max(this._maxTimeInQueue,t)}_verifyGetConnectionOptions(e){let t={};if(e.user!==void 0&&(x.assertParamPropValue(typeof e.user=="string",1,"user"),t.user=e.user),e.username!==void 0&&(x.assert(t.user===void 0,x.ERR_DBL_USER),x.assertParamPropValue(typeof e.username=="string",1,"username"),t.user=e.username),e.password!==void 0&&(x.assertParamPropValue(typeof e.password=="string",1,"password"),t.password=e.password),e.tag!==void 0&&(x.assertParamPropValue(typeof e.tag=="string",1,"tag"),t.tag=e.tag),e.matchAnyTag!==void 0&&(x.assertParamPropValue(typeof e.matchAnyTag=="boolean",1,"matchAnyTag"),t.matchAnyTag=e.matchAnyTag),e.shardingKey!==void 0){let s=e.shardingKey;x.assertParamPropValue(It.isShardingKey(s),1,"shardingKey"),t.shardingKey=e.shardingKey}if(e.superShardingKey!==void 0){let s=e.superShardingKey;x.assertParamPropValue(It.isShardingKey(s),1,"superShardingKey"),t.superShardingKey=e.superShardingKey}return t}async close(e){let t=0,s=!1;x.assertArgCount(arguments,0,1),arguments.length==1&&(x.assertParamValue(typeof e=="number",1),(e<0||isNaN(e)||e>2**31)&&x.throwErr(x.ERR_INVALID_PARAMETER_VALUE,1),s=!0,this._connectionsOut>0&&(t=e*1e3)),this._checkPoolOpen(!1),t>0&&(this._status=mt.POOL_STATUS_DRAINING,await new Promise(r=>{let _=setTimeout(()=>{this.removeAllListeners("_allCheckedIn"),r()},t);this.once("_allCheckedIn",()=>{clearTimeout(_),r()})})),await this._impl.close({forceClose:s}),this._status=mt.POOL_STATUS_CLOSED,this.emit("_afterPoolClose")}get connectionsInUse(){return this._impl.getConnectionsInUse()}get connectionsOpen(){return this._impl.getConnectionsOpen()}get connectString(){return this._connectString}get thin(){return Al.thin}get edition(){return this._edition}get enableStatistics(){return this._enableStatistics}get events(){return this._eventsFlag}get externalAuth(){return this._externalAuth}async getConnection(e){let t,s={};x.assertArgCount(arguments,0,1),arguments.length==1&&(x.assertParamValue(It.isObject(e),1),s=this._verifyGetConnectionOptions(e)),s.connectionClass=this._connectionClass,this._checkPoolOpen(!0),this._enableStatistics&&(this._totalConnectionRequests+=1);try{t=this.poolMax}catch(r){throw this._enableStatistics&&(this._totalFailedRequests+=1),r}(this._connectionsOut>=t||this.status===mt.POOL_STATUS_RECONFIGURING)&&(this._connRequestQueue.length>=this._queueMax&&this._queueMax>=0&&(this._enableStatistics&&(this._totalRequestsRejected+=1),x.throwErr(x.ERR_QUEUE_MAX_EXCEEDED,this._queueMax)),await new Promise((r,_)=>{let o={resolve:r,reject:_};this._queueTimeout!==0&&(o.timeoutHandle=setTimeout(()=>{let a=this._connRequestQueue.indexOf(o);a>=0&&this._connRequestQueue.splice(a,1),this._enableStatistics&&(this._totalRequestTimeouts+=1,this._updateWaitStatistics(o));try{x.throwErr(x.ERR_CONN_REQUEST_TIMEOUT,this._queueTimeout)}catch(c){_(c)}},this._queueTimeout)),this._connRequestQueue.push(o),this._enableStatistics&&(o.enqueuedTime=Date.now(),this._totalRequestsEnqueued+=1,this._maximumQueueLength=Math.max(this._maximumQueueLength,this._connRequestQueue.length))}),this._checkPoolOpen(!0)),this._connectionsOut+=1;try{let r=new fu;r._impl=await this._impl.getConnection(s),r._pool=this;let _=s.tag||"";if(typeof this.sessionCallback=="function"&&(r._impl._newSession||r.tag!=_))try{await new Promise((o,a)=>{this.sessionCallback(r,_,function(c){c?a(c):o()})})}catch(o){throw await r.close({drop:!0}),o}return r.on("_afterConnClose",()=>{this._connectionsOut-=1,this.emit("_checkRequestQueue"),this._connectionsOut==0&&this.emit("_allCheckedIn")}),r}catch(r){throw this._connectionsOut-=1,this._enableStatistics&&(this._totalFailedRequests+=1),this.emit("_checkRequestQueue"),r}}getStatistics(){return this._checkPoolOpen(!1),this._enableStatistics!==!0?null:new Ru(this)}get homogeneous(){return this._homogeneous}logStatistics(){let e=this.getStatistics();e===null&&x.throwErr(x.ERR_POOL_STATISTICS_DISABLED),e.logStatistics()}get poolAlias(){return this._poolAlias}get poolIncrement(){return this._impl.getPoolIncrement()}get poolMax(){return this._impl.getPoolMax()}get poolMaxPerShard(){return this._impl.getPoolMaxPerShard()}get poolMin(){return this._impl.getPoolMin()}get poolPingInterval(){return this._impl.getPoolPingInterval()}get poolTimeout(){return this._impl.getPoolTimeout()}get queueMax(){return this._queueMax}get queueTimeout(){return this._queueTimeout}async reconfigure(e){x.assertArgCount(arguments,1,1),x.assertParamValue(It.isObject(e)),x.assertParamPropUnsignedInt(e,1,"queueMax"),x.assertParamPropUnsignedInt(e,1,"queueTimeout"),x.assertParamPropBool(e,1,"enableStatistics"),x.assertParamPropBool(e,1,"resetStatistics"),x.assertParamPropUnsignedInt(e,1,"poolMin"),x.assertParamPropUnsignedInt(e,1,"poolMax"),x.assertParamPropUnsignedInt(e,1,"poolMaxPerShard"),x.assertParamPropUnsignedInt(e,1,"poolIncrement"),x.assertParamPropInt(e,1,"poolPingInterval"),x.assertParamPropUnsignedInt(e,1,"poolTimeout"),x.assertParamPropUnsignedInt(e,1,"stmtCacheSize"),x.assertParamPropBool(e,1,"sodaMetaDataCache"),this._checkPoolOpen(!1),this._status=mt.POOL_STATUS_RECONFIGURING;try{await this._impl.reconfigure(e),(e.resetStatistics==!0||e.enableStatistics==!0&&this._enableStatistics==!1)&&this._resetStatistics(),e.queueMax!==void 0&&(this._queueMax=e.queueMax),e.queueTimeout!==void 0&&(this._queueTimeout=e.queueTimeout),e.enableStatistics!==void 0&&(this._enableStatistics=e.enableStatistics)}finally{this._status=mt.POOL_STATUS_OPEN}this.emit("_checkRequestQueue")}get sessionCallback(){return this._sessionCallback}async setAccessToken(e){x.assertArgCount(arguments,1,1),x.assertParamValue(It.isObject(e),1),x.assertParamPropString(e,1,"token"),x.assertParamPropString(e,1,"privateKey"),await this._impl.setAccessToken(e)}get sodaMetaDataCache(){return this._impl.getSodaMetaDataCache()}get status(){return this._status}get stmtCacheSize(){return this._impl.getStmtCacheSize()}get user(){return this._user}};T(a_,"Pool");var be=a_;be.prototype.close=It.callbackify(be.prototype.close);be.prototype.getConnection=It.callbackify(be.prototype.getConnection);be.prototype.reconfigure=It.callbackify(be.prototype.reconfigure);be.prototype.setAccessToken=It.callbackify(be.prototype.setAccessToken);be.prototype.terminate=be.prototype.close;be.prototype._logStats=be.prototype.logStatistics;ul.exports=be});var ae=m((OD,dl)=>{"use strict";var{Buffer:fl}=require("buffer"),pe=Be();dl.exports={BIND_IN:pe.BIND_IN,BIND_INOUT:pe.BIND_INOUT,BIND_OUT:pe.BIND_OUT,CLIENT_VERSION:pe.VERSION_MAJOR<<24|pe.VERSION_MINOR<<20|pe.VERSION_PATCH<<12,CSFRM_IMPLICIT:pe.CSFRM_IMPLICIT,CSFRM_NCHAR:pe.CSFRM_NCHAR,DRIVER_NAME:pe.DEFAULT_DRIVER_NAME+" thn",PURITY_DEFAULT:pe.PURITY_DEFAULT,PURITY_NEW:pe.PURITY_NEW,PURITY_SELF:pe.PURITY_SELF,SYSASM:pe.SYSASM,SYSBKP:pe.SYSBKP,SYSDBA:pe.SYSDBA,SYSDG:pe.SYSDG,SYSKM:pe.SYSKM,SYSOPER:pe.SYSOPER,SYSRAC:pe.SYSRAC,AUTH_MODE_DEFAULT:0,AUTH_MODE_PRELIM:8,AUTH_MODE_SYSASM:32768,AUTH_MODE_SYSBKP:131072,AUTH_MODE_SYSDBA:2,AUTH_MODE_SYSDGD:262144,AUTH_MODE_SYSKMT:524288,AUTH_MODE_SYSOPER:4,AUTH_MODE_SYSRAC:1048576,TNS_AUTH_MODE_LOGON:1,TNS_AUTH_MODE_CHANGE_PASSWORD:2,TNS_AUTH_MODE_SYSDBA:32,TNS_AUTH_MODE_SYSOPER:64,TNS_AUTH_MODE_PRELIM:128,TNS_AUTH_MODE_WITH_PASSWORD:256,TNS_AUTH_MODE_SYSASM:4194304,TNS_AUTH_MODE_SYSBKP:16777216,TNS_AUTH_MODE_SYSDGD:33554432,TNS_AUTH_MODE_SYSKMT:67108864,TNS_AUTH_MODE_SYSRAC:134217728,TNS_AUTH_MODE_IAM_TOKEN:536870912,TNS_PACKET_TYPE_CONNECT:1,TNS_PACKET_TYPE_ACCEPT:2,TNS_PACKET_TYPE_REFUSE:4,TNS_PACKET_TYPE_REDIRECT:5,TNS_PACKET_TYPE_DATA:6,TNS_PACKET_TYPE_RESEND:11,TNS_PACKET_TYPE_MARKER:12,TNS_PACKET_TYPE_CONTROL:14,TNS_MARKER_TYPE_BREAK:1,TNS_MARKER_TYPE_RESET:2,TNS_DATA_TYPE_DEFAULT:0,TNS_DATA_TYPE_VARCHAR:1,TNS_DATA_TYPE_NUMBER:2,TNS_DATA_TYPE_BINARY_INTEGER:3,TNS_DATA_TYPE_FLOAT:4,TNS_DATA_TYPE_STR:5,TNS_DATA_TYPE_VNU:6,TNS_DATA_TYPE_PDN:7,TNS_DATA_TYPE_LONG:8,TNS_DATA_TYPE_VCS:9,TNS_DATA_TYPE_TIDDEF:10,TNS_DATA_TYPE_ROWID:11,TNS_DATA_TYPE_DATE:12,TNS_DATA_TYPE_VBI:15,TNS_DATA_TYPE_RAW:23,TNS_DATA_TYPE_LONG_RAW:24,TNS_DATA_TYPE_UB2:25,TNS_DATA_TYPE_UB4:26,TNS_DATA_TYPE_SB1:27,TNS_DATA_TYPE_SB2:28,TNS_DATA_TYPE_SB4:29,TNS_DATA_TYPE_SWORD:30,TNS_DATA_TYPE_UWORD:31,TNS_DATA_TYPE_PTRB:32,TNS_DATA_TYPE_PTRW:33,TNS_DATA_TYPE_OER8:290,TNS_DATA_TYPE_FUN:291,TNS_DATA_TYPE_AUA:292,TNS_DATA_TYPE_RXH7:293,TNS_DATA_TYPE_NA6:294,TNS_DATA_TYPE_OAC:39,TNS_DATA_TYPE_AMS:40,TNS_DATA_TYPE_BRN:41,TNS_DATA_TYPE_BRP:298,TNS_DATA_TYPE_BRV:299,TNS_DATA_TYPE_KVA:300,TNS_DATA_TYPE_CLS:301,TNS_DATA_TYPE_CUI:302,TNS_DATA_TYPE_DFN:303,TNS_DATA_TYPE_DQR:304,TNS_DATA_TYPE_DSC:305,TNS_DATA_TYPE_EXE:306,TNS_DATA_TYPE_FCH:307,TNS_DATA_TYPE_GBV:308,TNS_DATA_TYPE_GEM:309,TNS_DATA_TYPE_GIV:310,TNS_DATA_TYPE_OKG:311,TNS_DATA_TYPE_HMI:312,TNS_DATA_TYPE_INO:313,TNS_DATA_TYPE_LNF:315,TNS_DATA_TYPE_ONT:316,TNS_DATA_TYPE_OPE:317,TNS_DATA_TYPE_OSQ:318,TNS_DATA_TYPE_SFE:319,TNS_DATA_TYPE_SPF:320,TNS_DATA_TYPE_VSN:321,TNS_DATA_TYPE_UD7:322,TNS_DATA_TYPE_DSA:323,TNS_DATA_TYPE_UIN:68,TNS_DATA_TYPE_PIN:327,TNS_DATA_TYPE_PFN:328,TNS_DATA_TYPE_PPT:329,TNS_DATA_TYPE_STO:331,TNS_DATA_TYPE_ARC:333,TNS_DATA_TYPE_MRS:334,TNS_DATA_TYPE_MRT:335,TNS_DATA_TYPE_MRG:336,TNS_DATA_TYPE_MRR:337,TNS_DATA_TYPE_MRC:338,TNS_DATA_TYPE_VER:339,TNS_DATA_TYPE_LON2:340,TNS_DATA_TYPE_INO2:341,TNS_DATA_TYPE_ALL:342,TNS_DATA_TYPE_UDB:343,TNS_DATA_TYPE_AQI:344,TNS_DATA_TYPE_ULB:345,TNS_DATA_TYPE_ULD:346,TNS_DATA_TYPE_SLS:91,TNS_DATA_TYPE_SID:348,TNS_DATA_TYPE_NA7:349,TNS_DATA_TYPE_LVC:94,TNS_DATA_TYPE_LVB:95,TNS_DATA_TYPE_CHAR:96,TNS_DATA_TYPE_AVC:97,TNS_DATA_TYPE_AL7:354,TNS_DATA_TYPE_K2RPC:355,TNS_DATA_TYPE_BINARY_FLOAT:100,TNS_DATA_TYPE_BINARY_DOUBLE:101,TNS_DATA_TYPE_CURSOR:102,TNS_DATA_TYPE_RDD:104,TNS_DATA_TYPE_XDP:359,TNS_DATA_TYPE_OSL:106,TNS_DATA_TYPE_OKO8:363,TNS_DATA_TYPE_EXT_NAMED:108,TNS_DATA_TYPE_INT_NAMED:109,TNS_DATA_TYPE_EXT_REF:110,TNS_DATA_TYPE_INT_REF:111,TNS_DATA_TYPE_CLOB:112,TNS_DATA_TYPE_BLOB:113,TNS_DATA_TYPE_BFILE:114,TNS_DATA_TYPE_CFILE:115,TNS_DATA_TYPE_RSET:116,TNS_DATA_TYPE_CWD:117,TNS_DATA_TYPE_JSON:119,TNS_DATA_TYPE_NEW_OAC:120,TNS_DATA_TYPE_UD12:380,TNS_DATA_TYPE_AL8:381,TNS_DATA_TYPE_LFOP:382,TNS_DATA_TYPE_FCRT:383,TNS_DATA_TYPE_DNY:384,TNS_DATA_TYPE_OPR:385,TNS_DATA_TYPE_PLS:386,TNS_DATA_TYPE_XID:387,TNS_DATA_TYPE_TXN:388,TNS_DATA_TYPE_DCB:389,TNS_DATA_TYPE_CCA:390,TNS_DATA_TYPE_WRN:391,TNS_DATA_TYPE_TLH:393,TNS_DATA_TYPE_TOH:394,TNS_DATA_TYPE_FOI:395,TNS_DATA_TYPE_SID2:396,TNS_DATA_TYPE_TCH:397,TNS_DATA_TYPE_PII:398,TNS_DATA_TYPE_PFI:399,TNS_DATA_TYPE_PPU:400,TNS_DATA_TYPE_PTE:401,TNS_DATA_TYPE_CLV:146,TNS_DATA_TYPE_RXH8:404,TNS_DATA_TYPE_N12:405,TNS_DATA_TYPE_AUTH:406,TNS_DATA_TYPE_KVAL:407,TNS_DATA_TYPE_DTR:152,TNS_DATA_TYPE_DUN:153,TNS_DATA_TYPE_DOP:154,TNS_DATA_TYPE_VST:155,TNS_DATA_TYPE_ODT:156,TNS_DATA_TYPE_FGI:413,TNS_DATA_TYPE_DSY:414,TNS_DATA_TYPE_DSYR8:415,TNS_DATA_TYPE_DSYH8:416,TNS_DATA_TYPE_DSYL:417,TNS_DATA_TYPE_DSYT8:418,TNS_DATA_TYPE_DSYV8:419,TNS_DATA_TYPE_DSYP:420,TNS_DATA_TYPE_DSYF:421,TNS_DATA_TYPE_DSYK:422,TNS_DATA_TYPE_DSYY:423,TNS_DATA_TYPE_DSYQ:424,TNS_DATA_TYPE_DSYC:425,TNS_DATA_TYPE_DSYA:426,TNS_DATA_TYPE_OT8:427,TNS_DATA_TYPE_DOL:172,TNS_DATA_TYPE_DSYTY:429,TNS_DATA_TYPE_AQE:430,TNS_DATA_TYPE_KV:431,TNS_DATA_TYPE_AQD:432,TNS_DATA_TYPE_AQ8:433,TNS_DATA_TYPE_TIME:178,TNS_DATA_TYPE_TIME_TZ:179,TNS_DATA_TYPE_TIMESTAMP:180,TNS_DATA_TYPE_TIMESTAMP_TZ:181,TNS_DATA_TYPE_INTERVAL_YM:182,TNS_DATA_TYPE_INTERVAL_DS:183,TNS_DATA_TYPE_EDATE:184,TNS_DATA_TYPE_ETIME:185,TNS_DATA_TYPE_ETTZ:186,TNS_DATA_TYPE_ESTAMP:187,TNS_DATA_TYPE_ESTZ:188,TNS_DATA_TYPE_EIYM:189,TNS_DATA_TYPE_EIDS:190,TNS_DATA_TYPE_RFS:449,TNS_DATA_TYPE_RXH10:450,TNS_DATA_TYPE_DCLOB:195,TNS_DATA_TYPE_DBLOB:196,TNS_DATA_TYPE_DBFILE:197,TNS_DATA_TYPE_DJSON:198,TNS_DATA_TYPE_KPN:454,TNS_DATA_TYPE_KPDNR:455,TNS_DATA_TYPE_DSYD:456,TNS_DATA_TYPE_DSYS:457,TNS_DATA_TYPE_DSYR:458,TNS_DATA_TYPE_DSYH:459,TNS_DATA_TYPE_DSYT:460,TNS_DATA_TYPE_DSYV:461,TNS_DATA_TYPE_AQM:462,TNS_DATA_TYPE_OER11:463,TNS_DATA_TYPE_UROWID:208,TNS_DATA_TYPE_AQL:466,TNS_DATA_TYPE_OTC:467,TNS_DATA_TYPE_KFNO:468,TNS_DATA_TYPE_KFNP:469,TNS_DATA_TYPE_KGT8:470,TNS_DATA_TYPE_RASB4:471,TNS_DATA_TYPE_RAUB2:472,TNS_DATA_TYPE_RAUB1:473,TNS_DATA_TYPE_RATXT:474,TNS_DATA_TYPE_RSSB4:475,TNS_DATA_TYPE_RSUB2:476,TNS_DATA_TYPE_RSUB1:477,TNS_DATA_TYPE_RSTXT:478,TNS_DATA_TYPE_RIDL:479,TNS_DATA_TYPE_GLRDD:480,TNS_DATA_TYPE_GLRDG:481,TNS_DATA_TYPE_GLRDC:482,TNS_DATA_TYPE_OKO:483,TNS_DATA_TYPE_DPP:484,TNS_DATA_TYPE_DPLS:485,TNS_DATA_TYPE_DPMOP:486,TNS_DATA_TYPE_TIMESTAMP_LTZ:231,TNS_DATA_TYPE_ESITZ:232,TNS_DATA_TYPE_UB8:233,TNS_DATA_TYPE_STAT:490,TNS_DATA_TYPE_RFX:491,TNS_DATA_TYPE_FAL:492,TNS_DATA_TYPE_CKV:493,TNS_DATA_TYPE_DRCX:494,TNS_DATA_TYPE_KGH:495,TNS_DATA_TYPE_AQO:496,TNS_DATA_TYPE_PNTY:241,TNS_DATA_TYPE_OKGT:498,TNS_DATA_TYPE_KPFC:499,TNS_DATA_TYPE_FE2:500,TNS_DATA_TYPE_SPFP:501,TNS_DATA_TYPE_DPULS:502,TNS_DATA_TYPE_BOOLEAN:252,TNS_DATA_TYPE_AQA:509,TNS_DATA_TYPE_KPBF:510,TNS_DATA_TYPE_TSM:513,TNS_DATA_TYPE_MSS:514,TNS_DATA_TYPE_KPC:516,TNS_DATA_TYPE_CRS:517,TNS_DATA_TYPE_KKS:518,TNS_DATA_TYPE_KSP:519,TNS_DATA_TYPE_KSPTOP:520,TNS_DATA_TYPE_KSPVAL:521,TNS_DATA_TYPE_PSS:522,TNS_DATA_TYPE_NLS:523,TNS_DATA_TYPE_ALS:524,TNS_DATA_TYPE_KSDEVTVAL:525,TNS_DATA_TYPE_KSDEVTTOP:526,TNS_DATA_TYPE_KPSPP:527,TNS_DATA_TYPE_KOL:528,TNS_DATA_TYPE_LST:529,TNS_DATA_TYPE_ACX:530,TNS_DATA_TYPE_SCS:531,TNS_DATA_TYPE_RXH:532,TNS_DATA_TYPE_KPDNS:533,TNS_DATA_TYPE_KPDCN:534,TNS_DATA_TYPE_KPNNS:535,TNS_DATA_TYPE_KPNCN:536,TNS_DATA_TYPE_KPS:537,TNS_DATA_TYPE_APINF:538,TNS_DATA_TYPE_TEN:539,TNS_DATA_TYPE_XSSCS:540,TNS_DATA_TYPE_XSSSO:541,TNS_DATA_TYPE_XSSAO:542,TNS_DATA_TYPE_KSRPC:543,TNS_DATA_TYPE_KVL:560,TNS_DATA_TYPE_SESSGET:563,TNS_DATA_TYPE_SESSREL:564,TNS_DATA_TYPE_XSSDEF:565,TNS_DATA_TYPE_PDQCINV:572,TNS_DATA_TYPE_PDQIDC:573,TNS_DATA_TYPE_KPDQCSTA:574,TNS_DATA_TYPE_KPRS:575,TNS_DATA_TYPE_KPDQIDC:576,TNS_DATA_TYPE_RTSTRM:578,TNS_DATA_TYPE_SESSRET:579,TNS_DATA_TYPE_SCN6:580,TNS_DATA_TYPE_KECPA:581,TNS_DATA_TYPE_KECPP:582,TNS_DATA_TYPE_SXA:583,TNS_DATA_TYPE_KVARR:584,TNS_DATA_TYPE_KPNGN:585,TNS_DATA_TYPE_XSNSOP:590,TNS_DATA_TYPE_XSATTR:591,TNS_DATA_TYPE_XSNS:592,TNS_DATA_TYPE_TXT:593,TNS_DATA_TYPE_XSSESSNS:594,TNS_DATA_TYPE_XSATTOP:595,TNS_DATA_TYPE_XSCREOP:596,TNS_DATA_TYPE_XSDETOP:597,TNS_DATA_TYPE_XSDESOP:598,TNS_DATA_TYPE_XSSETSP:599,TNS_DATA_TYPE_XSSIDP:600,TNS_DATA_TYPE_XSPRIN:601,TNS_DATA_TYPE_XSKVL:602,TNS_DATA_TYPE_XSSSDEF2:603,TNS_DATA_TYPE_XSNSOP2:604,TNS_DATA_TYPE_XSNS2:605,TNS_DATA_TYPE_IMPLRES:611,TNS_DATA_TYPE_OER:612,TNS_DATA_TYPE_UB1ARRAY:613,TNS_DATA_TYPE_SESSSTATE:614,TNS_DATA_TYPE_AC_REPLAY:615,TNS_DATA_TYPE_AC_CONT:616,TNS_DATA_TYPE_KPDNREQ:622,TNS_DATA_TYPE_KPDNRNF:623,TNS_DATA_TYPE_KPNGNC:624,TNS_DATA_TYPE_KPNRI:625,TNS_DATA_TYPE_AQENQ:626,TNS_DATA_TYPE_AQDEQ:627,TNS_DATA_TYPE_AQJMS:628,TNS_DATA_TYPE_KPDNRPAY:629,TNS_DATA_TYPE_KPDNRACK:630,TNS_DATA_TYPE_KPDNRMP:631,TNS_DATA_TYPE_KPDNRDQ:632,TNS_DATA_TYPE_CHUNKINFO:636,TNS_DATA_TYPE_SCN:637,TNS_DATA_TYPE_SCN8:638,TNS_DATA_TYPE_UDS:639,TNS_DATA_TYPE_TNP:640,TNS_TYPE_REP_NATIVE:0,TNS_TYPE_REP_UNIVERSAL:1,TNS_TYPE_REP_ORACLE:10,TNS_MSG_TYPE_PROTOCOL:1,TNS_MSG_TYPE_DATA_TYPES:2,TNS_MSG_TYPE_FUNCTION:3,TNS_MSG_TYPE_ERROR:4,TNS_MSG_TYPE_ROW_HEADER:6,TNS_MSG_TYPE_ROW_DATA:7,TNS_MSG_TYPE_PARAMETER:8,TNS_MSG_TYPE_STATUS:9,TNS_MSG_TYPE_IO_VECTOR:11,TNS_MSG_TYPE_LOB_DATA:14,TNS_MSG_TYPE_WARNING:15,TNS_MSG_TYPE_DESCRIBE_INFO:16,TNS_MSG_TYPE_PIGGYBACK:17,TNS_MSG_TYPE_FLUSH_OUT_BINDS:19,TNS_MSG_TYPE_BIT_VECTOR:21,TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK:23,TNS_MSG_TYPE_IMPLICIT_RESULTSET:27,TNS_MSG_TYPE_ONEWAY_FN:26,TNS_KEYWORD_NUM_CURRENT_SCHEMA:168,TNS_KEYWORD_NUM_EDITION:172,TNS_BIND_USE_INDICATORS:1,TNS_BIND_USE_LENGTH:2,TNS_BIND_ARRAY:64,TNS_BIND_DIR_OUTPUT:16,TNS_BIND_DIR_INPUT:32,TNS_BIND_DIR_INPUT_OUTPUT:48,TNS_EXEC_OPTION_PARSE:1,TNS_EXEC_OPTION_BIND:8,TNS_EXEC_OPTION_DEFINE:16,TNS_EXEC_OPTION_EXECUTE:32,TNS_EXEC_OPTION_FETCH:64,TNS_EXEC_OPTION_COMMIT:256,TNS_EXEC_OPTION_COMMIT_REEXECUTE:1,TNS_EXEC_OPTION_PLSQL_BIND:1024,TNS_EXEC_OPTION_DML_ROWCOUNTS:16384,TNS_EXEC_OPTION_NOT_PLSQL:32768,TNS_EXEC_OPTION_IMPLICIT_RESULTSET:32768,TNS_EXEC_OPTION_DESCRIBE:131072,TNS_EXEC_OPTION_NO_COMPRESSED_FETCH:262144,TNS_EXEC_OPTION_BATCH_ERRORS:524288,TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION:1,TNS_SERVER_PIGGYBACK_OS_PID_MTS:2,TNS_SERVER_PIGGYBACK_TRACE_EVENT:3,TNS_SERVER_PIGGYBACK_SESS_RET:4,TNS_SERVER_PIGGYBACK_SYNC:5,TNS_SERVER_PIGGYBACK_LTXID:7,TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT:8,TNS_SERVER_PIGGYBACK_EXT_SYNC:9,TNS_SESSGET_SESSION_CHANGED:4,TNS_LOB_OP_GET_LENGTH:1,TNS_LOB_OP_READ:2,TNS_LOB_OP_TRIM:32,TNS_LOB_OP_WRITE:64,TNS_LOB_OP_GET_CHUNK_SIZE:16384,TNS_LOB_OP_CREATE_TEMP:272,TNS_LOB_OP_FREE_TEMP:273,TNS_LOB_OP_OPEN:32768,TNS_LOB_OP_CLOSE:65536,TNS_LOB_OP_IS_OPEN:69632,TNS_LOB_OP_ARRAY:524288,TNS_LOB_LOC_OFFSET_FLAG_1:4,TNS_LOB_LOC_OFFSET_FLAG_3:6,TNS_LOB_LOC_OFFSET_FLAG_4:7,TNS_LOB_QLOCATOR_VERSION:4,TNS_LOB_LOC_FLAGS_BLOB:1,TNS_LOB_LOC_FLAGS_VALUE_BASED:32,TNS_LOB_LOC_FLAGS_ABSTRACT:64,TNS_LOB_LOC_FLAGS_INIT:8,TNS_LOB_LOC_FLAGS_TEMP:1,TNS_LOB_LOC_FLAGS_VAR_LENGTH_CHARSET:128,TNS_LOB_OPEN_READ_WRITE:2,TNS_LOB_PREFETCH_FLAG:33554432,TNS_JSON_MAX_LENGTH:32*1024*1024,TNS_JSON_MAGIC_BYTE_1:255,TNS_JSON_MAGIC_BYTE_2:74,TNS_JSON_MAGIC_BYTE_3:90,TNS_JSON_VERSION:1,TNS_JSON_FLAG_HASH_ID_UINT8:256,TNS_JSON_FLAG_HASH_ID_UINT16:512,TNS_JSON_FLAG_NUM_FNAMES_UINT16:1024,TNS_JSON_FLAG_FNAMES_SEG_UINT32:2048,TNS_JSON_FLAG_TINY_NODES_STAT:8192,TNS_JSON_FLAG_TREE_SEG_UINT32:4096,TNS_JSON_FLAG_REL_OFFSET_MODE:1,TNS_JSON_FLAG_INLINE_LEAF:2,TNS_JSON_FLAG_LEN_IN_PCODE:4,TNS_JSON_FLAG_NUM_FNAMES_UINT32:8,TNS_JSON_FLAG_IS_SCALAR:16,TNS_JSON_TYPE_NULL:48,TNS_JSON_TYPE_TRUE:49,TNS_JSON_TYPE_FALSE:50,TNS_JSON_TYPE_STRING_LENGTH_UINT8:51,TNS_JSON_TYPE_NUMBER_LENGTH_UINT8:52,TNS_JSON_TYPE_BINARY_DOUBLE:54,TNS_JSON_TYPE_STRING_LENGTH_UINT16:55,TNS_JSON_TYPE_STRING_LENGTH_UINT32:56,TNS_JSON_TYPE_TIMESTAMP:57,TNS_JSON_TYPE_BINARY_LENGTH_UINT16:58,TNS_JSON_TYPE_BINARY_LENGTH_UINT32:59,TNS_JSON_TYPE_DATE:60,TNS_JSON_TYPE_INTERVAL_YM:61,TNS_JSON_TYPE_INTERVAL_DS:62,TNS_JSON_TYPE_TIMESTAMP_TZ:124,TNS_JSON_TYPE_TIMESTAMP7:125,TNS_JSON_TYPE_BINARY_FLOAT:127,TNS_JSON_TYPE_OBJECT:132,TNS_JSON_TYPE_ARRAY:192,TNS_END_TO_END_ACTION:16,TNS_END_TO_END_CLIENT_IDENTIFIER:1,TNS_END_TO_END_CLIENT_INFO:256,TNS_END_TO_END_DBOP:512,TNS_END_TO_END_MODULE:8,TNS_VERSION_DESIRED:316,TNS_VERSION_MINIMUM:300,TNS_VERSION_MIN_ACCEPTED:315,TNS_VERSION_MIN_LARGE_SDU:315,TNS_SERVICE_OPTIONS:3073,TNS_PROTOCOL_CHARACTERISTICS:20376,TNS_CONNECT_FLAGS:32896,TNS_CAN_RECV_ATTENTION:1024,TNS_CHECK_OOB:1,TNS_FUNC_AUTH_PHASE_ONE:118,TNS_FUNC_AUTH_PHASE_TWO:115,TNS_FUNC_CLOSE_CURSORS:105,TNS_FUNC_COMMIT:14,TNS_FUNC_EXECUTE:94,TNS_FUNC_FETCH:5,TNS_FUNC_LOB_OP:96,TNS_FUNC_LOGOFF:9,TNS_FUNC_PING:147,TNS_FUNC_ROLLBACK:15,TNS_FUNC_SET_END_TO_END_ATTR:135,TNS_FUNC_REEXECUTE:4,TNS_FUNC_REEXECUTE_AND_FETCH:78,TNS_FUNC_SET_SCHEMA:152,TNS_FUNC_SESSION_GET:162,TNS_FUNC_SESSION_RELEASE:163,TNS_FUNC_SESSION_STATE:176,TNS_FUNC_CANCEL_ALL:120,TNS_CHARSET_UTF8:873,TNS_CHARSET_UTF16:2e3,TNS_ENCODING_UTF8:"UTF-8",TNS_ENCODING_UTF16:"UTF-16LE",TNS_ENCODING_MULTI_BYTE:1,TNS_ENCODING_CONV_LENGTH:2,TNS_CCAP_SQL_VERSION:0,TNS_CCAP_LOGON_TYPES:4,TNS_CCAP_FIELD_VERSION:7,TNS_CCAP_SERVER_DEFINE_CONV:8,TNS_CCAP_TTC1:15,TNS_CCAP_OCI1:16,TNS_CCAP_TDS_VERSION:17,TNS_CCAP_RPC_VERSION:18,TNS_CCAP_RPC_SIG:19,TNS_CCAP_DBF_VERSION:21,TNS_CCAP_LOB:23,TNS_CCAP_TTC2:26,TNS_CCAP_UB2_DTY:27,TNS_CCAP_OCI2:31,TNS_CCAP_CLIENT_FN:34,TNS_CCAP_TTC3:37,TNS_CCAP_TTC4:40,TNS_CCAP_LOB2:42,TNS_CCAP_MAX:45,TNS_CCAP_SQL_VERSION_MAX:6,TNS_CCAP_FIELD_VERSION_11_2:6,TNS_CCAP_FIELD_VERSION_12_1:7,TNS_CCAP_FIELD_VERSION_12_2:8,TNS_CCAP_FIELD_VERSION_12_2_EXT1:9,TNS_CCAP_FIELD_VERSION_18_1:10,TNS_CCAP_FIELD_VERSION_18_1_EXT_1:11,TNS_CCAP_FIELD_VERSION_19_1:12,TNS_CCAP_FIELD_VERSION_19_1_EXT_1:13,TNS_CCAP_FIELD_VERSION_20_1:14,TNS_CCAP_FIELD_VERSION_20_1_EXT_1:15,TNS_CCAP_FIELD_VERSION_21_1:16,TNS_CCAP_FIELD_VERSION_23_1:17,TNS_CCAP_FIELD_VERSION_23_1_EXT_1:18,TNS_CCAP_FIELD_VERSION_MAX:18,TNS_CCAP_O5LOGON:8,TNS_CCAP_O5LOGON_NP:2,TNS_CCAP_O7LOGON:32,TNS_CCAP_O8LOGON_LONG_IDENTIFIER:64,TNS_CCAP_O9LOGON_LONG_PASSWORD:128,TNS_CCAP_END_OF_CALL_STATUS:1,TNS_CCAP_IND_RCD:8,TNS_CCAP_FAST_BVEC:32,TNS_CCAP_FAST_SESSION_PROPAGATE:16,TNS_CCAP_APP_CTX_PIGGYBACK:128,TNS_CCAP_TDS_VERSION_MAX:3,TNS_CCAP_RPC_VERSION_MAX:7,TNS_CCAP_RPC_SIG_VALUE:3,TNS_CCAP_DBF_VERSION_MAX:1,TNS_CCAP_IMPLICIT_RESULTS:16,TNS_CCAP_BIG_CHUNK_CLR:32,TNS_CCAP_KEEP_OUT_ORDER:128,TNS_CCAP_LOB_UB8_SIZE:1,TNS_CCAP_LOB_ENCS:2,TNS_CCAP_LOB_PREFETCH:64,TNS_CCAP_DRCP:16,TNS_CCAP_ZLNP:4,TNS_CCAP_INBAND_NOTIFICATION:4,TNS_CCAP_CLIENT_FN_MAX:12,TNS_CCAP_LOB2_QUASI:1,TNS_CCAP_LOB2_2GB_PREFETCH:4,TNS_RCAP_COMPAT:0,TNS_RCAP_TTC:6,TNS_RCAP_MAX:7,TNS_RCAP_COMPAT_81:2,TNS_RCAP_TTC_ZERO_COPY:1,TNS_RCAP_TTC_32K:4,TNS_VERIFIER_TYPE_11G_1:45394,TNS_VERIFIER_TYPE_11G_2:6949,TNS_VERIFIER_TYPE_12C:18453,TNS_MAX_SHORT_LENGTH:252,TNS_ESCAPE_CHAR:253,TNS_LONG_LENGTH_INDICATOR:254,TNS_NULL_LENGTH_INDICATOR:255,TNS_MAX_ROWID_LENGTH:18,TNS_DURATION_MID:2147483648,TNS_DURATION_OFFSET:60,TNS_DURATION_SESSION:10,TNS_MAX_LONG_LENGTH:2147483647,TNS_SDU:8192,TNS_TDU:65535,TNS_TXN_IN_PROGRESS:2,TNS_MAX_CONNECT_DATA:230,TNS_CHUNK_SIZE:32767,TNS_MAX_UROWID_LENGTH:3950,TNS_HAS_REGION_ID:128,TZ_HOUR_OFFSET:20,TZ_MINUTE_OFFSET:60,DRCP_DEAUTHENTICATE:2,TNS_OBJ_IS_VERSION_81:128,TNS_OBJ_IS_DEGENERATE:16,TNS_OBJ_IS_COLLECTION:8,TNS_OBJ_NO_PREFIX_SEG:4,TNS_OBJ_IMAGE_VERSION:1,TNS_OBJ_MAX_SHORT_LENGTH:245,TNS_OBJ_ATOMIC_NULL:253,TNS_OBJ_NON_NULL_OID:2,TNS_OBJ_HAS_EXTENT_OID:8,TNS_OBJ_TOP_LEVEL:1,TNS_OBJ_HAS_INDEXES:16,TNS_OBJ_PLSQL_INDEX_TABLE:1,TNS_OBJ_NESTED_TABLE:2,TNS_OBJ_VARRAY:3,TNS_OBJ_TDS_TYPE_CHAR:1,TNS_OBJ_TDS_TYPE_DATE:2,TNS_OBJ_TDS_TYPE_FLOAT:5,TNS_OBJ_TDS_TYPE_NUMBER:6,TNS_OBJ_TDS_TYPE_VARCHAR:7,TNS_OBJ_TDS_TYPE_BOOLEAN:8,TNS_OBJ_TDS_TYPE_RAW:19,TNS_OBJ_TDS_TYPE_TIMESTAMP:21,TNS_OBJ_TDS_TYPE_TIMESTAMP_TZ:23,TNS_OBJ_TDS_TYPE_OBJ:27,TNS_OBJ_TDS_TYPE_COLL:28,TNS_OBJ_TDS_TYPE_CLOB:29,TNS_OBJ_TDS_TYPE_BLOB:30,TNS_OBJ_TDS_TYPE_TIMESTAMP_LTZ:33,TNS_OBJ_TDS_TYPE_BINARY_FLOAT:37,TNS_OBJ_TDS_TYPE_BINARY_DOUBLE:45,TNS_XML_TYPE_LOB:1,TNS_XML_TYPE_STRING:4,TNS_XML_TYPE_FLAG_SKIP_NEXT_4:1048576,TNS_ERR_VAR_NOT_IN_SELECT_LIST:1007,TNS_ERR_INBAND_MESSAGE:12573,TNS_ERR_INVALID_SERVICE_NAME:12514,TNS_ERR_INVALID_SID:12505,TNS_ERR_NO_DATA_FOUND:1403,TNS_ERR_SESSION_SHUTDOWN:12572,PACKET_HEADER_SIZE:8,NUMBER_AS_TEXT_CHARS:172,NUMBER_MAX_DIGITS:40,BUFFER_CHUNK_SIZE:65536,CHUNKED_BYTES_CHUNK_SIZE:65536,TNS_BASE64_ALPHABET_ARRAY:fl.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),TNS_EXTENT_OID:fl.from("00000000000000000000000000010001","hex")}});var Bs=m((gD,Rl)=>{"use strict";var{Buffer:Ys}=require("buffer"),pl=ae(),Du=require("crypto"),c_=class c_ extends Error{};T(c_,"OutOfPacketsError");var T_=c_;function gr(i,e,t,s){for(let r=0;r<t;r++)i[s+t-r-1]=pl.TNS_BASE64_ALPHABET_ARRAY[e&63],e=e>>6;return s+t}T(gr,"_convertBase64");function mu(i){let e=0;if(i.rba!==0||i.partitionID!==0||i.blockNum!==0||i.slotNum!=0){let t=Ys.alloc(pl.TNS_MAX_ROWID_LENGTH);return e=gr(t,i.rba,6,e),e=gr(t,i.partitionID,3,e),e=gr(t,i.blockNum,6,e),gr(t,i.slotNum,3,e),t.toString("utf8")}}T(mu,"encodeRowID");function Iu(i){let e=Du.randomBytes(Ys.byteLength(i)),t=Ys.from(i,"utf8"),s=Ys.byteLength(i),r=[];for(let _=0;_<s;_++)r.push(e[_]^t[_]);return t.fill(0),{obfuscatedValue:e,value:r}}T(Iu,"setObfuscatedValue");function Cu(i,e){let t=[];for(let _=0;_<i.length;_++)t.push(i[_]^e[_]);let s=Ys.from(t);t.fill(0);let r=s.toString();return s.fill(0),r}T(Cu,"getDeobfuscatedValue");Rl.exports={encodeRowID:mu,getDeobfuscatedValue:Cu,OutOfPacketsError:T_,setObfuscatedValue:Iu}});var nt=m((yD,Dl)=>{"use strict";var{Buffer:E_}=require("buffer"),k=ae(),Lr=U(),h_=class h_{constructor(){this.num=0,this.cursorId=0,this.pos=0,this.rowCount=0,this.message="",this.rowID=null,this.batchErrors}};T(h_,"OracleErrorInfo");var l_=h_,A_=class A_{constructor(e,t="",s="",r=!1,_=!1,o=0,a=0){this.num=e,this.message=t,this.context=s,this.isRecoverable=r,this.isWarning=_,this.code=o,this.offset=a}};T(A_,"Error");var N_=A_,u_=class u_{constructor(e){this.errorInfo=new l_,this.connection=e,this.messageType=k.TNS_MSG_TYPE_FUNCTION,this.functionCode=0,this.callStatus=0,this.flushOutBinds=!1,this.endToEndSeqNum=0,this.errorOccurred=!1,this.isWarning=!1,this.flushOutBinds=!1,this.processedError=!1}preProcess(){}async postProcess(){}writeFunctionHeader(e){e.writeUInt8(this.messageType),e.writeUInt8(this.functionCode),e.writeSeqNum(),e.caps.ttcFieldVersion>=k.TNS_CCAP_FIELD_VERSION_23_1_EXT_1&&e.writeUB8(0)}processErrorInfo(e){this.callStatus=e.readUB4(),e.skipUB2(),e.skipUB4(),e.skipUB2(),e.skipUB2(),e.skipUB2(),this.errorInfo.cursorId=e.readUB2(),this.errorInfo.pos=e.readUB2(),e.skipUB1(),e.skipUB1(),e.skipUB2(),e.skipUB2(),e.skipUB1(),e.skipUB1(),this.errorInfo.rowID=e.readRowID(),e.skipUB4(),e.skipUB1(),e.skipUB1(),e.skipUB2(),e.skipUB4(),e.readUB4()>0&&e.skipBytesChunked();let s=e.readUB2();if(s>0){this.errorInfo.batchErrors=[];let r=e.readUInt8();for(let _=0;_<s;_++){r===k.TNS_LONG_LENGTH_INDICATOR&&e.skipUB4();let o=e.readUB2();this.errorInfo.batchErrors.push(new N_(o))}r===k.TNS_LONG_LENGTH_INDICATOR&&e.skipBytes(1)}if(s=e.readUB2(),s>0){let r=e.readUInt8();for(let _=0;_<s;_++)r===k.TNS_LONG_LENGTH_INDICATOR&&e.skipUB4(),this.errorInfo.batchErrors[_].offset=e.readUB4();r===k.TNS_LONG_LENGTH_INDICATOR&&e.skipBytes(1)}if(s=e.readUB2(),s>0){e.skipBytes(1);for(let r=0;r<s;r++)e.skipUB2(),this.errorInfo.batchErrors[r].message=e.readStr(k.CSFRM_IMPLICIT),e.skipBytes(2)}this.errorInfo.num=e.readUB4(),this.errorInfo.rowCount=e.readUB8(),this.errorInfo.num!==0&&(this.errorOccurred=!0,this.errorInfo.message=e.readStr(k.CSFRM_IMPLICIT),this.errorInfo.message=this.errorInfo.message.replace(/\n+$/,"")),this.errorInfo.isWarning=!1,this.processedError=!0}processReturnParameter(){}processWarningInfo(e){this.errorInfo.num=e.readUB2();let t=e.readUB2();e.skipUB2(),this.errorInfo.num!=0&&t>0&&(this.errorInfo.message=e.readStr(k.CSFRM_IMPLICIT)),this.errorInfo.isWarning=!0}hasMoreData(e){return e.numBytesLeft()>0&&!this.flushOutBinds}decode(e){this.process(e)}process(e){this.flushOutBinds=!1,this.processedError=!1;do{this.savePoint(e);let t=e.readUInt8();this.processMessage(e,t)}while(this.hasMoreData(e))}savePoint(e){e.savePoint()}processMessage(e,t){t===k.TNS_MSG_TYPE_ERROR?this.processErrorInfo(e):t===k.TNS_MSG_TYPE_WARNING?this.processWarningInfo(e):t===k.TNS_MSG_TYPE_STATUS?(this.callStatus=e.readUB4(),this.endToEndSeqNum=e.readUB2()):t===k.TNS_MSG_TYPE_PARAMETER?this.processReturnParameter(e):t===k.TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK?this.processServerSidePiggyBack(e):Lr.throwErr(Lr.ERR_UNEXPECTED_MESSAGE_TYPE,t,e.pos,e.packetNum)}processServerSidePiggyBack(e){let t=e.readUInt8();if(t===k.TNS_SERVER_PIGGYBACK_LTXID){let s=e.readUB4();s>0&&e.skipBytes(s)}else if(!(t===k.TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION||t===k.TNS_SERVER_PIGGYBACK_TRACE_EVENT))if(t===k.TNS_SERVER_PIGGYBACK_OS_PID_MTS)e.skipUB2(),e.skipBytesChunked();else if(t===k.TNS_SERVER_PIGGYBACK_SYNC){e.skipUB2(),e.skipUB1();let s=e.readUB2();e.skipBytes(1);for(let r=0;r<s;r++){let _=e.readUB2();_>0&&e.skipBytesChunked(),_=e.readUB2(),_>0&&e.skipBytesChunked(),e.skipUB2(),e.skipUB4()}}else if(t===k.TNS_SERVER_PIGGYBACK_EXT_SYNC)e.skipUB2(),e.skipUB1();else if(t===k.TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT){e.skipUB2(),e.skipUB1(1),e.skipUB4(),e.skipUB4(),e.skipUB1();let s=e.readUB4();s>0&&e.skipBytes(s)}else if(t===k.TNS_SERVER_PIGGYBACK_SESS_RET){e.skipUB2(),e.skipUB1();let s=e.readUB2();if(s>0){e.skipUB1();for(let _=0;_<s;++_){let o=e.readUB2();o>0&&e.skipBytesChunked(),o=e.readUB2(),o>0&&e.skipBytesChunked(),e.skipUB2()}}e.readUB4()&k.TNS_SESSGET_SESSION_CHANGED&&this.connection._drcpEstablishSession&&this.connection.resetStatmentCache(),this.connection._drcpEstablishSession=!1,e.skipUB4(),e.skipUB2()}else Lr.throwErr(Lr.ERR_UNKOWN_SERVER_SIDE_PIGGYBACK,t)}writePiggybacks(e){this.connection._currentSchemaModified&&this._writeCurrentSchemaPiggyback(e),this.connection._cursorsToClose.size>0&&!this.connection._drcpEstablishSession&&this.writeCloseCursorsPiggyBack(e),(this.connection._actionModified||this.connection._clientIdentifierModified||this.connection._dbopModified||this.connection._clientInfoModified||this.connection._moduleModified)&&this._writeEndToEndPiggybacks(e),this.connection._tempLobsTotalSize>0&&this.writeCloseTempLobsPiggyback(e)}writePiggybackHeader(e,t){e.writeUInt8(k.TNS_MSG_TYPE_PIGGYBACK),e.writeUInt8(t),e.writeSeqNum(),e.caps.ttcFieldVersion>=k.TNS_CCAP_FIELD_VERSION_23_1_EXT_1&&e.writeUB8(0)}writeCloseCursorsPiggyBack(e){this.writePiggybackHeader(e,k.TNS_FUNC_CLOSE_CURSORS),e.writeUInt8(1),e.writeUB4(this.connection._cursorsToClose.size);for(let t of this.connection._cursorsToClose.keys())e.writeUB4(t);this.connection._cursorsToClose.clear()}writeCloseTempLobsPiggyback(e){let t=this.connection._tempLobsToClose,s=k.TNS_LOB_OP_FREE_TEMP|k.TNS_LOB_OP_ARRAY;this.writePiggybackHeader(e,k.TNS_FUNC_LOB_OP),e.writeUInt8(1),e.writeUB4(this.connection._tempLobsTotalSize),e.writeUInt8(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(s),e.writeUInt8(0),e.writeUB4(0),e.writeUB8(0),e.writeUB8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);for(let r of t)e.writeBytes(r);this.connection._tempLobsToClose=[],this.connection._tempLobsTotalSize=0}_writeCurrentSchemaPiggyback(e){this.writePiggybackHeader(e,k.TNS_FUNC_SET_SCHEMA),e.writeUInt8(1);let t=E_.byteLength(this.connection.currentSchema);e.writeUB4(t),e.writeBytesWithLength(E_.from(this.connection.currentSchema))}_writeEndToEndPiggybacks(e){let t=0;this.connection._actionModified&&(t|=k.TNS_END_TO_END_ACTION),this.connection._clientIdentifierModified&&(t|=k.TNS_END_TO_END_CLIENT_IDENTIFIER),this.connection._clientInfoModified&&(t|=k.TNS_END_TO_END_CLIENT_INFO),this.connection._moduleModified&&(t|=k.TNS_END_TO_END_MODULE),this.connection._dbOpModified&&(t|=k.TNS_END_TO_END_DBOP),this.writePiggybackHeader(e,k.TNS_FUNC_SET_END_TO_END_ATTR),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(t);let s=this.writeEndEndTraceValue(e,this.connection._clientIdentifier,this.connection._clientIdentifierModified),r=this.writeEndEndTraceValue(e,this.connection._module,this.connection._moduleModified),_=this.writeEndEndTraceValue(e,this.connection._action,this.connection._actionModified);e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);let o=this.writeEndEndTraceValue(e,this.connection._clientInfo,this.connection._clientInfoModified);e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);let a=this.writeEndEndTraceValue(e,this.connection._dbOp,this.connection._dbOpModified);this.connection._clientIdentifierModified&&this.connection._clientIdentifier&&e.writeBytesWithLength(s),this.connection._moduleModified&&this.connection._module&&e.writeBytesWithLength(r),this.connection._actionModified&&this.connection._action&&e.writeBytesWithLength(_),this.connection._clientInfoModified&&this.connection._clientInfo&&e.writeBytesWithLength(o),this.connection._dbOpModified&&this.connection._dbOp&&e.writeBytesWithLength(a),this.connection._actionModified=!1,this.connection._action="",this.connection._clientIdentifierModified=!1,this.connection._clientIdentifier="",this.connection._clientInfoModified=!1,this.connection._clientInfo="",this.connection._dbOpModified=!1,this.connection._dbOp="",this.connection._moduleModified=!1,this.connection._module=""}writeEndEndTraceValue(e,t,s){let r;return s?(e.writeUInt8(1),t?(r=E_.from(t),e.writeUB4(r.length)):e.writeUB4(0)):(e.writeUInt8(0),e.writeUB4(0)),r}};T(u_,"Message");var S_=u_;Dl.exports=S_});var Us=m((BD,Il)=>{"use strict";var{Buffer:ct}=require("buffer"),Le=ae(),$e=U(),Ou=Ze(),ml=He(),f_=class f_{constructor(e){typeof e=="number"?(this.buf=ct.alloc(e),this.size=0,this.maxSize=e):(this.buf=e,this.size=this.maxSize=e.length),this.pos=0}_grow(e){$e.throwErr($e.ERR_BUFFER_LENGTH_INSUFFICIENT,this.numBytesLeft(),e)}_readBytesWithLength(e){return this.readBytes(e)}_readInteger(e,t,s){let r=!1,_=this.readUInt8();if(_===0)return 0;if(_&128&&(t||$e.throwErr($e.ERR_UNEXPECTED_NEGATIVE_INTEGER,this.pos,this.packetNum),r=!0,_=_&127),_>e&&$e.throwErr($e.ERR_INTEGER_TOO_LARGE,_,e,this.pos,this.packetNum),s)this.skipBytes(_);else{let a=this.readBytes(_).readUIntBE(0,_);return r?-a:a}}numBytesLeft(){return this.size-this.pos}parseBinaryDouble(e){return e=ct.from(e),e[0]&128?e[0]&=127:(e[0]^=255,e[1]^=255,e[2]^=255,e[3]^=255,e[4]^=255,e[5]^=255,e[6]^=255,e[7]^=255),e.readDoubleBE()}parseBinaryFloat(e){return e=ct.from(e),e[0]&128?e[0]&=127:(e[0]^=255,e[1]^=255,e[2]^=255,e[3]^=255),e.readFloatBE()}parseOracleDate(e,t=!0){let s=0;e.length>=11&&(s=Math.floor(e.readUInt32BE(7)/(1e3*1e3)));let r=(e[0]-100)*100+e[1]-100;return Ou._makeDate(t,r,e[2],e[3],e[4]-1,e[5]-1,e[6]-1,s,0)}parseOracleNumber(e){let t=e[0],s=!!(t&128);s||(t=t^255),t-=193;let r=t*2+2;if(e.length===1)return s?"0":"-1e126";let _=e.length;!s&&e[e.length-1]===102&&(_-=1);let o,a=[];for(let N=1;N<_;N++){s?o=e[N]-1:o=101-e[N];let E=Math.floor(o/10);E===0&&N===1?r-=1:E===10?(a.push("1"),a.push("0"),r+=1):(E!==0||N>1)&&a.push(E.toString()),E=o%10,(E!==0||N<_-1)&&a.push(E.toString())}let c=[];s||c.push("-"),r<=0&&(c.push("."),r<0&&c.push("0".repeat(-r)));for(let N=0;N<a.length;N++)N>0&&N===r&&c.push("."),c.push(a[N]);if(r>a.length)for(let N=a.length;N<r;N++)c.push("0");return c.join("")}readBinaryDouble(){let e=this.readBytesWithLength();return e?this.parseBinaryDouble(e):null}readBinaryFloat(){let e=this.readBytesWithLength();return e?this.parseBinaryFloat(e):null}readBool(){let e=this.readBytesWithLength();return e?e[e.length-1]===1:null}readBytes(e){let t=this.numBytesLeft();e>t&&$e.throwErr($e.ERR_UNEXPECTED_END_OF_DATA,e,t);let s=this.buf.subarray(this.pos,this.pos+e);return this.pos+=e,s}readBytesWithLength(){let e=this.readUInt8();return e===0||e===Le.TNS_NULL_LENGTH_INDICATOR?null:this._readBytesWithLength(e)}readDbObject(){let e={},t=this.readUB4();return t>0&&(e.toid=ct.from(this.readBytesWithLength())),t=this.readUB4(),t>0&&(e.oid=ct.from(this.readBytesWithLength())),t=this.readUB4(),t>0&&(e.snapshot=ct.from(this.readBytesWithLength())),this.skipUB2(),t=this.readUB4(),this.skipUB2(),t>0&&(e.packedData=ct.from(this.readBytesWithLength())),e}readInt8(){return this.readBytes(1).readInt8()}readOracleDate(e){let t=this.readBytesWithLength();return t?this.parseOracleDate(t,e):null}readOracleNumber(){let e=this.readBytesWithLength();return e?this.parseOracleNumber(e):null}readSB2(){return this._readInteger(2,!0,!1)}readSB4(){return this._readInteger(4,!0,!1)}readSB8(){return this._readInteger(8,!0,!1)}readStr(e){let t=this.readBytesWithLength();return t?e===Le.CSFRM_IMPLICIT?t.toString():ct.from(t).swap16().toString("utf16le"):null}readUB2(){return this._readInteger(2,!1,!1)}readUB4(){return this._readInteger(4,!1,!1)}readUB8(){return this._readInteger(8,!1,!1)}readUInt8(){return this.readBytes(1)[0]}readUInt16BE(){return this.readBytes(2).readUInt16BE()}readUInt16LE(){return this.readBytes(2).readUInt16LE()}readUInt32BE(){return this.readBytes(4).readUInt32BE()}reserveBytes(e){e>this.numBytesLeft()&&this._grow(this.pos+e);let t=this.buf.subarray(this.pos,this.pos+e);return this.pos+=e,t}skipBytes(e){e>this.numBytesLeft()&&$e.throwErr($e.ERR_UNEXPECTED_END_OF_DATA),this.pos+=e}skipSB4(){return this._readInteger(4,!0,!0)}skipUB1(){this.skipBytes(1)}skipUB2(){return this._readInteger(2,!1,!0)}skipUB4(){return this._readInteger(4,!1,!0)}skipUB8(){return this._readInteger(8,!1,!0)}writeBinaryDouble(e){this.writeUInt8(8);let t=this.reserveBytes(8);t.writeDoubleBE(e),t[0]&128?(t[0]^=255,t[1]^=255,t[2]^=255,t[3]^=255,t[4]^=255,t[5]^=255,t[6]^=255,t[7]^=255):t[0]|=128}writeBinaryFloat(e){this.writeUInt8(4);let t=this.reserveBytes(4);t.writeFloatBE(e),t[0]&128?(t[0]^=255,t[1]^=255,t[2]^=255,t[3]^=255):t[0]|=128}writeBytes(e){let t=0,s=e.length;for(;s>0;){let r=this.numBytesLeft();r===0&&this._grow(this.pos+s);let _=Math.min(r,s);e.copy(this.buf,this.pos,t,t+_),this.pos+=_,t+=_,s-=_}}writeBytesWithLength(e){let t=e.length;if(t<=Le.TNS_MAX_SHORT_LENGTH)this.writeUInt8(t),t>0&&this.writeBytes(e);else{let s=0;for(this.writeUInt8(Le.TNS_LONG_LENGTH_INDICATOR);t>0;){let r=Math.min(t,Le.BUFFER_CHUNK_SIZE);this.writeUB4(r),this.writeBytes(e.subarray(s,s+r)),t-=r,s+=r}this.writeUB4(0)}}writeDbObject(e){this.writeUB4(e.toid.length),this.writeBytesWithLength(e.toid),e.oid?(this.writeUB4(e.oid.length),this.writeBytesWithLength(e.oid)):this.writeUB4(0),this.writeUB4(0),this.writeUB4(0);let t=e._getPackedData();this.writeUB4(t.length),this.writeUB4(e.flags),this.writeBytesWithLength(t)}writeOracleDate(e,t,s=!0){let r,_=t._bufferSizeFactor;_>7&&(r=e.getUTCMilliseconds()*1e3*1e3,r===0&&_<=11&&(_=7)),s&&this.writeUInt8(_);let o=this.reserveBytes(_);if(t===ml.DB_TYPE_DATE||t==ml.DB_TYPE_TIMESTAMP){let a=e.getFullYear();o[0]=Math.trunc(a/100)+100,o[1]=a%100+100,o[2]=e.getMonth()+1,o[3]=e.getDate(),o[4]=e.getHours()+1,o[5]=e.getMinutes()+1,o[6]=e.getSeconds()+1}else{let a=e.getUTCFullYear();o[0]=Math.trunc(a/100)+100,o[1]=a%100+100,o[2]=e.getUTCMonth()+1,o[3]=e.getUTCDate(),o[4]=e.getUTCHours()+1,o[5]=e.getUTCMinutes()+1,o[6]=e.getUTCSeconds()+1}_>7&&(o.writeInt32BE(r,7),_>11&&(o[11]=Le.TZ_HOUR_OFFSET,o[12]=Le.TZ_MINUTE_OFFSET))}writeOracleNumber(e){let t=!1;e[0]==="-"&&(t=!0,e=e.substring(1));let s=0,r=e.indexOf("e");r>0&&(s=Number(e.substring(r+1)),e=e.substring(0,r));let _=e.indexOf(".");if(_>0&&(s-=e.length-_-1,e=e.substring(0,_)+e.substring(_+1)),e[0]==="0"&&(e=e.replace(/^0+/,"")),e.length>0&&e[e.length-1]==="0"){let E=e.replace(/0+$/,"");s+=e.length-E.length,e=E}(e.length>Le.NUMBER_MAX_DIGITS||s>126||s<-129)&&$e.throwErr($e.ERR_ORACLE_NUMBER_NO_REPR),(s>0&&s%2===1||s<0&&s%2===-1)&&(s--,e+="0"),e.length%2===1&&(e="0"+e);let o=t&&e.length<Le.NUMBER_MAX_DIGITS,a=e.length/2,c=(s+e.length)/2+192;t?c=c^255:e.length===0&&s===0&&(c=128);let N=this.reserveBytes(a+2+o);N[0]=a+1+o,N[1]=c;for(let E=0,P=2;E<e.length;E+=2,P++){let f=Number(e.substring(E,E+2));t?N[P]=101-f:N[P]=f+1}o&&(N[N.length-1]=102)}writeQLocator(e){this.writeUB4(40),this.writeUInt8(40),this.writeUInt16BE(38),this.writeUInt16BE(Le.TNS_LOB_QLOCATOR_VERSION),this.writeUInt8(Le.TNS_LOB_LOC_FLAGS_VALUE_BASED|Le.TNS_LOB_LOC_FLAGS_BLOB|Le.TNS_LOB_LOC_FLAGS_ABSTRACT),this.writeUInt8(Le.TNS_LOB_LOC_FLAGS_INIT),this.writeUInt16BE(0),this.writeUInt16BE(1),this.writeUInt64BE(e),this.writeUInt16BE(0),this.writeUInt16BE(0),this.writeUInt16BE(0),this.writeUInt64BE(0),this.writeUInt64BE(0)}writeStr(e){this.writeBytes(ct.from(e))}writeInt32BE(e){this.reserveBytes(4).writeInt32BE(e)}writeUB4(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):e<=65535?(this.writeUInt8(2),this.writeUInt16BE(e)):(this.writeUInt8(4),this.writeUInt32BE(e))}writeUB8(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):e<=65535?(this.writeUInt8(2),this.writeUInt16BE(e)):e<=4294967295?(this.writeUInt8(4),this.writeUInt32BE(e)):(this.writeUInt8(8),this.writeUInt64BE(e))}writeUInt8(e){let t=this.reserveBytes(1);t[0]=e}writeUInt16BE(e){this.reserveBytes(2).writeUInt16BE(e)}writeUInt32BE(e){this.reserveBytes(4).writeUInt32BE(e)}writeUInt64BE(e){let t=this.reserveBytes(8);t.writeUInt32BE(0),t.writeUInt32BE(e,4)}writeUInt16LE(e){this.reserveBytes(2).writeUInt16LE(e)}};T(f_,"BaseBuffer");var yr=f_,d_=class d_ extends yr{constructor(e){e?super(e):(super(Le.BUFFER_CHUNK_SIZE),this.size=this.maxSize)}_grow(e){let t=e%Le.BUFFER_CHUNK_SIZE;t>0&&(e+=Le.BUFFER_CHUNK_SIZE-t);let s=ct.alloc(e);this.buf.copy(s),this.buf=s,this.maxSize=this.size=e}};T(d_,"GrowableBuffer");var P_=d_;Il.exports={BaseBuffer:yr,GrowableBuffer:P_}});var D_=m((wD,Cl)=>{"use strict";var{Buffer:Ns}=require("buffer"),ee=ae(),et=U(),X=He(),gu=cr(),{GrowableBuffer:Lu}=Us(),R_=class R_ extends Lu{_readBytesWithLength(e){return e===ee.TNS_LONG_LENGTH_INDICATOR&&(e=this.readUInt32BE()),this.readBytes(e)}getIsAtomicNull(){let e=this.readUInt8();return e===ee.TNS_OBJ_ATOMIC_NULL||e===ee.TNS_NULL_LENGTH_INDICATOR?!0:(this.pos-=1,!1)}readHeader(e){if(e.imageFlags=this.readUInt8(),e.imageVersion=this.readUInt8(),this.readLength(),!(e.imageFlags&ee.TNS_OBJ_NO_PREFIX_SEG)){let t=this.readLength();this.skipBytes(t)}}readLength(){let e=this.readUInt8();return e!==ee.TNS_LONG_LENGTH_INDICATOR?e:this.readUInt32BE()}writeHeader(e){this.writeUInt8(e.imageFlags),this.writeUInt8(e.imageVersion),this.writeUInt8(ee.TNS_LONG_LENGTH_INDICATOR),this.writeUInt32BE(0),e._objType.isCollection&&(this.writeUInt8(1),this.writeUInt8(1))}writeLength(e){e<=ee.TNS_OBJ_MAX_SHORT_LENGTH?this.writeUInt8(e):(this.writeUInt8(ee.TNS_LONG_LENGTH_INDICATOR),this.writeUInt32BE(e))}};T(R_,"DbObjectPickleBuffer");var Yr=R_,Br=class Br extends gu{constructor(e,t){if(typeof e=="function"&&(e=e.prototype._objType),super(e),this.packedData=t,this.unpackedAttrs=new Map,t)this.unpackedAssocArray=new Map,this.unpackedAssocKeys=void 0;else if(e){let s=Ns.from([0,34,ee.TNS_OBJ_NON_NULL_OID,ee.TNS_OBJ_HAS_EXTENT_OID]);this.toid=Ns.concat([s,e.oid,ee.TNS_EXTENT_OID]),this.flags=ee.TNS_OBJ_TOP_LEVEL,this.imageFlags=ee.TNS_OBJ_IS_VERSION_81,this.imageVersion=ee.TNS_OBJ_IMAGE_VERSION,e.isCollection?(this.imageFlags|=ee.TNS_OBJ_IS_COLLECTION,e.collectionType===ee.TNS_OBJ_PLSQL_INDEX_TABLE?this.unpackedAssocArray=new Map:this.unpackedArray=[]):this.imageFlags|=ee.TNS_OBJ_NO_PREFIX_SEG}}_ensureAssocKeys(){this.unpackedAssocKeys||(this.unpackedAssocKeys=[...this.unpackedAssocArray.keys()].sort())}_ensureUnpacked(){this.packedData&&this._unpackData()}_getPackedData(){if(this.packedData)return this.packedData;let e=new Yr;e.writeHeader(this),this._packData(e);let t=e.pos;return e.pos=3,e.writeUInt32BE(t),e.buf.subarray(0,t)}_packData(e){let t=this._objType;if(t.isCollection)if(e.writeUInt8(t.collectionFlags),t.collectionType===ee.TNS_OBJ_PLSQL_INDEX_TABLE){this._ensureAssocKeys(),e.writeLength(this.unpackedAssocKeys.length);for(let s of this.unpackedAssocKeys)e.writeInt32BE(s),this._packValue(e,t.elementType,t.elementTypeClass,this.unpackedAssocArray.get(s))}else{e.writeLength(this.unpackedArray.length);for(let s of this.unpackedArray)this._packValue(e,t.elementType,t.elementTypeClass,s)}else for(let s of t.attributes)this._packValue(e,s.type,s.typeClass,this.unpackedAttrs.get(s.name))}_packValue(e,t,s,r){if(r==null)s&&!s.prototype.isCollection?e.writeUInt8(ee.TNS_OBJ_ATOMIC_NULL):e.writeUInt8(ee.TNS_NULL_LENGTH_INDICATOR);else switch(t){case X.DB_TYPE_CHAR:case X.DB_TYPE_VARCHAR:e.writeBytesWithLength(Ns.from(r));break;case X.DB_TYPE_NCHAR:case X.DB_TYPE_NVARCHAR:e.writeBytesWithLength(Ns.from(r,"utf16le").swap16());break;case X.DB_TYPE_NUMBER:e.writeOracleNumber(r.toString());break;case X.DB_TYPE_BINARY_INTEGER:case X.DB_TYPE_BOOLEAN:e.writeUInt8(4),e.writeUInt32BE(r);break;case X.DB_TYPE_RAW:e.writeBytesWithLength(r);break;case X.DB_TYPE_BINARY_DOUBLE:e.writeBinaryDouble(r);break;case X.DB_TYPE_BINARY_FLOAT:e.writeBinaryFloat(r);break;case X.DB_TYPE_DATE:case X.DB_TYPE_TIMESTAMP:case X.DB_TYPE_TIMESTAMP_LTZ:case X.DB_TYPE_TIMESTAMP_TZ:e.writeOracleDate(r,t);break;case X.DB_TYPE_OBJECT:this._objType.isCollection||r._objType.isCollection?e.writeBytesWithLength(r._getPackedData()):r._packData(e);break;default:et.throwErr(et.ERR_NOT_IMPLEMENTED,t)}}_unpackData(){let e=new Yr(this.packedData);e.readHeader(this),this._unpackDataFromBuf(e),this.packedData=void 0}_unpackDataFromBuf(e){let t,s,r,_,o=this._objType;if(o.isCollection){o.collectionType===ee.TNS_OBJ_PLSQL_INDEX_TABLE?s=new Map:t=[],this.collectionFlags=e.readUInt8();let a=e.readLength();for(let c=0;c<a;c++){o.collectionType===ee.TNS_OBJ_PLSQL_INDEX_TABLE&&(r=e.readUInt32BE());let N=this._unpackValue(e,o.elementType,o.elementTypeClass);o.collectionType===ee.TNS_OBJ_PLSQL_INDEX_TABLE?s.set(r,N):t.push(N)}}else{_=new Map;for(let a of o.attributes){let c=this._unpackValue(e,a.type,a.typeClass);_.set(a.name,c)}}this.unpackedAttrs=_,this.unpackedArray=t,this.unpackedAssocArray=s}_unpackValue(e,t,s){let r,_,o;switch(t){case X.DB_TYPE_NUMBER:return o=e.readOracleNumber(),o!==null&&(o=parseFloat(o)),o;case X.DB_TYPE_BINARY_INTEGER:return e.readBinaryInteger();case X.DB_TYPE_VARCHAR:case X.DB_TYPE_CHAR:return e.readStr(ee.CSFRM_IMPLICIT);case X.DB_TYPE_NVARCHAR:case X.DB_TYPE_NCHAR:return e.readStr(ee.CSFRM_NCHAR);case X.DB_TYPE_RAW:return Ns.from(e.readBytesWithLength());case X.DB_TYPE_BINARY_DOUBLE:return e.readBinaryDouble();case X.DB_TYPE_BINARY_FLOAT:return e.readBinaryFloat();case X.DB_TYPE_DATE:case X.DB_TYPE_TIMESTAMP:return e.readOracleDate(!0);case X.DB_TYPE_TIMESTAMP_LTZ:case X.DB_TYPE_TIMESTAMP_TZ:return e.readOracleDate(!1);case X.DB_TYPE_BOOLEAN:return e.readBool();case X.DB_TYPE_OBJECT:return r=e.getIsAtomicNull(),r?null:(_=new Br(s),_._objType.isCollection||this._objType.isCollection?_.packedData=Ns.from(e.readBytesWithLength()):_._unpackDataFromBuf(e),_);default:et.throwErr(et.ERR_NOT_IMPLEMENTED,t)}}append(e){if(this._ensureUnpacked(),this.unpackedArray){let t=this._objType;t.maxNumElements>0&&this.unpackedArray.length>=t.maxNumElements&&et.throwErr(et.ERR_INVALID_COLL_INDEX_SET,this.unpackedArray.length,0,t.maxNumElements),this.unpackedArray.push(e)}else{this._ensureAssocKeys();let t;if(this.unpackedAssocKeys.length===0)t=0;else{let s=this.unpackedAssocKeys.length-1;t=this.unpackedAssocKeys[s]+1}this.unpackedAssocArray.set(t,e),this.unpackedAssocKeys.push(t)}}deleteElement(e){this._ensureUnpacked(),this.unpackedArray?(this._objType.collectionType==ee.TNS_OBJ_VARRAY&&et.throwErr(et.ERR_DELETE_ELEMENTS_OF_VARRAY),this.unpackedArray.splice(e,1)):(this._unpackedAssocKeys=void 0,this.unpackedAssocArray.delete(e))}getAttrValue(e){this._ensureUnpacked();let t=this.unpackedAttrs.get(e.name);return t===void 0?null:t}getElement(e){let t;return this._ensureUnpacked(),this.unpackedArray?t=this.unpackedArray[e]:t=this.unpackedAssocArray.get(e),t===void 0&&et.throwErr(et.ERR_INVALID_COLL_INDEX_GET,e),t}getFirstIndex(){if(this._ensureUnpacked(),this.unpackedArray)return 0;if(this.unpackedAssocArray)return this._ensureAssocKeys(),this.unpackedAssocKeys[0]}getKeys(){return this._ensureUnpacked(),this.unpackedArray?Array.from(this.unpackedArray.keys()):this.unpackedAssocArray?(this._ensureAssocKeys(),Array.from(this.unpackedAssocKeys)):[]}getLastIndex(){if(this._ensureUnpacked(),this.unpackedArray){if(this.unpackedArray.length>0)return this.unpackedArray.length-1}else if(this.unpackedAssocArray)return this._ensureAssocKeys(),this.unpackedAssocKeys[this.unpackedAssocKeys.length-1]}getNextIndex(e){if(this._ensureUnpacked(),this.unpackedArray){if(e+1<this.unpackedArray.length)return e+1}else if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys)if(t>e)return t}}getPrevIndex(e){if(this._ensureUnpacked(),this.unpackedArray){if(e>0)return e-1}else if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys.reverse())if(t<e)return t}}getValues(){let e=[];if(this._ensureUnpacked(),this.unpackedArray)return Array.from(this.unpackedArray);if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys)e.push(this.unpackedAssocArray.get(t))}return e}hasElement(e){return this._ensureUnpacked(),this.unpackedArray?e>=0&&e<this.unpackedArray.length:this.unpackedAssocArray.has(e)}setAttrValue(e,t){this._ensureUnpacked(),this.unpackedAttrs.set(e.name,t)}setElement(e,t){if(this._ensureUnpacked(),this.unpackedArray){let s=Math.max(this.unpackedArray.length-1,0);e>s&&et.throwErr(et.ERR_INVALID_COLL_INDEX_SET,e,0,s),this.unpackedArray[e]=t}else this.unpackedAssocArray.has(e)||(this.unpackedAssocKeys=void 0),this.unpackedAssocArray.set(e,t)}trim(e){this._ensureUnpacked(),e>0&&(this.unpackedArray=this.unpackedArray.slice(0,this.unpackedArray.length-e))}};T(Br,"ThinDbObjectImpl");var p_=Br;Cl.exports=p_});var C_=m((VD,Ol)=>{"use strict";var{Buffer:ws}=require("buffer"),Ie=ae(),yu=nt(),I_=class I_ extends yu{constructor(e,t){super(e),this.sourceLobImpl=t.sourceLobImpl||null,this.operation=t.operation,this.destLobImpl=t.destLobImpl||null,this.sourceOffset=t.sourceOffset||0,this.destOffset=t.destOffset||0,this.boolFlag=!1,t.data&&(this.data=t.data),this.functionCode=Ie.TNS_FUNC_LOB_OP,this.sendAmount=t.sendAmount,this.amount=t.amount||0}encode(e){this.writeFunctionHeader(e),this.sourceLobImpl===null?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(this.sourceLobImpl._locator.length)),this.destLobImpl===null?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(this.destLobImpl._locator.length)),e.writeUB4(0),e.writeUB4(0),this.operation===Ie.TNS_LOB_OP_CREATE_TEMP?e.writeUInt8(1):e.writeUInt8(0),e.writeUInt8(0),this.operation===Ie.TNS_LOB_OP_CREATE_TEMP||this.operation===Ie.TNS_LOB_OP_IS_OPEN?e.writeUInt8(1):e.writeUInt8(0),e.writeUB4(this.operation),e.writeUInt8(0),e.writeUInt8(0),e.writeUB8(this.sourceOffset),e.writeUB8(this.destOffset),this.sendAmount?e.writeUInt8(1):e.writeUInt8(0);for(let t=0;t<3;t++)e.writeUInt16BE(0);if(this.sourceLobImpl&&e.writeBytes(this.sourceLobImpl._locator),this.destLobImpl&&e.writeBytes(this.destLobImpl._locator),this.operation===Ie.TNS_LOB_OP_CREATE_TEMP&&(this.sourceLobImpl.dbType._csfrm===Ie.CSFRM_NCHAR?(e.caps.checkNCharsetId(),e.writeUB4(Ie.TNS_CHARSET_UTF16)):e.writeUB4(Ie.TNS_CHARSET_UTF8)),this.data){let t;e.writeUInt8(Ie.TNS_MSG_TYPE_LOB_DATA),this.sourceLobImpl.dbType._oraTypeNum===Ie.TNS_DATA_TYPE_BLOB?t=this.data:this.sourceLobImpl.getCsfrm()===Ie.CSFRM_NCHAR?(t=this.data,ws.isBuffer(this.data)&&(t=t.toString()),t=ws.from(t,Ie.TNS_ENCODING_UTF16).swap16()):t=ws.from(this.data),e.writeBytesWithLength(t)}this.sendAmount&&e.writeUB8(this.amount)}processMessage(e,t){if(t===Ie.TNS_MSG_TYPE_LOB_DATA){let s=this.sourceLobImpl.dbType._oraTypeNum,r=e.readBytesWithLength();r!==null&&(s===Ie.TNS_DATA_TYPE_BLOB?r=ws.from(r):this.sourceLobImpl.getCsfrm()===Ie.CSFRM_NCHAR?r=ws.from(r).swap16().toString("utf16le"):r=r.toString()),this.data=r}else super.processMessage(e,t)}processReturnParameter(e){let t,s,r,_;this.sourceLobImpl!==null&&(_=this.sourceLobImpl._locator.length,t=e.readBytes(_),s=t.slice(0,_),s.copy(this.sourceLobImpl._locator)),this.destLobImpl!==null&&(_=this.destLobImpl._locator.length,t=e.readBytes(_),s=t.slice(0,_),s.copy(this.destLobImpl._locator)),this.operation===Ie.TNS_LOB_OP_CREATE_TEMP&&e.skipUB2(),this.sendAmount&&(this.amount=e.readSB8()),(this.operation===Ie.TNS_LOB_OP_CREATE_TEMP||this.operation===Ie.TNS_LOB_OP_IS_OPEN)&&(r=e.readUB2(),this.boolFlag=r>0)}};T(I_,"LobOpMessage");var m_=I_;Ol.exports=m_});var wr=m((FD,gl)=>{"use strict";var{Buffer:Yu}=require("buffer"),Bu=en(),we=ae(),Uu=C_(),Ur=U(),g_=class g_ extends Bu{_getConnImpl(){return this.conn}async _sendMessage(e){let t=new Uu(this.conn,e);return await this.conn._protocol._processMessage(t),e.operation===we.TNS_LOB_OP_READ?t.data?t.data:null:t.amount}getChunkSize(){return this._chunkSize}async _getChunkSizeAsync(){this.checkConn();let e={operation:we.TNS_LOB_OP_GET_CHUNK_SIZE,sourceLobImpl:this,sendAmount:!0};this._chunkSize=this._pieceSize=await this._sendMessage(e)}getLength(){return this._length}getPieceSize(){return this._pieceSize}setPieceSize(e){this._pieceSize=e}getType(){return this.dbType}async getData(){return this._length<0&&Ur.throwErr(Ur.ERR_INVALID_LOB),await this.read(1,this._length)}async read(e,t){this.checkConn();let s={operation:we.TNS_LOB_OP_READ,sourceLobImpl:this,sourceOffset:e,sendAmount:!0,amount:t||this._pieceSize};return await this._sendMessage(s)}async write(e,t){this.checkConn();let s={operation:we.TNS_LOB_OP_WRITE,sourceLobImpl:this,sourceOffset:e,data:t};await this._sendMessage(s),this._length+=t.length}getCsfrm(){return this.dbType._csfrm!==we.CSFRM_NCHAR&&this._locator[we.TNS_LOB_LOC_OFFSET_FLAG_3]&we.TNS_LOB_LOC_FLAGS_VAR_LENGTH_CHARSET?we.CSFRM_NCHAR:this.dbType._csfrm}async create(e,t){this.dirtyLength=!1,this.conn=e,this.dbType=t,this._locator=Yu.alloc(40),this._isTempLob=!0,this._length=0;let s={operation:we.TNS_LOB_OP_CREATE_TEMP,sourceLobImpl:this,amount:we.TNS_DURATION_SESSION,destOffset:t._oraTypeNum,sourceOffset:t._csfrm,sendAmount:!0};await this._sendMessage(s),await this._getChunkSizeAsync()}checkConn(){this.conn.nscon.connected||Ur.throwErr(Ur.ERR_LOB_CLOSED)}close(){this.checkConn(),this._isTempLob&&(this.conn._tempLobsToClose.push(this._locator),this.conn._tempLobsTotalSize+=this._locator.length)}init(e,t,s,r,_){this.dirtyLength=!1,this.conn=e,this._locator=t,this._isTempLob=!1,(this._locator[we.TNS_LOB_LOC_OFFSET_FLAG_4]&we.TNS_LOB_LOC_FLAGS_TEMP===we.TNS_LOB_LOC_FLAGS_TEMP||this._locator[we.TNS_LOB_LOC_OFFSET_FLAG_1]&we.TNS_LOB_LOC_FLAGS_ABSTRACT===we.TNS_LOB_LOC_FLAGS_ABSTRACT)&&(this._isTempLob=!0),this.dbType=s,this._length=r,this._chunkSize=_,this._pieceSize=_}};T(g_,"ThinLobImpl");var O_=g_;gl.exports=O_});var Y_=m((bD,Yl)=>{"use strict";var{Buffer:Xt}=require("buffer"),Ll=Bs(),I=ae(),wu=nt(),Mu=D_(),Vu=wr(),Ft=U(),ue=He(),y_=class y_ extends wu{constructor(e,t=null,s=null){super(e),this.statement=t,this.options=s,this.offset=0,this.numExecs=1,this.arrayDmlRowCounts=!1,this.requiresDefine=!1,this.rowIndex=t.bufferRowCount||0,this.dmlRowCounts=[],this.batchErrors=!1,this.outVariables=[],this.inFetch=!1,this.parseOnly=!1,this.resultSetsToSetup=[]}processMessage(e,t){t===I.TNS_MSG_TYPE_DESCRIBE_INFO?(e.skipBytesChunked(),this.statement.queryVars=[],this.statement.numQueryVars=0,this.statement.bufferRowCount=0,this.statement.bufferRowIndex=0,this.processDescribeInfo(e,this.resultSet),this.outVariables=this.statement.queryVars):t===I.TNS_MSG_TYPE_ROW_HEADER?this.processRowHeader(e):t===I.TNS_MSG_TYPE_ROW_DATA?this.processRowData(e):t===I.TNS_MSG_TYPE_IMPLICIT_RESULTSET?this.processImplicitResultSet(e):t===I.TNS_MSG_TYPE_BIT_VECTOR?this.processBitVector(e):t===I.TNS_MSG_TYPE_IO_VECTOR?this.processIOVector(e):t===I.TNS_MSG_TYPE_FLUSH_OUT_BINDS?this.flushOutBinds=!0:t===I.TNS_MSG_TYPE_ERROR?this.processErrorInfo(e):super.processMessage(e,t)}hasMoreData(){return!this.processedError&&!this.flushOutBinds}processErrorInfo(e){super.processErrorInfo(e),this.errorInfo.cursorId!==0&&(this.statement.cursorId=this.errorInfo.cursorId),this.statement.isPlSql||(this.statement.rowCount=this.errorInfo.rowCount),this.errorInfo.rowCount>0&&(this.statement.lastRowid=Ll.encodeRowID(this.errorInfo.rowID)),this.options.batchErrors=this.errorInfo.batchErrors,this.batchErrors&&this.options.batchErrors===null&&(this.options.batchErrors=[]),this.errorInfo.num===I.TNS_ERR_NO_DATA_FOUND&&this.statement.isQuery?(this.errorInfo.num=0,this.errorOccurred=!1,this.statement.moreRowsToFetch=!1):this.errorInfo.num!==0&&this.errorInfo.cursorId!==0&&(this.connection._addCursorToClose(this.statement.cursorId),this.connection.statementCache.delete(this.statement.sql)),this.errorInfo.batchErrors&&(this.errorOccurred=!1)}processDescribeInfo(e,t){let s=t.statement;e.skipUB4(),s.numQueryVars=e.readUB4(),s.numQueryVars>0&&e.skipUB1(),t.metadata=[];for(let _=0;_<s.numQueryVars;_++){let o=this.processColumnInfo(e,_+1);s.queryVars.push(o),t.metadata.push(o.fetchInfo)}let r=e.readUB4();r>0&&e.skipBytesChunked(),e.skipUB4(),e.skipUB4(),e.skipUB4(),e.skipUB4(),r=e.readUB4(),r>0&&e.skipBytesChunked(),this.resultSetsToSetup.push(t)}processColumnInfo(e,t){let s=e.readUInt8();e.skipUB1();let r=e.readInt8(),_;s===I.TNS_DATA_TYPE_NUMBER||s===I.TNS_DATA_TYPE_INTERVAL_DS||s===I.TNS_DATA_TYPE_TIMESTAMP||s===I.TNS_DATA_TYPE_TIMESTAMP_LTZ||s===I.TNS_DATA_TYPE_TIMESTAMP_TZ?_=e.readSB2():_=e.readInt8();let o=e.readUB4();e.skipUB4(),e.skipUB4();let a,c=e.readUB4();c>0&&(a=Xt.from(e.readBytesWithLength())),e.skipUB2(),e.skipUB2();let N=e.readUInt8(),E=e.readUB4();s===I.TNS_DATA_TYPE_RAW&&(E=o),e.caps.ttcFieldVersion>=I.TNS_CCAP_FIELD_VERSION_12_2&&e.skipUB4();let P=!!e.readUInt8();e.skipUB1();let f;c=e.readUB4(),c>0&&(f=e.readStr(I.CSFRM_IMPLICIT));let u;c=e.readUB4(),c>0&&(u=e.readStr(I.CSFRM_IMPLICIT)),c=e.readUB4();let S;c>0&&(S=e.readStr(I.CSFRM_IMPLICIT)),e.skipUB2(),e.skipUB4();let A={name:f,dbType:ue.getTypeByOraTypeNum(s,N),nullable:P};switch(A.dbType){case ue.DB_TYPE_VARCHAR:case ue.DB_TYPE_NVARCHAR:case ue.DB_TYPE_CHAR:case ue.DB_TYPE_NCHAR:case ue.DB_TYPE_RAW:A.byteSize=E;break;case ue.DB_TYPE_NUMBER:A.precision=r;break;case ue.DB_TYPE_TIMESTAMP:case ue.DB_TYPE_TIMESTAMP_TZ:case ue.DB_TYPE_TIMESTAMP_LTZ:A.precision=_;break;case ue.DB_TYPE_OBJECT:A.dbTypeClass=this.connection._getDbObjectType(u,S,void 0,a),A.dbTypeClass.partial&&this.connection._partialDbObjectTypes.push(A.dbTypeClass);break;default:break}return A.dbType===ue.DB_TYPE_NUMBER&&(A.scale=_),{fetchInfo:A,type:A.dbType,maxSize:o,columnNum:t,values:new Array(this.options.fetchArraySize)}}processRowHeader(e){e.skipUB1(),e.skipUB2(),e.skipUB4(),e.skipUB4(),e.skipUB2();let t=e.readUB4();t>0&&(e.skipUB1(),this.getBitVector(e,t)),t=e.readUB4(),t>0&&e.skipBytesChunked()}isDuplicateData(e){if(this.bitVector===null||this.bitVector===void 0)return!1;let t=Math.floor(e/8),s=e%8;return(this.bitVector[t]&1<<s)===0}processRowData(e){let t;for(let[s,r]of this.outVariables.entries())if(r.isArray){r.numElementsInArray=e.readUB4();let _=new Array(r.numElementsInArray).fill(null);for(let o=0;o<r.numElementsInArray;o++)t=this.processColumnData(e,r,o),_[o]=t;r.values[this.rowIndex]=_}else if(this.statement.isReturning){let _=e.readUB4(),o=Array(_).fill(null);for(let a=0;a<_;a++)o[a]=this.processColumnData(e,r,a);r.values[this.rowIndex]=o}else this.isDuplicateData(s)?(this.rowIndex===0&&r.outConverter?t=r.lastRawValue:t=r.values[this.statement.lastRowIndex],r.values[this.rowIndex]=t):(t=this.processColumnData(e,r,this.rowIndex),r.values[this.rowIndex]=t);this.rowIndex++,this.inFetch&&(this.statement.lastRowIndex=this.rowIndex-1,this.statement.bufferRowCount++,this.bitVector=null)}processIOVector(e){let t;e.skipUB1();let s=e.readUB2(),_=e.readUB4()*256+s;e.skipUB4(),e.skipUB2(),t=e.readUB2(),t>0&&e.skipBytes(t),t=e.readUB2(),t>0&&e.skipBytes(t),this.outVariables=[];for(let o=0;o<_;o++){let a=this.statement.bindInfoList[o];a.bindDir=e.readUInt8(),a.bindDir!==I.TNS_BIND_DIR_INPUT&&this.outVariables.push(a.bindVar)}}processColumnData(e,t){let s=t.type,r=s._oraTypeNum,_=s._csfrm,o=t.maxSize,a=null;if(o===0&&r!==I.TNS_DATA_TYPE_LONG&&r!==I.TNS_DATA_TYPE_LONG_RAW&&r!==I.TNS_DATA_TYPE_UROWID)a=null;else if(r===I.TNS_DATA_TYPE_VARCHAR||r===I.TNS_DATA_TYPE_CHAR||r===I.TNS_DATA_TYPE_LONG)_===I.CSFRM_NCHAR&&e.caps.checkNCharsetId(),a=e.readStr(_);else if(r===I.TNS_DATA_TYPE_RAW||r===I.TNS_DATA_TYPE_LONG_RAW)a=e.readBytesWithLength(),a!==null&&(a=Xt.from(a));else if(r===I.TNS_DATA_TYPE_NUMBER)a=e.readOracleNumber(),!this.inFetch&&a!==null&&(a=parseFloat(a));else if(r===I.TNS_DATA_TYPE_DATE||r===I.TNS_DATA_TYPE_TIMESTAMP||r===I.TNS_DATA_TYPE_TIMESTAMP_LTZ||r===I.TNS_DATA_TYPE_TIMESTAMP_TZ){let c=r===I.TNS_DATA_TYPE_DATE||r===I.TNS_DATA_TYPE_TIMESTAMP;a=e.readOracleDate(c)}else if(r===I.TNS_DATA_TYPE_ROWID)if(!this.inFetch)a=e.readStr(I.CSFRM_IMPLICIT);else{let c=e.readUInt8();if(yl(c))a=null;else{let N=e.readRowID();a=Ll.encodeRowID(N)}}else if(r===I.TNS_DATA_TYPE_UROWID)this.inFetch?a=e.readURowID():a=e.readStr(I.CSFRM_IMPLICIT);else if(r===I.TNS_DATA_TYPE_BINARY_DOUBLE)a=e.readBinaryDouble();else if(r===I.TNS_DATA_TYPE_BINARY_FLOAT)a=e.readBinaryFloat();else if(r===I.TNS_DATA_TYPE_BINARY_INTEGER)a=e.readOracleNumber(),a!==null&&(a=parseFloat(a));else if(r===I.TNS_DATA_TYPE_CURSOR){let c=e.readUInt8();yl(c)?a=null:(a=this.createCursorFromDescribe(e),a.statement.cursorId=e.readUB2(),a.statement.cursorId===0&&t.dir!==I.BIND_IN&&(this.options.nullifyInvalidCursor?a=null:Ft.throwErr(Ft.ERR_INVALID_REF_CURSOR)))}else if(r===I.TNS_DATA_TYPE_BOOLEAN)a=e.readBool();else if(r===I.TNS_DATA_TYPE_CLOB||r===I.TNS_DATA_TYPE_BLOB){if(e.readUB4()>0){a=new Vu;let N=e.readUB8(),E=e.readUB4(),P=Xt.from(e.readBytesWithLength());a.init(this.connection,P,s,N,E)}}else if(r===I.TNS_DATA_TYPE_JSON)a=e.readOson();else if(r===I.TNS_DATA_TYPE_INT_NAMED){let c=e.readDbObject();if(c.packedData){let N=t.fetchInfo?t.fetchInfo.dbTypeClass:t.typeClass;a=new Mu(N,c.packedData),a.toid=c.toid,a.oid=c.oid}}else Ft.throwErr(Ft.ERR_UNSUPPORTED_DATA_TYPE,s.num,t.columnNum);if(this.inFetch)(r===I.TNS_DATA_TYPE_LONG||r===I.TNS_DATA_TYPE_LONG_RAW||t.maxSize>e.caps.maxStringSize)&&(e.skipSB4(),e.skipUB4());else{let c=e.readSB4();c<0&&r===I.TNS_DATA_TYPE_BOOLEAN?a=null:c!==0&&a!==null&&Ft.throwErr(Ft.ERR_INSUFFICIENT_BUFFER_FOR_BINDS)}return a}processReturnParameter(e){let t=0,s,r=e.readUB2();for(let o=0;o<r;o++)e.skipUB4();let _=e.readUB2();_>0&&e.skipBytes(_),r=e.readUB2();for(let o=0;o<r;o++)_=e.readUB2(),_>0&&(s=e.readStr(I.CSFRM_IMPLICIT)),_=e.readUB2(),_>0&&e.skipBytesChunked(),t=e.readUB2(),t===I.TNS_KEYWORD_NUM_CURRENT_SCHEMA?this.connection.currentSchema=s:t===I.TNS_KEYWORD_NUM_EDITION&&(this.connection._edition=s);if(_=e.readUB2(),_>0&&e.skip(_),this.arrayDmlRowCounts){let o=e.readUB4(),a=this.options.dmlRowCounts=[];for(let c=0;c<o;c++){let N=e.readUB8();a.push(N)}}}process(e){this.bitVector=this.savedBitVector,super.process(e)}savePoint(e){this.savedBitVector=this.bitVector,super.savePoint(e)}async postProcess(){if(this.outVariables)for(let e of this.outVariables)if(e.isArray)for(let t=0;t<e.numElementsInArray;t++)e.outConverter&&(e.values[0][t]=await e.outConverter(e.values[0][t]));else e.outConverter&&(e.values[0]=await e.outConverter(e.values[0]));await this.connection._populatePartialDbObjectTypes();for(let e of this.resultSetsToSetup){e._setup(this.options,e.metadata);for(let t of e.statement.queryVars)(t.type===ue.DB_TYPE_CLOB||t.type===ue.DB_TYPE_NCLOB||t.type===ue.DB_TYPE_BLOB||t.type===ue.DB_TYPE_JSON)&&(t.type!==t.fetchInfo.fetchType&&(t.type=t.fetchInfo.fetchType,t.maxSize=I.TNS_MAX_LONG_LENGTH),e.statement.requiresDefine=!0,e.statement.noPrefetch=!0)}}preProcess(){if(this.statement.isReturning&&!this.parseOnly){this.outVariables=[];for(let e of this.statement.bindInfoList)e.isReturnBind&&this.outVariables.push(e.bindVar)}if(this.statement.isQuery&&(this.inFetch=!0,this.statement.queryVars)){this.outVariables=[];for(let e=0;e<this.statement.queryVars.length;e++)this.outVariables.push(this.statement.queryVars[e])}}processBitVector(e){this.numColumnsSent=e.readUB2();let t=Math.floor(this.statement.numQueryVars/8);this.statement.numQueryVars%8>0&&(t+=1),this.getBitVector(e,t)}getBitVector(e,t){this.bitVector=Xt.from(e.readBytes(t))}processBindParams(e,t){let s=[],r=[];for(let _ of t)_.isReturnBind||r.push(_),s.push(_.bindVar);return this.writeColumnMetadata(e,s),r}writeColumnMetadata(e,t){for(let s of t){let r=s.type._oraTypeNum,_=s.maxSize||s.type._bufferSizeFactor,o=0;s.type._csfrm===I.CSFRM_NCHAR&&(_*=s.type._bufferSizeFactor),[I.TNS_DATA_TYPE_ROWID,I.TNS_DATA_TYPE_UROWID].includes(r)&&(r=I.TNS_DATA_TYPE_VARCHAR,_=I.TNS_MAX_UROWID_LENGTH);let a=I.TNS_BIND_USE_INDICATORS;s.isArray&&(a|=I.TNS_BIND_ARRAY);let c=0;if(s.type===ue.DB_TYPE_BLOB||s.type===ue.DB_TYPE_CLOB||s.type===ue.DB_TYPE_NCLOB?c=I.TNS_LOB_PREFETCH_FLAG:s.type===ue.DB_TYPE_JSON&&(c=I.TNS_LOB_PREFETCH_FLAG,_=o=I.TNS_JSON_MAX_LENGTH),e.writeUInt8(r),e.writeUInt8(a),e.writeUInt8(0),e.writeUInt8(0),_>e.caps.maxStringSize?e.writeUB4(I.TNS_MAX_LONG_LENGTH):e.writeUB4(_),s.isArray?e.writeUB4(s.maxArraySize):e.writeUB4(0),e.writeUB4(c),s.objType){let N=s.objType;e.writeUB4(N.oid.length),e.writeBytesWithLength(N.oid),e.writeUB4(N.version)}else e.writeUB4(0),e.writeUB4(0);s.type._csfrm!==0?e.writeUB4(I.TNS_CHARSET_UTF8):e.writeUB4(0),e.writeUInt8(s.type._csfrm),e.writeUB4(o),e.caps.ttcFieldVersion>=I.TNS_CCAP_FIELD_VERSION_12_2&&e.writeUB4(0)}}writeBindParamsRow(e,t,s){let r=this.offset,_=!1;for(let o of t){if(o.isReturnBind)continue;let a=o.bindVar;if(a.isArray){let c=a.values.length;e.writeUB4(c);for(let N=0;N<c;N++)this.writeBindParamsColumn(e,a,a.values[N])}else a.maxSize>e.caps.maxStringSize?_=!0:this.writeBindParamsColumn(e,a,a.values[s+r])}if(_)for(let o of t){if(o.isReturnBind)continue;let a=o.bindVar;a.maxSize>e.caps.maxStringSize&&this.writeBindParamsColumn(e,a,a.values[s+r])}}writeBindParamsColumn(e,t,s){let r=t.type._oraTypeNum,_;if(s==null&&r!==I.TNS_DATA_TYPE_CURSOR&&r!==I.TNS_DATA_TYPE_JSON)r===I.TNS_DATA_TYPE_BOOLEAN?(e.writeUInt8(I.TNS_ESCAPE_CHAR),e.writeUInt8(1)):r===I.TNS_DATA_TYPE_INT_NAMED?(e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(I.TNS_OBJ_TOP_LEVEL)):e.writeUInt8(0);else if(r===I.TNS_DATA_TYPE_NUMBER||r===I.TNS_DATA_TYPE_BINARY_INTEGER)typeof s=="boolean"?_=s?"1":"0":_=s.toString(),e.writeOracleNumber(_);else if(r===I.TNS_DATA_TYPE_VARCHAR||r===I.TNS_DATA_TYPE_CHAR||r===I.TNS_DATA_TYPE_LONG||r===I.TNS_DATA_TYPE_RAW||r===I.TNS_DATA_TYPE_LONG_RAW)t.type._csfrm===I.CSFRM_NCHAR?(e.caps.checkNCharsetId(),s=Xt.from(s,I.TNS_ENCODING_UTF16).swap16()):s=Xt.from(s),e.writeBytesWithLength(s);else if(r===I.TNS_DATA_TYPE_DATE||r===I.TNS_DATA_TYPE_TIMESTAMP||r===I.TNS_DATA_TYPE_TIMESTAMP_TZ||r===I.TNS_DATA_TYPE_TIMESTAMP_LTZ)e.writeOracleDate(s,t.type);else if(r===I.TNS_DATA_TYPE_BINARY_DOUBLE)e.writeBinaryDouble(s);else if(r===I.TNS_DATA_TYPE_BINARY_FLOAT)e.writeBinaryFloat(s);else if(r===I.TNS_DATA_TYPE_CURSOR){let o=s;s||(o=this.connection._createResultSet()),o.statement.cursorId===0?(e.writeUInt8(1),e.writeUInt8(0)):(e.writeUB4(1),e.writeUB4(o.statement.cursorId))}else if(r===I.TNS_DATA_TYPE_BOOLEAN)s?(e.writeUInt8(2),e.writeUInt16BE(257)):e.writeUInt16BE(256);else if(r===I.TNS_DATA_TYPE_CLOB||r===I.TNS_DATA_TYPE_BLOB)e.writeUB4(s._locator.length),e.writeBytesWithLength(s._locator);else if([I.TNS_DATA_TYPE_ROWID,I.TNS_DATA_TYPE_UROWID].includes(r))e.writeBytesWithLength(Xt.from(s));else if(r===I.TNS_DATA_TYPE_JSON)e.writeOson(s);else if(r===I.TNS_DATA_TYPE_INT_NAMED)e.writeDbObject(s);else{let o=`Binding data of type ${t.type}`;Ft.throwErr(Ft.ERR_NOT_IMPLEMENTED,o)}}createCursorFromDescribe(e){let t=this.connection._createResultSet(this.options);return t.options.moreRowsToFetch=!0,t.statement.isQuery=!0,t.statement.requiresFullExecute=!0,this.processDescribeInfo(e,t),t}processImplicitResultSet(e){this.options.implicitResultSet=[];let t=e.readUB4();for(let s=0;s<t;s++){let r=e.readUInt8();e.skipBytes(r);let _=this.createCursorFromDescribe(e);_.statement.cursorId=e.readUB2(),this.options.implicitResultSet.push(_)}}};T(y_,"MessageWithData");var L_=y_,yl=T(i=>i===0||i===I.TNS_NULL_LENGTH_INDICATOR,"isNullLength");Yl.exports=L_});var w_=m((HD,Ul)=>{"use strict";var xu=Y_(),re=ae(),Bl=U(),U_=class U_ extends xu{constructor(e,t,s,r){super(e,t,s),!r&&t.isQuery&&(r=e._createResultSet(s,t)),this.resultSet=r,this.functionCode=re.TNS_FUNC_EXECUTE,this.bindParams=void 0,this.currentRow=0}writeExecuteMessage(e){let t=0,s=0,r=0,_=1,o=this.statement,a=o.bindInfoList;if(!o.requiresDefine&&!this.parseOnly&&a&&(r=a.length),o.requiresDefine?t|=re.TNS_EXEC_OPTION_DEFINE:!this.parseOnly&&o.sql&&(s=re.TNS_EXEC_OPTION_IMPLICIT_RESULTSET,t|=re.TNS_EXEC_OPTION_EXECUTE),(o.cursorId===0||o.isDdl)&&(t|=re.TNS_EXEC_OPTION_PARSE),o.isQuery&&(this.parseOnly?t|=re.TNS_EXEC_OPTION_DESCRIBE:(o.cursorId===0||o.requiresDefine?_=this.options.prefetchRows:_=this.options.fetchArraySize,_>0&&!o.noPrefetch&&(t|=re.TNS_EXEC_OPTION_FETCH))),!o.isPlSql&&!this.parseOnly?t|=re.TNS_EXEC_OPTION_NOT_PLSQL:o.isPlSql&&r>0&&(t|=re.TNS_EXEC_OPTION_PLSQL_BIND),r>0&&(t|=re.TNS_EXEC_OPTION_BIND),this.batchErrors&&(t|=re.TNS_EXEC_OPTION_BATCH_ERRORS),this.arrayDmlRowCounts&&(s=re.TNS_EXEC_OPTION_DML_ROWCOUNTS),this.options.autoCommit&&(t|=re.TNS_EXEC_OPTION_COMMIT),this.writePiggybacks(e),this.writeFunctionHeader(e),e.writeUB4(t),e.writeUB4(o.cursorId),o.cursorId===0||o.isDdl?(e.writeUInt8(1),e.writeUB4(o.sqlLength)):(e.writeUInt8(0),e.writeUB4(0)),e.writeUInt8(1),e.writeUB4(13),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(_),e.writeUB4(re.TNS_MAX_LONG_LENGTH),r===0?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(r)),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),o.requiresDefine?(e.writeUInt8(1),e.writeUB4(this.statement.queryVars.length)):(e.writeUInt8(0),e.writeUB4(0)),e.writeUB4(0),e.writeUInt8(0),e.writeUInt8(1),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUB4(0),this.arrayDmlRowCounts?(e.writeUInt8(1),e.writeUB4(this.numExecs),e.writeUInt8(1)):(e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0)),e.caps.ttcFieldVersion>=re.TNS_CCAP_FIELD_VERSION_12_2&&(e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.caps.ttcFieldVersion>=re.TNS_CCAP_FIELD_VERSION_12_2_EXT1&&(e.writeUInt8(0),e.writeUB4(0))),o.cursorId===0||o.isDdl?o.sql?(e.writeBytesWithLength(o.sqlBytes),e.writeUB4(1)):Bl.throwErr(Bl.ERR_INVALID_REF_CURSOR):e.writeUB4(0),o.isQuery?o.cursorId===0?e.writeUB4(0):e.writeUB4(_):e.writeUB4(this.numExecs),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(o.isQuery?1:0),e.writeUB4(0),e.writeUB4(s),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),o.requiresDefine)this.writeColumnMetadata(e,this.statement.queryVars);else if(r>0)return this.processBindParams(e,a)}writeReExecuteMessage(e){let t=this.statement,s=t.bindInfoList,r=0,_=0,o;if(s!==void 0){t.isQuery||(this.outVariables=[],s.forEach(c=>{c.bindDir!==re.TNS_BIND_DIR_INPUT&&this.outVariables.push(c.bindVar)}));let a=[];s.forEach(c=>{c.bindDir!==re.TNS_BIND_DIR_OUTPUT&&!c.isReturnBind&&a.push(c)}),s=a}return this.functionCode===re.TNS_FUNC_REEXECUTE_AND_FETCH?(r|=re.TNS_EXEC_OPTION_EXECUTE,o=this.options.prefetchRows):(this.options.autoCommit&&(_|=re.TNS_EXEC_OPTION_COMMIT_REEXECUTE),o=this.numExecs),this.writePiggybacks(e),this.writeFunctionHeader(e),e.writeUB4(t.cursorId),e.writeUB4(o),e.writeUB4(r),e.writeUB4(_),s}encode(e){if(this.currentRow===0){let t=this.statement;t.cursorId!==0&&!t.requiresFullExecute&&!this.parseOnly&&!t.requiresDefine&&!t.isDdl&&!this.batchErrors?(t.isQuery&&!t.requiresDefine&&!t.noPrefetch&&this.options.prefetchRows>0?this.functionCode=re.TNS_FUNC_REEXECUTE_AND_FETCH:this.functionCode=re.TNS_FUNC_REEXECUTE,this.bindParams=this.writeReExecuteMessage(e)):(this.functionCode=re.TNS_FUNC_EXECUTE,this.bindParams=this.writeExecuteMessage(e))}if(this.bindParams&&this.bindParams.length>0){let t=e.nsi.ntAdapter;for(;this.currentRow<this.numExecs;)if(e.writeUInt8(re.TNS_MSG_TYPE_ROW_DATA),this.writeBindParamsRow(e,this.bindParams,this.currentRow),this.currentRow++,this.currentRow<this.numExecs&&t.shouldPauseWrite())return!0}this.currentRow=0,this.bindParams=void 0}};T(U_,"ExecuteMessage");var B_=U_;Ul.exports=B_});var x_=m((vD,wl)=>{"use strict";var Fu=ae(),ku=Y_(),V_=class V_ extends ku{constructor(e,t,s,r){super(e,t,s),this.resultSet=r,this.functionCode=Fu.TNS_FUNC_FETCH}encode(e){this.writeFunctionHeader(e),e.writeUB4(this.statement.cursorId),e.writeUB4(this.options.fetchArraySize)}};T(V_,"FetchMessage");var M_=V_;wl.exports=M_});var b_=m((WD,Ml)=>{"use strict";var bu=on(),Gu=w_(),Hu=x_(),k_=class k_ extends bu{async _fetchMoreRows(e){let t=this.statement.requiresFullExecute?Gu:Hu,s=new t(this.connection,this.statement,e,this);await this.connection._protocol._processMessage(s),this.statement.requiresFullExecute=!1}_resultSetNew(e,t,s){this.connection=e,this.statement=t,this._nestedCursorIndices=[],this.options=s,this.prefetchRowsProcessed=!1,this.statement.bufferRowIndex=0}close(){this.connection._returnStatement(this.statement)}_processRows(e){let t=[],s=this.statement.bufferRowIndex;for(let r=s;r<s+e;r++){let _=[];for(let o=0;o<this.statement.numQueryVars;o++)_.push(this.statement.queryVars[o].values[r]);t.push(_)}return this.statement.bufferRowIndex+=e,this.statement.bufferRowIndex===this.statement.bufferRowCount&&(this.statement.bufferRowCount=0,this.statement.bufferRowIndex=0),t}async getRows(e,t){if(t.fetchArraySize=e||this.options.fetchArraySize,t.prefetchRows=this.options.prefetchRows,this.statement.bufferRowCount-this.statement.bufferRowIndex>=t.fetchArraySize)return this._processRows(t.fetchArraySize);{t.fetchArraySize=t.fetchArraySize-(this.statement.bufferRowCount-this.statement.bufferRowIndex);let r=this.statement.bufferRowCount;if(this.statement.moreRowsToFetch&&t.fetchArraySize>0&&await this._fetchMoreRows(t),t.fetchArraySize=e||this.options.fetchArraySize,r===this.statement.bufferRowCount){let _=this.statement.bufferRowCount-this.statement.bufferRowIndex;return this.statement.bufferRowCount=0,_>0?this._processRows(_):[]}}let s=this.statement.bufferRowCount-this.statement.bufferRowIndex;return this._processRows(s)}};T(k_,"ThinResultSetImpl");var F_=k_;Ml.exports=F_});var kl=m((XD,Fl)=>{"use strict";var{Buffer:Vl}=require("buffer"),Y=ae(),xl=U(),H_=class H_{constructor(e){this.protocolVersion=e,this.ttcFieldVersion=Y.TNS_CCAP_FIELD_VERSION_MAX,this.supports12cLogon=!0,this.supportsOob=!1,this.nCharsetId=Y.TNS_CHARSET_UTF16,this.compileCaps=Vl.alloc(Y.TNS_CCAP_MAX),this.runtimeCaps=Vl.alloc(Y.TNS_RCAP_MAX),this.initCompileCaps(),this.initRuntimeCaps(),this.maxStringSize=0}adjustForServerCompileCaps(e){e[Y.TNS_CCAP_FIELD_VERSION]<this.ttcFieldVersion&&(this.ttcFieldVersion=e[Y.TNS_CCAP_FIELD_VERSION],this.compileCaps[Y.TNS_CCAP_FIELD_VERSION]=this.ttcFieldVersion)}adjustForServerRuntimeCaps(e){e[Y.TNS_RCAP_TTC]&Y.TNS_RCAP_TTC_32K?this.maxStringSize=32767:this.maxStringSize=4e3}initCompileCaps(){this.compileCaps[Y.TNS_CCAP_SQL_VERSION]=Y.TNS_CCAP_SQL_VERSION_MAX,this.compileCaps[Y.TNS_CCAP_LOGON_TYPES]=Y.TNS_CCAP_O5LOGON|Y.TNS_CCAP_O5LOGON_NP|Y.TNS_CCAP_O7LOGON|Y.TNS_CCAP_O8LOGON_LONG_IDENTIFIER|Y.TNS_CCAP_O9LOGON_LONG_PASSWORD,this.compileCaps[Y.TNS_CCAP_FIELD_VERSION]=this.ttcFieldVersion,this.compileCaps[Y.TNS_CCAP_SERVER_DEFINE_CONV]=1,this.compileCaps[Y.TNS_CCAP_TTC1]=Y.TNS_CCAP_FAST_BVEC|Y.TNS_CCAP_END_OF_CALL_STATUS|Y.TNS_CCAP_IND_RCD,this.compileCaps[Y.TNS_CCAP_OCI1]=Y.TNS_CCAP_FAST_SESSION_PROPAGATE|Y.TNS_CCAP_APP_CTX_PIGGYBACK,this.compileCaps[Y.TNS_CCAP_TDS_VERSION]=Y.TNS_CCAP_TDS_VERSION_MAX,this.compileCaps[Y.TNS_CCAP_RPC_VERSION]=Y.TNS_CCAP_RPC_VERSION_MAX,this.compileCaps[Y.TNS_CCAP_RPC_SIG]=Y.TNS_CCAP_RPC_SIG_VALUE,this.compileCaps[Y.TNS_CCAP_DBF_VERSION]=Y.TNS_CCAP_DBF_VERSION_MAX,this.compileCaps[Y.TNS_CCAP_LOB]=Y.TNS_CCAP_LOB_UB8_SIZE|Y.TNS_CCAP_LOB_ENCS|Y.TNS_CCAP_LOB_PREFETCH,this.compileCaps[Y.TNS_CCAP_UB2_DTY]=1,this.compileCaps[Y.TNS_CCAP_LOB2]=Y.TNS_CCAP_LOB2_QUASI|Y.TNS_CCAP_LOB2_2GB_PREFETCH,this.compileCaps[Y.TNS_CCAP_TTC3]=Y.TNS_CCAP_IMPLICIT_RESULTS|Y.TNS_CCAP_BIG_CHUNK_CLR|Y.TNS_CCAP_KEEP_OUT_ORDER,this.compileCaps[Y.TNS_CCAP_TTC2]=Y.TNS_CCAP_ZLNP,this.compileCaps[Y.TNS_CCAP_OCI2]=Y.TNS_CCAP_DRCP,this.compileCaps[Y.TNS_CCAP_CLIENT_FN]=Y.TNS_CCAP_CLIENT_FN_MAX,this.compileCaps[Y.TNS_CCAP_TTC4]=Y.TNS_CCAP_INBAND_NOTIFICATION}initRuntimeCaps(){this.runtimeCaps[Y.TNS_RCAP_COMPAT]=Y.TNS_RCAP_COMPAT_81,this.runtimeCaps[Y.TNS_RCAP_TTC]=Y.TNS_RCAP_TTC_ZERO_COPY|Y.TNS_RCAP_TTC_32K}checkNCharsetId(){this.nCharsetId!==Y.TNS_CHARSET_UTF16&&xl.throwErr(xl.ERR_NCHAR_CS_NOT_SUPPORTED,this.nCharsetId)}};T(H_,"Capabilities");var G_=H_;Fl.exports=G_});var Hl=m((jD,Gl)=>{"use strict";var{BaseBuffer:qu,GrowableBuffer:X_}=Us(),{Buffer:Ms}=require("buffer"),w=ae(),kt=U(),bl=He(),vu=require("util"),Q_=class Q_ extends qu{_decodeContainerNode(e){let t,s,r,_=this._getNumChildren(e),o=(e&64)===0;if(_===void 0){let a=this._getOffset(e);s=this.pos,this.pos=this.treeSegPos+a;let c=this.readUInt8();_=this._getNumChildren(c),t=o?{}:new Array(_),r=this.pos}else o?(t={},r=this.pos,s=this.pos+this.fieldIdLength*_):(t=new Array(_),s=this.pos);for(let a=0;a<_;a++){let c;if(o){let E;this.fieldIdLength===1?E=this.buf[r]:this.fieldIdLength==2?E=this.buf.readUInt16BE(r):E=this.buf.readUInt32BE(r),c=this.fieldNames[E-1],r+=this.fieldIdLength}this.pos=s;let N=this._getOffset(e);s=this.pos,this.pos=this.treeSegPos+N,o?t[c]=this._decodeNode():t[a]=this._decodeNode()}return t}_decodeNode(){let e=this.readUInt8();if(e&128)return this._decodeContainerNode(e);if(e===w.TNS_JSON_TYPE_NULL)return null;if(e===w.TNS_JSON_TYPE_TRUE)return!0;if(e===w.TNS_JSON_TYPE_FALSE)return!1;if(e===w.TNS_JSON_TYPE_DATE||e===w.TNS_JSON_TYPE_TIMESTAMP7)return this.parseOracleDate(this.readBytes(7));if(e===w.TNS_JSON_TYPE_TIMESTAMP)return this.parseOracleDate(this.readBytes(11));if(e===w.TNS_JSON_TYPE_TIMESTAMP_TZ)return this.parseOracleDate(this.readBytes(13));if(e===w.TNS_JSON_TYPE_BINARY_FLOAT)return this.parseBinaryFloat(this.readBytes(4));if(e===w.TNS_JSON_TYPE_BINARY_DOUBLE)return this.parseBinaryDouble(this.readBytes(8));if(e===w.TNS_JSON_TYPE_STRING_LENGTH_UINT8)return this.readBytes(this.readUInt8()).toString();if(e===w.TNS_JSON_TYPE_STRING_LENGTH_UINT16)return this.readBytes(this.readUInt16BE()).toString();if(e===w.TNS_JSON_TYPE_STRING_LENGTH_UINT32)return this.readBytes(this.readUInt32BE()).toString();if(e===w.TNS_JSON_TYPE_NUMBER_LENGTH_UINT8)return parseFloat(this.readOracleNumber());if(e===w.TNS_JSON_TYPE_BINARY_LENGTH_UINT16)return Ms.from(this.readBytes(this.readUInt16BE()));if(e===w.TNS_JSON_TYPE_BINARY_LENGTH_UINT32)return Ms.from(this.readBytes(this.readUInt32BE()));let t=e&240;if(t===32||t===96){let s=e&15;return parseFloat(this.parseOracleNumber(this.readBytes(s+1)))}else if(t===64||t===80){let s=e&15;return parseFloat(this.parseOracleNumber(this.readBytes(s)))}else if(!(e&224))return e===0?"":this.readBytes(e).toString();kt.throwErr(kt.ERR_UNSUPPORTED_DATA_TYPE_IN_JSON,e)}_getNumChildren(e){let t=e&24;if(t===0)return this.readUInt8();if(t===8)return this.readUInt16BE();if(t===16)return this.readUInt32BE()}_getOffset(e){return e&32?this.readUInt32BE():this.readUInt16BE()}decode(){let e=this.readBytes(3);(e[0]!==w.TNS_JSON_MAGIC_BYTE_1||e[1]!==w.TNS_JSON_MAGIC_BYTE_2||e[2]!==w.TNS_JSON_MAGIC_BYTE_3)&&kt.throwErr(kt.ERR_UNEXPECTED_DATA,e.toString("hex"));let t=this.readUInt8();t!==w.TNS_JSON_VERSION&&kt.throwErr(kt.ERR_OSON_VERSION_NOT_SUPPORTED,t);let s=this.readUInt16BE();if(s&w.TNS_JSON_FLAG_IS_SCALAR)return s&w.TNS_JSON_FLAG_TREE_SEG_UINT32?this.skipBytes(4):this.skipBytes(2),this._decodeNode();let r;s&w.TNS_JSON_FLAG_NUM_FNAMES_UINT32?(r=this.readUInt32BE(),this.fieldIdLength=4):s&w.TNS_JSON_FLAG_NUM_FNAMES_UINT16?(r=this.readUInt16BE(),this.fieldIdLength=2):(r=this.readUInt8(),this.fieldIdLength=1);let _,o;s&w.TNS_JSON_FLAG_FNAMES_SEG_UINT32?(_=4,o=this.readUInt32BE()):(_=2,o=this.readUInt16BE()),s&w.TNS_JSON_FLAG_TREE_SEG_UINT32?this.skipBytes(4):this.skipBytes(2),this.skipBytes(2);let a;s&w.TNS_JSON_FLAG_HASH_ID_UINT8?a=1:s&w.TNS_JSON_FLAG_HASH_ID_UINT16?a=2:a=4,this.skipBytes(r*a);let c=this.pos;this.skipBytes(r*_);let N=this.pos;this.skipBytes(o),this.fieldNames=new Array(r);for(let E=0;E<r;E++){let P=N;s&w.TNS_JSON_FLAG_FNAMES_SEG_UINT32?(P+=this.buf.readUInt32BE(c),c+=4):(P+=this.buf.readUInt16BE(c),c+=2);let f=this.buf[P],u=this.buf.subarray(P+1,P+f+1).toString();this.fieldNames[E]=u}return this.treeSegPos=this.pos,this._decodeNode()}};T(Q_,"OsonDecoder");var q_=Q_,j_=class j_{constructor(e){this.name=e,this.nameBytes=Ms.from(e),this.nameBytes.length>255&&kt.throwErr(kt.ERR_OSON_FIELD_NAME_LIMITATION),this.hashId=BigInt(2166136261);let t=BigInt(16777619),s=BigInt(4294967295);for(let r=0;r<this.nameBytes.length;r++){let _=BigInt(this.nameBytes[r]);this.hashId=(this.hashId^_)*t&s}this.hashId=Number(this.hashId)&255}};T(j_,"OsonFieldName");var v_=j_,J_=class J_ extends X_{constructor(e){super(),this.fieldNamesMap=new Map,this.fieldNames=[],this._examineNode(e),this._processFieldNames()}_examineNode(e){if(Array.isArray(e))for(let t of e)this._examineNode(t);else if(e&&Array.isArray(e.fields))for(let t=0;t<e.fields.length;t++){let s=e.fields[t],r=e.values[t];if(!this.fieldNamesMap.has(s)){let _=new v_(s);this.fieldNamesMap.set(s,_),this.fieldNames.push(_),_.offset=this.pos,this.writeUInt8(_.nameBytes.length),this.writeBytes(_.nameBytes)}this._examineNode(r)}}_processFieldNames(){this.fieldNames.sort((e,t)=>e.hashId<t.hashId?-1:e.hashId>t.hashId?1:e.nameBytes.length<t.nameBytes.length?-1:e.nameBytes.length>t.nameBytes.length?1:e.name<t.name?-1:e.name>t.name?1:0);for(let e=0;e<this.fieldNames.length;e++)this.fieldNames[e].fieldId=e+1;this.fieldNames.length<256?this.fieldIdSize=1:this.fieldNames.length<65536?this.fieldIdSize=2:this.fieldIdSize=4}};T(J_,"OsonFieldNamesSegment");var K_=J_,Z_=class Z_ extends X_{_encodeArray(e,t){this._encodeContainer(w.TNS_JSON_TYPE_ARRAY,e.length);let s=0,r=this.reserveBytes(e.length*4);for(let _ of e)r.writeUInt32BE(this.pos,s),s+=4,this.encodeNode(_,t)}_encodeContainer(e,t){e|=32,t>65535?e|=16:t>255&&(e|=8),this.writeUInt8(e),t<256?this.writeUInt8(t):t<65536?this.writeUInt16BE(t):this.writeUInt32BE(t)}_encodeObject(e,t){let s=e.values.length;this._encodeContainer(w.TNS_JSON_TYPE_OBJECT,s);let r=0,_=s*t.fieldIdSize,o=this.reserveBytes(s*(t.fieldIdSize+4));for(let a=0;a<e.fields.length;a++){let c=t.fieldNamesMap.get(e.fields[a]);t.fieldIdSize==1?o[r]=c.fieldId:t.fieldIdSize==2?o.writeUInt16BE(c.fieldId,r):o.writeUInt32BE(c.fieldId,r),o.writeUInt32BE(this.pos,_),r+=t.fieldIdSize,_+=4,this.encodeNode(e.values[a],t)}}encodeNode(e,t){if(e==null)this.writeUInt8(w.TNS_JSON_TYPE_NULL);else if(typeof e=="boolean")e?this.writeUInt8(w.TNS_JSON_TYPE_TRUE):this.writeUInt8(w.TNS_JSON_TYPE_FALSE);else if(typeof e=="number")this.writeUInt8(w.TNS_JSON_TYPE_NUMBER_LENGTH_UINT8),this.writeOracleNumber(e.toString());else if(typeof e=="string"){let s=Ms.from(e);s.length<256?(this.writeUInt8(w.TNS_JSON_TYPE_STRING_LENGTH_UINT8),this.writeUInt8(s.length)):s.length<65536?(this.writeUInt8(w.TNS_JSON_TYPE_STRING_LENGTH_UINT16),this.writeUInt16BE(s.length)):(this.writeUInt8(w.TNS_JSON_TYPE_STRING_LENGTH_UINT32),this.writeUInt32BE(s.length)),s.length>0&&this.writeBytes(s)}else vu.isDate(e)?e.getUTCMilliseconds()===0?(this.writeUInt8(w.TNS_JSON_TYPE_TIMESTAMP7),this.writeOracleDate(e,bl.DB_TYPE_DATE,!1)):(this.writeUInt8(w.TNS_JSON_TYPE_TIMESTAMP),this.writeOracleDate(e,bl.DB_TYPE_TIMESTAMP,!1)):Ms.isBuffer(e)?(e.length<65536?(this.writeUInt8(w.TNS_JSON_TYPE_BINARY_LENGTH_UINT16),this.writeUInt16BE(e.length)):(this.writeUInt8(w.TNS_JSON_TYPE_BINARY_LENGTH_UINT32),this.writeUInt32BE(e.length)),this.writeBytes(e)):Array.isArray(e)?this._encodeArray(e,t):this._encodeObject(e,t)}};T(Z_,"OsonTreeSegment");var W_=Z_,$_=class $_ extends X_{encode(e){let t,s=w.TNS_JSON_FLAG_INLINE_LEAF;Array.isArray(e)||e&&Array.isArray(e.fields)?(s|=w.TNS_JSON_FLAG_HASH_ID_UINT8|w.TNS_JSON_FLAG_TINY_NODES_STAT,t=new K_(e),t.fieldNames.length>65535?s|=w.TNS_JSON_FLAG_NUM_FNAMES_UINT32:t.fieldNames.length>255&&(s|=w.TNS_JSON_FLAG_NUM_FNAMES_UINT16),t.pos>65535&&(s|=w.TNS_JSON_FLAG_FNAMES_SEG_UINT32)):s|=w.TNS_JSON_FLAG_IS_SCALAR;let r=new W_;if(r.encodeNode(e,t),r.pos>65535&&(s|=w.TNS_JSON_FLAG_TREE_SEG_UINT32),this.writeUInt8(w.TNS_JSON_MAGIC_BYTE_1),this.writeUInt8(w.TNS_JSON_MAGIC_BYTE_2),this.writeUInt8(w.TNS_JSON_MAGIC_BYTE_3),this.writeUInt8(w.TNS_JSON_VERSION),this.writeUInt16BE(s),t&&(t.fieldNames.length<256?this.writeUInt8(t.fieldNames.length):t.fieldNames.length<65536?this.writeUInt16BE(t.fieldNames.length):this.writeUInt32BE(t.fieldNames.length),t.pos<65536?this.writeUInt16BE(t.pos):this.writeUInt32BE(t.pos)),r.pos<65536?this.writeUInt16BE(r.pos):this.writeUInt32BE(r.pos),t){this.writeUInt16BE(0);for(let _ of t.fieldNames)this.writeUInt8(_.hashId);for(let _ of t.fieldNames)t.pos<65536?this.writeUInt16BE(_.offset):this.writeUInt32BE(_.offset);t.pos>0&&this.writeBytes(t.buf.subarray(0,t.pos))}return this.writeBytes(r.buf.subarray(0,r.pos)),this.buf.subarray(0,this.pos)}};T($_,"OsonEncoder");var z_=$_;Gl.exports={OsonDecoder:q_,OsonEncoder:z_}});var zl=m((ZD,Wl)=>{"use strict";var{BaseBuffer:vl}=Us(),{Buffer:Ct}=require("buffer"),Ot=ae(),Kl=Hl(),ql=Bs(),Ss=Ct.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/","utf8"),ro=class ro{constructor(e){this.allocLen=e;let t=e%Ot.CHUNKED_BYTES_CHUNK_SIZE;t>0&&(this.allocLen+=Ot.CHUNKED_BYTES_CHUNK_SIZE-t),this.buf=Ct.alloc(this.allocLen),this.actualLen=0}};T(ro,"BytesChunk");var Mr=ro,io=class io{constructor(){this.chunks=[]}endChunkedRead(){if(this.chunks.length>1){let t=0;for(let _ of this.chunks)t+=_.actualLen;let s=0,r=new Mr(t);for(let _ of this.chunks)_.buf.copy(r.buf,s,0,_.actualLen),s+=_.actualLen;r.actualLen=t,this.chunks=[r]}let e=this.chunks[0];return e.buf.subarray(0,e.actualLen)}getBuf(e){let t;this.chunks.length>0&&(t=this.chunks[this.chunks.length-1],t.allocLen-t.actualLen<e&&(t=void 0)),t||(t=new Mr(e),this.chunks.push(t));let s=t.buf.subarray(t.actualLen,t.actualLen+e);return t.actualLen+=e,s}startChunkedRead(){this.chunks.length>0&&(this.chunks=this.chunks.splice(0,1),this.chunks[0].actualLen=0)}};T(io,"ChunkedBytesBuffer");var eo=io,no=class no extends vl{constructor(e,t){super(e.sAtts.sdu),this.nsi=e,this.caps=t,this.chunkedBytesBuf=new eo}_readBytesWithLength(e){if(e!==Ot.TNS_LONG_LENGTH_INDICATOR)return this.readBytes(e);for(this.chunkedBytesBuf.startChunkedRead();;){let t=this.readUB4();if(t===0)break;this.readBytes(t,!0)}return this.chunkedBytesBuf.endChunkedRead()}skipBytes(e){this.pos===this.size&&this.receivePacket();let t=this.numBytesLeft();if(e<=t){this.pos+=e;return}for(e-=t;e>0;){this.receivePacket();let s=Math.min(e,this.size-this.pos);this.pos+=s,e-=s}}readBytes(e,t=!1){this.pos===this.size&&this.receivePacket();let s=this.numBytesLeft();if(e<=s){let o;return t?(o=this.chunkedBytesBuf.getBuf(e),this.buf.copy(o,0,this.pos,this.pos+e)):o=this.buf.subarray(this.pos,this.pos+e),this.pos+=e,o}let r;t?r=this.chunkedBytesBuf.getBuf(e):r=Ct.alloc(e);let _=0;for(this.buf.copy(r,_,this.pos,this.pos+s),_+=s,e-=s;e>0;){this.receivePacket();let o=Math.min(e,this.size-this.pos);this.buf.copy(r,_,this.pos,this.pos+o),this.pos+=o,_+=o,e-=o}return r}receivePacket(){if(this.savedPacketPos===this.savedPackets.length){let e=this.nsi.syncRecvPacket();if(!e||this.nsi.isBreak)throw new ql.OutOfPacketsError;this.savedPackets.push(e)}this.startPacket(this.savedPackets[this.savedPacketPos++])}restorePoint(){this.savedPacketPos=0,this.startPacket(this.savedPackets[this.savedPacketPos++]),this.pos=this.savedPos}savePoint(){this.savedPackets?this.savedPackets=this.savedPackets.splice(this.savedPacketPos-1):this.savedPackets=[this.packet],this.savedPacketPos=1,this.savedPos=this.pos}startPacket(e){this.packet=e,this.buf=e.buf,this.pos=10,this.size=e.buf.length,this.packetNum=e.num}async waitForPackets(){let e=await this.nsi.recvPacket();this.savedPackets?this.savedPackets.push(e):(this.savedPackets=[e],this.savedPacketPos=0),this.startPacket(this.savedPackets[this.savedPacketPos++])}readOson(){if(this.readUB4()===0)return null;this.skipUB8(),this.skipUB4();let t=new Kl.OsonDecoder(this.readBytesWithLength());return this.skipBytesChunked(),t.decode()}readURowID(){let e=0,t=1,s=this.readBytesWithLength();if(s===null)return null;s=this.readBytesWithLength();let r=s.length;if(s&&s[0]===1){let c=s.readUInt32BE(1),N=s.readUInt16BE(5),E=s.readUInt32BE(7),P=s.readUInt16BE(11);return ql.encodeRowID({rba:c,partitionID:N,blockNum:E,slotNum:P})}let _=Math.floor(r/3)*4,o=r%3;o===1?_+=1:o===2&&(_+=3);let a=Ct.alloc(_);for(r-=1,a[0]=42,e+=1;r>0;){let c=s[t]>>2;if(a[e]=Ss[c],e+=1,c=(s[t]&3)<<4,r==1){a[e]=Ss[c];break}if(t+=1,c|=(s[t]&240)>>4,a[e]=Ss[c],e+=1,c=(s[t]&15)<<2,r==2){a[e]=Ss[c];break}t+=1,c|=(s[t]&192)>>6,a[e]=Ss[c],e+=1,c=s[t]&63,a[e]=Ss[c],e+=1,t+=1,r-=3}return a.toString("utf-8")}readRowID(){let e=this.readUB4(),t=this.readUB2();this.skipUB1();let s=this.readUB4(),r=this.readUB2();return{rba:e,partitionID:t,blockNum:s,slotNum:r}}skipBytesChunked(){let e=this.readUInt8();if(e!==Ot.TNS_LONG_LENGTH_INDICATOR)this.skipBytes(e);else for(;;){let t=this.readUB4();if(t===0)break;this.skipBytes(t)}}};T(no,"ReadPacket");var to=no,_o=class _o extends vl{constructor(e,t,s){super(e.sAtts.sdu),this.size=this.maxSize,this.isLargeSDU=e.sAtts.version>=Ot.TNS_VERSION_MIN_LARGE_SDU,this.protocol=s,this.packetType=Ot.TNS_PACKET_TYPE_DATA,this.caps=t,this.nsi=e}_grow(){this._sendPacket()}_sendPacket(e=!1){let t=this.pos;this.pos=0,this.isLargeSDU?this.writeUInt32BE(t):(this.writeUInt16BE(t),this.writeUInt16BE(0)),this.writeUInt8(this.packetType),this.writeUInt8(0),this.writeUInt16BE(0);let s=this.buf.subarray(0,t);e||(s=Ct.from(s),this.startPacket()),this.nsi.ntAdapter.send(s)}startPacket(e=0){this.pos=Ot.PACKET_HEADER_SIZE,this.packetType===Ot.TNS_PACKET_TYPE_DATA&&this.writeUInt16BE(e)}startRequest(e,t=0){this.packetType=e,this.startPacket(t)}endRequest(){this.pos>Ot.PACKET_HEADER_SIZE&&this._sendPacket(!0)}writeKeyValue(e,t,s=0){let r=Ct.byteLength(e),_=Ct.byteLength(t);this.writeUB4(r),this.writeBytesWithLength(Ct.from(e)),this.writeUB4(_),_>0&&this.writeBytesWithLength(Ct.from(t)),this.writeUB4(s)}writeOson(e){let s=new Kl.OsonEncoder().encode(e);this.writeQLocator(s.length),this.writeBytesWithLength(s)}writeSeqNum(){this.writeUInt8(this.protocol.sequenceId),this.protocol.sequenceId=(this.protocol.sequenceId+1)%256}};T(_o,"WritePacket");var so=_o;Wl.exports={ReadPacket:to,WritePacket:so}});var Ql=m((em,Xl)=>{"use strict";var Vs=ae(),Ku=kl(),{WritePacket:Wu,ReadPacket:zu}=zl(),Qt=U(),Xu=Bs(),ao=class ao{constructor(e){this._breakInProgress=!1,this.txnInProgress=!1,this.connInProgress=!0,this.nsi=e.nscon,this.sequenceId=1,this.caps=new Ku(e.nscon.sAtts.version),this.writeBuf=new Wu(e.nscon,this.caps,this),this.readBuf=new zu(e.nscon,this.caps),this.callTimeout=0}async _decodeMessage(e){for(e.preProcess(),await this.readBuf.waitForPackets();;){this.nsi.isBreak&&(await this.resetMessage(),delete this.readBuf.savedBuffers,await this.readBuf.waitForPackets());try{e.decode(this.readBuf);break}catch(t){if(t instanceof Xu.OutOfPacketsError){this.nsi.isBreak||(await this.readBuf.waitForPackets(),this.readBuf.restorePoint());continue}throw t}}await e.postProcess()}async _encodeMessage(e){let t=this.nsi.ntAdapter;for(this.writeBuf.startRequest(Vs.TNS_PACKET_TYPE_DATA);e.encode(this.writeBuf);)await t.pauseWrite();this.writeBuf.endRequest()}async _recoverFromError(e,t){try{this.breakMessage(),this._breakInProgress=!1,await this.resetMessage(),await this.readBuf.waitForPackets(),t.decode(this.readBuf)}catch(s){this.nsi.disconnect();let r=Qt.getErr(Qt.ERR_CONNECTION_CLOSED);throw e.message=r.message+`
Error recovery failed: `+s.message+`
Original error: `+e.message,e}}async _processMessage(e){let t,s=!1;try{this.callTimeout>0&&(t=setTimeout(()=>{s=!0,this.breakMessage()},this.callTimeout)),await this._encodeMessage(e),e.messageType!==Vs.TNS_MSG_TYPE_ONEWAY_FN&&await this._decodeMessage(e)}catch(r){throw!this.connInProgress&&r.code!==Qt.ERR_CONNECTION_CLOSED_CODE&&await this._recoverFromError(r,e),r}finally{clearTimeout(t)}if(e.flushOutBinds&&await this.flushOutBindMessage(e),this.txnInProgress=e.callStatus&Vs.TNS_TXN_IN_PROGRESS,e.errorOccurred){s&&Qt.throwErr(Qt.ERR_CALL_TIMEOUT_EXCEEDED,this.callTimeout);let r=new Error(e.errorInfo.message);throw r.offset=e.errorInfo.pos,r.errorNum=e.errorInfo.num,r=Qt.transformErr(r),r.code===Qt.ERR_CONNECTION_CLOSED_CODE&&this.nsi.disconnect(),r}}async flushOutBindMessage(e){this.writeBuf.startRequest(Vs.TNS_PACKET_TYPE_DATA),this.writeBuf.writeUInt8(Vs.TNS_MSG_TYPE_FLUSH_OUT_BINDS),this.writeBuf.endRequest(),await this._decodeMessage(e)}breakMessage(){this._breakInProgress=!0,this.nsi.sendBreak()}async resetMessage(){await this.nsi.reset()}};T(ao,"Protocol");var oo=ao;Xl.exports=oo});var hs=m((sm,jl)=>{jl.exports={NSPTCN:1,NSPTAC:2,NSPTAK:3,NSPTRF:4,NSPTRD:5,NSPTDA:6,NSPTNL:7,NSPTAB:9,NSPTRS:11,NSPTMK:12,NSPTAT:13,NSPTCNL:14,NSPTDD:15,NSPTHI:19,NSPHDLEN:0,NSPHDPSM:2,NSPHDTYP:4,NSPHDFLGS:5,NSPHDHSM:6,NSPSIZHD:8,NSPFSID:1,NSPFRDS:2,NSPFRDR:4,NSPFLSD:32,NO_HEADER_FLAGS:0,NSPFSRN:8,NSPCNVSN:8,NSPCNLOV:10,NSPCNOPT:12,NSPCNSDU:14,NSPCNTDU:16,NSPCNNTC:18,NSPCNTNA:20,NSPCNONE:22,NSPCNLEN:24,NSPCNOFF:26,NSPCNMXC:28,NSPCNFL0:32,NSPCNFL1:33,NSPCNTMO:50,NSPCNTCK:52,NSPCNADL:54,NSPCNAOF:56,NSPCNLSD:58,NSPCNLTD:62,NSPCNCFL:66,NSPCNCFL2:70,NSPCNDAT:74,NSPMXCDATA:230,NSINAWANTED:1,NSINAINTCHG:2,NSINADISABLEDFORCONNECTION:4,NSINANOSERVICES:8,NSINAREQUIRED:16,NSINAAUTHWANTED:32,NSISUPSECRENEG:128,NSGDONTCARE:1,NSGHDX:2,NSGFDX:4,NSGHDRCHKSUM:8,NSGPAKCHKSUM:16,NSGBROKEN:32,NSGUSEVIO:64,NSGOSAUTHOK:128,NSGSENDATTN:512,NSGRECVATTN:1024,NSGNOATTNPR:2048,NSGRAW:4096,TNS_VERSION_DESIRED:319,TNS_VERSION_MINIMUM:300,NSPACVSN:8,NSPACOPT:10,NSPACSDU:12,NSPACTDU:14,NSPACONE:16,NSPACLEN:18,NSPACOFF:20,NSPACFL0:22,NSPACFL1:23,NSPACTMO:24,NSPACTCK:26,NSPACADL:28,NSPACAOF:30,NSPACLSD:32,NSPACLTD:36,NSPACCFL:40,NSPACFL2:41,NSPACV310DAT:32,NSPACV315DAT:41,NSPRFURS:8,NSPRFSRS:9,NSPRFLEN:10,NSPRFDAT:12,NSPACCFON:128,NSPACCFAT:64,NSPACCFNT:2,NSPACOOB:1,NSGPCHKSCMD:16777216,NSPRDLEN:8,NSPRDDAT:10,NSPDAFLG:8,NSPDADAT:10,NSPDAFEOF:64,NSPMKTYP:8,NSPMKODT:9,NSPMKDAT:10,NSPMKTD0:0,NSPMKTD1:1,NSPMKTAT:2,NIQBMARK:1,NIQRMARK:2,NIQIMARK:3,NSPCTLCMD:8,NSPCTLDAT:10,NSPCTL_SERR:8,NSPCTL_CLRATTN:9,NSPDFSDULN:8192,NSPABSSDULN:2097152,NSPMXSDULN:65535,NSPMNSDULN:512,NSPDFTDULN:2097152,NSPMXTDULN:2097152,NSPMNTDULN:255,NSFIMM:64,DISABLE_OOB_STR:"DISABLE_OOB",EXPIRE_TIME:"EXPIRE_TIME",PEM_WALLET_FILE_NAME:"ewallet.pem",NT_MOREDATA:1,NS_MOREDATA:2,SVCNAME:3,SERVERTYPE:4,REMOTEADDR:5,HEALTHCHECK:6,CONNCLASS:7,PURITY:8,SID:9,NSNOBLOCK:1}});var $l=m((rm,Zl)=>{"use strict";var Vr=require("buffer").Buffer,O=hs(),bt=U(),Qu=230,Jl=74;function ju(i,e,t=0){this.connectData=i,this.connectDataLen=i.length,this.overflow=!1;let s,r;this.connectDataLen<=Qu?s=Jl+this.connectDataLen:(s=Jl,this.overflow=!0),this.buf=Vr.allocUnsafe(s).fill(0),this.buf.writeUInt16BE(s,O.NSPHDLEN),this.buf.writeUInt8(t,O.NSPHDFLGS),this.buf.writeUInt8(O.NSPTCN,O.NSPHDTYP),this.buf.writeUInt16BE(O.TNS_VERSION_DESIRED,O.NSPCNVSN),this.buf.writeUInt16BE(O.TNS_VERSION_MINIMUM,O.NSPCNLOV),r=O.NSGDONTCARE,this.buf.writeUInt16BE(r,O.NSPCNOPT),e.sdu>O.NSPMXSDULN?this.buf.writeUInt16BE(O.NSPMXSDULN,O.NSPCNSDU):this.buf.writeUInt16BE(e.sdu,O.NSPCNSDU),e.tdu>O.NSPMXSDULN?this.buf.writeUInt16BE(O.NSPMXSDULN,O.NSPCNTDU):this.buf.writeUInt16BE(e.tdu,O.NSPCNTDU),this.buf.writeUInt16BE(e.ntCha,O.NSPCNNTC),this.buf.writeUInt16BE(1,O.NSPCNONE),this.buf.writeUInt16BE(this.connectDataLen,O.NSPCNLEN),this.buf.writeUInt16BE(O.NSPCNDAT,O.NSPCNOFF),this.buf.writeUInt8(O.NSISUPSECRENEG|O.NSINADISABLEDFORCONNECTION,O.NSPCNFL0),this.buf.writeUInt8(O.NSISUPSECRENEG|O.NSINADISABLEDFORCONNECTION,O.NSPCNFL1),this.buf.writeUInt16BE(0,O.NSPCNTMO),this.buf.writeUInt16BE(0,O.NSPCNTCK),this.buf.writeUInt16BE(0,O.NSPCNADL),this.buf.writeUInt16BE(0,O.NSPCNAOF),this.buf.writeUInt32BE(e.sdu,O.NSPCNLSD),this.buf.writeUInt32BE(e.tdu,O.NSPCNLTD),this.buf.writeUInt32BE(0,O.NSPCNCFL),this.buf.writeUInt32BE(0,O.NSPCNCFL2),!this.overflow&&this.connectDataLen&&this.buf.write(i.toString("ascii"),O.NSPCNDAT,this.connectDataLen,"ascii")}T(ju,"ConnectPacket");function Ju(i){this.dataPtr=0,this.dataLen=0,this.offset=0,this.len=0,this.bufLen=0,this.createPacket=function(e){this.dataPtr=O.NSPDADAT,this.dataLen=O.NSPDADAT,this.buf=Vr.allocUnsafe(e).fill(0),this.buf.writeUInt8(0,O.NSPHDFLGS),this.buf.writeUInt8(O.NSPTDA,O.NSPHDTYP),this.bufLen=e},this.fillBuf=function(e,t,s,r=0){let _;return this.buf||this.createPacket(s+O.NSPDADAT),s>this.bufLen-this.dataLen?_=this.bufLen-this.dataLen:_=s,_&&e.copy(this.buf,this.dataLen,t,t+_),this.dataLen+=_,this.prepare2Send(r),_},this.prepare2Send=function(e=0){i?this.buf.writeUInt32BE(this.dataLen,O.NSPHDLEN):this.buf.writeUInt16BE(this.dataLen,O.NSPHDLEN),this.buf.writeUInt16BE(e,O.NSPDAFLG),this.dataBuf=this.buf.subarray(0,this.dataLen)},this.fromPacket=function(e){this.buf=e.buf,this.dataLen=e.buf.length,this.dataPtr=O.NSPDADAT,this.offset=this.dataPtr,this.len=this.dataLen,e.dataOffset=this.dataPtr}}T(Ju,"DataPacket");function Zu(i,e){this.buf=i.buf,this.len=i.buf.length,e.version=i.buf.readUInt16BE(O.NSPACVSN),e.options=i.buf.readUInt16BE(O.NSPACOPT),e.sdu=i.buf.readUInt16BE(O.NSPACSDU),e.tdu=i.buf.readUInt16BE(O.NSPACTDU),e.version>=315&&(e.sdu=i.buf.readUInt32BE(O.NSPACLSD),e.tdu=i.buf.readUInt32BE(O.NSPACLTD),e.largeSDU=!0),this.flag0=i.buf.readUInt8(O.NSPACFL0),this.flag1=i.buf.readUInt8(O.NSPACFL1)}T(Zu,"AcceptPacket");function $u(i){this.buf=i.buf,this.len=i.buf.length,this.userReason=i.buf.readUInt8(O.NSPRFURS),this.systemReason=i.buf.readUInt8(O.NSPRFURS),this.dataLen=i.buf.readUInt16BE(O.NSPRFLEN),this.dataOff=O.NSPRFDAT,this.len>this.dataOff?(this.dataBuf=this.buf.toString("ascii",this.dataOff,this.len),this.overflow=!1):this.overflow=!0}T($u,"RefusePacket");function eP(i){this.buf=i.buf,this.len=i.buf.length,this.flags=i.flags,this.dataLen=i.buf.readUInt16BE(O.NSPRDLEN),this.dataOff=O.NSPRDDAT,this.len>this.dataOff?(this.dataBuf=this.buf.subarray(this.dataOff,this.len),this.overflow=!1):this.overflow=!0}T(eP,"RedirectPacket");function tP(i){this.len=O.NSPMKDAT+1,this.buf=Vr.alloc(O.NSPMKDAT+1),i?this.buf.writeUInt32BE(this.len,O.NSPHDLEN):this.buf.writeUInt16BE(this.len,O.NSPHDLEN),this.buf.writeUInt8(0,O.NSPHDFLGS),this.buf.writeUInt8(O.NSPTMK,O.NSPHDTYP),this.prepare=function(e,t){this.buf.writeUInt8(e,O.NSPMKTYP),this.buf.writeUInt8(t,O.NSPMKDAT)},this.fromPacket=function(e,t){switch(this.type=e.buf.readUInt8(O.NSPMKTYP),this.type){case O.NSPMKTD0:t.isBreak=!0;break;case O.NSPMKTD1:this.data=e.buf.readUInt8(O.NSPMKDAT),t.isBreak=!0,this.data==O.NIQRMARK&&(t.isReset=!0,t.isBreak=!0);break;default:bt.throwErr(bt.ERR_INVALID_PACKET)}}}T(tP,"MarkerPacket");function sP(){this.clear=function(){this.errno=0,this.notif=null,this.notifLen=0,this.cmd=0},this.fromPacket=function(i){let r,_,o;switch(this.cmd=i.buf.readUInt16BE(O.NSPCTLCMD),this.cmd){case O.NSPCTL_SERR:r=i.buf.readUInt32BE(O.NSPCTLDAT),_=i.buf.readUInt32BE(O.NSPCTLDAT+4),o=i.buf.readUInt32BE(O.NSPCTLDAT+8),_==12572?this.errno=_:_==12573?(this.errno=_,this.notifLen=o,this.notif=Vr.allocUnsafe(o+1).fill(0),this.buf.copy(this.notif,0,O.NSPCTLDAT+12,O.NSPCTLDAT+12+o)):(this.errno=_,r==22?bt.throwErr(bt.ERR_CONNECTION_INBAND,"ORA-"+_):bt.throwErr(bt.ERR_CONNECTION_INBAND,"TNS-"+_));break;default:bt.throwErr(bt.ERR_INVALID_PACKET)}}}T(sP,"ControlPacket");Zl.exports={ConnectPacket:ju,DataPacket:Ju,AcceptPacket:Zu,RefusePacket:$u,RedirectPacket:eP,MarkerPacket:tP,ControlPacket:sP}});var sN=m((nm,tN)=>{"use strict";var{Buffer:rP}=require("buffer"),iP=require("net"),eN=require("process"),xs=require("tls"),nP=require("http"),_P=require("timers"),To=hs(),Pe=U(),oP=8,aP=1521,TP=80,cP=4878,EP=1,Eo=class Eo{constructor(e){this.atts=e,this.cha=cP,this.connected=!1,this.err=!1,this.needsDrain=!1,this.numPacketsSinceLastWait=0,this.secure=!1,this.largeSDU=!1,this.streamNum=EP++,this.packetNum=1}dnMatch(e,t){if(this.atts.sslServerDNMatch){let s=T(r=>r.split(",").map(_=>_.split("=").map(o=>o.trim())).reduce((_,o)=>(_[o[0]]=o[1],_),{}),"toObject");if(this.atts.sslServerCertDN){let r=s(this.atts.sslServerCertDN);for(let _ in r)if(r[_]!=t.subject[_])return Pe.getErr(Pe.ERR_TLS_DNMATCH_FAILURE)}else if(xs.checkServerIdentity(this.hostName,t)&&(!this.originHost||xs.checkServerIdentity(this.originHost,t))){let r=this.hostName+" "+(this.originHost?"or "+this.originHost:"");return Pe.getErr(Pe.ERR_TLS_HOSTMATCH_FAILURE,r)}}}async tlsConnect(e,t){this.stream.removeAllListeners();let s,r={host:this.host,socket:t,rejectUnauthorized:!0,secureContext:e,enableTrace:!1,checkServerIdentity:this.dnMatch.bind(this)};await new Promise(_=>{this.stream=xs.connect(r,()=>{this.stream.authorized||(s="server certificate unauthorized"),_()}).on("error",o=>{s=o.message,_()})}),s&&Pe.throwErr(Pe.ERR_TLS_AUTH_FAILURE,this.host,this.port,this.atts.connectionId,s),this.connStream=t}async ntConnect(e){e.port||(e.port=aP);let t,s,r,_=e.httpsProxy||this.atts.httpsProxy,o=e.httpsProxyPort||this.atts.httpsProxyPort;await new Promise(a=>{_?(o||(o=TP),r=nP.request({host:_,port:o,method:"CONNECT",path:e.host+":"+e.port}),r.once("connect",(c,N)=>{c.statusCode==200?(this.connected=!0,this.stream=N):s=c.statusCode,a()}),r.once("error",c=>{s=c.message,a()}),r.end()):(this.stream=iP.connect(e.port,e.host,()=>{this.connected=!0,a()}),this.stream.once("error",c=>{t=c.message,a()}))}),r&&r.removeAllListeners(),this.connected||(s?Pe.throwErr(Pe.ERR_PROXY_CONNECTION_FAILURE,_,o,this.atts.connectionId,s):Pe.throwErr(Pe.ERR_CONNECTION_INCOMPLETE,this.host,this.port,this.atts.connectionId,t))}async connect(e){this.originHost=e.originHost,this.host=e.host,this.hostName=e.hostname,this.port=e.port;try{if(await this.ntConnect(e),(this.atts.expireTime||this.atts.enableDCD)&&(this.atts.expireTime?this.stream.setKeepAlive(!0,this.atts.expireTime):this.stream.setKeepAlive(!0)),this.atts.tcpNoDelay&&this.stream.setNoDelay(!0),e.protocol.toUpperCase()=="TCPS"){let t;this.secure=!0;try{t=xs.createSecureContext({cert:this.atts.wallet,key:this.atts.wallet,passphrase:this.atts.walletPassword,ca:this.atts.wallet})}catch{Pe.throwErr(Pe.ERR_TLS_INIT_FAILURE)}await this.tlsConnect(t,this.stream)}}finally{this.stream&&this.setupEventHandlers()}}disconnect(e){this.connected&&!this.err&&(e==To.NSFIMM?this.stream.destroy():this.stream.end()),this.stream=null,this.connected=!1,this.drainWaiter=null,this.readWaiter=null}getPacketDump(e){let t=[];for(let s=0;s<e.length;s+=8){let r=s.toString().padStart(4,"0"),_=e.slice(s,s+8),o=[],a=[];for(let E of _)o.push(E.toString(16).toUpperCase().padStart(2,"0")),E>32&&E<127?a.push(String.fromCharCode(E)):a.push(".");for(;o.length<8;)o.push("  "),a.push(" ");let c=o.join(" "),N=a.join("");t.push(`${r} : ${c} |${N}|`)}return t.join(`
`)}printPacket(e,t){let s=new Date,r=`${s.getFullYear()}-${s.getMonth().toString().padStart(2,"0")}-${s.getDay().toString().padStart(2,"0")} ${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}:${s.getSeconds().toString().padStart(2,"0")}.${s.getMilliseconds().toString().padStart(3,"0")}`,_=this.getPacketDump(t);console.log(`${r} ${e}:
${_}
`)}checkErr(){if(!this.connected||this.err){let e,t;throw this.savedErr?e=Pe.getErr(Pe.ERR_CONNECTION_LOSTCONTACT,this.host,this.port,this.atts.connectionId,this.savedErr.message):e=Pe.getErr(Pe.ERR_CONNECTION_EOF,this.host,this.port,this.atts.connectionId),t=Pe.getErr(Pe.ERR_CONNECTION_CLOSED),t.message=t.message+`
`+e.message,t}}send(e){this.checkErr(),eN.env.NODE_ORACLEDB_DEBUG_PACKETS&&this.printPacket(`Sending packet ${this.packetNum} on stream ${this.streamNum}`,e),this.stream.write(e,s=>{s&&(this.savedErr=s,this.err=!0,this._notifyWaiters())})||(this.needsDrain=!0),this.numPacketsSinceLastWait++,this.packetNum++}shouldPauseWrite(){return this.needsDrain||this.numPacketsSinceLastWait>=100}async pauseWrite(){this.checkErr(),this.needsDrain?(await new Promise(e=>{this.drainWaiter=e}),this.checkErr()):await new Promise(e=>_P.setImmediate(e)),this.numPacketsSinceLastWait=0}startRead(){let e;this.packets=[],this.stream.on("data",t=>{for(e?e=rP.concat([e,t]):e=t;e.length>=oP;){let s;if(this.largeSDU?s=e.readUInt32BE():s=e.readUInt16BE(),s>e.length)break;let r={buf:e.subarray(0,s),type:e[4],flags:e[5],num:this.packetNum++};if(this.packets.push(r),this.readWaiter&&(this.readWaiter(),this.readWaiter=null),eN.env.NODE_ORACLEDB_DEBUG_PACKETS&&this.printPacket(`Receiving packet ${r.num} on stream ${this.streamNum}`,r.buf),s===e.length){e=null;break}else e=e.subarray(s)}})}syncReceive(){return this.packets.shift()}async receive(){return this.packets.length===0&&(this.checkErr(),await new Promise(e=>{this.readWaiter=e,this.numPacketsSinceLastWait=0}),this.checkErr()),this.packets.shift()}async renegTLS(){try{this.checkErr();let e=xs.createSecureContext({cert:this.atts.wallet,key:this.atts.wallet,passphrase:this.atts.walletPassword,ca:this.atts.wallet});await this.tlsConnect(e,this.connStream)}finally{this.setupEventHandlers()}}setupEventHandlers(){this.stream.removeAllListeners(),this.stream.on("error",e=>{this.savedErr=e,this.err=!0,this._notifyWaiters()}),this.stream.on("end",()=>{this.err=!0,this._notifyWaiters()}),this.stream.on("close",()=>{this.connected=!1,this._notifyWaiters()}),this.stream.on("drain",()=>{this.needsDrain=!1,this.drainWaiter&&(this.drainWaiter(),this.drainWaiter=null)})}getOption(e){switch(this.checkErr(),e){case To.NT_MOREDATA:return this.packets.length>0;case To.REMOTEADDR:{let t=this.secure?this.connStream:this.stream;return t.remoteAddress+":"+t.remotePort}default:Pe.throwErr(Pe.ERR_INTERNAL,"getOption not supported for opcode "+e)}}_notifyWaiters(){this.drainWaiter&&(this.drainWaiter(),this.drainWaiter=null),this.readWaiter&&(this.readWaiter(),this.readWaiter=null)}};T(Eo,"NTTCP");var co=Eo;tN.exports=co});var nN=m((om,iN)=>{"use strict";var lP=require("crypto"),NP=require("path"),rN=hs(),SP=require("fs");async function hP(){return await new Promise((i,e)=>{lP.randomBytes(16,(t,s)=>{t?e(t):i(s)})})}T(hP,"genuuid");var No=class No{constructor(e){this.largeSDU=!1,this.tdu=rN.NSPDFTDULN,this.nt={},this.nt.tcpNoDelay=!0,this.uuid=e,this.nt.sslServerDNMatch=!0}setFrom(e){e&&(e.sdu>0&&(this.sdu=parseInt(e.sdu)),typeof e.walletLocation=="string"&&(this.nt.walletFile=NP.join(e.walletLocation,rN.PEM_WALLET_FILE_NAME)),typeof e.walletPassword=="string"&&(this.nt.walletPassword=e.walletPassword),e.expireTime>0&&(this.nt.expireTime=e.expireTime*1e3*60),e.connectTimeout>0&&(this.connectTimeout=e.connectTimeout*1e3),e.transportConnectTimeout>0&&(this.transportConnectTimeout=e.transportConnectTimeout*1e3),e.recvTimeout>0&&(this.recvTimeout=e.recvTimeout*1e3),e.sendTimeout>0&&(this.sendTimeout=e.sendTimeout*1e3),typeof e.connectionIdPrefix=="string"&&(this.connectionIdPrefix=e.connectionIdPrefix),typeof e.tcpNoDelay=="boolean"&&(this.nt.tcpNoDelay=e.tcpNoDelay),typeof e.sslServerDNMatch=="boolean"&&(this.nt.sslServerDNMatch=e.sslServerDNMatch),typeof e.sslServerCertDN=="string"&&(this.nt.sslServerCertDN=e.sslServerCertDN),typeof e.enable=="string"&&e.enable.toUpperCase()=="BROKEN"&&(this.nt.enabledDCD=!0),typeof e.httpsProxy=="string"&&(this.nt.httpsProxy=e.httpsProxy),e.httpsProxyPort>=0&&(this.nt.httpsProxyPort=parseInt(e.httpsProxyPort)))}readWalletFile(){return new Promise((e,t)=>{SP.readFile(this.nt.walletFile,(s,r)=>{s?t(s):e(r)})})}async prepare(e){this.uuid||(this.uuid=await hP(),this.uuid=this.uuid.toString("base64")),this.connectionIdPrefix?this.connectionId=this.connectionIdPrefix+this.uuid:this.connectionId=this.uuid,this.nt.connectionId=this.connectionId,e&&e.toUpperCase()=="TCPS"&&this.nt.walletFile&&(this.nt.wallet=await this.readWalletFile()),!this.connectTimeout&&!this.transportConnectTimeout&&(this.transportConnectTimeout=60*1e3)}};T(No,"SessionAtts");var lo=No;iN.exports=lo});var ks=m((Tm,lN)=>{"use strict";var J=U(),_N=0,Fs=1,So=2,ho=3,xr=4,Io=class Io{constructor(e){this.name=e,this.listType=ho,this.rhsType=_N}set setAtom(e){this._containsComment(e)&&J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX),this.rhsType=Fs,this.list=null,this.atom=e}_containsComment(e){for(let t=0;t<e.length;t++)if(e.charAt(t)=="#")if(t!=0){if(e.charAt(t-1)=="\\")continue;return!0}else return!0;return!1}getListSize(){return this.list==null?0:this.list.length}getListElement(e){return this.list==null?null:this.list[e]}addListElement(e){this.list==null&&(this.rhsType=So,this.list=new Array,this.atom=null),this.list.push(e),e.parent=this}removeListElement(e){this.list!=null&&(this.list.splice(e,1),this.getListSize==0&&(this.list=null,this.rhsType=_N))}_space(e){var t="";for(let s=0;s<e;s++)t+=" ";return t}valueToString(){let e="";if(this.rhsType==Fs)e=e+this.atom;else if(this.rhsType==So){if(this.listType==ho)for(let t=0;t<this.getListSize();t++)e=e+this.getListElement(t).toString();else if(this.listType==xr)for(let t=0;t<this.getListSize();t++){let s=this.getListElement(t);e=e+s.name,t!=this.getListSize()-1&&(e=e+", ")}}return e}toString(){let e="("+this.name+"=";if(this.rhsType==Fs)e=e+this.atom;else if(this.rhsType==So){if(this.listType==ho)for(let t=0;t<this.getListSize();t++)e=e+this.getListElement(t).toString();else if(this.listType==xr){e=e+" (";for(let t=0;t<this.getListSize();t++){let s=this.getListElement(t);e=e+s.name,t!=this.getListSize()-1&&(e=e+", ")}e=e+")"}}return e=e+")",e}};T(Io,"NVPair");var Fr=Io,AP=0,kr=1,po=2,Gt=3,aN=4,br=8,uP=9,Ao="(",uo=")",Po=",",fo="=",PP="\\",oN='"',fP="'",dP="%",pP=" ",RP="	",DP=`
`,mP="\r",Co=class Co{constructor(){this.tkType=null,this.tkValue=null,this.numTokens=0,this.tkPos=0}_isWhiteSpace(e){return e==pP||e==RP||e==DP||e==mP}_trimWhiteSpace(e){let t=e.length,s=0,r=t;for(;s<t&&this._isWhiteSpace(e.charAt(s));)s++;for(;s<r&&this._isWhiteSpace(e.charAt(r-1));)r--;return e.substring(s,r)}parseTokens(e){this.numTokens=0,this.tkPos=0,this.tkType=new Array,this.tkValue=new Array;let t=e.length,s=!1,r=new Array;r=Array.from(e);let _=0;for(;_<t;){for(;_<t&&this._isWhiteSpace(r[_]);)_++;if(_<t)switch(r[_]){case Ao:s=!1,this._addToken(kr,Ao),_++;break;case fo:s=!0,this._addToken(aN,fo),_++;break;case uo:s=!1,this._addToken(po,uo),_++;break;case Po:s=!1,this._addToken(Gt,Po),_++;break;default:{let o=_,a=-1,c=!1,N=oN;for((r[_]==fP||r[_]==oN)&&(c=!0,N=r[_],_++,o=_);_<t;){if(r[_]==PP){_+=2;continue}if(c){if(r[_]==N){_++,a=_-1;break}}else if(r[_]==Ao||r[_]==uo||r[_]==Po&&!s||r[_]==fo&&!s){a=_;break}_++}a==-1&&(a=_),this._addToken(br,e.substring(o,a).trim());break}}}return this._addToken(uP,dP),!0}getToken(){if(this.tkType==null&&J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens)return Number(this.tkType[this.tkPos]);J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX)}popToken(){let e=AP;return this.tkType==null&&J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=Number(this.tkType[this.tkPos++]):J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX),e}getLiteral(){let e=null;return this.tkValue==null&&J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=String(this.tkValue[this.tkPos]):J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX),e}popLiteral(){let e=null;return this.tkValue==null&&J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=String(this.tkValue[this.tkPos++]):J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX),e}eatToken(){this.tkPos<this.numTokens&&this.tkPos++}toString(){if(this.tkType==null)return"*NO TOKENS*";let e="Tokens";for(let t=0;t<this.numTokens;t++)e=e+" : "+this.tkValue[t];return e}_addToken(e,t){this.tkType.push(Number(e)),this.tkValue.push(String(t)),this.numTokens++}};T(Co,"NVTokens");var Ro=Co;function IP(i){let e=new Ro;return e.parseTokens(i),CP(e)}T(IP,"createNVPair");function CP(i){let e=i.getToken();i.eatToken(),e!=kr&&J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=mo(i),s=new Fr(t);if((e=i.getToken())==Gt){for(;e==br||e==Gt;)t+=i.popLiteral(),e=i.getToken();return s.name=t,Do(s,i)}return Do(s,i)}T(CP,"readTopLevelNVPair");function OP(i){let e=i.getToken();i.eatToken(),e==kr||e==Gt||J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=mo(i),s=new Fr(t);return Do(s,i)}T(OP,"readNVPair");function Do(i,e){let t=e.getToken();switch(t){case aN:if(e.eatToken(),t=e.getToken(),t==br){let s=mo(e);i.setAtom=s}else TN(e,i);break;case Gt:case po:i.setAtom=i.name;break;default:J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX)}return t=e.getToken(),t==po?e.eatToken():t!=Gt&&J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX),i}T(Do,"readRightHandSide");function mo(i){return i.getToken()!=br&&J.throwErr(J.ERR_INVALID_CONNECT_STRING_SYNTAX),i.popLiteral()}T(mo,"readNVLiteral");function TN(i,e){let t=i.getToken();if(!(t==kr||t==Gt))return;let s=OP(i);e.addListElement(s),(t==Gt||s.name==s.atom)&&e.getListType!=xr&&(e.setListType=xr),TN(i,e)}T(TN,"readNVList");function cN(i,e){if(!i)return null;if(e.toUpperCase()==i.name.toUpperCase())return i;if(i.getRHSType==Fs)return null;for(let t=0;t<i.getListSize();t++){let s=cN(i.getListElement(t),e);if(s!==null)return s}return null}T(cN,"findNVPairRecurse");function EN(i,e){if(!i||i.getRHSType==Fs)return null;for(let t=0;t<i.getListSize();t++){let s=i.getListElement(t);if(e.toUpperCase()==s.name.toUpperCase())return s}return null}T(EN,"findNVPair");function gP(i,e){if(!i||e[0].toUpperCase()!=i.name.toUpperCase())return null;let t=i,s=e.length;for(let r=1;r<s;r++)if(t=EN(t,e[r]),!t)return null;return t.atom==null?t.list==null?null:t.list.toString():t.atom.toString()}T(gP,"findValue");lN.exports={findNVPairRecurse:cN,createNVPair:IP,findNVPair:EN,findValue:gP}});var As=m((Em,AN)=>{"use strict";var SN=Be(),Gr=U(),NN=require("os");function LP(){this.program=process.argv0,this.terminal="unknown",this.pid=process.pid.toString();try{this.userName=NN.userInfo().username}catch{this.userName="unknown"}this.hostName=NN.hostname()}T(LP,"populateClientInfo");var yP=new LP;function YP(i){let e=[];for(let t of i)e.push(t.fetchInfo);return e}T(YP,"getMetadataMany");function Oo(i,e){let t=i[0].name===void 0,s;t?s=[]:s={};for(let r=0;r<i.length;r++)i[r].dir!==SN.BIND_IN&&(t?s.push(i[r].values[e]):s[i[r].name]=i[r].values[e]);return s}T(Oo,"getOutBinds");function BP(i,e){if(hN(i)===0)return;let s=new Array(e).fill(null);for(let r=0;r<e;r++)s[r]=Oo(i,r);return s}T(BP,"getExecuteManyOutBinds");function hN(i){let e=0;for(let t=0;t<i.length;t++)i[t].dir!==SN.BIND_IN&&e++;return e}T(hN,"getNumOutBinds");function UP(i){if(hN(i)!==0)return Oo(i,0)}T(UP,"getExecuteOutBinds");function wP(i){return i=i.trim(),i=i.replace(/\--.*(\n|$)/g,""),i=i.replace(/\/\\*[\S\n ]+\\*\//g,""),i=i.replace(/\s+/g," "),i}T(wP,"cleanSql");function MP(i){let e=[];for(let t of i.bindInfoList)e.push(t.bindVar);return e}T(MP,"getBindVars");function VP(i){let e="",t="",s=!1,r=!1,_=0,o,a={status:-1,proxyUser:"",schemaUser:""},c=i.length,N=0,E,P;for(;N<c;){if(i.charAt(N)==='"'&&(s=!s,_=N),i.charAt(N)==="["&&!s){if(r=!0,_!=0){for(E=_+1;E<N;E++)if(i.charAt(E)!==" ")return a;for(E=0;E<=_;E++)t+=i.charAt(E)}else for(E=0;E<N&&i.charAt(E)!==" ";E++)t+=i.charAt(E);break}N++}if(t.length===0)return a;for(a.proxyUser=t,N=N+1,s=!1,o=N,_=0;N<c;){if(i.charAt(N)==='"'&&(s=!s,_=N),i.charAt(N)==="["&&!s&&r)return a;if(i.charAt(N)==="]"&&!s){if(_!=o&&_!=0){for(E=o;E<=_;E++)e+=i.charAt(E);for(E=_+1;E<N;E++)if(i.charAt(E)!=" ")return a}else{for(E=o;E<N&&i.charAt(E)==" ";E++);if(E==N)return a;for(P=E;P<N;P++)e+=i[P]}for(E=N+1;E<c;E++)if(i[E]!=" ")return a}N++}return e.length===0||(a.schemaUser=e,a.status=0),a}T(VP,"checkProxyUserValidity");function xP(i){i.token===void 0&&(i.externalAuth===!0&&Gr.throwErr(Gr.ERR_NOT_IMPLEMENTED,"External Authentication"),i.password===void 0&&Gr.throwErr(Gr.ERR_MISSING_CREDENTIALS))}T(xP,"checkCredentials");AN.exports={getMetadataMany:YP,cleanSql:wP,CLIENT_INFO:yP,getExecuteOutBinds:UP,getExecuteManyOutBinds:BP,getOutBinds:Oo,getBindVars:MP,checkProxyUserValidity:VP,checkCredentials:xP}});var dN=m((Nm,fN)=>{"use strict";var{findNVPairRecurse:bs,createNVPair:Kr}=ks(),Me=U(),FP=require("os"),kP=require("net"),bP=require("dns"),uN=bP.promises,go=As().CLIENT_INFO,Wr={ADDR:0,ADDR_LIST:1,DESC:2,DESC_LIST:3},Uo=class Uo{isS(){return Wr.ADDR}initFromString(e){let t=Kr(e);this.initFromNVPair(t)}initFromNVPair(e){(e==null||e.name.toUpperCase()!="ADDRESS")&&Me.throwErr(Me.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=bs(e,"protocol"),s=bs(e,"port"),r=bs(e,"host"),_=bs(e,"https_proxy"),o=bs(e,"https_proxy_port");s&&(this.port=s.atom),r&&(this.host=r.atom),t&&(this.prot=t.atom),_&&(this.httpsProxy=_.atom),o&&(this.httpsProxyPort=o.atom),this.addr=e.toString()}toString(){return this.addr}};T(Uo,"Address");var Lo=Uo,wo=class wo{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!1,this.failover=!0}isS(){return Wr.ADDR_LIST}initFromString(e){let t=Kr(e);this.initFromNVPair(t)}initFromNVPair(e){this.children=[];let t,s,r=e.getListSize();r==0&&Me.throwErr(Me.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let _=0;_<r;_++)t=e.getListElement(_),t.name.toUpperCase()=="SOURCE_ROUTE"?this.sourceRoute=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="LOAD_BALANCE"?this.loadBalance=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="FAILOVER"?this.failover=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="ADDRESS"?(s=new Gs,s.initFromNVPair(t),this.children.push(s)):t.name.toUpperCase()=="ADDRESS_LIST"?(s=new Hs,s.initFromNVPair(t),this.children.push(s)):Me.throwErr(Me.ERR_INVALID_CONNECT_STRING_SYNTAX);this.children.length==0&&Me.throwErr(Me.ERR_INVALID_CONNECT_STRING_SYNTAX)}toString(){let e=new String("");if(this.children.size()<1)return e;e+="(ADDRESS_LIST=";for(let t=0;t<this.children.size();t++)e+=this.children[t].toString();return this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"+us.HC),this.loadBalance&&(e+="(LOAD_BALANCE=yes)"),this.failover||(e+="(FAILOVER=false)"),e+=")",e}};T(wo,"AddressList");var yo=wo,Mo=class Mo{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!1,this.failover=!0,this.delayInMillis=-1,this.params={}}isS(){return Wr.DESC}initFromString(e){let t=Kr(e);this.initFromNVPair(t)}initFromNVPair(e){let t=e.getListSize(),s,r;t==0&&Me.throwErr(Me.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let _=0;_<t;_++)if(s=e.getListElement(_),s.name.toUpperCase()=="SOURCE_ROUTE")this.sourceRoute=s.atom.toLowerCase()=="yes"||s.atom.toLowerCase()=="on"||s.atom.toLowerCase()=="true";else if(s.name.toUpperCase()=="LOAD_BALANCE")this.loadBalance=s.atom.toLowerCase()=="yes"||s.atom.toLowerCase()=="on"||s.atom.toLowerCase()=="true";else if(s.name.toUpperCase()=="FAILOVER")this.failover=s.atom.toLowerCase()=="yes"||s.atom.toLowerCase()=="on"||s.atom.toLowerCase()=="true";else if(s.name.toUpperCase()=="ADDRESS_LIST")r=new Hs,r.initFromNVPair(s),this.children.push(r);else if(s.name.toUpperCase()=="ADDRESS")r=new Gs,r.initFromNVPair(s),this.children.push(r);else if(s.name.toUpperCase()=="CONNECT_DATA"){let o,a=s.getListSize();for(let c=0;c<a;c++)if(o=s.getListElement(c),o.name.toUpperCase()=="CONNECTION_ID_PREFIX"){this.params.connectionIdPrefix=o.atom,s.removeListElement(c);break}this.connectData=s.valueToString()}else if(s.name.toUpperCase()=="RETRY_DELAY")s.atom>0&&(this.delayInMillis=s.atom*1e3);else if(s.name.toUpperCase()=="RETRY_COUNT")this.retryCount=s.atom;else if(s.name.toUpperCase()=="CONNECTION_ID_PREFIX")this.conidPrefix=s.atom;else if(s.name.toUpperCase()=="CONNECT_TIMEOUT")s.atom>0&&(this.params.connectTimeout=s.atom);else if(s.name.toUpperCase()=="TRANSPORT_CONNECT_TIMEOUT")s.atom>0&&(this.params.transportConnectTimeout=s.atom);else if(s.name.toUpperCase()=="ENABLE")this.params.enable=s.atom;else if(s.name.toUpperCase()=="RECV_TIMEOUT")s.atom>0&&(this.params.recvTimeout=s.atom);else if(s.name.toUpperCase()=="SDU")this.params.sdu=s.atom;else if(s.name.toUpperCase()=="EXPIRE_TIME")s.atom>0&&(this.params.expireTime=s.atom);else if(s.name.toUpperCase()=="SECURITY"){let o=s.getListSize(),a;for(let c=0;c<o;c++)a=s.getListElement(c),a.name.toUpperCase()=="SSL_SERVER_CERT_DN"?this.params.sslServerCertDN=a.valueToString():a.name.toUpperCase()=="SSL_SERVER_DN_MATCH"?this.params.sslServerDNMatch=a.atom.toLowerCase()=="yes"||a.atom.toLowerCase()=="on"||a.atom.toLowerCase()=="true":(a.name.toUpperCase()=="WALLET_LOCATION"||a.name.toUpperCase()=="MY_WALLET_DIRECTORY")&&(this.params.walletLocation=a.atom)}}toString(){let e=new String(""),t;t=new String("");for(let s=0;s<this.children.size();s++)t=this.children[s].toString(),!t==""&&(e+=t);return!e==""&&this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"),!e==""&&this.loadBalance&&(e+="(LOAD_BALANCE=yes)"),!e==""&&!this.failover&&(e+="(FAILOVER=false)"),e.equals("")||(e="(DESCRIPTION="+e+")"),e}};T(Mo,"Description");var Yo=Mo,Vo=class Vo{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!0,this.failover=!0}isS(){return Wr.ADDR_LIST}initFromString(e){let t=Kr(e);this.initFromNVPair(t)}initFromNVPair(e){let t=e.getListSize(),s,r;t==0&&Me.throwErr(Me.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let _=0;_<t;_++)r=e.getListElement(_),r.name.toUpperCase()=="SOURCE_ROUTE"?this.sourceRoute=r.atom.toLowerCase()=="yes"||r.atom.toLowerCase()=="on"||r.atom.toLowerCase=="true":r.name.toUpperCase()=="LOAD_BALANCE"?this.loadBalance=r.atom.toLowerCase()=="yes"||r.atom.toLowerCase()=="on"||r.atom.toLowerCase()=="true":r.name.toUpperCase()=="FAILOVER"?this.failover=r.atom.toLowerCase()=="yes"||r.atom.toLowerCase()=="on"||r.atom.toLowerCase()=="true":r.name.toUpperCase()=="DESCRIPTION"?(s=new qr,s.initFromNVPair(r),this.children.push(s)):Me.throwErr(Me.ERR_INVALID_CONNECT_STRING_SYNTAX);this.children.length==0&&Me.throwErr(Me.ERR_INVALID_CONNECT_STRING_SYNTAX)}toString(){let e=new String("");if(this.children.size()<1)return e;let t=new String("");for(let s=0;s<this.children.size();s++)t=this.children[s].toString(),t.equals("")||(e+=t);return e.equals("")&&this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"),e.equals("")&&!this.loadBalance&&(e+="(LOAD_BALANCE=no)"),e.equals("")&&!this.failover&&(e+="(FAILOVER=false)"),e.equals("")||(e="(DESCRIPTION_LIST="+e+")"),e}};T(Vo,"DescriptionList");var Bo=Vo,xo=class xo{constructor(){this.CNdata=new Array}};T(xo,"ConnOption");var Hr=xo,us={DEBUG:!1,SR:"(SOURCE_ROUTE=yes)",HC:"(HOP_COUNT=0)",LB:"(LOAD_BALANCE=yes)",NFO:"(FAILOVER=false)",CD:"(CONNECT_DATA=",CONID:"(CONNECTION_ID="},PN={all:!0},Fo=class Fo extends Lo{constructor(){super()}async navigate(e){let t,s=0,r=!1;if(!this.host){s=1,this.host=FP.hostname();try{await uN.lookup(this.host,PN)}catch{this.host="localhost"}}if(e.getcurrentDescription()==null&&(e.newConnectionDescription(),r=!0),kP.isIP(this.host)){let _=new Hr;_.hostname=this.host,_.port=this.port,_.protocol=this.prot,_.httpsProxy=this.httpsProxy,_.httpsProxyPort=this.httpsProxyPort,_.desc=e.getcurrentDescription(),_.CNdata.push(e.sBuf.join("")),_.CNdata.push(this.toString()),_.host=this.host,_.addr=this.addr,e.getcurrentDescription().addConnectOption(_)}else try{t=await uN.lookup(this.host,PN);for(let _ in t){let o=new Hr;o.hostname=this.host,o.port=this.port,o.protocol=this.prot,o.httpsProxy=this.httpsProxy,o.httpsProxyPort=this.httpsProxyPort,o.desc=e.getcurrentDescription(),o.CNdata.push(e.sBuf.join("")),s==1?o.CNdata.push("(address=(protocol="+this.prot+")(host="+this.host+")(port="+this.port+"))"):o.CNdata.push(this.toString()),o.host=t[_].address,o.addr=this.addr,e.getcurrentDescription().addConnectOption(o)}}catch{}r&&e.closeDescription()}addToString(e){let t=this.toString(),s=new Array;s=e.getcurrentDescription().getConnectOptions();for(let r=0;r<s.length;r++)s[r].done||s[r].CNdata.push(t)}};T(Fo,"NavAddress");var Gs=Fo,ko=class ko extends yo{constructor(){super(),this.activeChildren=new Array,this.sBuflength=0}async navigate(e){await this.navigate2(e,0)}async navigate2(e,t){if(t++,this.sBuflength=e.sBuf.length,e.sBuf.push("(ADDRESS_LIST="),this.sourceRoute){this.activeChildren=this.children,await this.activeChildren[0].navigate(e);for(let s=1;s<this.activeChildren.length;s++)this.activeChildren[s].addToString(e)}else{this.activeChildren=qs.setActiveChildren(this.children,this.failover,this.loadBalance);for(let s=0;s<this.activeChildren.length;s++)this.getChildrenType(s)==1?await this.activeChildren[s].navigate2(e,t):await this.activeChildren[s].navigate(e)}this.closeNVPair(e),e.sBuf.length=this.sBuflength}addToString(e){let t=this.toString(),s=new Array;s=e.getcurrentDescription().getConnectOptions();for(let r=0;r<s.length;r++)s[r].done||s[r].CNdata.push(t)}getChildrenSize(){let e=0;for(let t=0;t<this.activeChildren.length;t++)if(this.getChildrenType(t)==1?e+=this.activeChildren[t].getChildrenSize():e++,this.sourceRoute)return e;return e}getChildrenType(e){return this.activeChildren[e].isS()}getChild(e){return this.children[e]}closeNVPair(e){let t=new Array,s=this.getChildrenSize();if(e.getcurrentDescription()!=null){t=e.getcurrentDescription().getConnectOptions();let r=0,_=null,o=null;for(let a=t.length-1;a>=0&&!t[a].done&&((t[a].hostname!=_||t[a].port!=o)&&r++,_=t[a].hostname,o=t[a].port,!(r>s));a--)this.sourceRoute&&(t[a].CNdata.push(us.SR),t[a].CNdata.push(us.HC),t[a].done=!0),t[a].CNdata.push(")")}}};T(ko,"NavAddressList");var Hs=ko,bo=class bo extends Yo{constructor(){super(),this.activeChildren=new Array,this.descProcessed=0}async navigate(e){e.sBuf.length=0,e.sBuf.push("(DESCRIPTION=");let t=e.newConnectionDescription();if(this.retryCount!=null&&(e.retryCount=this.getIntValue(this.retryCount,e.retryCount),t.retryCount=e.retryCount),this.delayInMillis!=-1&&(t.delayInMillis=this.delayInMillis),t.params=this.params,"connectTimeout"in this.params&&e.sBuf.push("(CONNECT_TIMEOUT="+this.params.connectTimeout+")"),"transportConnectTimeout"in this.params&&e.sBuf.push("(TRANSPORT_CONNECT_TIMEOUT="+this.params.transportConnectTimeout+")"),"recvTimeout"in this.params&&e.sBuf.push("(RECV_TIMEOUT="+this.params.recvTimeout+")"),"sdu"in this.params&&e.sBuf.push("(SDU="+this.params.sdu+")"),"expireTime"in this.params&&e.sBuf.push("(EXPIRE_TIME="+this.params.expireTime+")"),"enable"in this.params&&e.sBuf.push("(ENABLE="+this.params.enable+")"),("sslServerCertDN"in this.params||"sslServerDNMatch"in this.params||"walletLocation"in this.params)&&(e.sBuf.push("(SECURITY="),"sslServerCertDN"in this.params&&e.sBuf.push("(SSL_SERVER_CERT_DN="+this.params.sslServerCertDN+")"),"sslServerDNMatch"in this.params&&e.sBuf.push("(SSL_SERVER_DN_MATCH="+this.params.sslServerDNMatch+")"),"walletLocation"in this.params&&e.sBuf.push("(WALLET_LOCATION="+this.params.walletLocation+")"),e.sBuf.push(")")),"httpsProxyPort"in this.params&&e.sBuf.push("(HTTPS_PROXY_PORT="+this.params.httpsProxyPort+")"),"httpsProxy"in this.params&&e.sBuf.push("(HTTPS_PROXY="+this.params.httpsProxy+")"),this.failover||e.sBuf.push(us.NFO),this.sourceRoute){this.activeChildren=this.children,await this.activeChildren[0].navigate(e);for(let s=1;s<this.activeChildren.length;s++)this.activeChildren[s].addToString(e);this.closeNVPair(e)}else{this.activeChildren=qs.setActiveChildren(this.children,this.failover,this.loadBalance);for(let s=0;s<this.activeChildren.length;s++)await this.activeChildren[s].navigate(e);this.closeNVPair(e)}e.closeDescription()}closeNVPair(e){if(e.getcurrentDescription()==null)return;let t=new Array;t=e.getcurrentDescription().getConnectOptions();for(let s=0;s<t.length;++s){this.sourceRoute&&t[s].CNdata.push(us.SR),this.connectData==null&&(this.connectData="(SERVICE_NAME=)");let r=`(CID=(PROGRAM=${go.program})(HOST=${go.hostName})(USER=${go.userName}))`;t[s].CNdata.push(us.CD),t[s].CNdata.push(this.connectData),t[s].CNdata.push(r),t[s].CNdata.push(")"),this.SID!=null&&(t[s].sid=this.SID),this.serviceName!=null&&(t[s].service_name=this.serviceName),this.instanceName!=null&&(t[s].instance_name=this.instanceName),t[s].CNdata.push(")"),t[s].done=!0}}getIntValue(e,t){try{return parseInt(e)}catch{return t}}};T(bo,"NavDescription");var qr=bo,vr=class vr extends Bo{constructor(e=new Array,t=0,s=0){super(),this.activeChildren=e,this.descProcessed=t,this.done=s}async navigate(e){for(e.sBuf.push("(DESCRIPTION_LIST="),this.activeChildren=vr.setActiveChildren(this.children,this.failover,this.loadBalance);this.descProcessed<this.activeChildren.length;)await this.activeChildren[this.descProcessed].navigate(e),this.descProcessed++}static setActiveChildren(e,t,s){let r,_=e.length,o=new Array,a=Math.floor(Math.random()*10),c=new Array(_).fill(!1);if(t)if(s)for(let N=0;N<_;N++){do r=Math.abs(Math.floor(Math.random()*10))%_;while(c[r]);c[r]=!0,o.push(e[r])}else o=e;else s?(r=Math.abs(a)%_,o.push(e[r])):o.push(e[0]);return o}};T(vr,"NavDescriptionList");var qs=vr;fN.exports={NavAddress:Gs,NavAddressList:Hs,NavDescription:qr,NavDescriptionList:qs}});var DN=m((hm,RN)=>{"use strict";var{NavAddress:GP,NavAddressList:HP,NavDescription:qP,NavDescriptionList:vP}=dN(),{createNVPair:KP}=ks(),pN=U(),qo=class qo{constructor(){this.cOpts=new Array}addConnectOption(e){this.cOpts.push(e)}getConnectOptions(){return this.cOpts}};T(qo,"ConnectDescription");var Go=qo,vo=class vo{constructor(){this.nextOptToTry=0,this.retryCount=0,this.lastRetryCounter=0,this.lastRetryConnectDescription=0,this.currentDescription=null,this.descriptionList=new Array,this.sBuf=new Array}hasMoreOptions(){let e=0;for(let t=0;t<this.descriptionList.length;++t)e+=this.descriptionList[t].getConnectOptions().length;return this.nextOptToTry<e}newConnectionDescription(){return this.currentDescription=new Go,this.currentDescription}getcurrentDescription(){return this.currentDescription}closeDescription(){this.descriptionList.push(this.currentDescription),this.currentDescription=null}async execute(e){e!=null&&this.retryCount==0&&e.retryCount>0&&(this.retryCount=e.retryCount);for(let t=this.lastRetryConnectDescription;t<this.descriptionList.length;t++){let s=this.descriptionList[t],r=new Array;r=s.getConnectOptions();let _=s.delayInMillis;e!=null&&(_==0||_==null)&&e.retryDelay>0&&(_=e.retryDelay*1e3);for(let o=this.lastRetryCounter;o<=this.retryCount;++o){for(;this.nextOptToTry<r.length;){let a=r[this.nextOptToTry];return this.lastRetryCounter=o,this.lastRetryConnectDescription=t,this.nextOptToTry++,a}this.nextOptToTry=0,_>0&&o<this.retryCount&&await WP(_)}this.lastRetryCounter=0}throw this.nextOptToTry=1e3,this.lastRetryCounter=1e3,new Error("All options tried")}};T(vo,"ConnStrategy");var Ho=vo;function WP(i){return new Promise(e=>setTimeout(e,i))}T(WP,"sleep");async function zP(i){let e;typeof i=="string"?e=KP(i):e=i;let t=e.name.toUpperCase(),s=null;switch(t){case"ADDRESS":s=new GP;break;case"ADDRESS_LIST":s=new HP;break;case"DESCRIPTION":s=new qP;break;case"DESCRIPTION_LIST":s=new vP;break;default:pN.throwErr(pN.ERR_INVALID_CONNECT_STRING_PARAMETERS,`unknown top element ${t}`)}s.initFromNVPair(e);let r=new Ho;return await s.navigate(r),r}T(zP,"createNode");RN.exports={createNode:zP}});var ON=m((um,CN)=>{"use strict";var{lookup:XP}=require("dns").promises,Et=U(),IN=new RegExp("((?=(?<hostnames>(((\\[[A-z0-9:]+\\])|([A-z0-9][A-z0-9._-]+))[,]?)+)))\\k<hostnames>(:(?<port>\\d+)?)?","g"),QP=new RegExp("^(((?<protocol>[A-z0-9]+):)?//)?(?<hostinfo>("+IN.source+"(?=([,]|[;]|[/]|[:]|$))([,]|[;])?)+)(/(?<servicename>[A-z0-9][A-z0-9,-.]+)?)?(:(?<servermode>dedicated|shared|pooled))?(/(?<instance>[A-z0-9][A-z0-9]+))?$","ig"),mN='"',jP="=",JP="&",ZP=["ENABLE","FAILOVER","LOAD_BALANCE","RECV_BUF_SIZE","SEND_BUF_SIZE","SDU","SOURCE_ROUTE","RETRY_COUNT","RETRY_DELAY","CONNECT_TIMEOUT","TRANSPORT_CONNECT_TIMEOUT","RECV_TIMEOUT"],Wo=class Wo{constructor(e){this.URL_PROPS_ALIAS=this.initializeUrlAlias();let t=e.indexOf("@");t!=-1?(this.url=e.substring(t+1),this.urlPrefix=e.substring(0,t+1)):(this.url=e,this.urlPrefix=""),this.resolvedUrl="",this.connectionProps=new Map,this.urlProps=new Map,this.lb=!1}async getResolvedUrl(){return await this.parse(),this.resolvedUrl}async parse(){let e=this.parseExtendedSettings(this.url);this.connectionProps.size===0&&this.urlProps.size===0&&(e=this.url),e.startsWith("(")?this.resolvedUrl=this.urlPrefix+e:this.resolvedUrl=this.urlPrefix+await this.resolveToLongURLFormat(e)}async resolveToLongURLFormat(e){let t=e.replace(/\s/g,""),s=0,r=null,_=null,o=null,a=null,c=null;for(let S of t.matchAll(QP))s=1,r=S.groups.protocol,_=S.groups.hostinfo,o=S.groups.servicename,a=S.groups.servermode,c=S.groups.instance;s||Et.throwErr(Et.ERR_INVALID_EZCONNECT_SYNTAX,"input string not in easy connect format",t),r==null?e.includes("//")||(r="TCP"):r.toLowerCase()!="tcp"&&r.toLowerCase()!="tcps"&&Et.throwErr(Et.ERR_INVALID_EZCONNECT_SYNTAX,"Unsupported protocol in thin mode",r);let N=this.urlProps.get("HTTPS_PROXY"),E=this.urlProps.get("HTTPS_PROXY_PORT"),P=await this.buildAddressList(_,r,N,E),f=this.urlProps.get("CONNECTION_ID_PREFIX"),u=[];return this.lb&&u.push("(LOAD_BALANCE=ON)"),u.push(this.buildDescriptionParams()),u.push(P),u.push(this.buildConnectData(o,a,c,f)),u.push(this.buildSecurityInfo(r)),`(DESCRIPTION=${u.join("")})`}buildConnectData(e,t,s,r){let _=this.urlProps.get("POOL_CONNECTION_CLASS"),o=this.urlProps.get("POOL_PURITY"),a=this.urlProps.get("SERVICE_TAG"),c=[];return e?c.push(`(SERVICE_NAME=${e})`):c.push("(SERVICE_NAME=)"),t&&c.push(`(SERVER=${t})`),s&&c.push(`(INSTANCE_NAME=${s})`),_&&c.push(`(POOL_CONNECTION_CLASS=${_})`),o&&c.push(`(POOL_PURITY=${o})`),a&&c.push(`(SERVICE_TAG=${a})`),r&&c.push(`(CONNECTION_ID_PREFIX=${r})`),`(CONNECT_DATA=${c.join("")})`}async buildAddressList(e,t,s,r){let _="",o=0,a=new Array,c="";s!=null&&(r!=null?c=`(HTTPS_PROXY=${s})(HTTPS_PROXY_PORT=${r})`:c=`(HTTPS_PROXY=${s})`),t==null&&(t="TCP");let N=0,E=e.split(";");for(let P in E){let f=0,u=new Array;for(let A of E[P].matchAll(IN)){let D=A.groups.hostnames.split(","),h=A.groups.port;h==null&&(h="1521");for(let C in D)u.push(this.getAddrStr(D[C],h,t,c)),_=D[C],f++}N+=f;let S=[];E.length>1&&f>1&&S.push("(LOAD_BALANCE=ON)"),S.push(u.join("")),E.length>1?a.push(`(ADDRESS_LIST=${S.join("")})`):a.push(S.join(""))}if(N==1){_=_.trim(),_.startsWith("[")&&_.endsWith("]")&&(_=_.substring(1,_.length-1));try{await XP(_),o++}catch{}o==0&&Et.throwErr(Et.ERR_INVALID_EZCONNECT_SYNTAX,"could not resolve hostname",_)}return E.length<2&&N>1&&(this.lb=!0),a.join("")}getAddrStr(e,t,s,r){let _=e.trim();return _.startsWith("[")&&_.endsWith("]")&&(_=_.substring(1,_.length-1)),`(ADDRESS=(PROTOCOL=${s})(HOST=${_})(PORT=${t})${r})`}buildDescriptionParams(){if(this.urlProps.size===0)return"";let e=new Array;return this.urlProps.forEach(function(t,s){ZP.includes(s)&&e.push(`(${s}=${t})`)}),e.join("")}buildSecurityInfo(e){let t=new Array;if(e!=null&&e.toLowerCase()=="tcps"){let s=this.urlProps.get("SSL_SERVER_DN_MATCH")||"TRUE",r=this.urlProps.get("SSL_SERVER_CERT_DN"),_=this.urlProps.get("MY_WALLET_DIRECTORY");t.push(`(SSL_SERVER_DN_MATCH=${s})`),r!=null&&t.push(`(SSL_SERVER_CERT_DN=${r}})`),_!=null&&t.push(`(MY_WALLET_DIRECTORY=${_})`)}return t.length===0?"":`(SECURITY=${t.join("")})`}parseExtendedSettings(e){let t=Array.from(e.trim()),s=this.findExtendedSettingPosition(t);return s==-1?e:(this.parseExtendedProperties(t,s+1),e.substring(0,s))}parseExtendedProperties(e,t){let s=null,r=null,_=new Array(e.length),o=0,a="";for(let c=t;c<e.length;c++)if(e[c].trim()!="")switch(e[c]){case mN:a=this.parseQuotedString(c,e,o,_),o=a[1],c=a[0];break;case jP:s!=null&&Et.throwErr(Et.ERR_INVALID_EZCONNECT_SYNTAX,"unable to parse, invalid syntax",this.url),s=_.join("").substring(0,o).trim(),o=0;break;case JP:s==null&&Et.throwErr(Et.ERR_INVALID_EZCONNECT_SYNTAX,"unable to parse, invalid syntax",this.url),r=_.join("").substring(0,o).trim(),this.addParam(s,r),s=null,r=null,o=0;break;default:_[o++]=e[c]}s!=null&&(r=_.join("").substring(0,o).trim(),this.addParam(s,r))}parseQuotedString(e,t,s,r){let _=e+1;for(;_<t.length;){let o=t[_];if(o==mN)return[_,s];r[s++]=o,_++}}addParam(e,t){let s=e.toLowerCase(),r=this.URL_PROPS_ALIAS.get(s);r!=null?this.urlProps.set(r,t):this.connectionProps.set(r,t)}findExtendedSettingPosition(e){let t=0;for(let s=0;s<e.length;s++)if(e[s]=="(")t++;else if(e[s]==")")t--;else if(e[s]=="?"&&t==0)return s;return-1}initializeUrlAlias(){let e=new Map;return e.set("enable","ENABLE"),e.set("failover","FAILOVER"),e.set("load_balance","LOAD_BALANCE"),e.set("recv_buf_size","RECV_BUF_SIZE"),e.set("send_buf_size","SEND_BUF_SIZE"),e.set("sdu","SDU"),e.set("source_route","SOURCE_ROUTE"),e.set("retry_count","RETRY_COUNT"),e.set("retry_delay","RETRY_DELAY"),e.set("https_proxy","HTTPS_PROXY"),e.set("https_proxy_port","HTTPS_PROXY_PORT"),e.set("connect_timeout","CONNECT_TIMEOUT"),e.set("transport_connect_timeout","TRANSPORT_CONNECT_TIMEOUT"),e.set("recv_timeout","RECV_TIMEOUT"),e.set("ssl_server_cert_dn","SSL_SERVER_CERT_DN"),e.set("ssl_server_dn_match","SSL_SERVER_DN_MATCH"),e.set("wallet_location","MY_WALLET_DIRECTORY"),e.set("pool_connection_class","POOL_CONNECTION_CLASS"),e.set("pool_purity","POOL_PURITY"),e.set("service_tag","SERVICE_TAG"),e.set("connection_id_prefix","CONNECTION_ID_PREFIX"),e}};T(Wo,"EZConnectResolver");var Ko=Wo;CN.exports=Ko});var YN=m((fm,yN)=>{"use strict";var{createNVPair:$P,findValue:ef}=ks(),zr=require("fs"),LN=require("process"),tf=require("readline"),Ps=U();function sf(i){let e=null,t=LN.env.TNS_ADMIN;if(i){if(e=i+"/tnsnames.ora",zr.existsSync(e))return e;Ps.throwErr(Ps.ERR_TNS_NAMES_FILE_MISSING,i)}else return t?(e=t,e+="/tnsnames.ora",zr.existsSync(e)||Ps.throwErr(Ps.ERR_TNS_NAMES_FILE_MISSING,t)):Ps.throwErr(Ps.ERR_NO_CONFIG_DIR),e}T(sf,"tnsnamesFilePath");var gN=0,Xo=class Xo{async initializeNlpa(e){let t=zr.statSync(e);if(!(t.mtime-gN))return this.ht;let s=tf.createInterface({input:zr.createReadStream(e),output:LN.stdout,terminal:!1});return this.ht=new Map,await T(async()=>{let _="";for await(let o of s)if(o.length!=0){if(o[0]=="#")continue;if(o[0]==" "||o[0]=="	"||o[0]==")"||o[0]=="("){if(o=o.replace(/\s+/g,""),o=this.checkNLPforComments(o),o.length==0)continue;_=_+o}else _.length==0?(o=this.checkNLPforComments(o),_=_+o):_.length!=0&&(this.addNLPListElement(_),_="",o=this.checkNLPforComments(o),_=_+o)}return _.length!=0&&(this.addNLPListElement(_),_=""),gN=t.mtime,this.ht},"start")()}checkNLPforComments(e){let t=new Array(e.length);for(let s=0;s<e.length;s++){let r=e[s];if(r=="#"){if(s!=0)break;return""}else t.push(r)}return t.join("")}addNLPListElement(e){let t=e.split(/\r?\n/).filter(s=>s);for(let s=0;s<t.length;s++){t[s].charAt(0)!="("&&(t[s]="("+t[s]+")");let r=$P(t[s]),o=r.name.toUpperCase();r.name=o;let a=o.split(",");for(let c=0;c<a.length;c++)this.ht.set(a[c],r)}}toString(){let e="";return this.ht.forEach(t=>{e=e+t.toString()+`
`}),e}findValueOf(e){let t=e.split("/");return ef(this.ht.get(t[0].toUpperCase()),t)}};T(Xo,"NLParamParser");var zo=Xo;yN.exports={NLParamParser:zo,tnsnamesFilePath:sf}});var $o=m((pm,wN)=>{"use strict";var _t=$l(),rf=sN(),nf=nN(),M=hs(),{createNode:_f}=DN(),ie=U(),{findNVPairRecurse:of,createNVPair:Xr,findValue:lt}=ks(),{Buffer:BN}=require("buffer"),af=ON(),{NLParamParser:Tf,tnsnamesFilePath:cf}=YN(),Ef=require("process");async function lf(i){let e=await UN(i.connectString,i.configDir),t;typeof e=="string"?t=Xr(e):t=e;let s=lt(t,["DESCRIPTION","CONNECT_DATA","SERVER"]),r=lt(t,["DESCRIPTION","CONNECT_DATA","POOL_CONNECTION_CLASS"]),_=lt(t,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"]),o=lt(t,["DESCRIPTION","CONNECT_DATA","POOL_PURITY"]);return[s,r,_,o]}T(lf,"getConnectionInfo");var Nf=new Tf;async function UN(i,e){let t=i.trim(),s=t;if(t.indexOf(")")==-1||t.indexOf("(")!=0)try{s=await new af(t).getResolvedUrl()}catch(r){try{let _=cf(e);s=(await Nf.initializeNlpa(_)).get(t.toUpperCase()),s||ie.throwErr(ie.ERR_TNS_ENTRY_NOT_FOUND,t,e?e+"/tnsnames.ora":Ef.env.TNS_ADMIN+"/tnsnames.ora"),s=s.getListElement(0)}catch(_){throw t.indexOf(":")!=-1||t.indexOf("/")!=-1?r:_}}return s}T(UN,"resolveConnectStr");async function jo(i,e){let t=await UN(i,e);return _f(t)}T(jo,"resolveAddress");function Qo(i,e,t,s,r){let _,o=new Promise((a,c)=>{e>2147483647&&(e=2147483647),_=setTimeout(()=>c(ie.getErr(ie.ERR_CONNECTION_TIMEDOUT,s.host,s.port,t,e/1e3,r)),e)});return Promise.race([i,o]).then(a=>(clearTimeout(_),a)).catch(a=>{throw clearTimeout(_),a})}T(Qo,"timeout");var Zo=class Zo{constructor(){this.connected=!1,this.isBreak=!1,this.isReset=!1,this.breakPosted=!1}async getAddress(e,t){let s=await e.execute(t),r=this.sAtts?this.sAtts.uuid:null;this.sAtts=new nf(r),this.sAtts.setFrom(t),this.sAtts.setFrom(s.desc.params),await this.sAtts.prepare(s.protocol);let _=Xr(s.CNdata.join("")),o=of(_,"CONNECT_DATA"),a=`(CONNECTION_ID=${this.sAtts.connectionId})`,c=Xr(a);return o.addListElement(c),this.cData=BN.from(_.toString(),"ascii"),this.cDataNVPair=_,s}async transportConnect(e){e.protocol.toUpperCase()=="TCP"&&e.httpsProxy&&ie.throwErr(ie.ERR_INVALID_CONNECT_STRING_PARAMETERS,"https proxy requires protocol as","tcps "),e.protocol&&(e.protocol.toUpperCase()=="TCP"||e.protocol.toUpperCase()=="TCPS")?this.ntAdapter=new rf(this.sAtts.nt):ie.throwErr(ie.ERR_INVALID_CONNECT_STRING_PARAMETERS,e.protocol+" protocol not supported"),await this.ntAdapter.connect(e),this.ntAdapter.startRead(),this.sAtts.ntCha=this.ntAdapter.cha,this.sndDatapkt=new _t.DataPacket(this.sAtts.largeSDU),this.rcvDatapkt=new _t.DataPacket(this.sAtts.largeSDU)}_sendConnect(e){this._sendPacket(e.buf),e.overflow&&(this._send(e.connectData,0,e.connectDataLen),this.flush())}async connect2(e){if(this.sAtts.sdu?this.sAtts.sdu>M.NSPABSSDULN?this.sAtts.sdu=M.NSPABSSDULN:this.sAtts.sdu<M.NSPMNSDULN&&(this.sAtts.sdu=M.NSPMNSDULN):this.sAtts.sdu=M.NSPDFSDULN,this.sAtts.transportConnectTimeout){let s=this.transportConnect(e);await Qo(s,this.sAtts.transportConnectTimeout,"transportConnectTimeout",e,this.sAtts.connectionId)}else await this.transportConnect(e);let t=new _t.ConnectPacket(this.cData,this.sAtts);for(this._sendConnect(t);;){let s=await this._recvPacket();if(s.type===M.NSPTAC)break;if(s.type===M.NSPTRF){this.refusePkt.overflow&&(await this._recvPacket(),this.refusePkt.dataBuf=this.rcvDatapkt.buf.subarray(this.rcvDatapkt.offset,this.rcvDatapkt.len).toString());let r=Xr(this.refusePkt.dataBuf);this.refusePkt=null;let _=lt(r,["DESCRIPTION","ERR"]);_=="12514"?ie.throwErr(ie.ERR_INVALID_SERVICE_NAME,this.getOption(M.SVCNAME),e.host,e.port,this.sAtts.connectionId):_=="12505"?ie.throwErr(ie.ERR_INVALID_SID,this.getOption(M.SID),e.host,e.port,this.sAtts.connectionId):_?ie.throwErr(ie.ERR_CONNECTION_REFUSED,e.host,e.port,this.sAtts.connectionId,"ORA-"+_):ie.throwErr(ie.ERR_CONNECTION_REFUSED,e.host,e.port,this.sAtts.connectionId,"refused")}else if(s.type===M.NSPTRS)(s.flags&M.NSPFSRN)==M.NSPFSRN&&(await this.ntAdapter.renegTLS(),this.ntAdapter.startRead()),this._sendConnect(t);else if(s.type===M.NSPTRD){let r,_,o,a;this.redirectPkt.overflow&&(await this._recvPacket(),this.redirectPkt.dataBuf=this.rcvDatapkt.buf.subarray(this.rcvDatapkt.offset,this.rcvDatapkt.len)),this.redirectPkt.flags&M.NSPFRDS?(r=this.redirectPkt.dataBuf.indexOf("\0",0,"ascii"),_=this.redirectPkt.dataBuf.toString("ascii",0,r),a=this.redirectPkt.dataBuf.subarray(r+1,this.redirectPkt.dataLen)):(_=this.redirectPkt.dataBuf.toString("ascii"),a=this.cData),o=await jo(_);let c=e.host;if(e=await o.execute(),e.desc&&this.sAtts.setFrom(e.desc.params),e.originHost=c,this.redirectPkt=null,this.ntAdapter.disconnect(M.NSFIMM),this.sAtts.transportConnectTimeout){let N=this.transportConnect(e);await Qo(N,this.sAtts.transportConnectTimeout,"transportConnectTimeout",e,this.sAtts.connectionId)}else await this.transportConnect(e);t=new _t.ConnectPacket(a,this.sAtts,M.NSPFRDR),this.sndDatapkt=new _t.DataPacket(this.sAtts.largeSDU),this._sendConnect(t)}}return this.connected=!0,this.cData=null,this.sndDatapkt=new _t.DataPacket(this.sAtts.largeSDU),this.sndDatapkt.createPacket(M.NSPDADAT),this.sndDatapkt.offset=this.sndDatapkt.dataPtr,this.sndDatapkt.len=this.sndDatapkt.bufLen,this.markerPkt=new _t.MarkerPacket(this.sAtts.largeSDU),this.controlPkt=new _t.ControlPacket,this.ntAdapter.largeSDU=this.sAtts.largeSDU,this.sAtts.nt.wallet=null,this.sAtts.nt.walletPassword=null,!0}async connect1(e,t,s){let r,_;do try{if(this.sAtts.connectTimeout){let o=this.connect2(e);r=await Qo(o,this.sAtts.connectTimeout,"connectTimeout",e,this.sAtts.connectionId)}else r=await this.connect2(e)}catch(o){o.message.startsWith("NJS-510")&&(this.ntAdapter.connected=!0),this.ntAdapter&&(this.ntAdapter.disconnect(M.NSFIMM),this.ntAdapter=null),r=!1,_=o;try{e=await this.getAddress(t,s)}catch{break}}while(!r);if(!r)throw _}_processPacket(e){switch(e.type){case M.NSPTDA:this.rcvDatapkt.fromPacket(e);break;case M.NSPTMK:this.markerPkt.fromPacket(e,this);break;case M.NSPTCNL:this.controlPkt.fromPacket(e);break;case M.NSPTAC:_t.AcceptPacket(e,this.sAtts);break;case M.NSPTRF:this.refusePkt=new _t.RefusePacket(e);break;case M.NSPTRS:break;case M.NSPTRD:this.redirectPkt=new _t.RedirectPacket(e);break;default:ie.throwErr(ie.ERR_CONNECTION_INVALID_PACKET)}}async _recvPacket(){for(;;){let e=await this.ntAdapter.receive();if(!e)break;if(this._processPacket(e),e.type!==M.NSPTCNL)return e}}_sendPacket(e){this.ntAdapter.send(e)}sendBreak(){if(!this.isBreak){if(!this.connected){this.isBreak=!0,this.breakPosted=!0;return}this.isBreak=!0,this.markerPkt.prepare(M.NSPMKTD1,M.NIQIMARK),this._sendPacket(this.markerPkt.buf)}}async reset(){for(this.breakPosted&&(this.markerPkt.prepare(M.NSPMKTD1,M.NIQBMARK),this._sendPacket(this.markerPkt.buf),this.breakPosted=!1),this.markerPkt.prepare(M.NSPMKTD1,M.NIQRMARK),this._sendPacket(this.markerPkt.buf);!this.isReset;)await this._recvPacket();this.sndDatapkt.dataPtr=this.sndDatapkt.dataLen=M.NSPDADAT,this.sndDatapkt.offset=this.sndDatapkt.dataPtr,this.sndDatapkt.len=this.sndDatapkt.bufLen,this.isBreak=this.isReset=!1}async recvPacket(){return await this._recvPacket()}syncRecvPacket(){for(;this.ntAdapter.packets.length>0;){let e=this.ntAdapter.syncReceive();if(!e)break;if(this._processPacket(e),e.type!==M.NSPTCNL)return e}}_send(e,t,s){if(this.isBreak)return;let r=0;for(this.sndDatapkt.dataLen=this.sndDatapkt.offset,(this.sndDatapkt.dataLen<this.sndDatapkt.bufLen||!this.sndDatapkt.bufLen)&&(r=this.sndDatapkt.fillBuf(e,t,s),s-=r,t+=r,this.sndDatapkt.offset=this.sndDatapkt.dataLen);s;){if(this._sendPacket(this.sndDatapkt.dataBuf),this.isBreak)return;this.sndDatapkt.dataLen=this.sndDatapkt.dataPtr,this.sndDatapkt.offset=this.sndDatapkt.dataPtr,r=this.sndDatapkt.fillBuf(e,t,s),s-=r,t+=r,this.sndDatapkt.offset=this.sndDatapkt.dataLen}}flush(){this.isBreak||(this.sndDatapkt.dataLen=this.sndDatapkt.offset,this.sndDatapkt.prepare2Send(),this._sendPacket(BN.from(this.sndDatapkt.dataBuf)),this.sndDatapkt.dataLen=this.sndDatapkt.dataPtr,this.sndDatapkt.offset=this.sndDatapkt.dataPtr)}async connect(e){let t=e.connectString?e.connectString:e.connectionString,s=await jo(t,e.configDir),r;try{r=await this.getAddress(s,e)}catch(_){_.message=="All options tried"?ie.throwErr(ie.ERR_INVALID_CONNECT_STRING_PARAMETERS,"Ensure the ADDRESS parameters have been entered correctly, the most likely incorrect parameter is the host name"):ie.throwErr(ie.ERR_INVALID_CONNECT_STRING_PARAMETERS,_.message)}await this.connect1(r,s,e)}disconnect(e){this.connected&&(e!=M.NSFIMM&&!this.ntAdapter.err&&(this.sndDatapkt.dataLen=this.sndDatapkt.offset,this.sndDatapkt.prepare2Send(M.NSPDAFEOF),this._sendPacket(this.sndDatapkt.dataBuf)),this.ntAdapter.disconnect(e),this.ntAdapter=null,this.connected=!1)}getOption(e){switch(e){case M.NS_MOREDATA:return this.ntAdapter.packets.length>0;case M.SVCNAME:return lt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"]);case M.SID:return lt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SID"]);case M.SERVERTYPE:return lt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVER"]);case M.REMOTEADDR:return this.ntAdapter?this.ntAdapter.getOption(e):null;case M.CONNCLASS:return lt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","POOL_CONNECTION_CLASS"]);case M.PURITY:return lt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","POOL_PURITY"]);case M.HEALTHCHECK:return this.connected&&this.ntAdapter.connected&&!this.ntAdapter.err;default:ie.throwErr(ie.ERR_INTERNAL,"getOption not supported for opcode "+e)}}recvInbandNotif(){let e=0;if(this.controlPkt.errno)return e=this.controlPkt.errno,e;if(this.getOption(M.HEALTHCHECK))if(this.getOption(M.NS_MOREDATA)){let t=this.ntAdapter.syncReceive();return t.type==M.NSPTCNL?(this.controlPkt.fromPacket(t),e=this.controlPkt.errno,e):(this.ntAdapter.packets.unshift(t),0)}else return 0;else return ie.ERR_CONNECTION_CLOSED}};T(Zo,"NetworkSession");var Jo=Zo;wN.exports={NetworkSession:Jo,resolveAddress:jo,getConnectionInfo:lf}});var MN=m((Dm,ta)=>{"use strict";var{Buffer:Sf}=require("buffer"),ye=Be(),hf=As(),Af=new RegExp('(?<=:)\\s*((?:".*?")|(?:[\\p{L}][\\p{L}\\p{Nd}_\\$#]*)|\\p{Nd}+)',"gu"),uf=/(?<=\bRETURN(?:ING)?\b)/si,Pf=/(?<=\bINTO\b)/gsi,ff=/--.*/g,df=/\/\*.*?\*\//sg,pf=/'.*?'/sg,sa=class sa{constructor(e,t=!1){this.bindName=e,this.isReturnBind=t,this.maxSize=0,this.numElements=0,this.maxArraySize=0,this.type=null,this.isArray=!1,this.dir=ye.BIND_IN,this.bindVar=null}};T(sa,"BindInfo");var vs=sa;ta.exports.BindInfo=vs;var Qr=class Qr{constructor(){this.sql="",this.sqlBytes=[],this.sqlLength=0,this.cursorId=0,this.requiresDefine=!1,this.isQuery=!1,this.isPlSql=!1,this.isDml=!1,this.isDdl=!1,this.isReturning=!1,this.bindInfoList=[],this.queryVars=[],this.bindInfoDict=new Map,this.requiresFullExecute=!1,this.noPrefetch=!1,this.returnToCache=!1,this.numColumns=0,this.lastRowIndex,this.lastRowid,this.moreRowsToFetch=!0,this.inUse=!1,this.bufferRowIndex=0,this.bufferRowCount=0,this.statementType=ye.STMT_TYPE_UNKNOWN}_copy(){let e=new Qr;e.sql=this.sql,e.sqlBytes=this.sqlBytes,e.sqlLength=this.sqlLength,e.isQuery=this.isQuery,e.isPlSql=this.isPlSql,e.isDml=this.isDml,e.isDdl=this.isDdl,e.isReturning=this.isReturning,e.bindInfoList=[];for(let s of this.bindInfoList){let r=new vs(s.bindName,s.isReturnBind);e.bindInfoList.push(r)}let t=e.bindInfoDict=new Map;for(let s of e.bindInfoList)t.has(s.bindName)?t.get(s.bindName).push(s):t.set(s.bindName,[s]);return e.returnToCache=!1,e}_determineStatementType(e){e=hf.cleanSql(e);let t=e.trim().trimStart("(").substring(0,10).split(" ");if(t.length>0){let s=t[0].toUpperCase();["DECLARE","BEGIN","CALL"].includes(s)?(this.isPlSql=!0,s==="DECLARE"?this.statementType=ye.STMT_TYPE_DECLARE:s==="BEGIN"?this.statementType=ye.STMT_TYPE_BEGIN:s==="CALL"&&(this.statementType=ye.STMT_TYPE_CALL)):["SELECT","WITH"].includes(s)?(this.isQuery=!0,s==="SELECT"&&(this.statementType=ye.STMT_TYPE_SELECT)):["INSERT","UPDATE","DELETE","MERGE"].includes(s)?(this.isDml=!0,s==="INSERT"?this.statementType=ye.STMT_TYPE_INSERT:s==="UPDATE"?this.statementType=ye.STMT_TYPE_UPDATE:s==="DELETE"?this.statementType=ye.STMT_TYPE_DELETE:s==="MERGE"&&(this.statementType=ye.STMT_TYPE_MERGE)):["CREATE","ALTER","DROP","TRUNCATE"].includes(s)?(this.isDdl=!0,s==="CREATE"?this.statementType=ye.STMT_TYPE_CREATE:s==="ALTER"?this.statementType=ye.STMT_TYPE_ALTER:s==="DROP"&&(this.statementType=ye.STMT_TYPE_DROP)):s==="COMMIT"?this.statementType=ye.STMT_TYPE_COMMIT:s==="ROLLBACK"?this.statementType=ye.STMT_TYPE_ROLLBACK:s==="MERGE"?this.statementType=ye.STMT_TYPE_MERGE:this.statementType=ye.STMT_TYPE_UNKNOWN}}_prepare(e){this.sql=e,this.sqlBytes=Sf.from(this.sql,"utf8"),this.sqlLength=this.sqlBytes.length,e=e.replace(pf,"'S'"),e=e.replace(ff,""),e=e.replace(df,""),this._determineStatementType(e);let t;if(this.isQuery||this.isDml||this.isPlSql){let s=e;if(this.isDml){let r,_=-1,o=e.search(uf),a=Pf;for(;(r=a.exec(e.slice(o)))!=null;)_=r.index,a.lastIndex=r.index+1;o>-1&&_>-1&&(_=o+_,s=e.slice(0,_),t=e.slice(_))}this._addBinds(s,!1),t&&(this.isReturning=!0,this._addBinds(t,!0))}}_addBinds(e,t){let s=[...e.matchAll(Af)],r;s.forEach(_=>{if(_[0].startsWith('"')&&_[0].endsWith('"')?r=_[0].substring(1,_[0].length-1):r=_[0].trim().toUpperCase(),this.isPlSql&&this.bindInfoDict.has(r))return;let o=new vs(r,t);this.bindInfoList.push(o),this.bindInfoDict.has(o.bindName)?this.bindInfoDict.get(o.bindName).push(o):this.bindInfoDict.set(o.bindName,[o])})}_setVariable(e,t){(t.maxSize!==e.maxSize||t.dir!==e.dir||t.isArray!==e.isArray||t.values.length>e.numElements||t.type!=e.type||t.maxArraySize!=e.maxArraySize)&&(e.isArray=t.isArray,e.numElements=t.values.length,e.maxSize=t.maxSize,e.type=t.type,e.dir=t.dir,e.maxArraySize=t.maxArraySize,this.requiresFullExecute=!0),e.bindVar=t}};T(Qr,"Statement");var ea=Qr;ta.exports.Statement=ea});var xN=m((Im,VN)=>{"use strict";var{Buffer:j}=require("buffer"),ot=require("crypto"),jr="aes-256-cbc",Rf=j.from([0,1]),ia=class ia{_decrypt(e,t){let s=j.alloc(16,0),r=ot.createDecipheriv(jr,e,s);r.setAutoPadding(!1);let _=r.update(t);return _=j.concat([_,r.final()]),_}_encrypt(e,t,s){let r=16,_=j.alloc(r,0),o=r-t.length%r,a=j.alloc(o,o);o>0&&(s?t+=j.alloc(o):t=j.concat([t,a]));let c=ot.createCipheriv(jr,e,_),N=c.update(t);return N=j.concat([N,c.final()]),s||(N=N.slice(0,t.length)),t.fill(0),N}_setEncryptedPasswordBuffers(e,t,s,r){let _=j.alloc(16);ot.randomFillSync(_,0,16);let o=j.concat([_,e]);if(r.encodedPassword=this._encrypt(s,o),o.fill(0),r.encodedPassword=r.encodedPassword.slice().toString("hex").toUpperCase(),t){let a=j.concat([_,t]);r.encodedNewPassword=this._encrypt(s,a),a.fill(0),r.encodedNewPassword=r.encodedNewPassword.slice().toString("hex").toUpperCase()}e.fill(0),t&&t.fill(0)}updateVerifierData(e,t,s,r,_){let o=32,a="sha512",c=j.from(e.AUTH_VFR_DATA,"hex"),N=j.from(e.AUTH_SESSKEY,"hex"),E=Number(e.AUTH_PBKDF2_VGEN_COUNT),P=j.from(t,"utf8"),f,u;if(r){jr="aes-192-cbc",o=24,a="sha1";let g=ot.createHash(a);g.update(P),g.update(c);let y=g.digest();f=j.alloc(y.length+4),y.copy(f,0,0,y.length)}else{jr="aes-256-cbc";let g=j.from("AUTH_PBKDF2_SPEEDY_KEY","utf8"),y=j.concat([c,g]);u=ot.pbkdf2Sync(P,y,E,64,"sha512");let K=ot.createHash(a);K.update(u),K.update(c),f=K.digest().slice(0,o)}let S;s&&(S=j.from(s,"utf8"));let A=this._decrypt(f,N),D=j.alloc(A.length);ot.randomFillSync(D);let h=this._encrypt(f,D);if(A.length===48){_.sessionKey=h.slice().toString("hex").toUpperCase().slice(0,96);let g=j.alloc(24);for(let q=16;q<=40;q++)g[q-16]=A[q]^D[q];let y=ot.createHash("md5").update(g.subarray(0,16)).digest(),K=ot.createHash("md5").update(g.subarray(16)).digest();_.comboKey=j.concat([y,K]).slice(0,o)}else{_.sessionKey=h.slice().toString("hex").toUpperCase().slice(0,64);let g=j.from(e.AUTH_PBKDF2_CSK_SALT,"hex");E=Number(e.AUTH_PBKDF2_SDER_COUNT);let K=j.concat([D.slice(0,o),A.slice(0,o)]).toString("hex").toUpperCase(),q=j.from(K,"utf8");_.comboKey=ot.pbkdf2Sync(q,g,E,o,"sha512")}let C=j.alloc(16);if(!r){ot.randomFillSync(C,0,16);let g=j.concat([C,u]);_.speedyKey=this._encrypt(_.comboKey,g),_.speedyKey=_.speedyKey.slice(0,80).toString("hex").toUpperCase()}this._setEncryptedPasswordBuffers(P,S,_.comboKey,_)}getEncryptedJSWPData(e,t){let s=this._encrypt(e,t,!0);return s=s.slice().toString("hex").toUpperCase(),s=j.concat([s,Rf]),s}updatePasswordsWithComboKey(e,t,s,r){let _=j.from(e,"utf8"),o;t&&(o=j.from(t,"utf8")),this._setEncryptedPasswordBuffers(_,o,s,r)}};T(ia,"EncryptDecrypt");var ra=ia,Df=new ra;VN.exports=Df});var HN=m((Om,GN)=>{"use strict";var{Buffer:na}=require("buffer"),v=ae(),FN=U(),kN=require("process"),_a=xN(),mf=nt(),bN=As(),Jr=bN.CLIENT_INFO,If=require("crypto"),aa=class aa extends mf{constructor(e,t){super(e),this.functionCode=v.TNS_FUNC_AUTH_PHASE_ONE,this.messageType=v.TNS_MSG_TYPE_FUNCTION,this.sessionData={},this.conn=e,this.sessionKey="",this.encodedPassword="",this.changePassword=!1,Object.defineProperty(this,"password",{enumerable:!1,value:t.password}),this.username=t.user,this.username===void 0?this.username="":this.username=this.username.trim(),this.schemaUser="",this.proxyUser="",this.proxyStatus=-1,this.username.length!==0&&(this.proxyStatusObj=bN.checkProxyUserValidity(this.username),this.proxyStatusObj.status===0&&(this.proxyStatus=0,this.proxyUser=this.proxyStatusObj.proxyUser,this.schemaUser=this.proxyStatusObj.schemaUser,this.username=this.proxyUser)),this.newPassword=t.newPassword,t.changePassword&&(this.changePassword=!0,this.functionCode=v.TNS_FUNC_AUTH_PHASE_TWO),this.username?this.userByteLen=na.byteLength(this.username):this.userByteLen=0,this.token=t.token,this.token&&(this.functionCode=v.TNS_FUNC_AUTH_PHASE_TWO),this.privateKey=t.privateKey,this.privateKey&&(this.privateKey=`-----BEGIN PRIVATE KEY-----
`+this.privateKey,this.privateKey=this.privateKey+`
-----END PRIVATE KEY-----`),this.serviceName=this.conn.serviceName,this.remoteAddress=this.conn.remoteAddress,this.setAuthMode()}setAuthMode(){this.newPassword||(this.authMode=v.TNS_AUTH_MODE_LOGON),this.conn.privilege&v.SYSDBA&&(this.authMode|=v.TNS_AUTH_MODE_SYSDBA),this.conn.privilege&v.SYSOPER&&(this.authMode|=v.TNS_AUTH_MODE_SYSOPER),this.conn.privilege&v.SYSASM&&(this.authMode|=v.TNS_AUTH_MODE_SYSASM),this.conn.privilege&v.SYSBKP&&(this.authMode|=v.TNS_AUTH_MODE_SYSBKP),this.conn.privilege&v.SYSDG&&(this.authMode|=v.TNS_AUTH_MODE_SYSDGD),this.conn.privilege&v.SYSKM&&(this.authMode|=v.TNS_AUTH_MODE_SYSKMT),this.conn.privilege&v.SYSRAC&&(this.authMode|=v.TNS_AUTH_MODE_SYSRAC),this.privateKey&&(this.authMode|=v.TNS_AUTH_MODE_IAM_TOKEN),this.newPassword&&(this.authMode|=v.TNS_AUTH_MODE_CHANGE_PASSWORD),this.token||(this.authMode|=v.TNS_AUTH_MODE_WITH_PASSWORD)}getAlterTimezoneStatement(){let e,t;if(kN.env.ORA_SDTZ)t=kN.env.ORA_SDTZ;else{let r=new Date().getTimezoneOffset(),_=Math.trunc(r/60),o=Math.abs((r-_*60)%60);_<0?(e="+",_=-_):e="-",_=_.toLocaleString("en-US",{minimumIntegerDigits:2}),t=`${e}${_}:${o}`}return`ALTER SESSION SET TIME_ZONE ='${t}'\0`}encode(e){let t=!1;if(this.writeFunctionHeader(e),this.userByteLen>0?e.writeUInt8(1):e.writeUInt8(0),e.writeUB4(this.userByteLen),e.writeUB4(this.authMode),this.functionCode===v.TNS_FUNC_AUTH_PHASE_ONE)e.writeUInt8(1),e.writeUB4(5),e.writeUInt8(0),e.writeUInt8(1),this.userByteLen>0&&e.writeBytesWithLength(na.from(this.username)),e.writeKeyValue("AUTH_TERMINAL","unknown"),e.writeKeyValue("AUTH_PROGRAM_NM",Jr.program),e.writeKeyValue("AUTH_MACHINE",Jr.hostName),e.writeKeyValue("AUTH_PID",Jr.pid),e.writeKeyValue("AUTH_SID",Jr.userName);else{let s=0;if(this.changePassword?(_a.updatePasswordsWithComboKey(this.password,this.newPassword,this.conn.comboKey,this),s=2):(s=4,this.token?s+=1:(s+=2,this.verifierType===v.TNS_VERIFIER_TYPE_11G_1||this.verifierType===v.TNS_VERIFIER_TYPE_11G_2?t=!0:this.verifierType!==v.TNS_VERIFIER_TYPE_12C?FN.throwErr(FN.ERR_UNSUPPORTED_VERIFIER_TYPE,this.verifierType.toString(16)):s+=1,_a.updateVerifierData(this.sessionData,this.password,this.newPassword,t,this),this.conn.comboKey=this.comboKey,this.newPassword&&(s+=1)),this.privateKey&&(s+=2),this.conn.connClass&&(s+=1),this.conn.purity&&(s+=1),this.conn.jdwpData&&(this.encryptedJDWPData=_a.getEncryptedJSWPData(this.sessionKey,this.conn.jdwpData),s+=1),this.schemaUser.length!==0&&(s+=1)),e.writeUInt8(1),e.writeUB4(s),e.writeUInt8(1),e.writeUInt8(1),this.userByteLen>0&&e.writeBytesWithLength(na.from(this.username)),this.token?e.writeKeyValue("AUTH_TOKEN",this.token):this.changePassword||(e.writeKeyValue("AUTH_SESSKEY",this.sessionKey,1),t||e.writeKeyValue("AUTH_PBKDF2_SPEEDY_KEY",this.speedyKey)),this.changePassword||(e.writeKeyValue("SESSION_CLIENT_CHARSET","873"),e.writeKeyValue("SESSION_CLIENT_DRIVER_NAME",v.DRIVER_NAME),e.writeKeyValue("SESSION_CLIENT_VERSION",v.CLIENT_VERSION.toString()),e.writeKeyValue("AUTH_ALTER_SESSION",this.getAlterTimezoneStatement(),1)),this.encodedPassword&&e.writeKeyValue("AUTH_PASSWORD",this.encodedPassword),this.proxyStatus===0&&e.writeKeyValue("PROXY_CLIENT_NAME",this.schemaUser),this.encodedNewPassword&&e.writeKeyValue("AUTH_NEWPASSWORD",this.encodedNewPassword),this.conn.connClass&&e.writeKeyValue("AUTH_KPPL_CONN_CLASS",this.conn.connClass),this.conn.purity&&e.writeKeyValue("AUTH_KPPL_PURITY",""+this.conn.purity),this.privateKey){let o="date: "+new Date().toGMTString()+`
(request-target): `+this.serviceName+`
host: `+this.remoteAddress,a=If.createSign("RSA-SHA256").update(o).sign(this.privateKey,"base64");e.writeKeyValue("AUTH_HEADER",o),e.writeKeyValue("AUTH_SIGNATURE",a)}this.conn.jdwpData&&e.writeKeyValue("AUTH_ORA_DEBUG_JDWP",this.encryptedJDWPData)}}processReturnParameter(e){let t=e.readUB2();for(let s=0;s<t;s++){e.skipUB4();let r=e.readStr(v.CSFRM_IMPLICIT),_="";e.readUB4()>0&&(_=e.readStr(v.CSFRM_IMPLICIT));let a=e.readUB4();r==="AUTH_VFR_DATA"&&(this.verifierType=a),this.sessionData[r]=_}if(this.functionCode===v.TNS_FUNC_AUTH_PHASE_ONE)this.functionCode=v.TNS_FUNC_AUTH_PHASE_TWO;else{let s,r,_,o,a;this.conn.sessionID=this.sessionData.AUTH_SESSION_ID,this.conn.serialNum=this.sessionData.AUTH_SERIAL_NUM;let c=Number(this.sessionData.AUTH_VERSION_NO);s=c>>24&255,e.caps.ttcFieldVersion>=v.TNS_CCAP_FIELD_VERSION_18_1_EXT_1?(r=c>>16&255,_=c>>12&15,o=c>>4&255,a=c&15):(r=c>>20&15,_=c>>12&255,o=c>>8&15,a=c&255),this.conn.serverVersionString=s+"."+r+"."+_+"."+o+"."+a,this.conn.serverVersion=s*1e8+r*1e6+_*1e4+o*100+a*1}}};T(aa,"AuthMessage");var oa=aa;GN.exports=oa});var vN=m((Lm,qN)=>{"use strict";var Cf=nt(),Of=ae(),ca=class ca extends Cf{constructor(e){super(e),this.functionCode=Of.TNS_FUNC_COMMIT}encode(e){this.writeFunctionHeader(e)}};T(ca,"CommitMessage");var Ta=ca;qN.exports=Ta});var WN=m((Ym,KN)=>{"use strict";var n=ae(),gf=nt(),la=class la extends gf{processMessage(e){for(;e.readUInt16BE()!==0;)e.readUInt16BE()!==0&&e.skipBytes(4)}encode(e){e.writeUInt8(n.TNS_MSG_TYPE_DATA_TYPES),e.writeUInt16LE(n.TNS_CHARSET_UTF8),e.writeUInt16LE(n.TNS_CHARSET_UTF8),e.writeUInt8(n.TNS_ENCODING_MULTI_BYTE|n.TNS_ENCODING_CONV_LENGTH),e.writeBytesWithLength(e.caps.compileCaps),e.writeBytesWithLength(e.caps.runtimeCaps);for(let t of Lf)e.writeUInt16BE(t[0]),e.writeUInt16BE(t[1]),e.writeUInt16BE(t[2]),e.writeUInt16BE(0);e.writeUInt16BE(0)}};T(la,"DataTypeMessage");var Ea=la,Lf=[[n.TNS_DATA_TYPE_VARCHAR,n.TNS_DATA_TYPE_VARCHAR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_NUMBER,n.TNS_DATA_TYPE_NUMBER,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_LONG,n.TNS_DATA_TYPE_LONG,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DATE,n.TNS_DATA_TYPE_DATE,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_RAW,n.TNS_DATA_TYPE_RAW,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_LONG_RAW,n.TNS_DATA_TYPE_LONG_RAW,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_UB2,n.TNS_DATA_TYPE_UB2,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_UB4,n.TNS_DATA_TYPE_UB4,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SB1,n.TNS_DATA_TYPE_SB1,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SB2,n.TNS_DATA_TYPE_SB2,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SB4,n.TNS_DATA_TYPE_SB4,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SWORD,n.TNS_DATA_TYPE_SWORD,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_UWORD,n.TNS_DATA_TYPE_UWORD,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PTRB,n.TNS_DATA_TYPE_PTRB,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PTRW,n.TNS_DATA_TYPE_PTRW,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TIDDEF,n.TNS_DATA_TYPE_TIDDEF,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ROWID,n.TNS_DATA_TYPE_ROWID,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AMS,n.TNS_DATA_TYPE_AMS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_BRN,n.TNS_DATA_TYPE_BRN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_CWD,n.TNS_DATA_TYPE_CWD,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_NEW_OAC,n.TNS_DATA_TYPE_NEW_OAC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OER8,n.TNS_DATA_TYPE_OER8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_FUN,n.TNS_DATA_TYPE_FUN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AUA,n.TNS_DATA_TYPE_AUA,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RXH7,n.TNS_DATA_TYPE_RXH7,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_NA6,n.TNS_DATA_TYPE_NA6,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_BRP,n.TNS_DATA_TYPE_BRP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_BRV,n.TNS_DATA_TYPE_BRV,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KVA,n.TNS_DATA_TYPE_KVA,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_CLS,n.TNS_DATA_TYPE_CLS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_CUI,n.TNS_DATA_TYPE_CUI,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DFN,n.TNS_DATA_TYPE_DFN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DQR,n.TNS_DATA_TYPE_DQR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSC,n.TNS_DATA_TYPE_DSC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_EXE,n.TNS_DATA_TYPE_EXE,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_FCH,n.TNS_DATA_TYPE_FCH,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_GBV,n.TNS_DATA_TYPE_GBV,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_GEM,n.TNS_DATA_TYPE_GEM,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_GIV,n.TNS_DATA_TYPE_GIV,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OKG,n.TNS_DATA_TYPE_OKG,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_HMI,n.TNS_DATA_TYPE_HMI,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_INO,n.TNS_DATA_TYPE_INO,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_LNF,n.TNS_DATA_TYPE_LNF,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ONT,n.TNS_DATA_TYPE_ONT,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OPE,n.TNS_DATA_TYPE_OPE,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OSQ,n.TNS_DATA_TYPE_OSQ,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SFE,n.TNS_DATA_TYPE_SFE,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SPF,n.TNS_DATA_TYPE_SPF,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_VSN,n.TNS_DATA_TYPE_VSN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_UD7,n.TNS_DATA_TYPE_UD7,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSA,n.TNS_DATA_TYPE_DSA,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PIN,n.TNS_DATA_TYPE_PIN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PFN,n.TNS_DATA_TYPE_PFN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PPT,n.TNS_DATA_TYPE_PPT,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_STO,n.TNS_DATA_TYPE_STO,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ARC,n.TNS_DATA_TYPE_ARC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_MRS,n.TNS_DATA_TYPE_MRS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_MRT,n.TNS_DATA_TYPE_MRT,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_MRG,n.TNS_DATA_TYPE_MRG,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_MRR,n.TNS_DATA_TYPE_MRR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_MRC,n.TNS_DATA_TYPE_MRC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_VER,n.TNS_DATA_TYPE_VER,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_LON2,n.TNS_DATA_TYPE_LON2,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_INO2,n.TNS_DATA_TYPE_INO2,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ALL,n.TNS_DATA_TYPE_ALL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_UDB,n.TNS_DATA_TYPE_UDB,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AQI,n.TNS_DATA_TYPE_AQI,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ULB,n.TNS_DATA_TYPE_ULB,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ULD,n.TNS_DATA_TYPE_ULD,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SID,n.TNS_DATA_TYPE_SID,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_NA7,n.TNS_DATA_TYPE_NA7,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AL7,n.TNS_DATA_TYPE_AL7,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_K2RPC,n.TNS_DATA_TYPE_K2RPC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XDP,n.TNS_DATA_TYPE_XDP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OKO8,n.TNS_DATA_TYPE_OKO8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_UD12,n.TNS_DATA_TYPE_UD12,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AL8,n.TNS_DATA_TYPE_AL8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_LFOP,n.TNS_DATA_TYPE_LFOP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_FCRT,n.TNS_DATA_TYPE_FCRT,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DNY,n.TNS_DATA_TYPE_DNY,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OPR,n.TNS_DATA_TYPE_OPR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PLS,n.TNS_DATA_TYPE_PLS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XID,n.TNS_DATA_TYPE_XID,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TXN,n.TNS_DATA_TYPE_TXN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DCB,n.TNS_DATA_TYPE_DCB,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_CCA,n.TNS_DATA_TYPE_CCA,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_WRN,n.TNS_DATA_TYPE_WRN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TLH,n.TNS_DATA_TYPE_TLH,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TOH,n.TNS_DATA_TYPE_TOH,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_FOI,n.TNS_DATA_TYPE_FOI,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SID2,n.TNS_DATA_TYPE_SID2,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TCH,n.TNS_DATA_TYPE_TCH,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PII,n.TNS_DATA_TYPE_PII,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PFI,n.TNS_DATA_TYPE_PFI,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PPU,n.TNS_DATA_TYPE_PPU,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PTE,n.TNS_DATA_TYPE_PTE,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RXH8,n.TNS_DATA_TYPE_RXH8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_N12,n.TNS_DATA_TYPE_N12,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AUTH,n.TNS_DATA_TYPE_AUTH,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KVAL,n.TNS_DATA_TYPE_KVAL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_FGI,n.TNS_DATA_TYPE_FGI,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSY,n.TNS_DATA_TYPE_DSY,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYR8,n.TNS_DATA_TYPE_DSYR8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYH8,n.TNS_DATA_TYPE_DSYH8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYL,n.TNS_DATA_TYPE_DSYL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYT8,n.TNS_DATA_TYPE_DSYT8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYV8,n.TNS_DATA_TYPE_DSYV8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYP,n.TNS_DATA_TYPE_DSYP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYF,n.TNS_DATA_TYPE_DSYF,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYK,n.TNS_DATA_TYPE_DSYK,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYY,n.TNS_DATA_TYPE_DSYY,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYQ,n.TNS_DATA_TYPE_DSYQ,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYC,n.TNS_DATA_TYPE_DSYC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYA,n.TNS_DATA_TYPE_DSYA,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OT8,n.TNS_DATA_TYPE_OT8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYTY,n.TNS_DATA_TYPE_DSYTY,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AQE,n.TNS_DATA_TYPE_AQE,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KV,n.TNS_DATA_TYPE_KV,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AQD,n.TNS_DATA_TYPE_AQD,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AQ8,n.TNS_DATA_TYPE_AQ8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RFS,n.TNS_DATA_TYPE_RFS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RXH10,n.TNS_DATA_TYPE_RXH10,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPN,n.TNS_DATA_TYPE_KPN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPDNR,n.TNS_DATA_TYPE_KPDNR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYD,n.TNS_DATA_TYPE_DSYD,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYS,n.TNS_DATA_TYPE_DSYS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYR,n.TNS_DATA_TYPE_DSYR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYH,n.TNS_DATA_TYPE_DSYH,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYT,n.TNS_DATA_TYPE_DSYT,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DSYV,n.TNS_DATA_TYPE_DSYV,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AQM,n.TNS_DATA_TYPE_AQM,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OER11,n.TNS_DATA_TYPE_OER11,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AQL,n.TNS_DATA_TYPE_AQL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OTC,n.TNS_DATA_TYPE_OTC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KFNO,n.TNS_DATA_TYPE_KFNO,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KFNP,n.TNS_DATA_TYPE_KFNP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KGT8,n.TNS_DATA_TYPE_KGT8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RASB4,n.TNS_DATA_TYPE_RASB4,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RAUB2,n.TNS_DATA_TYPE_RAUB2,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RAUB1,n.TNS_DATA_TYPE_RAUB1,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RATXT,n.TNS_DATA_TYPE_RATXT,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RSSB4,n.TNS_DATA_TYPE_RSSB4,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RSUB2,n.TNS_DATA_TYPE_RSUB2,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RSUB1,n.TNS_DATA_TYPE_RSUB1,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RSTXT,n.TNS_DATA_TYPE_RSTXT,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RIDL,n.TNS_DATA_TYPE_RIDL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_GLRDD,n.TNS_DATA_TYPE_GLRDD,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_GLRDG,n.TNS_DATA_TYPE_GLRDG,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_GLRDC,n.TNS_DATA_TYPE_GLRDC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OKO,n.TNS_DATA_TYPE_OKO,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DPP,n.TNS_DATA_TYPE_DPP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DPLS,n.TNS_DATA_TYPE_DPLS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DPMOP,n.TNS_DATA_TYPE_DPMOP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_STAT,n.TNS_DATA_TYPE_STAT,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RFX,n.TNS_DATA_TYPE_RFX,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_FAL,n.TNS_DATA_TYPE_FAL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_CKV,n.TNS_DATA_TYPE_CKV,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DRCX,n.TNS_DATA_TYPE_DRCX,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KGH,n.TNS_DATA_TYPE_KGH,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AQO,n.TNS_DATA_TYPE_AQO,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OKGT,n.TNS_DATA_TYPE_OKGT,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPFC,n.TNS_DATA_TYPE_KPFC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_FE2,n.TNS_DATA_TYPE_FE2,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SPFP,n.TNS_DATA_TYPE_SPFP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DPULS,n.TNS_DATA_TYPE_DPULS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AQA,n.TNS_DATA_TYPE_AQA,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPBF,n.TNS_DATA_TYPE_KPBF,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TSM,n.TNS_DATA_TYPE_TSM,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_MSS,n.TNS_DATA_TYPE_MSS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPC,n.TNS_DATA_TYPE_KPC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_CRS,n.TNS_DATA_TYPE_CRS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KKS,n.TNS_DATA_TYPE_KKS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KSP,n.TNS_DATA_TYPE_KSP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KSPTOP,n.TNS_DATA_TYPE_KSPTOP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KSPVAL,n.TNS_DATA_TYPE_KSPVAL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PSS,n.TNS_DATA_TYPE_PSS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_NLS,n.TNS_DATA_TYPE_NLS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ALS,n.TNS_DATA_TYPE_ALS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KSDEVTVAL,n.TNS_DATA_TYPE_KSDEVTVAL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KSDEVTTOP,n.TNS_DATA_TYPE_KSDEVTTOP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPSPP,n.TNS_DATA_TYPE_KPSPP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KOL,n.TNS_DATA_TYPE_KOL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_LST,n.TNS_DATA_TYPE_LST,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ACX,n.TNS_DATA_TYPE_ACX,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SCS,n.TNS_DATA_TYPE_SCS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RXH,n.TNS_DATA_TYPE_RXH,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPDNS,n.TNS_DATA_TYPE_KPDNS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPDCN,n.TNS_DATA_TYPE_KPDCN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPNNS,n.TNS_DATA_TYPE_KPNNS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPNCN,n.TNS_DATA_TYPE_KPNCN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPS,n.TNS_DATA_TYPE_KPS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_APINF,n.TNS_DATA_TYPE_APINF,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TEN,n.TNS_DATA_TYPE_TEN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSSCS,n.TNS_DATA_TYPE_XSSCS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSSSO,n.TNS_DATA_TYPE_XSSSO,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSSAO,n.TNS_DATA_TYPE_XSSAO,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KSRPC,n.TNS_DATA_TYPE_KSRPC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KVL,n.TNS_DATA_TYPE_KVL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSSDEF,n.TNS_DATA_TYPE_XSSDEF,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PDQCINV,n.TNS_DATA_TYPE_PDQCINV,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PDQIDC,n.TNS_DATA_TYPE_PDQIDC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPDQCSTA,n.TNS_DATA_TYPE_KPDQCSTA,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPRS,n.TNS_DATA_TYPE_KPRS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPDQIDC,n.TNS_DATA_TYPE_KPDQIDC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RTSTRM,n.TNS_DATA_TYPE_RTSTRM,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SESSGET,n.TNS_DATA_TYPE_SESSGET,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SESSREL,n.TNS_DATA_TYPE_SESSREL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SESSRET,n.TNS_DATA_TYPE_SESSRET,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SCN6,n.TNS_DATA_TYPE_SCN6,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KECPA,n.TNS_DATA_TYPE_KECPA,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KECPP,n.TNS_DATA_TYPE_KECPP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SXA,n.TNS_DATA_TYPE_SXA,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KVARR,n.TNS_DATA_TYPE_KVARR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPNGN,n.TNS_DATA_TYPE_KPNGN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_BINARY_INTEGER,n.TNS_DATA_TYPE_NUMBER,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_FLOAT,n.TNS_DATA_TYPE_NUMBER,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_STR,n.TNS_DATA_TYPE_VARCHAR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_VNU,n.TNS_DATA_TYPE_NUMBER,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_PDN,n.TNS_DATA_TYPE_NUMBER,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_VCS,n.TNS_DATA_TYPE_VARCHAR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_VBI,n.TNS_DATA_TYPE_VARCHAR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OAC,n.TNS_DATA_TYPE_NEW_OAC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_UIN,n.TNS_DATA_TYPE_NUMBER,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_SLS,n.TNS_DATA_TYPE_NUMBER,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_LVC,n.TNS_DATA_TYPE_VARCHAR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_LVB,n.TNS_DATA_TYPE_RAW,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_CHAR,n.TNS_DATA_TYPE_CHAR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AVC,n.TNS_DATA_TYPE_CHAR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_BINARY_FLOAT,n.TNS_DATA_TYPE_BINARY_FLOAT,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_BINARY_DOUBLE,n.TNS_DATA_TYPE_BINARY_DOUBLE,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_CURSOR,n.TNS_DATA_TYPE_CURSOR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RDD,n.TNS_DATA_TYPE_ROWID,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OSL,n.TNS_DATA_TYPE_OSL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_EXT_NAMED,n.TNS_DATA_TYPE_INT_NAMED,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_INT_NAMED,n.TNS_DATA_TYPE_INT_NAMED,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_EXT_REF,n.TNS_DATA_TYPE_INT_REF,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_INT_REF,n.TNS_DATA_TYPE_INT_REF,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_CLOB,n.TNS_DATA_TYPE_CLOB,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_BLOB,n.TNS_DATA_TYPE_BLOB,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_BFILE,n.TNS_DATA_TYPE_BFILE,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_CFILE,n.TNS_DATA_TYPE_CFILE,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_RSET,n.TNS_DATA_TYPE_CURSOR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_JSON,n.TNS_DATA_TYPE_JSON,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DJSON,n.TNS_DATA_TYPE_DJSON,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_CLV,n.TNS_DATA_TYPE_CLV,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DTR,n.TNS_DATA_TYPE_NUMBER,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_DUN,n.TNS_DATA_TYPE_NUMBER,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_DOP,n.TNS_DATA_TYPE_NUMBER,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_VST,n.TNS_DATA_TYPE_VARCHAR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ODT,n.TNS_DATA_TYPE_DATE,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_DOL,n.TNS_DATA_TYPE_NUMBER,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_TIME,n.TNS_DATA_TYPE_TIME,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TIME_TZ,n.TNS_DATA_TYPE_TIME_TZ,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TIMESTAMP,n.TNS_DATA_TYPE_TIMESTAMP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TIMESTAMP_TZ,n.TNS_DATA_TYPE_TIMESTAMP_TZ,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_INTERVAL_YM,n.TNS_DATA_TYPE_INTERVAL_YM,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_INTERVAL_DS,n.TNS_DATA_TYPE_INTERVAL_DS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_EDATE,n.TNS_DATA_TYPE_DATE,n.TNS_TYPE_REP_ORACLE],[n.TNS_DATA_TYPE_ETIME,n.TNS_DATA_TYPE_ETIME,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ETTZ,n.TNS_DATA_TYPE_ETTZ,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ESTAMP,n.TNS_DATA_TYPE_ESTAMP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ESTZ,n.TNS_DATA_TYPE_ESTZ,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_EIYM,n.TNS_DATA_TYPE_EIYM,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_EIDS,n.TNS_DATA_TYPE_EIDS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DCLOB,n.TNS_DATA_TYPE_CLOB,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DBLOB,n.TNS_DATA_TYPE_BLOB,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_DBFILE,n.TNS_DATA_TYPE_BFILE,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_UROWID,n.TNS_DATA_TYPE_UROWID,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TIMESTAMP_LTZ,n.TNS_DATA_TYPE_TIMESTAMP_LTZ,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_ESITZ,n.TNS_DATA_TYPE_TIMESTAMP_LTZ,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_UB8,n.TNS_DATA_TYPE_UB8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_PNTY,n.TNS_DATA_TYPE_INT_NAMED,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_BOOLEAN,n.TNS_DATA_TYPE_BOOLEAN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSNSOP,n.TNS_DATA_TYPE_XSNSOP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSATTR,n.TNS_DATA_TYPE_XSATTR,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSNS,n.TNS_DATA_TYPE_XSNS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_UB1ARRAY,n.TNS_DATA_TYPE_UB1ARRAY,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SESSSTATE,n.TNS_DATA_TYPE_SESSSTATE,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AC_REPLAY,n.TNS_DATA_TYPE_AC_REPLAY,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AC_CONT,n.TNS_DATA_TYPE_AC_CONT,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_IMPLRES,n.TNS_DATA_TYPE_IMPLRES,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_OER,n.TNS_DATA_TYPE_OER,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TXT,n.TNS_DATA_TYPE_TXT,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSSESSNS,n.TNS_DATA_TYPE_XSSESSNS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSATTOP,n.TNS_DATA_TYPE_XSATTOP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSCREOP,n.TNS_DATA_TYPE_XSCREOP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSDETOP,n.TNS_DATA_TYPE_XSDETOP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSDESOP,n.TNS_DATA_TYPE_XSDESOP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSSETSP,n.TNS_DATA_TYPE_XSSETSP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSSIDP,n.TNS_DATA_TYPE_XSSIDP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSPRIN,n.TNS_DATA_TYPE_XSPRIN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSKVL,n.TNS_DATA_TYPE_XSKVL,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSSSDEF2,n.TNS_DATA_TYPE_XSSSDEF2,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSNSOP2,n.TNS_DATA_TYPE_XSNSOP2,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_XSNS2,n.TNS_DATA_TYPE_XSNS2,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPDNREQ,n.TNS_DATA_TYPE_KPDNREQ,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPDNRNF,n.TNS_DATA_TYPE_KPDNRNF,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPNGNC,n.TNS_DATA_TYPE_KPNGNC,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPNRI,n.TNS_DATA_TYPE_KPNRI,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AQENQ,n.TNS_DATA_TYPE_AQENQ,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AQDEQ,n.TNS_DATA_TYPE_AQDEQ,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_AQJMS,n.TNS_DATA_TYPE_AQJMS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPDNRPAY,n.TNS_DATA_TYPE_KPDNRPAY,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPDNRACK,n.TNS_DATA_TYPE_KPDNRACK,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPDNRMP,n.TNS_DATA_TYPE_KPDNRMP,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_KPDNRDQ,n.TNS_DATA_TYPE_KPDNRDQ,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SCN,n.TNS_DATA_TYPE_SCN,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_SCN8,n.TNS_DATA_TYPE_SCN8,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_CHUNKINFO,n.TNS_DATA_TYPE_CHUNKINFO,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_UDS,n.TNS_DATA_TYPE_UDS,n.TNS_TYPE_REP_UNIVERSAL],[n.TNS_DATA_TYPE_TNP,n.TNS_DATA_TYPE_TNP,n.TNS_TYPE_REP_UNIVERSAL]];KN.exports=Ea});var XN=m((Um,zN)=>{"use strict";var yf=nt(),Yf=ae(),Sa=class Sa extends yf{constructor(e){super(e),this.functionCode=Yf.TNS_FUNC_LOGOFF}encode(e){this.writePiggybacks(e),this.writeFunctionHeader(e)}};T(Sa,"LogOffMessage");var Na=Sa;zN.exports=Na});var jN=m((Mm,QN)=>{"use strict";var Bf=nt(),Uf=ae(),Aa=class Aa extends Bf{constructor(e){super(e),this.functionCode=Uf.TNS_FUNC_PING}encode(e){this.writeFunctionHeader(e)}};T(Aa,"PingMessage");var ha=Aa;QN.exports=ha});var $N=m((xm,ZN)=>{"use strict";var JN=ae(),wf=nt(),Pa=class Pa extends wf{encode(e){e.writeUInt8(JN.TNS_MSG_TYPE_PROTOCOL),e.writeUInt8(6),e.writeUInt8(0),e.writeStr("node-oracledb"),e.writeUInt8(0)}decode(e){if(e.readUInt8()===JN.TNS_MSG_TYPE_PROTOCOL){e.skipBytes(2);let s=e.readUInt8();for(;s!==0;)s=e.readUInt8();e.skipBytes(2),e.skipUB1(1);let r=e.readUInt16LE();r>0&&e.skipBytes(r*5);let _=e.readUInt16BE(),o=e.readBytes(_),a=6+o[5]+o[6];e.caps.nCharsetId=(o[a+3]<<8)+o[a+4],e.caps.adjustForServerCompileCaps(e.readBytesWithLength()),e.caps.adjustForServerRuntimeCaps(e.readBytesWithLength())}}};T(Pa,"ProtocolMessage");var ua=Pa;ZN.exports=ua});var tS=m((km,eS)=>{"use strict";var Mf=nt(),Vf=ae(),da=class da extends Mf{constructor(e){super(e),this.functionCode=Vf.TNS_FUNC_ROLLBACK}encode(e){this.writeFunctionHeader(e)}};T(da,"RollbackMessage");var fa=da;eS.exports=fa});var iS=m((Gm,rS)=>{"use strict";var xf=nt(),sS=ae(),Ra=class Ra extends xf{constructor(e){super(e),this.functionCode=sS.TNS_FUNC_SESSION_RELEASE,this.messageType=sS.TNS_MSG_TYPE_ONEWAY_FN,this.sessReleaseMode=0}encode(e){this.writeFunctionHeader(e),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(this.sessReleaseMode)}decode(){}};T(Ra,"SessionReleaseMessage");var pa=Ra;rS.exports=pa});var _S=m((qm,nS)=>{"use strict";var Ff=HN(),kf=vN(),bf=WN(),Gf=w_(),Hf=x_(),qf=C_(),vf=XN(),Kf=jN(),Wf=$N(),zf=tS(),Xf=iS();nS.exports={AuthMessage:Ff,CommitMessage:kf,DataTypeMessage:bf,ExecuteMessage:Gf,FetchMessage:Hf,LobOpMessage:qf,LogOffMessage:vf,PingMessage:Kf,ProtocolMessage:Wf,RollbackMessage:zf,SessionReleaseMessage:Xf}});var ga=m((vm,cS)=>{"use strict";var{Buffer:oS}=require("buffer"),Qf=lr(),jf=b_(),Da=wr(),Jf=Ql(),{BaseBuffer:Zf}=Us(),{NetworkSession:$f,getConnectionInfo:ed}=$o(),{Statement:aS}=MN(),jt=As(),td=hs(),F=ae(),TS=require("process"),H=He(),Ce=U(),tt=_S(),sd=new global.FinalizationRegistry(i=>{i.disconnect()}),Ca=class Ca extends Zf{};T(Ca,"TDSBuffer");var ma=Ca,Oa=class Oa extends Qf{async close(){if(this._protocol.txnInProgress&&await this.rollback(),this._protocol.callTimeout=0,this._drcpEnabled&&(await this._sessRelease(),this._drcpEstablishSession=!0),this._pool&&!this._dropSess)await this._pool.release(this);else{if(!this._drcpEnabled){let e=new tt.LogOffMessage(this);await this._protocol._processMessage(e)}this.nscon.disconnect()}}async _sessRelease(){let e=new tt.SessionReleaseMessage(this);this.isPooled()||(e.sessReleaseMode=F.DRCP_DEAUTHENTICATE),await this._protocol._processMessage(e)}async _determineElementObjType(e){let t=[{name:"owner",type:H.DB_TYPE_VARCHAR,dir:F.BIND_IN,maxSize:128,values:[e.schema]},{name:"name",type:H.DB_TYPE_VARCHAR,dir:F.BIND_IN,maxSize:128,values:[e.name]},{name:"package_name",type:H.DB_TYPE_VARCHAR,dir:F.BIND_IN,maxSize:128,values:[e.packageName]}],s;e.packageName?s=`
        select
            elem_type_owner,
            elem_type_name,
            elem_type_package
        from all_plsql_coll_types
        where owner = :owner
          and type_name = :name
          and package_name = :package_name`:(t.pop(),s=`
        select
            elem_type_owner,
            elem_type_name
        from all_coll_types
        where owner = :owner
          and type_name = :name`);let r={connection:{_impl:this},prefetchRows:2},_=await this.execute(s,1,t,r,!1),o=await _.resultSet.getRows(1,r);await _.resultSet.close();let a=o[0];e.elementTypeClass=this._getDbObjectType(a[0],a[1],a[2]),e.elementTypeClass.partial&&this._partialDbObjectTypes.push(e.elementTypeClass)}async _parseElementType(e,t){let s,r,_=e.readUInt8();switch(_){case F.TNS_OBJ_TDS_TYPE_NUMBER:case F.TNS_OBJ_TDS_TYPE_FLOAT:t.elementType=H.DB_TYPE_NUMBER;break;case F.TNS_OBJ_TDS_TYPE_VARCHAR:case F.TNS_OBJ_TDS_TYPE_CHAR:t.maxSize=e.readUInt16BE(),s=_===F.TNS_OBJ_TDS_TYPE_VARCHAR?F.TNS_DATA_TYPE_VARCHAR:F.TNS_DATA_TYPE_CHAR,r=e.readUInt8(),t.elementType=H.getTypeByOraTypeNum(s,r);break;case F.TNS_OBJ_TDS_TYPE_RAW:t.elementType=H.DB_TYPE_RAW;break;case F.TNS_OBJ_TDS_TYPE_BINARY_FLOAT:t.elementType=H.DB_TYPE_BINARY_FLOAT;break;case F.TNS_OBJ_TDS_TYPE_BINARY_DOUBLE:t.elementType=H.DB_TYPE_BINARY_DOUBLE;break;case F.TNS_OBJ_TDS_TYPE_DATE:t.elementType=H.DB_TYPE_DATE;break;case F.TNS_OBJ_TDS_TYPE_TIMESTAMP:t.elementType=H.DB_TYPE_TIMESTAMP;break;case F.TNS_OBJ_TDS_TYPE_TIMESTAMP_LTZ:t.elementType=H.DB_TYPE_TIMESTAMP_LTZ;break;case F.TNS_OBJ_TDS_TYPE_TIMESTAMP_TZ:t.elementType=H.DB_TYPE_TIMESTAMP_TZ;break;case F.TNS_OBJ_TDS_TYPE_BOOLEAN:t.elementType=H.DB_TYPE_BOOLEAN;break;case F.TNS_OBJ_TDS_TYPE_CLOB:this._determineElementTypeCharsetForm(t);break;case F.TNS_OBJ_TDS_TYPE_BLOB:t.elementType=H.DB_TYPE_BLOB;break;case F.TNS_OBJ_TDS_TYPE_OBJ:t.elementType=H.DB_TYPE_OBJECT,await this._determineElementObjType(t);break;default:Ce.throwErr(Ce.ERR_TDS_TYPE_NOT_SUPPORTED,_)}}async _parseTDS(e,t){let s=new ma(e);if(s.skipBytes(4),s.skipBytes(2),s.skipBytes(2),s.readUInt16BE()>1){t.isCollection=!1;return}s.skipBytes(1),s.skipBytes(1),s.skipBytes(2),s.skipBytes(4);let _=s.readUInt8();if(t.isCollection=_===F.TNS_OBJ_TDS_TYPE_COLL,!t.isCollection)return;let o=s.readUInt32BE();t.maxNumElements=s.readUInt32BE(),t.collectionType=s.readUInt8(),t.collectionType===F.TNS_OBJ_PLSQL_INDEX_TABLE&&(t.collectionFlags=F.TNS_OBJ_HAS_INDEXES),s.pos=o,await this._parseElementType(s,t)}async _populateDbObjectTypeInfo(e){let t=`
      declare
          t_Instantiable              varchar2(3);
          t_SuperTypeOwner            varchar2(128);
          t_SuperTypeName             varchar2(128);
          t_SubTypeRefCursor          sys_refcursor;
          t_Pos                       pls_integer;
      begin
          :ret_val := dbms_pickler.get_type_shape(:full_name, :oid,
              :version, :tds, t_Instantiable, t_SuperTypeOwner,
              t_SuperTypeName, :attrs_rc, t_SubTypeRefCursor);
          :package_name := null;
          if substr(:full_name, length(:full_name) - 7) = '%ROWTYPE' then
              t_Pos := instr(:full_name, '.');
              :schema := substr(:full_name, 1, t_Pos - 1);
              :name := substr(:full_name, t_Pos + 1);
          else
              begin
                  select owner, type_name
                  into :schema, :name
                  from all_types
                  where type_oid = :oid;
              exception
              when no_data_found then
                  begin
                      select owner, package_name, type_name
                      into :schema, :package_name, :name
                      from all_plsql_types
                      where type_oid = :oid;
                  exception
                  when no_data_found then
                      null;
                  end;
              end;
          end if;
      end;`,s=[{name:"full_name",type:H.DB_TYPE_VARCHAR,dir:F.BIND_INOUT,maxSize:500,values:[e]},{name:"ret_val",type:H.DB_TYPE_BINARY_INTEGER,dir:F.BIND_OUT,values:[]},{name:"oid",type:H.DB_TYPE_RAW,maxSize:16,dir:F.BIND_OUT,values:[]},{name:"version",type:H.DB_TYPE_BINARY_INTEGER,dir:F.BIND_OUT,values:[]},{name:"tds",type:H.DB_TYPE_RAW,maxSize:2e3,dir:F.BIND_OUT,values:[]},{name:"attrs_rc",type:H.DB_TYPE_CURSOR,dir:F.BIND_OUT,values:[]},{name:"package_name",type:H.DB_TYPE_VARCHAR,maxSize:128,dir:F.BIND_OUT,values:[]},{name:"schema",type:H.DB_TYPE_VARCHAR,maxSize:128,dir:F.BIND_OUT,values:[]},{name:"name",type:H.DB_TYPE_VARCHAR,maxSize:128,dir:F.BIND_OUT,values:[]}],r={connection:{_impl:this},nullifyInvalidCursor:!0},_=await this.execute(t,1,s,r,!1);_.outBinds.ret_val!==0&&Ce.throwErr(Ce.ERR_INVALID_OBJECT_TYPE_NAME,e);let o=this._getDbObjectType(_.outBinds.schema,_.outBinds.name,_.outBinds.package_name,_.outBinds.oid);if(!o.partial)return o;o.version=_.outBinds.version,await this._parseTDS(_.outBinds.tds,o);let a=await _.outBinds.attrs_rc.getRows(1e3,{});if(a.length>0){o.attributes=[];for(let c of a){let N={name:c[1]};c[4]?(N.type=H.DB_TYPE_OBJECT,N.typeClass=this._getDbObjectType(c[4],c[3],c[5],c[6]),N.typeClass.partial&&this._partialDbObjectTypes.push(N.typeClass)):N.type=H.getTypeByColumnTypeName(c[3]),o.attributes.push(N)}}return o.partial=!1,o}async _populatePartialDbObjectTypes(){for(;this._partialDbObjectTypes.length>0;){let e=this._partialDbObjectTypes.pop(),t="%ROWTYPE",s=e.name;s.endsWith(t)?s=s.substring(0,s.length-t.length):t="";let r;e.packageName?r=`"${e.schema}"."${e.packageName}"."${s}"${t}`:r=`"${e.schema}"."${s}"${t}`,await this._populateDbObjectTypeInfo(r)}}async commit(){let e=new tt.CommitMessage(this);await this._protocol._processMessage(e)}async breakExecution(){await this._protocol.breakMessage()}_healthStatus(){return this.nscon.recvInbandNotif()}isHealthy(){try{return this.nscon.recvInbandNotif()===0}catch{return!1}}isPooled(){return!!this._pool}async connect(e){e.connectString||Ce.throwErr(Ce.ERR_EMPTY_CONNECT_STRING),jt.checkCredentials(e),this.sessionID=0,this.serialNum=0,this.autoCommit=!1,this.serverVersion="",this.statementCache=null,this.currentSchema="",this.invokeSessionCallback=!0,this.statementCache=new Map,this.statementCacheSize=e.stmtCacheSize,this._numCursorsToClose=0,this._currentSchemaModified=!1,this._cursorsToClose=new Set,this._tempLobsToClose=[],this._tempLobsTotalSize=0,this._drcpEstablishSession=!1,this._cclass=null,this._clientIdentifier="",this._clientIdentifierModified=!1,this._action="",this._actionModified=!1,this._dbOp="",this._dbOpModified=!1,this._clientInfo="",this._clientInfoModified=!1,this._module="",this._moduleModified=!1,this.serviceName="",this.remoteAddress="",this.privilege=e.privilege,this.comboKey=null,this.nscon=new $f,sd.register(this,this.nscon),await this.nscon.connect(e),this._connInfo=this.isPooled()?e._connInfo.map(t=>t):await ed(e),this._drcpEnabled=String(this._connInfo[0]).toLowerCase()==="pooled",this.serviceName=this._connInfo[2],this.purity=this._connInfo[3]|F.PURITY_DEFAULT,this.remoteAddress=this.nscon.getOption(td.REMOTEADDR),this.connClass=e.connectionClass,this.purity===F.PURITY_DEFAULT&&this._drcpEnabled&&(this.isPooled()?this.purity=F.PURITY_SELF:this.purity=F.PURITY_NEW),this._protocol=new Jf(this),this._protocol.caps.protocolVersion<F.TNS_VERSION_MIN_ACCEPTED&&Ce.throwErr(Ce.ERR_SERVER_VERSION_NOT_SUPPORTED);try{let t=new tt.ProtocolMessage(this);await this._protocol._processMessage(t),t=new tt.DataTypeMessage(this),await this._protocol._processMessage(t),t=new tt.AuthMessage(this,e),await this._protocol._processMessage(t),await this._protocol._processMessage(t)}catch(t){throw this.nscon.disconnect(),t}this._partialDbObjectTypes=[],e.debugJDWP?this.jdwpData=oS.from(e.debugJDWP):TS.env.ORA_DEBUG_JDWP&&(this.jdwpData=oS.from(TS.env.ORA_DEBUG_JDWP)),this._protocol.connInProgress=!1}_returnStatement(e){e.bindInfoList&&e.bindInfoList.forEach(t=>{t.bindVar=null}),e.queryVars&&e.queryVars.forEach(t=>{t.values.fill(null)}),e.returnToCache?e.inUse=!1:e.cursorId!==0&&this._addCursorToClose(e.cursorId)}_addCursorToClose(e){if(this._cursorsToClose.has(e)){let t=`attempt to close cursor ${e} twice`;Ce.throwErr(Ce.ERR_INTERNAL,t)}this._cursorsToClose.add(e)}_adjustStatementCache(){for(;this.statementCache.size>this.statementCacheSize;){let e=this.statementCache.keys().next().value,t=this.statementCache.get(e);this.statementCache.delete(e),t.inUse?t.returnToCache=!1:t.cursorId!==0&&this._addCursorToClose(t.cursorId)}}_prepare(e,t){let s=this._getStatement(e,t.keepInStmtCache);return s.bufferRowIndex=0,s.bufferRowCount=0,s.lastRowIndex=0,s.moreRowsToFetch=!0,s}async _bind(e,t,s=0){let r=e.bindInfoDict,_=e.bindInfoList;if(e.isPlSql&&t.maxSize>32767){t.type===H.DB_TYPE_RAW||t.type===H.DB_TYPE_LONG_RAW?t.type=H.DB_TYPE_BLOB:t.type._csfrm===F.CSFRM_NCHAR?t.type=H.DB_TYPE_NCLOB:t.type=H.DB_TYPE_CLOB;let o=t.maxSize;delete t.maxSize,t.outConverter=async function(a){if(a===null)return null;let c=await a.getData(),N=a._length;return c&&N>o&&Ce.throwErr(Ce.ERR_INSUFFICIENT_BUFFER_FOR_BINDS),c}}if(t.type===H.DB_TYPE_CLOB||t.type===H.DB_TYPE_NCLOB||t.type===H.DB_TYPE_BLOB){for(let[o,a]of t.values.entries())if(!(a instanceof Da))if(a&&a.length>0){let c=new Da;await c.create(this,t.type),await c.write(1,a),t.values[o]=c}else t.values[o]=null}if(t.name){let o;t.name.startsWith('"')&&t.name.endsWith('"')?o=t.name.substring(1,t.name.length-1):o=t.name.toUpperCase(),o.startsWith(":")&&(o=t.name.substring(1)),r.has(o)||Ce.throwErr(Ce.ERR_INVALID_BIND_NAME,o),r.get(o).forEach(a=>{e._setVariable(a,t)})}else{let o=_[s-1];e._setVariable(o,t)}}_createResultSet(e,t){let s=new jf;if(t||(t=new aS),s._resultSetNew(this,t,e),t.queryVars.length>0){let r=jt.getMetadataMany(t.queryVars);s._setup(e,r)}return s}async _prepareAndBind(e,t,s,r=!1){let _=this._prepare(e,s),o=0;if(!r){let a=_.bindInfoList.length,c=t.length;a!==c&&(c===0||!t[0].name)&&Ce.throwErr(Ce.ERR_WRONG_NUMBER_OF_POSITIONAL_BINDS,a,c);for(let N of t)await this._bind(_,N,o+1),o+=1}return _}resetStatmentCache(){this.statementCache.clear(),this._cursorsToClose.clear()}async getDbObjectClass(e){let t=await this._populateDbObjectTypeInfo(e);return await this._populatePartialDbObjectTypes(),t}async getStatementInfo(e){let t={},s={},r=await this._prepareAndBind(e,null,t,!0);if(t.connection=this,!r.isDdl){let _=new tt.ExecuteMessage(this,r,t);_.parseOnly=!0,await this._protocol._processMessage(_)}return r.numQueryVars>0&&(s.metaData=jt.getMetadataMany(r.queryVars)),s.bindNames=Array.from(r.bindInfoDict.keys()),s.statementType=r.statementType,s}async execute(e,t,s,r,_){let o={};if(_)return await this.executeMany(e,t,s,r);let a=await this._prepareAndBind(e,s,r),c=new tt.ExecuteMessage(this,a,r);if(c.numExecs=1,await this._protocol._processMessage(c),a.requiresFullExecute=!1,a.requiresDefine&&a.sql&&(a.requiresFullExecute=!0,await this._protocol._processMessage(c),a.requiresFullExecute=!1,a.requiresDefine=!1),a.numQueryVars>0)o.resultSet=c.resultSet;else{a.bufferRowIndex=0;let N=jt.getBindVars(a),E=jt.getExecuteOutBinds(N);E&&(o.outBinds=E),a.isPlSql&&r.implicitResultSet&&(o.implicitResults=r.implicitResultSet),a.lastRowid&&(o.lastRowid=a.lastRowid,delete a.lastRowid),a.isPlSql?a.rowCount&&(o.rowsAffected=a.rowCount):o.rowsAffected=a.rowCount||0,a.rowCount&&delete a.rowCount,this._returnStatement(a)}return o}async executeMany(e,t,s,r){let _=await this._prepareAndBind(e,s,r);_.isPlSql&&(r.batchErrors||r.dmlRowCounts)&&Ce.throwErr(Ce.ERR_EXEC_MODE_ONLY_FOR_DML);let o=new tt.ExecuteMessage(this,_,r);o.numExecs=t,o.arrayDmlRowCounts=r.dmlRowCounts,o.batchErrors=r.batchErrors,_.isPlSql&&_.requiresFullExecute&&(o.numExecs=1,await this._protocol._processMessage(o),_.requiresFullExecute=!1,o.numExecs=t-1,o.offset=1),o.numExecs>0&&await this._protocol._processMessage(o);let a={};_.bufferRowIndex=0;let c=jt.getBindVars(_),N=jt.getExecuteManyOutBinds(c,t);N&&(a.outBinds=N);let E=_.isPlSql?void 0:_.rowCount;return E&&(a.rowsAffected=E,delete _.rowCount),r.dmlRowCounts&&(a.dmlRowCounts=r.dmlRowCounts),r.batchErrors&&(a.batchErrors=r.batchErrors),this._returnStatement(_),a}_getStatement(e,t=!1){let s=this.statementCache.get(e);return s?s.inUse||!t||this._drcpEstablishSession?(t||(this.statementCache.delete(e),s.returnToCache=!1),(s.inUse||this._drcpEstablishSession)&&(s=s._copy())):(this.statementCache.delete(e),this.statementCache.set(e,s)):(s=new aS,s._prepare(e),t&&!this._drcpEstablishSession&&!s.isDdl&&this.statementCacheSize>0&&(s.returnToCache=!0,this.statementCache.set(e,s),this._adjustStatementCache())),s.inUse=!0,s}async ping(){let e=new tt.PingMessage(this);await this._protocol._processMessage(e)}async rollback(){let e=new tt.RollbackMessage(this);await this._protocol._processMessage(e)}getOracleServerVersion(){return this.serverVersion}getOracleServerVersionString(){return this.serverVersionString}setCurrentSchema(e){this._currentSchemaModified=!0,this.currentSchema=e}getCurrentSchema(){return this.currentSchema}setClientId(e){this._clientIdentifierModified=!0,this._clientIdentifier=e}setDbOp(e){this._dbOpModified=!0,this._dbOp=e}setClientInfo(e){this._clientInfoModified=!0,this._clientInfo=e}setModule(e){this._moduleModified=!0,this._module=e,this._actionModified=!0}setAction(e){this._actionModified=!0,this._action=e}async changePassword(e,t,s){let r={user:e,newPassword:s,password:t,changePassword:!0},_=new tt.AuthMessage(this,r);await this._protocol._processMessage(_)}async createLob(e){let t=new Da;return await t.create(this,e),t}getStmtCacheSize(){return this.statementCacheSize}setCallTimeout(e){this._protocol.callTimeout=e}getCallTimeout(){return this._protocol.callTimeout}getTag(){return""}};T(Oa,"ThinConnectionImpl");var Ia=Oa;cS.exports=Ia});var lS=m((Wm,ES)=>{"use strict";var rd=rn(),id=ga(),Xe=Bs(),Nt=U(),nd=Ze(),La=ve(),_d=As(),{getConnectionInfo:od}=$o(),ad=require("crypto"),Td=require("events"),Ya=class Ya extends rd{_init(e){if(e.homogeneous||Nt.throwErr(Nt.ERR_NOT_IMPLEMENTED,"Heterogeneous Pooling"),_d.checkCredentials(e),this._availableObjects=[],this._name="node-thin",this._poolMin=e.poolMin,this._poolMax=e.poolMax,this._poolIncrement=e.poolIncrement,this._poolTimeout=e.poolTimeout,this._poolPingInterval=e.poolPingInterval,this._stmtCacheSize=e.stmtCacheSize,this._userConfig=e,this._freeConnectionList=[],this._usedConnectionList=new Set,this._password=e.password,this._walletPassword=e.walletPassword,this._obfuscatedPassword=[],this._obfuscatedWalletPassword=[],this._token=e.token,this._obfuscatedToken=[],this._privateKey=e.privateKey,this._obfuscatedPrivateKey=[],this._schedulerJob=null,this._password!==void 0){let t=Xe.setObfuscatedValue(this._password);this._password=t.value,this._obfuscatedPassword=t.obfuscatedValue,this._userConfig.password=null}if(this._walletPassword!==void 0){let t=Xe.setObfuscatedValue(this._walletPassword);this._walletPassword=t.value,this._obfuscatedWalletPassword=t.obfuscatedValue,this._userConfig.walletPassword=null}if(this._token!==void 0){let t=Xe.setObfuscatedValue(this._token);this._token=t.value,this._obfuscatedToken=t.obfuscatedValue,this._userConfig.token=null}if(this._privateKey!==void 0){let t=Xe.setObfuscatedValue(this._privateKey);this._privateKey=t.value,this._obfuscatedPrivateKey=t.obfuscatedValue,this._userConfig.privateKey=null}this._accessTokenFn=e.accessTokenFn,this._isDRCPEnabled=!1,this.eventEmitter=new Td,this.eventEmitter.on("_removePoolConnection",async t=>{await this._destroy(t)})}async create(e){this._init(e),this._userConfig._connInfo=await od(e),this._isDRCPEnabled=String(this._userConfig._connInfo[0]).toLowerCase()==="pooled",this._isDRCPEnabled&&nd.connectionClass===""&&this._generateConnectionClass(),await this._growPool(this._poolMin)}setAccessToken(e){if(e.token){this._token=e.token;let t=Xe.setObfuscatedValue(this._token);this._token=t.value,this._obfuscatedToken=t.obfuscatedValue}if(e.privateKey){this._privateKey=e.privateKey;let t=Xe.setObfuscatedValue(this._privateKey);this._privateKey=t.value,this._obfuscatedPrivateKey=t.obfuscatedValue}}async _getConnAttrs(){let e,t=Object.assign({},this._userConfig);if(t.password===null&&(t.password=Xe.getDeobfuscatedValue(this._password,this._obfuscatedPassword)),t.walletPassword===null&&(t.walletPassword=Xe.getDeobfuscatedValue(this._walletPassword,this._obfuscatedWalletPassword)),t.token===null&&(t.token=Xe.getDeobfuscatedValue(this._token,this._obfuscatedToken),La.isTokenExpired(t.token)))if(typeof this._accessTokenFn=="function"){if(e=await this._accessTokenFn(!0),typeof e=="string")if(t.token=e,La.isTokenExpired(t.token))Nt.throwErr(Nt.ERR_TOKEN_HAS_EXPIRED);else{let s=Xe.setObfuscatedValue(t.token);this._token=s.value,this._obfuscatedToken=s.obfuscatedValue}else if(typeof e=="object")if(t.token=e.token,t.privateKey=e.privateKey,La.isTokenExpired(t.token))Nt.throwErr(Nt.ERR_TOKEN_HAS_EXPIRED);else{let s=Xe.setObfuscatedValue(t.token);this._token=s.value,this._obfuscatedToken=s.obfuscatedValue;let r=Xe.setObfuscatedValue(t.privateKey);this._privateKey=r.value,this._obfuscatedPrivateKey=r.obfuscatedValue}}else Nt.throwErr(Nt.ERR_TOKEN_HAS_EXPIRED);return t.privateKey===null&&(t.privateKey=Xe.getDeobfuscatedValue(this._privateKey,this._obfuscatedPrivateKey)),t}async getConnection(){return await this.acquire()}async _destroy(e){e.nscon.ntAdapter.connected&&(e._dropSess=!0,await e.close())}async close(e){return this._schedulerJob&&(clearTimeout(this._schedulerJob),this._schedulerJob=null),await this.destroyAllNow(e)}getPoolMax(){return this._poolMax}getPoolMin(){return this._poolMin}getConnectionsInUse(){return this._usedConnectionList.size}getConnectionsOpen(){return this._freeConnectionList.length+this._usedConnectionList.size}getPoolIncrement(){return this._poolIncrement}getPoolMaxPerShard(){}getPoolPingInterval(){return this._poolPingInterval}getPoolTimeout(){return this._poolTimeout}getSodaMetaDataCache(){}getStmtCacheSize(){return this._stmtCacheSize}async _growPool(e){let t=await this._getConnAttrs();for(;e>0;){let s=new id;s._pool=this,await s.connect(t),s._newSession=!0,s._dropSess=!1,s._lastTimeUsed=Date.now(),this._freeConnectionList.push(s),e--}}_setScheduler(){!this._schedulerJob&&this._poolTimeout>0&&this._freeConnectionList.length>0&&this._freeConnectionList.length+this._usedConnectionList.size>this._poolMin&&(this._schedulerJob=setTimeout(()=>{this._scanIdleConnection()},this._poolTimeout*1e3))}_scanIdleConnection(){for(;this._usedConnectionList.size+this._freeConnectionList.length>this._poolMin&&this._freeConnectionList.length>0;){let e=this._freeConnectionList[this._freeConnectionList.length-1];if(Date.now()-e._lastTimeUsed<this._poolTimeout*1e3)break;this.eventEmitter.emit("_removePoolConnection",e),this._freeConnectionList.pop()}this._schedulerJob=null,this._setScheduler()}async acquire(){for(;this._freeConnectionList.length>0;){let t=this._freeConnectionList.pop();if(!t.isHealthy()){this.eventEmitter.emit("_removePoolConnection",t);continue}let s=!1;if((this._poolPingInterval===0||this._poolPingInterval>0&&Date.now()-t._lastTimeUsed>this._poolPingInterval*1e3)&&(s=!0),s)try{await t.ping()}catch{this.eventEmitter.emit("_removePoolConnection",t);continue}return this._usedConnectionList.add(t),t}if(this._usedConnectionList.size<this._poolMin)await this._growPool(this._poolMin-this._usedConnectionList.size);else{let t=this._poolMax-this._usedConnectionList.size;await this._growPool(Math.min(this._poolIncrement,t)),this._poolIncrement>1&&t>1&&this._setScheduler()}let e=this._freeConnectionList.pop();return this._usedConnectionList.add(e),e}release(e){this._usedConnectionList.delete(e),e.nscon.connected&&(e._lastTimeUsed=Date.now(),e._newSession=!1,this._freeConnectionList.push(e)),this._setScheduler()}async destroyAllNow(e){let t;for(;this._freeConnectionList.length!==0;)t=this._freeConnectionList.pop(),await this._destroy(t);if(e.forceClose)for(let s of this._usedConnectionList)await this._destroy(s),this._usedConnectionList.delete(s);this._usedConnectionList.size!==0&&Nt.throwErr(Nt.ERR_POOL_HAS_BUSY_CONNECTIONS),this.eventEmitter.removeAllListeners()}_generateConnectionClass(){this._userConfig.connectionClass=ad.randomBytes(16).toString("base64"),this._userConfig.connectionClass="NJS:"+this._userConfig.connectionClass}};T(Ya,"ThinPoolImpl");var ya=Ya;ES.exports=ya});var NS=m(()=>{"use strict";var cd=ga(),Ed=b_(),ld=lS(),Nd=wr(),Sd=D_(),Ks=os();Ks.ConnectionImpl=cd;Ks.ResultSetImpl=Ed;Ks.PoolImpl=ld;Ks.LobImpl=Nd;Ks.DbObjectImpl=Sd});var dS=m((jm,fS)=>{"use strict";var R=Be(),Ne=ve(),p=U(),b=He(),SS=os(),hd=require("process"),Ad=require("util"),Ba=hd.version.substring(1).split(".").map(Number);p.assert(Ba[0]>14||Ba[0]===14&&Ba[1]>=6,p.ERR_NODE_TOO_OLD,Ne.PACKAGE_JSON_VERSION,"14.6");var ud=dn(),Pd=mn(),fd=On(),dd=qn(),pd=Ts(),hS=i_(),Rd=as(),AS=Pl(),Dd=o_(),md=ur(),B=Ze(),Id=e_(),Cd=Jn(),Od=Wn(),gd=cs(),Ld=Qn(),fs={},Zr={},Ws="default",Ht,yd=!1;function Yd(){let i=typeof __non_webpack_require__=="function"?__non_webpack_require__:require,e=["../"+Ne.RELEASE_DIR+"/"+Ne.BINARY_FILE,"../"+Ne.RELEASE_DIR+"/oracledb.node","../build/Debug/oracledb.node","./node_modules/oracledb/"+Ne.RELEASE_DIR+"/"+Ne.BINARY_FILE,"./node_modules/oracledb/"+Ne.RELEASE_DIR+"/oracledb.node"],t;for(let s=0;s<e.length;s++)try{t=i(e[s]);break}catch(r){if(r.code!=="MODULE_NOT_FOUND"||s==e.length-1){let _;r.code==="MODULE_NOT_FOUND"?_=`
  Looked for ${e.map(o=>require("path").resolve(__dirname,o)).join(", ")}
  ${Ne.getInstallURL()}
`:_=`
  Node.js require('oracledb') error was:
  ${r.message}
  ${Ne.getInstallHelp()}
`,p.throwErr(p.ERR_CANNOT_LOAD_BINARY,_)}}return t}T(Yd,"_initCLib");function uS(){NS()}T(uS,"_initializeThinDriver");function Bd(i){return i===R.SYSASM||i===R.SYSBACKUP||i===R.SYSDBA||i===R.SYSDG||i===R.SYSKM||i===R.SYSOPER||i===R.SYSPRELIM||i===R.SYSRAC}T(Bd,"_isPrivilege");async function PS(i,e){let t={};if(i.user!==void 0&&(p.assertParamPropValue(typeof i.user=="string",1,"user"),t.user=i.user),i.username!==void 0&&(p.assert(t.user===void 0,p.ERR_DBL_USER),p.assertParamPropValue(typeof i.username=="string",1,"username"),t.user=i.username),i.password!==void 0&&(p.assertParamPropValue(typeof i.password=="string",1,"password"),t.password=i.password),i.connectString!==void 0&&(p.assertParamPropValue(typeof i.connectString=="string",1,"connectString"),t.connectString=i.connectString),i.connectionString!==void 0&&(p.assert(t.connectString===void 0,p.ERR_DBL_CONNECT_STRING),p.assertParamPropValue(typeof i.connectionString=="string",1,"connectionString"),t.connectString=i.connectionString),i.walletPassword!==void 0&&(p.assertParamPropValue(typeof i.walletPassword=="string",1,"walletPassword"),t.walletPassword=i.walletPassword),i.walletLocation!==void 0&&(p.assertParamPropValue(typeof i.walletLocation=="string",1,"walletLocation"),t.walletLocation=i.walletLocation),i.edition!==void 0&&(p.assertParamPropValue(typeof i.edition=="string",1,"edition"),t.edition=i.edition),i.stmtCacheSize!==void 0&&(p.assertParamPropValue(Number.isInteger(i.stmtCacheSize)&&i.stmtCacheSize>=0,1,"stmtCacheSize"),t.stmtCacheSize=i.stmtCacheSize),t.externalAuth=B.externalAuth,i.externalAuth!==void 0&&(p.assertParamPropValue(typeof i.externalAuth=="boolean",1,"externalAuth"),t.externalAuth=i.externalAuth),i.events!==void 0&&(p.assertParamPropValue(typeof i.events=="boolean",1,"events"),t.events=i.events),i.poolAlias!==void 0&&(p.assertParamPropValue(typeof i.poolAlias=="string"&&i.poolAlias.length>0,1,"poolAlias"),t.poolAlias=i.poolAlias),i.configDir!==void 0&&(p.assertParamPropValue(typeof i.configDir=="string",1,"configDir"),t.configDir=i.configDir),i.sslServerCertDN!==void 0&&(p.assertParamPropValue(typeof i.sslServerCertDN=="string",1,"sslServerCertDN"),t.sslServerCertDN=i.sslServerCertDN),i.sslServerDNMatch!==void 0&&(p.assertParamPropValue(typeof i.sslServerDNMatch=="boolean",1,"sslServerDNMatch"),t.sslServerDNMatch=i.sslServerDNMatch),i.httpsProxy!==void 0&&(p.assertParamPropValue(typeof i.httpsProxy=="string",1,"httpsProxy"),t.httpsProxy=i.httpsProxy),i.httpsProxyPort!==void 0&&(p.assertParamPropValue(Number.isInteger(i.httpsProxyPort)&&i.httpsProxyPort>=0,1,"httpsProxyPort"),t.httpsProxyPort=i.httpsProxyPort),i.retryCount!==void 0&&(p.assertParamPropValue(Number.isInteger(i.retryCount)&&i.retryCount>=0,1,"retryCount"),t.retryCount=i.retryCount),i.retryDelay!==void 0&&(p.assertParamPropValue(Number.isInteger(i.retryDelay)&&i.retryDelay>=0,1,"retryDelay"),t.retryDelay=i.retryDelay),i.connectTimeout!==void 0&&(p.assertParamPropValue(Number.isInteger(i.connectTimeout)&&i.connectTimeout>=0,1,"connectTimeout"),t.connectTimeout=i.connectTimeout),i.transportConnectTimeout!==void 0&&(p.assertParamPropValue(Number.isInteger(i.transportConnectTimeout)&&i.transportConnectTimeout>=0,1,"transportConnectTimeout"),t.transportConnectTimeout=i.transportConnectTimeout),i.expireTime!==void 0&&(p.assertParamPropValue(Number.isInteger(i.expireTime)&&i.expireTime>=0,1,"expireTime"),t.expireTime=i.expireTime),i.sdu!==void 0&&(p.assertParamPropValue(Number.isInteger(i.sdu)&&i.sdu>0,1,"sdu"),t.sdu=i.sdu),i.connectionIdPrefix!==void 0&&(p.assertParamPropValue(typeof i.connectionIdPrefix=="string",1,"connectionIdPrefix"),t.connectionIdPrefix=i.connectionIdPrefix),e)i.poolMax!==void 0&&(p.assertParamPropValue(Number.isInteger(i.poolMax)&&i.poolMax>0,1,"poolMax"),t.poolMax=i.poolMax),i.poolMaxPerShard!==void 0&&(p.assertParamPropValue(Number.isInteger(i.poolMaxPerShard)&&i.poolMaxPerShard>=0,1,"poolMaxPerShard"),t.poolMaxPerShard=i.poolMaxPerShard),i.poolMin!==void 0&&(p.assertParamPropValue(Number.isInteger(i.poolMin)&&i.poolMin>=0,1,"poolMin"),t.poolMin=i.poolMin),i.poolIncrement!==void 0&&(p.assertParamPropValue(Number.isInteger(i.poolIncrement)&&i.poolIncrement>=0,1,"poolIncrement"),t.poolIncrement=i.poolIncrement),i.poolTimeout!==void 0&&(p.assertParamPropValue(Number.isInteger(i.poolTimeout)&&i.poolTimeout>=0,1,"poolTimeout"),t.poolTimeout=i.poolTimeout),i.poolPingInterval!==void 0&&(p.assertParamPropValue(Number.isInteger(i.poolPingInterval)&&i.poolPingInterval>=-2147483648&&i.poolPingInterval<=2147483647,1,"poolPingInterval"),t.poolPingInterval=i.poolPingInterval),t.homogeneous=!0,i.homogeneous!==void 0&&(p.assertParamPropValue(typeof i.homogeneous=="boolean",1,"homogeneous"),t.homogeneous=i.homogeneous),i.queueTimeout!==void 0&&(p.assertParamPropValue(Number.isInteger(i.queueTimeout)&&i.queueTimeout>=0,1,"queueTimeout"),t.queueTimeout=i.queueTimeout),i.queueMax!==void 0&&(p.assertParamPropValue(Number.isInteger(i.queueMax),1,"queueMax"),t.queueMax=i.queueMax),t.sodaMetaDataCache=!1,i.sodaMetaDataCache!==void 0&&(p.assertParamPropValue(typeof i.sodaMetaDataCache=="boolean",1,"sodaMetaDataCache"),t.sodaMetaDataCache=i.sodaMetaDataCache),i.sessionCallback!==void 0&&(p.assertParamPropValue(typeof i.sessionCallback=="string"||typeof i.sessionCallback=="function",1,"sessionCallback"),t.sessionCallback=i.sessionCallback),t.enableStatistics=!1,i.enableStatistics!==void 0&&(p.assertParamPropValue(typeof i.enableStatistics=="boolean",1,"enableStatistics"),t.enableStatistics=i.enableStatistics),!t.enableStatistics&&i._enableStats!==void 0&&(p.assertParamPropValue(typeof i._enableStats=="boolean",1,"_enableStats"),t.enableStatistics=i._enableStats);else{if(i.newPassword!==void 0&&(p.assertParamPropValue(typeof i.newPassword=="string",1,"newPassword"),t.newPassword=i.newPassword),i.privilege!==void 0&&(p.assertParamPropValue(Bd(i.privilege),1,"privilege"),t.privilege=i.privilege),i.shardingKey!==void 0){let s=i.shardingKey;p.assertParamPropValue(Ne.isShardingKey(s),1,"shardingKey"),t.shardingKey=i.shardingKey}if(i.superShardingKey!==void 0){let s=i.superShardingKey;p.assertParamPropValue(Ne.isShardingKey(s),1,"superShardingKey"),t.superShardingKey=i.superShardingKey}}if(i.accessToken!==void 0){p.assert(t.user===void 0&&t.password===void 0,p.ERR_TOKEN_BASED_AUTH),e?p.assert(t.homogeneous&&t.externalAuth,p.ERR_POOL_TOKEN_BASED_AUTH):p.assert(t.externalAuth,p.ERR_CONN_TOKEN_BASED_AUTH);let s;typeof i.accessToken=="function"?(t.accessTokenFn=i.accessToken,s=await i.accessToken(!1),Ne.isTokenValid(s)||(s=await i.accessToken(!0))):s=i.accessToken,p.assert(Ne.isTokenValid(s),p.ERR_TOKEN_HAS_EXPIRED),s.privateKey!==void 0&&p.assert(Ne.isPrivateKeyValid(s),p.ERR_INVALID_PRIVATE_KEY),typeof s=="string"?t.token=s:(t.token=s.token,t.privateKey=s.privateKey)}return t.token===void 0&&t.externalAuth&&(t.user||t.password)&&p.throwErr(p.ERR_WRONG_CRED_FOR_EXTAUTH),t}T(PS,"_verifyOptions");async function Ud(i){let e;p.assertArgCount(arguments,1,1),p.assertParamValue(Ne.isObject(i),1),i=await PS(i,!0);let t=i.sessionCallback;typeof t=="function"&&delete i.sessionCallback,i.poolAlias!==void 0?e=i.poolAlias:i.poolAlias===void 0&&!fs[Ws]&&!Zr[Ws]&&(e=Ws),(fs[e]||Zr[e])&&p.throwErr(p.ERR_POOL_WITH_ALIAS_ALREADY_EXISTS,e),B.addToOptions(i,"connectionClass","edition","events","externalAuth","stmtCacheSize","poolMax","poolMaxPerShard","poolMin","poolIncrement","poolTimeout","poolPingInterval","queueMax","queueTimeout"),i.poolMin>i.poolMax&&p.throwErr(p.ERR_INVALID_NUMBER_OF_CONNECTIONS,i.poolMax,i.poolMin),Ht===void 0&&!yd&&uS(),e&&(Zr[e]=!0);let s=new AS;try{await s._impl.create(i)}finally{e&&delete Zr[e]}return e&&(fs[e]=s),s._setup(i,e),s._sessionCallback=t,s.on("_afterPoolClose",()=>{s.poolAlias&&delete fs[s.poolAlias]}),s}T(Ud,"createPool");async function wd(i){let e={},t;if(p.assertArgCount(arguments,0,1),arguments.length==0?t=Ws:typeof i=="string"?t=i:(e=i,p.assertParamValue(Ne.isObject(e),1),t=e.poolAlias),t){let r=fs[t];return p.assert(r,p.ERR_POOL_WITH_ALIAS_NOT_FOUND,t),await r.getConnection(e)}e=await PS(e,!1),B.addToOptions(e,"connectionClass","edition","events","externalAuth","stmtCacheSize"),Ht===void 0&&!B.thinDriverInitialized&&uS();let s=new hS;return s._impl=new SS.ConnectionImpl,await s._impl.connect(e),Ht===void 0&&(B.thinDriverInitialized=!0),s}T(wd,"getConnection");function Md(i){let e;return p.assertArgCount(arguments,0,1),i&&p.assertParamValue(typeof i=="string"||typeof i=="number",1),i=i||Ws,e=fs[i],e||p.throwErr(p.ERR_POOL_WITH_ALIAS_NOT_FOUND,i),e}T(Md,"getPool");function Vd(i){let e={};if(p.assertArgCount(arguments,0,1),i!==void 0&&(p.assertParamValue(Ne.isObject(i),1),e={...i},p.assertParamPropString(e,1,"libDir"),p.assertParamPropString(e,1,"configDir"),p.assertParamPropString(e,1,"errorUrl"),p.assertParamPropString(e,1,"driverName")),B.thinDriverInitialized&&p.throwErr(p.ERR_THIN_CONNECTION_ALREADY_CREATED),Ht===void 0){let t=Yd();e.driverName===void 0&&(e.driverName=R.DEFAULT_DRIVER_NAME+" thk"),e.errorUrl===void 0&&(e.errorUrl=R.DEFAULT_ERROR_URL);try{t.initOracleClient(e,SS,B)}catch(s){let r=p.transformErr(s);throw r.code==="DPI-1047"&&(r.message+=`
`+Ne.getInstallHelp()),r}Ht=i||{}}else Ad.isDeepStrictEqual(Ht,e)||p.throwErr(p.ERR_INIT_ORACLE_CLIENT_ARGS);B.thin=!1}T(Vd,"initOracleClient");async function xd(i,e){let t={},s=R.SHUTDOWN_MODE_DEFAULT;p.assertArgCount(arguments,0,2),arguments.length==2?(p.assertParamValue(typeof i=="object",1),p.assertParamValue(typeof e=="number",2),t=i,s=e):arguments.length==1&&(p.assertParamValue(typeof i=="object",1),t=i);let r={user:t.user,password:t.password,connectString:t.connectString,connectionString:t.connectionString,externalAuth:t.externalAuth,privilege:R.SYSOPER},_=await this.getConnection(r);await _.shutdown(s),s!=this.SHUTDOWN_MODE_ABORT&&(await _.execute("ALTER DATABASE CLOSE"),await _.execute("ALTER DATABASE DISMOUNT"),await _.shutdown(this.SHUTDOWN_MODE_FINAL)),await _.close()}T(xd,"shutdown");async function Fd(i,e){let t={},s={};p.assertArgCount(arguments,0,2),arguments.length==2?(p.assertParamValue(typeof i=="object",1),p.assertParamValue(typeof e=="object",2),t=i,s=e):arguments.length==1&&(p.assertParamValue(typeof i=="object",1),t=i);let r={user:t.user,password:t.password,connectString:t.connectString,connectionString:t.connectionString,externalAuth:t.externalAuth,privilege:this.SYSOPER|this.SYSPRELIM},_=await this.getConnection(r);await _.startup(s),await _.close(),r.privilege=this.SYSOPER,_=await this.getConnection(r),await _.execute("ALTER DATABASE MOUNT"),await _.execute("ALTER DATABASE OPEN"),await _.close()}T(Fd,"startup");fS.exports={AqDeqOptions:ud,AqEnqOptions:Pd,AqMessage:fd,AqQueue:dd,BaseDbObject:pd,Connection:hS,Lob:Rd,Pool:AS,PoolStatistics:Dd,ResultSet:md,SodaDatabase:Id,SodaCollection:Cd,SodaDocCursor:Od,SodaDocument:gd,SodaOperation:Ld,getConnection:Ne.callbackify(wd),createPool:Ne.callbackify(Ud),getPool:Md,initOracleClient:Vd,shutdown:Ne.callbackify(xd),startup:Ne.callbackify(Fd),CQN_OPCODE_ALL_OPS:R.CQN_OPCODE_ALL_OPS,CQN_OPCODE_ALL_ROWS:R.CQN_OPCODE_ALL_ROWS,CQN_OPCODE_ALTER:R.CQN_OPCODE_ALTER,CQN_OPCODE_DELETE:R.CQN_OPCODE_DELETE,CQN_OPCODE_DROP:R.CQN_OPCODE_DROP,CQN_OPCODE_INSERT:R.CQN_OPCODE_INSERT,CQN_OPCODE_UPDATE:R.CQN_OPCODE_UPDATE,DB_TYPE_BFILE:b.DB_TYPE_BFILE,DB_TYPE_BINARY_DOUBLE:b.DB_TYPE_BINARY_DOUBLE,DB_TYPE_BINARY_FLOAT:b.DB_TYPE_BINARY_FLOAT,DB_TYPE_BINARY_INTEGER:b.DB_TYPE_BINARY_INTEGER,DB_TYPE_BLOB:b.DB_TYPE_BLOB,DB_TYPE_BOOLEAN:b.DB_TYPE_BOOLEAN,DB_TYPE_CHAR:b.DB_TYPE_CHAR,DB_TYPE_CLOB:b.DB_TYPE_CLOB,DB_TYPE_CURSOR:b.DB_TYPE_CURSOR,DB_TYPE_DATE:b.DB_TYPE_DATE,DB_TYPE_INTERVAL_DS:b.DB_TYPE_INTERVAL_DS,DB_TYPE_INTERVAL_YM:b.DB_TYPE_INTERVAL_YM,DB_TYPE_JSON:b.DB_TYPE_JSON,DB_TYPE_LONG:b.DB_TYPE_LONG,DB_TYPE_LONG_NVARCHAR:b.DB_TYPE_LONG_NVARCHAR,DB_TYPE_LONG_RAW:b.DB_TYPE_LONG_RAW,DB_TYPE_NCHAR:b.DB_TYPE_NCHAR,DB_TYPE_NCLOB:b.DB_TYPE_NCLOB,DB_TYPE_NUMBER:b.DB_TYPE_NUMBER,DB_TYPE_NVARCHAR:b.DB_TYPE_NVARCHAR,DB_TYPE_OBJECT:b.DB_TYPE_OBJECT,DB_TYPE_RAW:b.DB_TYPE_RAW,DB_TYPE_ROWID:b.DB_TYPE_ROWID,DB_TYPE_TIMESTAMP:b.DB_TYPE_TIMESTAMP,DB_TYPE_TIMESTAMP_LTZ:b.DB_TYPE_TIMESTAMP_LTZ,DB_TYPE_TIMESTAMP_TZ:b.DB_TYPE_TIMESTAMP_TZ,DB_TYPE_VARCHAR:b.DB_TYPE_VARCHAR,DEFAULT:R.DEFAULT,STMT_TYPE_UNKNOWN:R.STMT_TYPE_UNKNOWN,STMT_TYPE_SELECT:R.STMT_TYPE_SELECT,STMT_TYPE_UPDATE:R.STMT_TYPE_UPDATE,STMT_TYPE_DELETE:R.STMT_TYPE_DELETE,STMT_TYPE_INSERT:R.STMT_TYPE_INSERT,STMT_TYPE_CREATE:R.STMT_TYPE_CREATE,STMT_TYPE_DROP:R.STMT_TYPE_DROP,STMT_TYPE_ALTER:R.STMT_TYPE_ALTER,STMT_TYPE_BEGIN:R.STMT_TYPE_BEGIN,STMT_TYPE_DECLARE:R.STMT_TYPE_DECLARE,STMT_TYPE_CALL:R.STMT_TYPE_CALL,STMT_TYPE_EXPLAIN_PLAN:R.STMT_TYPE_EXPLAIN_PLAN,STMT_TYPE_MERGE:R.STMT_TYPE_MERGE,STMT_TYPE_ROLLBACK:R.STMT_TYPE_ROLLBACK,STMT_TYPE_COMMIT:R.STMT_TYPE_COMMIT,SHUTDOWN_MODE_DEFAULT:R.SHUTDOWN_MODE_DEFAULT,SHUTDOWN_MODE_TRANSACTIONAL:R.SHUTDOWN_MODE_TRANSACTIONAL,SHUTDOWN_MODE_TRANSACTIONAL_LOCAL:R.SHUTDOWN_MODE_TRANSACTIONAL_LOCAL,SHUTDOWN_MODE_IMMEDIATE:R.SHUTDOWN_MODE_IMMEDIATE,SHUTDOWN_MODE_ABORT:R.SHUTDOWN_MODE_ABORT,SHUTDOWN_MODE_FINAL:R.SHUTDOWN_MODE_FINAL,STARTUP_MODE_DEFAULT:R.STARTUP_MODE_DEFAULT,STARTUP_MODE_FORCE:R.STARTUP_MODE_FORCE,STARTUP_MODE_RESTRICT:R.STARTUP_MODE_RESTRICT,SUBSCR_EVENT_TYPE_SHUTDOWN:R.SUBSCR_EVENT_TYPE_SHUTDOWN,SUBSCR_EVENT_TYPE_SHUTDOWN_ANY:R.SUBSCR_EVENT_TYPE_SHUTDOWN_ANY,SUBSCR_EVENT_TYPE_STARTUP:R.SUBSCR_EVENT_TYPE_STARTUP,SUBSCR_EVENT_TYPE_DEREG:R.SUBSCR_EVENT_TYPE_DEREG,SUBSCR_EVENT_TYPE_OBJ_CHANGE:R.SUBSCR_EVENT_TYPE_OBJ_CHANGE,SUBSCR_EVENT_TYPE_QUERY_CHANGE:R.SUBSCR_EVENT_TYPE_QUERY_CHANGE,SUBSCR_EVENT_TYPE_AQ:R.SUBSCR_EVENT_TYPE_AQ,SUBSCR_GROUPING_CLASS_TIME:R.SUBSCR_GROUPING_CLASS_TIME,SUBSCR_GROUPING_TYPE_SUMMARY:R.SUBSCR_GROUPING_TYPE_SUMMARY,SUBSCR_GROUPING_TYPE_LAST:R.SUBSCR_GROUPING_TYPE_LAST,SUBSCR_NAMESPACE_AQ:R.SUBSCR_NAMESPACE_AQ,SUBSCR_NAMESPACE_DBCHANGE:R.SUBSCR_NAMESPACE_DBCHANGE,SUBSCR_QOS_BEST_EFFORT:R.SUBSCR_QOS_BEST_EFFORT,SUBSCR_QOS_DEREG_NFY:R.SUBSCR_QOS_DEREG_NFY,SUBSCR_QOS_QUERY:R.SUBSCR_QOS_QUERY,SUBSCR_QOS_RELIABLE:R.SUBSCR_QOS_RELIABLE,SUBSCR_QOS_ROWIDS:R.SUBSCR_QOS_ROWIDS,SYSASM:R.SYSASM,SYSBACKUP:R.SYSBACKUP,SYSDBA:R.SYSDBA,SYSDG:R.SYSDG,SYSKM:R.SYSKM,SYSOPER:R.SYSOPER,SYSPRELIM:R.SYSPRELIM,SYSRAC:R.SYSRAC,BIND_IN:R.BIND_IN,BIND_INOUT:R.BIND_INOUT,BIND_OUT:R.BIND_OUT,OUT_FORMAT_ARRAY:R.OUT_FORMAT_ARRAY,OUT_FORMAT_OBJECT:R.OUT_FORMAT_OBJECT,SODA_COLL_MAP_MODE:R.SODA_COLL_MAP_MODE,POOL_STATUS_OPEN:R.POOL_STATUS_OPEN,POOL_STATUS_DRAINING:R.POOL_STATUS_DRAINING,POOL_STATUS_CLOSED:R.POOL_STATUS_CLOSED,POOL_STATUS_RECONFIGURING:R.POOL_STATUS_RECONFIGURING,AQ_DEQ_NO_WAIT:R.AQ_DEQ_NO_WAIT,AQ_DEQ_WAIT_FOREVER:R.AQ_DEQ_WAIT_FOREVER,AQ_DEQ_MODE_BROWSE:R.AQ_DEQ_MODE_BROWSE,AQ_DEQ_MODE_LOCKED:R.AQ_DEQ_MODE_LOCKED,AQ_DEQ_MODE_REMOVE:R.AQ_DEQ_MODE_REMOVE,AQ_DEQ_MODE_REMOVE_NO_DATA:R.AQ_DEQ_MODE_REMOVE_NO_DATA,AQ_DEQ_NAV_FIRST_MSG:R.AQ_DEQ_NAV_FIRST_MSG,AQ_DEQ_NAV_NEXT_TRANSACTION:R.AQ_DEQ_NAV_NEXT_TRANSACTION,AQ_DEQ_NAV_NEXT_MSG:R.AQ_DEQ_NAV_NEXT_MSG,AQ_MSG_DELIV_MODE_PERSISTENT:R.AQ_MSG_DELIV_MODE_PERSISTENT,AQ_MSG_DELIV_MODE_BUFFERED:R.AQ_MSG_DELIV_MODE_BUFFERED,AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED:R.AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED,AQ_MSG_STATE_READY:R.AQ_MSG_STATE_READY,AQ_MSG_STATE_WAITING:R.AQ_MSG_STATE_WAITING,AQ_MSG_STATE_PROCESSED:R.AQ_MSG_STATE_PROCESSED,AQ_MSG_STATE_EXPIRED:R.AQ_MSG_STATE_EXPIRED,AQ_VISIBILITY_IMMEDIATE:R.AQ_VISIBILITY_IMMEDIATE,AQ_VISIBILITY_ON_COMMIT:R.AQ_VISIBILITY_ON_COMMIT,TPC_BEGIN_JOIN:R.TPC_BEGIN_JOIN,TPC_BEGIN_NEW:R.TPC_BEGIN_NEW,TPC_BEGIN_PROMOTE:R.TPC_BEGIN_PROMOTE,TPC_BEGIN_RESUME:R.TPC_BEGIN_RESUME,TPC_END_NORMAL:R.TPC_END_NORMAL,TPC_END_SUSPEND:R.TPC_END_SUSPEND,BLOB:b.DB_TYPE_BLOB,BUFFER:b.DB_TYPE_RAW,CLOB:b.DB_TYPE_CLOB,CURSOR:b.DB_TYPE_CURSOR,DATE:b.DB_TYPE_TIMESTAMP,NCLOB:b.DB_TYPE_NCLOB,NUMBER:b.DB_TYPE_NUMBER,STRING:b.DB_TYPE_VARCHAR,ARRAY:R.OUT_FORMAT_ARRAY,OBJECT:R.OUT_FORMAT_OBJECT,get autoCommit(){return B.autoCommit},get connectionClass(){return B.connectionClass},get dbObjectAsPojo(){return B.dbObjectAsPojo},get edition(){return B.edition},get errorOnConcurrentExecute(){return B.errorOnConcurrentExecute},get events(){return B.events},get externalAuth(){return B.externalAuth},get fetchArraySize(){return B.fetchArraySize},get fetchAsBuffer(){return B.fetchAsBuffer},get fetchAsString(){return B.fetchAsString},get fetchTypeHandler(){return B.fetchTypeHandler},get lobPrefetchSize(){return B.lobPrefetchSize},get maxRows(){return B.maxRows},get oracleClientVersion(){return Ht===void 0&&p.throwNotImplemented("getting the Oracle Client version"),B.oracleClientVersion},get oracleClientVersionString(){return Ht===void 0&&p.throwNotImplemented("getting the Oracle Client version"),B.oracleClientVersionString},get outFormat(){return B.outFormat},get poolIncrement(){return B.poolIncrement},get poolMax(){return B.poolMax},get poolMaxPerShard(){return B.poolMaxPerShard},get poolMin(){return B.poolMin},get poolPingInterval(){return B.poolPingInterval},get poolTimeout(){return B.poolTimeout},get prefetchRows(){return B.prefetchRows},get stmtCacheSize(){return B.stmtCacheSize},get thin(){return B.thin},get version(){return R.VERSION_MAJOR*1e4+R.VERSION_MINOR*100+R.VERSION_PATCH},get versionString(){return R.VERSION_STRING},get versionSuffix(){return R.VERSION_SUFFIX},set autoCommit(i){p.assertPropValue(typeof i=="boolean","autoCommit"),B.autoCommit=i},set connectionClass(i){p.assertPropValue(typeof i=="string","connectionClass"),B.connectionClass=i},set dbObjectAsPojo(i){p.assertPropValue(typeof i=="boolean","dbObjectAsPojo"),B.dbObjectAsPojo=i},set edition(i){p.assertPropValue(typeof i=="string","edition"),B.edition=i},set errorOnConcurrentExecute(i){p.assertPropValue(typeof i=="boolean","errorOnConcurrentExecute"),B.errorOnConcurrentExecute=i},set events(i){p.assertPropValue(typeof i=="boolean","events"),B.events=i},set externalAuth(i){p.assertPropValue(typeof i=="boolean","externalAuth"),B.externalAuth=i},set fetchArraySize(i){p.assertPropValue(Number.isInteger(i)&&i>0,"fetchArraySize"),B.fetchArraySize=i},set fetchAsBuffer(i){p.assertPropValue(Array.isArray(i),"fetchAsBuffer"),B.createFetchTypeMap(B.fetchAsString,i),B.fetchAsBuffer=i},set fetchAsString(i){p.assertPropValue(Array.isArray(i),"fetchAsString"),B.createFetchTypeMap(i,B.fetchAsBuffer),B.fetchAsString=i},set fetchTypeHandler(i){i!==void 0&&p.assertPropValue(typeof i=="function","fetchTypeHandler"),B.fetchTypeHandler=i},set lobPrefetchSize(i){p.assertPropValue(Number.isInteger(i)&&i>=0,"lobPrefetchSize"),B.lobPrefetchSize=i},set maxRows(i){p.assertPropValue(Number.isInteger(i)&&i>=0,"maxRows"),B.maxRows=i},set outFormat(i){i!==R.OUT_FORMAT_ARRAY&&i!==R.OUT_FORMAT_OBJECT&&p.throwErr(p.ERR_INVALID_PROPERTY_VALUE,"outFormat"),B.outFormat=i},set poolIncrement(i){p.assertPropValue(Number.isInteger(i)&&i>=0,"poolIncrement"),B.poolIncrement=i},set poolMax(i){p.assertPropValue(Number.isInteger(i)&&i>=0,"poolMax"),B.poolMax=i},set poolMaxPerShard(i){p.assertPropValue(Number.isInteger(i)&&i>=0,"poolMaxPerShard"),B.poolMaxPerShard=i},set poolMin(i){p.assertPropValue(Number.isInteger(i)&&i>=0,"poolMin"),B.poolMin=i},set poolPingInterval(i){p.assertPropValue(Number.isInteger(i)&&i<2**31&&i>=(-2)**31,"poolPingInterval"),B.poolPingInterval=i},set poolTimeout(i){p.assertPropValue(Number.isInteger(i)&&i>=0,"poolTimeout"),B.poolTimeout=i},set prefetchRows(i){p.assertPropValue(Number.isInteger(i)&&i>=0,"prefetchRows"),B.prefetchRows=i},set stmtCacheSize(i){p.assertPropValue(Number.isInteger(i)&&i>=0,"stmtCacheSize"),B.stmtCacheSize=i}}});var RS=m((Zm,pS)=>{pS.exports=dS()});var Ua=m(DS=>{DS.require=function(){if(typeof process=="object"&&process.versions&&process.versions.electron)try{let i=require("original-fs");if(Object.keys(i).length>0)return i}catch{}return require("fs")}});var wa=m((eI,mS)=>{mS.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var gS=m((tI,OS)=>{var kd=Ua().require(),Ge=require("path"),IS=wa(),bd=typeof process=="object"&&process.platform==="win32",CS=T(i=>i&&typeof i=="object","is_Obj"),Ma=new Uint32Array(256).map((i,e)=>{for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e>>>=1;return e>>>0});function Ye(i){this.sep=Ge.sep,this.fs=kd,CS(i)&&CS(i.fs)&&typeof i.fs.statSync=="function"&&(this.fs=i.fs)}T(Ye,"Utils");OS.exports=Ye;Ye.prototype.makeDir=function(i){let e=this;function t(s){let r=s.split(e.sep)[0];s.split(e.sep).forEach(function(_){if(!(!_||_.substr(-1,1)===":")){r+=e.sep+_;var o;try{o=e.fs.statSync(r)}catch{e.fs.mkdirSync(r)}if(o&&o.isFile())throw Errors.FILE_IN_THE_WAY.replace("%s",r)}})}T(t,"mkdirSync"),t(i)};Ye.prototype.writeFileTo=function(i,e,t,s){let r=this;if(r.fs.existsSync(i)){if(!t)return!1;var _=r.fs.statSync(i);if(_.isDirectory())return!1}var o=Ge.dirname(i);r.fs.existsSync(o)||r.makeDir(o);var a;try{a=r.fs.openSync(i,"w",438)}catch{r.fs.chmodSync(i,438),a=r.fs.openSync(i,"w",438)}if(a)try{r.fs.writeSync(a,e,0,e.length,0)}finally{r.fs.closeSync(a)}return r.fs.chmodSync(i,s||438),!0};Ye.prototype.writeFileToAsync=function(i,e,t,s,r){typeof s=="function"&&(r=s,s=void 0);let _=this;_.fs.exists(i,function(o){if(o&&!t)return r(!1);_.fs.stat(i,function(a,c){if(o&&c.isDirectory())return r(!1);var N=Ge.dirname(i);_.fs.exists(N,function(E){E||_.makeDir(N),_.fs.open(i,"w",438,function(P,f){P?_.fs.chmod(i,438,function(){_.fs.open(i,"w",438,function(u,S){_.fs.write(S,e,0,e.length,0,function(){_.fs.close(S,function(){_.fs.chmod(i,s||438,function(){r(!0)})})})})}):f?_.fs.write(f,e,0,e.length,0,function(){_.fs.close(f,function(){_.fs.chmod(i,s||438,function(){r(!0)})})}):_.fs.chmod(i,s||438,function(){r(!0)})})})})})};Ye.prototype.findFiles=function(i){let e=this;function t(s,r,_){typeof r=="boolean"&&(_=r,r=void 0);let o=[];return e.fs.readdirSync(s).forEach(function(a){var c=Ge.join(s,a);e.fs.statSync(c).isDirectory()&&_&&(o=o.concat(t(c,r,_))),(!r||r.test(c))&&o.push(Ge.normalize(c)+(e.fs.statSync(c).isDirectory()?e.sep:""))}),o}return T(t,"findSync"),t(i,void 0,!0)};Ye.prototype.getAttributes=function(){};Ye.prototype.setAttributes=function(){};Ye.crc32update=function(i,e){return Ma[(i^e)&255]^i>>>8};Ye.crc32=function(i){typeof i=="string"&&(i=Buffer.from(i,"utf8")),Ma.length||genCRCTable();let e=i.length,t=-1;for(let s=0;s<e;)t=Ye.crc32update(t,i[s++]);return~t>>>0};Ye.methodToString=function(i){switch(i){case IS.STORED:return"STORED ("+i+")";case IS.DEFLATED:return"DEFLATED ("+i+")";default:return"UNSUPPORTED ("+i+")"}};Ye.canonical=function(i){if(!i)return"";var e=Ge.posix.normalize("/"+i.split("\\").join("/"));return Ge.join(".",e)};Ye.sanitize=function(i,e){i=Ge.resolve(Ge.normalize(i));for(var t=e.split("/"),s=0,r=t.length;s<r;s++){var _=Ge.normalize(Ge.join(i,t.slice(s,r).join(Ge.sep)));if(_.indexOf(i)===0)return _}return Ge.normalize(Ge.join(i,Ge.basename(e)))};Ye.toBuffer=T(function(e){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?Buffer.from(e,"utf8"):Buffer.alloc(0)},"toBuffer");Ye.readBigUInt64LE=function(i,e){var t=Buffer.from(i.slice(e,e+8));return t.swap64(),parseInt(`0x${t.toString("hex")}`)};Ye.isWin=bd;Ye.crcTable=Ma});var yS=m((rI,LS)=>{LS.exports={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed",FILE_IN_THE_WAY:"There is a file in the way: %s",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:"File not found: %s",NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found"}});var US=m((iI,BS)=>{var $r=Ua().require(),YS=require("path");$r.existsSync=$r.existsSync||YS.existsSync;BS.exports=function(i){var e=i||"",t=r(),s=null;function r(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return T(r,"newAttr"),e&&$r.existsSync(e)?(s=$r.statSync(e),t.directory=s.isDirectory(),t.mtime=s.mtime,t.atime=s.atime,t.executable=(73&s.mode)!==0,t.readonly=(128&s.mode)===0,t.hidden=YS.basename(e)[0]==="."):console.warn("Invalid path: "+e),{get directory(){return t.directory},get readOnly(){return t.readonly},get hidden(){return t.hidden},get mtime(){return t.mtime},get atime(){return t.atime},get executable(){return t.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:e,isDirectory:t.directory,isReadOnly:t.readonly,isHidden:t.hidden,isExecutable:t.executable,mTime:t.mtime,aTime:t.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var ds=m((_I,zs)=>{zs.exports=gS();zs.exports.Constants=wa();zs.exports.Errors=yS();zs.exports.FileAttr=US()});var MS=m((oI,wS)=>{var Xs=ds(),L=Xs.Constants;wS.exports=function(){var i=20,e=10,t=0,s=0,r=0,_=0,o=0,a=0,c=0,N=0,E=0,P=0,f=0,u=0,S=0;i|=Xs.isWin?2560:768,t|=L.FLG_EFS;var A={};function D(h){h=new Date(h),r=(h.getFullYear()-1980&127)<<25|h.getMonth()+1<<21|h.getDate()<<16|h.getHours()<<11|h.getMinutes()<<5|h.getSeconds()>>1}return T(D,"setTime"),D(+new Date),{get made(){return i},set made(h){i=h},get version(){return e},set version(h){e=h},get flags(){return t},set flags(h){t=h},get method(){return s},set method(h){switch(h){case L.STORED:this.version=10;case L.DEFLATED:default:this.version=20}s=h},get time(){return new Date((r>>25&127)+1980,(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(r&31)<<1)},set time(h){D(h)},get crc(){return _},set crc(h){_=Math.max(0,h)>>>0},get compressedSize(){return o},set compressedSize(h){o=Math.max(0,h)>>>0},get size(){return a},set size(h){a=Math.max(0,h)>>>0},get fileNameLength(){return c},set fileNameLength(h){c=h},get extraLength(){return N},set extraLength(h){N=h},get commentLength(){return E},set commentLength(h){E=h},get diskNumStart(){return P},set diskNumStart(h){P=Math.max(0,h)>>>0},get inAttr(){return f},set inAttr(h){f=Math.max(0,h)>>>0},get attr(){return u},set attr(h){u=Math.max(0,h)>>>0},get fileAttr(){return u?(u>>>0|0)>>16&4095:0},get offset(){return S},set offset(h){S=Math.max(0,h)>>>0},get encripted(){return(t&1)===1},get entryHeaderSize(){return L.CENHDR+c+N+E},get realDataOffset(){return S+L.LOCHDR+A.fnameLen+A.extraLen},get dataHeader(){return A},loadDataHeaderFromBinary:function(h){var C=h.slice(S,S+L.LOCHDR);if(C.readUInt32LE(0)!==L.LOCSIG)throw new Error(Xs.Errors.INVALID_LOC);A={version:C.readUInt16LE(L.LOCVER),flags:C.readUInt16LE(L.LOCFLG),method:C.readUInt16LE(L.LOCHOW),time:C.readUInt32LE(L.LOCTIM),crc:C.readUInt32LE(L.LOCCRC),compressedSize:C.readUInt32LE(L.LOCSIZ),size:C.readUInt32LE(L.LOCLEN),fnameLen:C.readUInt16LE(L.LOCNAM),extraLen:C.readUInt16LE(L.LOCEXT)}},loadFromBinary:function(h){if(h.length!==L.CENHDR||h.readUInt32LE(0)!==L.CENSIG)throw new Error(Xs.Errors.INVALID_CEN);i=h.readUInt16LE(L.CENVEM),e=h.readUInt16LE(L.CENVER),t=h.readUInt16LE(L.CENFLG),s=h.readUInt16LE(L.CENHOW),r=h.readUInt32LE(L.CENTIM),_=h.readUInt32LE(L.CENCRC),o=h.readUInt32LE(L.CENSIZ),a=h.readUInt32LE(L.CENLEN),c=h.readUInt16LE(L.CENNAM),N=h.readUInt16LE(L.CENEXT),E=h.readUInt16LE(L.CENCOM),P=h.readUInt16LE(L.CENDSK),f=h.readUInt16LE(L.CENATT),u=h.readUInt32LE(L.CENATX),S=h.readUInt32LE(L.CENOFF)},dataHeaderToBinary:function(){var h=Buffer.alloc(L.LOCHDR);return h.writeUInt32LE(L.LOCSIG,0),h.writeUInt16LE(e,L.LOCVER),h.writeUInt16LE(t,L.LOCFLG),h.writeUInt16LE(s,L.LOCHOW),h.writeUInt32LE(r,L.LOCTIM),h.writeUInt32LE(_,L.LOCCRC),h.writeUInt32LE(o,L.LOCSIZ),h.writeUInt32LE(a,L.LOCLEN),h.writeUInt16LE(c,L.LOCNAM),h.writeUInt16LE(N,L.LOCEXT),h},entryHeaderToBinary:function(){var h=Buffer.alloc(L.CENHDR+c+N+E);return h.writeUInt32LE(L.CENSIG,0),h.writeUInt16LE(i,L.CENVEM),h.writeUInt16LE(e,L.CENVER),h.writeUInt16LE(t,L.CENFLG),h.writeUInt16LE(s,L.CENHOW),h.writeUInt32LE(r,L.CENTIM),h.writeUInt32LE(_,L.CENCRC),h.writeUInt32LE(o,L.CENSIZ),h.writeUInt32LE(a,L.CENLEN),h.writeUInt16LE(c,L.CENNAM),h.writeUInt16LE(N,L.CENEXT),h.writeUInt16LE(E,L.CENCOM),h.writeUInt16LE(P,L.CENDSK),h.writeUInt16LE(f,L.CENATT),h.writeUInt32LE(u,L.CENATX),h.writeUInt32LE(S,L.CENOFF),h.fill(0,L.CENHDR),h},toJSON:function(){let h=T(function(C){return C+" bytes"},"bytes");return{made:i,version:e,flags:t,method:Xs.methodToString(s),time:this.time,crc:"0x"+_.toString(16).toUpperCase(),compressedSize:h(o),size:h(a),fileNameLength:h(c),extraLength:h(N),commentLength:h(E),diskNumStart:P,inAttr:f,attr:u,offset:S,entryHeaderSize:h(L.CENHDR+c+N+E)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var xS=m((TI,VS)=>{var ps=ds(),Te=ps.Constants;VS.exports=function(){var i=0,e=0,t=0,s=0,r=0;return{get diskEntries(){return i},set diskEntries(_){i=e=_},get totalEntries(){return e},set totalEntries(_){e=i=_},get size(){return t},set size(_){t=_},get offset(){return s},set offset(_){s=_},get commentLength(){return r},set commentLength(_){r=_},get mainHeaderSize(){return Te.ENDHDR+r},loadFromBinary:function(_){if((_.length!==Te.ENDHDR||_.readUInt32LE(0)!==Te.ENDSIG)&&(_.length<Te.ZIP64HDR||_.readUInt32LE(0)!==Te.ZIP64SIG))throw new Error(ps.Errors.INVALID_END);_.readUInt32LE(0)===Te.ENDSIG?(i=_.readUInt16LE(Te.ENDSUB),e=_.readUInt16LE(Te.ENDTOT),t=_.readUInt32LE(Te.ENDSIZ),s=_.readUInt32LE(Te.ENDOFF),r=_.readUInt16LE(Te.ENDCOM)):(i=ps.readBigUInt64LE(_,Te.ZIP64SUB),e=ps.readBigUInt64LE(_,Te.ZIP64TOT),t=ps.readBigUInt64LE(_,Te.ZIP64SIZ),s=ps.readBigUInt64LE(_,Te.ZIP64OFF),r=0)},toBinary:function(){var _=Buffer.alloc(Te.ENDHDR+r);return _.writeUInt32LE(Te.ENDSIG,0),_.writeUInt32LE(0,4),_.writeUInt16LE(i,Te.ENDSUB),_.writeUInt16LE(e,Te.ENDTOT),_.writeUInt32LE(t,Te.ENDSIZ),_.writeUInt32LE(s,Te.ENDOFF),_.writeUInt16LE(r,Te.ENDCOM),_.fill(" ",Te.ENDHDR),_},toJSON:function(){let _=T(function(o,a){let c=o.toString(16).toUpperCase();for(;c.length<a;)c="0"+c;return"0x"+c},"offset");return{diskEntries:i,totalEntries:e,size:t+" bytes",offset:_(s,4),commentLength:r}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var xa=m(Va=>{Va.EntryHeader=MS();Va.MainHeader=xS()});var kS=m((lI,FS)=>{FS.exports=function(i){var e=require("zlib"),t={chunkSize:(parseInt(i.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(i,t)},deflateAsync:function(s){var r=e.createDeflateRaw(t),_=[],o=0;r.on("data",function(a){_.push(a),o+=a.length}),r.on("end",function(){var a=Buffer.alloc(o),c=0;a.fill(0);for(var N=0;N<_.length;N++){var E=_[N];E.copy(a,c),c+=E.length}s&&s(a)}),r.end(i)}}}});var GS=m((NI,bS)=>{bS.exports=function(i){var e=require("zlib");return{inflate:function(){return e.inflateRawSync(i)},inflateAsync:function(t){var s=e.createInflateRaw(),r=[],_=0;s.on("data",function(o){r.push(o),_+=o.length}),s.on("end",function(){var o=Buffer.alloc(_),a=0;o.fill(0);for(var c=0;c<r.length;c++){var N=r[c];N.copy(o,a),a+=N.length}t&&t(o)}),s.end(i)}}}});var WS=m((SI,KS)=>{"use strict";var{randomFillSync:HS}=require("crypto"),Gd=new Uint32Array(256).map((i,e)=>{for(let t=0;t<8;t++)e&1?e=e>>>1^3988292384:e>>>=1;return e>>>0}),vS=T((i,e)=>Math.imul(i,e)>>>0,"uMul"),qS=T((i,e)=>Gd[(i^e)&255]^i>>>8,"crc32update"),Qs=T(()=>typeof HS=="function"?HS(Buffer.alloc(12)):Qs.node(),"genSalt");Qs.node=()=>{let i=Buffer.alloc(12),e=i.length;for(let t=0;t<e;t++)i[t]=Math.random()*256&255;return i};var ei={genSalt:Qs};function ti(i){let e=Buffer.isBuffer(i)?i:Buffer.from(i);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let t=0;t<e.length;t++)this.updateKeys(e[t])}T(ti,"Initkeys");ti.prototype.updateKeys=function(i){let e=this.keys;return e[0]=qS(e[0],i),e[1]+=e[0]&255,e[1]=vS(e[1],134775813)+1,e[2]=qS(e[2],e[1]>>>24),i};ti.prototype.next=function(){let i=(this.keys[2]|2)>>>0;return vS(i,i^1)>>8&255};function Hd(i){let e=new ti(i);return function(t){let s=Buffer.alloc(t.length),r=0;for(let _ of t)s[r++]=e.updateKeys(_^e.next());return s}}T(Hd,"make_decrypter");function qd(i){let e=new ti(i);return function(t,s,r=0){s||(s=Buffer.alloc(t.length));for(let _ of t){let o=e.next();s[r++]=_^o,e.updateKeys(_)}return s}}T(qd,"make_encrypter");function vd(i,e,t){if(!i||!Buffer.isBuffer(i)||i.length<12)return Buffer.alloc(0);let s=Hd(t);if(s(i.slice(0,12))[11]!==e.crc>>>24)throw"ADM-ZIP: Wrong Password";return s(i.slice(12))}T(vd,"decrypt");function Kd(i){Buffer.isBuffer(i)&&i.length>=12?ei.genSalt=function(){return i.slice(0,12)}:i==="node"?ei.genSalt=Qs.node:ei.genSalt=Qs}T(Kd,"_salter");function Wd(i,e,t,s=!1){i==null&&(i=Buffer.alloc(0)),Buffer.isBuffer(i)||(i=Buffer.from(i.toString()));let r=qd(t),_=ei.genSalt();_[11]=e.crc>>>24&255,s&&(_[10]=e.crc>>>16&255);let o=Buffer.alloc(i.length+12);return r(_,o),r(i,o,12)}T(Wd,"encrypt");KS.exports={decrypt:vd,encrypt:Wd,_salter:Kd}});var zS=m(si=>{si.Deflater=kS();si.Inflater=GS();si.ZipCrypto=WS()});var ka=m((uI,XS)=>{var fe=ds(),zd=xa(),Qe=fe.Constants,Fa=zS();XS.exports=function(i){var e=new zd.EntryHeader,t=Buffer.alloc(0),s=Buffer.alloc(0),r=!1,_=null,o=Buffer.alloc(0);function a(){return!i||!Buffer.isBuffer(i)?Buffer.alloc(0):(e.loadDataHeaderFromBinary(i),i.slice(e.realDataOffset,e.realDataOffset+e.compressedSize))}T(a,"getCompressedDataFromZip");function c(S){return!((e.flags&8)!==8&&fe.crc32(S)!==e.dataHeader.crc)}T(c,"crc32OK");function N(S,A,D){if(typeof A>"u"&&typeof S=="string"&&(D=S,S=void 0),r)return S&&A&&A(Buffer.alloc(0),fe.Errors.DIRECTORY_CONTENT_ERROR),Buffer.alloc(0);var h=a();if(h.length===0)return S&&A&&A(h),h;if(e.encripted){if(typeof D!="string"&&!Buffer.isBuffer(D))throw new Error("ADM-ZIP: Incompatible password parameter");h=Fa.ZipCrypto.decrypt(h,e,D)}var C=Buffer.alloc(e.size);switch(e.method){case fe.Constants.STORED:if(h.copy(C),c(C))return S&&A&&A(C),C;throw S&&A&&A(C,fe.Errors.BAD_CRC),new Error(fe.Errors.BAD_CRC);case fe.Constants.DEFLATED:var g=new Fa.Inflater(h);if(S)g.inflateAsync(function(y){y.copy(y,0),A&&(c(y)?A(y):A(y,fe.Errors.BAD_CRC))});else{if(g.inflate(C).copy(C,0),!c(C))throw new Error(fe.Errors.BAD_CRC+" "+t.toString());return C}break;default:throw S&&A&&A(Buffer.alloc(0),fe.Errors.UNKNOWN_METHOD),new Error(fe.Errors.UNKNOWN_METHOD)}}T(N,"decompress");function E(S,A){if((!_||!_.length)&&Buffer.isBuffer(i))return S&&A&&A(a()),a();if(_.length&&!r){var D;switch(e.method){case fe.Constants.STORED:return e.compressedSize=e.size,D=Buffer.alloc(_.length),_.copy(D),S&&A&&A(D),D;default:case fe.Constants.DEFLATED:var h=new Fa.Deflater(_);if(S)h.deflateAsync(function(g){D=Buffer.alloc(g.length),e.compressedSize=g.length,g.copy(D),A&&A(D)});else{var C=h.deflate();return e.compressedSize=C.length,C}h=null;break}}else if(S&&A)A(Buffer.alloc(0));else return Buffer.alloc(0)}T(E,"compress");function P(S,A){return(S.readUInt32LE(A+4)<<4)+S.readUInt32LE(A)}T(P,"readUInt64LE");function f(S){for(var A=0,D,h,C;A<S.length;)D=S.readUInt16LE(A),A+=2,h=S.readUInt16LE(A),A+=2,C=S.slice(A,A+h),A+=h,Qe.ID_ZIP64===D&&u(C)}T(f,"parseExtra");function u(S){var A,D,h,C;S.length>=Qe.EF_ZIP64_SCOMP&&(A=P(S,Qe.EF_ZIP64_SUNCOMP),e.size===Qe.EF_ZIP64_OR_32&&(e.size=A)),S.length>=Qe.EF_ZIP64_RHO&&(D=P(S,Qe.EF_ZIP64_SCOMP),e.compressedSize===Qe.EF_ZIP64_OR_32&&(e.compressedSize=D)),S.length>=Qe.EF_ZIP64_DSN&&(h=P(S,Qe.EF_ZIP64_RHO),e.offset===Qe.EF_ZIP64_OR_32&&(e.offset=h)),S.length>=Qe.EF_ZIP64_DSN+4&&(C=S.readUInt32LE(Qe.EF_ZIP64_DSN),e.diskNumStart===Qe.EF_ZIP64_OR_16&&(e.diskNumStart=C))}return T(u,"parseZip64ExtendedInformation"),{get entryName(){return t.toString()},get rawEntryName(){return t},set entryName(S){t=fe.toBuffer(S);var A=t[t.length-1];r=A===47||A===92,e.fileNameLength=t.length},get extra(){return o},set extra(S){o=S,e.extraLength=S.length,f(S)},get comment(){return s.toString()},set comment(S){s=fe.toBuffer(S),e.commentLength=s.length},get name(){var S=t.toString();return r?S.substr(S.length-1).split("/").pop():S.split("/").pop()},get isDirectory(){return r},getCompressedData:function(){return E(!1,null)},getCompressedDataAsync:function(S){E(!0,S)},setData:function(S){_=fe.toBuffer(S),!r&&_.length?(e.size=_.length,e.method=fe.Constants.DEFLATED,e.crc=fe.crc32(S),e.changed=!0):e.method=fe.Constants.STORED},getData:function(S){return e.changed?_:N(!1,null,S)},getDataAsync:function(S,A){e.changed?S(_):N(!0,S,A)},set attr(S){e.attr=S},get attr(){return e.attr},set header(S){e.loadFromBinary(S)},get header(){return e},packHeader:function(){var S=e.entryHeaderToBinary(),A=fe.Constants.CENHDR;return t.copy(S,A),A+=t.length,e.extraLength&&(o.copy(S,A),A+=e.extraLength),e.commentLength&&s.copy(S,A),S},toJSON:function(){let S=T(function(A){return"<"+(A&&A.length+" bytes buffer"||"null")+">"},"bytes");return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:e.toJSON(),compressedData:S(i),data:S(_)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var JS=m((fI,jS)=>{var QS=ka(),Xd=xa(),Ve=ds();jS.exports=function(i,e){var t=[],s={},r=Buffer.alloc(0),_=new Xd.MainHeader,o=!1;let a=Object.assign(Object.create(null),e),{noSort:c}=a;i?P(a.readEntries):o=!0;function N(u){let S=_.diskEntries,A=_.offset;for(let D=0;D<S;D++){let h=A,C=new QS(i);C.header=i.slice(h,h+=Ve.Constants.CENHDR),C.entryName=i.slice(h,h+=C.header.fileNameLength),A+=C.header.entryHeaderSize,u(C)}}T(N,"iterateEntries");function E(){o=!0,s={},t=new Array(_.diskEntries);for(var u=_.offset,S=0;S<t.length;S++){var A=u,D=new QS(i);D.header=i.slice(A,A+=Ve.Constants.CENHDR),D.entryName=i.slice(A,A+=D.header.fileNameLength),D.header.extraLength&&(D.extra=i.slice(A,A+=D.header.extraLength)),D.header.commentLength&&(D.comment=i.slice(A,A+D.header.commentLength)),u+=D.header.entryHeaderSize,t[S]=D,s[D.entryName]=D}}T(E,"readEntries");function P(u){var S=i.length-Ve.Constants.ENDHDR,A=Math.max(0,S-65535),D=A,h=i.length,C=-1,g=0;for(S;S>=D;S--)if(i[S]===80){if(i.readUInt32LE(S)===Ve.Constants.ENDSIG){C=S,g=S,h=S+Ve.Constants.ENDHDR,D=S-Ve.Constants.END64HDR;continue}if(i.readUInt32LE(S)===Ve.Constants.END64SIG){D=A;continue}if(i.readUInt32LE(S)===Ve.Constants.ZIP64SIG){C=S,h=S+Ve.readBigUInt64LE(i,S+Ve.Constants.ZIP64SIZE)+Ve.Constants.ZIP64LEAD;break}}if(!~C)throw new Error(Ve.Errors.INVALID_FORMAT);_.loadFromBinary(i.slice(C,h)),_.commentLength&&(r=i.slice(g+Ve.Constants.ENDHDR)),u&&E()}T(P,"readMainHeader");function f(){t.length>1&&!c&&t.sort((u,S)=>u.entryName.toLowerCase().localeCompare(S.entryName.toLowerCase()))}return T(f,"sortEntries"),{get entries(){return o||E(),t},get comment(){return r.toString()},set comment(u){r=Ve.toBuffer(u),_.commentLength=r.length},getEntryCount:function(){return o?t.length:_.diskEntries},forEach:function(u){if(!o){N(u);return}t.forEach(u)},getEntry:function(u){return o||E(),s[u]||null},setEntry:function(u){o||E(),t.push(u),s[u.entryName]=u,_.totalEntries=t.length},deleteEntry:function(u){o||E();var S=s[u];if(S&&S.isDirectory){var A=this;this.getEntryChildren(S).forEach(function(D){D.entryName!==u&&A.deleteEntry(D.entryName)})}t.splice(t.indexOf(S),1),delete s[u],_.totalEntries=t.length},getEntryChildren:function(u){if(o||E(),u&&u.isDirectory){let S=[],A=u.entryName,D=A.length;return t.forEach(function(h){h.entryName.substr(0,D)===A&&S.push(h)}),S}return[]},compressToBuffer:function(){o||E(),f();let u=[],S=[],A=0,D=0;_.size=0,_.offset=0;for(let g of t){let y=g.getCompressedData();g.header.offset=D;let K=g.header.dataHeaderToBinary(),q=g.rawEntryName.length,Q=Buffer.alloc(q+g.extra.length);g.rawEntryName.copy(Q,0),Q.copy(g.extra,q);let ne=K.length+Q.length+y.length;D+=ne,u.push(K),u.push(Q),u.push(y);let ce=g.packHeader();S.push(ce),_.size+=ce.length,A+=ne+ce.length}A+=_.mainHeaderSize,_.offset=D,D=0;let h=Buffer.alloc(A);for(let g of u)g.copy(h,D),D+=g.length;for(let g of S)g.copy(h,D),D+=g.length;let C=_.toBinary();return r&&r.copy(C,Ve.Constants.ENDHDR),C.copy(h,D),h},toAsyncBuffer:function(u,S,A,D){try{o||E(),f();let h=[],C=[],g=0,y=0;_.size=0,_.offset=0;let K=T(function(q){if(q.length){let Q=q.pop(),ne=Q.entryName+Q.extra.toString();A&&A(ne),Q.getCompressedDataAsync(function(ce){D&&D(ne),Q.header.offset=y;let st=Q.header.dataHeaderToBinary(),Lt=Buffer.alloc(ne.length,ne),Js=st.length+Lt.length+ce.length;y+=Js,h.push(st),h.push(Lt),h.push(ce);let ht=Q.packHeader();C.push(ht),_.size+=ht.length,g+=Js+ht.length,K(q)})}else{g+=_.mainHeaderSize,_.offset=y,y=0;let Q=Buffer.alloc(g);h.forEach(function(ce){ce.copy(Q,y),y+=ce.length}),C.forEach(function(ce){ce.copy(Q,y),y+=ce.length});let ne=_.toBinary();r&&r.copy(ne,Ve.Constants.ENDHDR),ne.copy(Q,y),u(Q)}},"compress2Buffer");K(t)}catch(h){S(h)}}}}});var $S=m((pI,ZS)=>{var Re=ds(),St=require("path"),Qd=ka(),jd=JS(),Jt=T((i,e)=>typeof i=="boolean"?i:e,"get_Bool"),ba=T((i,e)=>typeof i=="string"?i:e,"get_Str"),Jd={noSort:!1,readEntries:!1,method:Re.Constants.NONE,fs:null};ZS.exports=function(i,e){let t=null,s=Object.assign(Object.create(null),Jd);i&&typeof i=="object"&&(i instanceof Uint8Array||(Object.assign(s,i),i=s.input?s.input:void 0,s.input&&delete s.input),Buffer.isBuffer(i)&&(t=i,s.method=Re.Constants.BUFFER,i=void 0)),Object.assign(s,e);let r=new Re(s);if(i&&typeof i=="string")if(r.fs.existsSync(i))s.method=Re.Constants.FILE,s.filename=i,t=r.fs.readFileSync(i);else throw new Error(Re.Errors.INVALID_FILENAME);let _=new jd(t,s),{canonical:o,sanitize:a}=Re;function c(E){if(E&&_){var P;if(typeof E=="string"&&(P=_.getEntry(E)),typeof E=="object"&&typeof E.entryName<"u"&&typeof E.header<"u"&&(P=_.getEntry(E.entryName)),P)return P}return null}T(c,"getEntry");function N(E){let{join:P,normalize:f,sep:u}=St.posix;return P(".",f(u+E.split("\\").join(u)+u))}return T(N,"fixPath"),{readFile:function(E,P){var f=c(E);return f&&f.getData(P)||null},readFileAsync:function(E,P){var f=c(E);f?f.getDataAsync(P):P(null,"getEntry failed for:"+E)},readAsText:function(E,P){var f=c(E);if(f){var u=f.getData();if(u&&u.length)return u.toString(P||"utf8")}return""},readAsTextAsync:function(E,P,f){var u=c(E);u?u.getDataAsync(function(S,A){if(A){P(S,A);return}S&&S.length?P(S.toString(f||"utf8")):P("")}):P("")},deleteFile:function(E){var P=c(E);P&&_.deleteEntry(P.entryName)},addZipComment:function(E){_.comment=E},getZipComment:function(){return _.comment||""},addZipEntryComment:function(E,P){var f=c(E);f&&(f.comment=P)},getZipEntryComment:function(E){var P=c(E);return P&&P.comment||""},updateFile:function(E,P){var f=c(E);f&&f.setData(P)},addLocalFile:function(E,P,f,u){if(r.fs.existsSync(E)){P=P?N(P):"";var S=E.split("\\").join("/").split("/").pop();P+=f||S;let A=r.fs.statSync(E);this.addFile(P,r.fs.readFileSync(E),u,A)}else throw new Error(Re.Errors.FILE_NOT_FOUND.replace("%s",E))},addLocalFolder:function(E,P,f){if(f instanceof RegExp?f=function(u){return function(S){return u.test(S)}}(f):typeof f!="function"&&(f=T(function(){return!0},"filter")),P=P?N(P):"",E=St.normalize(E),r.fs.existsSync(E)){let u=r.findFiles(E),S=this;u.length&&u.forEach(function(A){var D=St.relative(E,A).split("\\").join("/");if(f(D)){var h=r.fs.statSync(A);h.isFile()?S.addFile(P+D,r.fs.readFileSync(A),"",h):S.addFile(P+D+"/",Buffer.alloc(0),"",h)}})}else throw new Error(Re.Errors.FILE_NOT_FOUND.replace("%s",E))},addLocalFolderAsync:function(E,P,f,u){u instanceof RegExp?u=function(A){return function(D){return A.test(D)}}(u):typeof u!="function"&&(u=T(function(){return!0},"filter")),f=f?N(f):"",E=St.normalize(E);var S=this;r.fs.open(E,"r",function(A){if(A&&A.code==="ENOENT")P(void 0,Re.Errors.FILE_NOT_FOUND.replace("%s",E));else if(A)P(void 0,A);else{var D=r.findFiles(E),h=-1,C=T(function(){if(h+=1,h<D.length){var g=D[h],y=St.relative(E,g).split("\\").join("/");y=y.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),u(y)?r.fs.stat(g,function(K,q){K&&P(void 0,K),q.isFile()?r.fs.readFile(g,function(Q,ne){Q?P(void 0,Q):(S.addFile(f+y,ne,"",q),C())}):(S.addFile(f+y+"/",Buffer.alloc(0),"",q),C())}):C()}else P(!0,void 0)},"next");C()}})},addLocalFolderPromise:function(E,P){return new Promise((f,u)=>{let{filter:S,zipPath:A}=Object.assign({},P);this.addLocalFolderAsync(E,(D,h)=>{h&&u(h),D&&f(this)},A,S)})},addFile:function(E,P,f,u){let S=c(E),A=S!=null;A||(S=new Qd,S.entryName=E),S.comment=f||"";let D=typeof u=="object"&&u instanceof r.fs.Stats;D&&(S.header.time=u.mtime);var h=S.isDirectory?16:0;if(!Re.isWin){let C=S.isDirectory?16384:32768;D?C|=4095&u.mode:typeof u=="number"?C|=4095&u:C|=S.isDirectory?493:420,h=(h|C<<16)>>>0}S.attr=h,S.setData(P),A||_.setEntry(S)},getEntries:function(){return _?_.entries:[]},getEntry:function(E){return c(E)},getEntryCount:function(){return _.getEntryCount()},forEach:function(E){return _.forEach(E)},extractEntryTo:function(E,P,f,u,S,A){u=Jt(u,!1),S=Jt(S,!1),f=Jt(f,!0),A=ba(A,ba(S,void 0));var D=c(E);if(!D)throw new Error(Re.Errors.NO_ENTRY);var h=o(D.entryName),C=a(P,A&&!D.isDirectory?A:f?h:St.basename(h));if(D.isDirectory){var g=_.getEntryChildren(D);return g.forEach(function(q){if(q.isDirectory)return;var Q=q.getData();if(!Q)throw new Error(Re.Errors.CANT_EXTRACT_FILE);var ne=o(q.entryName),ce=a(P,f?ne:St.basename(ne));let st=S?q.header.fileAttr:void 0;r.writeFileTo(ce,Q,u,st)}),!0}var y=D.getData();if(!y)throw new Error(Re.Errors.CANT_EXTRACT_FILE);if(r.fs.existsSync(C)&&!u)throw new Error(Re.Errors.CANT_OVERRIDE);let K=S?E.header.fileAttr:void 0;return r.writeFileTo(C,y,u,K),!0},test:function(E){if(!_)return!1;for(var P in _.entries)try{if(P.isDirectory)continue;var f=_.entries[P].getData(E);if(!f)return!1}catch{return!1}return!0},extractAllTo:function(E,P,f,u){if(P=Jt(P,!1),u=ba(f,u),f=Jt(f,!1),!_)throw new Error(Re.Errors.NO_ZIP);_.entries.forEach(function(S){var A=a(E,o(S.entryName.toString()));if(S.isDirectory){r.makeDir(A);return}var D=S.getData(u);if(!D)throw new Error(Re.Errors.CANT_EXTRACT_FILE);let h=f?S.header.fileAttr:void 0;r.writeFileTo(A,D,P,h);try{r.fs.utimesSync(A,S.header.time,S.header.time)}catch{throw new Error(Re.Errors.CANT_EXTRACT_FILE)}})},extractAllToAsync:function(E,P,f,u){if(u||(u=T(function(){},"callback")),P=Jt(P,!1),typeof f=="function"&&!u&&(u=f),f=Jt(f,!1),!_){u(new Error(Re.Errors.NO_ZIP));return}E=St.resolve(E);let S=T(g=>a(E,St.normalize(o(g.entryName.toString()))),"getPath"),A=T((g,y)=>new Error(g+': "'+y+'"'),"getError"),D=[],h=new Set;_.entries.forEach(g=>{g.isDirectory?D.push(g):h.add(g)});for(let g of D){let y=S(g),K=f?g.header.fileAttr:void 0;try{r.makeDir(y),K&&r.fs.chmodSync(y,K),r.fs.utimesSync(y,g.header.time,g.header.time)}catch{u(A("Unable to create folder",y))}}let C=T(()=>{h.size===0&&u()},"done");for(let g of h.values()){let y=St.normalize(o(g.entryName.toString())),K=a(E,y);g.getDataAsync(function(q,Q){if(Q){u(new Error(Q));return}if(!q)u(new Error(Re.Errors.CANT_EXTRACT_FILE));else{let ne=f?g.header.fileAttr:void 0;r.writeFileToAsync(K,q,P,ne,function(ce){if(!ce){u(A("Unable to write file",K));return}r.fs.utimes(K,g.header.time,g.header.time,function(st){if(st){u(A("Unable to set times",K));return}h.delete(g),C()})})}})}C()},writeZip:function(E,P){if(arguments.length===1&&typeof E=="function"&&(P=E,E=""),!E&&s.filename&&(E=s.filename),!!E){var f=_.compressToBuffer();if(f){var u=r.writeFileTo(E,f,!0);typeof P=="function"&&P(u?null:new Error("failed"),"")}}},writeZipPromise:function(E,P){let{overwrite:f,perm:u}=Object.assign({overwrite:!0},P);return new Promise((S,A)=>{!E&&s.filename&&(E=s.filename),E||A("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(D=>{let h=T(C=>C?S(C):A("ADM-ZIP: Wasn't able to write zip file"),"ret");r.writeFileToAsync(E,D,f,u,h)},A)})},toBufferPromise:function(){return new Promise((E,P)=>{_.toAsyncBuffer(E,P)})},toBuffer:function(E,P,f,u){return this.valueOf=2,typeof E=="function"?(_.toAsyncBuffer(E,P,f,u),null):_.compressToBuffer()}}}});var sh=m((DI,th)=>{"use strict";var Zd=require("crypto"),Rs=require("fs"),eh=require("path"),$d=$S(),ep=T((i,e)=>new Promise((t,s)=>{try{let r=new $d(i);if(!r)return s(new Error("Link to zip file is broken or system has no permissions to "+i+" folder"));let _=r.getEntries();return Object.keys(_).length===0?s(new Error("Zip file is empty")):(r.extractAllTo(e,!0),t(e))}catch(r){s(r)}}),"extractZip"),tp=T((i,e)=>{if(!Rs.existsSync(i))return;let t=/DIRECTORY\=\".+?\"/i,s=Rs.readFileSync(i).toString();t.test(s)&&(s=s.replace(t,`DIRECTORY="${e}"`),Rs.writeFileSync(i,s))},"replaceSqlNetOraDirectoryPath"),sp=T(i=>new Promise((e,t)=>{let s=T(o=>Zd.createHash("md5").update(o,"utf-8").digest("hex"),"getHash"),r=Rs.createReadStream(i),_="";r.on("data",o=>{_+=o}),r.on("error",o=>{t(o)}),r.on("end",function(){e(s(_))})}),"getHashByFile"),rp=T(async({walletFile:i,tempFolder:e,name:t})=>{if(!Rs.existsSync(i))return;let s=await sp(i),r=eh.join(e,t+"_"+s);if(Rs.existsSync(r))return r;await ep(i,r);let _=eh.join(r,"sqlnet.ora");return tp(_,r),r},"extractWallet");th.exports=rp});var rh=m(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});var ip=function(){function i(e,t){t===void 0&&(t=0),this.source=e,this.position=t}return T(i,"LexerState"),i.prototype.copy=function(){return new i(this.source,this.position)},i}();Ga.default=ip});var _h=m(Zt=>{"use strict";var np=Zt&&Zt.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(e,t){i(e,t);function s(){this.constructor=e}T(s,"__"),e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}();Object.defineProperty(Zt,"__esModule",{value:!0});var ih=function(){function i(e,t,s,r,_,o){this.type=e,this.match=t,this.groups=s,this.start=r,this.end=_,this.lexer=o}return T(i,"Token"),i.prototype.strpos=function(){var e=this.lexer.strpos(this.start),t=this.lexer.strpos(this.end);return{start:e,end:t}},i.prototype.isEof=function(){return!1},i}();Zt.default=ih;var nh=function(i){np(e,i);function e(t){var s=this,r=t.source.length;return s=i.call(this,null,"(eof)",[],r,r,t)||this,s}return T(e,"EOFToken"),e.prototype.isEof=function(){return!0},e}(ih);Zt.EOFToken=nh;Zt.EOF=function(i){return new nh(i)}});var oh=m(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});function _p(i){return new RegExp(i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))}T(_p,"toRegExp");function op(i){return typeof i=="string"&&(i=_p(i)),i.source.startsWith("^")?i:new RegExp("^"+i.source,i.flags)}T(op,"normalize");function ap(i,e){for(var t=0,s=0,r=i;s<r.length;s++){var _=r[s],o=e(_,t++);if(o)return{item:_,result:o}}}T(ap,"first");var Tp=function(){function i(){this.tokenTypes=[]}return T(i,"TokenTypes"),i.prototype.disable=function(e){return this.enable(e,!1)},i.prototype.enable=function(e,t){return t===void 0&&(t=!0),this.tokenTypes.filter(function(s){return s.type==e}).forEach(function(s){return s.enabled=t}),this},i.prototype.isEnabled=function(e){var t=this.tokenTypes.filter(function(s){return s.type==e});if(t.length==0)throw new Error("Token of type "+e+" does not exists");return t[0].enabled},i.prototype.peek=function(e,t){var s=e.substr(t);return ap(this.tokenTypes.filter(function(r){return r.enabled}),function(r){return r.regex.lastIndex=0,r.regex.exec(s)})},i.prototype.token=function(e,t,s){return s===void 0&&(s=!1),this.tokenTypes.push({type:e,regex:op(t),enabled:!0,skip:s}),this},i}();Ha.default=Tp});var Th=m($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});var qa=rh();$t.LexerState=qa.default;var ri=_h();$t.Token=ri.default;$t.EOF=ri.EOF;var ah=oh();$t.TokenTypes=ah.default;var cp=function(){function i(e){e===void 0&&(e=""),this._state=new qa.default(e),this._tokenTypes=new ah.default}return T(i,"Lexer"),Object.defineProperty(i.prototype,"position",{get:function(){return this._state.position},set:function(e){this._state.position=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this._state.source},set:function(e){this._state=new qa.default(e)},enumerable:!0,configurable:!0}),i.prototype.attachTo=function(e){this._state=e._state},i.prototype.disable=function(e){return this._tokenTypes.disable(e),this},i.prototype.enable=function(e,t){return this._tokenTypes.enable(e,t),this},i.prototype.expect=function(e){var t=this.next();if(t.type!=e){var s=t.strpos();throw new Error("Expected "+e+(t?", got "+t.type:"")+" at "+s.start.line+":"+s.start.column)}return t},i.prototype.isEnabled=function(e){return this._tokenTypes.isEnabled(e)},i.prototype.next=function(){try{var e=this.peek();return this._state.position=e.end,e}catch(t){throw this._state.position=t.end,t}},i.prototype.peek=function(e){var t=this;e===void 0&&(e=this._state.position);var s=T(function(E){if(E===void 0&&(E=e),E>=t._state.source.length)return ri.EOF(t);var P=t._tokenTypes.peek(t._state.source,E);return P?P.item.skip?s(E+P.result[0].length):new ri.default(P.item.type,P.result[0],P.result.map(function(f){return f}),E,E+P.result[0].length,t):null},"read"),r=s();if(r)return r;var _=this._state.source.substring(e,e+1);try{this.peek(e+1)}catch(E){_+=E.unexpected}var o=this.strpos(e),a=o.line,c=o.column,N=new Error("Unexpected input: "+_+" at ("+a+":"+c+")");throw N.unexpected=_,N.end=e+_.length,N},i.prototype.strpos=function(e){var t=this._state.source.substring(0,e).split(/\r?\n/);Array.isArray(t)||(t=[t]);var s=t.length,r=t[t.length-1].length+1;return{line:s,column:r}},i.prototype.toArray=function(){var e=this._state.copy();this._state.position=0;for(var t=[],s;!(s=this.next()).isEof();)t.push(s);return this._state=e,t},i.prototype.token=function(e,t,s){return this._tokenTypes.token(e,t,s),this},i.prototype.keyword=function(e){return this.token(e,new RegExp(e+"(?=\\W|$)"))},i.prototype.operator=function(e){var t=new String(e).valueOf();return this.token(e,t)},i}();$t.default=cp});var Eh=m((UI,ch)=>{ch.exports=Th()});var Sh=m((wI,Nh)=>{"use strict";var Ep=Eh().default;function lh(i,e={}){i.expect("(");let t=i.expect("WORD").match;i.expect("=");let s;if(i.peek().type==="("){s={};do Object.assign(s,lh(i,e));while(i.peek().type==="(")}else s=i.expect("WORD").match;return i.expect(")"),{...e,[t]:s}}T(lh,"parseObject");var lp=T(i=>{let e=i.expect("WORD").match;return i.expect("="),{name:e,data:lh(i)}},"parseConnection"),Np=T(i=>{let e=new Ep(i).token("$SKIP_COMMENT",/#[^\n]*/,!0).token("$SKIP_WS",/\s+/,!0).token("WORD",/([a-z0-9._-]+|["'][\s\S]*?["'])/i).token("(",/\(/).token(")",/\)/).token("=",/=/),t={};for(;e.peek().type!==null;){let s=lp(e);t[s.name]=s}return t},"parseTns");Nh.exports=Np});var Ah=m((VI,hh)=>{"use strict";var Wa=class Wa{cache;cacheValue;cycle;ifNotExist;increment;maxValue;minValue;sequenceName;start;sharing;order;keep;scale;scaleExtend;shard;shardExtend;type};T(Wa,"Sequence");var va=Wa,za=class za{sharing;ddlScript;sequenceName;minValue;maxValue;increment;cycle;order;cacheValue;scale;extend;shard;type;keep};T(za,"SequenceDto");var Ka=za;hh.exports={Sequence:va,SequenceDto:Ka}});var fh=m((bI,Ph)=>{"use strict";var{Sequence:FI,SequenceDto:kI}=Ah(),Sp=/(?<=START WITH)(\s+)([\w]+)(?=\s+)?/,hp=/\s+LINK$/,xe={true:"Y",false:"N"},te={cache:"cache",cycle:"cycle",extend:"extend",global:"global",keep:"keep",noCache:"nocache",noCycle:"nocycle",noExtend:"noextend",noKeep:"nokeep",noOrder:"noorder",noScale:"noscale",noShard:"noshard",order:"order",scale:"scale",scaleExtend:"scaleExtend",session:"session",shard:"shard",sharing:"sharing",type:"type"},uh={[te.cycle]:{[xe.true]:te.cycle,[xe.false]:te.noCycle},[te.order]:{[xe.true]:te.order,[xe.false]:te.noOrder},[te.shard]:{[xe.true]:te.shard,[xe.false]:""},[te.scale]:{[xe.true]:te.scale,[xe.false]:te.noScale},[te.type]:{[xe.true]:te.session,[xe.false]:te.global},[te.keep]:{[xe.true]:te.keep,[xe.false]:te.noKeep},[te.extend]:{[xe.true]:te.extend,[xe.false]:te.noExtend}},Ap=T(async({schema:i,execute:e,logger:t})=>{try{let s=await e(`
      SELECT JSON_OBJECT(
          'sharing'      VALUE SHARING,
          'sequenceName' VALUE SEQUENCE_NAME,
          'minValue'     VALUE MIN_VALUE,
          'maxValue'     VALUE MAX_VALUE,
          'increment'    VALUE INCREMENT_BY,
          'cycle'        VALUE CYCLE_FLAG,
          'order'        VALUE ORDER_FLAG,
          'cacheValue'   VALUE CACHE_SIZE,
          'scale'        VALUE SCALE_FLAG,
          'extend'       VALUE EXTEND_FLAG,
          'shard'        VALUE SHARDED_FLAG,
          'type'         VALUE SESSION_FLAG,
          'keep'         VALUE KEEP_VALUE
      )
      FROM ALL_OBJECTS
      LEFT JOIN ALL_SEQUENCES
                ON ALL_SEQUENCES.SEQUENCE_OWNER = ALL_OBJECTS.OWNER
                AND ALL_SEQUENCES.SEQUENCE_NAME = ALL_OBJECTS.OBJECT_NAME
      WHERE OBJECT_TYPE = 'SEQUENCE'
      AND OWNER = '${i}'
      `);if(!(s!=null&&s.length))return[];let r=await up({schema:i,execute:e,logger:t});return s.map(([_])=>{let o=JSON.parse(_),a=r[o.sequenceName]||"";return{...o,ddlScript:a}})}catch(s){let{message:r,stack:_,...o}=s;return t.log("error",{message:"Cannot get sequences",error:{message:r,stack:_,err:o}},"Getting sequences"),[]}},"getSchemaSequenceDtos"),up=T(async({schema:i,execute:e,logger:t})=>{try{let s=await e(`
      SELECT JSON_OBJECT(
          'sequenceName' VALUE OBJECT_NAME,
          'ddlScript'    VALUE DBMS_METADATA.GET_DDL(OBJECT_TYPE, OBJECT_NAME, OWNER)
      )
      FROM ALL_OBJECTS
      WHERE OBJECT_TYPE = 'SEQUENCE'
      AND OWNER = '${i}'
      `);return s!=null&&s.length?s.reduce((r,[_])=>{let{sequenceName:o,ddlScript:a}=JSON.parse(_);return{...r,[o]:a}},{}):{}}catch(s){let{message:r,stack:_,...o}=s;return t.log("error",{message:"Cannot get sequences DDL",error:{message:r,stack:_,err:o}},"Getting sequences"),{}}},"getSchemaSequenceDdl"),Pp=T(({execute:i})=>async({schema:e,logger:t})=>(await Ap({schema:e,execute:i,logger:t})).map(r=>{let _=fp({sequenceDto:r}),o=pp({sequenceDto:r}),a=Rp({sequenceDto:r}),c=dp({sequenceDto:r}),N=r.cacheValue?te.cache:te.noCache;return{sequenceName:r.sequenceName,minValue:r.minValue,maxValue:r.maxValue,increment:r.increment,cacheValue:r.cacheValue,cache:N,sharing:_,...o,...a,...c}}),"getSchemaSequences"),fp=T(({sequenceDto:i})=>{var e,t;return(t=(e=i.sharing)==null?void 0:e.replace(hp,""))==null?void 0:t.toLowerCase()},"getSequenceSharing"),dp=T(({sequenceDto:i})=>{let e=i[te.scale],t=i[te.shard],s=i[te.extend],r=uh[te.extend][s],_=e===xe.true?r:"",o=t===xe.true?r:"";return{scaleExtend:_,shardExtend:o}},"getExtendOptions"),pp=T(({sequenceDto:i})=>Object.entries(uh).reduce((e,[t,s])=>({...e,[t]:s[i[t]]}),{}),"getBooleanOptions"),Rp=T(({sequenceDto:i})=>({start:Dp({sequenceDto:i})}),"getOptionsFromDdl"),Dp=T(({sequenceDto:i})=>{var s;let e=i.ddlScript;if(!e.includes("START WITH"))return i.minValue<i.maxValue?i.minValue:i.maxValue;let t=(s=e.match(Sp))==null?void 0:s[2];return isNaN(Number(t))?t:Number(t)},"getStartOptionFromDdl");Ph.exports={getSchemaSequences:Pp}});var Ch=m((HI,Ih)=>{"use strict";var js=RS(),mp=sh(),Xa=require("path"),ni=require("fs"),Ip=Sh(),{getSchemaSequences:Cp}=fh(),Z=require("lodash"),ph={message:"Connection error"},gt,Qa,Op=T((i="")=>{let e=i.match(/http:\/\/(?:.*?:.*?@)?(.*?):(\d+)/i);return e?{httpsProxy:e[1],httpsProxyPort:e[2]}:{}},"parseProxyOptions"),Rh=T(i=>[i,process.env.TNS_ADMIN,Xa.join(process.env.ORACLE_HOME||"","network","admin"),Xa.join(process.env.LD_LIBRARY_PATH||"","network","admin")].reduce((e,t)=>{if(e)return e;let s=Xa.join(t,"tnsnames.ora");return ni.existsSync(s)?s:e},""),"getTnsNamesOraFile"),Dh=T(i=>{let e=ni.readFileSync(i).toString();return Ip(e)},"parseTnsNamesOra"),gp=T((i,e,t,s)=>{var N,E,P,f,u,S,A,D,h,C,g;let r=Rh(i);if(!ni.existsSync(r))return e;s({message:"Found tnsnames.ora file: "+r});let _=Dh(r);if(s({message:"tnsnames.ora successfully parsed"}),!_[e])return s({message:'Cannot find "'+e+'" in tnsnames.ora'}),e;let o=(P=(E=(N=_[e])==null?void 0:N.data)==null?void 0:E.description)==null?void 0:P.address,a=(A=(S=(u=(f=_[e])==null?void 0:f.data)==null?void 0:u.description)==null?void 0:S.connect_data)==null?void 0:A.service_name,c=(g=(C=(h=(D=_[e])==null?void 0:D.data)==null?void 0:h.description)==null?void 0:C.connect_data)==null?void 0:g.sid;return s({message:"tnsnames.ora",address:o,service:a}),ja(Z.omitBy({...o,...t,protocol:(o==null?void 0:o.protocol)||"tcps",service:a||e,sid:c},Z.isUndefined),s)},"getConnectionStringByTnsNames"),ii=T((i,e)=>i?e:"","combine"),ja=T(({protocol:i,host:e,port:t,sid:s,service:r,httpsProxy:_,httpsProxyPort:o},a)=>{let c=`(DESCRIPTION=
		(ADDRESS=
			(PROTOCOL=${i||"tcp"})
			(HOST=${e})
			(PORT=${t}))
			${ii(_,`(HTTPS_PROXY=${_})`)}
			${ii(o,`(HTTPS_PROXY_PORT=${o})`)}
		(CONNECT_DATA=
					${ii(s,`(SID=${s})`)}
					${ii(r,`(SERVICE_NAME=${r})`)}
		)
	)`;return a({message:"connectionString",connectionString:c}),c},"getConnectionDescription"),Lp=T(async(i,e,t)=>{var _,o,a,c,N,E,P,f,u,S,A;let s={protocol:"",host:"",port:"",service:""};if(["Wallet","TNS"].includes(i.connectionMethod)){let D=Rh(i.configDir);if(!ni.existsSync(D))throw new Error("Cannot find tnsnames.ora file. Please, specify tnsnames folder or use Base connection method.");t({message:"Found tnsnames.ora file: "+D});let h=Dh(D);if(!h[i.serviceName])throw new Error('Cannot find "'+i.serviceName+'" in tnsnames.ora');let C=(a=(o=(_=h[i.serviceName])==null?void 0:_.data)==null?void 0:o.description)==null?void 0:a.address,g=(P=(E=(N=(c=h[i.serviceName])==null?void 0:c.data)==null?void 0:N.description)==null?void 0:E.connect_data)==null?void 0:P.service_name,y=(A=(S=(u=(f=h[i.serviceName])==null?void 0:f.data)==null?void 0:u.description)==null?void 0:S.connect_data)==null?void 0:A.sid;t({message:"tnsnames.ora",address:C,service:g}),s.protocol=C==null?void 0:C.protocol,s.host=C==null?void 0:C.host,s.port=C==null?void 0:C.port,s.service=g||i.serviceName,s.sid=y}else s.host=i.host,s.port=i.port,s.service=i.serviceName,s.sid=i.sid;let{options:r}=await e.openTunnel({sshAuthMethod:i.sshConfig.ssh_method==="privateKey"?"IDENTITY_FILE":"USER_PASSWORD",sshTunnelHostname:i.sshConfig.ssh_host,sshTunnelPort:i.sshConfig.ssh_port,sshTunnelUsername:i.sshConfig.ssh_user,sshTunnelPassword:i.sshConfig.ssh_password,sshTunnelIdentityFile:i.sshConfig.ssh_key_file,sshTunnelPassphrase:i.sshConfig.ssh_key_passphrase,host:s.host,port:s.port});return ja({...s,host:r.host,port:r.port.toString()},t)},"getSshConnectionString"),yp=T(async({walletFile:i,tempFolder:e,name:t,connectionMethod:s,TNSpath:r,host:_,port:o,userName:a,userPassword:c,serviceName:N,clientPath:E,clientType:P,queryRequestTimeout:f,authMethod:u,options:S,sid:A,ssh:D,ssh_user:h,ssh_host:C,ssh_port:g,ssh_method:y,ssh_key_file:K,ssh_key_passphrase:q,ssh_password:Q,authRole:ne,mode:ce},st,Lt)=>{if(gt)return gt;let Js={thin:"thin",thick:"thick"},ht,Za,es={},ai="";s==="Wallet"&&(ht=await mp({walletFile:i,tempFolder:e,name:t})),s==="TNS"&&(ht=r),P==="InstantClient"&&(Za=E),S!=null&&S.proxy&&(ai=Op(S==null?void 0:S.proxy)),ce!==Js.thin&&js.initOracleClient({libDir:Za,configDir:ht});let Ds="";return["Wallet","TNS"].includes(s)?ai?Ds=gp(ht,N,ai,Lt):Ds=N:Ds=ja({host:_,port:o,sid:A,service:N},Lt),D&&(Qa=!0,Ds=await Lp({host:_,port:o,configDir:ht,serviceName:N,sid:A,connectionMethod:s,sshConfig:{ssh_user:h,ssh_host:C,ssh_port:g,ssh_method:y,ssh_key_file:K,ssh_password:Q,ssh_key_passphrase:q}},st,Lt)),u==="OS"?es.externalAuth=!0:u==="Kerberos"?(es.username=a,es.password=c,es.externalAuth=!0):(es.username=a,es.password=c),Bp({connectString:Ds,username:a,password:c,queryRequestTimeout:f,authRole:ne})},"connect"),Yp=T(async i=>gt?(Qa&&(Qa=!1,await i.closeConsumer()),new Promise((e,t)=>{gt.close(s=>{if(gt=null,s)return t(s);e()})})):Promise.reject(ph),"disconnect"),Bp=T(({connectString:i,username:e,password:t,queryRequestTimeout:s,authRole:r})=>new Promise((_,o)=>{js.getConnection({username:e,password:t,connectString:i,privilege:r==="default"?void 0:js[r]},(a,c)=>{if(a)return gt=null,o(a);try{c.callTimeout=Number(s||0),gt=c,_()}catch(N){o(N)}})}),"authByCredentials"),Up=T(async({includeSystemCollection:i,schemaName:e},t)=>{let s="SELECT USERNAME FROM ALL_USERS",r,_="";return e&&(_=`USERNAME = '${e}'`),i?r=`${s}${_?` WHERE ${_}`:""}`:r=`${s} WHERE ORACLE_MAINTAINED = 'N'${_?` AND ${_}`:""}`,await Fe(r).catch(o=>(t.info({message:"Cannot retrieve schema names"}),t.error(o),[]))},"getSchemaNames"),wp=T(i=>Z.reduce(i,(e,t)=>({...e,[t[0]]:[...e[t[0]]||[],t[1]]}),{}),"pairToObj"),_i=T((i,e,t)=>{let s="";return t&&(s=`T.OWNER = '${t}'`),Fe(e?`${i}${s?` WHERE ${s}`:""}`:`${i} INNER JOIN ALL_USERS U ON T.OWNER = U.USERNAME WHERE U.ORACLE_MAINTAINED = 'N'${s?` AND ${s}`:""}`)},"selectEntities"),Mp=T(({includeSystemCollection:i,schemaName:e})=>_i("SELECT T.OWNER, T.TABLE_NAME FROM ALL_TABLES T",i,e),"tableNamesByUser"),Vp=T(({includeSystemCollection:i,schemaName:e})=>_i("SELECT T.OWNER, T.TABLE_NAME FROM ALL_EXTERNAL_TABLES T",i,e),"externalTableNamesByUser"),xp=T(({includeSystemCollection:i,schemaName:e})=>_i("SELECT T.OWNER, T.VIEW_NAME || ' (v)' FROM ALL_VIEWS T",i,e),"viewNamesByUser"),Fp=T(({includeSystemCollection:i,schemaName:e})=>_i("SELECT T.OWNER, T.MVIEW_NAME || ' (v)' FROM ALL_MVIEWS T",i,e),"materializedViewNamesByUser"),kp=T(async(i,e)=>{let t=await Fp(i).catch(c=>(e.info({message:"Cannot retrieve materialized views"}),e.error(c),[]));e.info({materializedViews:t});let s=t.map(c=>Z.join(c,".").slice(0,-4)),r=await Mp(i).then(c=>Z.reject(c,N=>s.includes(Z.join(N,".")))).catch(c=>(e.info({message:"Cannot retrieve tables"}),e.error(c),[]));e.info({tables:r});let _=await Vp(i).catch(c=>(e.info({message:"Cannot retrieve external tables"}),e.error(c),[]));e.info({externalTables:_});let o=await xp(i).catch(c=>(e.info({message:"Cannot retrieve views"}),e.error(c),[]));e.info({views:o});let a=wp([...r,..._,...o,...t]);return Object.keys(a).reduce((c,N)=>[...c,{dbName:N,dbCollections:a[N],isEmpty:!a[N].length}],[])},"getEntitiesNames"),Fe=T((i,e={},t=[])=>gt?new Promise((s,r)=>{gt.execute(i,t,e,(_,o)=>{if(_)return r(_);s(o.rows)})}):Promise.reject(ph),"execute"),bp=T(async i=>{var s,r;let e=["12c","18c","19c","21c","23ai"],t="21c";try{let _=await Fe("SELECT VERSION FROM PRODUCT_COMPONENT_VERSION WHERE product LIKE 'Oracle Database%'");i.log("info",_,"DB Version");let o=(r=(s=_==null?void 0:_[0])==null?void 0:s[0])==null?void 0:r.split(".").shift();return o&&e.find(c=>c.startsWith(o))||t}catch(_){return i.log("error",{message:_.message,stack:_.stack},"Error of getting DB Version"),t}},"getDbVersion"),Gp=T(i=>i.slice(-4)===" (v)","isView"),Hp=T(i=>{let e=Z.partition(i,Gp);return{views:e[0].map(t=>t.slice(0,-4)),tables:e[1]}},"splitEntityNames"),Ja=T(()=>Fe(`BEGIN
		DBMS_METADATA.SET_TRANSFORM_PARAM(DBMS_METADATA.SESSION_TRANSFORM,'SQLTERMINATOR', TRUE);
	END;`),"setSQLTerminator"),qp=T(async(i,e,t)=>{var s;try{await Ja();let r=await Fe(`
			SELECT JSON_OBJECT(
			'tableDDL' VALUE DBMS_METADATA.GET_DDL('TABLE', T.TABLE_NAME, T.OWNER),
			'countOfRecords' VALUE (SELECT COUNT(*) FROM ALL_TABLES WHERE TABLE_NAME='${i}'),
			'indexDDLs' VALUE (
				SELECT JSON_ARRAYAGG(DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME, OWNER) RETURNING CLOB)
				FROM ALL_INDEXES
				WHERE TABLE_OWNER=T.OWNER
					AND TABLE_NAME=T.TABLE_NAME
					AND INDEX_NAME NOT IN (
						SELECT CONSTRAINT_NAME
						FROM ALL_CONSTRAINTS
						WHERE CONSTRAINT_TYPE='P'
						AND OWNER=T.OWNER
						AND TABLE_NAME=T.TABLE_NAME
					)
				),
			'jsonColumns' VALUE (
				SELECT JSON_ARRAYAGG(JSON_OBJECT('name' VALUE COLUMN_NAME, 'datatype' VALUE DATA_TYPE) RETURNING CLOB)
				FROM ALL_TAB_COLUMNS
				WHERE TABLE_NAME=T.TABLE_NAME
				AND OWNER=T.OWNER
				AND DATA_TYPE IN ('CLOB', 'BLOB', 'NVARCHAR2', 'JSON')
			),
			'tableComment' VALUE (
				SELECT COMMENTS
				FROM ALL_TAB_COMMENTS
				WHERE OWNER = T.OWNER AND TABLE_NAME = T.TABLE_NAME AND COMMENTS IS NOT NULL
			),
			'columnComments' VALUE (
				SELECT JSON_ARRAYAGG(JSON_OBJECT('name' VALUE COLUMN_NAME, 'comment' VALUE COMMENTS) RETURNING CLOB)
				FROM ALL_COL_COMMENTS
				WHERE OWNER = T.OWNER AND TABLE_NAME = T.TABLE_NAME  AND COMMENTS IS NOT NULL
			) RETURNING CLOB
			)
			FROM ALL_TABLES T
			WHERE T.OWNER='${e}' AND T.TABLE_NAME='${i}'
		`),_=await((s=Z.first(Z.first(r)))==null?void 0:s.getData());try{let o=JSON.parse(_);t.log("info",o,`Getting DDL from "${e}"."${i}"`);let a=o.tableComment?`COMMENT ON TABLE ${qt(e)}.${qt(i)} IS ${dh(o.tableComment)};`:"",c=Z.map(o.columnComments,E=>`COMMENT ON COLUMN ${qt(e)}.${qt(i)}.${qt(E.name)}  IS ${dh(E.comment)};`);return{ddl:`${o.tableDDL}
				${Z.join(o.indexDDLs,`
`)}
				${a}

				${Z.join(c,`
`)}`,jsonColumns:o.jsonColumns,countOfRecords:o.countOfRecords}}catch(o){return t.log("error",{message:`Cannot parse query result: 

`+_,error:{message:o.message,stack:o.stack,err:Z.omit(o,["message","stack"])}},`Getting DDL from "${e}"."${i}"`),{ddl:"",jsonColumns:[],countOfRecords:0}}}catch(r){if((r==null?void 0:r.errorNum)===31603&&!await mh(t))throw r;return t.log("error",{message:"Cannot get DDL for table: "+i,error:{message:r.message,stack:r.stack,err:Z.omit(r,["message","stack"])}},`Getting DDL from "${e}"."${i}"`),{ddl:"",jsonColumns:[],countOfRecords:0}}},"getDDL"),vp=T(i=>Object.keys(i).reduce(async(e,t)=>{let s=await e,r=i[t];return r instanceof js.Lob&&(r=await r.getData()),r instanceof Buffer&&(r=r.toString()),s[t]=r,s},Promise.resolve({})),"readLobs"),Kp=T(async i=>await i.reduce(async(e,t)=>{let s=await e,r=await vp(t);return s.concat(r)},Promise.resolve([])),"readRecordsValues"),qt=T(i=>/[\s\da-z]/.test(i)?`"${i}"`:i,"escapeName"),dh=T(i=>`'${i.replaceAll("'","''")}'`,"escapeComment"),Wp=T((i,e)=>e.map(t=>i.reduce((s,r)=>(s[r]=t[r],s),{})),"replaceNames"),zp=T(async({tableName:i,limit:e,jsonColumns:t,schema:s})=>{let r=Z.map(t,a=>a.name),_=await Fe(`SELECT ${r.map(a=>qt(a)).join(", ")} FROM ${qt(s)}.${qt(i)} FETCH NEXT ${e} ROWS ONLY`,{outFormat:js.OBJECT});return await Kp(Wp(r,_))},"selectRecords"),Xp=T((i,e)=>{let t={number:"number",boolean:"boolean",string:"string"};return i.reduce((s,r)=>{if(s)return s;let _=r[e];return Array.isArray(_)?"array":typeof _=="object"?_?"object":"null":t[typeof _]??s},"")},"getJsonType"),Qp=T(i=>`json${i.charAt(0).toUpperCase()}${i.slice(1)}`,"getJsonTypeName"),jp=T(async(i,e)=>{let t={CLOB:{type:"lobs",mode:"clob"},BLOB:{type:"lobs",mode:"blob"},NVARCHAR2:{type:"char",mode:"nvarchar2"},JSON:{type:"json"}};return{properties:i.reduce((r,_)=>{let o=_.name,a=_.datatype,c=t[a];if(!c)return r;let N=Xp(e,o);if(!N)return r;let E=Qp(N);return{...r,[o]:{...c,subtype:N,childType:"json",type:E}}},{})}},"getJsonSchema"),Jp=T(async(i,e,t)=>{try{let s=await Zp(i);if(await Ja(),s){t.log("info",{viewName:i,schema:e},'Is materialized view"');let o=await Fe(`SELECT JSON_OBJECT(
					'viewDDL' VALUE DBMS_METADATA.GET_DDL('MATERIALIZED_VIEW', MV.MVIEW_NAME, MV.OWNER),
					'indexDDLs' VALUE (
						SELECT JSON_ARRAYAGG(DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME, OWNER) RETURNING CLOB)
						FROM ALL_INDEXES
						WHERE TABLE_OWNER=MV.OWNER
							AND TABLE_NAME=MV.MVIEW_NAME
							AND INDEX_NAME NOT IN (
								SELECT CONSTRAINT_NAME
								FROM ALL_CONSTRAINTS
								WHERE CONSTRAINT_TYPE='P'
								AND OWNER=MV.OWNER
								AND TABLE_NAME=MV.MVIEW_NAME
							)
						)
					)
					FROM ALL_MVIEWS MV
					WHERE MV.OWNER='${e}' AND MV.MVIEW_NAME='${i}'`),a=Z.first(Z.first(o)),c=JSON.parse(a);return t.log("info",{viewName:i,schema:e},`Getting DDL from "${e}"."${i}"`),`${c.viewDDL}
${Z.join(c.indexDDLs,`
`)}`}let r=await Fe(`SELECT DBMS_METADATA.GET_DDL('VIEW', VIEW_NAME, OWNER) FROM ALL_VIEWS WHERE VIEW_NAME='${i}'`);return await Z.first(Z.first(r)).getData()}catch(s){if((s==null?void 0:s.errorNum)===31603&&!await mh(t))throw s;return t.log("error",{message:"Cannot get DDL for view: "+i,error:{message:s.message,stack:s.stack,err:Z.omit(s,["message","stack"])}},"Getting DDL"),""}},"getViewDDL"),Zp=T(async i=>{await Ja();let e=await Fe(`SELECT * FROM ALL_MVIEWS WHERE MVIEW_NAME = '${i}'`);return!Z.isEmpty(e)},"checkEntityMaterializedView"),mh=T(async i=>{var e;try{let t=await Fe("SELECT sys_context('USERENV', 'CURRENT_USER') FROM dual"),s=Z.first(Z.first(t));return((e=await Fe(`SELECT GRANTED_ROLE FROM USER_ROLE_PRIVS WHERE USERNAME = '${s}'`))==null?void 0:e.map(([_])=>_)).includes("SELECT_CATALOG_ROLE")}catch(t){return i.log("error",{message:"Checking user privileges error",error:{message:t.message,stack:t.stack,err:Z.omit(t,["message","stack"])}},"Getting DDL"),!1}},"checkUserHaveRequiredRole"),$p=T(i=>{i.log("info",{TNS_ADMIN:process.env.TNS_ADMIN??"",ORACLE_HOME:process.env.ORACLE_HOME??"",LD_LIBRARY_PATH:process.env.LD_LIBRARY_PATH??"",ORACLE_BASE:process.env.ORACLE_BASE??""},"Environment variables")},"logEnvironment"),eR=T(async i=>{try{let e=await Fe("SELECT OWNER, SYNONYM_NAME, TABLE_OWNER, TABLE_NAME, DB_LINK FROM ALL_SYNONYMS WHERE ORIGIN_CON_ID > 1");if(Z.isEmpty(e))return[];let t=e.map(([o,a,c,N])=>({synonymSchemaName:c,synonymPublic:o==="PUBLIC",synonymName:a,synonymEntityId:N}));i.log("info",t,"Getting synonyms");let s=await tR(),r=t.map(o=>{var N;let a=s.find(({name:E})=>E===o.synonymName),c=!((N=a==null?void 0:a.ddl)!=null&&N.toUpperCase().includes("NONEDITIONABLE"));return{...o,synonymEditionable:c?"EDITIONABLE":"NONEDITIONABLE"}});return Z.groupBy(r,"synonymSchemaName")}catch(e){i.log("error",{message:"Cannot get synonyms",error:{message:e.message,stack:e.stack,err:Z.omit(e,["message","stack"])}},"Getting synonyms")}},"getDbSynonyms"),tR=T(async()=>{let i=await Fe("SELECT SYNONYM_NAME, DBMS_METADATA.GET_DDL('SYNONYM', SYNONYM_NAME, OWNER) FROM ALL_SYNONYMS WHERE ORIGIN_CON_ID > 1");return await Promise.all(i.map(async([t,s])=>{let r=await s.getData();return{name:t,ddl:r}}))},"getSynonymsDDL");Ih.exports={connect:yp,disconnect:Yp,getEntitiesNames:kp,getSchemaNames:Up,splitEntityNames:Hp,getDDL:qp,getJsonSchema:jp,getViewDDL:Jp,getDbVersion:bp,selectRecords:zp,logEnvironment:$p,execute:Fe,getDbSynonyms:eR,getSchemaSequences:Cp({execute:Fe})}});var oi=require("lodash"),Oh=tT(),je=Ch();module.exports={async connect(i,e,t,s){let r=s.require("@hackolade/ssh-service");Oh("Connect to instance",i,e),je.logEnvironment(e);try{await je.connect(i,r,_=>{e.log("info",_,"Connection")}),t()}catch(_){throw gh(e,_,t),_}},async disconnect(i,e,t,s){try{let r=s.require("@hackolade/ssh-service");await je.disconnect(r),t(null)}catch(r){gh(e,r,t)}},async testConnection(i,e,t,s){try{await this.connect(i,e,()=>{},s),t(null)}catch(r){e.log("error",{message:r.message,stack:r.stack,error:r},"Test connection"),t({message:r.message,stack:r.stack})}},async getSchemaNames(i,e,t,s){try{Oh("Get schemas",i,e),await this.connect(i,e,()=>{},s);let r=await je.getSchemaNames();return e.log("info",r,"All schemas list",i.hiddenKeys),t(null,r)}catch(r){return e.log("error",{message:r.message,stack:r.stack,error:r},"Get schemas"),t({message:r.message,stack:r.stack})}},async getDbCollectionsNames(i,e,t,s){try{await this.connect(i,e,()=>{},s);let r=await je.getEntitiesNames(i,{info:_=>{e.log("info",_,"Retrieving table and view names")},error:_=>{e.log("error",{message:_.message,stack:_.stack,error:_},"Retrieving databases and tables information")}});t(null,r)}catch(r){e.log("error",{message:r.message,stack:r.stack,error:r},"Retrieving databases and tables information"),t({message:r.message,stack:r.stack})}},async getDbCollectionsData(i,e,t,s){try{let r=T(({message:P,containerName:f="",entityName:u=""})=>{e.log("info",{message:P,schema:f,table:u},"Retrieving schema"),e.progress({message:P,containerName:f,entityName:u})},"progress");e.log("info",i,"Retrieving schema",i.hiddenKeys),r({message:"Start reverse-engineering process",containerName:"",entityName:""});let _=i.collectionData,o=_.collections,a=_.dataBaseNames,c=await je.getDbVersion(e),N=await je.getDbSynonyms(e),E=await a.reduce(async(P,f)=>{let u=await P,S=je.splitEntityNames(o[f]),A=await je.getSchemaSequences({schema:f,logger:e}),D=await S.tables.reduce(async(g,y)=>{let K=await g;r({message:"Start getting data from table",containerName:f,entityName:y});let{ddl:q,countOfRecords:Q,jsonColumns:ne}=await je.getDDL(y,f,e),ce=[],st={};if(!oi.isEmpty(ne)){let Lt=sR(Q,i.recordSamplingSettings);r({message:`Fetching columns for JSON schema inference: ${JSON.stringify(ne)}`,containerName:f,entityName:y}),ce=await je.selectRecords({tableName:y,limit:Lt,jsonColumns:ne,schema:f}),st=await je.getJsonSchema(ne,ce)}return r({message:"Data retrieved successfully",containerName:f,entityName:y}),K.concat({dbName:f,collectionName:y,entityLevel:{},documents:ce,views:[],ddl:{script:q,type:"oracle",takeAllDdlProperties:!0},emptyBucket:!1,validation:{jsonSchema:st},bucketInfo:{database:f,synonyms:(N==null?void 0:N[f])||[],sequences:A}})},Promise.resolve([])),h=await S.views.reduce(async(g,y)=>{let K=await g;r({message:"Start getting data from view",containerName:f,entityName:y});let q=await je.getViewDDL(y,f,e);return r({message:"Data retrieved successfully",containerName:f,entityName:y}),K.concat({name:y,data:{},ddl:{script:q,type:"oracle",takeAllDdlProperties:!0}})},Promise.resolve([]));if(oi.isEmpty(h))return[...u,...D];let C={dbName:f,entityLevel:{},views:h,emptyBucket:!1,bucketInfo:{indexes:[],database:f,synonyms:(N==null?void 0:N[f])||[],sequences:A}};return[...u,...D,C]},Promise.resolve([]));r({message:"Start processing the retrieved data in the application ..."}),t(null,E.filter(Boolean),{version:c})}catch(r){if((r==null?void 0:r.errorNum)===31603)return e.log("error",{message:"Missing required role \u201CSELECT_CATALOG_ROLE\u201D to perform this operation",stack:r.stack,error:r},"Reverse-engineering process failed"),t({message:"Missing required role \u201CSELECT_CATALOG_ROLE\u201D to perform this operation",type:"simpleError"});e.log("error",{message:r.message,stack:r.stack,error:r},"Reverse-engineering process failed"),t({message:r.message,stack:r.stack})}}};var gh=T((i,e,t)=>{let s=oi.isString(e)?e:oi.get(e,"message","Reverse Engineering error");i.log("error",{error:e},"Reverse Engineering error"),t(s)},"handleError"),sR=T((i,e)=>{if(e.active==="absolute")return Number(e.absolute.value);let t=Math.ceil(i*e.relative.value/100);return Math.min(t,e.maxValue)},"getSampleDocSize");
