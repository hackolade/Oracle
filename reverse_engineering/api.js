"use strict";var Cf=Object.defineProperty;var T=(i,e)=>Cf(i,"name",{value:e,configurable:!0});var Ac=i=>e=>{var t=i[e];if(t)return t();throw new Error("Module not found in bundle: "+e)};var Of=(i,e)=>()=>(i&&(e=i(i=0)),e);var R=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var fc=R((CC,gf)=>{gf.exports={name:"Oracle",version:"0.2.17",author:"hackolade",engines:{hackolade:"7.7.10",hackoladePlugin:"1.2.0"},contributes:{target:{applicationTarget:"Oracle",title:"Oracle",versions:["12c","18c","19c","21c","23ai"]},features:{nestedCollections:!1,disablePatternField:!0,disableMultipleTypes:!0,enableForwardEngineering:!0,disableReverseEngineering:!1,disableChoices:!0,enableJsonType:!0,useJsonTypesWithComplexTypes:!0,reverseSchemaIntoOneColumn:!0,disableDenormalization:!0,enableComplexTypesNormalization:!0,restrictNestedFieldsAsPrimaryKey:!1,views:{enabled:!0,viewLevel:"model",disablePipelines:!0},relationships:{compositeRelationships:{allowRelationshipsByProperties:["primaryKey","unique","compositeUniqueKey","compositePrimaryKey"]}},enableFetchSystemEntitiesCheckbox:!0,discoverRelationships:!0,enableKeysMultipleAbrr:!0}},description:"Hackolade plugin for Oracle and Autonomous databases",disabled:!1,dependencies:{"adm-zip":"0.5.9",async:"3.2.6",lodash:"4.17.21",oracledb:"6.6.0",perplex:"0.11.0"},"lint-staged":{"*.{js,json}":"prettier --write"},"simple-git-hooks":{"pre-commit":"npx lint-staged","pre-push":"npx eslint ."},scripts:{lint:"eslint . --max-warnings=0",package:"node esbuild.package.js"},devDependencies:{"@hackolade/hck-esbuild-plugins-pack":"0.0.1","@typescript-eslint/eslint-plugin":"7.11.0","@typescript-eslint/parser":"7.11.0",esbuild:"0.20.2","esbuild-plugin-clean":"1.0.1","esbuild-plugin-copy":"2.1.1",eslint:"8.57.0","eslint-config-prettier":"9.1.0","eslint-formatter-teamcity":"^1.0.0","eslint-plugin-import":"^2.26.0","eslint-plugin-prettier":"5.1.3","eslint-plugin-unused-imports":"3.2.0","lint-staged":"15.2.10",prettier:"3.2.5","simple-git-hooks":"2.11.1"}}});var Pc=R((OC,dc)=>{"use strict";var mt=require("os"),Lf=fc(),yf=T(i=>i<10?"0"+i:i,"prefixZero"),Bf=T(i=>i.reduce((e,t)=>Math.max(e,t.speed),0),"maxClock"),wf=T(i=>Math.floor(i/3600)+":"+yf(parseInt((i/3600-Math.floor(i/3600))*60)),"toTime"),Yf=T(()=>Lf.version,"getPluginVersion"),Uf=T(i=>`Date: ${new Date}
Application version: ${i}
Plugin version: ${Yf()}

System information:
 Hostname:  ${mt.hostname()}
 Platform:  ${mt.platform()} ${mt.arch()}
 Release:   ${mt.release()}
 Uptime:    ${wf(mt.uptime())}
 Total RAM: ${(mt.totalmem()/1073741824).toFixed(2)} GB
 CPU Model: ${mt.cpus()[0].model}
 CPU Clock: ${Bf(mt.cpus())} MHZ
 CPU Cores: ${mt.cpus().length} cores

`,"getSystemInfo"),Mf=T((i,e,t)=>{t.clear(),t.log("info",Uf(e.appVersion),i),t.log("info",e,"connectionInfo",e.hiddenKeys)},"logInfo");dc.exports=Mf});var Rc=R((LC,pc)=>{pc.exports={VERSION_MAJOR:6,VERSION_MINOR:6,VERSION_PATCH:0,VERSION_SUFFIX:""}});var Ye=R((yC,Ic)=>{"use strict";var Ft=Rc(),mc=Ft.VERSION_MAJOR+"."+Ft.VERSION_MINOR+"."+Ft.VERSION_PATCH+Ft.VERSION_SUFFIX;Ic.exports={VERSION_MAJOR:Ft.VERSION_MAJOR,VERSION_MINOR:Ft.VERSION_MINOR,VERSION_PATCH:Ft.VERSION_PATCH,VERSION_SUFFIX:Ft.VERSION_SUFFIX,VERSION_STRING:mc,DEFAULT_DRIVER_NAME:"node-oracledb : "+mc,DEFAULT_ERROR_URL:"https://node-oracledb.readthedocs.io/en/latest/user_guide/installation.html",DEFAULT_MAX_SIZE_FOR_OUT_BINDS:200,CSFRM_IMPLICIT:1,CSFRM_NCHAR:2,CQN_OPCODE_ALL_OPS:0,CQN_OPCODE_ALL_ROWS:1,CQN_OPCODE_ALTER:16,CQN_OPCODE_DELETE:8,CQN_OPCODE_DROP:32,CQN_OPCODE_INSERT:2,CQN_OPCODE_UPDATE:4,DEFAULT:0,STMT_TYPE_UNKNOWN:0,STMT_TYPE_SELECT:1,STMT_TYPE_UPDATE:2,STMT_TYPE_DELETE:3,STMT_TYPE_INSERT:4,STMT_TYPE_CREATE:5,STMT_TYPE_DROP:6,STMT_TYPE_ALTER:7,STMT_TYPE_BEGIN:8,STMT_TYPE_DECLARE:9,STMT_TYPE_CALL:10,STMT_TYPE_EXPLAIN_PLAN:15,STMT_TYPE_MERGE:16,STMT_TYPE_ROLLBACK:17,STMT_TYPE_COMMIT:21,SHUTDOWN_MODE_DEFAULT:0,SHUTDOWN_MODE_TRANSACTIONAL:1,SHUTDOWN_MODE_TRANSACTIONAL_LOCAL:2,SHUTDOWN_MODE_IMMEDIATE:3,SHUTDOWN_MODE_ABORT:4,SHUTDOWN_MODE_FINAL:5,STARTUP_MODE_DEFAULT:0,STARTUP_MODE_FORCE:1,STARTUP_MODE_RESTRICT:2,SUBSCR_EVENT_TYPE_SHUTDOWN:2,SUBSCR_EVENT_TYPE_SHUTDOWN_ANY:3,SUBSCR_EVENT_TYPE_STARTUP:1,SUBSCR_EVENT_TYPE_DEREG:5,SUBSCR_EVENT_TYPE_OBJ_CHANGE:6,SUBSCR_EVENT_TYPE_QUERY_CHANGE:7,SUBSCR_EVENT_TYPE_AQ:100,SUBSCR_GROUPING_CLASS_TIME:1,SUBSCR_GROUPING_TYPE_SUMMARY:1,SUBSCR_GROUPING_TYPE_LAST:2,SUBSCR_NAMESPACE_AQ:1,SUBSCR_NAMESPACE_DBCHANGE:2,SUBSCR_QOS_BEST_EFFORT:16,SUBSCR_QOS_DEREG_NFY:2,SUBSCR_QOS_QUERY:8,SUBSCR_QOS_RELIABLE:1,SUBSCR_QOS_ROWIDS:4,SYSASM:32768,SYSBACKUP:131072,SYSDBA:2,SYSDG:262144,SYSKM:524288,SYSOPER:4,SYSPRELIM:8,SYSRAC:1048576,BIND_IN:3001,BIND_INOUT:3002,BIND_OUT:3003,OUT_FORMAT_ARRAY:4001,OUT_FORMAT_OBJECT:4002,SODA_COLL_MAP_MODE:5001,POOL_STATUS_OPEN:6e3,POOL_STATUS_DRAINING:6001,POOL_STATUS_CLOSED:6002,POOL_STATUS_RECONFIGURING:6003,PURITY_DEFAULT:0,PURITY_NEW:1,PURITY_SELF:2,AQ_DEQ_NO_WAIT:0,AQ_DEQ_WAIT_FOREVER:4294967295,AQ_DEQ_MODE_BROWSE:1,AQ_DEQ_MODE_LOCKED:2,AQ_DEQ_MODE_REMOVE:3,AQ_DEQ_MODE_REMOVE_NO_DATA:4,AQ_DEQ_NAV_FIRST_MSG:1,AQ_DEQ_NAV_NEXT_TRANSACTION:2,AQ_DEQ_NAV_NEXT_MSG:3,AQ_MSG_DELIV_MODE_PERSISTENT:1,AQ_MSG_DELIV_MODE_BUFFERED:2,AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED:3,AQ_MSG_STATE_READY:0,AQ_MSG_STATE_WAITING:1,AQ_MSG_STATE_PROCESSED:2,AQ_MSG_STATE_EXPIRED:3,AQ_VISIBILITY_IMMEDIATE:1,AQ_VISIBILITY_ON_COMMIT:2,TPC_BEGIN_JOIN:2,TPC_BEGIN_NEW:1,TPC_BEGIN_PROMOTE:8,TPC_BEGIN_RESUME:4,TPC_END_NORMAL:0,TPC_END_SUSPEND:1048576,VECTOR_FORMAT_FLOAT32:2,VECTOR_FORMAT_FLOAT64:3,VECTOR_FORMAT_INT8:4,VECTOR_FORMAT_BINARY:5}});var Fe=R((BC,Oc)=>{"use strict";var Ct=Ye(),As=Y(),Vf=require("util"),Dc=new Map,Cc=new Map,rt=new Map,rn=class rn{constructor(e,t,s,r){this.num=e,this.name=t,this.columnTypeName=s,this._bufferSizeFactor=r.bufferSizeFactor||0,this._oraTypeNum=r.oraTypeNum||0,this._csfrm=r.csfrm||0,Dc.set(e,this);let n=(r.csfrm||0)*256+r.oraTypeNum;Cc.set(n,this),rt.set(s,this)}[Symbol.toPrimitive](e){switch(e){case"number":return this.num;default:return this.toString()}}[Vf.inspect.custom](){return this.toString()}toString(){return`[DbType ${this.name}]`}};T(rn,"DbType");var K=rn;function Ff(i){let e=rt.get(i);return e||As.throwErr(As.ERR_UNKNOWN_COLUMN_TYPE_NAME,i),e}T(Ff,"getTypeByColumnTypeName");function xf(i){let e=Dc.get(i);return e||As.throwErr(As.ERR_INVALID_TYPE_NUM,i),e}T(xf,"getTypeByNum");function kf(i,e){let t=(e||0)*256+i,s=Cc.get(t);return s||As.throwErr(As.ERR_INVALID_ORACLE_TYPE_NUM,i,e),s}T(kf,"getTypeByOraTypeNum");var Ji=new K(2020,"DB_TYPE_BFILE","BFILE",{oraTypeNum:114,bufferSizeFactor:4e3}),Pr=new K(2008,"DB_TYPE_BINARY_DOUBLE","BINARY_DOUBLE",{oraTypeNum:101,bufferSizeFactor:8}),pr=new K(2007,"DB_TYPE_BINARY_FLOAT","BINARY_FLOAT",{oraTypeNum:100,bufferSizeFactor:4}),qs=new K(2009,"DB_TYPE_BINARY_INTEGER","BINARY_INTEGER",{oraTypeNum:3,bufferSizeFactor:22}),Rr=new K(2019,"DB_TYPE_BLOB","BLOB",{oraTypeNum:113,bufferSizeFactor:112}),mr=new K(2022,"DB_TYPE_BOOLEAN","BOOLEAN",{oraTypeNum:252,bufferSizeFactor:4}),hs=new K(2003,"DB_TYPE_CHAR","CHAR",{oraTypeNum:96,csfrm:Ct.CSFRM_IMPLICIT,bufferSizeFactor:4}),Ns=new K(2017,"DB_TYPE_CLOB","CLOB",{oraTypeNum:112,csfrm:Ct.CSFRM_IMPLICIT,bufferSizeFactor:112}),ji=new K(2021,"DB_TYPE_CURSOR","CURSOR",{oraTypeNum:102,bufferSizeFactor:4}),Ir=new K(2011,"DB_TYPE_DATE","DATE",{oraTypeNum:12,bufferSizeFactor:7}),Zi=new K(2015,"DB_TYPE_INTERVAL_DS","INTERVAL DAY TO SECOND",{oraTypeNum:183,bufferSizeFactor:11}),$i=new K(2016,"DB_TYPE_INTERVAL_YM","INTERVAL YEAR TO MONTH",{oraTypeNum:182}),Dr=new K(2027,"DB_TYPE_JSON","JSON",{oraTypeNum:119}),st=new K(2024,"DB_TYPE_LONG","LONG",{oraTypeNum:8,csfrm:Ct.CSFRM_IMPLICIT,bufferSizeFactor:2**31-1}),xt=new K(2031,"DB_TYPE_LONG_NVARCHAR","LONG",{oraTypeNum:8,csfrm:Ct.CSFRM_NCHAR,bufferSizeFactor:2**31-1}),kt=new K(2025,"DB_TYPE_LONG_RAW","LONG RAW",{oraTypeNum:24,bufferSizeFactor:2**31-1}),bt=new K(2004,"DB_TYPE_NCHAR","NCHAR",{oraTypeNum:96,csfrm:Ct.CSFRM_NCHAR,bufferSizeFactor:4}),Cr=new K(2018,"DB_TYPE_NCLOB","NCLOB",{oraTypeNum:112,csfrm:Ct.CSFRM_NCHAR,bufferSizeFactor:112}),Dt=new K(2010,"DB_TYPE_NUMBER","NUMBER",{oraTypeNum:2,bufferSizeFactor:22}),It=new K(2002,"DB_TYPE_NVARCHAR","NVARCHAR2",{oraTypeNum:1,csfrm:Ct.CSFRM_NCHAR,bufferSizeFactor:4}),en=new K(2023,"DB_TYPE_OBJECT","OBJECT",{oraTypeNum:109}),Ss=new K(2006,"DB_TYPE_RAW","RAW",{oraTypeNum:23,bufferSizeFactor:1}),us=new K(2005,"DB_TYPE_ROWID","ROWID",{oraTypeNum:11,bufferSizeFactor:18}),Or=new K(2012,"DB_TYPE_TIMESTAMP","TIMESTAMP",{oraTypeNum:180,bufferSizeFactor:11}),ht=new K(2014,"DB_TYPE_TIMESTAMP_LTZ","TIMESTAMP WITH LOCAL TIME ZONE",{oraTypeNum:231,bufferSizeFactor:11}),Gt=new K(2013,"DB_TYPE_TIMESTAMP_TZ","TIMESTAMP WITH TIME ZONE",{oraTypeNum:181,bufferSizeFactor:13}),gr=new K(2030,"DB_TYPE_UROWID","UROWID",{oraTypeNum:208}),z=new K(2001,"DB_TYPE_VARCHAR","VARCHAR2",{oraTypeNum:1,csfrm:Ct.CSFRM_IMPLICIT,bufferSizeFactor:4}),tn=new K(2032,"DB_TYPE_XMLTYPE","XMLTYPE",{oraTypeNum:109,csfrm:Ct.CSFRM_IMPLICIT,bufferSizeFactor:2147483647}),Lr=new K(2033,"DB_TYPE_VECTOR","VECTOR",{oraTypeNum:127}),bf=new Map([[Pr,new Map([[z,z]])],[pr,new Map([[z,z]])],[Rr,new Map([[Ss,kt],[kt,kt]])],[hs,new Map([[z,z]])],[Ns,new Map([[z,st],[st,st]])],[Ir,new Map([[z,z],[ht,ht]])],[Dr,new Map([[z,z]])],[st,new Map([[z,st]])],[kt,new Map([[Ss,kt]])],[bt,new Map([[hs,bt],[z,It],[It,It]])],[Cr,new Map([[z,xt],[It,xt],[st,xt],[xt,xt]])],[Dt,new Map([[z,z]])],[It,new Map([[hs,bt],[bt,bt],[z,It]])],[Ss,new Map([[z,z]])],[us,new Map([[z,us]])],[Or,new Map([[z,z],[ht,ht]])],[ht,new Map([[z,z],[Gt,Gt]])],[Gt,new Map([[z,z],[ht,ht]])],[gr,new Map([[z,us]])],[Lr,new Map([[z,st],[st,st],[Ns,Ns]])]]),Gf=new Map([[Ji,Ji],[Pr,Pr],[pr,pr],[qs,qs],[Rr,Rr],[mr,mr],[hs,hs],[Ns,Ns],[ji,ji],[Ir,Ir],[Zi,Zi],[$i,$i],[Dr,Dr],[st,st],[xt,xt],[kt,kt],[bt,bt],[Cr,Cr],[Dt,Dt],[It,It],[en,en],[Ss,Ss],[us,us],[Or,Or],[ht,Gt],[Gt,Gt],[gr,gr],[z,z],[tn,tn],[Lr,Lr]]);rt.set("DOUBLE PRECISION",Dt);rt.set("FLOAT",Dt);rt.set("INTEGER",Dt);rt.set("PL/SQL BOOLEAN",mr);rt.set("PL/SQL BINARY INTEGER",qs);rt.set("PL/SQL PLS INTEGER",qs);rt.set("REAL",Dt);rt.set("SMALLINT",Dt);rt.set("TIMESTAMP WITH LOCAL TZ",ht);rt.set("TIMESTAMP WITH TZ",Gt);var nn=class nn extends Uint8Array{toJSON(){return Buffer.from(this.buffer).toString("hex")}};T(nn,"JsonId");var sn=nn;Oc.exports={DbType:K,DB_TYPE_BFILE:Ji,DB_TYPE_BINARY_DOUBLE:Pr,DB_TYPE_BINARY_FLOAT:pr,DB_TYPE_BINARY_INTEGER:qs,DB_TYPE_BLOB:Rr,DB_TYPE_BOOLEAN:mr,DB_TYPE_CHAR:hs,DB_TYPE_CLOB:Ns,DB_TYPE_CURSOR:ji,DB_TYPE_DATE:Ir,DB_TYPE_INTERVAL_DS:Zi,DB_TYPE_INTERVAL_YM:$i,DB_TYPE_JSON:Dr,DB_TYPE_LONG:st,DB_TYPE_LONG_NVARCHAR:xt,DB_TYPE_LONG_RAW:kt,DB_TYPE_NCHAR:bt,DB_TYPE_NCLOB:Cr,DB_TYPE_NUMBER:Dt,DB_TYPE_NVARCHAR:It,DB_TYPE_OBJECT:en,DB_TYPE_RAW:Ss,DB_TYPE_ROWID:us,DB_TYPE_TIMESTAMP:Or,DB_TYPE_TIMESTAMP_LTZ:ht,DB_TYPE_TIMESTAMP_TZ:Gt,DB_TYPE_UROWID:gr,DB_TYPE_VARCHAR:z,DB_TYPE_VECTOR:Lr,DB_TYPE_CONVERSION_MAP:bf,DB_TYPE_FETCH_TYPE_MAP:Gf,DB_TYPE_XMLTYPE:tn,getTypeByColumnTypeName:Ff,getTypeByNum:xf,getTypeByOraTypeNum:kf,JsonId:sn}});var gc=R((YC,qf)=>{qf.exports={name:"oracledb",version:"6.6.0",description:"A Node.js module for Oracle Database access from JavaScript and TypeScript",license:"(Apache-2.0 OR UPL-1.0)",homepage:"http://oracle.github.io/node-oracledb/",keywords:["Oracle","Database","official","DB","SQL","JSON","PL/SQL","SODA","OCI","API","client","library","driver","add-on","extension","binding","interface","adapter","module"],repository:{type:"git",url:"git://github.com/oracle/node-oracledb.git"},scripts:{install:"node package/install.js",prune:"node package/prunebinaries.js"},engines:{node:">=14.6"},maintainers:[{name:"Oracle Corp."}],bugs:{url:"https://github.com/oracle/node-oracledb/issues"},main:"./index.js"}});var Le=R((UC,Uc)=>{"use strict";var{Buffer:gt}=require("buffer"),fe=Y(),ze=require("process"),Hf=require("util"),vf=Fe(),Ot=Ye(),Lc;try{Lc=gc()}catch{fe.throwErr(fe.ERR_MISSING_FILE,"package.json")}var yc=Lc.version,Kf="build/Release",Wf="oracledb-"+yc+"-"+ze.platform+"-"+ze.arch+".node",Xf="oracledb.node",zf="package/Staging";function Bc(){return"Node-oracledb installation instructions: https://node-oracledb.readthedocs.io/en/latest/user_guide/installation.html"}T(Bc,"getInstallURL");function Qf(){let i,e,t=Bc()+`
`;return ze.platform==="linux"?(ze.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html
`,i="64-bit"):ze.arch==="x32"?(e=`https://www.oracle.com/database/technologies/instant-client/linux-x86-32-downloads.html
`,i="32-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,i=ze.arch),t+="You must have Linux "+i+` Oracle Client libraries configured with ldconfig, or in LD_LIBRARY_PATH.
`,t+=`If you do not have Oracle Database on this computer, then install the Instant Client Basic or Basic Light package from 
`,t+=e):ze.platform==="darwin"?(ze.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/macos-intel-x86-downloads.html
`,i="64-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,i=ze.arch),t+="You must have macOS "+i+` Oracle Instant Client Basic or Basic Light package libraries in
`,t+=`/usr/local/lib or set by calling oracledb.initOracleClient({libDir: "/my/instant_client_directory"}).
`,t+="Oracle Instant Client can be downloaded from "+e):ze.platform==="win32"?(ze.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html
`,i="64-bit"):ze.arch==="x32"?(e=`https://www.oracle.com/database/technologies/instant-client/microsoft-windows-32-downloads.html
`,i="32-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,i=ze.arch),t+="You must have Windows "+i+` Oracle Client libraries in your PATH environment variable.
`,t+=`If you do not have Oracle Database on this computer, then install the Instant Client Basic or Basic Light package from
`,t+=e,t+=`A Microsoft Visual Studio Redistributable suitable for your Oracle client library version must be available.
`):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,t+="You must have "+ze.arch+` Oracle Client libraries in your operating system library search path.
`,t+=`If you do not have Oracle Database on this computer, then install an Instant Client Basic or Basic Light package from: 
`,t+=e),t}T(Qf,"getInstallHelp");function on(i){let e=T(function(){if(typeof arguments[arguments.length-1]!="function")return i.apply(this,arguments).catch(T(function r(n){throw fe.transformErr(n,r)},"stackCapture"));let t=Array.prototype.slice.call(arguments,0,arguments.length-1),s=arguments[arguments.length-1];i.apply(this,t).then(function(r){s(null,r)},T(function r(n){s(fe.transformErr(n,r))},"stackCapture"))},"wrapper");return i.name&&Object.defineProperty(e,"name",{value:i.name}),e}T(on,"callbackify");function _n(i){return async function(){let e;this._impl&&(e=this._impl._getConnImpl(),await e._acquireLock());try{return await i.apply(this,arguments)}finally{e&&e._releaseLock()}}}T(_n,"serialize");function wc(i,e){return async function(){this._isActive&&fe.throwErr(e),this._isActive=!0;try{return await i.apply(this,arguments)}finally{this._isActive=!1}}}T(wc,"preventConcurrent");function Jf(i){let e=1,t;typeof arguments[1]=="number"&&(e=2,t=arguments[1]);for(let s=e;s<arguments.length;s++){let r=arguments[s],n=i[r];t?i[r]=on(wc(_n(n),t)):i[r]=on(_n(n))}}T(Jf,"wrapFns");function jf(i){if(!Array.isArray(i))return!1;for(let e=0;e<i.length;e++)if(typeof i[e]!="string")return!1;return!0}T(jf,"isArrayOfStrings");function Tn(i){return i!==null&&typeof i=="object"}T(Tn,"isObject");function Zf(i){return i!==null&&typeof i=="object"||Array.isArray(i)}T(Zf,"isObjectOrArray");function $f(i){return i&Ot.SYSPRELIM&&(i=i^Ot.SYSPRELIM),i===Ot.SYSASM||i===Ot.SYSBACKUP||i===Ot.SYSDBA||i===Ot.SYSDG||i===Ot.SYSKM||i===Ot.SYSOPER||i===Ot.SYSRAC}T($f,"isPrivilege");function ed(i){if(!Array.isArray(i))return!1;for(let e=0;e<i.length;e++){let t=i[e];if(!(typeof t=="string"||typeof t=="number"||gt.isBuffer(t)||Hf.types.isDate(t)))return!1}return!0}T(ed,"isShardingKey");function Yc(i){return i!=null&&i._sodaDocumentMarker}T(Yc,"isSodaDocument");function td(i){return Tn(i)&&Number.isInteger(i.formatId)&&(gt.isBuffer(i.globalTransactionId)||typeof i.globalTransactionId=="string")&&(gt.isBuffer(i.branchQualifier)||typeof i.branchQualifier=="string")}T(td,"isXid");function sd(i){let e;return gt.isBuffer(i.globalTransactionId)&&gt.isBuffer(i.branchQualifier)?e=i:(e={formatId:i.formatId,globalTransactionId:i.globalTransactionId,branchQualifier:i.branchQualifier},typeof i.globalTransactionId=="string"&&(e.globalTransactionId=gt.from(i.globalTransactionId)),typeof i.branchQualifier=="string"&&(e.branchQualifier=gt.from(i.branchQualifier))),e.globalTransactionId.length>64&&fe.throwErr(fe.ERR_INVALID_TRANSACTION_SIZE,e.globalTransactionId.length),e.branchQualifier.length>64&&fe.throwErr(fe.ERR_INVALID_BRANCH_SIZE,e.branchQualifier.length),e}T(sd,"normalizeXid");function rd(i){return Yc(i)?i._impl:(fe.assertParamValue(Tn(i),1),gt.from(JSON.stringify(i)))}T(rd,"verifySodaDoc");function an(i){fe.assert(typeof i=="string",fe.ERR_TOKEN_BASED_AUTH),i.split(".")[1]===void 0&&fe.throwErr(fe.ERR_TOKEN_BASED_AUTH);let t=i.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=gt.from(t,"base64").toString("ascii"),n=JSON.parse(r).exp;return fe.assert(n!=null,fe.ERR_TOKEN_BASED_AUTH),n=n*1e3,new Date().getTime()>n}T(an,"isTokenExpired");function id(i){switch(typeof i){case"string":return i===""&&fe.throwErr(fe.ERR_TOKEN_BASED_AUTH),!an(i);case"object":return(i.token===void 0||i.token===""||i.privateKey===void 0||i.privateKey==="")&&fe.throwErr(fe.ERR_TOKEN_BASED_AUTH),!an(i.token);default:fe.throwErr(fe.ERR_TOKEN_BASED_AUTH)}}T(id,"isTokenValid");function nd(i){return i=i.replace(/\n/g,""),i=i.replace("-----BEGIN PRIVATE KEY-----",""),i=i.replace("-----END PRIVATE KEY-----",""),i}T(nd,"denormalizePrivateKey");function od(i,e){let t=e+"Class",s=e+"Name",r=i[t],n=i[e];typeof n=="number"&&(n=i[e]=vf.getTypeByNum(n)),r?i[s]=r.prototype.fqn:n&&(i[s]=n.columnTypeName)}T(od,"addTypeProperties");function _d(i){return i instanceof Float32Array||i instanceof Float64Array||i instanceof Int8Array||Object.getPrototypeOf(i)===Uint8Array.prototype}T(_d,"isVectorValue");function ad(i,e,t,s,r,n,_,a,c){return i?new Date(e,t-1,s,r,n,_,a):new Date(Date.UTC(e,t-1,s,r,n,_,a)-c*6e4)}T(ad,"makeDate");Uc.exports={BINARY_FILE:Wf,BUILD_FILE:Xf,PACKAGE_JSON_VERSION:yc,RELEASE_DIR:Kf,STAGING_DIR:zf,addTypeProperties:od,callbackify:on,denormalizePrivateKey:nd,getInstallURL:Bc,getInstallHelp:Qf,isArrayOfStrings:jf,isObject:Tn,isObjectOrArray:Zf,isPrivilege:$f,isShardingKey:ed,isSodaDocument:Yc,isTokenExpired:an,isTokenValid:id,isVectorValue:_d,isXid:td,normalizeXid:sd,makeDate:ad,preventConcurrent:wc,serialize:_n,verifySodaDoc:rd,wrapFns:Jf}});var vs=R((VC,Mc)=>{"use strict";var Hs=Ye();Mc.exports={TNS_VECTOR_MAGIC_BYTE:219,TNS_VECTOR_VERSION_BASE:0,TNS_VECTOR_VERSION_WITH_BINARY:1,TNS_VECTOR_FLAG_NORMSRC:16,TNS_VECTOR_FLAG_NORM:2,TNS_JSON_MAGIC_BYTE_1:255,TNS_JSON_MAGIC_BYTE_2:74,TNS_JSON_MAGIC_BYTE_3:90,TNS_JSON_VERSION_MAX_FNAME_255:1,TNS_JSON_VERSION_MAX_FNAME_65535:3,TNS_JSON_FLAG_HASH_ID_UINT8:256,TNS_JSON_FLAG_HASH_ID_UINT16:512,TNS_JSON_FLAG_NUM_FNAMES_UINT16:1024,TNS_JSON_FLAG_FNAMES_SEG_UINT32:2048,TNS_JSON_FLAG_TINY_NODES_STAT:8192,TNS_JSON_FLAG_TREE_SEG_UINT32:4096,TNS_JSON_FLAG_REL_OFFSET_MODE:1,TNS_JSON_FLAG_INLINE_LEAF:2,TNS_JSON_FLAG_LEN_IN_PCODE:4,TNS_JSON_FLAG_NUM_FNAMES_UINT32:8,TNS_JSON_FLAG_IS_SCALAR:16,TNS_JSON_FLAG_SEC_FNAMES_SEG_UINT16:256,TNS_JSON_TYPE_NULL:48,TNS_JSON_TYPE_TRUE:49,TNS_JSON_TYPE_FALSE:50,TNS_JSON_TYPE_STRING_LENGTH_UINT8:51,TNS_JSON_TYPE_NUMBER_LENGTH_UINT8:52,TNS_JSON_TYPE_BINARY_DOUBLE:54,TNS_JSON_TYPE_STRING_LENGTH_UINT16:55,TNS_JSON_TYPE_STRING_LENGTH_UINT32:56,TNS_JSON_TYPE_TIMESTAMP:57,TNS_JSON_TYPE_BINARY_LENGTH_UINT16:58,TNS_JSON_TYPE_BINARY_LENGTH_UINT32:59,TNS_JSON_TYPE_DATE:60,TNS_JSON_TYPE_INTERVAL_YM:61,TNS_JSON_TYPE_INTERVAL_DS:62,TNS_JSON_TYPE_TIMESTAMP_TZ:124,TNS_JSON_TYPE_TIMESTAMP7:125,TNS_JSON_TYPE_BINARY_FLOAT:127,TNS_JSON_TYPE_OBJECT:132,TNS_JSON_TYPE_ARRAY:192,TNS_JSON_TYPE_EXTENDED:123,TNS_JSON_TYPE_VECTOR:1,TNS_JSON_TYPE_ID:126,TZ_HOUR_OFFSET:20,TZ_MINUTE_OFFSET:60,TNS_MAX_SHORT_LENGTH:252,TNS_DURATION_MID:2147483648,TNS_DURATION_OFFSET:60,TNS_CHUNK_SIZE:32767,TNS_HAS_REGION_ID:128,NUMBER_MAX_DIGITS:40,BUFFER_CHUNK_SIZE:65536,CSFRM_IMPLICIT:Hs.CSFRM_IMPLICIT,VECTOR_FORMAT_FLOAT32:Hs.VECTOR_FORMAT_FLOAT32,VECTOR_FORMAT_FLOAT64:Hs.VECTOR_FORMAT_FLOAT64,VECTOR_FORMAT_INT8:Hs.VECTOR_FORMAT_INT8,VECTOR_FORMAT_BINARY:Hs.VECTOR_FORMAT_BINARY,TNS_NULL_LENGTH_INDICATOR:255,TNS_LONG_LENGTH_INDICATOR:254}});var fs=R((FC,Fc)=>{"use strict";var{Buffer:Nt}=require("buffer"),it=vs(),Qe=Y(),Vc=Fe(),Td=Le(),En=class En{constructor(e){typeof e=="number"?(this.buf=Nt.alloc(e),this.size=0,this.maxSize=e):e&&(this.buf=e,this.size=this.maxSize=e.length),this.pos=0}_grow(e){Qe.throwErr(Qe.ERR_BUFFER_LENGTH_INSUFFICIENT,this.numBytesLeft(),e)}_readBytesWithLength(e){return this.readBytes(e)}_readInteger(e,t,s){let r=!1,n=this.readUInt8();if(n===0)return 0;if(n&128&&(t||Qe.throwErr(Qe.ERR_UNEXPECTED_NEGATIVE_INTEGER,this.pos,this.packetNum),r=!0,n=n&127),n>e&&Qe.throwErr(Qe.ERR_INTEGER_TOO_LARGE,n,e,this.pos,this.packetNum),s)this.skipBytes(n);else{let a=this.readBytes(n).readUIntBE(0,n);return r?-a:a}}numBytesLeft(){return this.size-this.pos}parseBinaryDouble(e){return e=Nt.from(e),e[0]&128?e[0]&=127:(e[0]^=255,e[1]^=255,e[2]^=255,e[3]^=255,e[4]^=255,e[5]^=255,e[6]^=255,e[7]^=255),e.readDoubleBE()}parseBinaryFloat(e){return e=Nt.from(e),e[0]&128?e[0]&=127:(e[0]^=255,e[1]^=255,e[2]^=255,e[3]^=255),e.readFloatBE()}parseOracleDate(e,t=!0){let s=0;e.length>=11&&(s=Math.floor(e.readUInt32BE(7)/(1e3*1e3)));let r=(e[0]-100)*100+e[1]-100;return Td.makeDate(t,r,e[2],e[3],e[4]-1,e[5]-1,e[6]-1,s,0)}parseOracleNumber(e){let t=e[0],s=!!(t&128);s||(t=t^255),t-=193;let r=t*2+2;if(e.length===1)return s?"0":"-1e126";let n=e.length;!s&&e[e.length-1]===102&&(n-=1);let _,a=[];for(let E=1;E<n;E++){s?_=e[E]-1:_=101-e[E];let l=Math.floor(_/10);l===0&&E===1?r-=1:l===10?(a.push("1"),a.push("0"),r+=1):(l!==0||E>1)&&a.push(l.toString()),l=_%10,(l!==0||E<n-1)&&a.push(l.toString())}let c=[];s||c.push("-"),r<=0&&(c.push("."),r<0&&c.push("0".repeat(-r)));for(let E=0;E<a.length;E++)E>0&&E===r&&c.push("."),c.push(a[E]);if(r>a.length)for(let E=a.length;E<r;E++)c.push("0");return c.join("")}readBinaryDouble(){let e=this.readBytesWithLength();return e?this.parseBinaryDouble(e):null}readBinaryFloat(){let e=this.readBytesWithLength();return e?this.parseBinaryFloat(e):null}readBinaryInteger(){let e=this.readBytesWithLength();return e?(e.length>4&&Qe.throwErr(Qe.ERR_INTEGER_TOO_LARGE,e.length,4,this.pos,this.packetNum),e.readIntBE(0,e.length)):0}readBool(){let e=this.readBytesWithLength();return e?e[e.length-1]===1:null}readBytes(e){let t=this.numBytesLeft();e>t&&Qe.throwErr(Qe.ERR_UNEXPECTED_END_OF_DATA,e,t);let s=this.buf.subarray(this.pos,this.pos+e);return this.pos+=e,s}readBytesWithLength(){let e=this.readUInt8();return e===0||e===it.TNS_NULL_LENGTH_INDICATOR?null:this._readBytesWithLength(e)}readDbObject(){let e={},t=this.readUB4();return t>0&&(e.toid=Nt.from(this.readBytesWithLength())),t=this.readUB4(),t>0&&(e.oid=Nt.from(this.readBytesWithLength())),t=this.readUB4(),t>0&&(e.snapshot=Nt.from(this.readBytesWithLength())),this.skipUB2(),t=this.readUB4(),this.skipUB2(),t>0&&(e.packedData=Nt.from(this.readBytesWithLength())),e}readInt8(){return this.readBytes(1).readInt8()}readOracleDate(e){let t=this.readBytesWithLength();return t?this.parseOracleDate(t,e):null}readOracleNumber(){let e=this.readBytesWithLength();return e?this.parseOracleNumber(e):null}readSB2(){return this._readInteger(2,!0,!1)}readSB4(){return this._readInteger(4,!0,!1)}readSB8(){return this._readInteger(8,!0,!1)}readStr(e){let t=this.readBytesWithLength();return t?e===it.CSFRM_IMPLICIT?t.toString():Nt.from(t).swap16().toString("utf16le"):null}readUB2(){return this._readInteger(2,!1,!1)}readUB4(){return this._readInteger(4,!1,!1)}readUB8(){return this._readInteger(8,!1,!1)}readUInt8(){return this.readBytes(1)[0]}readUInt16BE(){return this.readBytes(2).readUInt16BE()}readUInt16LE(){return this.readBytes(2).readUInt16LE()}readUInt32BE(){return this.readBytes(4).readUInt32BE()}reserveBytes(e){e>this.numBytesLeft()&&this._grow(this.pos+e);let t=this.pos;return this.pos+=e,t}skipBytes(e){e>this.numBytesLeft()&&Qe.throwErr(Qe.ERR_UNEXPECTED_END_OF_DATA),this.pos+=e}skipSB4(){return this._readInteger(4,!0,!0)}skipUB1(){this.skipBytes(1)}skipUB2(){return this._readInteger(2,!1,!0)}skipUB4(){return this._readInteger(4,!1,!0)}skipUB8(){return this._readInteger(8,!1,!0)}writeBinaryDouble(e,t){t||(t=this.reserveBytes(8)),this.buf.writeDoubleBE(e,t),this.buf[t]&128?(this.buf[t]^=255,this.buf[t+1]^=255,this.buf[t+2]^=255,this.buf[t+3]^=255,this.buf[t+4]^=255,this.buf[t+5]^=255,this.buf[t+6]^=255,this.buf[t+7]^=255):this.buf[t]|=128}writeBinaryFloat(e,t){t||(t=this.reserveBytes(4)),this.buf.writeFloatBE(e,t),this.buf[t]&128?(this.buf[t]^=255,this.buf[t+1]^=255,this.buf[t+2]^=255,this.buf[t+3]^=255):this.buf[t]|=128}writeBytes(e){let t=0,s=e.length;for(;s>0;){let r=this.numBytesLeft();r===0&&this._grow(this.pos+s);let n=Math.min(r,s);e.copy(this.buf,this.pos,t,t+n),this.pos+=n,t+=n,s-=n}}_writeRawBytesAndLength(e,t){if(t<=it.TNS_MAX_SHORT_LENGTH)this.writeUInt8(t),t>0&&this.writeBytes(e);else{let s=0;for(this.writeUInt8(it.TNS_LONG_LENGTH_INDICATOR);t>0;){let r=Math.min(t,it.BUFFER_CHUNK_SIZE);this.writeUB4(r),this.writeBytes(e.subarray(s,s+r)),t-=r,s+=r}this.writeUB4(0)}}writeBytesWithLength(e){let t=e.length;this._writeRawBytesAndLength(e,t)}writeDbObject(e){this.writeUB4(e.toid.length),this.writeBytesWithLength(e.toid),e.oid?(this.writeUB4(e.oid.length),this.writeBytesWithLength(e.oid)):this.writeUB4(0),this.writeUB4(0),this.writeUB4(0);let t=e._getPackedData();this.writeUB4(t.length),this.writeUB4(e.flags),this.writeBytesWithLength(t)}writeOracleDate(e,t,s=!0){let r,n=t._bufferSizeFactor;n>7&&(r=e.getUTCMilliseconds()*1e3*1e3,r===0&&n<=11&&(n=7)),s&&this.writeUInt8(n);let _=this.reserveBytes(n);if(t===Vc.DB_TYPE_DATE||t==Vc.DB_TYPE_TIMESTAMP){let a=e.getFullYear();this.buf[_]=Math.trunc(a/100)+100,this.buf[_+1]=a%100+100,this.buf[_+2]=e.getMonth()+1,this.buf[_+3]=e.getDate(),this.buf[_+4]=e.getHours()+1,this.buf[_+5]=e.getMinutes()+1,this.buf[_+6]=e.getSeconds()+1}else{let a=e.getUTCFullYear();this.buf[_]=Math.trunc(a/100)+100,this.buf[_+1]=a%100+100,this.buf[_+2]=e.getUTCMonth()+1,this.buf[_+3]=e.getUTCDate(),this.buf[_+4]=e.getUTCHours()+1,this.buf[_+5]=e.getUTCMinutes()+1,this.buf[_+6]=e.getUTCSeconds()+1}n>7&&(this.buf.writeInt32BE(r,_+7),n>11&&(this.buf[_+11]=it.TZ_HOUR_OFFSET,this.buf[_+12]=it.TZ_MINUTE_OFFSET))}writeOracleNumber(e){let t=!1;e[0]==="-"&&(t=!0,e=e.substring(1));let s=0,r=e.indexOf("e");r>0&&(s=Number(e.substring(r+1)),e=e.substring(0,r));let n=e.indexOf(".");if(n>0&&(s-=e.length-n-1,e=e.substring(0,n)+e.substring(n+1)),e[0]==="0"&&(e=e.replace(/^0+/,"")),e.length>0&&e[e.length-1]==="0"){let l=e.replace(/0+$/,"");s+=e.length-l.length,e=l}(e.length>it.NUMBER_MAX_DIGITS||s>=126||s<=-131)&&Qe.throwErr(Qe.ERR_ORACLE_NUMBER_NO_REPR),(s>0&&s%2===1||s<0&&s%2===-1)&&(s--,e+="0"),e.length%2===1&&(e="0"+e);let _=t&&e.length<it.NUMBER_MAX_DIGITS,a=e.length/2,c=(s+e.length)/2+192;t?c=c^255:e.length===0&&s===0&&(c=128);let E=this.reserveBytes(a+2+_);this.buf[E++]=a+1+_,this.buf[E++]=c;for(let l=0;l<e.length;l+=2){let N=Number(e.substring(l,l+2));t?this.buf[E++]=101-N:this.buf[E++]=N+1}_&&(this.buf[E]=102)}writeStr(e){this.writeBytes(Nt.from(e))}writeInt32BE(e){let t=this.reserveBytes(4);this.buf.writeInt32BE(e,t)}writeUB4(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):e<=65535?(this.writeUInt8(2),this.writeUInt16BE(e)):(this.writeUInt8(4),this.writeUInt32BE(e))}writeUB2(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):(this.writeUInt8(2),this.writeUInt16BE(e))}writeUB8(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):e<=65535?(this.writeUInt8(2),this.writeUInt16BE(e)):e<=4294967295?(this.writeUInt8(4),this.writeUInt32BE(e)):(this.writeUInt8(8),this.writeUInt64BE(e))}writeUInt8(e){let t=this.reserveBytes(1);this.buf[t]=e}writeSB1(e){let t=this.reserveBytes(1);this.buf[t]=e}writeUInt16BE(e){let t=this.reserveBytes(2);this.buf.writeUInt16BE(e,t)}writeUInt32BE(e){let t=this.reserveBytes(4);this.buf.writeUInt32BE(e,t)}writeUInt64BE(e){let t=this.reserveBytes(8);this.buf.writeUInt32BE(0,t),this.buf.writeUInt32BE(e,t+4)}writeUInt16LE(e){let t=this.reserveBytes(2);this.buf.writeUInt16LE(e,t)}};T(En,"BaseBuffer");var yr=En,ln=class ln extends yr{constructor(e){e?super(e):(super(it.BUFFER_CHUNK_SIZE),this.size=this.maxSize)}_grow(e){let t=e%it.BUFFER_CHUNK_SIZE;t>0&&(e+=it.BUFFER_CHUNK_SIZE-t);let s=Nt.allocUnsafe(e);this.buf.copy(s),this.buf=s,this.maxSize=this.size=e}};T(ln,"GrowableBuffer");var cn=ln;Fc.exports={BaseBuffer:yr,GrowableBuffer:cn}});var Br=R((kC,xc)=>{"use strict";var{BaseBuffer:cd,GrowableBuffer:Ed}=fs(),{Buffer:ld}=require("buffer"),De=vs(),ds=Y(),Sn=class Sn extends cd{decode(){let e=this.readUInt8();e!=De.TNS_VECTOR_MAGIC_BYTE&&ds.throwErr(ds.ERR_UNEXPECTED_DATA,ld.from([e]).toString("hex"));let t=this.readUInt8();t>De.TNS_VECTOR_VERSION_WITH_BINARY&&ds.throwErr(ds.ERR_VECTOR_VERSION_NOT_SUPPORTED,t);let s=this.readUInt16BE(),r=this.readUInt8(),n=this.readUInt32BE(),_,a;r===De.VECTOR_FORMAT_FLOAT32?(_=4,a=new Float32Array(n)):r===De.VECTOR_FORMAT_FLOAT64?(_=8,a=new Float64Array(n)):r===De.VECTOR_FORMAT_INT8?(_=1,a=new Int8Array(n)):r===De.VECTOR_FORMAT_BINARY?(_=1,n=n/8,a=new Uint8Array(n)):ds.throwErr(ds.ERR_VECTOR_FORMAT_NOT_SUPPORTED,r),(r===De.VECTOR_FORMAT_BINARY||s&De.TNS_VECTOR_FLAG_NORM)&&this.skipBytes(8);for(let c=0;c<n;c++){let E=this.readBytes(_);r===De.VECTOR_FORMAT_FLOAT32?a[c]=this.parseBinaryFloat(E):r===De.VECTOR_FORMAT_FLOAT64?a[c]=this.parseBinaryDouble(E):a[c]=E[0]}return a}};T(Sn,"VectorDecoder");var hn=Sn,un=class un extends Ed{encode(e){let t=De.VECTOR_FORMAT_FLOAT32,s=this.writeBinaryFloat.bind(this),r=e.length,n=De.TNS_VECTOR_VERSION_BASE,_=De.TNS_VECTOR_FLAG_NORMSRC|De.TNS_VECTOR_FLAG_NORM;return Array.isArray(e)||e instanceof Float64Array?(t=De.VECTOR_FORMAT_FLOAT64,s=this.writeBinaryDouble.bind(this)):e instanceof Int8Array?(t=De.VECTOR_FORMAT_INT8,s=this.writeSB1.bind(this)):e.constructor.name==="Uint8Array"&&(t=De.VECTOR_FORMAT_BINARY,r=r*8,n=De.TNS_VECTOR_VERSION_WITH_BINARY,_=De.TNS_VECTOR_FLAG_NORMSRC,s=this.writeUInt8.bind(this)),this.writeUInt8(De.TNS_VECTOR_MAGIC_BYTE),this.writeUInt8(n),this.writeUInt16BE(_),this.writeUInt8(t),this.writeUInt32BE(r),this.reserveBytes(8),e.forEach(a=>{s(a)}),this.buf.subarray(0,this.pos)}};T(un,"VectorEncoder");var Nn=un;xc.exports={VectorDecoder:hn,VectorEncoder:Nn}});var nt=R((GC,bc)=>{"use strict";var hd=Ye(),wr=Y(),H=Fe(),Nd=Le(),kc=Br(),fn=class fn{constructor(){this.autoCommit=!1,this.connectionClass="",this.dbObjectAsPojo=!1,this.edition="",this.errorOnConcurrentExecute=!1,this.events=!1,this.externalAuth=!1,this.fetchArraySize=100,this.fetchAsBuffer=[],this.fetchAsString=[],this.lobPrefetchSize=16384,this.maxRows=0,this.outFormat=hd.OUT_FORMAT_ARRAY,this.poolIncrement=1,this.poolMax=4,this.poolMaxPerShard=0,this.poolMin=0,this.poolPingInterval=60,this.poolPingTimeout=5e3,this.poolTimeout=60,this.prefetchRows=2,this.queueTimeout=6e4,this.queueMax=500,this.stmtCacheSize=30,this.thin=!0,this.thinDriverInitialized=!1,this.createFetchTypeMap(this.fetchAsString,this.fetchAsBuffer),this.fetchTypeHandler=void 0,this._JsonId=H.JsonId}_getDateComponents(e,t){return e?[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()*1e3*1e3]:[t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()*1e3*1e3]}_makeDate(e,t,s,r,n,_,a,c,E){return Nd.makeDate(e,t,s,r,n,_,a,c,E)}_decodeVector(e){return new kc.VectorDecoder(e).decode()}_encodeVector(e){return new kc.VectorEncoder().encode(e)}addToOptions(e){for(let t=1;t<arguments.length;t++){let s=arguments[t];e[s]===void 0&&(e[s]=this[s])}}createFetchTypeMap(e,t){let s=new Map(H.DB_TYPE_FETCH_TYPE_MAP);for(let r of e)switch(r){case H.DB_TYPE_NUMBER:s.set(H.DB_TYPE_BINARY_DOUBLE,H.DB_TYPE_VARCHAR),s.set(H.DB_TYPE_BINARY_FLOAT,H.DB_TYPE_VARCHAR),s.set(H.DB_TYPE_BINARY_INTEGER,H.DB_TYPE_VARCHAR),s.set(H.DB_TYPE_NUMBER,H.DB_TYPE_VARCHAR);break;case H.DB_TYPE_TIMESTAMP:s.set(H.DB_TYPE_DATE,H.DB_TYPE_VARCHAR),s.set(H.DB_TYPE_TIMESTAMP,H.DB_TYPE_VARCHAR),s.set(H.DB_TYPE_TIMESTAMP_TZ,H.DB_TYPE_VARCHAR),s.set(H.DB_TYPE_TIMESTAMP_LTZ,H.DB_TYPE_VARCHAR);break;case H.DB_TYPE_CLOB:case H.DB_TYPE_NCLOB:s.set(H.DB_TYPE_CLOB,H.DB_TYPE_LONG),s.set(H.DB_TYPE_NCLOB,H.DB_TYPE_LONG_NVARCHAR);break;case H.DB_TYPE_VECTOR:s.set(H.DB_TYPE_VECTOR,H.DB_TYPE_LONG);break;case H.DB_TYPE_RAW:s.set(H.DB_TYPE_RAW,H.DB_TYPE_VARCHAR);break;case H.DB_TYPE_JSON:s.set(H.DB_TYPE_JSON,H.DB_TYPE_VARCHAR);break;default:wr.throwErr(wr.ERR_INVALID_TYPE_FOR_CONVERSION)}for(let r of t)switch(r){case H.DB_TYPE_BLOB:s.set(H.DB_TYPE_BLOB,H.DB_TYPE_LONG_RAW);break;default:wr.throwErr(wr.ERR_INVALID_TYPE_FOR_CONVERSION)}this.fetchTypeMap=s}};T(fn,"Settings");var An=fn;bc.exports=new An});var Y=R((HC,ch)=>{"use strict";var Sd=require("util"),Gc="NJS",ud=[1,1400,1438,2290,2291,2292,21525,40479],qc=2,dn=3,Pn=4,pn=5,Rn=7,mn=9,Hc=10,vc=11,Kc=12,Wc=13,Xc=15,zc=16,Qc=17,Jc=18,jc=19,Zc=21,$c=22,eE=23,tE=24,sE=34,rE=35,iE=36,nE=37,oE=40,_E=41,aE=42,TE=43,cE=44,EE=45,lE=46,hE=47,NE=52,SE=55,uE=56,AE=57,fE=58,dE=59,PE=60,pE=61,RE=62,mE=63,IE=64,DE=65,CE=66,OE=67,In=68,gE=69,LE=70,yE=75,BE=76,wE=78,YE=80,UE=81,ME=82,VE=83,FE=84,xE=85,kE=86,Dn=87,Cn=89,bE=90,GE=91,qE=92,On=95,HE=97,vE=98,KE=99,WE=100,XE=101,zE=102,QE=103,JE=104,gn=105,jE=106,Ln=107,ZE=109,$E=110,el=111,tl=112,sl=113,rl=114,yn=115,il=116,nl=118,ol=119,_l=120,al=121,Tl=122,Bn=123,cl=125,El=126,ll=127,hl=128,wn=129,Nl=130,Yn=131,Un=132,Mn=133,Sl=134,ul=135,Al=136,fl=137,dl=138,Pl=139,pl=140,Rl=141,ml=142,Il=143,Dl=144,Cl=145,Ol=146,gl=147,Ll=149,yl=150,Bl=151,wl=152,Yl=153,Ul=154,Ml=155,Vl=156,Ps=500,Fl=501,xl=503,kl=504,bl=505,Gl=506,ql=507,Hl=508,vl=509,Kl=510,Wl=511,Xl=512,zl=513,Ql=514,Jl=515,jl=516,Zl=517,$l=518,eh=519,th=520,sh=521,rh=522,ih=523,nh=524,oh=525,_h=526,ah=527,Th=528,Vn=700,Ue=new Map;Ue.set("DPI-1010",dn);Ue.set("DPI-1024",[Un,"at index ([0-9]+) does"]);Ue.set("DPI-1044",yn);Ue.set("DPI-1055",gn);Ue.set("DPI-1063",On);Ue.set("DPI-1067",[Bn,"call timeout of ([0-9]+) ms"]);Ue.set("DPI-1080",Ps);Ue.set("OCI-22303",[wn,'type "([^"]*"."[^"]*)"']);Ue.set("OCI-22164",Mn);Ue.set("OCI-22165",[Yn,/index \[([0-9]+)\] must be in the range of \[([0-9]+)\] to \[([0-9]+)\]/]);Ue.set("ORA-00028",Ps);Ue.set("ORA-00600",Ps);Ue.set("ORA-24338",Ln);Ue.set("ORA-25708",Dn);Ue.set("ORA-24344",Vn);var f=new Map;f.set(qc,"invalid pool");f.set(dn,"invalid or closed connection");f.set(Pn,'invalid value for property "%s"');f.set(pn,"invalid value for parameter %d");f.set(Rn,'invalid value for "%s" in parameter %d');f.set(mn,"invalid number of parameters");f.set(Hc,"unsupported data type %d in column %d");f.set(vc,"encountered bind value and type mismatch");f.set(Kc,"encountered invalid bind data type in parameter %d");f.set(Wc,"invalid bind direction");f.set(Xc,"type was not specified for conversion");f.set(zc,"buffer is too small for OUT binds");f.set(Qc,"concurrent operations on ResultSet are not allowed");f.set(Jc,"invalid ResultSet");f.set(jc,"ResultSet cannot be returned for non-query statements");f.set(Zc,"invalid type for conversion specified");f.set($c,"invalid Lob");f.set(eE,"concurrent operations on a Lob are not allowed");f.set(tE,"memory allocation failed");f.set(sE,"data type is unsupported for array bind");f.set(rE,"maxArraySize is required for IN OUT array bind");f.set(iE,'length of given array is greater than "maxArraySize"');f.set(nE,'invalid data type at array index %d for bind ":%s"');f.set(oE,'connection request timeout. Request exceeded "queueTimeout" of %d');f.set(_E,"cannot convert ResultSet to QueryStream after invoking methods");f.set(aE,"cannot invoke ResultSet methods after converting to QueryStream");f.set(TE,"ResultSet already converted to QueryStream");f.set(cE,'bind object must contain one of the following attributes: "dir", "type", "maxSize", or "val"');f.set(EE,"cannot load a node-oracledb Thick mode binary for Node.js. Please try using Thin mode. %s");f.set(lE,'pool alias "%s" already exists in the connection pool cache');f.set(hE,'pool alias "%s" not found in connection pool cache');f.set(NE,"invalid data type at array index %d for bind position %d");f.set(SE,"binding by position and name cannot be mixed");f.set(uE,"maxSize for bind position %d must be specified and be greater than zero");f.set(AE,'maxSize for bind "%s" must be specified and greater than zero');f.set(fE,"maxSize of %d is too small for value of length %d in row %d");f.set(dE,"type must be specified for bind position %d");f.set(PE,'type must be specified for bind "%s"');f.set(pE,"invalid subscription");f.set(RE,"subscription notification callback missing");f.set(mE,"subscription notification SQL missing");f.set(IE,"connection pool is closing");f.set(DE,"connection pool was closed");f.set(CE,"invalid SODA document cursor");f.set(OE,"a pre-built node-oracledb Thick mode binary was not found for %s");f.set(In,"invalid error number %d supplied");f.set(gE,"node-oracledb %s requires Node.js %s or later");f.set(LE,"message must be a string, buffer, database object or an object containing a payload property which itself is a string, buffer or database object");f.set(yE,'only one of "connectString" and "connectionString" can be used');f.set(BE,'connection request rejected. Pool queue length "queueMax" %d reached');f.set(wE,"unsupported data type %d in JSON value");f.set(YE,'only one of "user" and "username" can be used');f.set(UE,"concurrent operations on a connection are disabled");f.set(ME,"connection pool is being reconfigured");f.set(VE,"pool statistics are not enabled");f.set(FE,"invalid access token");f.set(xE,'invalid connection pool configuration with token-based authentication. The "homogeneous" and "externalAuth" attributes must be set to true');f.set(kE,'invalid standalone configuration with token-based authentication. The "externalAuth" attribute must be set to true');f.set(Dn,"access token has expired");f.set(Cn,"%s is not supported by node-oracledb in Thin mode");f.set(bE,"initOracleClient() was already called with different arguments");f.set(GE,"file %s is missing");f.set(qE,'"poolMax" %d must be greater than or equal to "poolMin" %d');f.set(On,'setting "batchErrors" or "dmlRowCounts" to true is only permitted for DML statements');f.set(HE,'no bind placeholder named ":%s" was found in the statement text');f.set(vE,"%s positional bind values are required but %s were provided");f.set(KE,"internal error: buffer of length %s insufficient to hold %s bytes");f.set(WE,"national character set id %d is not supported by node-oracledb in Thin mode");f.set(XE,"no credentials specified");f.set(zE,"unexpected end of data: want %d bytes but only %d bytes are available");f.set(QE,"unexpected message type %d received at position %d of packet %d");f.set(JE,"connection pool cannot be closed because connections are busy");f.set(gn,"value is not a number (NaN) and cannot be used in Oracle Database numbers");f.set(jE,"internal error: %s");f.set(Ln,"invalid cursor");f.set(ZE,"invalid type number %d");f.set($E,"invalid Oracle type number %d [csfrm: %d]");f.set(el,"internal error: read a negative integer when expecting a positive integer at position %d of packet %d");f.set(tl,"internal error: read integer of length %d when expecting integer of no more than length %d at position %d of packet %d");f.set(sl,"unexpected data received: %s");f.set(rl,"OSON field names may not exceed %d UTF-8 encoded bytes");f.set(yn,"value cannot be represented as an Oracle Database number");f.set(il,"password verifier type 0x%s is not supported by node-oracledb in Thin mode");f.set(nl,"node-oracledb Thick mode cannot be enabled because a Thin mode connection has already been created");f.set(ol,"conversion from type %s to type %s is not supported");f.set(_l,"fetchTypeHandler return value must be an object");f.set(al,'fetchTypeHandler return value attribute "type" must be a valid database type');f.set(Tl,'fetchTypeHandler return value attribute "converter" must be a function');f.set(Bn,"call timeout of %d ms exceeded");f.set(cl,'"connectString" cannot be empty or undefined. Bequeath connections are not supported in Thin mode');f.set(El,"OSON version %s is not supported");f.set(ll,"internal error: unknown server side piggyback opcode %s");f.set(hl,'internal error: unknown column type name "%s"');f.set(wn,'invalid object type name: "%s"');f.set(Nl,"Oracle TDS data type %d is not supported");f.set(Yn,"given index %d must be in the range of %d to %d");f.set(Un,"element at index %d does not exist");f.set(Mn,"cannot delete elements of a VARRAY");f.set(Sl,"value is of wrong type for attribute %s of object %s");f.set(ul,"value is of wrong type for an element of object %s");f.set(Al,"user name and password cannot be set when using external authentication");f.set(fl,'a bind variable replacement value for placeholder ":%s" was not provided');f.set(dl,"connections to this database server version are not supported by node-oracledb in Thin mode");f.set(Pl,"unexpected XML type with flag %d");f.set(pl,"user name must be enclosed in [] when using external authentication with a proxy user");f.set(Rl,"the number of batch errors from executemany() exceeds 65535");f.set(ml,"value too large for attribute %s of object %s (actual: %d, maximum: %d)");f.set(Il,"value too large for element %d of object %s (actual: %d, maximum: %d)");f.set(Dl,"VECTOR format %d is not supported");f.set(Cl,"VECTOR version %d is not supported");f.set(Ol,"object %s is not a collection");f.set(gl,"cursor has been closed by the database");f.set(Ll,'the bind variable placeholder "%s" cannot be used both before and after the RETURNING clause in a DML RETURNING statement');f.set(yl,"invalid flags for tpcBegin() in Two Phase Commit");f.set(Bl,"invalid flags for tpcEnd() in Two Phase Commit");f.set(wl,"internal error: unknown transaction state {state} in Two Phase Commit");f.set(Yl,"size of the transaction ID is %d and cannot exceed 64");f.set(Ul,"size of the branch ID is %d and cannot exceed 64");f.set(Ml,"operation is not supported on BFILE LOBs");f.set(Vl,"operation is only supported on BFILE LOBs");f.set(Ps,"connection to the Oracle Database was broken");f.set(Fl,`connection to host %s port %d terminated unexpectedly. (CONNECTION_ID=%s)
%s`);f.set(xl,`connection to host %s port %d could not be established. (CONNECTION_ID=%s)
%s`);f.set(kl,`connection establishment through a web proxy at host %s port %d failed. (CONNECTION_ID=%s)
%s`);f.set(bl,"unable to initiate TLS connection. Please check if wallet credentials are valid");f.set(Gl,`connection to host %s port %d encountered TLS handshake failure. (CONNECTION_ID=%s)
%s`);f.set(ql,"TLS detected an invalid certificate. Server DN in certificate does not match the specified DN");f.set(Hl,"TLS detected an invalid certificate. %s not present in certificate");f.set(vl,"internal error: invalid packet type or malformed packet received");f.set(Kl,'connection to host %s port %d timed out. Request exceeded "%s" of %d seconds. (CONNECTION_ID=%s)');f.set(Wl,`connection to listener at host %s port %d was refused. (CONNECTION_ID=%s)
Cause: %s`);f.set(Xl,`invalid connection string parameters.
%s`);f.set(zl,"error received through in-band notification: %s");f.set(Ql,"syntax error in connection string");f.set(Jl,"error in Easy Connect connection string: %s: %s");f.set(jl,"no configuration directory set or available to search for tnsnames.ora");f.set(Zl,'cannot connect to Oracle Database. Unable to find "%s" in "%s"');f.set($l,'cannot connect to Oracle Database. Service "%s" is not registered with the listener at host %s port %s. (CONNECTION_ID=%s)');f.set(eh,'cannot connect to Oracle Database. SID "%s" is not registered with the listener at host %s port %s. (CONNECTION_ID=%s)');f.set(th,"cannot connect to Oracle Database. File tnsnames.ora not found in %s");f.set(sh,"connection to host %s port %d received end-of-file on communication channel. (CONNECTION_ID=%s)");f.set(rh,"Azure Authentication Failed: The authentication parameter value %s may be incorrect");f.set(ih,`Failed to retrieve configuration from Centralized Configuration Provider:
 %s`);f.set(nh,"Configuration Provider not supported: %s");f.set(oh,`Centralized Config Provider failed to load required libraries. Please install the required libraries.
 %s`);f.set(_h,"OCI authentication failed: The authentication parameter value %s may be incorrect");f.set(ah,"Azure Vault: Provide correct azure vault authentication details");f.set(Th,"Azure service principal authentication requires either a client certificate path or a client secret string");f.set(Vn,"creation succeeded with compilation errors");function Ks(i){if(!i){let e=Array.prototype.slice.call(arguments,1);Fn(...e)}}T(Ks,"assert");function Ad(i,e,t){Ks(i.length>=e&&i.length<=t,mn)}T(Ad,"assertArgCount");function fd(i,e,t){i[t]!==void 0&&$t(typeof i[t]=="boolean",e,t)}T(fd,"assertParamPropBool");function dd(i,e,t){i[t]!==void 0&&$t(typeof i[t]=="function",e,t)}T(dd,"assertParamPropFunction");function Pd(i,e,t){i[t]!==void 0&&$t(Number.isInteger(i[t]),e,t)}T(Pd,"assertParamPropInt");function pd(i,e,t){i[t]!==void 0&&$t(Number.isInteger(i[t])&&i[t]>=0,e,t)}T(pd,"assertParamPropUnsignedInt");function Rd(i,e,t){i[t]!==void 0&&$t(Number.isInteger(i[t])&&i[t]>0,e,t)}T(Rd,"assertParamPropUnsignedIntNonZero");function md(i,e,t){i[t]!==void 0&&$t(typeof i[t]=="string",e,t)}T(md,"assertParamPropString");function $t(i,e,t){Ks(i,Rn,t,e)}T($t,"assertParamPropValue");function Id(i,e){Ks(i,pn,e)}T(Id,"assertParamValue");function Dd(i,e){Ks(i,Pn,e)}T(Dd,"assertPropValue");function Yr(i){let e=f.get(i),t=[...arguments];e||(t=[void 0,i],i=In,e=f.get(i));let s=i.toString().padStart(3,"0"),r=`${Gc}-${s}`;t[0]=`${r}: ${e}`;let n=new Error(Sd.format(...t));return n.code=r,Error.captureStackTrace(n,Yr),n}T(Yr,"getErr");function Fn(){throw Yr(...arguments)}T(Fn,"throwErr");function Cd(i){Fn(Cn,i)}T(Cd,"throwNotImplemented");function Od(i,e){if(!i.code){let t=i.message.indexOf(":");if(t>0){i.code=i.message.substr(0,t);let s=nt();if(i.errorNum&&s.thin&&(i.message+=`
Help: https://docs.oracle.com/error-help/db/ora-${i.errorNum.toString().padStart(5,"0")}/`),Ue.has(i.code)){let r=[],n,_=Ue.get(i.code);if(typeof _=="number")n=_;else{n=_[0];let c=_[1],E=i.message.match(c);E&&(r=E.slice(1))}let a=Yr(n,...r);i.code=a.code,i.message=a.message+`
`+i.message}}}return i.requiresStackCapture&&(delete i.requiresStackCapture,Error.captureStackTrace(i,e)),i}T(Od,"transformErr");ch.exports={ERR_INTEGRITY_ERROR_CODES:ud,ERR_INVALID_POOL:qc,ERR_INVALID_CONNECTION:dn,ERR_INVALID_PROPERTY_VALUE:Pn,ERR_INVALID_PARAMETER_VALUE:pn,ERR_INVALID_PROPERTY_VALUE_IN_PARAM:Rn,ERR_INVALID_NUMBER_OF_PARAMETERS:mn,ERR_UNSUPPORTED_DATA_TYPE:Hc,ERR_BIND_VALUE_AND_TYPE_MISMATCH:vc,ERR_INVALID_BIND_DATA_TYPE:Kc,ERR_INVALID_BIND_DIRECTION:Wc,ERR_NO_TYPE_FOR_CONVERSION:Xc,ERR_INSUFFICIENT_BUFFER_FOR_BINDS:zc,ERR_BUSY_RS:Qc,ERR_INVALID_RS:Jc,ERR_NOT_A_QUERY:jc,ERR_INVALID_TYPE_FOR_CONVERSION:Zc,ERR_INVALID_LOB:$c,ERR_BUSY_LOB:eE,ERR_INSUFFICIENT_MEMORY:tE,ERR_INVALID_TYPE_FOR_ARRAY_BIND:sE,ERR_REQUIRED_MAX_ARRAY_SIZE:rE,ERR_INVALID_ARRAY_SIZE:iE,ERR_INCOMPATIBLE_TYPE_ARRAY_BIND:nE,ERR_CONN_REQUEST_TIMEOUT:oE,ERR_CANNOT_CONVERT_RS_TO_STREAM:_E,ERR_CANNOT_INVOKE_RS_METHODS:aE,ERR_RS_ALREADY_CONVERTED:TE,ERR_INVALID_BIND_UNIT:cE,ERR_CANNOT_LOAD_BINARY:EE,ERR_POOL_WITH_ALIAS_ALREADY_EXISTS:lE,ERR_POOL_WITH_ALIAS_NOT_FOUND:hE,ERR_INCOMPATIBLE_TYPE_ARRAY_INDEX_BIND:NE,ERR_MIXED_BIND:SE,ERR_MISSING_MAX_SIZE_BY_POS:uE,ERR_MISSING_MAX_SIZE_BY_NAME:AE,ERR_MAX_SIZE_TOO_SMALL:fE,ERR_MISSING_TYPE_BY_POS:dE,ERR_MISSING_TYPE_BY_NAME:PE,ERR_INVALID_SUBSCR:pE,ERR_MISSING_SUBSCR_CALLBACK:RE,ERR_MISSING_SUBSCR_SQL:mE,ERR_POOL_CLOSING:IE,ERR_POOL_CLOSED:DE,ERR_INVALID_SODA_DOC_CURSOR:CE,ERR_NO_BINARY_AVAILABLE:OE,ERR_INVALID_ERR_NUM:In,ERR_NODE_TOO_OLD:gE,ERR_INVALID_AQ_MESSAGE:LE,ERR_DBL_CONNECT_STRING:yE,ERR_QUEUE_MAX_EXCEEDED:BE,ERR_UNSUPPORTED_DATA_TYPE_IN_JSON:wE,ERR_DBL_USER:YE,ERR_CONCURRENT_OPS:UE,ERR_POOL_RECONFIGURING:ME,ERR_POOL_STATISTICS_DISABLED:VE,ERR_TOKEN_BASED_AUTH:FE,ERR_POOL_TOKEN_BASED_AUTH:xE,ERR_CONN_TOKEN_BASED_AUTH:kE,ERR_TOKEN_HAS_EXPIRED:Dn,ERR_NOT_IMPLEMENTED:Cn,ERR_INIT_ORACLE_CLIENT_ARGS:bE,ERR_MISSING_FILE:GE,ERR_INVALID_NUMBER_OF_CONNECTIONS:qE,ERR_EXEC_MODE_ONLY_FOR_DML:On,ERR_CONNECTION_CLOSED:Ps,ERR_CONNECTION_LOSTCONTACT:Fl,ERR_CONNECTION_INCOMPLETE:xl,ERR_PROXY_CONNECTION_FAILURE:kl,ERR_TLS_INIT_FAILURE:bl,ERR_TLS_AUTH_FAILURE:Gl,ERR_TLS_DNMATCH_FAILURE:ql,ERR_TLS_HOSTMATCH_FAILURE:Hl,ERR_INVALID_PACKET:vl,ERR_CONNECTION_TIMEDOUT:Kl,ERR_CONNECTION_REFUSED:Wl,ERR_INVALID_CONNECT_STRING_PARAMETERS:Xl,ERR_CONNECTION_INBAND:zl,ERR_INVALID_CONNECT_STRING_SYNTAX:Ql,ERR_INVALID_EZCONNECT_SYNTAX:Jl,ERR_NO_CONFIG_DIR:jl,ERR_TNS_ENTRY_NOT_FOUND:Zl,ERR_CONNECTION_EOF:sh,ERR_AZURE_CONFIG_PROVIDER_AUTH_FAILED:rh,ERR_OCIOBJECT_CONFIG_PROVIDER_AUTH_FAILED:_h,ERR_AZURE_VAULT_AUTH_FAILED:ah,ERR_AZURE_SERVICE_PRINCIPAL_AUTH_FAILED:Th,ERR_CONFIG_PROVIDER_FAILED_TO_RETRIEVE_CONFIG:ih,ERR_CONFIG_PROVIDER_NOT_SUPPORTED:nh,ERR_CONFIG_PROVIDER_LOAD_FAILED:oh,ERR_INVALID_BIND_NAME:HE,ERR_WRONG_NUMBER_OF_POSITIONAL_BINDS:vE,ERR_BUFFER_LENGTH_INSUFFICIENT:KE,ERR_NCHAR_CS_NOT_SUPPORTED:WE,ERR_MISSING_CREDENTIALS:XE,ERR_UNEXPECTED_END_OF_DATA:zE,ERR_UNEXPECTED_MESSAGE_TYPE:QE,ERR_POOL_HAS_BUSY_CONNECTIONS:JE,ERR_INTERNAL:jE,ERR_INVALID_REF_CURSOR:Ln,ERR_UNSUPPORTED_VERIFIER_TYPE:il,ERR_NAN_VALUE:gn,ERR_ORACLE_NUMBER_NO_REPR:yn,ERR_INVALID_SERVICE_NAME:$l,ERR_INVALID_SID:eh,ERR_TNS_NAMES_FILE_MISSING:th,ERR_INVALID_TYPE_NUM:ZE,ERR_INVALID_ORACLE_TYPE_NUM:$E,ERR_UNEXPECTED_NEGATIVE_INTEGER:el,ERR_INTEGER_TOO_LARGE:tl,ERR_UNEXPECTED_DATA:sl,ERR_OSON_FIELD_NAME_LIMITATION:rl,ERR_OSON_VERSION_NOT_SUPPORTED:El,ERR_THIN_CONNECTION_ALREADY_CREATED:nl,ERR_UNSUPPORTED_CONVERSION:ol,ERR_FETCH_TYPE_HANDLER_RETURN_VALUE:_l,ERR_FETCH_TYPE_HANDLER_TYPE:al,ERR_FETCH_TYPE_HANDLER_CONVERTER:Tl,ERR_CALL_TIMEOUT_EXCEEDED:Bn,ERR_EMPTY_CONNECT_STRING:cl,ERR_UNKOWN_SERVER_SIDE_PIGGYBACK:ll,ERR_UNKNOWN_COLUMN_TYPE_NAME:hl,ERR_INVALID_OBJECT_TYPE_NAME:wn,ERR_TDS_TYPE_NOT_SUPPORTED:Nl,ERR_INVALID_COLL_INDEX_SET:Yn,ERR_INVALID_COLL_INDEX_GET:Un,ERR_DELETE_ELEMENTS_OF_VARRAY:Mn,ERR_WRONG_VALUE_FOR_DBOBJECT_ATTR:Sl,ERR_WRONG_VALUE_FOR_DBOBJECT_ELEM:ul,ERR_WRONG_CRED_FOR_EXTAUTH:Al,ERR_MISSING_BIND_VALUE:fl,ERR_SERVER_VERSION_NOT_SUPPORTED:dl,ERR_UNEXPECTED_XML_TYPE:Pl,ERR_WRONG_USER_FORMAT_EXTAUTH_PROXY:pl,ERR_TOO_MANY_BATCH_ERRORS:Rl,ERR_WRONG_LENGTH_FOR_DBOBJECT_ATTR:ml,ERR_WRONG_LENGTH_FOR_DBOBJECT_ELEM:Il,ERR_VECTOR_FORMAT_NOT_SUPPORTED:Dl,ERR_VECTOR_VERSION_NOT_SUPPORTED:Cl,ERR_OBJECT_IS_NOT_A_COLLECTION:Ol,ERR_CURSOR_HAS_BEEN_CLOSED:gl,ERR_DML_RETURNING_DUP_BINDS:Ll,ERR_INVALID_TPC_BEGIN_FLAGS:yl,ERR_INVALID_TPC_END_FLAGS:Bl,ERR_UNKNOWN_TRANSACTION_STATE:wl,ERR_INVALID_TRANSACTION_SIZE:Yl,ERR_INVALID_BRANCH_SIZE:Ul,ERR_CONNECTION_CLOSED_CODE:`${Gc}-${Ps}`,ERR_OPERATION_NOT_SUPPORTED_ON_BFILE:Ml,ERR_OPERATION_ONLY_SUPPORTED_ON_BFILE:Vl,WRN_COMPILATION_CREATE:Vn,assert:Ks,assertArgCount:Ad,assertParamPropBool:fd,assertParamPropFunction:dd,assertParamPropInt:Pd,assertParamPropString:md,assertParamPropUnsignedInt:pd,assertParamPropUnsignedIntNonZero:Rd,assertParamPropValue:$t,assertParamValue:Id,assertPropValue:Dd,getErr:Yr,throwErr:Fn,throwNotImplemented:Cd,transformErr:Od}});var Ur=R((KC,Eh)=>{"use strict";var kn=class kn{constructor(e){let t=new URLSearchParams(e);this.paramMap=new URLSearchParams([...t].map(([s,r])=>[s.toLowerCase(),r]))}modifyOptionsPrecedence(e,t){return t={...t},t.user||(t.user=e.user),t.password||(t.password=e.password),e.connectString&&(t.connectString=e.connectString,t.connectionString=void 0),e.poolMin&&(t.poolMin=e.poolMin),e.poolMax&&(t.poolMax=e.poolMax),e.poolIncrement&&(t.poolIncrement=e.poolIncrement),e.poolTimeout&&(t.poolTimeout=e.poolTimeout),e.poolPingInterval&&(t.poolPingInterval=e.poolPingInterval),e.poolPingTimeout&&(t.poolPingTimeout=e.poolPingTimeout),e.stmtCacheSize&&(t.stmtCacheSize=e.stmtCacheSize),e.prefetchRows&&(t.prefetchRows=e.prefetchRows),e.lobPrefetch&&(t.lobPrefetch=e.lobPrefetch),t}_addParam(e,t){let s=e.toLowerCase();this.paramMap.set(s,t)}_parsePwd(e){let t=new RegExp("(?<vault_url>https://[A-Za-z0-9._-]+)/secrets/(?<secretKey>[A-Za-z][A-Za-z0-9-]*)$","g"),s=[];for(let r of e.matchAll(t))s[0]=r.groups.vault_url,s[1]=r.groups.secretKey;return s}};T(kn,"base");var xn=kn;Eh.exports={base:xn}});var Ah=R((XC,uh)=>{"use strict";var lh,bn,Gn,hh,Nh,Sh,Mr=Y(),{base:gd}=Ur(),Hn=class Hn extends gd{constructor(e,t){super(t),this._addParam("appconfigname",e)}init(){({AppConfigurationClient:lh}=require("@azure/app-configuration")),{ClientSecretCredential:bn,ClientCertificateCredential:Gn,ChainedTokenCredential:hh,ManagedIdentityCredential:Nh,EnvironmentCredential:Sh}=require("@azure/identity")}_withChainedTokenCredential(){let e=[];return this.paramMap.get("azure_client_secret")&&e.push(new bn(this.paramMap.get("azure_tenant_id"),this.paramMap.get("azure_client_id"),this.paramMap.get("azure_client_secret"))),this.paramMap.get("azure_client_certificate_path")&&e.push(new Gn(this.paramMap.get("azure_tenant_id"),this.paramMap.get("azure_client_id"),this.paramMap.get("azure_client_certificate_path"))),this.paramMap.get("azure_managed_identity_client_id")&&e.push(this.paramMap.get("azure_managed_identity_client_id")),e.push(new Sh),new hh(...e)}_returnCredential(){let e=null;if(this.paramMap.get("authentication")&&(e=this.paramMap.get("authentication").toUpperCase()),e&&e!="AZURE_DEFAULT")if(e=="AZURE_SERVICE_PRINCIPAL"){if(this.paramMap.get("azure_client_certificate_path"))return new Gn(this.paramMap.get("azure_tenant_id"),this.paramMap.get("azure_client_id"),this.paramMap.get("azure_client_certificate_path"));if(this.paramMap.get("azure_client_secret"))return new bn(this.paramMap.get("azure_tenant_id"),this.paramMap.get("azure_client_id"),this.paramMap.get("azure_client_secret"));Mr.throwErr(Mr.ERR_AZURE_SERVICE_PRINCIPAL_AUTH_FAILED)}else{if(e=="AZURE_MANAGED_IDENTITY")return new Nh(this.paramMap.get("azure_managed_identity_client_id"));Mr.throwErr(Mr.ERR_AZURE_CONFIG_PROVIDER_AUTH_FAILED,e)}else return this._withChainedTokenCredential()}async _getConfigurationSetting(e,t,s){return await e.getConfigurationSetting({key:t,label:s})}async returnConfig(){let e={},t=this.paramMap.get("label"),s=this._returnCredential(),r=new lh("https://"+this.paramMap.get("appconfigname"),s);e.connectString=(await this._getConfigurationSetting(r,this.paramMap.get("key")+"connect_descriptor",t)).value;try{let a=(await this._getConfigurationSetting(r,this.paramMap.get("key")+"node-oracledb",t)).value,c=JSON.parse(a);for(let E in c){var n=c[E];e[E]=n}}catch{e["node-oracledb"]=null}try{e.user=(await this._getConfigurationSetting(r,this.paramMap.get("key")+"user",t)).value}catch{e.user=null}let _=null;try{_=await this._getConfigurationSetting(r,this.paramMap.get("key")+"password",t)}catch{e.password=null}if(_){let a;try{a=JSON.parse(_.value)}catch{a=_.value}if(a.uri){let{SecretClient:c}=require("@azure/keyvault-secrets"),E=await this._parsePwd(a.uri),l=new c(E[0],s);e.password=(await l.getSecret(E[1])).value}else e.password=_.value}return e}};T(Hn,"AzureProvider");var qn=Hn;uh.exports=qn});var dh=R((QC,fh)=>{"use strict";var ps=Y(),{base:Ld}=Ur(),yd=require("fs"),Bd=new RegExp("(?<objservername>[A-Za-z0-9._-]+)/n/(?<namespace>[A-Za-z0-9._-]+)/b/(?<bucketname>[A-Za-z0-9._-]+)/o/(?<filename>[A-Za-z0-9._-]+)(/c/(?<alias>.+))?$"),qt={},Kn=class Kn extends Ld{constructor(e,t){super(t);let s=e.match(Bd);s&&(this._addParam("objservername",s.groups.objservername),this._addParam("namespace",s.groups.namespace),this._addParam("bucketname",s.groups.bucketname),this._addParam("filename",s.groups.filename),s.groups.alias&&this._addParam("alias",s.groups.alias))}init(){qt.common=require("oci-common"),qt.objectstorage=require("oci-objectstorage")}async _streamToString(e){let t=[];for await(let s of e)t.push(Buffer.from(s));return Buffer.concat(t).toString("utf-8")}async _returnCredential(){let e=null,t=null;if(this.paramMap.get("authentication")&&(t=this.paramMap.get("authentication").toUpperCase()),t&&t!="OCI_DEFAULT")t=="OCI_INSTANCE_PRINCIPAL"?e=await new qt.common.InstancePrincipalsAuthenticationDetailsProviderBuilder().build():t=="OCI_RESOURCE_PRINCIPAL"?e=await new qt.common.ResourcePrincipalAuthenticationDetailsProvider.builder:ps.throwErr(ps.ERR_OCIOBJECT_CONFIG_PROVIDER_AUTH_FAILED,t);else try{e=new qt.common.ConfigFileAuthenticationDetailsProvider(this.paramMap.get("oci_profile_path"),this.paramMap.get("oci_profile"))}catch(s){if(!this.paramMap.get("oci_tenancy")||!this.paramMap.get("oci_user"))throw s;let r=yd.readFileSync(this.paramMap.get("oci_key_file"),{encoding:"utf8"}),n=this.retrieveRegion(this.paramMap.get("objservername"));e=new qt.common.SimpleAuthenticationDetailsProvider(this.paramMap.get("oci_tenancy"),this.paramMap.get("oci_user"),this.paramMap.get("oci_fingerprint"),r,void 0,qt.common.Region[n])}return e}async returnConfig(){let e={},t=await this._returnCredential(),s=new qt.objectstorage.ObjectStorageClient({authenticationDetailsProvider:t}),r={objectName:this.paramMap.get("filename"),bucketName:this.paramMap.get("bucketname"),namespaceName:this.paramMap.get("namespace")},n,_=await s.getObject(r),a=await this._streamToString(_.value),c=JSON.parse(a),E=this.paramMap.get("alias");E&&(c=c[E]);let N=c["node-oracledb"];for(let d in N){var P=N[d];e[d]=P}if(e.connectString=c.connect_descriptor,e.user=c.user,c.password)if(c.password.type=="vault-azure")if(c.password.authentication){let{SecretClient:d}=require("@azure/keyvault-secrets"),{ClientSecretCredential:S,ClientCertificateCredential:A}=require("@azure/identity");c.password.authentication.azure_client_secret?n=new S(c.password.authentication.azure_tenant_id,c.password.authentication.azure_client_id,c.password.authentication.azure_client_secret):c.password.authentication.azure_client_certificate_path?n=new A(c.password.authentication.azure_tenant_id,c.password.authentication.azure_client_id,c.password.authentication.azure_client_certificate_path):ps.throwErr(ps.ERR_AZURE_VAULT_AUTH_FAILED);let p=await this._parsePwd(c.password.value),u=new d(p[0],n);e.password=(await u.getSecret(p[1])).value}else ps.throwErr(ps.ERR_AZURE_VAULT_AUTH_FAILED);else if(c.password.type=="vault-oci"){let d=require("oci-secrets"),S=new d.SecretsClient({authenticationDetailsProvider:t}),A={secretId:c.password.value},p=await S.getSecretBundle(A);e.password=p.secretBundle.secretBundleContent.content}else c.password&&(e.password=c.password);else e.password=null;return e}retrieveRegion(e){return e.split(".")[1].toUpperCase().replaceAll("-","_")}};T(Kn,"OCIProvider");var vn=Kn;fh.exports=vn});var Mm,Wn=Of(()=>{Mm=Ac({"./configProviders/azure.js":()=>Ah(),"./configProviders/base.js":()=>Ur(),"./configProviders/ociobject.js":()=>dh()})});var ph=R(($C,Ph)=>{"use strict";var ye=Y(),zn=class zn{getCondition(){ye.throwNotImplemented("getting condition (dequeue options)")}getConsumerName(){ye.throwNotImplemented("getting consumer name (dequeue options)")}getCorrelation(){ye.throwNotImplemented("getting correlation (dequeue options)")}getMode(){ye.throwNotImplemented("getting mode (dequeue options)")}getMsgId(){ye.throwNotImplemented("getting message id (dequeue options)")}getNavigation(){ye.throwNotImplemented("getting navigation (dequeue options)")}getTransformation(){ye.throwNotImplemented("getting transformation (dequeue options)")}getVisibility(){ye.throwNotImplemented("getting visibility (dequeue options)")}getWait(){ye.throwNotImplemented("getting wait (dequeue options)")}setCondition(){ye.throwNotImplemented("setting condition (dequeue options)")}setConsumerName(){ye.throwNotImplemented("setting consumer name (dequeue options)")}setCorrelation(){ye.throwNotImplemented("setting correlation (dequeue options)")}setMode(){ye.throwNotImplemented("setting mode (dequeue options)")}setMsgId(){ye.throwNotImplemented("setting message id (dequeue options)")}setNavigation(){ye.throwNotImplemented("setting navigation (dequeue options)")}setTransformation(){ye.throwNotImplemented("setting transformation (dequeue options)")}setVisibility(){ye.throwNotImplemented("setting visibility (dequeue options)")}setWait(){ye.throwNotImplemented("setting wait (dequeue options)")}};T(zn,"AqDeqOptionsImpl");var Xn=zn;Ph.exports=Xn});var mh=R((tO,Rh)=>{"use strict";var Rs=Y(),Jn=class Jn{getDeliveryMode(){Rs.throwNotImplemented("getting delivery mode (enqueue options)")}getTransformation(){Rs.throwNotImplemented("getting transformation (enqueue options)")}getVisibility(){Rs.throwNotImplemented("getting visibility (enqueue options)")}setDeliveryMode(){Rs.throwNotImplemented("setting delivery mode (enqueue options)")}setTransformation(){Rs.throwNotImplemented("setting transformation (enqueue options)")}setVisibility(){Rs.throwNotImplemented("setting visibility (enqueue options)")}};T(Jn,"AqEnqOptionsImpl");var Qn=Jn;Rh.exports=Qn});var Dh=R((rO,Ih)=>{"use strict";var ot=Y(),Zn=class Zn{getCorrelation(){ot.throwNotImplemented("getting correlation (message)")}getDelay(){ot.throwNotImplemented("getting delay (message)")}getDeliveryMode(){ot.throwNotImplemented("getting delivery mode (message)")}getExceptionQueue(){ot.throwNotImplemented("getting exception queue (message)")}getExpiration(){ot.throwNotImplemented("getting expiration (message)")}getMsgId(){ot.throwNotImplemented("getting message id (message)")}getNumAttempts(){ot.throwNotImplemented("getting number of attempts (message)")}getOriginalMsgId(){ot.throwNotImplemented("getting original message id (message)")}getPayload(){ot.throwNotImplemented("getting payload (message)")}getPriority(){ot.throwNotImplemented("getting priority (message)")}getState(){ot.throwNotImplemented("getting state (message)")}};T(Zn,"AqMessageImpl");var jn=Zn;Ih.exports=jn});var Oh=R((nO,Ch)=>{"use strict";var Vr=Y(),eo=class eo{_getConnImpl(){return this._connection}deqMany(){Vr.throwNotImplemented("dequeuing multiple items from a queue")}deqOne(){Vr.throwNotImplemented("dequeuing a single item from a queue")}enqMany(){Vr.throwNotImplemented("enqueuing multiple items from a queue")}enqOne(){Vr.throwNotImplemented("enqueuing a single item from a queue")}};T(eo,"AqQueueImpl");var $n=eo;Ch.exports=$n});var Fr=R((_O,gh)=>{"use strict";var $e=Y(),so=class so{constructor(e){this._objType=e}append(){$e.throwNotImplemented("appending element to collection")}copy(){$e.throwNotImplemented("copying an object")}deleteElement(){$e.throwNotImplemented("deleting an element from a collection")}getElement(){$e.throwNotImplemented("getting an element from a collection")}getFirstIndex(){$e.throwNotImplemented("getting the first index in a collection")}getKeys(){$e.throwNotImplemented("returning the keys of a collection")}getLastIndex(){$e.throwNotImplemented("getting the last index in a collection")}getNextIndex(){$e.throwNotImplemented("getting the next index in a collection")}getPrevIndex(){$e.throwNotImplemented("getting the previous index in a collection")}getValues(){$e.throwNotImplemented("getting the values in a collection")}hasElement(){$e.throwNotImplemented("getting if value exists in a collection")}setElement(){$e.throwNotImplemented("setting an element in a collection")}trim(){$e.throwNotImplemented("trimming elements from a collection")}};T(so,"DbObjectImpl");var to=so;gh.exports=to});var xr=R((TO,Lh)=>{"use strict";var wd=nt(),F=Y(),Yd=require("util"),io=class io{constructor(){this._inProgress=!1,this._dbObjectTypes=new Map,this._requestQueue=[],this._osonMaxFieldNameSize=255}async _acquireLock(){this._inProgress&&(wd.errorOnConcurrentExecute&&F.throwErr(F.ERR_CONCURRENT_OPS),await new Promise((e,t)=>{let s={resolve:e,reject:t};this._requestQueue.push(s)})),this._inProgress=!0}_getConnImpl(){return this}_getDbObjectType(e,t,s,r){let n;if(r&&(n=this._dbObjectTypes.get(r),n))return n;let _=s?`${e}.${s}.${t}`:`${e}.${t}`;return n=this._dbObjectTypes.get(_),n||(n={oid:r,fqn:_,schema:e,name:t,packageName:s,partial:!0,isXmlType:e==="SYS"&&t==="XMLTYPE"},this._dbObjectTypes.set(_,n)),r&&!n.oid&&(n.oid=r,this._dbObjectTypes.set(r,n)),n}_isDate(e){return Yd.types.isDate(e)}_releaseLock(){this._requestQueue.length>0?this._requestQueue.shift().resolve():this._inProgress=!1}breakExecution(){F.throwNotImplemented("getting Oracle Server version number")}changePassword(){F.throwNotImplemented("changing the password")}close(){F.throwNotImplemented("closing the connection")}commit(){F.throwNotImplemented("committing the transaction")}createLob(){F.throwNotImplemented("creating a temporary LOB")}execute(){F.throwNotImplemented("executing a SQL statement")}executeMany(){F.throwNotImplemented("executing a SQL statement multiple times")}getCallTimeout(){F.throwNotImplemented("getting call timeout")}getCurrentSchema(){F.throwNotImplemented("getting current schema")}getDbDomain(){F.throwNotImplemented("getting db domain")}getDbName(){F.throwNotImplemented("getting db name")}getDbObjectClass(){F.throwNotImplemented("getting a database object class")}getExternalName(){F.throwNotImplemented("getting the external name")}getInstanceName(){F.throwNotImplemented("getting the Oracle Database instance name.")}getInternalName(){F.throwNotImplemented("getting the internal name")}getMaxOpenCursors(){F.throwNotImplemented("getting max open cursors")}getOracleServerVersion(){F.throwNotImplemented("getting Oracle Server version number")}getOracleServerVersionString(){F.throwNotImplemented("getting Oracle Server version as a string")}getQueue(){F.throwNotImplemented("getting a queue")}getServiceName(){F.throwNotImplemented("getting service name")}getSodaDatabase(){F.throwNotImplemented("getting a SODA database")}getStatementInfo(){F.throwNotImplemented("getting information about a statement")}getStmtCacheSize(){F.throwNotImplemented("getting the statement cache size")}getTag(){F.throwNotImplemented("getting the tag for the connection")}getTransactionInProgress(){F.throwNotImplemented("getting the status of an active transaction on the connection")}getWarning(){F.throwNotImplemented("getting information about warning")}isHealthy(){F.throwNotImplemented("getting the health of the connection")}ping(){F.throwNotImplemented("sending a ping to the database")}rollback(){F.throwNotImplemented("rolling back a transaction")}setAction(){F.throwNotImplemented("setting end-to-end attribute 'action'")}setCallTimeout(){F.throwNotImplemented("setting call timeout")}setClientId(){F.throwNotImplemented("setting end-to-end attribute 'clientId'")}setClientInfo(){F.throwNotImplemented("setting end-to-end attribute 'clientInfo'")}setCurrentSchema(){F.throwNotImplemented("setting the current schema")}setDbOp(){F.throwNotImplemented("setting end-to-end attribute 'dbOp'")}setECID(){F.throwNotImplemented("setting end-to-end attribute 'ecid'")}setExternalName(){F.throwNotImplemented("setting the external name")}setInternalName(){F.throwNotImplemented("setting the internal name")}setStmtCacheSize(){F.throwNotImplemented("setting the size of the statement cache")}setModule(){F.throwNotImplemented("setting end-to-end attribute 'module'")}setTag(){F.throwNotImplemented("setting the tag for the connection")}shutdown(){F.throwNotImplemented("shutting down the database instance")}startup(){F.throwNotImplemented("starting up the database instance")}subscribe(){F.throwNotImplemented("subscribing to events in the database")}tpcBegin(){F.throwNotImplemented("starting a two-phase transaction")}tpcCommit(){F.throwNotImplemented("committing a two-phase transaction")}tpcEnd(){F.throwNotImplemented("ending a two-phase transaction")}tpcForget(){F.throwNotImplemented("forgetting a two-phase transaction")}tpcPrepare(){F.throwNotImplemented("preparing a two-phase transaction")}tpcRollback(){F.throwNotImplemented("rolling back a two-phase transaction")}unsubscribe(){F.throwNotImplemented("unsubscribing from events")}};T(io,"ConnectionImpl");var ro=io;Lh.exports=ro});var _o=R((EO,yh)=>{"use strict";var Ud=xr(),es=Y(),oo=class oo{_getConnImpl(){let e=this._parentObj;for(;!(e instanceof Ud);)e=e._parentObj;return e}close(){es.throwNotImplemented("closing a LOB")}fileExists(){es.throwNotImplemented("check if BFILE exists")}getData(){es.throwNotImplemented("getting all of the data from a LOB")}getDirFileName(){es.throwNotImplemented("getting directory and filename of LOB(BFILE)")}read(){es.throwNotImplemented("reading from a LOB")}setDirFileName(){es.throwNotImplemented("setting directory and filename of LOB(BFILE)")}write(){es.throwNotImplemented("writing to a LOB")}};T(oo,"LobImpl");var no=oo;yh.exports=no});var co=R((hO,wh)=>{"use strict";var Be=Y(),Bh=Le(),To=class To{async _accessTokenHandler(e,t,s,r){let n;try{let _=e(s,r);_ instanceof Promise&&(_=await _),Bh.isTokenValid(_)||Be.throwErr(Be.ERR_TOKEN_HAS_EXPIRED),typeof _=="object"&&_.privateKey!==void 0&&(_.privateKey=Bh.denormalizePrivateKey(_.privateKey)),n=_}finally{this.returnAccessToken(t,n)}}close(){Be.throwNotImplemented("closing the pool")}create(){Be.throwNotImplemented("creating the pool")}getConnection(){Be.throwNotImplemented("getting a connection from the pool")}getConnectionsInUse(){Be.throwNotImplemented("getting num connection in use")}getConnectionsOpen(){Be.throwNotImplemented("getting num connection open")}getPoolIncrement(){Be.throwNotImplemented("getting the pool increment")}getPoolMax(){Be.throwNotImplemented("getting the pool max")}getPoolMaxPerShard(){Be.throwNotImplemented("getting the pool max per shard")}getPoolMin(){Be.throwNotImplemented("getting the pool min")}getPoolPingInterval(){Be.throwNotImplemented("getting the pool ping interval")}getPoolPingTimeout(){Be.throwNotImplemented("getting the pool ping Timeout")}getPoolTimeout(){Be.throwNotImplemented("getting the pool timeout")}getStmtCacheSize(){Be.throwNotImplemented("getting the pool statement cache size")}getSodaMetaDataCache(){Be.throwNotImplemented("getting the SODA metadata cache flag")}reconfigure(){Be.throwNotImplemented("reconfiguring the pool")}setAccessToken(){Be.throwNotImplemented("sets the access token")}};T(To,"PoolImpl");var ao=To;wh.exports=ao});var ho=R((SO,Yh)=>{"use strict";var Md=Y(),lo=class lo{constructor(){this._featureFlags={},this._featureFlags.oldJsonColumnAsObj=!1}get oldJsonColumnAsObj(){return this._featureFlags.oldJsonColumnAsObj}set oldJsonColumnAsObj(e){Md.assertPropValue(typeof e=="boolean","oldJsonColumnAsObj"),this._featureFlags.oldJsonColumnAsObj=e}};T(lo,"Future");var Eo=lo;Yh.exports=new Eo});var ts=R((AO,Mh)=>{"use strict";var{Buffer:No}=require("buffer"),{Duplex:Vd}=require("stream"),Uh=Ye(),de=Y(),br=Le(),kr=Fe(),So=class So extends Vd{constructor(){super({decodeStrings:!1}),this.offset=1,this._isActive=!1,this.once("finish",function(){this._autoCloseLob&&this.destroy()})}_checkIsBfile(){this.type!==kr.DB_TYPE_BFILE&&de.throwErr(de.ERR_OPERATION_ONLY_SUPPORTED_ON_BFILE)}_checkNotBfile(){this.type===kr.DB_TYPE_BFILE&&de.throwErr(de.ERR_OPERATION_NOT_SUPPORTED_ON_BFILE)}async _destroy(e,t){if(e&&e.message.startsWith("NJS-003:")&&delete this._impl,this._impl){let s=this._impl;delete this._impl;try{await s.close()}catch(r){t(r);return}}t(e)}async _read(){try{let e=await this._serializedRead(this.offset);e?(this.offset+=e.length,this.push(e)):(this.push(null),this._autoCloseLob&&this.destroy())}catch(e){throw this._autoCloseLob&&this.destroy(e),e}}async _readData(e){de.assert(this._impl,de.ERR_INVALID_LOB);try{return await this._impl.read(e)}catch(t){throw de.transformErr(t,this._readData)}}_setup(e,t){this._impl=e,this.type!==kr.DB_TYPE_BFILE&&(this._chunkSize=e.getChunkSize()),this._pieceSize=e.getPieceSize(),this._length=e.getLength(),this._type=e.getType(),typeof this._type=="number"&&(this._type=kr.getTypeByNum(this._type)),this._autoCloseLob=t}async _write(e,t,s){this.type==Uh.DB_TYPE_BLOB&&!No.isBuffer(e)?e=No.from(e):this.type==Uh.DB_TYPE_CLOB&&No.isBuffer(e)&&(e=e.toString());try{await this._serializedWrite(this.offset,e)}catch(r){this._autoCloseLob&&this.destroy(r),s(r);return}this.offset+=e.length,s(null)}async _writeData(e,t){de.assert(this._impl,de.ERR_INVALID_LOB);try{await this._impl.write(e,t)}catch(s){throw de.transformErr(s,this._writeData)}}get chunkSize(){return this._checkNotBfile(),this._chunkSize}async close(){if(de.assertArgCount(arguments,0,0),this._impl){let e=this._impl;delete this._impl;try{await e.close(),this.emit("close")}catch(t){this.destroy(t)}}}async getData(e,t){return de.assertArgCount(arguments,0,2),e===void 0?e=1:de.assertParamValue(Number.isInteger(e)&&e>0,1),t===void 0?t=0:de.assertParamValue(Number.isInteger(t)&&t>0,2),de.assert(this._impl,de.ERR_INVALID_LOB),await this._impl.getData(e,t)}getDirFileName(){return this._checkIsBfile(),this._impl.getDirFileName()}setDirFileName(e){this._checkIsBfile(),de.assertArgCount(arguments,1,1),de.assertParamValue(br.isObject(e),1),this._impl.setDirFileName(e)}async fileExists(){return this._checkIsBfile(),await this._impl.fileExists()}get length(){return this._length}get pieceSize(){return this._pieceSize}set pieceSize(e){de.assertPropValue(Number.isInteger(e)&&e>=0,"pieceSize"),de.assert(this._impl,de.ERR_INVALID_LOB),this._impl.setPieceSize(e),this._pieceSize=e}get type(){return this._type}};T(So,"Lob");var Ht=So;br.wrapFns(Ht.prototype,de.ERR_BUSY_LOB,"close","fileExists","getData");Ht.prototype._serializedRead=br.serialize(Ht.prototype._readData);Ht.prototype._serializedWrite=br.serialize(Ht.prototype._writeData);Mh.exports=Ht});var Hr=R((dO,Fh)=>{"use strict";var{BaseBuffer:Fd,GrowableBuffer:po}=fs(),{Buffer:ms}=require("buffer"),w=vs(),vt=Y(),Gr=Fe(),xd=require("util"),Vh=Br(),kd=Le(),Ro=class Ro extends Fd{_decodeContainerNode(e){let t,s,r,n=this.pos-this.treeSegPos-1,_=this._getNumChildren(e),a=(e&64)===0;if(_===void 0){let c=this._getOffset(e);s=this.pos,this.pos=this.treeSegPos+c;let E=this.readUInt8();_=this._getNumChildren(E),t=a?{}:new Array(_),r=this.pos}else a?(t={},r=this.pos,s=this.pos+this.fieldIdLength*_):(t=new Array(_),s=this.pos);for(let c=0;c<_;c++){let E;if(a){let N;this.fieldIdLength===1?N=this.buf[r]:this.fieldIdLength==2?N=this.buf.readUInt16BE(r):N=this.buf.readUInt32BE(r),E=this.fieldNames[N-1],r+=this.fieldIdLength}this.pos=s;let l=this._getOffset(e);this.relativeOffsets&&(l+=n),s=this.pos,this.pos=this.treeSegPos+l,a?t[E]=this._decodeNode():t[c]=this._decodeNode()}return t}_decodeNode(){let e=this.readUInt8();if(e&128)return this._decodeContainerNode(e);if(e===w.TNS_JSON_TYPE_NULL)return null;if(e===w.TNS_JSON_TYPE_TRUE)return!0;if(e===w.TNS_JSON_TYPE_FALSE)return!1;if(e===w.TNS_JSON_TYPE_DATE||e===w.TNS_JSON_TYPE_TIMESTAMP7)return this.parseOracleDate(this.readBytes(7));if(e===w.TNS_JSON_TYPE_TIMESTAMP)return this.parseOracleDate(this.readBytes(11));if(e===w.TNS_JSON_TYPE_TIMESTAMP_TZ)return this.parseOracleDate(this.readBytes(13));if(e===w.TNS_JSON_TYPE_BINARY_FLOAT)return this.parseBinaryFloat(this.readBytes(4));if(e===w.TNS_JSON_TYPE_BINARY_DOUBLE)return this.parseBinaryDouble(this.readBytes(8));if(e===w.TNS_JSON_TYPE_STRING_LENGTH_UINT8)return this.readBytes(this.readUInt8()).toString();if(e===w.TNS_JSON_TYPE_STRING_LENGTH_UINT16)return this.readBytes(this.readUInt16BE()).toString();if(e===w.TNS_JSON_TYPE_STRING_LENGTH_UINT32)return this.readBytes(this.readUInt32BE()).toString();if(e===w.TNS_JSON_TYPE_NUMBER_LENGTH_UINT8)return parseFloat(this.readOracleNumber());if(e===w.TNS_JSON_TYPE_ID){let s=this.readBytes(this.readUInt8()),r=new Gr.JsonId(s.length);return s.copy(r),r}else{if(e===w.TNS_JSON_TYPE_BINARY_LENGTH_UINT16)return ms.from(this.readBytes(this.readUInt16BE()));if(e===w.TNS_JSON_TYPE_BINARY_LENGTH_UINT32)return ms.from(this.readBytes(this.readUInt32BE()));if(e===w.TNS_JSON_TYPE_EXTENDED&&(e=this.readUInt8(),e===w.TNS_JSON_TYPE_VECTOR)){let s=this.readBytes(this.readUInt32BE());return new Vh.VectorDecoder(s).decode()}}let t=e&240;if(t===32||t===96){let s=e&15;return parseFloat(this.parseOracleNumber(this.readBytes(s+1)))}else if(t===64||t===80){let s=e&15;return parseFloat(this.parseOracleNumber(this.readBytes(s)))}else if(!(e&224))return e===0?"":this.readBytes(e).toString();vt.throwErr(vt.ERR_UNSUPPORTED_DATA_TYPE_IN_JSON,e)}_getNumChildren(e){let t=e&24;if(t===0)return this.readUInt8();if(t===8)return this.readUInt16BE();if(t===16)return this.readUInt32BE()}_getOffset(e){return e&32?this.readUInt32BE():this.readUInt16BE()}_getFieldNames(e,t,s,r,n){this.skipBytes(t*n);let _=this.pos;this.skipBytes(t*s);let a=this.readBytes(r),c=this.pos;this.pos=_;let E;for(let l=e;l<e+t;l++){s===2?E=this.readUInt16BE():E=this.readUInt32BE();let N;n===1?N=a.readUInt8(E):N=a.readUInt16BE(E),this.fieldNames[l]=a.subarray(E+n,E+N+n).toString()}this.pos=c}decode(){let e=this.readBytes(3);(e[0]!==w.TNS_JSON_MAGIC_BYTE_1||e[1]!==w.TNS_JSON_MAGIC_BYTE_2||e[2]!==w.TNS_JSON_MAGIC_BYTE_3)&&vt.throwErr(vt.ERR_UNEXPECTED_DATA,e.toString("hex"));let t=this.readUInt8();t!==w.TNS_JSON_VERSION_MAX_FNAME_255&&t!==w.TNS_JSON_VERSION_MAX_FNAME_65535&&vt.throwErr(vt.ERR_OSON_VERSION_NOT_SUPPORTED,t);let s=this.readUInt16BE();if(this.relativeOffsets=s&w.TNS_JSON_FLAG_REL_OFFSET_MODE,s&w.TNS_JSON_FLAG_IS_SCALAR)return s&w.TNS_JSON_FLAG_TREE_SEG_UINT32?this.skipBytes(4):this.skipBytes(2),this._decodeNode();let r;s&w.TNS_JSON_FLAG_NUM_FNAMES_UINT32?(r=this.readUInt32BE(),this.fieldIdLength=4):s&w.TNS_JSON_FLAG_NUM_FNAMES_UINT16?(r=this.readUInt16BE(),this.fieldIdLength=2):(r=this.readUInt8(),this.fieldIdLength=1);let n,_;s&w.TNS_JSON_FLAG_FNAMES_SEG_UINT32?(n=4,_=this.readUInt32BE()):(n=2,_=this.readUInt16BE());let a,c,E=0;return t===w.TNS_JSON_VERSION_MAX_FNAME_65535&&(this.readUInt16BE()&w.TNS_JSON_FLAG_SEC_FNAMES_SEG_UINT16?a=2:a=4,E=this.readUInt32BE(),c=this.readUInt32BE()),s&w.TNS_JSON_FLAG_TREE_SEG_UINT32?this.skipBytes(4):this.skipBytes(2),this.skipBytes(2),this.fieldNames=new Array(r+E),r>0&&this._getFieldNames(0,r,n,_,1),E>0&&this._getFieldNames(r,E,a,c,2),this.treeSegPos=this.pos,this._decodeNode()}};T(Ro,"OsonDecoder");var uo=Ro,mo=class mo{constructor(e,t){this.name=e,this.nameBytes=ms.from(e),this.nameBytes.length>t&&vt.throwErr(vt.ERR_OSON_FIELD_NAME_LIMITATION,t);let s=0x811C9DC5n,r=16777619n,n=0xffffffffn;this.hashId=s;for(let _=0;_<this.nameBytes.length;_++){let a=BigInt(this.nameBytes[_]);this.hashId=(this.hashId^a)*r&n}this.hashId=Number(this.hashId)&255}};T(mo,"OsonFieldName");var Ao=mo,Io=class Io extends po{constructor(){super(),this.fieldNames=[]}addName(e){e.offset=this.pos,e.nameBytes.length<=255?this.writeUInt8(e.nameBytes.length):this.writeUInt16BE(e.nameBytes.length),this.writeBytes(e.nameBytes),this.fieldNames.push(e)}_processFieldNames(e){this.fieldNames.sort((t,s)=>t.hashId<s.hashId?-1:t.hashId>s.hashId?1:t.nameBytes.length<s.nameBytes.length?-1:t.nameBytes.length>s.nameBytes.length?1:t.name<s.name?-1:t.name>s.name?1:0);for(let t=0;t<this.fieldNames.length;t++)this.fieldNames[t].fieldId=e+t+1;this.fieldNames.length<256?this.fieldIdSize=1:this.fieldNames.length<65536?this.fieldIdSize=2:this.fieldIdSize=4}};T(Io,"OsonFieldNamesSegment");var qr=Io,Do=class Do extends po{_encodeArray(e,t){this._encodeContainer(w.TNS_JSON_TYPE_ARRAY,e.length);let s=e.length*4,n=this.reserveBytes(s);for(let _ of e)this.buf.writeUInt32BE(this.pos,n),n+=4,this.encodeNode(_,t)}_encodeContainer(e,t){e|=32,t>65535?e|=16:t>255&&(e|=8),this.writeUInt8(e),t<256?this.writeUInt8(t):t<65536?this.writeUInt16BE(t):this.writeUInt32BE(t)}_encodeObject(e,t){let s=e.values.length;this._encodeContainer(w.TNS_JSON_TYPE_OBJECT,s);let r=this.pos,n=this.pos+s*t.fieldIdSize,_=n+s*4;this.reserveBytes(_-this.pos);for(let a=0;a<e.fields.length;a++){let c=t.fieldNamesMap.get(e.fields[a]);t.fieldIdSize==1?this.buf[r]=c.fieldId:t.fieldIdSize==2?this.buf.writeUInt16BE(c.fieldId,r):this.buf.writeUInt32BE(c.fieldId,r),this.buf.writeUInt32BE(this.pos,n),r+=t.fieldIdSize,n+=4,this.encodeNode(e.values[a],t)}}encodeNode(e,t){if(e==null)this.writeUInt8(w.TNS_JSON_TYPE_NULL);else if(typeof e=="boolean")e?this.writeUInt8(w.TNS_JSON_TYPE_TRUE):this.writeUInt8(w.TNS_JSON_TYPE_FALSE);else if(typeof e=="number")this.writeUInt8(w.TNS_JSON_TYPE_NUMBER_LENGTH_UINT8),this.writeOracleNumber(e.toString());else if(typeof e=="string"){let s=ms.from(e);s.length<256?(this.writeUInt8(w.TNS_JSON_TYPE_STRING_LENGTH_UINT8),this.writeUInt8(s.length)):s.length<65536?(this.writeUInt8(w.TNS_JSON_TYPE_STRING_LENGTH_UINT16),this.writeUInt16BE(s.length)):(this.writeUInt8(w.TNS_JSON_TYPE_STRING_LENGTH_UINT32),this.writeUInt32BE(s.length)),s.length>0&&this.writeBytes(s)}else if(xd.types.isDate(e))e.getUTCMilliseconds()===0?(this.writeUInt8(w.TNS_JSON_TYPE_TIMESTAMP7),this.writeOracleDate(e,Gr.DB_TYPE_DATE,!1)):(this.writeUInt8(w.TNS_JSON_TYPE_TIMESTAMP),this.writeOracleDate(e,Gr.DB_TYPE_TIMESTAMP,!1));else if(ms.isBuffer(e))e.length<65536?(this.writeUInt8(w.TNS_JSON_TYPE_BINARY_LENGTH_UINT16),this.writeUInt16BE(e.length)):(this.writeUInt8(w.TNS_JSON_TYPE_BINARY_LENGTH_UINT32),this.writeUInt32BE(e.length)),this.writeBytes(e);else if(Array.isArray(e))this._encodeArray(e,t);else if(kd.isVectorValue(e)){this.writeUInt8(w.TNS_JSON_TYPE_EXTENDED),this.writeUInt8(w.TNS_JSON_TYPE_VECTOR);let r=new Vh.VectorEncoder().encode(e);this.writeUInt32BE(r.length),this.writeBytes(r)}else e instanceof Gr.JsonId?(this.writeUInt8(w.TNS_JSON_TYPE_ID),this.writeUInt8(e.length),this.writeBytes(ms.from(e.buffer))):this._encodeObject(e,t)}};T(Do,"OsonTreeSegment");var fo=Do,Co=class Co extends po{_addFieldName(e){let t=new Ao(e,this.maxFieldNameSize);this.fieldNamesMap.set(e,t),t.nameBytes.length<=255?this.shortFieldNamesSeg.addName(t):(this.longFieldNamesSeg||(this.longFieldNamesSeg=new qr),this.longFieldNamesSeg.addName(t))}_examineNode(e){if(Array.isArray(e))for(let t of e)this._examineNode(t);else if(e&&Array.isArray(e.fields))for(let t=0;t<e.fields.length;t++){let s=e.fields[t],r=e.values[t];this.fieldNamesMap.has(s)||this._addFieldName(s),this._examineNode(r)}}_writeExtendedHeader(){if(this.fieldIdSize===1?this.writeUInt8(this.shortFieldNamesSeg.fieldNames.length):this.fieldIdSize===2?this.writeUInt16BE(this.shortFieldNamesSeg.fieldNames.length):this.writeUInt32BE(this.shortFieldNamesSeg.fieldNames.length),this.shortFieldNamesSeg.pos<65536?this.writeUInt16BE(this.shortFieldNamesSeg.pos):this.writeUInt32BE(this.shortFieldNamesSeg.pos),this.longFieldNamesSeg){let e=0;this.longFieldNamesSeg.pos<65536&&(e=w.TNS_JSON_FLAG_SEC_FNAMES_SEG_UINT16),this.writeUInt16BE(e),this.writeUInt32BE(this.longFieldNamesSeg.fieldNames.length),this.writeUInt32BE(this.longFieldNamesSeg.pos)}}_writeFieldNamesSeg(e){for(let t of e.fieldNames)t.nameBytes.length<=255?this.writeUInt8(t.hashId):this.writeUInt16BE(t.hashId);for(let t of e.fieldNames)e.pos<65536?this.writeUInt16BE(t.offset):this.writeUInt32BE(t.offset);e.pos>0&&this.writeBytes(e.buf.subarray(0,e.pos))}encode(e,t){this.maxFieldNameSize=t;let s=w.TNS_JSON_FLAG_INLINE_LEAF;if(Array.isArray(e)||e&&Array.isArray(e.fields)){this.fieldNamesMap=new Map,this.shortFieldNamesSeg=new qr,this._examineNode(e);let n=0;this.shortFieldNamesSeg&&(this.shortFieldNamesSeg._processFieldNames(0),n+=this.shortFieldNamesSeg.fieldNames.length),this.longFieldNamesSeg&&(this.longFieldNamesSeg._processFieldNames(n),n+=this.longFieldNamesSeg.fieldNames.length),s|=w.TNS_JSON_FLAG_HASH_ID_UINT8|w.TNS_JSON_FLAG_TINY_NODES_STAT,n>65535?(s|=w.TNS_JSON_FLAG_NUM_FNAMES_UINT32,this.fieldIdSize=4):n>255?(s|=w.TNS_JSON_FLAG_NUM_FNAMES_UINT16,this.fieldIdSize=2):this.fieldIdSize=1,this.shortFieldNamesSeg.pos>65535&&(s|=w.TNS_JSON_FLAG_FNAMES_SEG_UINT32)}else s|=w.TNS_JSON_FLAG_IS_SCALAR;let r=new fo;return r.encodeNode(e,this),r.pos>65535&&(s|=w.TNS_JSON_FLAG_TREE_SEG_UINT32),this.writeUInt8(w.TNS_JSON_MAGIC_BYTE_1),this.writeUInt8(w.TNS_JSON_MAGIC_BYTE_2),this.writeUInt8(w.TNS_JSON_MAGIC_BYTE_3),this.longFieldNamesSeg?this.writeUInt8(w.TNS_JSON_VERSION_MAX_FNAME_65535):this.writeUInt8(w.TNS_JSON_VERSION_MAX_FNAME_255),this.writeUInt16BE(s),this.shortFieldNamesSeg&&this._writeExtendedHeader(),r.pos<65536?this.writeUInt16BE(r.pos):this.writeUInt32BE(r.pos),this.shortFieldNamesSeg&&(this.writeUInt16BE(0),this._writeFieldNamesSeg(this.shortFieldNamesSeg),this.longFieldNamesSeg&&this._writeFieldNamesSeg(this.longFieldNamesSeg)),this.writeBytes(r.buf.subarray(0,r.pos)),this.buf.subarray(0,this.pos)}};T(Co,"OsonEncoder");var Po=Co;Fh.exports={OsonDecoder:uo,OsonEncoder:Po}});var Lo=R((pO,bh)=>{"use strict";var bd=Ye(),St=Y(),Gd=Le(),xh=nt(),qd=ho(),Ie=Fe(),kh=ts(),Hd=Hr(),go=class go{_determineFetchType(e,t){if(delete e.fetchType,delete e.converter,t.fetchTypeHandler){let n=t.fetchTypeHandler(e);n!==void 0&&(St.assert(typeof n=="object",St.ERR_FETCH_TYPE_HANDLER_RETURN_VALUE),n.type!==void 0&&St.assert(n.type instanceof Ie.DbType,St.ERR_FETCH_TYPE_HANDLER_TYPE),n.converter!==void 0&&St.assert(typeof n.converter=="function",St.ERR_FETCH_TYPE_HANDLER_CONVERTER),e.fetchType=n.type,e.converter=n.converter)}if(e.fetchType||(t.fetchTypeMap&&t.fetchTypeMap.has(e.name)?(e.fetchType=t.fetchTypeMap.get(e.name),e.fetchType===bd.DEFAULT&&(e.fetchType=Ie.DB_TYPE_FETCH_TYPE_MAP.get(e.dbType))):e.fetchType=xh.fetchTypeMap.get(e.dbType)),e.fetchType!==e.dbType){let n=Ie.DB_TYPE_CONVERSION_MAP.get(e.dbType),_=n&&n.get(e.fetchType);_||St.throwErr(St.ERR_UNSUPPORTED_CONVERSION,e.dbType.name,e.fetchType.name),e.fetchType=_}let s,r=e.converter;if(e.dbType!==Ie.DB_TYPE_JSON&&qd.oldJsonColumnAsObj&&r===void 0){let n;e.isOson?(n=T(async function(_){if(!_)return _;let a=_;return _ instanceof kh&&(a=await _.getData()),new Hd.OsonDecoder(a).decode()},"outConverter"),s=n):e.isJson&&(n=T(async function(_){if(!_)return _;let a=_;return _ instanceof kh&&(a=await _.getData()),a instanceof Buffer&&(a=a.toString()),a=JSON.parse(a),a},"outConverter"),s=n)}if(xh.thin&&(e.dbType===Ie.DB_TYPE_NUMBER&&e.fetchType===Ie.DB_TYPE_NUMBER?s=T(n=>n===null?null:parseFloat(n),"converter"):e.fetchType===Ie.DB_TYPE_VARCHAR?e.dbType===Ie.DB_TYPE_BINARY_DOUBLE||e.dbType===Ie.DB_TYPE_BINARY_FLOAT||e.dbType===Ie.DB_TYPE_DATE||e.dbType===Ie.DB_TYPE_TIMESTAMP||e.dbType===Ie.DB_TYPE_TIMESTAMP_LTZ||e.dbType===Ie.DB_TYPE_TIMESTAMP_TZ?s=T(n=>n===null?null:n.toString(),"converter"):e.dbType===Ie.DB_TYPE_RAW&&(s=T(n=>n===null?null:n.toString("hex").toUpperCase(),"converter")):e.dbType===Ie.DB_TYPE_XMLTYPE&&(s=T(async function(_){return!_||typeof _=="string"?_:await _.getData()},"xmlConverter")),r&&s)){let n=s;s=T(_=>r(n(_)),"converter")}s&&(e.converter=s)}_getConnImpl(){return this._parentObj}_setup(e,t){this._parentObj=e.connection._impl,this.metaData=t,this.lobIndices=[],this.dbObjectIndices=[],this.nestedCursorIndices=[],this.converterIndices=[],this.outFormat=e.outFormat,this.fetchArraySize=e.fetchArraySize,this.dbObjectAsPojo=e.dbObjectAsPojo,this.maxRows=e.maxRows;let s=new Map;for(let r=0;r<t.length;r++){let n=t[r].name;s.has(n)||s.set(n,r)}for(let r=0;r<t.length;r++){let n=t[r];if(n.dbTypeClass){let a=e.connection._getDbObjectClass(n.dbTypeClass);n.dbTypeClass=a}Gd.addTypeProperties(n,"dbType"),this._determineFetchType(n,e),n.fetchType===Ie.DB_TYPE_CURSOR?this.nestedCursorIndices.push(r):n.fetchType===Ie.DB_TYPE_CLOB||n.fetchType===Ie.DB_TYPE_NCLOB||n.fetchType===Ie.DB_TYPE_BLOB||n.fetchType===Ie.DB_TYPE_BFILE?this.lobIndices.push(r):n.fetchType===Ie.DB_TYPE_OBJECT&&this.dbObjectIndices.push(r),n.converter&&this.converterIndices.push(r);let _=n.name;if(s.get(_)!==r){let a=0;for(;s.has(_);)a=a+1,_=`${n.name}_${a}`;s.set(_,r),n.name=_}}}close(){St.throwNotImplemented("closing a result set")}getRows(){St.throwNotImplemented("getting rows")}async _getAllRows(){let t=[];for(;;){let s=await this.getRows(100,{});if(s&&(await this._processRows(s,!1),t=t.concat(s)),s.length<100)break}return t}};T(go,"ResultSetImpl");var Oo=go;bh.exports=Oo});var qh=R((mO,Gh)=>{"use strict";var Je=Y(),Bo=class Bo{_getConnImpl(){return this._database._connection}createIndex(){Je.throwNotImplemented("creating an index on a SODA collection")}drop(){Je.throwNotImplemented("dropping a SODA collection")}dropIndex(){Je.throwNotImplemented("dropping an index on a SODA collection")}find(){Je.throwNotImplemented("creating a SODA operation")}getDataGuide(){Je.throwNotImplemented("getting the data guide for the collection")}getMetaData(){Je.throwNotImplemented("getting the metadata for the collection")}getName(){Je.throwNotImplemented("getting the name of the collection")}insertMany(){Je.throwNotImplemented("inserting multiple docs into a collection")}insertManyAndGet(){Je.throwNotImplemented("insert/return many docs in a collection")}insertOne(){Je.throwNotImplemented("inserting a single doc into a collection")}insertOneAndGet(){Je.throwNotImplemented("insert/return a single doc in a collection")}save(){Je.throwNotImplemented("saving a single doc in a collection")}saveAndGet(){Je.throwNotImplemented("saving a single doc in a collection")}truncate(){Je.throwNotImplemented("removing all docs from a collection")}};T(Bo,"SodaCollectionImpl");var yo=Bo;Gh.exports=yo});var vh=R((DO,Hh)=>{"use strict";var vr=Y(),Yo=class Yo{_getConnImpl(){return this._connection}createCollection(){vr.throwNotImplemented("creating a SODA collection")}createDocument(){vr.throwNotImplemented("creating a SODA document")}getCollectionNames(){vr.throwNotImplemented("getting a list of SODA collection names")}openCollection(){vr.throwNotImplemented("getting a list of SODA collection names")}};T(Yo,"SodaDatabaseImpl");var wo=Yo;Hh.exports=wo});var Xh=R((OO,Wh)=>{"use strict";var Kh=Y(),Mo=class Mo{_getConnImpl(){return this._operation._getConnImpl()}close(){Kh.throwNotImplemented("closing a SODA document cursor")}getNext(){Kh.throwNotImplemented("getting a document from a SODA doc cursor")}};T(Mo,"SodaDocCursorImpl");var Uo=Mo;Wh.exports=Uo});var Qh=R((LO,zh)=>{"use strict";var ss=Y(),Fo=class Fo{getContentAsBuffer(){ss.throwNotImplemented("getting doc content as a buffer")}getContentAsString(){ss.throwNotImplemented("getting doc content as a string")}getCreatedOn(){ss.throwNotImplemented("getting the created date of a document")}getKey(){ss.throwNotImplemented("getting the key of a document")}getLastModified(){ss.throwNotImplemented("getting the last modified date of a doc")}getMediaType(){ss.throwNotImplemented("getting the media type of a document")}getVersion(){ss.throwNotImplemented("getting the version of a document")}};T(Fo,"SodaDocumentImpl");var Vo=Fo;zh.exports=Vo});var jh=R((BO,Jh)=>{"use strict";var rs=Y(),ko=class ko{_getConnImpl(){return this._collection._database._connection}count(){rs.throwNotImplemented("getting a count of documents")}getCursor(){rs.throwNotImplemented("getting a cursor for documents")}getDocuments(){rs.throwNotImplemented("getting a cursor for documents")}getOne(){rs.throwNotImplemented("getting a single document")}remove(){rs.throwNotImplemented("removing documents from a collection")}replaceOne(){rs.throwNotImplemented("replacing a single document")}replaceOneAndGet(){rs.throwNotImplemented("replacing/returning a single document")}};T(ko,"SodaOperationImpl");var xo=ko;Jh.exports=xo});var Is=R((YO,Zh)=>{"use strict";var vd=ph(),Kd=mh(),Wd=Dh(),Xd=Oh(),zd=Fr(),Qd=xr(),Jd=_o(),jd=co(),Zd=Lo(),$d=qh(),eP=vh(),tP=Xh(),sP=Qh(),rP=jh();Zh.exports={AqDeqOptionsImpl:vd,AqEnqOptionsImpl:Kd,AqMessageImpl:Wd,AqQueueImpl:Xd,DbObjectImpl:zd,ConnectionImpl:Qd,LobImpl:Jd,PoolImpl:jd,ResultSetImpl:Zd,SodaCollectionImpl:$d,SodaDatabaseImpl:eP,SodaDocCursorImpl:tP,SodaDocumentImpl:sP,SodaOperationImpl:rP}});var qo=R((UO,$h)=>{"use strict";var{Buffer:iP}=require("buffer"),Lt=Ye(),yt=Y(),Go=class Go{get condition(){return this._impl.getCondition()}set condition(e){yt.assertPropValue(typeof e=="string","condition"),this._impl.setCondition(e)}get consumerName(){return this._impl.getConsumerName()}set consumerName(e){yt.assertPropValue(typeof e=="string","consumerName"),this._impl.setConsumerName(e)}get correlation(){return this._impl.getCorrelation()}set correlation(e){yt.assertPropValue(typeof e=="string","correlation"),this._impl.setCorrelation(e)}get mode(){return this._impl.getMode()}set mode(e){yt.assertPropValue(e===Lt.AQ_DEQ_MODE_BROWSE||e===Lt.AQ_DEQ_MODE_LOCKED||e===Lt.AQ_DEQ_MODE_REMOVE||e===Lt.AQ_DEQ_MODE_REMOVE_NO_DATA,"mode"),this._impl.setMode(e)}get msgId(){return this._impl.getMsgId()}set msgId(e){yt.assertPropValue(iP.isBuffer(e),"msgId"),this._impl.setMsgId(e)}get navigation(){return this._impl.getNavigation()}set navigation(e){yt.assertPropValue(e===Lt.AQ_DEQ_NAV_FIRST_MSG||e===Lt.AQ_DEQ_NAV_NEXT_TRANSACTION||e===Lt.AQ_DEQ_NAV_NEXT_MSG,"navigation"),this._impl.setNavigation(e)}get transformation(){return this._impl.getTransformation()}set transformation(e){yt.assertPropValue(typeof e=="string","transformation"),this._impl.setTransformation(e)}get visibility(){return this._impl.getVisibility()}set visibility(e){yt.assertPropValue(e===Lt.AQ_VISIBILITY_IMMEDIATE||e===Lt.AQ_VISIBILITY_ON_COMMIT,"visibility"),this._impl.setVisibility(e)}get wait(){return this._impl.getWait()}set wait(e){yt.assertPropValue(Number.isInteger(e)&&e>=0,"wait"),this._impl.setWait(e)}};T(Go,"AqDeqOptions");var bo=Go;$h.exports=bo});var Wo=R((VO,eN)=>{"use strict";var Ws=Ye(),Ho=Y(),Ko=class Ko{get deliveryMode(){return this._impl.getDeliveryMode()}set deliveryMode(e){Ho.assertPropValue(e===Ws.AQ_MSG_DELIV_MODE_PERSISTENT||e===Ws.AQ_MSG_DELIV_MODE_BUFFERED||e===Ws.AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED,"deliveryMode"),this._impl.setDeliveryMode(e)}get transformation(){return this._impl.getTransformation()}set transformation(e){Ho.assertPropValue(typeof e=="string","transformation"),this._impl.setTransformation(e)}get visibility(){return this._impl.getVisibility()}set visibility(e){Ho.assertPropValue(e===Ws.AQ_VISIBILITY_IMMEDIATE||e===Ws.AQ_VISIBILITY_ON_COMMIT,"visibility"),this._impl.setVisibility(e)}};T(Ko,"AqEnqOptions");var vo=Ko;eN.exports=vo});var Qo=R((xO,tN)=>{"use strict";var nP=Fr(),zo=class zo{get correlation(){return this._impl.getCorrelation()}get delay(){return this._impl.getDelay()}get deliveryMode(){return this._impl.getDeliveryMode()}get exceptionQueue(){return this._impl.getExceptionQueue()}get expiration(){return this._impl.getExpiration()}get msgId(){return this._impl.getMsgId()}get numAttempts(){return this._impl.getNumAttempts()}get originalMsgId(){return this._impl.getOriginalMsgId()}get payload(){let e=this._impl.getPayload();if(e instanceof nP){let t=Object.create(this._payloadTypeClass.prototype);return t._impl=e,t}return e}get priority(){return this._impl.getPriority()}get state(){return this._impl.getState()}};T(zo,"AqMessage");var Xo=zo;tN.exports=Xo});var Zo=R((bO,sN)=>{"use strict";var oP=require("process"),{Readable:_P}=require("stream"),jo=class jo extends _P{constructor(e){super({objectMode:!0}),this._fetching=!1,this._numRows=0,e&&oP.nextTick(()=>{this._open(e)})}async _destroy(e,t){if(this._resultSet){let s=this._resultSet;this._resultSet=null,this._fetching&&await new Promise(r=>this.once("_doneFetching",r));try{await s._impl.close()}catch(r){t(r);return}}t(e)}_open(e){this._resultSet=e,this.emit("open"),this.emit("metadata",e.metaData)}async _read(){if(!this._resultSet){this.once("open",this._read);return}try{this._fetching=!0,this._resultSet._allowGetRowCall=!0;let e=await this._resultSet.getRow();e?this.push(e):this.push(null)}catch(e){this.destroy(e)}finally{this._fetching=!1,this._resultSet?this._resultSet._allowGetRowCall=!1:this.emit("_doneFetching")}}};T(jo,"QueryStream");var Jo=jo;sN.exports=Jo});var Xr=R((qO,rN)=>{"use strict";var aP=Zo(),TP=Ds(),cP=Le(),EP=Ye(),lP=ts(),Pe=Y(),Wr=class Wr{constructor(){this._rowCache=[],this._processingStarted=!1,this._convertedToStream=!1,this._allowGetRowCall=!1,this._isActive=!1}async _getAllRows(){try{let e=this._impl.maxRows,t=this._impl.fetchArraySize,s=[];for(;;){e>0&&t>=e&&(t=e);let r=await this._getRows(t);if(r&&(await this._processRows(r,!0),s=s.concat(r)),r.length==e||r.length<t)break;e>0&&(e-=r.length)}return s}finally{await this._impl.close(),delete this._impl}}async _getRows(e){let t={};return this._impl.nestedCursorIndices.length>0&&(t={connection:this._connection,outFormat:this._impl.outFormat,fetchArraySize:this._impl.fetchArraySize,dbObjectAsPojo:this._impl.dbObjectAsPojo,maxRows:this._impl.maxRows,fetchTypeMap:this._impl.fetchTypeMap}),await this._impl.getRows(e,t)}async _processRows(e,t){for(let s of this._impl.nestedCursorIndices)for(let r=0;r<e.length;r++){let n=e[r][s];if(n){let _=new Wr;_._setup(this._connection,n),this._impl.metaData[s].metaData=n.metaData,t?e[r][s]=await _._getAllRows():e[r][s]=_}}for(let s of this._impl.lobIndices)for(let r=0;r<e.length;r++){let n=e[r][s];n&&(e[r][s]=new lP)._setup(n,!0)}for(let s of this._impl.dbObjectIndices){let r=this._impl.metaData[s].dbTypeClass;for(let n=0;n<e.length;n++){let _=e[n][s];if(_){let a=e[n][s]=Object.create(r.prototype);a._impl=_,this._impl.dbObjectAsPojo?e[n][s]=a._toPojo():a.isCollection&&(e[n][s]=new Proxy(a,TP._collectionProxyHandler))}}}for(let s of this._impl.converterIndices){let r=this._impl.metaData[s].converter;this._connection._impl._inProgress=!1;try{for(let n=0;n<e.length;n++){let _=r(e[n][s]);_ instanceof Promise&&(_=await _),e[n][s]=_}}finally{this._connection._impl._inProgress=!0}}if(this._impl.outFormat===EP.OUT_FORMAT_OBJECT)for(let s=0;s<e.length;s++){let r=e[s],n=e[s]={},_=this._impl.metaData;for(let a=0;a<_.length;a++)n[_[a].name]=r[a]}}_setup(e,t){this._connection=e,this._impl=t}async close(){Pe.assertArgCount(arguments,0,0),Pe.assert(this._impl&&this._connection._impl,Pe.ERR_INVALID_RS),this._convertedToStream&&Pe.throwErr(Pe.ERR_CANNOT_INVOKE_RS_METHODS),this._processingStarted=!0;let e=this._impl;delete this._impl,await e.close()}async getRow(){if(Pe.assertArgCount(arguments,0,0),Pe.assert(this._impl&&this._connection._impl,Pe.ERR_INVALID_RS),this._convertedToStream&&!this._allowGetRowCall&&Pe.throwErr(Pe.ERR_CANNOT_INVOKE_RS_METHODS),this._allowGetRowCall=!1,this._processingStarted=!0,this._rowCache.length==0){let e=await this._getRows(this._impl.fetchArraySize);await this._processRows(e,!1),this._rowCache=e}return this._rowCache.shift()}async getRows(e){let t;Pe.assertArgCount(arguments,0,1),Pe.assert(this._impl&&this._connection._impl,Pe.ERR_INVALID_RS),arguments.length==0?e=0:Pe.assertParamValue(Number.isInteger(e)&&e>=0,1),this._convertedToStream&&Pe.throwErr(Pe.ERR_CANNOT_INVOKE_RS_METHODS),this._processingStarted=!0;let s;if(e==0){s=this._rowCache;let r=this._impl.fetchArraySize;for(;;){let n=await this._getRows(r);if(n&&(await this._processRows(n,!1),s=s.concat(n)),n.length<r)break}return s}if(this._rowCache.length===0)s=await this._getRows(e),await this._processRows(s,!1);else if(t=e-this._rowCache.length,t<=0)s=this._rowCache.splice(0,e);else{let r=await this._getRows(t);await this._processRows(r,!1),s=this._rowCache.concat(r),this._rowCache=[]}return s}get metaData(){if(this._impl)return this._impl.metaData}toQueryStream(){return Pe.assertArgCount(arguments,0,0),this._processingStarted&&Pe.throwErr(Pe.ERR_CANNOT_CONVERT_RS_TO_STREAM),this._convertedToStream&&Pe.throwErr(Pe.ERR_RS_ALREADY_CONVERTED),this._convertedToStream=!0,new aP(this)}[Symbol.asyncIterator](){let e=this;return{async next(){let t=await e.getRow();return{value:t,done:t===void 0}},return(){return{done:!0}}}}};T(Wr,"ResultSet");var Kr=Wr;cP.wrapFns(Kr.prototype,Pe.ERR_BUSY_RS,"close","getRow","getRows");rN.exports=Kr});var Qr=R((vO,_N)=>{"use strict";var $o=Ds(),{Buffer:e_}=require("buffer"),hP=ts(),NP=Xr(),SP=Ye(),pe=Y(),iN=require("util"),ee=Fe(),nN=Le();function ut(i,e){if(i.type===void 0&&arguments.length>2)i.type=arguments[2];else{let t=!1;for(let s=2;s<arguments.length;s++)if(i.type===arguments[s]){t=!0;break}t||(i.attrName?pe.throwErr(pe.ERR_WRONG_VALUE_FOR_DBOBJECT_ATTR,i.attrName,i.fqn):i.fqn?pe.throwErr(pe.ERR_WRONG_VALUE_FOR_DBOBJECT_ELEM,i.fqn):i.isArray&&i.name?pe.throwErr(pe.ERR_INCOMPATIBLE_TYPE_ARRAY_BIND,e.pos,i.name):i.isArray?pe.throwErr(pe.ERR_INCOMPATIBLE_TYPE_ARRAY_INDEX_BIND,e.pos,i.pos):pe.throwErr(pe.ERR_BIND_VALUE_AND_TYPE_MISMATCH))}}T(ut,"checkType");function zr(i){if(i==null||typeof i=="number"||typeof i=="string"||typeof i=="boolean"||e_.isBuffer(i)||iN.types.isDate(i)||nN.isVectorValue(i))return i;if(Array.isArray(i)){let t=new Array(i.length);for(let s=0;s<i.length;s++)t[s]=zr(i[s]);return t}if(i instanceof $o)return{fields:[],values:[]};if(i instanceof ee.JsonId)return i;let e={};e.fields=Object.getOwnPropertyNames(i),e.values=new Array(e.fields.length);for(let t=0;t<e.fields.length;t++)e.values[t]=zr(i[e.fields[t]]);return e}T(zr,"transformJsonValue");function oN(i,e,t){if(e!=null){if(i.type===ee.DB_TYPE_OBJECT){let s=e;return e instanceof $o||(s=new i.typeClass(e)),s._impl}else{if(i.type===ee.DB_TYPE_JSON)return zr(e);if(typeof e=="string"){if(ut(i,t,ee.DB_TYPE_VARCHAR,ee.DB_TYPE_NVARCHAR,ee.DB_TYPE_CHAR,ee.DB_TYPE_NCHAR,ee.DB_TYPE_CLOB,ee.DB_TYPE_NCLOB),i.type!==ee.DB_TYPE_CLOB&&i.type!==ee.DB_TYPE_NCLOB){let s=e_.byteLength(e);(i.maxSize===void 0||s>i.maxSize)&&(i.checkSize&&pe.throwErr(pe.ERR_MAX_SIZE_TOO_SMALL,i.maxSize,s,t.pos),i.maxSize=s)}return e}else{if(typeof e=="number"||typeof e=="bigint")return ut(i,t,ee.DB_TYPE_NUMBER,ee.DB_TYPE_BINARY_INTEGER,ee.DB_TYPE_BINARY_FLOAT,ee.DB_TYPE_BINARY_DOUBLE),Number.isNaN(e)&&i.type===ee.DB_TYPE_NUMBER&&pe.throwErr(pe.ERR_NAN_VALUE),e;if(typeof e=="boolean")return ut(i,t,ee.DB_TYPE_BOOLEAN),e;if(iN.types.isDate(e))return ut(i,t,ee.DB_TYPE_TIMESTAMP,ee.DB_TYPE_TIMESTAMP_TZ,ee.DB_TYPE_TIMESTAMP_LTZ,ee.DB_TYPE_DATE),e;if(e_.isBuffer(e))return ut(i,t,ee.DB_TYPE_RAW,ee.DB_TYPE_BLOB),i.type===ee.DB_TYPE_RAW&&(i.maxSize===void 0||e.length>i.maxSize)&&(i.checkSize&&pe.throwErr(pe.ERR_MAX_SIZE_TOO_SMALL,i.maxSize,e.length,t.pos),i.maxSize=e.length),e;if(e instanceof NP)return ut(i,t,ee.DB_TYPE_CURSOR),e._impl;if(e instanceof hP)return ut(i,t,e.type),e._impl;if(e instanceof $o)return ut(i,t,ee.DB_TYPE_OBJECT),e._impl;if(nN.isVectorValue(e))return ut(i,t,ee.DB_TYPE_VECTOR),e;if(i.type===ee.DB_TYPE_VECTOR&&Array.isArray(e))return new Float64Array(e);if(t.allowArray&&Array.isArray(e)){i.isArray=!0,i.dir===SP.BIND_IN?i.maxArraySize=e.length||1:i.maxArraySize===void 0?pe.throwErr(pe.ERR_REQUIRED_MAX_ARRAY_SIZE):e.length>i.maxArraySize&&pe.throwErr(pe.ERR_INVALID_ARRAY_SIZE),t.allowArray=!1;let s=new Array(e.length);for(let r=0;r<e.length;r++)t.pos=r,s[r]=oN(i,e[r],t);return s}}}i.type===void 0&&pe.throwErr(pe.ERR_INVALID_BIND_DATA_TYPE,2),ut(i,t)}}T(oN,"transformValueIn");_N.exports={transformJsonValue:zr,transformValueIn:oN}});var Ds=R((WO,TN)=>{"use strict";var uP=ts(),aN=Is(),te=Y(),Cs=Fe(),t_=require("util");function s_(i,e,t,s){let r,n=!1;if(t){switch(e.type){case Cs.DB_TYPE_VARCHAR:case Cs.DB_TYPE_NVARCHAR:case Cs.DB_TYPE_NCHAR:case Cs.DB_TYPE_CHAR:r=Buffer.byteLength(t),r>e.maxSize&&(n=!0);break;case Cs.DB_TYPE_RAW:r=t.length,r>e.maxSize&&(n=!0);break;default:break}n&&(s!==void 0?te.throwErr(te.ERR_WRONG_LENGTH_FOR_DBOBJECT_ELEM,s,i.fqn,r,e.maxSize):te.throwErr(te.ERR_WRONG_LENGTH_FOR_DBOBJECT_ATTR,e.name,i.fqn,r,e.maxSize))}}T(s_,"validatePropertyValue");var Xs=class Xs{_getAttrValue(e){let t=this._impl.getAttrValue(e);return this._transformValueOut(t,e.typeClass)}_setAttrValue(e,t){let s={fqn:this._objType.fqn,attrName:e.name,type:e.type,typeClass:e.typeClass},r={allowArray:!1};t=r_.transformValueIn(s,t,r),s_(this._objType,e,t),this._impl.setAttrValue(e,t)}_toPojo(){if(this.isCollection){let t=this.getValues();if(this.elementType===Cs.DB_TYPE_OBJECT)for(let s=0;s<t.length;s++)t[s]=t[s]._toPojo();return t}let e={};for(let t in this.attributes){let s=this[t];s instanceof Xs&&(s=s._toPojo()),e[t]=s}return e}_transformValueOut(e,t){let s=e;return e instanceof aN.LobImpl?(s=new uP,s._setup(e,!0)):e instanceof aN.DbObjectImpl&&(s=Object.create(t.prototype),s._impl=e,s.isCollection&&(s=new Proxy(s,Xs._collectionProxyHandler))),s}append(e){te.assertArgCount(arguments,1,1);let t={fqn:this._objType.fqn,type:this._objType.elementType,typeClass:this._objType.elementTypeClass},s={allowArray:!1};e=r_.transformValueIn(t,e,s);let r=this._impl.getLastIndex();r?r=r+1:r=0,s_(this._objType,this._objType.elementTypeInfo,e,r),this._impl.append(e)}get attributes(){if(!this._attributes){let e=this._objType.attributes||[],t={};for(let s=0;s<e.length;s++){let r=e[s],n={type:r.type,typeName:r.typeName};r.typeClass&&(n.typeClass=r.typeClass),t[r.name]=n}this._attributes=t}return this._attributes}deleteElement(e){return te.assertArgCount(arguments,1,1),te.assertParamValue(Number.isInteger(e),1),this._impl.deleteElement(e)}get elementType(){return this._objType.elementType}get elementTypeClass(){return this._objType.elementTypeClass}get elementTypeName(){return this._objType.elementTypeName}get fqn(){return this._objType.fqn}getElement(e){te.assertArgCount(arguments,1,1),te.assertParamValue(Number.isInteger(e),1);let t=this._impl.getElement(e);return this._transformValueOut(t,this.elementTypeClass)}getKeys(){return te.assertArgCount(arguments,0,0),this._impl.getKeys()}getFirstIndex(){return te.assertArgCount(arguments,0,0),this._impl.getFirstIndex()}getLastIndex(){return te.assertArgCount(arguments,0,0),this._impl.getLastIndex()}getNextIndex(e){return te.assertArgCount(arguments,1,1),te.assertParamValue(Number.isInteger(e),1),this._impl.getNextIndex(e)}getPrevIndex(e){return te.assertArgCount(arguments,1,1),te.assertParamValue(Number.isInteger(e),1),this._impl.getPrevIndex(e)}getValues(){te.assertArgCount(arguments,0,0);let e=this._impl.getValues();for(let t=0;t<e.length;t++)e[t]=this._transformValueOut(e[t],this.elementTypeClass);return e}hasElement(e){return te.assertArgCount(arguments,1,1),te.assertParamValue(Number.isInteger(e),1),this._impl.hasElement(e)}get isCollection(){return this._objType.isCollection}get name(){return this._objType.name}get schema(){return this._objType.schema}get packageName(){return this._objType.packageName}setElement(e,t){te.assertArgCount(arguments,2,2),te.assertParamValue(Number.isInteger(e),1);let s={fqn:this._objType.fqn,type:this._objType.elementType,typeClass:this._objType.elementTypeClass},r={allowArray:!1};t=r_.transformValueIn(s,t,r),s_(this._objType,this._objType.elementTypeInfo,t,e),this._impl.setElement(e,t)}trim(e){te.assertArgCount(arguments,1,1),te.assertParamValue(Number.isInteger(e)&&e>=0,1),this._impl.trim(e)}[t_.inspect.custom](e,t){return"["+this.fqn+"] "+t_.inspect(this._toPojo(),t)}[Symbol.iterator](){if(this.isCollection)return this.getValues()[Symbol.iterator]();throw TypeError("obj is not iterable")}[Symbol.toPrimitive](e){switch(e){case"number":return NaN;default:return"["+this.fqn+"] "+t_.inspect(this._toPojo(),{})}}get[Symbol.toStringTag](){return this.fqn}toJSON(){return this._toPojo()}toMap(){te.assertArgCount(arguments,0,0),this.isCollection||te.throwErr(te.ERR_OBJECT_IS_NOT_A_COLLECTION,this.name);let e=new Map;return this.getKeys().forEach(t=>{e.set(t,this.getElement(t))}),e}};T(Xs,"BaseDbObject");var zs=Xs;function AP(i){return function(){try{return i.apply(this,arguments)}catch(e){throw te.transformErr(e,te.transformErr)}}}T(AP,"transformErr");function fP(i){for(let e=1;e<arguments.length;e++){let t=arguments[e];i[t]=AP(i[t])}}T(fP,"wrapFns");fP(zs.prototype,"_getAttrValue","_setAttrValue","append","deleteElement","getElement","getKeys","getFirstIndex","getLastIndex","getNextIndex","getPrevIndex","getValues","toMap","hasElement","setElement","trim");zs._collectionProxyHandler={deleteProperty(i,e){if(typeof e=="string"){let t=+e;if(!isNaN(t))return i.deleteElement(t)}return delete i[e]},get(i,e){if(typeof e=="string"){let s=+e;if(!isNaN(s))return i.getElement(s)}let t=i[e];return typeof t=="function"?t.bind(i):t},set(i,e,t){if(typeof e=="string"){let s=+e;if(!isNaN(s))return i.setElement(s,t),!0}return i[e]=t,!0}};TN.exports=zs;var r_=Qr()});var __=R((zO,EN)=>{"use strict";var{Buffer:i_}=require("buffer"),He=Y(),n_=Le(),dP=qo(),PP=Wo(),pP=Qo(),cN=Ds(),RP=Qr(),Qs=Fe(),o_=class o_{_isPayload(e){return typeof e=="string"||i_.isBuffer(e)||e instanceof cN}_makeMessage(e){let t=new pP;return t._impl=e,t._payloadTypeClass=this._payloadTypeClass,t}_verifyMessage(e){let t;return this._isPayload(e)?(t=e,e={}):(e={...e},this._isJson||this._isPayload(e.payload)?t=e.payload:this._payloadTypeClass?t=new this._payloadTypeClass(e.payload):He.throwErr(He.ERR_INVALID_AQ_MESSAGE)),this._isJson?e.payload=RP.transformJsonValue(t):typeof t=="string"?e.payload=i_.from(t):i_.isBuffer(t)?e.payload=t:e.payload=t._impl,e.correlation!==void 0&&He.assertParamPropValue(typeof e.correlation=="string",1,"correlation"),e.delay!==void 0&&He.assertParamPropValue(Number.isInteger(e.delay),1,"delay"),e.exceptionQueue!==void 0&&He.assertParamPropValue(typeof e.exceptionQueue=="string",1,"exceptionQueue"),e.expiration!==void 0&&He.assertParamPropValue(Number.isInteger(e.expiration),1,"expiration"),e.priority!==void 0&&He.assertParamPropValue(Number.isInteger(e.priority),1,"priority"),e.recipients!==void 0&&He.assertParamPropValue(n_.isArrayOfStrings(e.recipients),1,"recipients"),e}async create(e,t,s){if(s.payloadType===Qs.DB_TYPE_JSON)this._isJson=!0,this._payloadType=Qs.DB_TYPE_JSON,this._payloadTypeName="JSON";else if(s.payloadType===void 0||s.payloadType===Qs.DB_TYPE_RAW)this._payloadType=Qs.DB_TYPE_RAW,this._payloadTypeName="RAW";else{if(typeof s.payloadType=="string"){let r=await e._getDbObjectClassForName(s.payloadType);this._payloadTypeClass=r,s.payloadType=r}else He.assertParamPropValue(n_.isObject(s.payloadType)&&s.payloadType.prototype instanceof cN,2,"payloadType"),this._payloadTypeClass=s.payloadType;this._payloadType=Qs.DB_TYPE_OBJECT,this._payloadTypeName=this._payloadTypeClass.prototype.name}this._name=t,this._impl=await e._impl.getQueue(t,this._payloadTypeClass,this._payloadType)}async deqMany(e){return He.assertArgCount(arguments,1,1),He.assertParamValue(Number.isInteger(e)&&e>0,1),(await this._impl.deq(e)).map(s=>this._makeMessage(s))}async deqOne(){He.assertArgCount(arguments,0,0);let e=await this._impl.deq(1);if(e.length>0)return this._makeMessage(e[0])}get deqOptions(){if(!this._deqOptions){let e=new dP;e._impl=this._impl.deqOptions,this._deqOptions=e}return this._deqOptions}async enqMany(e){He.assertArgCount(arguments,1,1),He.assertParamValue(Array.isArray(e)&&e.length>0,1);let t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=this._verifyMessage(e[r]);return(await this._impl.enq(t)).map(r=>this._makeMessage(r))}async enqOne(e){He.assertArgCount(arguments,1,1),e=this._verifyMessage(e);let t=await this._impl.enq([e]);return this._makeMessage(t[0])}get enqOptions(){if(!this._enqOptions){let e=new PP;e._impl=this._impl.enqOptions,this._enqOptions=e}return this._enqOptions}get name(){return this._name}get payloadType(){return this._payloadType}get payloadTypeName(){return this._payloadTypeName}get payloadTypeClass(){return this._payloadTypeClass}};T(o_,"AqQueue");var Jr=o_;n_.wrapFns(Jr.prototype,"deqOne","deqMany","enqOne","enqMany");EN.exports=Jr});var Os=R((JO,lN)=>{"use strict";var a_=class a_{get createdOn(){return this._impl.getCreatedOn()}getContent(){return JSON.parse(this._impl.getContentAsString())}getContentAsBuffer(){return this._impl.getContentAsBuffer()}getContentAsString(){return this._impl.getContentAsString()}get key(){return this._impl.getKey()}get lastModified(){return this._impl.getLastModified()}get mediaType(){return this._impl.getMediaType()}get version(){return this._impl.getVersion()}};T(a_,"SodaDocument");var jr=a_;jr.prototype._sodaDocumentMarker=!0;lN.exports=jr});var c_=R((ZO,hN)=>{"use strict";var gs=Y(),mP=Le(),IP=Os(),T_=class T_{async close(){gs.assertArgCount(arguments,0,0),gs.assert(this._impl,gs.ERR_INVALID_SODA_DOC_CURSOR),await this._impl.close(),delete this._impl}async getNext(){gs.assertArgCount(arguments,0,0),gs.assert(this._impl,gs.ERR_INVALID_SODA_DOC_CURSOR);let e=await this._impl.getNext();if(e){let t=new IP;return t._impl=e,t}}[Symbol.asyncIterator](){let e=this;return{async next(){let t=await e.getNext();return{value:t,done:t===void 0}},return(){return{done:!0}}}}};T(T_,"SodaDocCursor");var Zr=T_;mP.wrapFns(Zr.prototype,"close","getNext");hN.exports=Zr});var h_=R((eg,SN)=>{"use strict";var DP=c_(),E_=Os(),Te=Y(),$r=Le(),NN=nt(),l_=class l_{constructor(){this._options={autoCommit:NN.autoCommit,fetchArraySize:NN.fetchArraySize}}async count(){return Te.assertArgCount(arguments,0,0),await this._impl.count(this._options)}async getCursor(){Te.assertArgCount(arguments,0,0);let e=new DP;return e._impl=await this._impl.getCursor(this._options),e}async getDocuments(){Te.assertArgCount(arguments,0,0);let e=await this._impl.getDocuments(this._options),t=new Array(e.length);for(let s=0;s<e.length;s++)t[s]=new E_,t[s]._impl=e[s];return t}async getOne(){Te.assertArgCount(arguments,0,0);let e=await this._impl.getOne(this._options);if(e){let t=new E_;return t._impl=e,t}}lock(){return Te.assertArgCount(arguments,0,0),this._options.lock=!0,this}async replaceOne(e){return Te.assertArgCount(arguments,1,1),e=$r.verifySodaDoc(e),await this._impl.replaceOne(this._options,e)}async replaceOneAndGet(e){Te.assertArgCount(arguments,1,1),e=$r.verifySodaDoc(e);let t=await this._impl.replaceOneAndGet(this._options,e);if(t){let s=new E_;return s._impl=t,s}}async remove(){return Te.assertArgCount(arguments,0,0),await this._impl.remove(this._options)}fetchArraySize(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(Number.isInteger(e)&&e>=0,1),this._options.fetchArraySize=e,this}filter(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue($r.isObject(e),1),this._options.filter=JSON.stringify(e),this}hint(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(typeof e=="string",1),this._options.hint=e,this}key(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(typeof e=="string",1),this._options.key=e,this._options.keys=void 0,this}keys(e){Te.assertArgCount(arguments,1,1),Te.assertParamValue(Array.isArray(e),1);for(let t=0;t<e.length;t++)Te.assertParamValue(typeof e[t]=="string",1);return this._options.keys=e,this._options.key=void 0,this}limit(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(typeof e=="number",1),this._options.limit=e,this}skip(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(typeof e=="number",1),this._options.skip=e,this}version(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(typeof e=="string",1),this._options.version=e,this}};T(l_,"SodaOperation");var ei=l_;$r.wrapFns(ei.prototype,"count","getCursor","getDocuments","getOne","remove","replaceOne","replaceOneAndGet");SN.exports=ei});var S_=R((sg,uN)=>{"use strict";var ti=Os(),CP=h_(),he=Y(),_t=Le(),Bt=nt(),N_=class N_{async createIndex(e){he.assertArgCount(arguments,1,1),he.assertParamValue(_t.isObject(e),1);let t={autoCommit:Bt.autoCommit};return await this._impl.createIndex(JSON.stringify(e),t)}async drop(){he.assertArgCount(arguments,0,0);let e={autoCommit:Bt.autoCommit};return await this._impl.drop(e)}async dropIndex(e,t){let s={autoCommit:Bt.autoCommit};return he.assertArgCount(arguments,1,2),he.assertParamValue(typeof e=="string",1),arguments.length==2&&(he.assertParamValue(typeof t=="object",2),t.force!==void 0&&(he.assertParamPropValue(typeof t.force=="boolean",2,"force"),s.force=t.force)),await this._impl.dropIndex(e,s)}find(){he.assertArgCount(arguments,0,0);let e=new CP;return e._impl=this._impl.find(),e}async getDataGuide(){he.assertArgCount(arguments,0,0);let e=new ti;return e._impl=await this._impl.getDataGuide(),e}async insertMany(e){he.assertArgCount(arguments,1,1),he.assertParamValue(Array.isArray(e)&&e.length>0,1);let t=Array(e.length);for(let r=0;r<e.length;r++)t[r]=_t.verifySodaDoc(e[r]);let s={autoCommit:Bt.autoCommit};await this._impl.insertMany(t,s)}async insertManyAndGet(e,t){let s={autoCommit:Bt.autoCommit};he.assertArgCount(arguments,1,2),he.assertParamValue(Array.isArray(e)&&e.length>0,1),arguments.length==2&&(he.assertParamValue(_t.isObject(t),2),t.hint!==void 0&&(he.assertParamPropValue(typeof t.hint=="string",2,"hint"),s.hint=t.hint));let r=Array(e.length);for(let _=0;_<e.length;_++)r[_]=_t.verifySodaDoc(e[_]);let n=await this._impl.insertManyAndGet(r,s);for(let _=0;_<e.length;_++){let a=r[_]=new ti;a._impl=n[_]}return r}async insertOne(e){he.assertArgCount(arguments,1,1),e=_t.verifySodaDoc(e);let t={autoCommit:Bt.autoCommit};await this._impl.insertOne(e,t)}async insertOneAndGet(e,t){let s={autoCommit:Bt.autoCommit};he.assertArgCount(arguments,1,2),e=_t.verifySodaDoc(e),arguments.length==2&&(he.assertParamValue(_t.isObject(t),2),t.hint!==void 0&&(he.assertParamPropValue(typeof t.hint=="string",2,"hint"),s.hint=t.hint));let r=new ti;return r._impl=await this._impl.insertOneAndGet(e,s),r}async listIndexes(){return(await this._impl.listIndexes()).map(t=>JSON.parse(t))}get metaData(){return JSON.parse(this._impl.getMetaData())}get name(){return this._impl.getName()}async save(e){he.assertArgCount(arguments,1,1),e=_t.verifySodaDoc(e);let t={autoCommit:Bt.autoCommit};await this._impl.save(e,t)}async saveAndGet(e,t){he.assertArgCount(arguments,1,2),e=_t.verifySodaDoc(e);let s={autoCommit:Bt.autoCommit};arguments.length==2&&(he.assertParamValue(_t.isObject(t),2),t.hint!==void 0&&(he.assertParamPropValue(typeof t.hint=="string",2,"hint"),s.hint=t.hint));let r=new ti;return r._impl=await this._impl.saveAndGet(e,s),r}async truncate(){he.assertArgCount(arguments,0,0),await this._impl.truncate()}};T(N_,"SodaCollection");var si=N_;_t.wrapFns(si.prototype,"createIndex","drop","dropIndex","getDataGuide","insertMany","insertManyAndGet","insertOne","insertOneAndGet","listIndexes","save","saveAndGet","truncate");uN.exports=si});var f_=R((ig,dN)=>{"use strict";var{Buffer:u_}=require("buffer"),AN=S_(),OP=Os(),xe=Y(),is=Le(),fN=nt(),A_=class A_{_getConnection(){return this._connection}async createCollection(e,t){let s={autoCommit:fN.autoCommit};xe.assertArgCount(arguments,1,2),xe.assertParamValue(typeof e=="string",1),arguments.length==2&&(xe.assertParamValue(is.isObject(t),2),t.mode!==void 0&&(xe.assertParamPropValue(Number.isInteger(t.mode)&&t.mode>0,2,"mode"),s.mode=t.mode),t.metaData!==void 0&&(xe.assertParamPropValue(is.isObject(t.metaData),2,"metaData"),s.metaData=JSON.stringify(t.metaData)));let r=new AN;return r._impl=await this._impl.createCollection(e,s),r}createDocument(e,t){let s={};xe.assertArgCount(arguments,1,2),xe.assertParamValue(u_.isBuffer(e)||typeof e=="string"||is.isObject(e),1),arguments.length>1&&(xe.assertParamValue(is.isObject(t),2),s=t,xe.assertParamPropString(s,2,"key"),xe.assertParamPropString(s,2,"mediaType")),typeof e=="string"?e=u_.from(e):is.isObject(e)&&(e=u_.from(JSON.stringify(e)));let r=new OP;return r._impl=this._impl.createDocument(e,s),r}async getCollectionNames(e){let t={};return xe.assertArgCount(arguments,0,1),arguments.length==1&&(xe.assertParamValue(is.isObject(e),1),t=e,t.startsWith!==void 0&&xe.assertParamPropValue(typeof t.startsWith=="string",1,"startsWith"),t.limit!==void 0&&xe.assertParamPropValue(Number.isInteger(t.limit),1,"limit")),await this._impl.getCollectionNames(t)}async openCollection(e){xe.assertArgCount(arguments,1,1),xe.assertParamValue(typeof e=="string",1);let t={autoCommit:fN.autoCommit},s=await this._impl.openCollection(e,t);if(s){let r=new AN;return r._impl=s,r}}};T(A_,"SodaDatabase");var ri=A_;is.wrapFns(ri.prototype,"createCollection","getCollectionNames","openCollection");dN.exports=ri});var R_=R((og,mN)=>{"use strict";var gP=__(),Ls=Ds(),{Buffer:PN}=require("buffer"),d_=ts(),ii=Xr(),LP=f_(),yP=require("events"),BP=Zo(),h=Y(),J=Le(),ni=Is(),wP=require("process"),YP=require("util"),ce=Ye(),P_=nt(),pN=Qr(),oe=Fe(),RN=Hr(),Js=new Map,p_=class p_ extends yP{constructor(){super(),this._dbObjectClasses=new Map,this._closing=!1}_addDefaultsToExecOpts(e){e.connection=this,e.keepInStmtCache===void 0&&(e.keepInStmtCache=!0),P_.addToOptions(e,"autoCommit","dbObjectAsPojo","fetchArraySize","fetchTypeHandler","maxRows","outFormat","prefetchRows")}_buildDbObjectClass(e){let t=T(function(s){if(this._impl=new ni.DbObjectImpl(e),this.isCollection){let r=new Proxy(this,Ls._collectionProxyHandler);if(s!==void 0)for(let n=0;n<s.length;n++)this.append(s[n]);return r}else s!==void 0&&Object.assign(this,s)},"DbObject");if(t.prototype=Object.create(Ls.prototype),t.prototype.constructor=t,t.prototype._objType=e,e.elementTypeClass){let s=this._getDbObjectClass(e.elementTypeClass);e.elementTypeClass=s}if(e.isCollection&&(J.addTypeProperties(e,"elementType"),e.elementTypeInfo.type=e.elementType),e.attributes){let s={};for(let r of e.attributes){r.typeClass&&(r.typeClass=this._getDbObjectClass(r.typeClass)),J.addTypeProperties(r,"type");let n={get(){return this._getAttrValue(r)},set(_){this._setAttrValue(r,_)}};s[r.name]=n}Object.defineProperties(t.prototype,s)}return t.toString=function(){return"DbObjectClass ["+e.fqn+"]"},t}_getDbObjectClass(e){if(e.prototype instanceof Ls)return e;let t=this._dbObjectClasses.get(e);return t||(t=this._buildDbObjectClass(e),t._connection=this,t._objType=e,e._connection=this._impl,this._dbObjectClasses.set(e,t)),t}async _getDbObjectClassForName(e){let t=this._dbObjectClasses.get(e);if(!t){let s=await this._impl.getDbObjectClass(e);t=this._getDbObjectClass(s),this._dbObjectClasses.set(e,t)}return t}_isBindDir(e){return e===ce.BIND_IN||e===ce.BIND_OUT||e===ce.BIND_INOUT}_isBindValue(e){return e==null||typeof e=="number"||typeof e=="string"||typeof e=="boolean"||typeof e=="bigint"||Array.isArray(e)||J.isVectorValue(e)||PN.isBuffer(e)||YP.types.isDate(e)||e instanceof d_||e instanceof ii||e instanceof Ls}async _processBindUnit(e,t,s){let r=!1;if(t.dir===void 0?e.dir=ce.BIND_IN:(h.assert(this._isBindDir(t.dir),h.ERR_INVALID_BIND_DIRECTION),e.dir=t.dir,r=!0),t.type!==void 0?(typeof t.type=="string"?(e.type=oe.DB_TYPE_OBJECT,e.typeClass=await this._getDbObjectClassForName(t.type),e.objType=e.typeClass._objType):t.type.prototype instanceof Ls?(e.type=oe.DB_TYPE_OBJECT,e.typeClass=t.type,e.objType=e.typeClass._objType):(h.assert(t.type instanceof oe.DbType,h.ERR_INVALID_BIND_DATA_TYPE,2),e.type=t.type),r=!0):s&&(e.name&&h.throwErr(h.ERR_MISSING_TYPE_BY_NAME,e.name),h.throwErr(h.ERR_MISSING_TYPE_BY_POS,e.pos)),(e.dir!==ce.BIND_IN||s)&&(t.maxSize!==void 0?(h.assertParamPropValue(Number.isInteger(t.maxSize)&&t.maxSize>0,2,"maxSize"),e.maxSize=t.maxSize,e.checkSize=!0,r=!0):s?(e.type===oe.DB_TYPE_VARCHAR||e.type===oe.DB_TYPE_RAW)&&(e.name&&h.throwErr(h.ERR_MISSING_MAX_SIZE_BY_NAME,e.name),h.throwErr(h.ERR_MISSING_MAX_SIZE_BY_POS,e.pos)):e.maxSize=ce.DEFAULT_MAX_SIZE_FOR_OUT_BINDS),e.isArray=!1,s||t.maxArraySize!==void 0&&(h.assertParamPropValue(Number.isInteger(t.maxArraySize)&&t.maxArraySize>0,2,"maxArraySize"),e.maxArraySize=t.maxArraySize,e.isArray=!0),!s&&t.val!==void 0)return t.val;r||h.throwErr(h.ERR_INVALID_BIND_UNIT)}async _processBindValue(e,t,s){let r=pN.transformValueIn(e,t,s);e.isArray?e.values=r.concat(e.values.slice(r.length)):e.values[s.pos]=r,e.type===oe.DB_TYPE_OBJECT&&e.typeClass===void 0&&(e.typeClass=await this._getDbObjectClass(t._objType),e.objType=e.typeClass._objType)}async _processExecuteBind(e,t){e.isArray=!1;let s;if(this._isBindValue(t)?(e.dir=ce.BIND_IN,s=t):s=await this._processBindUnit(e,t,!1),e.dir!==ce.BIND_OUT){let r={pos:0,allowArray:!0};await this._processBindValue(e,s,r)}e.type===void 0&&(e.type=oe.DB_TYPE_VARCHAR,e.maxSize===void 0&&(e.maxSize=1)),e.isArray&&e.type!==oe.DB_TYPE_VARCHAR&&e.type!==oe.DB_TYPE_NVARCHAR&&e.type!==oe.DB_TYPE_CHAR&&e.type!==oe.DB_TYPE_NCHAR&&e.type!==oe.DB_TYPE_NUMBER&&e.type!==oe.DB_TYPE_BINARY_FLOAT&&e.type!==oe.DB_TYPE_BINARY_DOUBLE&&e.type!==oe.DB_TYPE_DATE&&e.type!==oe.DB_TYPE_TIMESTAMP&&e.type!==oe.DB_TYPE_TIMESTAMP_LTZ&&e.type!==oe.DB_TYPE_TIMESTAMP_TZ&&e.type!==oe.DB_TYPE_RAW&&h.throwErr(h.ERR_INVALID_TYPE_FOR_ARRAY_BIND)}async _processExecuteBinds(e){let t=[];if(Array.isArray(e))for(let s=0;s<e.length;s++){let r=t[s]={pos:s+1,values:[]};await this._processExecuteBind(r,e[s])}else{h.assertParamValue(J.isObject(e),2);let s=Object.getOwnPropertyNames(e);for(let r=0;r<s.length;r++){let n=t[r]={name:s[r],values:[]};await this._processExecuteBind(n,e[s[r]])}}return t}async _processExecuteManyBinds(e,t){let s=[],r;if(t!==void 0)if(Array.isArray(t)){r=!0;for(let n=0;n<t.length;n++){let _=s[n]={pos:n+1,values:[]};await this._processBindUnit(_,t[n],!0)}}else{r=!1;let n=Object.getOwnPropertyNames(t);for(let _=0;_<n.length;_++){let a=s[_]={name:n[_],values:[]};await this._processBindUnit(a,t[n[_]],!0)}}else{let n=e[0];if(h.assertParamValue(J.isObjectOrArray(n),2),Array.isArray(n)){r=!0;for(let _=0;_<n.length;_++)s[_]={pos:_+1}}else{r=!1;let _=Object.getOwnPropertyNames(n);for(let a=0;a<_.length;a++)s[a]={name:_[a]}}for(let _=0;_<s.length;_++)s[_].dir=ce.BIND_IN,s[_].isArray=!1,s[_].values=[]}for(let n=0;n<e.length;n++){let _=e[n],a={pos:n,allowArray:!1};h.assert(r&&Array.isArray(_)||!r&&J.isObject(_),h.ERR_MIXED_BIND);for(let c=0;c<s.length;c++){let E=s[c],l=r?_[c]:_[E.name];await this._processBindValue(E,l,a)}}for(let n=0;n<s.length;n++){let _=s[n];_.type===void 0&&(_.type=oe.DB_TYPE_VARCHAR,_.maxSize=1)}return s}_transformOutBind(e,t){let s=e;if(Array.isArray(e)){s=[];for(let r=0;r<e.length;r++)s.push(this._transformOutBind(e[r],t))}else if(e instanceof ni.ResultSetImpl)s=new ii,s._setup(this,e);else if(e instanceof ni.LobImpl)s=new d_,s._setup(e,!0);else if(e instanceof ni.DbObjectImpl){let r=this._dbObjectClasses.get(e._objType);s=Object.create(r.prototype),s._impl=e,t.dbObjectAsPojo?s=s._toPojo():s.isCollection&&(s=new Proxy(s,Ls._collectionProxyHandler))}return s}_verifyExecOpts(e,t){let s={};if(h.assertParamValue(J.isObject(e),3),e.autoCommit!==void 0&&(h.assertParamPropValue(typeof e.autoCommit=="boolean",3,"autoCommit"),s.autoCommit=e.autoCommit),e.dbObjectAsPojo!==void 0&&(h.assertParamPropValue(typeof e.dbObjectAsPojo=="boolean",3,"dbObjectAsPojo"),s.dbObjectAsPojo=e.dbObjectAsPojo),e.keepInStmtCache!==void 0&&(h.assertParamPropValue(typeof e.keepInStmtCache=="boolean",3,"keepInStmtCache"),s.keepInStmtCache=e.keepInStmtCache),t)e.bindDefs!==void 0&&(h.assertParamPropValue(J.isObjectOrArray(e.bindDefs),3,"bindDefs"),s.bindDefs=e.bindDefs),e.batchErrors!==void 0&&(h.assertParamPropValue(typeof e.batchErrors=="boolean",3,"batchErrors"),s.batchErrors=e.batchErrors),e.dmlRowCounts!==void 0&&(h.assertParamPropValue(typeof e.dmlRowCounts=="boolean",3,"dmlRowCounts"),s.dmlRowCounts=e.dmlRowCounts);else{if(h.assertParamPropUnsignedIntNonZero(e,3,"fetchArraySize"),s.fetchArraySize=e.fetchArraySize,e.fetchInfo!==void 0){h.assertParamPropValue(J.isObject(e.fetchInfo),3,"fetchInfo");let r=Object.getOwnPropertyNames(e.fetchInfo),n=new Map(P_.fetchTypeMap);for(let _ of r){let a=e.fetchInfo[_];a.type===void 0&&h.throwErr(h.ERR_NO_TYPE_FOR_CONVERSION),a.type!==ce.DEFAULT&&a.type!==oe.DB_TYPE_VARCHAR&&a.type!==oe.DB_TYPE_RAW&&h.throwErr(h.ERR_INVALID_TYPE_FOR_CONVERSION),n.set(_,a.type)}s.fetchTypeMap=n}if(e.fetchTypeHandler!==void 0){let r=typeof e.fetchTypeHandler;h.assertParamPropValue(r==="function",3,"fetchTypeHandler"),s.fetchTypeHandler=e.fetchTypeHandler}e.maxRows!==void 0&&(h.assertParamPropValue(Number.isInteger(e.maxRows)&&e.maxRows>=0,3,"maxRows"),s.maxRows=e.maxRows),e.outFormat!==void 0&&(h.assertParamPropValue(e.outFormat===ce.OUT_FORMAT_ARRAY||e.outFormat===ce.OUT_FORMAT_OBJECT,3,"outFormat"),s.outFormat=e.outFormat),e.prefetchRows!==void 0&&(h.assertParamPropValue(Number.isInteger(e.prefetchRows)&&e.prefetchRows>=0,3,"prefetchRows"),s.prefetchRows=e.prefetchRows),e.resultSet!==void 0&&(h.assertParamPropValue(typeof e.resultSet=="boolean",3,"resultSet"),s.resultSet=e.resultSet)}return s}get action(){return null}set action(e){h.assertPropValue(typeof e=="string","action"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setAction(e)}async breakExecution(){h.assertArgCount(arguments,0,0),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.breakExecution()}get callTimeout(){if(this._impl)return this._impl.getCallTimeout()}set callTimeout(e){h.assertPropValue(Number.isInteger(e)&&e>=0,"callTimeout"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setCallTimeout(e)}async changePassword(e,t,s){h.assertArgCount(arguments,3,3),h.assertParamValue(typeof e=="string",1),h.assertParamValue(typeof t=="string",2),h.assertParamValue(typeof s=="string",3),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.changePassword(e,t,s)}get clientId(){return null}set clientId(e){h.assertPropValue(typeof e=="string","clientId"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setClientId(e)}get clientInfo(){return null}set clientInfo(e){h.assertPropValue(typeof e=="string","clientInfo"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setClientInfo(e)}async close(e){let t={};h.assertArgCount(arguments,0,1),arguments.length==1&&(h.assertParamValue(J.isObject(e),1),t=e,h.assertParamPropBool(t,1,"drop")),h.assert(this._impl&&!this._closing,h.ERR_INVALID_CONNECTION),this._closing=!0;try{await this._impl.close(t)}finally{this._closing=!1}delete this._impl,this._dbObjectClasses.clear(),this.emit("_afterConnClose")}async commit(){h.assertArgCount(arguments,0,0),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.commit()}async createLob(e){h.assertArgCount(arguments,1,1),h.assertParamValue(e===oe.DB_TYPE_CLOB||e===oe.DB_TYPE_BLOB||e===oe.DB_TYPE_NCLOB,1),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let t=new d_;return t._setup(await this._impl.createLob(e),!1),t}get currentSchema(){if(this._impl)return this._impl.getCurrentSchema()}set currentSchema(e){h.assertPropValue(typeof e=="string","currentSchema"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setCurrentSchema(e)}get dbOp(){return null}set dbOp(e){h.assertPropValue(typeof e=="string","dbOp"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setDbOp(e)}get thin(){return P_.thin}get ecid(){return null}set ecid(e){h.assertPropValue(typeof e=="string","ecid"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setECID(e)}decodeOSON(e){return h.assertArgCount(arguments,1,1),h.assertParamValue(PN.isBuffer(e),1),new RN.OsonDecoder(e).decode()}encodeOSON(e){return new RN.OsonEncoder().encode(pN.transformJsonValue(e),this._impl._osonMaxFieldNameSize)}async execute(e,t,s){let n=[],_={};J.isObject(e)&&typeof e.statement=="string"?(h.assertArgCount(arguments,1,2),e.values&&(n=await this._processExecuteBinds(e.values)),e=e.statement,arguments.length==2&&(_=this._verifyExecOpts(t,!1))):(h.assertArgCount(arguments,1,3),h.assertParamValue(typeof e=="string",1),arguments.length>=2&&(n=await this._processExecuteBinds(t)),arguments.length==3&&(_=this._verifyExecOpts(s,!1))),this._addDefaultsToExecOpts(_),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let a;try{a=await this._impl.execute(e,1,n,_,!1)}catch(c){throw c.errorNum===1406&&h.throwErr(h.ERR_INSUFFICIENT_BUFFER_FOR_BINDS),c}if(a.warning&&(a.warning=h.transformErr(a.warning)),a.resultSet!==void 0){let c=new ii;c._setup(this,a.resultSet),a.metaData=c._impl.metaData,_.resultSet?a.resultSet=c:(a.rows=await c._getAllRows(),delete a.resultSet)}if(a.outBinds!==void 0)for(let[c,E]of Object.entries(a.outBinds)){let l=this._transformOutBind(E,_);a.outBinds[c]=l}if(a.implicitResults)for(let[c,E]of Object.entries(a.implicitResults)){let l=new ii;l._setup(this,E),_.resultSet?a.implicitResults[c]=l:a.implicitResults[c]=await l._getAllRows()}return a}async executeMany(e,t,s){let r={},n=[],_;h.assertArgCount(arguments,2,3),h.assertParamValue(typeof e=="string",1),arguments.length==3&&(r=this._verifyExecOpts(s,!0)),this._addDefaultsToExecOpts(r),typeof t=="number"?(h.assertParamValue(Number.isInteger(t)&&t>0,2),_=t,r.bindDefs!==void 0&&(n=await this._processExecuteManyBinds([],r.bindDefs))):(h.assertParamValue(Array.isArray(t)&&t.length>0,2),_=t.length,n=await this._processExecuteManyBinds(t,r.bindDefs)),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let a=await this._impl.execute(e,_,n,r,!0);if(a.warning&&(a.warning=h.transformErr(a.warning)),a.outBinds!==void 0)for(let c=0;c<a.outBinds.length;c++){let E=a.outBinds[c];for(let[l,N]of Object.entries(E))E[l]=this._transformOutBind(N,r)}return a}get externalName(){if(this._impl)return this._impl.getExternalName()}set externalName(e){h.assertPropValue(typeof e=="string","externalName"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setExternalName(e)}get dbDomain(){return this._impl&&this._impl.getDbDomain()}get dbName(){return this._impl&&this._impl.getDbName()}async getDbObjectClass(e){return h.assertArgCount(arguments,1,1),h.assertParamValue(typeof e=="string",1),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._getDbObjectClassForName(e)}async getQueue(e,t){let s={};h.assertArgCount(arguments,1,2),h.assertParamValue(typeof e=="string",1),arguments.length==2&&(h.assertParamValue(J.isObject(t),2),s={...t}),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let r=new gP;return await r.create(this,e,s),r}getSodaDatabase(){h.assertArgCount(arguments,0,0),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let e=new LP;return e._impl=this._impl.getSodaDatabase(),e}async getStatementInfo(e){h.assertArgCount(arguments,1,1),h.assertParamValue(typeof e=="string",1),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let t=await this._impl.getStatementInfo(e);if(t.metaData)for(let s=0;s<t.metaData.length;s++){let r=t.metaData[s];J.addTypeProperties(r,"dbType"),r.fetchType=oe.DB_TYPE_FETCH_TYPE_MAP.get(r.dbType)}return t}get instanceName(){if(this._impl)return this._impl.getInstanceName()}get internalName(){if(this._impl)return this._impl.getInternalName()}set internalName(e){h.assertPropValue(typeof e=="string","internalName"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setInternalName(e)}isHealthy(){return this._impl!==void 0&&!this._closing&&this._impl.isHealthy()}get maxOpenCursors(){return this._impl&&this._impl.getMaxOpenCursors()}get warning(){let e=this._impl.getWarning();return e&&(e=h.transformErr(e)),this._impl&&e}get module(){return null}set module(e){h.assertPropValue(typeof e=="string","module"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setModule(e)}get oracleServerVersion(){if(this._impl)return this._impl.getOracleServerVersion()}get oracleServerVersionString(){if(this._impl)return this._impl.getOracleServerVersionString()}get serviceName(){return this._impl&&this._impl.getServiceName()}get transactionInProgress(){return this._impl&&this._impl.getTransactionInProgress()}async ping(){h.assertArgCount(arguments,0,0),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.ping()}queryStream(e,t,s){h.assertArgCount(arguments,1,3),h.assertParamValue(typeof e=="string",1),arguments.length==3?(h.assertParamValue(J.isObject(s),3),s={...s}):s={},s.resultSet=!0;let r=new BP;return wP.nextTick(async()=>{try{let n=await this.execute(e,t||[],s);n.resultSet||h.throwErr(h.ERR_NOT_A_QUERY),r._open(n.resultSet)}catch(n){r.destroy(n);return}}),r}async rollback(){h.assertArgCount(arguments,0,0),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.rollback()}async shutdown(e){let t=ce.SHUTDOWN_MODE_DEFAULT;h.assertArgCount(arguments,0,1),e!==void 0&&(h.assertParamValue(typeof t=="number",1),t=e),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.shutdown(t)}async startup(e){let t={};h.assertArgCount(arguments,0,1),arguments.length==1&&(h.assertParamValue(typeof t=="object",1),t=e,h.assertParamPropBool(t,1,"force"),h.assertParamPropBool(t,1,"restrict"),h.assertParamPropString(t,1,"pfile")),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.startup(t)}get stmtCacheSize(){if(this._impl)return this._impl.getStmtCacheSize()}set stmtCacheSize(e){h.assertPropValue(Number.isInteger(e)&&e>=0,"stmtCacheSize"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setStmtCacheSize(e)}async subscribe(e,t){h.assertArgCount(arguments,2,2),h.assertParamValue(typeof e=="string",1),h.assertParamValue(J.isObject(t),2),t={name:e,...t},h.assertParamPropUnsignedInt(t,2,"namespace"),t.namespace===void 0&&(t.namespace=ce.SUBSCR_NAMESPACE_DBCHANGE),h.assertParamPropString(t,2,"ipAddress"),h.assertParamPropUnsignedInt(t,2,"port"),h.assertParamPropUnsignedInt(t,2,"timeout"),h.assertParamPropUnsignedInt(t,2,"operations"),h.assertParamPropUnsignedInt(t,2,"qos"),h.assertParamPropUnsignedInt(t,2,"groupingClass"),h.assertParamPropUnsignedInt(t,2,"groupingValue"),h.assertParamPropUnsignedInt(t,2,"groupingType"),h.assertParamPropBool(t,2,"clientInitiated"),h.assertParamPropFunction(t,2,"callback"),h.assert(t.callback,h.ERR_MISSING_SUBSCR_CALLBACK),t.namespace===ce.SUBSCR_NAMESPACE_DBCHANGE&&(h.assertParamPropString(t,2,"sql"),h.assert(t.sql&&t.sql.length>0,h.ERR_MISSING_SUBSCR_SQL),t.binds!==void 0&&(t.binds=await this._processExecuteBinds(t.binds))),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let s=Js.get(e),r=await this._impl.subscribe(s,t),n;return t.namespace===ce.SUBSCR_NAMESPACE_DBCHANGE?(n=r.subscription,delete r.subscription):n=r,Js.set(e,n),r}get tag(){if(this._impl)return this._impl.getTag()}set tag(e){h.assertPropValue(typeof e=="string","tag"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setTag(e)}async tpcBegin(e,t,s){h.assertArgCount(arguments,1,3),h.assertParamValue(J.isXid(e),1);let r=J.normalizeXid(e);arguments.length<3?s=60:h.assertParamValue(typeof s=="number",3),arguments.length<2?t=ce.TPC_BEGIN_NEW:(h.assertParamValue(typeof t=="number",2),[ce.TPC_BEGIN_NEW,ce.TPC_BEGIN_JOIN,ce.TPC_BEGIN_RESUME,ce.TPC_BEGIN_PROMOTE].indexOf(t)<0&&h.throwErr(h.ERR_INVALID_TPC_BEGIN_FLAGS)),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.tpcBegin(r,t,s)}async tpcCommit(e,t){h.assertArgCount(arguments,0,2),arguments.length<2?t=!1:h.assertParamValue(typeof t=="boolean",2);let s;arguments.length>=1&&(h.assertParamValue(J.isXid(e),1),s=J.normalizeXid(e)),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.tpcCommit(s,t)}async tpcEnd(e,t){h.assertArgCount(arguments,0,2),arguments.length<2?t=ce.TPC_END_NORMAL:(h.assertParamValue(typeof t=="number",2),[ce.TPC_END_NORMAL,ce.TPC_END_SUSPEND].includes(t)||h.throwErr(h.ERR_INVALID_TPC_END_FLAGS));let s;arguments.length>=1&&(h.assertParamValue(J.isXid(e),1),s=J.normalizeXid(e)),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.tpcEnd(s,t)}async tpcForget(e){h.assertArgCount(arguments,1,1),h.assertParamValue(J.isXid(e),1);let t=J.normalizeXid(e);h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.tpcForget(t)}async tpcPrepare(e){h.assertArgCount(arguments,0,1);let t;return arguments.length>=1&&(h.assertParamValue(J.isXid(e),1),t=J.normalizeXid(e)),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.tpcPrepare(t)}async tpcRecover(e){h.assertArgCount(arguments,0,1),arguments.length==1?h.assertParamValue(typeof e=="boolean",1):e=!0;let t=`
      SELECT
          formatid as "formatId",
          UTL_RAW.CAST_TO_VARCHAR2(globalid) as "globalTransactionId",
          UTL_RAW.CAST_TO_VARCHAR2(branchid) as "branchQualifier"
      FROM DBA_PENDING_TRANSACTIONS`,s=`
      SELECT
          formatid as "formatId",
          globalid as "globalTransactionId",
          branchid as "branchQualifier"
      FROM DBA_PENDING_TRANSACTIONS`,r={outFormat:ce.OUT_FORMAT_OBJECT,resultSet:!1};return(await this.execute(e?t:s,{},r)).rows}async tpcRollback(e){h.assertArgCount(arguments,0,1);let t;arguments.length==1&&(h.assertParamValue(J.isXid(e),1),t=J.normalizeXid(e)),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.tpcRollback(t)}async unsubscribe(e){h.assertArgCount(arguments,1,1),h.assertParamValue(typeof e=="string",1),h.assert(this._impl,h.ERR_INVALID_CONNECTION),h.assert(Js.has(e),h.ERR_INVALID_SUBSCR),await this._impl.unsubscribe(Js.get(e)),Js.delete(e)}};T(p_,"Connection");var At=p_;At.prototype.break=J.callbackify(At.prototype.breakExecution);At.prototype.tpcRecover=J.callbackify(At.prototype.tpcRecover);J.wrapFns(At.prototype,"changePassword","close","commit","createLob","execute","executeMany","getDbObjectClass","getQueue","getStatementInfo","ping","rollback","shutdown","startup","subscribe","tpcBegin","tpcCommit","tpcEnd","tpcForget","tpcPrepare","tpcRollback","unsubscribe");At.prototype.release=At.prototype.close;mN.exports=At});var D_=R((ag,IN)=>{"use strict";var UP=require("process"),MP=nt(),I_=class I_{constructor(e){let t=0;e._totalRequestsEnqueued!==0&&(t=Math.round(e._totalTimeInQueue/e._totalRequestsEnqueued)),this.gatheredDate=Date.now(),this.upTime=this.gatheredDate-e._createdDate,this.upTimeSinceReset=this.gatheredDate-e._timeOfReset,this.connectionRequests=e._totalConnectionRequests,this.requestsEnqueued=e._totalRequestsEnqueued,this.requestsDequeued=e._totalRequestsDequeued,this.failedRequests=e._totalFailedRequests,this.rejectedRequests=e._totalRequestsRejected,this.requestTimeouts=e._totalRequestTimeouts,this.maximumQueueLength=e._maximumQueueLength,this.currentQueueLength=e._connRequestQueue.length,this.timeInQueue=e._totalTimeInQueue,this.minimumTimeInQueue=e._minTimeInQueue,this.maximumTimeInQueue=e._maxTimeInQueue,this.averageTimeInQueue=t,this.connectionsInUse=e.connectionsInUse,this.connectionsOpen=e.connectionsOpen,this.connectString=e.connectString,this.edition=e.edition,this.events=e.events,this.externalAuth=e.externalAuth,this.homogeneous=e.homogeneous,this.poolAlias=e.poolAlias,this.poolIncrement=e.poolIncrement,this.poolMax=e.poolMax,this.poolMaxPerShard=e.poolMaxPerShard,this.poolMin=e.poolMin,this.poolPingInterval=e.poolPingInterval,this.poolPingTimeout=e.poolPingTimeout,this.poolTimeout=e.poolTimeout,this.queueMax=e.queueMax,this.queueTimeout=e.queueTimeout,this.sodaMetaDataCache=e.sodaMetaDataCache,this.stmtCacheSize=e.stmtCacheSize,this.user=e.user,this.threadPoolSize=UP.env.UV_THREADPOOL_SIZE,this.thin=MP.thin}logStatistics(){console.log(`
Driver:`),console.log("...thin mode:",this.thin),console.log("Pool statistics:"),console.log("...gathered at:",new Date(this.gatheredDate).toISOString()),console.log("...up time (milliseconds):",this.upTime),console.log("...up time from last reset (milliseconds)",this.upTimeSinceReset),console.log("...connection requests:",this.connectionRequests),console.log("...requests enqueued:",this.requestsEnqueued),console.log("...requests dequeued:",this.requestsDequeued),console.log("...requests failed:",this.failedRequests),console.log("...requests exceeding queueMax:",this.rejectedRequests),console.log("...requests exceeding queueTimeout:",this.requestTimeouts),console.log("...current queue length:",this.currentQueueLength),console.log("...maximum queue length:",this.maximumQueueLength),console.log("...sum of time in queue (milliseconds):",this.timeInQueue),console.log("...minimum time in queue (milliseconds):",this.minimumTimeInQueue),console.log("...maximum time in queue (milliseconds):",this.maximumTimeInQueue),console.log("...average time in queue (milliseconds):",this.averageTimeInQueue),console.log("...pool connections in use:",this.connectionsInUse),console.log("...pool connections open:",this.connectionsOpen),console.log("Pool attributes:"),console.log("...connectString:",this.connectString),console.log("...edition:",this.edition),console.log("...events:",this.events),console.log("...externalAuth:",this.externalAuth),console.log("...homogeneous:",this.homogeneous),console.log("...poolAlias:",this.poolAlias),console.log("...poolIncrement:",this.poolIncrement),console.log("...poolMax:",this.poolMax),console.log("...poolMaxPerShard:",this.poolMaxPerShard),console.log("...poolMin:",this.poolMin),console.log("...poolPingInterval (seconds):",this.poolPingInterval),console.log("...poolPingTimeout (milliseconds):",this.poolPingTimeout),console.log("...poolTimeout (seconds):",this.poolTimeout),console.log("...queueMax:",this.queueMax),console.log("...queueTimeout (milliseconds):",this.queueTimeout),console.log("...sessionCallback:",this.sessionCallback),console.log("...sodaMetaDataCache:",this.sodaMetaDataCache),console.log("...stmtCacheSize:",this.stmtCacheSize),console.log("...user:",this.user),console.log("Related environment variables:"),console.log("...UV_THREADPOOL_SIZE:",this.threadPoolSize)}};T(I_,"PoolStatistics");var m_=I_;IN.exports=m_});var ON=R((cg,CN)=>{"use strict";var VP=R_(),FP=require("events"),wt=Ye(),V=Y(),DN=nt(),ft=Le(),xP=Is(),kP=D_(),C_=class C_ extends FP{constructor(){super(),this._impl=new xP.PoolImpl,this._queueMax=0,this._queueTimeout=0,this._enableStatistics=!1,this._timeOfReset=this._createdDate=Date.now(),this._sessionCallback=void 0,this._connRequestQueue=[],this._connectionClass=DN.connectionClass}_checkPoolOpen(e){this.status===wt.POOL_STATUS_DRAINING?V.throwErr(V.ERR_POOL_CLOSING):this.status===wt.POOL_STATUS_CLOSED?V.throwErr(V.ERR_POOL_CLOSED):e||this.status===wt.POOL_STATUS_RECONFIGURING&&V.throwErr(V.ERR_POOL_RECONFIGURING)}_checkRequestQueue(){let e=this._connectionsOut;for(;this._connRequestQueue.length>0&&e<this.poolMax;){e+=1;let t=this._connRequestQueue.shift();this._enableStatistics&&(this._totalRequestsDequeued+=1,this._updateWaitStatistics(t)),t.timeoutHandle&&clearTimeout(t.timeoutHandle),t.resolve()}}get _enableStats(){return this._enableStatistics}_resetStatistics(){this._timeOfReset=Date.now(),this._totalConnectionRequests=0,this._totalRequestsEnqueued=0,this._totalRequestsDequeued=0,this._totalFailedRequests=0,this._totalRequestsRejected=0,this._totalRequestTimeouts=0,this._maximumQueueLength=this._connRequestQueue.length,this._totalTimeInQueue=0,this._minTimeInQueue=0,this._maxTimeInQueue=0}_setup(e,t){this._queueTimeout=e.queueTimeout,this._queueMax=e.queueMax,this._enableStatistics=e.enableStatistics,this._edition=e.edition,this._eventsFlag=e.events,this._externalAuth=e.externalAuth,this._homogeneous=e.homogeneous,this._user=e.user,this._connectString=e.connectString,this._status=wt.POOL_STATUS_OPEN,this._connectionsOut=0,this._poolAlias=t,this.on("_checkRequestQueue",this._checkRequestQueue),this._resetStatistics()}_updateWaitStatistics(e){let t=Date.now()-e.enqueuedTime;this._totalTimeInQueue+=t,this._minTimeInQueue===0?this._minTimeInQueue=t:this._minTimeInQueue=Math.min(this._minTimeInQueue,t),this._maxTimeInQueue=Math.max(this._maxTimeInQueue,t)}_verifyGetConnectionOptions(e){let t={};if(e.user!==void 0&&(V.assertParamPropValue(typeof e.user=="string",1,"user"),t.user=e.user),e.username!==void 0&&(V.assert(t.user===void 0,V.ERR_DBL_USER),V.assertParamPropValue(typeof e.username=="string",1,"username"),t.user=e.username),this.externalAuth&&t.user&&(t.user[0]!=="["||t.user.slice(-1)!=="]")&&V.throwErr(V.ERR_WRONG_USER_FORMAT_EXTAUTH_PROXY),e.password!==void 0&&(V.assertParamPropValue(typeof e.password=="string",1,"password"),this.externalAuth&&V.throwErr(V.ERR_WRONG_CRED_FOR_EXTAUTH),t.password=e.password),e.tag!==void 0&&(V.assertParamPropValue(typeof e.tag=="string",1,"tag"),t.tag=e.tag),e.matchAnyTag!==void 0&&(V.assertParamPropValue(typeof e.matchAnyTag=="boolean",1,"matchAnyTag"),t.matchAnyTag=e.matchAnyTag),e.shardingKey!==void 0){let s=e.shardingKey;V.assertParamPropValue(ft.isShardingKey(s),1,"shardingKey"),t.shardingKey=e.shardingKey}if(e.superShardingKey!==void 0){let s=e.superShardingKey;V.assertParamPropValue(ft.isShardingKey(s),1,"superShardingKey"),t.superShardingKey=e.superShardingKey}return e.privilege!==void 0&&(V.assertParamPropValue(ft.isPrivilege(e.privilege),1,"privilege"),t.privilege=e.privilege),t}async close(e){let t=0,s=!1;V.assertArgCount(arguments,0,1),arguments.length==1&&(V.assertParamValue(typeof e=="number",1),(e<0||isNaN(e)||e>2**31)&&V.throwErr(V.ERR_INVALID_PARAMETER_VALUE,1),s=!0,this._connectionsOut>0&&(t=e*1e3)),this._checkPoolOpen(!1),t>0&&(this._status=wt.POOL_STATUS_DRAINING,await new Promise(r=>{let n=setTimeout(()=>{this.removeAllListeners("_allCheckedIn"),r()},t);this.once("_allCheckedIn",()=>{clearTimeout(n),r()})})),!s&&this._connectionsOut>0&&V.throwErr(V.ERR_POOL_HAS_BUSY_CONNECTIONS),await this._impl.close(),this._status=wt.POOL_STATUS_CLOSED,this.emit("_afterPoolClose")}get connectionsInUse(){return this._impl.getConnectionsInUse()}get connectionsOpen(){return this._impl.getConnectionsOpen()}get connectString(){return this._connectString}get thin(){return DN.thin}get edition(){return this._edition}get enableStatistics(){return this._enableStatistics}get events(){return this._eventsFlag}get externalAuth(){return this._externalAuth}async getConnection(e){let t,s={};V.assertArgCount(arguments,0,1),arguments.length==1&&(V.assertParamValue(ft.isObject(e),1),s=this._verifyGetConnectionOptions(e)),s.connectionClass=this._connectionClass,this._checkPoolOpen(!0),this._enableStatistics&&(this._totalConnectionRequests+=1);try{t=this.poolMax}catch(r){throw this._enableStatistics&&(this._totalFailedRequests+=1),r}(this._connectionsOut>=t||this.status===wt.POOL_STATUS_RECONFIGURING)&&(this._connRequestQueue.length>=this._queueMax&&this._queueMax>=0&&(this._enableStatistics&&(this._totalRequestsRejected+=1),V.throwErr(V.ERR_QUEUE_MAX_EXCEEDED,this._queueMax)),await new Promise((r,n)=>{let _={resolve:r,reject:n};this._queueTimeout!==0&&(_.timeoutHandle=setTimeout(()=>{let a=this._connRequestQueue.indexOf(_);a>=0&&this._connRequestQueue.splice(a,1),this._enableStatistics&&(this._totalRequestTimeouts+=1,this._updateWaitStatistics(_));try{V.throwErr(V.ERR_CONN_REQUEST_TIMEOUT,this._queueTimeout)}catch(c){n(c)}},this._queueTimeout)),this._connRequestQueue.push(_),this._enableStatistics&&(_.enqueuedTime=Date.now(),this._totalRequestsEnqueued+=1,this._maximumQueueLength=Math.max(this._maximumQueueLength,this._connRequestQueue.length))}),this._checkPoolOpen(!0)),this._connectionsOut+=1;try{let r=new VP;r._impl=await this._impl.getConnection(s),r._pool=this;let n=s.tag||"";if(typeof this.sessionCallback=="function"&&(r._impl._newSession||r.tag!=n))try{await new Promise((_,a)=>{this.sessionCallback(r,n,function(c){c?a(c):_()})})}catch(_){throw await r.close({drop:!0}),_}return r.on("_afterConnClose",()=>{this._connectionsOut-=1,this.emit("_checkRequestQueue"),this._connectionsOut==0&&this.emit("_allCheckedIn")}),r}catch(r){throw this._connectionsOut-=1,this._enableStatistics&&(this._totalFailedRequests+=1),this.emit("_checkRequestQueue"),r}}getStatistics(){return this._checkPoolOpen(!1),this._enableStatistics!==!0?null:new kP(this)}get homogeneous(){return this._homogeneous}logStatistics(){let e=this.getStatistics();e===null&&V.throwErr(V.ERR_POOL_STATISTICS_DISABLED),e.logStatistics()}get poolAlias(){return this._poolAlias}get poolIncrement(){return this._impl.getPoolIncrement()}get poolMax(){return this._impl.getPoolMax()}get poolMaxPerShard(){return this._impl.getPoolMaxPerShard()}get poolMin(){return this._impl.getPoolMin()}get poolPingInterval(){return this._impl.getPoolPingInterval()}get poolPingTimeout(){return this._impl.getPoolPingTimeout()}get poolTimeout(){return this._impl.getPoolTimeout()}get queueMax(){return this._queueMax}get queueTimeout(){return this._queueTimeout}async reconfigure(e){V.assertArgCount(arguments,1,1),V.assertParamValue(ft.isObject(e)),V.assertParamPropUnsignedInt(e,1,"queueMax"),V.assertParamPropUnsignedInt(e,1,"queueTimeout"),V.assertParamPropBool(e,1,"enableStatistics"),V.assertParamPropBool(e,1,"resetStatistics"),V.assertParamPropUnsignedInt(e,1,"poolMin"),V.assertParamPropUnsignedIntNonZero(e,1,"poolMax"),V.assertParamPropUnsignedInt(e,1,"poolMaxPerShard"),V.assertParamPropUnsignedInt(e,1,"poolIncrement"),V.assertParamPropInt(e,1,"poolPingInterval"),V.assertParamPropUnsignedInt(e,1,"poolTimeout"),V.assertParamPropUnsignedInt(e,1,"stmtCacheSize"),V.assertParamPropBool(e,1,"sodaMetaDataCache"),e.poolMin>e.poolMax&&V.throwErr(V.ERR_INVALID_NUMBER_OF_CONNECTIONS,e.poolMax,e.poolMin),this._checkPoolOpen(!1),this._status=wt.POOL_STATUS_RECONFIGURING;try{await this._impl.reconfigure(e),(e.resetStatistics==!0||e.enableStatistics==!0&&this._enableStatistics==!1)&&this._resetStatistics(),e.queueMax!==void 0&&(this._queueMax=e.queueMax),e.queueTimeout!==void 0&&(this._queueTimeout=e.queueTimeout),e.enableStatistics!==void 0&&(this._enableStatistics=e.enableStatistics)}finally{this._status=wt.POOL_STATUS_OPEN}this.emit("_checkRequestQueue")}get sessionCallback(){return this._sessionCallback}async setAccessToken(e){V.assertArgCount(arguments,1,1),V.assertParamValue(ft.isObject(e),1),V.assertParamPropString(e,1,"token"),V.assertParamPropString(e,1,"privateKey"),await this._impl.setAccessToken(e)}get sodaMetaDataCache(){return this._impl.getSodaMetaDataCache()}get status(){return this._status}get stmtCacheSize(){return this._impl.getStmtCacheSize()}get user(){return this._user}};T(C_,"Pool");var ve=C_;ve.prototype.close=ft.callbackify(ve.prototype.close);ve.prototype.getConnection=ft.callbackify(ve.prototype.getConnection);ve.prototype.reconfigure=ft.callbackify(ve.prototype.reconfigure);ve.prototype.setAccessToken=ft.callbackify(ve.prototype.setAccessToken);ve.prototype.terminate=ve.prototype.close;ve.prototype._logStats=ve.prototype.logStatistics;CN.exports=ve});var Ee=R((lg,yN)=>{"use strict";var{Buffer:gN}=require("buffer"),Oe=Ye(),LN=vs();yN.exports={BIND_IN:Oe.BIND_IN,BIND_INOUT:Oe.BIND_INOUT,BIND_OUT:Oe.BIND_OUT,CLIENT_VERSION:Oe.VERSION_MAJOR<<24|Oe.VERSION_MINOR<<20|Oe.VERSION_PATCH<<12,CSFRM_IMPLICIT:Oe.CSFRM_IMPLICIT,CSFRM_NCHAR:Oe.CSFRM_NCHAR,DRIVER_NAME:Oe.DEFAULT_DRIVER_NAME+" thn",PURITY_DEFAULT:Oe.PURITY_DEFAULT,PURITY_NEW:Oe.PURITY_NEW,PURITY_SELF:Oe.PURITY_SELF,SYSASM:Oe.SYSASM,SYSBKP:Oe.SYSBKP,SYSDBA:Oe.SYSDBA,SYSDG:Oe.SYSDG,SYSKM:Oe.SYSKM,SYSOPER:Oe.SYSOPER,SYSRAC:Oe.SYSRAC,AUTH_MODE_DEFAULT:0,AUTH_MODE_PRELIM:8,AUTH_MODE_SYSASM:32768,AUTH_MODE_SYSBKP:131072,AUTH_MODE_SYSDBA:2,AUTH_MODE_SYSDGD:262144,AUTH_MODE_SYSKMT:524288,AUTH_MODE_SYSOPER:4,AUTH_MODE_SYSRAC:1048576,TNS_AUTH_MODE_LOGON:1,TNS_AUTH_MODE_CHANGE_PASSWORD:2,TNS_AUTH_MODE_SYSDBA:32,TNS_AUTH_MODE_SYSOPER:64,TNS_AUTH_MODE_PRELIM:128,TNS_AUTH_MODE_WITH_PASSWORD:256,TNS_AUTH_MODE_SYSASM:4194304,TNS_AUTH_MODE_SYSBKP:16777216,TNS_AUTH_MODE_SYSDGD:33554432,TNS_AUTH_MODE_SYSKMT:67108864,TNS_AUTH_MODE_SYSRAC:134217728,TNS_AUTH_MODE_IAM_TOKEN:536870912,TNS_PACKET_TYPE_CONNECT:1,TNS_PACKET_TYPE_ACCEPT:2,TNS_PACKET_TYPE_REFUSE:4,TNS_PACKET_TYPE_REDIRECT:5,TNS_PACKET_TYPE_DATA:6,TNS_PACKET_TYPE_RESEND:11,TNS_PACKET_TYPE_MARKER:12,TNS_PACKET_TYPE_CONTROL:14,TNS_DATA_TYPE_DEFAULT:0,TNS_DATA_TYPE_VARCHAR:1,TNS_DATA_TYPE_NUMBER:2,TNS_DATA_TYPE_BINARY_INTEGER:3,TNS_DATA_TYPE_FLOAT:4,TNS_DATA_TYPE_STR:5,TNS_DATA_TYPE_VNU:6,TNS_DATA_TYPE_PDN:7,TNS_DATA_TYPE_LONG:8,TNS_DATA_TYPE_VCS:9,TNS_DATA_TYPE_TIDDEF:10,TNS_DATA_TYPE_ROWID:11,TNS_DATA_TYPE_DATE:12,TNS_DATA_TYPE_VBI:15,TNS_DATA_TYPE_RAW:23,TNS_DATA_TYPE_LONG_RAW:24,TNS_DATA_TYPE_UB2:25,TNS_DATA_TYPE_UB4:26,TNS_DATA_TYPE_SB1:27,TNS_DATA_TYPE_SB2:28,TNS_DATA_TYPE_SB4:29,TNS_DATA_TYPE_SWORD:30,TNS_DATA_TYPE_UWORD:31,TNS_DATA_TYPE_PTRB:32,TNS_DATA_TYPE_PTRW:33,TNS_DATA_TYPE_OER8:290,TNS_DATA_TYPE_FUN:291,TNS_DATA_TYPE_AUA:292,TNS_DATA_TYPE_RXH7:293,TNS_DATA_TYPE_NA6:294,TNS_DATA_TYPE_OAC9:39,TNS_DATA_TYPE_AMS:40,TNS_DATA_TYPE_BRN:41,TNS_DATA_TYPE_BRP:298,TNS_DATA_TYPE_BRV:299,TNS_DATA_TYPE_KVA:300,TNS_DATA_TYPE_CLS:301,TNS_DATA_TYPE_CUI:302,TNS_DATA_TYPE_DFN:303,TNS_DATA_TYPE_DQR:304,TNS_DATA_TYPE_DSC:305,TNS_DATA_TYPE_EXE:306,TNS_DATA_TYPE_FCH:307,TNS_DATA_TYPE_GBV:308,TNS_DATA_TYPE_GEM:309,TNS_DATA_TYPE_GIV:310,TNS_DATA_TYPE_OKG:311,TNS_DATA_TYPE_HMI:312,TNS_DATA_TYPE_INO:313,TNS_DATA_TYPE_LNF:315,TNS_DATA_TYPE_ONT:316,TNS_DATA_TYPE_OPE:317,TNS_DATA_TYPE_OSQ:318,TNS_DATA_TYPE_SFE:319,TNS_DATA_TYPE_SPF:320,TNS_DATA_TYPE_VSN:321,TNS_DATA_TYPE_UD7:322,TNS_DATA_TYPE_DSA:323,TNS_DATA_TYPE_UIN:68,TNS_DATA_TYPE_PIN:327,TNS_DATA_TYPE_PFN:328,TNS_DATA_TYPE_PPT:329,TNS_DATA_TYPE_STO:331,TNS_DATA_TYPE_ARC:333,TNS_DATA_TYPE_MRS:334,TNS_DATA_TYPE_MRT:335,TNS_DATA_TYPE_MRG:336,TNS_DATA_TYPE_MRR:337,TNS_DATA_TYPE_MRC:338,TNS_DATA_TYPE_VER:339,TNS_DATA_TYPE_LON2:340,TNS_DATA_TYPE_INO2:341,TNS_DATA_TYPE_ALL:342,TNS_DATA_TYPE_UDB:343,TNS_DATA_TYPE_AQI:344,TNS_DATA_TYPE_ULB:345,TNS_DATA_TYPE_ULD:346,TNS_DATA_TYPE_SLS:91,TNS_DATA_TYPE_SID:348,TNS_DATA_TYPE_NA7:349,TNS_DATA_TYPE_LVC:94,TNS_DATA_TYPE_LVB:95,TNS_DATA_TYPE_CHAR:96,TNS_DATA_TYPE_AVC:97,TNS_DATA_TYPE_AL7:354,TNS_DATA_TYPE_K2RPC:355,TNS_DATA_TYPE_BINARY_FLOAT:100,TNS_DATA_TYPE_BINARY_DOUBLE:101,TNS_DATA_TYPE_CURSOR:102,TNS_DATA_TYPE_RDD:104,TNS_DATA_TYPE_XDP:359,TNS_DATA_TYPE_OSL:106,TNS_DATA_TYPE_OKO8:363,TNS_DATA_TYPE_EXT_NAMED:108,TNS_DATA_TYPE_INT_NAMED:109,TNS_DATA_TYPE_EXT_REF:110,TNS_DATA_TYPE_INT_REF:111,TNS_DATA_TYPE_CLOB:112,TNS_DATA_TYPE_BLOB:113,TNS_DATA_TYPE_BFILE:114,TNS_DATA_TYPE_CFILE:115,TNS_DATA_TYPE_RSET:116,TNS_DATA_TYPE_CWD:117,TNS_DATA_TYPE_JSON:119,TNS_DATA_TYPE_OAC122:120,TNS_DATA_TYPE_UD12:380,TNS_DATA_TYPE_AL8:381,TNS_DATA_TYPE_LFOP:382,TNS_DATA_TYPE_VECTOR:127,TNS_DATA_TYPE_FCRT:383,TNS_DATA_TYPE_DNY:384,TNS_DATA_TYPE_OPR:385,TNS_DATA_TYPE_PLS:386,TNS_DATA_TYPE_XID:387,TNS_DATA_TYPE_TXN:388,TNS_DATA_TYPE_DCB:389,TNS_DATA_TYPE_CCA:390,TNS_DATA_TYPE_WRN:391,TNS_DATA_TYPE_TLH:393,TNS_DATA_TYPE_TOH:394,TNS_DATA_TYPE_FOI:395,TNS_DATA_TYPE_SID2:396,TNS_DATA_TYPE_TCH:397,TNS_DATA_TYPE_PII:398,TNS_DATA_TYPE_PFI:399,TNS_DATA_TYPE_PPU:400,TNS_DATA_TYPE_PTE:401,TNS_DATA_TYPE_CLV:146,TNS_DATA_TYPE_RXH8:404,TNS_DATA_TYPE_N12:405,TNS_DATA_TYPE_AUTH:406,TNS_DATA_TYPE_KVAL:407,TNS_DATA_TYPE_DTR:152,TNS_DATA_TYPE_DUN:153,TNS_DATA_TYPE_DOP:154,TNS_DATA_TYPE_VST:155,TNS_DATA_TYPE_ODT:156,TNS_DATA_TYPE_FGI:413,TNS_DATA_TYPE_DSY:414,TNS_DATA_TYPE_DSYR8:415,TNS_DATA_TYPE_DSYH8:416,TNS_DATA_TYPE_DSYL:417,TNS_DATA_TYPE_DSYT8:418,TNS_DATA_TYPE_DSYV8:419,TNS_DATA_TYPE_DSYP:420,TNS_DATA_TYPE_DSYF:421,TNS_DATA_TYPE_DSYK:422,TNS_DATA_TYPE_DSYY:423,TNS_DATA_TYPE_DSYQ:424,TNS_DATA_TYPE_DSYC:425,TNS_DATA_TYPE_DSYA:426,TNS_DATA_TYPE_OT8:427,TNS_DATA_TYPE_DOL:172,TNS_DATA_TYPE_DSYTY:429,TNS_DATA_TYPE_AQE:430,TNS_DATA_TYPE_KV:431,TNS_DATA_TYPE_AQD:432,TNS_DATA_TYPE_AQ8:433,TNS_DATA_TYPE_TIME:178,TNS_DATA_TYPE_TIME_TZ:179,TNS_DATA_TYPE_TIMESTAMP:180,TNS_DATA_TYPE_TIMESTAMP_TZ:181,TNS_DATA_TYPE_INTERVAL_YM:182,TNS_DATA_TYPE_INTERVAL_DS:183,TNS_DATA_TYPE_EDATE:184,TNS_DATA_TYPE_ETIME:185,TNS_DATA_TYPE_ETTZ:186,TNS_DATA_TYPE_ESTAMP:187,TNS_DATA_TYPE_ESTZ:188,TNS_DATA_TYPE_EIYM:189,TNS_DATA_TYPE_EIDS:190,TNS_DATA_TYPE_RFS:449,TNS_DATA_TYPE_RXH10:450,TNS_DATA_TYPE_DCLOB:195,TNS_DATA_TYPE_DBLOB:196,TNS_DATA_TYPE_DBFILE:197,TNS_DATA_TYPE_DJSON:198,TNS_DATA_TYPE_KPN:454,TNS_DATA_TYPE_KPDNR:455,TNS_DATA_TYPE_DSYD:456,TNS_DATA_TYPE_DSYS:457,TNS_DATA_TYPE_DSYR:458,TNS_DATA_TYPE_DSYH:459,TNS_DATA_TYPE_DSYT:460,TNS_DATA_TYPE_DSYV:461,TNS_DATA_TYPE_AQM:462,TNS_DATA_TYPE_OER11:463,TNS_DATA_TYPE_UROWID:208,TNS_DATA_TYPE_AQL:466,TNS_DATA_TYPE_OTC:467,TNS_DATA_TYPE_KFNO:468,TNS_DATA_TYPE_KFNP:469,TNS_DATA_TYPE_KGT8:470,TNS_DATA_TYPE_RASB4:471,TNS_DATA_TYPE_RAUB2:472,TNS_DATA_TYPE_RAUB1:473,TNS_DATA_TYPE_RATXT:474,TNS_DATA_TYPE_RSSB4:475,TNS_DATA_TYPE_RSUB2:476,TNS_DATA_TYPE_RSUB1:477,TNS_DATA_TYPE_RSTXT:478,TNS_DATA_TYPE_RIDL:479,TNS_DATA_TYPE_GLRDD:480,TNS_DATA_TYPE_GLRDG:481,TNS_DATA_TYPE_GLRDC:482,TNS_DATA_TYPE_OKO:483,TNS_DATA_TYPE_DPP:484,TNS_DATA_TYPE_DPLS:485,TNS_DATA_TYPE_DPMOP:486,TNS_DATA_TYPE_TIMESTAMP_LTZ:231,TNS_DATA_TYPE_ESITZ:232,TNS_DATA_TYPE_UB8:233,TNS_DATA_TYPE_STAT:490,TNS_DATA_TYPE_RFX:491,TNS_DATA_TYPE_FAL:492,TNS_DATA_TYPE_CKV:493,TNS_DATA_TYPE_DRCX:494,TNS_DATA_TYPE_KGH:495,TNS_DATA_TYPE_AQO:496,TNS_DATA_TYPE_PNTY:241,TNS_DATA_TYPE_OKGT:498,TNS_DATA_TYPE_KPFC:499,TNS_DATA_TYPE_FE2:500,TNS_DATA_TYPE_SPFP:501,TNS_DATA_TYPE_DPULS:502,TNS_DATA_TYPE_BOOLEAN:252,TNS_DATA_TYPE_AQA:509,TNS_DATA_TYPE_KPBF:510,TNS_DATA_TYPE_TSM:513,TNS_DATA_TYPE_MSS:514,TNS_DATA_TYPE_KPC:516,TNS_DATA_TYPE_CRS:517,TNS_DATA_TYPE_KKS:518,TNS_DATA_TYPE_KSP:519,TNS_DATA_TYPE_KSPTOP:520,TNS_DATA_TYPE_KSPVAL:521,TNS_DATA_TYPE_PSS:522,TNS_DATA_TYPE_NLS:523,TNS_DATA_TYPE_ALS:524,TNS_DATA_TYPE_KSDEVTVAL:525,TNS_DATA_TYPE_KSDEVTTOP:526,TNS_DATA_TYPE_KPSPP:527,TNS_DATA_TYPE_KOL:528,TNS_DATA_TYPE_LST:529,TNS_DATA_TYPE_ACX:530,TNS_DATA_TYPE_SCS:531,TNS_DATA_TYPE_RXH:532,TNS_DATA_TYPE_KPDNS:533,TNS_DATA_TYPE_KPDCN:534,TNS_DATA_TYPE_KPNNS:535,TNS_DATA_TYPE_KPNCN:536,TNS_DATA_TYPE_KPS:537,TNS_DATA_TYPE_APINF:538,TNS_DATA_TYPE_TEN:539,TNS_DATA_TYPE_XSSCS:540,TNS_DATA_TYPE_XSSSO:541,TNS_DATA_TYPE_XSSAO:542,TNS_DATA_TYPE_KSRPC:543,TNS_DATA_TYPE_KVL:560,TNS_DATA_TYPE_SESSGET:563,TNS_DATA_TYPE_SESSREL:564,TNS_DATA_TYPE_XSSDEF:565,TNS_DATA_TYPE_PDQCINV:572,TNS_DATA_TYPE_PDQIDC:573,TNS_DATA_TYPE_KPDQCSTA:574,TNS_DATA_TYPE_KPRS:575,TNS_DATA_TYPE_KPDQIDC:576,TNS_DATA_TYPE_RTSTRM:578,TNS_DATA_TYPE_SESSRET:579,TNS_DATA_TYPE_SCN6:580,TNS_DATA_TYPE_KECPA:581,TNS_DATA_TYPE_KECPP:582,TNS_DATA_TYPE_SXA:583,TNS_DATA_TYPE_KVARR:584,TNS_DATA_TYPE_KPNGN:585,TNS_DATA_TYPE_XSNSOP:590,TNS_DATA_TYPE_XSATTR:591,TNS_DATA_TYPE_XSNS:592,TNS_DATA_TYPE_TXT:593,TNS_DATA_TYPE_XSSESSNS:594,TNS_DATA_TYPE_XSATTOP:595,TNS_DATA_TYPE_XSCREOP:596,TNS_DATA_TYPE_XSDETOP:597,TNS_DATA_TYPE_XSDESOP:598,TNS_DATA_TYPE_XSSETSP:599,TNS_DATA_TYPE_XSSIDP:600,TNS_DATA_TYPE_XSPRIN:601,TNS_DATA_TYPE_XSKVL:602,TNS_DATA_TYPE_XSSSDEF2:603,TNS_DATA_TYPE_XSNSOP2:604,TNS_DATA_TYPE_XSNS2:605,TNS_DATA_TYPE_IMPLRES:611,TNS_DATA_TYPE_OER19:612,TNS_DATA_TYPE_UB1ARRAY:613,TNS_DATA_TYPE_SESSSTATE:614,TNS_DATA_TYPE_AC_REPLAY:615,TNS_DATA_TYPE_AC_CONT:616,TNS_DATA_TYPE_KPDNREQ:622,TNS_DATA_TYPE_KPDNRNF:623,TNS_DATA_TYPE_KPNGNC:624,TNS_DATA_TYPE_KPNRI:625,TNS_DATA_TYPE_AQENQ:626,TNS_DATA_TYPE_AQDEQ:627,TNS_DATA_TYPE_AQJMS:628,TNS_DATA_TYPE_KPDNRPAY:629,TNS_DATA_TYPE_KPDNRACK:630,TNS_DATA_TYPE_KPDNRMP:631,TNS_DATA_TYPE_KPDNRDQ:632,TNS_DATA_TYPE_CHUNKINFO:636,TNS_DATA_TYPE_SCN:637,TNS_DATA_TYPE_SCN8:638,TNS_DATA_TYPE_UD21:639,TNS_DATA_TYPE_TNP:640,TNS_DATA_TYPE_OAC:646,TNS_DATA_TYPE_OER:652,TNS_DATA_TYPE_UDS:663,TNS_TYPE_REP_NATIVE:0,TNS_TYPE_REP_UNIVERSAL:1,TNS_TYPE_REP_ORACLE:10,TNS_MSG_TYPE_PROTOCOL:1,TNS_MSG_TYPE_DATA_TYPES:2,TNS_MSG_TYPE_FUNCTION:3,TNS_MSG_TYPE_ERROR:4,TNS_MSG_TYPE_ROW_HEADER:6,TNS_MSG_TYPE_ROW_DATA:7,TNS_MSG_TYPE_PARAMETER:8,TNS_MSG_TYPE_STATUS:9,TNS_MSG_TYPE_IO_VECTOR:11,TNS_MSG_TYPE_LOB_DATA:14,TNS_MSG_TYPE_WARNING:15,TNS_MSG_TYPE_DESCRIBE_INFO:16,TNS_MSG_TYPE_PIGGYBACK:17,TNS_MSG_TYPE_FLUSH_OUT_BINDS:19,TNS_MSG_TYPE_BIT_VECTOR:21,TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK:23,TNS_MSG_TYPE_ONEWAY_FN:26,TNS_MSG_TYPE_IMPLICIT_RESULTSET:27,TNS_MSG_TYPE_RENEGOTIATE:28,TNS_MSG_TYPE_END_OF_REQUEST:29,TNS_MSG_TYPE_FAST_AUTH:34,TNS_KEYWORD_NUM_CURRENT_SCHEMA:168,TNS_KEYWORD_NUM_EDITION:172,TNS_BIND_USE_INDICATORS:1,TNS_BIND_USE_LENGTH:2,TNS_BIND_ARRAY:64,TNS_BIND_DIR_OUTPUT:16,TNS_BIND_DIR_INPUT:32,TNS_BIND_DIR_INPUT_OUTPUT:48,TNS_EXEC_OPTION_PARSE:1,TNS_EXEC_OPTION_BIND:8,TNS_EXEC_OPTION_DEFINE:16,TNS_EXEC_OPTION_EXECUTE:32,TNS_EXEC_OPTION_FETCH:64,TNS_EXEC_OPTION_COMMIT:256,TNS_EXEC_OPTION_COMMIT_REEXECUTE:1,TNS_EXEC_OPTION_PLSQL_BIND:1024,TNS_EXEC_OPTION_DML_ROWCOUNTS:16384,TNS_EXEC_OPTION_NOT_PLSQL:32768,TNS_EXEC_OPTION_IMPLICIT_RESULTSET:32768,TNS_EXEC_OPTION_DESCRIBE:131072,TNS_EXEC_OPTION_NO_COMPRESSED_FETCH:262144,TNS_EXEC_OPTION_BATCH_ERRORS:524288,TNS_EXEC_OPTION_NO_IMPL_REL:2097152,TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION:1,TNS_SERVER_PIGGYBACK_OS_PID_MTS:2,TNS_SERVER_PIGGYBACK_TRACE_EVENT:3,TNS_SERVER_PIGGYBACK_SESS_RET:4,TNS_SERVER_PIGGYBACK_SYNC:5,TNS_SERVER_PIGGYBACK_LTXID:7,TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT:8,TNS_SERVER_PIGGYBACK_EXT_SYNC:9,TNS_SESSGET_SESSION_CHANGED:4,TNS_LOB_OP_GET_LENGTH:1,TNS_LOB_OP_READ:2,TNS_LOB_OP_TRIM:32,TNS_LOB_OP_WRITE:64,TNS_LOB_OP_GET_CHUNK_SIZE:16384,TNS_LOB_OP_CREATE_TEMP:272,TNS_LOB_OP_FREE_TEMP:273,TNS_LOB_OP_OPEN:32768,TNS_LOB_OP_CLOSE:65536,TNS_LOB_OP_IS_OPEN:69632,TNS_LOB_OP_ARRAY:524288,TNS_LOB_OP_FILE_OPEN:256,TNS_LOB_OP_FILE_CLOSE:512,TNS_LOB_OP_FILE_ISOPEN:1024,TNS_LOB_OP_FILE_EXISTS:2048,TNS_LOB_LOC_OFFSET_FLAG_1:4,TNS_LOB_LOC_OFFSET_FLAG_3:6,TNS_LOB_LOC_OFFSET_FLAG_4:7,TNS_LOB_QLOCATOR_VERSION:4,TNS_LOB_LOC_FIXED_OFFSET:16,TNS_LOB_LOC_FLAGS_BLOB:1,TNS_LOB_LOC_FLAGS_VALUE_BASED:32,TNS_LOB_LOC_FLAGS_ABSTRACT:64,TNS_LOB_LOC_FLAGS_INIT:8,TNS_LOB_LOC_FLAGS_TEMP:1,TNS_LOB_LOC_FLAGS_VAR_LENGTH_CHARSET:128,TNS_LOB_OPEN_READ_WRITE:2,TNS_LOB_OPEN_READ_ONLY:11,TNS_LOB_PREFETCH_FLAG:33554432,TNS_JSON_MAX_LENGTH:32*1024*1024,TNS_END_TO_END_ACTION:16,TNS_END_TO_END_CLIENT_IDENTIFIER:1,TNS_END_TO_END_CLIENT_INFO:256,TNS_END_TO_END_DBOP:512,TNS_END_TO_END_MODULE:8,TNS_VERSION_MIN_ACCEPTED:315,TNS_VERSION_MIN_LARGE_SDU:315,TNS_FUNC_AUTH_PHASE_ONE:118,TNS_FUNC_AUTH_PHASE_TWO:115,TNS_FUNC_CLOSE_CURSORS:105,TNS_FUNC_COMMIT:14,TNS_FUNC_EXECUTE:94,TNS_FUNC_FETCH:5,TNS_FUNC_LOB_OP:96,TNS_FUNC_LOGOFF:9,TNS_FUNC_PING:147,TNS_FUNC_ROLLBACK:15,TNS_FUNC_SET_END_TO_END_ATTR:135,TNS_FUNC_REEXECUTE:4,TNS_FUNC_REEXECUTE_AND_FETCH:78,TNS_FUNC_SET_SCHEMA:152,TNS_FUNC_SESSION_GET:162,TNS_FUNC_SESSION_RELEASE:163,TNS_FUNC_SESSION_STATE:176,TNS_FUNC_CANCEL_ALL:120,TNS_FUNC_TPC_TXN_SWITCH:103,TNS_FUNC_TPC_TXN_CHANGE_STATE:104,TNS_CHARSET_UTF8:873,TNS_CHARSET_UTF16:2e3,TNS_ENCODING_UTF8:"UTF-8",TNS_ENCODING_UTF16:"UTF-16LE",TNS_ENCODING_MULTI_BYTE:1,TNS_ENCODING_CONV_LENGTH:2,TNS_CCAP_SQL_VERSION:0,TNS_CCAP_LOGON_TYPES:4,TNS_CCAP_CTB_FEATURE_BACKPORT:5,TNS_CCAP_FIELD_VERSION:7,TNS_CCAP_SERVER_DEFINE_CONV:8,TNS_CCAP_TTC1:15,TNS_CCAP_OCI1:16,TNS_CCAP_TDS_VERSION:17,TNS_CCAP_RPC_VERSION:18,TNS_CCAP_RPC_SIG:19,TNS_CCAP_DBF_VERSION:21,TNS_CCAP_LOB:23,TNS_CCAP_TTC2:26,TNS_CCAP_UB2_DTY:27,TNS_CCAP_OCI2:31,TNS_CCAP_CLIENT_FN:34,TNS_CCAP_TTC3:37,TNS_CCAP_TTC4:40,TNS_CCAP_LOB2:42,TNS_CCAP_TTC5:44,TNS_CCAP_VECTOR_FEATURES:52,TNS_CCAP_MAX:53,TNS_CCAP_SQL_VERSION_MAX:6,TNS_CCAP_FIELD_VERSION_11_2:6,TNS_CCAP_FIELD_VERSION_12_1:7,TNS_CCAP_FIELD_VERSION_12_2:8,TNS_CCAP_FIELD_VERSION_12_2_EXT1:9,TNS_CCAP_FIELD_VERSION_18_1:10,TNS_CCAP_FIELD_VERSION_18_1_EXT_1:11,TNS_CCAP_FIELD_VERSION_19_1:12,TNS_CCAP_FIELD_VERSION_19_1_EXT_1:13,TNS_CCAP_FIELD_VERSION_20_1:14,TNS_CCAP_FIELD_VERSION_20_1_EXT_1:15,TNS_CCAP_FIELD_VERSION_21_1:16,TNS_CCAP_FIELD_VERSION_23_1:17,TNS_CCAP_FIELD_VERSION_23_1_EXT_1:18,TNS_CCAP_FIELD_VERSION_23_1_EXT_2:19,TNS_CCAP_FIELD_VERSION_23_1_EXT_3:20,TNS_CCAP_FIELD_VERSION_23_1_EXT_4:21,TNS_CCAP_FIELD_VERSION_23_1_EXT_5:22,TNS_CCAP_FIELD_VERSION_23_1_EXT_6:23,TNS_CCAP_FIELD_VERSION_23_4:24,TNS_CCAP_FIELD_VERSION_MAX:24,TNS_CCAP_O5LOGON:8,TNS_CCAP_O5LOGON_NP:2,TNS_CCAP_O7LOGON:32,TNS_CCAP_O8LOGON_LONG_IDENTIFIER:64,TNS_CCAP_O9LOGON_LONG_PASSWORD:128,TNS_CCAP_END_OF_CALL_STATUS:1,TNS_CCAP_IND_RCD:8,TNS_CCAP_FAST_BVEC:32,TNS_CCAP_FAST_SESSION_PROPAGATE:16,TNS_CCAP_APP_CTX_PIGGYBACK:128,TNS_CCAP_TDS_VERSION_MAX:3,TNS_CCAP_RPC_VERSION_MAX:7,TNS_CCAP_RPC_SIG_VALUE:3,TNS_CCAP_DBF_VERSION_MAX:1,TNS_CCAP_IMPLICIT_RESULTS:16,TNS_CCAP_BIG_CHUNK_CLR:32,TNS_CCAP_KEEP_OUT_ORDER:128,TNS_CCAP_LOB_UB8_SIZE:1,TNS_CCAP_LOB_ENCS:2,TNS_CCAP_LOB_PREFETCH_DATA:4,TNS_CCAP_LOB_TEMP_SIZE:8,TNS_CCAP_LOB_PREFETCH:64,TNS_CCAP_LOB_12C:128,TNS_CCAP_DRCP:16,TNS_CCAP_ZLNP:4,TNS_CCAP_INBAND_NOTIFICATION:4,TNS_CCAP_END_OF_REQUEST:32,TNS_CCAP_CLIENT_FN_MAX:12,TNS_CCAP_LOB2_QUASI:1,TNS_CCAP_LOB2_2GB_PREFETCH:4,TNS_CCAP_CTB_IMPLICIT_POOL:8,TNS_CCAP_VECTOR_SUPPORT:8,TNS_CCAP_VECTOR_FEATURE_BINARY:1,TNS_RCAP_COMPAT:0,TNS_RCAP_TTC:6,TNS_RCAP_MAX:7,TNS_RCAP_COMPAT_81:2,TNS_RCAP_TTC_ZERO_COPY:1,TNS_RCAP_TTC_32K:4,TNS_VERIFIER_TYPE_11G_1:45394,TNS_VERIFIER_TYPE_11G_2:6949,TNS_VERIFIER_TYPE_12C:18453,TNS_UDS_FLAGS_IS_JSON:256,TNS_UDS_FLAGS_IS_OSON:2048,TNS_EOCS_FLAGS_TXN_IN_PROGRESS:2,TNS_EOCS_FLAGS_SESS_RELEASE:32768,TNS_TPC_TXN_START:1,TNS_TPC_TXN_DETACH:2,TNS_TPC_TXN_COMMIT:1,TNS_TPC_TXN_ABORT:2,TNS_TPC_TXN_PREPARE:3,TNS_TPC_TXN_FORGET:4,TNS_TPC_TXN_STATE_PREPARE:0,TNS_TPC_TXN_STATE_REQUIRES_COMMIT:1,TNS_TPC_TXN_STATE_COMMITTED:2,TNS_TPC_TXN_STATE_ABORTED:3,TNS_TPC_TXN_STATE_READ_ONLY:4,TNS_TPC_TXN_STATE_FORGOTTEN:5,TNS_ESCAPE_CHAR:253,TNS_LONG_LENGTH_INDICATOR:LN.TNS_LONG_LENGTH_INDICATOR,TNS_NULL_LENGTH_INDICATOR:LN.TNS_NULL_LENGTH_INDICATOR,TNS_MAX_ROWID_LENGTH:18,TNS_DURATION_SESSION:10,TNS_MAX_LONG_LENGTH:2147483647,TNS_SDU:8192,TNS_TDU:65535,TNS_MAX_CONNECT_DATA:230,TNS_MAX_UROWID_LENGTH:3950,TNS_SERVER_CONVERTS_CHARS:1,DRCP_DEAUTHENTICATE:2,TNS_OBJ_IS_VERSION_81:128,TNS_OBJ_IS_DEGENERATE:16,TNS_OBJ_IS_COLLECTION:8,TNS_OBJ_NO_PREFIX_SEG:4,TNS_OBJ_IMAGE_VERSION:1,TNS_OBJ_MAX_SHORT_LENGTH:245,TNS_OBJ_ATOMIC_NULL:253,TNS_OBJ_NON_NULL_OID:2,TNS_OBJ_HAS_EXTENT_OID:8,TNS_OBJ_TOP_LEVEL:1,TNS_OBJ_HAS_INDEXES:16,TNS_OBJ_PLSQL_INDEX_TABLE:1,TNS_OBJ_NESTED_TABLE:2,TNS_OBJ_VARRAY:3,TNS_OBJ_TDS_TYPE_CHAR:1,TNS_OBJ_TDS_TYPE_DATE:2,TNS_OBJ_TDS_TYPE_FLOAT:5,TNS_OBJ_TDS_TYPE_NUMBER:6,TNS_OBJ_TDS_TYPE_VARCHAR:7,TNS_OBJ_TDS_TYPE_BOOLEAN:8,TNS_OBJ_TDS_TYPE_RAW:19,TNS_OBJ_TDS_TYPE_TIMESTAMP:21,TNS_OBJ_TDS_TYPE_TIMESTAMP_TZ:23,TNS_OBJ_TDS_TYPE_OBJ:27,TNS_OBJ_TDS_TYPE_COLL:28,TNS_OBJ_TDS_TYPE_CLOB:29,TNS_OBJ_TDS_TYPE_BLOB:30,TNS_OBJ_TDS_TYPE_TIMESTAMP_LTZ:33,TNS_OBJ_TDS_TYPE_BINARY_FLOAT:37,TNS_OBJ_TDS_TYPE_START_EMBED_ADT:39,TNS_OBJ_TDS_TYPE_END_EMBED_ADT:40,TNS_OBJ_TDS_TYPE_SUBTYPE_MARKER:43,TNS_OBJ_TDS_TYPE_EMBED_ADT_INFO:44,TNS_OBJ_TDS_TYPE_BINARY_DOUBLE:45,TNS_XML_TYPE_LOB:1,TNS_XML_TYPE_STRING:4,TNS_XML_TYPE_FLAG_SKIP_NEXT_4:1048576,TNS_ERR_INCONSISTENT_DATA_TYPES:932,TNS_ERR_VAR_NOT_IN_SELECT_LIST:1007,TNS_ERR_INBAND_MESSAGE:12573,TNS_ERR_INVALID_SERVICE_NAME:12514,TNS_ERR_INVALID_SID:12505,TNS_ERR_NO_DATA_FOUND:1403,TNS_ERR_SESSION_SHUTDOWN:12572,TNS_WARN_COMPILATION_CREATE:32,TNS_VECTOR_MAX_LENGTH:1048576,VECTOR_FORMAT_FLEX:0,VECTOR_META_FLAG_FLEXIBLE_DIM:1,PACKET_HEADER_SIZE:8,NUMBER_AS_TEXT_CHARS:172,CHUNKED_BYTES_CHUNK_SIZE:65536,TNS_DATA_FLAGS_END_OF_REQUEST:8192,TNS_BASE64_ALPHABET_ARRAY:gN.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),TNS_EXTENT_OID:gN.from("00000000000000000000000000010001","hex")}});var js=R((hg,wN)=>{"use strict";var{Buffer:g_}=require("buffer"),BN=Ee(),bP=require("crypto"),L_=class L_ extends Error{};T(L_,"OutOfPacketsError");var O_=L_;function oi(i,e,t,s){for(let r=0;r<t;r++)i[s+t-r-1]=BN.TNS_BASE64_ALPHABET_ARRAY[e&63],e=e>>6;return s+t}T(oi,"_convertBase64");function GP(i){let e=0;if(i.rba!==0||i.partitionID!==0||i.blockNum!==0||i.slotNum!=0){let t=g_.allocUnsafe(BN.TNS_MAX_ROWID_LENGTH);return e=oi(t,i.rba,6,e),e=oi(t,i.partitionID,3,e),e=oi(t,i.blockNum,6,e),oi(t,i.slotNum,3,e),t.toString("utf8")}}T(GP,"encodeRowID");function qP(i){let e=g_.from(i),t=bP.randomBytes(e.length);for(let s=0;s<e.length;s++)e[s]=t[s]^e[s];return{obfuscatedValue:t,value:e}}T(qP,"setObfuscatedValue");function HP(i,e){let t=g_.from(i);for(let r=0;r<i.length;r++)t[r]=i[r]^e[r];let s=t.toString();return t.fill(0),s}T(HP,"getDeobfuscatedValue");wN.exports={encodeRowID:GP,getDeobfuscatedValue:HP,OutOfPacketsError:O_,setObfuscatedValue:qP}});var je=R((Sg,YN)=>{"use strict";var{Buffer:y_}=require("buffer"),q=Ee(),Yt=Y(),w_=class w_{constructor(e){this.errorInfo={},this.connection=e,this.messageType=q.TNS_MSG_TYPE_FUNCTION,this.functionCode=0,this.callStatus=0,this.flushOutBinds=!1,this.endOfResponse=!1,this.endToEndSeqNum=0,this.errorOccurred=!1,this.warning=void 0}preProcess(){}async postProcess(){}writeFunctionHeader(e){e.writeUInt8(this.messageType),e.writeUInt8(this.functionCode),e.writeSeqNum(),e.caps.ttcFieldVersion>=q.TNS_CCAP_FIELD_VERSION_23_1_EXT_1&&e.writeUB8(0)}processErrorInfo(e){this.callStatus=e.readUB4(),e.skipUB2(),e.skipUB4(),e.skipUB2(),e.skipUB2(),e.skipUB2(),this.errorInfo.cursorId=e.readUB2();let t=e.readSB2();e.skipUB1(),e.skipUB1(),e.skipUB1(),e.skipUB1(),e.skipUB1(),e.readUInt8()&q.TNS_WARN_COMPILATION_CREATE&&(this.warning=Yt.getErr(Yt.WRN_COMPILATION_CREATE)),this.errorInfo.rowID=e.readRowID(),e.skipUB4(),e.skipUB1(),e.skipUB1(),e.skipUB2(),e.skipUB4(),e.readUB4()>0&&e.skipBytesChunked();let n=e.readUB2();if(n>0){this.errorInfo.batchErrors=[];let c=e.readUInt8();for(let E=0;E<n;E++){c===q.TNS_LONG_LENGTH_INDICATOR&&e.skipUB4();let l=e.readUB2();this.errorInfo.batchErrors.push(new Error(l))}c===q.TNS_LONG_LENGTH_INDICATOR&&e.skipBytes(1)}let _=e.readUB4();if(_>0){_>65535&&Yt.throwErr(Yt.ERR_TOO_MANY_BATCH_ERRORS);let c=e.readUInt8(),E;for(let l=0;l<_;l++)c===q.TNS_LONG_LENGTH_INDICATOR&&e.skipUB4(),E=e.readUB4(),l<n&&(this.errorInfo.batchErrors[l].offset=E);c===q.TNS_LONG_LENGTH_INDICATOR&&e.skipBytes(1)}let a=e.readUB2();if(a>0){e.skipBytes(1);for(let c=0;c<a;c++)e.skipUB2(),this.errorInfo.batchErrors[c].message=e.readStr(q.CSFRM_IMPLICIT),e.skipBytes(2)}this.errorInfo.num=e.readUB4(),this.errorInfo.rowCount=e.readUB8(),e.caps.ttcFieldVersion>=q.TNS_CCAP_FIELD_VERSION_20_1&&(e.skipUB4(),e.skipUB4()),this.errorInfo.num!==0&&(this.errorOccurred=!0,t>=0&&(this.errorInfo.pos=t),this.errorInfo.message=e.readStr(q.CSFRM_IMPLICIT),this.errorInfo.message=this.errorInfo.message.trim()),this.endOfResponse=!this.connection.nscon.endOfRequestSupport}processReturnParameter(){}processWarningInfo(e){let t=e.readUB2(),s=e.readUB2();if(e.skipUB2(),t!=0&&s>0){let r=e.readStr(q.CSFRM_IMPLICIT).trim();this.warning=new Error(r),this.warning.errorNum=t}}decode(e){this.process(e)}process(e){this.endOfResponse=!1,this.flushOutBinds=!1;do{this.savePoint(e);let t=e.readUInt8();this.processMessage(e,t)}while(!this.endOfResponse)}savePoint(e){e.savePoint()}processMessage(e,t){t===q.TNS_MSG_TYPE_ERROR?this.processErrorInfo(e):t===q.TNS_MSG_TYPE_WARNING?this.processWarningInfo(e):t===q.TNS_MSG_TYPE_STATUS?(this.callStatus=e.readUB4(),this.endToEndSeqNum=e.readUB2(),this.endOfResponse=!this.connection.nscon.endOfRequestSupport):t===q.TNS_MSG_TYPE_PARAMETER?this.processReturnParameter(e):t===q.TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK?this.processServerSidePiggyBack(e):t===q.TNS_MSG_TYPE_END_OF_REQUEST?this.endOfResponse=!0:Yt.throwErr(Yt.ERR_UNEXPECTED_MESSAGE_TYPE,t,e.pos,e.packetNum)}processServerSidePiggyBack(e){let t=e.readUInt8();if(t===q.TNS_SERVER_PIGGYBACK_LTXID)e.readUB4()>0&&e.skipBytesChunked();else if(!(t===q.TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION||t===q.TNS_SERVER_PIGGYBACK_TRACE_EVENT))if(t===q.TNS_SERVER_PIGGYBACK_OS_PID_MTS){let s=e.readUB2();e.skipUB1(),e.skipBytes(s)}else if(t===q.TNS_SERVER_PIGGYBACK_SYNC){e.skipUB2(),e.skipUB1();let s=e.readUB4();e.skipBytes(1);for(let r=0;r<s;r++){let n=e.readUB2();n>0&&e.skipBytesChunked(),n=e.readUB2(),n>0&&e.skipBytesChunked(),e.skipUB2()}e.skipUB4()}else if(t===q.TNS_SERVER_PIGGYBACK_EXT_SYNC)e.skipUB2(),e.skipUB1();else if(t===q.TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT)e.skipUB2(),e.skipUB1(),e.skipUB4(),e.skipUB4(),e.skipUB1(),e.readUB4()>0&&e.skipBytesChunked();else if(t===q.TNS_SERVER_PIGGYBACK_SESS_RET){e.skipUB2(),e.skipUB1();let s=e.readUB2();if(s>0){e.skipUB1();for(let n=0;n<s;++n){let _=e.readUB2();_>0&&e.skipBytesChunked(),_=e.readUB2(),_>0&&e.skipBytesChunked(),e.skipUB2()}}e.readUB4()&q.TNS_SESSGET_SESSION_CHANGED&&this.connection._drcpEstablishSession&&this.connection.statementCache.clearCursors(),this.connection._drcpEstablishSession=!1,e.skipUB4(),e.skipUB2()}else Yt.throwErr(Yt.ERR_UNKOWN_SERVER_SIDE_PIGGYBACK,t)}writePiggybacks(e){this.connection._currentSchemaModified&&this._writeCurrentSchemaPiggyback(e),this.connection.statementCache._cursorsToClose.size>0&&!this.connection._drcpEstablishSession&&this.writeCloseCursorsPiggyBack(e),(this.connection._actionModified||this.connection._clientIdentifierModified||this.connection._dbopModified||this.connection._clientInfoModified||this.connection._moduleModified)&&this._writeEndToEndPiggybacks(e),this.connection._tempLobsTotalSize>0&&this.writeCloseTempLobsPiggyback(e)}writePiggybackHeader(e,t){e.writeUInt8(q.TNS_MSG_TYPE_PIGGYBACK),e.writeUInt8(t),e.writeSeqNum(),e.caps.ttcFieldVersion>=q.TNS_CCAP_FIELD_VERSION_23_1_EXT_1&&e.writeUB8(0)}writeCloseCursorsPiggyBack(e){this.writePiggybackHeader(e,q.TNS_FUNC_CLOSE_CURSORS),e.writeUInt8(1),this.connection.statementCache.writeCursorsToClose(e)}writeCloseTempLobsPiggyback(e){let t=this.connection._tempLobsToClose,s=q.TNS_LOB_OP_FREE_TEMP|q.TNS_LOB_OP_ARRAY;this.writePiggybackHeader(e,q.TNS_FUNC_LOB_OP),e.writeUInt8(1),e.writeUB4(this.connection._tempLobsTotalSize),e.writeUInt8(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(s),e.writeUInt8(0),e.writeUB4(0),e.writeUB8(0),e.writeUB8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);for(let r of t)e.writeBytes(r);this.connection._tempLobsToClose=[],this.connection._tempLobsTotalSize=0}_writeCurrentSchemaPiggyback(e){this.writePiggybackHeader(e,q.TNS_FUNC_SET_SCHEMA),e.writeUInt8(1);let t=y_.byteLength(this.connection.currentSchema);e.writeUB4(t),e.writeBytesWithLength(y_.from(this.connection.currentSchema))}_writeEndToEndPiggybacks(e){let t=0;this.connection._actionModified&&(t|=q.TNS_END_TO_END_ACTION),this.connection._clientIdentifierModified&&(t|=q.TNS_END_TO_END_CLIENT_IDENTIFIER),this.connection._clientInfoModified&&(t|=q.TNS_END_TO_END_CLIENT_INFO),this.connection._moduleModified&&(t|=q.TNS_END_TO_END_MODULE),this.connection._dbOpModified&&(t|=q.TNS_END_TO_END_DBOP),this.writePiggybackHeader(e,q.TNS_FUNC_SET_END_TO_END_ATTR),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(t);let s=this.writeEndEndTraceValue(e,this.connection._clientIdentifier,this.connection._clientIdentifierModified),r=this.writeEndEndTraceValue(e,this.connection._module,this.connection._moduleModified),n=this.writeEndEndTraceValue(e,this.connection._action,this.connection._actionModified);e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);let _=this.writeEndEndTraceValue(e,this.connection._clientInfo,this.connection._clientInfoModified);e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);let a=this.writeEndEndTraceValue(e,this.connection._dbOp,this.connection._dbOpModified);this.connection._clientIdentifierModified&&this.connection._clientIdentifier&&e.writeBytesWithLength(s),this.connection._moduleModified&&this.connection._module&&e.writeBytesWithLength(r),this.connection._actionModified&&this.connection._action&&e.writeBytesWithLength(n),this.connection._clientInfoModified&&this.connection._clientInfo&&e.writeBytesWithLength(_),this.connection._dbOpModified&&this.connection._dbOp&&e.writeBytesWithLength(a),this.connection._actionModified=!1,this.connection._action="",this.connection._clientIdentifierModified=!1,this.connection._clientIdentifier="",this.connection._clientInfoModified=!1,this.connection._clientInfo="",this.connection._dbOpModified=!1,this.connection._dbOp="",this.connection._moduleModified=!1,this.connection._module=""}writeEndEndTraceValue(e,t,s){let r;return s?(e.writeUInt8(1),t?(r=y_.from(t),e.writeUB4(r.length)):e.writeUB4(0)):(e.writeUInt8(0),e.writeUB4(0)),r}saveDeferredErr(){this.deferredErr||(this.deferredErr=Yt.getErr(...arguments))}};T(w_,"Message");var B_=w_;YN.exports=B_});var M_=R((Ag,UN)=>{"use strict";var{Buffer:Zs}=require("buffer"),Re=Ee(),vP=je(),U_=class U_ extends vP{constructor(e,t){super(e),this.sourceLobImpl=t.sourceLobImpl||null,this.operation=t.operation,this.destLobImpl=t.destLobImpl||null,this.sourceOffset=t.sourceOffset||0,this.destOffset=t.destOffset||0,this.boolFlag=!1,t.data&&(this.data=t.data),this.functionCode=Re.TNS_FUNC_LOB_OP,this.sendAmount=t.sendAmount,this.amount=t.amount||0}encode(e){this.writeFunctionHeader(e),this.sourceLobImpl===null?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(this.sourceLobImpl._locator.length)),this.destLobImpl===null?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(this.destLobImpl._locator.length)),e.writeUB4(0),e.writeUB4(0),this.operation===Re.TNS_LOB_OP_CREATE_TEMP?e.writeUInt8(1):e.writeUInt8(0),e.writeUInt8(0),[Re.TNS_LOB_OP_CREATE_TEMP,Re.TNS_LOB_OP_IS_OPEN,Re.TNS_LOB_OP_FILE_EXISTS,Re.TNS_LOB_OP_FILE_ISOPEN].includes(this.operation)?e.writeUInt8(1):e.writeUInt8(0),e.writeUB4(this.operation),e.writeUInt8(0),e.writeUInt8(0),e.writeUB8(this.sourceOffset),e.writeUB8(this.destOffset),this.sendAmount?e.writeUInt8(1):e.writeUInt8(0);for(let s=0;s<3;s++)e.writeUInt16BE(0);if(this.sourceLobImpl&&e.writeBytes(this.sourceLobImpl._locator),this.destLobImpl&&e.writeBytes(this.destLobImpl._locator),this.operation===Re.TNS_LOB_OP_CREATE_TEMP&&(this.sourceLobImpl.dbType._csfrm===Re.CSFRM_NCHAR?(e.caps.checkNCharsetId(),e.writeUB4(Re.TNS_CHARSET_UTF16)):e.writeUB4(Re.TNS_CHARSET_UTF8)),this.data){let s;e.writeUInt8(Re.TNS_MSG_TYPE_LOB_DATA),this.sourceLobImpl.dbType._oraTypeNum===Re.TNS_DATA_TYPE_BLOB?s=this.data:this.sourceLobImpl.getCsfrm()===Re.CSFRM_NCHAR?(s=this.data,Zs.isBuffer(this.data)&&(s=s.toString()),s=Zs.from(s,Re.TNS_ENCODING_UTF16).swap16()):s=Zs.from(this.data),e.writeBytesWithLength(s)}this.sendAmount&&e.writeUB8(this.amount)}processMessage(e,t){if(t===Re.TNS_MSG_TYPE_LOB_DATA){let s=this.sourceLobImpl.dbType._oraTypeNum,r=e.readBytesWithLength();r!==null&&(s===Re.TNS_DATA_TYPE_BLOB||s===Re.TNS_DATA_TYPE_BFILE?r=Zs.from(r):this.sourceLobImpl.getCsfrm()===Re.CSFRM_NCHAR?r=Zs.from(r).swap16().toString("utf16le"):r=r.toString()),this.data=r}else super.processMessage(e,t)}processReturnParameter(e){let t,s,r,n;this.sourceLobImpl!==null&&(n=this.sourceLobImpl._locator.length,t=e.readBytes(n),s=t.slice(0,n),s.copy(this.sourceLobImpl._locator)),this.destLobImpl!==null&&(n=this.destLobImpl._locator.length,t=e.readBytes(n),s=t.slice(0,n),s.copy(this.destLobImpl._locator)),this.operation===Re.TNS_LOB_OP_CREATE_TEMP?(e.skipUB2(),e.skipBytes(3)):this.sendAmount&&(this.amount=e.readSB8()),(this.operation===Re.TNS_LOB_OP_IS_OPEN||this.operation===Re.TNS_LOB_OP_FILE_EXISTS||this.operation===Re.TNS_LOB_OP_FILE_ISOPEN)&&(r=e.readUInt8(),this.boolFlag=r>0)}};T(U_,"LobOpMessage");var Y_=U_;UN.exports=Y_});var $s=R((dg,VN)=>{"use strict";var{Buffer:_i}=require("buffer"),KP=_o(),j=Ee(),WP=M_(),MN=Y(),XP=Fe(),F_=class F_ extends KP{_getConnImpl(){return this.conn}async _sendMessage(e){let t=new WP(this.conn,e);return await this.conn._protocol._processMessage(t),e.operation===j.TNS_LOB_OP_READ?t.data?t.data:null:e.operation===j.TNS_LOB_OP_FILE_EXISTS||e.operation===j.TNS_LOB_OP_FILE_ISOPEN?t.boolFlag:t.amount}getChunkSize(){return this._chunkSize}async _getChunkSizeAsync(){this.checkConn();let e={operation:j.TNS_LOB_OP_GET_CHUNK_SIZE,sourceLobImpl:this,sendAmount:!0};this._chunkSize=this._pieceSize=await this._sendMessage(e)}getLength(){return this._length}getPieceSize(){return this._pieceSize}setPieceSize(e){this._pieceSize=e}getType(){return this.dbType}async getData(e=1,t=this._length){let s=!1;t||(t=this._length),this.dbType===XP.DB_TYPE_BFILE&&(await this.isFileOpen()||(s=!0,await this.openFile()));let r;try{r=await this.read(e,t)}finally{s&&await this.closeFile()}return r}async read(e,t){this.checkConn();let s={operation:j.TNS_LOB_OP_READ,sourceLobImpl:this,sourceOffset:e,sendAmount:!0,amount:t||this._pieceSize};return await this._sendMessage(s)}async write(e,t){this.checkConn();let s={operation:j.TNS_LOB_OP_WRITE,sourceLobImpl:this,sourceOffset:e,data:t};await this._sendMessage(s),this._length+=t.length}getCsfrm(){return this.dbType._csfrm!==j.CSFRM_NCHAR&&this._locator[j.TNS_LOB_LOC_OFFSET_FLAG_3]&j.TNS_LOB_LOC_FLAGS_VAR_LENGTH_CHARSET?j.CSFRM_NCHAR:this.dbType._csfrm}async create(e,t){this.dirtyLength=!1,this.conn=e,this.dbType=t,this._locator=_i.alloc(40),this._isTempLob=!0,this._length=0;let s={operation:j.TNS_LOB_OP_CREATE_TEMP,sourceLobImpl:this,amount:j.TNS_DURATION_SESSION,destOffset:t._oraTypeNum,sourceOffset:t._csfrm,sendAmount:!0};await this._sendMessage(s),await this._getChunkSizeAsync()}async fileExists(){this.checkConn();let e={operation:j.TNS_LOB_OP_FILE_EXISTS,sourceLobImpl:this};return await this._sendMessage(e)}getDirFileName(){let e=j.TNS_LOB_LOC_FIXED_OFFSET+2,t=this._locator.readUInt16BE(j.TNS_LOB_LOC_FIXED_OFFSET),s=j.TNS_LOB_LOC_FIXED_OFFSET+t+4,r=this._locator.readUInt16BE(e+t),n=this._locator.slice(e,e+t).toString(),_=this._locator.slice(s,s+r).toString();return{dirName:n,fileName:_}}checkConn(){this.conn.nscon.connected||MN.throwErr(MN.ERR_INVALID_CONNECTION)}close(){this.checkConn(),this._isTempLob&&(this.conn._tempLobsToClose.push(this._locator),this.conn._tempLobsTotalSize+=this._locator.length)}async closeFile(){this.checkConn();let e={operation:j.TNS_LOB_OP_FILE_CLOSE,sourceLobImpl:this};await this._sendMessage(e)}init(e,t,s,r,n){this.dirtyLength=!1,this.conn=e,this._locator=t,this._isTempLob=!1,(this._locator[j.TNS_LOB_LOC_OFFSET_FLAG_4]&j.TNS_LOB_LOC_FLAGS_TEMP===j.TNS_LOB_LOC_FLAGS_TEMP||this._locator[j.TNS_LOB_LOC_OFFSET_FLAG_1]&j.TNS_LOB_LOC_FLAGS_ABSTRACT===j.TNS_LOB_LOC_FLAGS_ABSTRACT)&&(this._isTempLob=!0),this.dbType=s,this._length=r,this._chunkSize=n,this._pieceSize=n}async isFileOpen(){let e={operation:j.TNS_LOB_OP_FILE_ISOPEN,sourceLobImpl:this};await this._sendMessage(e)}async openFile(){this.checkConn();let e={operation:j.TNS_LOB_OP_FILE_OPEN,sourceLobImpl:this,amount:j.TNS_LOB_OPEN_READ_ONLY,sendAmount:!0};return await this._sendMessage(e)}setDirFileName(e){let t=_i.byteLength(e.dirName),s=j.TNS_LOB_LOC_FIXED_OFFSET+2,r=s+t+2,n=_i.byteLength(e.fileName),_=r+n,a=_i.allocUnsafe(_);this._locator.copy(a,0,0,j.TNS_LOB_LOC_FIXED_OFFSET+1),a.writeUInt16BE(t,j.TNS_LOB_LOC_FIXED_OFFSET),a.write(e.dirName,s),a.writeInt16BE(n,s+t),a.write(e.fileName,r),this._locator=a}};T(F_,"ThinLobImpl");var V_=F_;VN.exports=V_});var b_=R((pg,xN)=>{"use strict";var{Buffer:ns}=require("buffer"),Z=Ee(),Ze=Y(),X=Fe(),zP=Fr(),{GrowableBuffer:QP}=fs(),JP=$s(),k_=class k_ extends QP{_readBytesWithLength(e){return e===Z.TNS_LONG_LENGTH_INDICATOR&&(e=this.readUInt32BE()),this.readBytes(e)}getIsAtomicNull(){let e=this.readUInt8();return e===Z.TNS_OBJ_ATOMIC_NULL||e===Z.TNS_NULL_LENGTH_INDICATOR?!0:(this.pos-=1,!1)}readHeader(e){if(e.imageFlags=this.readUInt8(),e.imageVersion=this.readUInt8(),this.readLength(),!(e.imageFlags&Z.TNS_OBJ_NO_PREFIX_SEG)){let t=this.readLength();this.skipBytes(t)}}readLength(){let e=this.readUInt8();return e!==Z.TNS_LONG_LENGTH_INDICATOR?e:this.readUInt32BE()}writeHeader(e){this.writeUInt8(e.imageFlags),this.writeUInt8(e.imageVersion),this.writeUInt8(Z.TNS_LONG_LENGTH_INDICATOR),this.writeUInt32BE(0),e._objType.isCollection&&(this.writeUInt8(1),this.writeUInt8(1))}writeLength(e){e<=Z.TNS_OBJ_MAX_SHORT_LENGTH?this.writeUInt8(e):(this.writeUInt8(Z.TNS_LONG_LENGTH_INDICATOR),this.writeUInt32BE(e))}_writeRawBytesAndLength(e,t){this.writeLength(t),this.writeBytes(e)}};T(k_,"DbObjectPickleBuffer");var er=k_,ai=class ai extends zP{constructor(e,t){if(typeof e=="function"&&(e=e.prototype._objType),super(e),this.packedData=t,this.unpackedAttrs=new Map,t)this.unpackedAssocArray=new Map,this.unpackedAssocKeys=void 0;else if(e){let s=ns.from([0,34,Z.TNS_OBJ_NON_NULL_OID,Z.TNS_OBJ_HAS_EXTENT_OID]);this.toid=ns.concat([s,e.oid,Z.TNS_EXTENT_OID]),this.flags=Z.TNS_OBJ_TOP_LEVEL,this.imageFlags=Z.TNS_OBJ_IS_VERSION_81,this.imageVersion=Z.TNS_OBJ_IMAGE_VERSION,e.isCollection?(this.imageFlags|=Z.TNS_OBJ_IS_COLLECTION,e.collectionType===Z.TNS_OBJ_PLSQL_INDEX_TABLE?this.unpackedAssocArray=new Map:this.unpackedArray=[]):this.imageFlags|=Z.TNS_OBJ_NO_PREFIX_SEG}}_ensureAssocKeys(){this.unpackedAssocKeys||(this.unpackedAssocKeys=[...this.unpackedAssocArray.keys()].sort())}_ensureUnpacked(){this.packedData&&this._unpackData()}_getPackedData(){if(this.packedData)return this.packedData;let e=new er;e.writeHeader(this),this._packData(e);let t=e.pos;return e.pos=3,e.writeUInt32BE(t),e.buf.subarray(0,t)}_packData(e){let t=this._objType;if(t.isCollection)if(e.writeUInt8(t.collectionFlags),t.collectionType===Z.TNS_OBJ_PLSQL_INDEX_TABLE){this._ensureAssocKeys(),e.writeLength(this.unpackedAssocKeys.length);for(let s of this.unpackedAssocKeys)e.writeInt32BE(s),this._packValue(e,t.elementType,t.elementTypeClass,this.unpackedAssocArray.get(s))}else{e.writeLength(this.unpackedArray.length);for(let s of this.unpackedArray)this._packValue(e,t.elementType,t.elementTypeClass,s)}else for(let s of t.attributes)this._packValue(e,s.type,s.typeClass,this.unpackedAttrs.get(s.name))}_packValue(e,t,s,r){if(r==null)s&&!s.prototype.isCollection?e.writeUInt8(Z.TNS_OBJ_ATOMIC_NULL):e.writeUInt8(Z.TNS_NULL_LENGTH_INDICATOR);else switch(t){case X.DB_TYPE_CHAR:case X.DB_TYPE_VARCHAR:e.writeBytesWithLength(ns.from(r));break;case X.DB_TYPE_NCHAR:case X.DB_TYPE_NVARCHAR:e.writeBytesWithLength(ns.from(r,"utf16le").swap16());break;case X.DB_TYPE_NUMBER:e.writeOracleNumber(r.toString());break;case X.DB_TYPE_BINARY_INTEGER:case X.DB_TYPE_BOOLEAN:e.writeUInt8(4),e.writeUInt32BE(r);break;case X.DB_TYPE_RAW:e.writeBytesWithLength(r);break;case X.DB_TYPE_BINARY_DOUBLE:e.writeUInt8(8),e.writeBinaryDouble(r);break;case X.DB_TYPE_BINARY_FLOAT:e.writeUInt8(4),e.writeBinaryFloat(r);break;case X.DB_TYPE_DATE:case X.DB_TYPE_TIMESTAMP:case X.DB_TYPE_TIMESTAMP_LTZ:case X.DB_TYPE_TIMESTAMP_TZ:e.writeOracleDate(r,t);break;case X.DB_TYPE_OBJECT:this._objType.isCollection||r._objType.isCollection?e.writeBytesWithLength(r._getPackedData()):r._packData(e);break;default:Ze.throwErr(Ze.ERR_NOT_IMPLEMENTED,t)}}_unpackData(){let e=new er(this.packedData);e.readHeader(this),this._unpackDataFromBuf(e),this.packedData=void 0}_unpackDataFromBuf(e){let t,s,r,n,_=this._objType;if(_.isCollection){_.collectionType===Z.TNS_OBJ_PLSQL_INDEX_TABLE?s=new Map:t=[],this.collectionFlags=e.readUInt8();let a=e.readLength();for(let c=0;c<a;c++){_.collectionType===Z.TNS_OBJ_PLSQL_INDEX_TABLE&&(r=e.readUInt32BE());let E=this._unpackValue(e,_.elementType,_.elementTypeClass);_.collectionType===Z.TNS_OBJ_PLSQL_INDEX_TABLE?s.set(r,E):t.push(E)}}else{n=new Map;for(let a of _.attributes){let c=this._unpackValue(e,a.type,a.typeClass);n.set(a.name,c)}}this.unpackedAttrs=n,this.unpackedArray=t,this.unpackedAssocArray=s}_unpackValue(e,t,s){let r,n,_;switch(t){case X.DB_TYPE_NUMBER:return _=e.readOracleNumber(),_!==null&&(_=parseFloat(_)),_;case X.DB_TYPE_BINARY_INTEGER:return e.readBinaryInteger();case X.DB_TYPE_VARCHAR:case X.DB_TYPE_CHAR:return e.readStr(Z.CSFRM_IMPLICIT);case X.DB_TYPE_NVARCHAR:case X.DB_TYPE_NCHAR:return e.readStr(Z.CSFRM_NCHAR);case X.DB_TYPE_RAW:return _=e.readBytesWithLength(),_!==null&&(_=ns.from(_)),_;case X.DB_TYPE_BINARY_DOUBLE:return e.readBinaryDouble();case X.DB_TYPE_BINARY_FLOAT:return e.readBinaryFloat();case X.DB_TYPE_DATE:case X.DB_TYPE_TIMESTAMP:return e.readOracleDate(!0);case X.DB_TYPE_TIMESTAMP_LTZ:case X.DB_TYPE_TIMESTAMP_TZ:return e.readOracleDate(!1);case X.DB_TYPE_BOOLEAN:return e.readBool();case X.DB_TYPE_OBJECT:case X.DB_TYPE_XMLTYPE:return r=e.getIsAtomicNull(),r?null:(n=new ai(s),n._objType.isXmlType?FN(n._objType._connection,e.readBytesWithLength()):(n._objType.isCollection||this._objType.isCollection?n.packedData=ns.from(e.readBytesWithLength()):n._unpackDataFromBuf(e),n));default:Ze.throwErr(Ze.ERR_NOT_IMPLEMENTED,t)}}append(e){if(this._ensureUnpacked(),this.unpackedArray){let t=this._objType;t.maxNumElements>0&&this.unpackedArray.length>=t.maxNumElements&&Ze.throwErr(Ze.ERR_INVALID_COLL_INDEX_SET,this.unpackedArray.length,0,t.maxNumElements),this.unpackedArray.push(e)}else{this._ensureAssocKeys();let t;if(this.unpackedAssocKeys.length===0)t=0;else{let s=this.unpackedAssocKeys.length-1;t=this.unpackedAssocKeys[s]+1}this.unpackedAssocArray.set(t,e),this.unpackedAssocKeys.push(t)}}deleteElement(e){this._ensureUnpacked(),this.unpackedArray?(this._objType.collectionType==Z.TNS_OBJ_VARRAY&&Ze.throwErr(Ze.ERR_DELETE_ELEMENTS_OF_VARRAY),this.unpackedArray.splice(e,1)):(this._unpackedAssocKeys=void 0,this.unpackedAssocArray.delete(e))}getAttrValue(e){this._ensureUnpacked();let t=this.unpackedAttrs.get(e.name);return t===void 0?null:t}getElement(e){let t;return this._ensureUnpacked(),this.unpackedArray?t=this.unpackedArray[e]:t=this.unpackedAssocArray.get(e),t===void 0&&Ze.throwErr(Ze.ERR_INVALID_COLL_INDEX_GET,e),t}getFirstIndex(){if(this._ensureUnpacked(),this.unpackedArray)return 0;if(this.unpackedAssocArray)return this._ensureAssocKeys(),this.unpackedAssocKeys[0]}getKeys(){return this._ensureUnpacked(),this.unpackedArray?Array.from(this.unpackedArray.keys()):this.unpackedAssocArray?(this._ensureAssocKeys(),Array.from(this.unpackedAssocKeys)):[]}getLastIndex(){if(this._ensureUnpacked(),this.unpackedArray){if(this.unpackedArray.length>0)return this.unpackedArray.length-1}else if(this.unpackedAssocArray)return this._ensureAssocKeys(),this.unpackedAssocKeys[this.unpackedAssocKeys.length-1]}getNextIndex(e){if(this._ensureUnpacked(),this.unpackedArray){if(e+1<this.unpackedArray.length)return e+1}else if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys)if(t>e)return t}}getPrevIndex(e){if(this._ensureUnpacked(),this.unpackedArray){if(e>0)return e-1}else if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys.reverse())if(t<e)return t}}getValues(){let e=[];if(this._ensureUnpacked(),this.unpackedArray)return Array.from(this.unpackedArray);if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys)e.push(this.unpackedAssocArray.get(t))}return e}hasElement(e){return this._ensureUnpacked(),this.unpackedArray?e>=0&&e<this.unpackedArray.length:this.unpackedAssocArray.has(e)}setAttrValue(e,t){this._ensureUnpacked(),this.unpackedAttrs.set(e.name,t)}setElement(e,t){if(this._ensureUnpacked(),this.unpackedArray){let s=Math.max(this.unpackedArray.length-1,0);e>s&&Ze.throwErr(Ze.ERR_INVALID_COLL_INDEX_SET,e,0,s),this.unpackedArray[e]=t}else this.unpackedAssocArray.has(e)||(this.unpackedAssocKeys=void 0),this.unpackedAssocArray.set(e,t)}trim(e){this._ensureUnpacked(),e>0&&(this.unpackedArray=this.unpackedArray.slice(0,this.unpackedArray.length-e))}};T(ai,"ThinDbObjectImpl");var x_=ai;function FN(i,e){let t,s=new er(e),r={};s.readHeader(r),s.skipBytes(1);let n=s.readUInt32BE();n&Z.TNS_XML_TYPE_FLAG_SKIP_NEXT_4&&s.skipBytes(4);let _=s.numBytesLeft(),a=s.readBytes(_);if(n&Z.TNS_XML_TYPE_STRING)t=a.toString();else if(n&Z.TNS_XML_TYPE_LOB){let c=new JP,E=ns.from(a);c.init(i,E,X.DB_TYPE_CLOB,0,0),t=c}else Ze.throwErr(Ze.ERR_UNEXPECTED_XML_TYPE,n);return t}T(FN,"readXML");xN.exports={ThinDbObjectImpl:x_,readXML:FN}});var H_=R((mg,GN)=>{"use strict";var{Buffer:Kt}=require("buffer"),kN=js(),I=Ee(),jP=je(),{ThinDbObjectImpl:ZP,readXML:$P}=b_(),ep=$s(),Wt=Y(),ie=Fe(),q_=class q_ extends jP{constructor(e,t=null,s=null){super(e),this.statement=t,this.options=s,this.offset=0,this.numExecs=1,this.arrayDmlRowCounts=!1,this.requiresDefine=!1,this.rowIndex=t.bufferRowCount||0,this.dmlRowCounts=[],this.batchErrors=!1,this.outVariables=[],this.inFetch=!1,this.parseOnly=!1,this.resultSetsToSetup=[],this.deferredErr=null}processMessage(e,t){if(t===I.TNS_MSG_TYPE_DESCRIBE_INFO){e.skipBytesChunked();let s=this.statement.queryVars;this.statement.queryVars=[],this.statement.numQueryVars=0,this.statement.bufferRowCount=0,this.statement.bufferRowIndex=0,this.processDescribeInfo(e,this.resultSet,s),this.outVariables=this.statement.queryVars}else t===I.TNS_MSG_TYPE_ROW_HEADER?this.processRowHeader(e):t===I.TNS_MSG_TYPE_ROW_DATA?this.processRowData(e):t===I.TNS_MSG_TYPE_IMPLICIT_RESULTSET?this.processImplicitResultSet(e):t===I.TNS_MSG_TYPE_BIT_VECTOR?this.processBitVector(e):t===I.TNS_MSG_TYPE_IO_VECTOR?this.processIOVector(e):t===I.TNS_MSG_TYPE_FLUSH_OUT_BINDS?(this.flushOutBinds=!0,this.endOfResponse=!0):t===I.TNS_MSG_TYPE_ERROR?this.processErrorInfo(e):super.processMessage(e,t)}processErrorInfo(e){super.processErrorInfo(e),this.errorInfo.cursorId!==0&&(this.statement.cursorId=this.errorInfo.cursorId),this.statement.isPlSql||(this.statement.rowCount=this.errorInfo.rowCount),this.errorInfo.rowCount>0&&(this.statement.lastRowid=kN.encodeRowID(this.errorInfo.rowID)),this.options.batchErrors=this.errorInfo.batchErrors,this.batchErrors&&this.options.batchErrors===null&&(this.options.batchErrors=[]),this.errorInfo.num===I.TNS_ERR_NO_DATA_FOUND&&this.statement.isQuery?(this.errorInfo.num=0,this.errorOccurred=!1,this.statement.moreRowsToFetch=!1):this.retry?this.retry=!1:this.statement.isQuery&&(this.errorInfo.num===I.TNS_ERR_VAR_NOT_IN_SELECT_LIST||this.errorInfo.num===I.TNS_ERR_INCONSISTENT_DATA_TYPES)?(this.retry=!0,this.connection.statementCache.clearCursor(this.statement)):this.errorInfo.num!==0&&this.errorInfo.cursorId!==0&&(Wt.ERR_INTEGRITY_ERROR_CODES.includes(this.errorInfo.num)||(this.connection.statementCache.clearCursor(this.statement),this.statement.returnToCache=!1)),this.errorInfo.batchErrors&&(this.errorOccurred=!1)}_adjustFetchType(e,t){(t.fetchInfo.dbType._oraTypeNum===I.TNS_DATA_TYPE_CLOB&&e.fetchInfo.fetchType._oraTypeNum===I.TNS_DATA_TYPE_LONG||t.fetchInfo.dbType._oraTypeNum===I.TNS_DATA_TYPE_BLOB&&e.fetchInfo.fetchType._oraTypeNum===I.TNS_DATA_TYPE_LONG_RAW||t.fetchInfo.dbType._oraTypeNum===I.TNS_DATA_TYPE_JSON&&e.fetchInfo.fetchType._oraTypeNum===I.TNS_DATA_TYPE_VARCHAR||t.fetchInfo.dbType._oraTypeNum===I.TNS_DATA_TYPE_VECTOR&&e.fetchInfo.fetchType._oraTypeNum===I.TNS_DATA_TYPE_LONG)&&(t.type=e.fetchInfo.fetchType,t.maxSize=e.maxSize)}processDescribeInfo(e,t,s){let r=t.statement;e.skipUB4(),r.numQueryVars=e.readUB4(),r.numQueryVars>0&&e.skipUB1(),t.metadata=[];let n=[],_=[];for(let c=0;c<r.numQueryVars;c++){let E=this.processColumnInfo(e,c+1);s&&c<s.length&&this._adjustFetchType(s[c],E),_.push(E),n.push(E.fetchInfo)}let a=e.readUB4();a>0&&e.skipBytesChunked(),e.skipUB4(),e.skipUB4(),e.skipUB4(),e.skipUB4(),a=e.readUB4(),a>0&&e.skipBytesChunked(),t.metadata=n,r.queryVars=_,this.resultSetsToSetup.push(t)}processColumnInfo(e,t){let s=e.readUInt8();e.skipUB1();let r=e.readInt8(),n=e.readInt8(),_=e.readUB4();e.skipUB4(),e.skipUB8();let a,c=e.readUB4();c>0&&(a=Kt.from(e.readBytesWithLength())),e.skipUB2(),e.skipUB2();let E=e.readUInt8(),l=e.readUB4();s===I.TNS_DATA_TYPE_RAW&&(l=_),e.caps.ttcFieldVersion>=I.TNS_CCAP_FIELD_VERSION_12_2&&e.skipUB4();let N=!!e.readUInt8();e.skipUB1();let P;c=e.readUB4(),c>0&&(P=e.readStr(I.CSFRM_IMPLICIT));let d;c=e.readUB4(),c>0&&(d=e.readStr(I.CSFRM_IMPLICIT)),c=e.readUB4();let S;c>0&&(S=e.readStr(I.CSFRM_IMPLICIT)),e.skipUB2();let A=e.readUB4(),p={name:P,dbType:ie.getTypeByOraTypeNum(s,E),nullable:N};if(p.isJson=!!(A&I.TNS_UDS_FLAGS_IS_JSON),p.isOson=!!(A&I.TNS_UDS_FLAGS_IS_OSON),e.caps.ttcFieldVersion>=I.TNS_CCAP_FIELD_VERSION_23_1&&(c=e.readUB4(),c>0&&(p.domainSchema=e.readStr(I.CSFRM_IMPLICIT)),c=e.readUB4(),c>0&&(p.domainName=e.readStr(I.CSFRM_IMPLICIT))),e.caps.ttcFieldVersion>=I.TNS_CCAP_FIELD_VERSION_23_1_EXT_3&&e.readUB4()>0){p.annotations={},e.skipUB1();let u=e.readUB4();e.skipUB1();let C,O;for(let M=0;M<u;M++)e.skipUB4(),O="",C=e.readStr(I.CSFRM_IMPLICIT),c=e.readUB4(),c>0&&(O=e.readStr(I.CSFRM_IMPLICIT)),p.annotations[C]=O,e.skipUB4();e.skipUB4()}if(e.caps.ttcFieldVersion>=I.TNS_CCAP_FIELD_VERSION_23_4){let u=e.readUB4(),C=e.readUInt8(),O=e.readUInt8();p.dbType===ie.DB_TYPE_VECTOR&&(O&I.VECTOR_META_FLAG_FLEXIBLE_DIM||(p.vectorDimensions=u),C!==I.VECTOR_FORMAT_FLEX&&(p.vectorFormat=C))}switch(p.dbType){case ie.DB_TYPE_VARCHAR:case ie.DB_TYPE_NVARCHAR:case ie.DB_TYPE_CHAR:case ie.DB_TYPE_NCHAR:case ie.DB_TYPE_RAW:p.byteSize=l;break;case ie.DB_TYPE_NUMBER:p.precision=r;break;case ie.DB_TYPE_TIMESTAMP:case ie.DB_TYPE_TIMESTAMP_TZ:case ie.DB_TYPE_TIMESTAMP_LTZ:p.precision=n;break;case ie.DB_TYPE_OBJECT:p.dbTypeClass=this.connection._getDbObjectType(d,S,void 0,a),p.dbTypeClass.partial&&this.connection._partialDbObjectTypes.push(p.dbTypeClass),p.dbTypeClass.isXmlType&&(p.dbType=ie.DB_TYPE_XMLTYPE);break;default:break}return p.dbType===ie.DB_TYPE_NUMBER&&(p.scale=n),{fetchInfo:p,type:p.dbType,maxSize:_,columnNum:t,values:new Array(this.options.fetchArraySize)}}processRowHeader(e){e.skipUB1(),e.skipUB2(),e.skipUB4(),e.skipUB4(),e.skipUB2();let t=e.readUB4();t>0&&(this.bitVector=Kt.from(e.readBytesWithLength())),t=e.readUB4(),t>0&&e.skipBytesChunked()}isDuplicateData(e){if(!this.bitVector)return!1;let t=Math.floor(e/8),s=e%8;return(this.bitVector[t]&1<<s)===0}processRowData(e){let t;for(let[s,r]of this.outVariables.entries())if(r.isArray){r.numElementsInArray=e.readUB4();let n=new Array(r.numElementsInArray).fill(null);for(let _=0;_<r.numElementsInArray;_++)t=this.processColumnData(e,r,_),n[_]=t;r.values[this.rowIndex]=n}else if(this.statement.isReturning){let n=e.readUB4(),_=Array(n).fill(null);for(let a=0;a<n;a++)_[a]=this.processColumnData(e,r,a);r.values[this.rowIndex]=_}else this.isDuplicateData(s)?(this.rowIndex===0&&r.outConverter?t=r.lastRawValue:t=r.values[this.statement.lastRowIndex],r.values[this.rowIndex]=t):(t=this.processColumnData(e,r,this.rowIndex),r.values[this.rowIndex]=t);this.rowIndex++,this.inFetch&&(this.statement.lastRowIndex=this.rowIndex-1,this.statement.bufferRowCount++,this.bitVector=null)}processIOVector(e){let t;e.skipUB1();let s=e.readUB2(),n=e.readUB4()*256+s;e.skipUB4(),e.skipUB2(),t=e.readUB2(),t>0&&e.skipBytes(t),t=e.readUB2(),t>0&&e.skipBytes(t),this.outVariables=[];for(let _=0;_<n;_++){let a=this.statement.bindInfoList[_];a.bindDir=e.readUInt8(),a.bindDir!==I.TNS_BIND_DIR_INPUT&&this.outVariables.push(a.bindVar)}}processColumnData(e,t){let s=t.type,r=s._oraTypeNum,n=s._csfrm,_=t.maxSize,a=null;if(_===0&&r!==I.TNS_DATA_TYPE_LONG&&r!==I.TNS_DATA_TYPE_LONG_RAW&&r!==I.TNS_DATA_TYPE_UROWID)a=null;else if(r===I.TNS_DATA_TYPE_VARCHAR||r===I.TNS_DATA_TYPE_CHAR||r===I.TNS_DATA_TYPE_LONG)n===I.CSFRM_NCHAR&&e.caps.checkNCharsetId(),a=e.readStr(n);else if(r===I.TNS_DATA_TYPE_RAW||r===I.TNS_DATA_TYPE_LONG_RAW)a=e.readBytesWithLength(),a!==null&&(a=Kt.from(a));else if(r===I.TNS_DATA_TYPE_NUMBER)a=e.readOracleNumber(),!this.inFetch&&a!==null&&(a=parseFloat(a));else if(r===I.TNS_DATA_TYPE_DATE||r===I.TNS_DATA_TYPE_TIMESTAMP||r===I.TNS_DATA_TYPE_TIMESTAMP_LTZ||r===I.TNS_DATA_TYPE_TIMESTAMP_TZ){let c=r===I.TNS_DATA_TYPE_DATE||r===I.TNS_DATA_TYPE_TIMESTAMP;a=e.readOracleDate(c)}else if(r===I.TNS_DATA_TYPE_ROWID)if(!this.inFetch)a=e.readStr(I.CSFRM_IMPLICIT);else{let c=e.readUInt8();if(bN(c))a=null;else{let E=e.readRowID();a=kN.encodeRowID(E)}}else if(r===I.TNS_DATA_TYPE_UROWID)this.inFetch?a=e.readURowID():a=e.readStr(I.CSFRM_IMPLICIT);else if(r===I.TNS_DATA_TYPE_BINARY_DOUBLE)a=e.readBinaryDouble();else if(r===I.TNS_DATA_TYPE_BINARY_FLOAT)a=e.readBinaryFloat();else if(r===I.TNS_DATA_TYPE_BINARY_INTEGER)a=e.readOracleNumber(),a!==null&&(a=parseFloat(a));else if(r===I.TNS_DATA_TYPE_CURSOR){let c=e.readUInt8();bN(c)?a=null:(a=this.createCursorFromDescribe(e),a.statement.cursorId=e.readUB2(),a.statement.cursorId===0&&t.dir!==I.BIND_IN&&(this.options.nullifyInvalidCursor?a=null:Wt.throwErr(Wt.ERR_INVALID_REF_CURSOR)))}else if(r===I.TNS_DATA_TYPE_BOOLEAN)a=e.readBool();else if(r===I.TNS_DATA_TYPE_CLOB||r===I.TNS_DATA_TYPE_BLOB||r===I.TNS_DATA_TYPE_BFILE){let c=0,E=0;if(e.readUB4()>0){a=new ep,r===I.TNS_DATA_TYPE_BFILE?e.skipUB4():(c=e.readUB8(),E=e.readUB4());let N=Kt.from(e.readBytesWithLength());a.init(this.connection,N,s,c,E)}}else if(r===I.TNS_DATA_TYPE_JSON)a=e.readOson();else if(r===I.TNS_DATA_TYPE_VECTOR)a=e.readVector();else if(r===I.TNS_DATA_TYPE_INT_NAMED){let c=e.readDbObject();if(c.packedData){let E=t.fetchInfo?t.fetchInfo.dbTypeClass:t.typeClass;t.type===ie.DB_TYPE_XMLTYPE?a=$P(this.connection,c.packedData):(a=new ZP(E,c.packedData),a.toid=c.toid,a.oid=c.oid)}}else Wt.throwErr(Wt.ERR_UNSUPPORTED_DATA_TYPE,s.num,t.columnNum);if(this.inFetch)(r===I.TNS_DATA_TYPE_LONG||r===I.TNS_DATA_TYPE_LONG_RAW||t.maxSize>e.caps.maxStringSize)&&(e.skipSB4(),e.skipUB4());else{let c=e.readSB4();c<0&&r===I.TNS_DATA_TYPE_BOOLEAN?a=null:c!==0&&a!==null&&r!==I.TNS_DATA_TYPE_INT_NAMED&&this.saveDeferredErr(Wt.ERR_INSUFFICIENT_BUFFER_FOR_BINDS)}return a}processReturnParameter(e){let t=0,s,r=e.readUB2();for(let _=0;_<r;_++)e.skipUB4();let n=e.readUB2();n>0&&e.skipBytes(n),r=e.readUB2();for(let _=0;_<r;_++)n=e.readUB2(),n>0&&(s=e.readStr(I.CSFRM_IMPLICIT)),n=e.readUB2(),n>0&&e.skipBytesChunked(),t=e.readUB2(),t===I.TNS_KEYWORD_NUM_CURRENT_SCHEMA?this.connection.currentSchema=s:t===I.TNS_KEYWORD_NUM_EDITION&&(this.connection._edition=s);if(n=e.readUB2(),n>0&&e.skip(n),this.arrayDmlRowCounts){let _=e.readUB4(),a=this.options.dmlRowCounts=[];for(let c=0;c<_;c++){let E=e.readUB8();a.push(E)}}}async postProcess(){if(this.deferredErr)throw this.deferredErr;if(this.outVariables)for(let e of this.outVariables)if(e.isArray){if(e.outConverter)for(let t=0;t<e.numElementsInArray;t++)e.values[0][t]=await e.outConverter(e.values[0][t])}else e.outConverter&&(e.values[0]=await e.outConverter(e.values[0]));await this.connection._populatePartialDbObjectTypes();for(let e of this.resultSetsToSetup){e._setup(this.options,e.metadata);for(let t of e.statement.queryVars)(t.type===ie.DB_TYPE_CLOB||t.type===ie.DB_TYPE_NCLOB||t.type===ie.DB_TYPE_BLOB||t.type===ie.DB_TYPE_BFILE||t.type===ie.DB_TYPE_JSON||t.type===ie.DB_TYPE_VECTOR)&&(t.type!==t.fetchInfo.fetchType&&(t.type=t.fetchInfo.fetchType,t.maxSize=I.TNS_MAX_LONG_LENGTH),e.statement.noPrefetch||(e.statement.requiresDefine=!0,e.statement.noPrefetch=!0))}}preProcess(){if(this.statement.isReturning&&!this.parseOnly){this.outVariables=[];for(let e of this.statement.bindInfoList)e.isReturnBind&&this.outVariables.push(e.bindVar)}if(this.statement.isQuery&&(this.inFetch=!0,this.statement.queryVars)){this.outVariables=[];for(let e=0;e<this.statement.queryVars.length;e++)this.outVariables.push(this.statement.queryVars[e])}}processBitVector(e){this.numColumnsSent=e.readUB2();let t=Math.floor(this.statement.numQueryVars/8);this.statement.numQueryVars%8>0&&(t+=1),this.bitVector=Kt.from(e.readBytes(t))}processBindParams(e,t){let s=[],r=[];for(let n of t)n.isReturnBind||r.push(n),s.push(n.bindVar);return this.writeColumnMetadata(e,s),r}writeColumnMetadata(e,t){for(let s of t){let r=s.type._oraTypeNum,n=s.maxSize||s.type._bufferSizeFactor,_=0;s.type._csfrm===I.CSFRM_NCHAR&&(n*=s.type._bufferSizeFactor),[I.TNS_DATA_TYPE_ROWID,I.TNS_DATA_TYPE_UROWID].includes(r)&&(r=I.TNS_DATA_TYPE_VARCHAR,n=I.TNS_MAX_UROWID_LENGTH);let a=I.TNS_BIND_USE_INDICATORS;s.isArray&&(a|=I.TNS_BIND_ARRAY);let c=0;if(s.type===ie.DB_TYPE_BLOB||s.type===ie.DB_TYPE_CLOB||s.type===ie.DB_TYPE_NCLOB||s.type===ie.DB_TYPE_BFILE?c=I.TNS_LOB_PREFETCH_FLAG:s.type===ie.DB_TYPE_JSON?(c=I.TNS_LOB_PREFETCH_FLAG,n=_=I.TNS_JSON_MAX_LENGTH):s.type===ie.DB_TYPE_VECTOR&&(c=I.TNS_LOB_PREFETCH_FLAG,n=_=I.TNS_VECTOR_MAX_LENGTH),e.writeUInt8(r),e.writeUInt8(a),e.writeUInt8(0),e.writeUInt8(0),n>e.caps.maxStringSize?e.writeUB4(I.TNS_MAX_LONG_LENGTH):e.writeUB4(n),s.isArray?e.writeUB4(s.maxArraySize):e.writeUB4(0),e.writeUB4(c),s.objType){let E=s.objType;e.writeUB4(E.oid.length),e.writeBytesWithLength(E.oid),e.writeUB2(E.version)}else e.writeUB4(0),e.writeUB2(0);s.type._csfrm!==0?e.writeUB2(I.TNS_CHARSET_UTF8):e.writeUB2(0),e.writeUInt8(s.type._csfrm),e.writeUB4(_),e.caps.ttcFieldVersion>=I.TNS_CCAP_FIELD_VERSION_12_2&&e.writeUB4(0)}}writeBindParamsRow(e,t,s){let r=this.offset,n=!1;for(let _ of t){if(_.isReturnBind)continue;let a=_.bindVar;if(a.isArray){let c=a.values.length;e.writeUB4(c);for(let E=0;E<c;E++)this.writeBindParamsColumn(e,a,a.values[E])}else!this.statement.isPlSql&&a.maxSize>e.caps.maxStringSize?n=!0:this.writeBindParamsColumn(e,a,a.values[s+r])}if(n)for(let _ of t){if(_.isReturnBind)continue;let a=_.bindVar;a.maxSize>e.caps.maxStringSize&&this.writeBindParamsColumn(e,a,a.values[s+r])}}writeBindParamsColumn(e,t,s){let r=t.type._oraTypeNum,n;if(s==null&&r!==I.TNS_DATA_TYPE_CURSOR&&r!==I.TNS_DATA_TYPE_JSON)r===I.TNS_DATA_TYPE_BOOLEAN?(e.writeUInt8(I.TNS_ESCAPE_CHAR),e.writeUInt8(1)):r===I.TNS_DATA_TYPE_INT_NAMED?(e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(I.TNS_OBJ_TOP_LEVEL)):e.writeUInt8(0);else if(r===I.TNS_DATA_TYPE_NUMBER||r===I.TNS_DATA_TYPE_BINARY_INTEGER)typeof s=="boolean"?n=s?"1":"0":n=s.toString(),e.writeOracleNumber(n);else if(r===I.TNS_DATA_TYPE_VARCHAR||r===I.TNS_DATA_TYPE_CHAR||r===I.TNS_DATA_TYPE_LONG||r===I.TNS_DATA_TYPE_RAW||r===I.TNS_DATA_TYPE_LONG_RAW)t.type._csfrm===I.CSFRM_NCHAR?(e.caps.checkNCharsetId(),s=Kt.from(s,I.TNS_ENCODING_UTF16).swap16()):s=Kt.from(s),e.writeBytesWithLength(s);else if(r===I.TNS_DATA_TYPE_DATE||r===I.TNS_DATA_TYPE_TIMESTAMP||r===I.TNS_DATA_TYPE_TIMESTAMP_TZ||r===I.TNS_DATA_TYPE_TIMESTAMP_LTZ)e.writeOracleDate(s,t.type);else if(r===I.TNS_DATA_TYPE_BINARY_DOUBLE)e.writeUInt8(8),e.writeBinaryDouble(s);else if(r===I.TNS_DATA_TYPE_BINARY_FLOAT)e.writeUInt8(4),e.writeBinaryFloat(s);else if(r===I.TNS_DATA_TYPE_CURSOR){let _=s;s||(_=this.connection._createResultSet()),_.statement.cursorId===0?(e.writeUInt8(1),e.writeUInt8(0)):(e.writeUB4(1),e.writeUB4(_.statement.cursorId))}else if(r===I.TNS_DATA_TYPE_BOOLEAN)s?(e.writeUInt8(2),e.writeUInt16BE(257)):e.writeUInt16BE(256);else if(r===I.TNS_DATA_TYPE_CLOB||r===I.TNS_DATA_TYPE_BLOB||r===I.TNS_DATA_TYPE_BFILE)e.writeUB4(s._locator.length),e.writeBytesWithLength(s._locator);else if([I.TNS_DATA_TYPE_ROWID,I.TNS_DATA_TYPE_UROWID].includes(r))e.writeBytesWithLength(Kt.from(s));else if(r===I.TNS_DATA_TYPE_JSON)e.writeOson(s,this.connection._osonMaxFieldNameSize);else if(r===I.TNS_DATA_TYPE_VECTOR)e.writeVector(s);else if(r===I.TNS_DATA_TYPE_INT_NAMED)e.writeDbObject(s);else{let _=`Binding data of type ${t.type}`;Wt.throwErr(Wt.ERR_NOT_IMPLEMENTED,_)}}createCursorFromDescribe(e){let t=this.connection._createResultSet(this.options);return t.options.moreRowsToFetch=!0,t.statement.isQuery=!0,t.statement.requiresFullExecute=!0,this.processDescribeInfo(e,t),t}processImplicitResultSet(e){this.options.implicitResultSet=[];let t=e.readUB4();for(let s=0;s<t;s++){let r=e.readUInt8();e.skipBytes(r);let n=this.createCursorFromDescribe(e);n.statement.cursorId=e.readUB2(),this.options.implicitResultSet.push(n)}}};T(q_,"MessageWithData");var G_=q_,bN=T(i=>i===0||i===I.TNS_NULL_LENGTH_INDICATOR,"isNullLength");GN.exports=G_});var W_=R((Dg,HN)=>{"use strict";var tp=H_(),_e=Ee(),qN=Y(),K_=class K_ extends tp{constructor(e,t,s,r){super(e,t,s),!r&&t.isQuery&&(r=e._createResultSet(s,t)),this.resultSet=r,this.functionCode=_e.TNS_FUNC_EXECUTE,this.bindParams=void 0,this.currentRow=0}writeExecuteMessage(e){let t=0,s=0,r=0,n=1,_=this.statement,a=_.bindInfoList;if(this.noImplicitRelease&&(s|=_e.TNS_EXEC_OPTION_NO_IMPL_REL),!_.requiresDefine&&!this.parseOnly&&a&&(r=a.length),_.requiresDefine?t|=_e.TNS_EXEC_OPTION_DEFINE:!this.parseOnly&&_.sql&&(s|=_e.TNS_EXEC_OPTION_IMPLICIT_RESULTSET,t|=_e.TNS_EXEC_OPTION_EXECUTE),(_.cursorId===0||_.isDdl)&&(t|=_e.TNS_EXEC_OPTION_PARSE),_.isQuery&&(this.parseOnly?t|=_e.TNS_EXEC_OPTION_DESCRIBE:(_.cursorId===0||_.requiresDefine?n=this.options.prefetchRows:n=this.options.fetchArraySize,n>0&&!_.noPrefetch&&(t|=_e.TNS_EXEC_OPTION_FETCH))),!_.isPlSql&&!this.parseOnly?t|=_e.TNS_EXEC_OPTION_NOT_PLSQL:_.isPlSql&&r>0&&(t|=_e.TNS_EXEC_OPTION_PLSQL_BIND),r>0&&(t|=_e.TNS_EXEC_OPTION_BIND),this.batchErrors&&(t|=_e.TNS_EXEC_OPTION_BATCH_ERRORS),this.arrayDmlRowCounts&&(s=_e.TNS_EXEC_OPTION_DML_ROWCOUNTS),this.options.autoCommit&&(t|=_e.TNS_EXEC_OPTION_COMMIT),this.writePiggybacks(e),this.writeFunctionHeader(e),e.writeUB4(t),e.writeUB4(_.cursorId),_.cursorId===0||_.isDdl?(e.writeUInt8(1),e.writeUB4(_.sqlLength)):(e.writeUInt8(0),e.writeUB4(0)),e.writeUInt8(1),e.writeUB4(13),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(n),e.writeUB4(_e.TNS_MAX_LONG_LENGTH),r===0?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(r)),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),_.requiresDefine?(e.writeUInt8(1),e.writeUB4(this.statement.queryVars.length)):(e.writeUInt8(0),e.writeUB4(0)),e.writeUB4(0),e.writeUInt8(0),e.writeUInt8(1),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUB4(0),this.arrayDmlRowCounts?(e.writeUInt8(1),e.writeUB4(this.numExecs),e.writeUInt8(1)):(e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0)),e.caps.ttcFieldVersion>=_e.TNS_CCAP_FIELD_VERSION_12_2&&(e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.caps.ttcFieldVersion>=_e.TNS_CCAP_FIELD_VERSION_12_2_EXT1&&(e.writeUInt8(0),e.writeUB4(0))),_.cursorId===0||_.isDdl?_.sql?(e.writeBytesWithLength(_.sqlBytes),e.writeUB4(1)):qN.throwErr(qN.ERR_INVALID_REF_CURSOR):e.writeUB4(0),_.isQuery?_.cursorId===0?e.writeUB4(0):e.writeUB4(n):e.writeUB4(this.numExecs),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(_.isQuery?1:0),e.writeUB4(0),e.writeUB4(s),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),_.requiresDefine)this.writeColumnMetadata(e,this.statement.queryVars);else if(r>0)return this.processBindParams(e,a)}writeReExecuteMessage(e){let t=this.statement,s=t.bindInfoList,r=0,n=0,_;if(s!==void 0){t.isQuery||(this.outVariables=[],s.forEach(c=>{c.bindDir!==_e.TNS_BIND_DIR_INPUT&&this.outVariables.push(c.bindVar)}));let a=[];s.forEach(c=>{c.bindDir!==_e.TNS_BIND_DIR_OUTPUT&&!c.isReturnBind&&a.push(c)}),s=a}return this.functionCode===_e.TNS_FUNC_REEXECUTE_AND_FETCH?(r|=_e.TNS_EXEC_OPTION_EXECUTE,_=this.options.prefetchRows):(this.options.autoCommit&&(n|=_e.TNS_EXEC_OPTION_COMMIT_REEXECUTE),_=this.numExecs),this.writePiggybacks(e),this.writeFunctionHeader(e),e.writeUB4(t.cursorId),e.writeUB4(_),e.writeUB4(r),e.writeUB4(n),s}encode(e){if(this.currentRow===0){let t=this.statement;t.cursorId!==0&&!t.requiresFullExecute&&!this.parseOnly&&!t.requiresDefine&&!t.noPrefetch&&!t.isDdl&&!this.batchErrors?(t.isQuery&&this.options.prefetchRows>0?this.functionCode=_e.TNS_FUNC_REEXECUTE_AND_FETCH:this.functionCode=_e.TNS_FUNC_REEXECUTE,this.bindParams=this.writeReExecuteMessage(e)):(this.functionCode=_e.TNS_FUNC_EXECUTE,this.bindParams=this.writeExecuteMessage(e))}if(this.bindParams&&this.bindParams.length>0){let t=e.nsi.ntAdapter;for(;this.currentRow<this.numExecs;)if(e.writeUInt8(_e.TNS_MSG_TYPE_ROW_DATA),this.writeBindParamsRow(e,this.bindParams,this.currentRow),this.currentRow++,this.currentRow<this.numExecs&&t.shouldPauseWrite())return!0}this.currentRow=0,this.bindParams=void 0}};T(K_,"ExecuteMessage");var v_=K_;HN.exports=v_});var Q_=R((Og,KN)=>{"use strict";var sp=Ee(),rp=H_(),vN=Y(),z_=class z_ extends rp{constructor(e,t,s,r){super(e,t,s),this.resultSet=r,this.functionCode=sp.TNS_FUNC_FETCH}encode(e){this.writeFunctionHeader(e),this.statement.cursorId===0&&vN.throwErr(vN.ERR_CURSOR_HAS_BEEN_CLOSED),e.writeUB4(this.statement.cursorId),e.writeUB4(this.options.fetchArraySize)}};T(z_,"FetchMessage");var X_=z_;KN.exports=X_});var Z_=R((Lg,WN)=>{"use strict";var ip=Lo(),np=W_(),op=Q_(),j_=class j_ extends ip{async _fetchMoreRows(e){let t=this.statement.requiresFullExecute?np:op,s=new t(this.connection,this.statement,e,this);await this.connection._protocol._processMessage(s),this.statement.requiresFullExecute=!1}_resultSetNew(e,t,s){this.connection=e,this.statement=t,this._nestedCursorIndices=[],this.options=s,this.prefetchRowsProcessed=!1,this.statement.bufferRowIndex=0}close(){this.connection._returnStatement(this.statement)}_processRows(e){let t=[],s=this.statement.bufferRowIndex;for(let r=s;r<s+e;r++){let n=[];for(let _=0;_<this.statement.numQueryVars;_++)n.push(this.statement.queryVars[_].values[r]);t.push(n)}return this.statement.bufferRowIndex+=e,this.statement.bufferRowIndex===this.statement.bufferRowCount&&(this.statement.bufferRowCount=0,this.statement.bufferRowIndex=0),t}async getRows(e,t){if(t.fetchArraySize=e||this.options.fetchArraySize,t.prefetchRows=this.options.prefetchRows,this.statement.bufferRowCount-this.statement.bufferRowIndex>=t.fetchArraySize)return this._processRows(t.fetchArraySize);{t.fetchArraySize=t.fetchArraySize-(this.statement.bufferRowCount-this.statement.bufferRowIndex);let r=this.statement.bufferRowCount;if(this.statement.moreRowsToFetch&&t.fetchArraySize>0&&await this._fetchMoreRows(t),t.fetchArraySize=e||this.options.fetchArraySize,r===this.statement.bufferRowCount){let n=this.statement.bufferRowCount-this.statement.bufferRowIndex;return this.statement.bufferRowCount=0,n>0?this._processRows(n):[]}}let s=this.statement.bufferRowCount-this.statement.bufferRowIndex;return this._processRows(s)}};T(j_,"ThinResultSetImpl");var J_=j_;WN.exports=J_});var JN=R((Bg,QN)=>{"use strict";var{Buffer:XN}=require("buffer"),L=Ee(),zN=Y(),ea=class ea{constructor(e){this.protocolVersion=e.sAtts.version,this.ttcFieldVersion=L.TNS_CCAP_FIELD_VERSION_MAX,this.supports12cLogon=!0,this.supportsOob=!1,this.nCharsetId=L.TNS_CHARSET_UTF16,this.compileCaps=XN.alloc(L.TNS_CCAP_MAX),this.runtimeCaps=XN.alloc(L.TNS_RCAP_MAX),this.initCompileCaps(e),this.initRuntimeCaps(),this.maxStringSize=0}adjustForServerCompileCaps(e,t){e[L.TNS_CCAP_FIELD_VERSION]<this.ttcFieldVersion&&(this.ttcFieldVersion=e[L.TNS_CCAP_FIELD_VERSION],this.compileCaps[L.TNS_CCAP_FIELD_VERSION]=this.ttcFieldVersion),this.ttcFieldVersion<L.TNS_CCAP_FIELD_VERSION_23_4&&t.endOfRequestSupport&&(this.compileCaps[L.TNS_CCAP_TTC4]^=L.TNS_CCAP_END_OF_REQUEST,t.endOfRequestSupport=!1)}adjustForServerRuntimeCaps(e){e[L.TNS_RCAP_TTC]&L.TNS_RCAP_TTC_32K?this.maxStringSize=32767:this.maxStringSize=4e3}initCompileCaps(e){this.compileCaps[L.TNS_CCAP_SQL_VERSION]=L.TNS_CCAP_SQL_VERSION_MAX,this.compileCaps[L.TNS_CCAP_LOGON_TYPES]=L.TNS_CCAP_O5LOGON|L.TNS_CCAP_O5LOGON_NP|L.TNS_CCAP_O7LOGON|L.TNS_CCAP_O8LOGON_LONG_IDENTIFIER|L.TNS_CCAP_O9LOGON_LONG_PASSWORD,this.compileCaps[L.TNS_CCAP_FIELD_VERSION]=this.ttcFieldVersion,this.compileCaps[L.TNS_CCAP_SERVER_DEFINE_CONV]=1,this.compileCaps[L.TNS_CCAP_TTC1]=L.TNS_CCAP_FAST_BVEC|L.TNS_CCAP_END_OF_CALL_STATUS|L.TNS_CCAP_IND_RCD,this.compileCaps[L.TNS_CCAP_OCI1]=L.TNS_CCAP_FAST_SESSION_PROPAGATE|L.TNS_CCAP_APP_CTX_PIGGYBACK,this.compileCaps[L.TNS_CCAP_TDS_VERSION]=L.TNS_CCAP_TDS_VERSION_MAX,this.compileCaps[L.TNS_CCAP_RPC_VERSION]=L.TNS_CCAP_RPC_VERSION_MAX,this.compileCaps[L.TNS_CCAP_RPC_SIG]=L.TNS_CCAP_RPC_SIG_VALUE,this.compileCaps[L.TNS_CCAP_DBF_VERSION]=L.TNS_CCAP_DBF_VERSION_MAX,this.compileCaps[L.TNS_CCAP_LOB]=L.TNS_CCAP_LOB_UB8_SIZE|L.TNS_CCAP_LOB_ENCS|L.TNS_CCAP_LOB_PREFETCH|L.TNS_CCAP_LOB_TEMP_SIZE|L.TNS_CCAP_LOB_12C|L.TNS_CCAP_LOB_PREFETCH_DATA,this.compileCaps[L.TNS_CCAP_UB2_DTY]=1,this.compileCaps[L.TNS_CCAP_LOB2]=L.TNS_CCAP_LOB2_QUASI|L.TNS_CCAP_LOB2_2GB_PREFETCH,this.compileCaps[L.TNS_CCAP_TTC3]=L.TNS_CCAP_IMPLICIT_RESULTS|L.TNS_CCAP_BIG_CHUNK_CLR|L.TNS_CCAP_KEEP_OUT_ORDER,this.compileCaps[L.TNS_CCAP_TTC2]=L.TNS_CCAP_ZLNP,this.compileCaps[L.TNS_CCAP_OCI2]=L.TNS_CCAP_DRCP,this.compileCaps[L.TNS_CCAP_CLIENT_FN]=L.TNS_CCAP_CLIENT_FN_MAX,this.compileCaps[L.TNS_CCAP_TTC4]=L.TNS_CCAP_INBAND_NOTIFICATION,e.endOfRequestSupport&&(this.compileCaps[L.TNS_CCAP_TTC4]|=L.TNS_CCAP_END_OF_REQUEST),this.compileCaps[L.TNS_CCAP_CTB_FEATURE_BACKPORT]=L.TNS_CCAP_CTB_IMPLICIT_POOL,this.compileCaps[L.TNS_CCAP_TTC5]=L.TNS_CCAP_VECTOR_SUPPORT,this.compileCaps[L.TNS_CCAP_VECTOR_FEATURES]=L.TNS_CCAP_VECTOR_FEATURE_BINARY}initRuntimeCaps(){this.runtimeCaps[L.TNS_RCAP_COMPAT]=L.TNS_RCAP_COMPAT_81,this.runtimeCaps[L.TNS_RCAP_TTC]=L.TNS_RCAP_TTC_ZERO_COPY|L.TNS_RCAP_TTC_32K}checkNCharsetId(){this.nCharsetId!==L.TNS_CHARSET_UTF16&&zN.throwErr(zN.ERR_NCHAR_CS_NOT_SUPPORTED,this.nCharsetId)}};T(ea,"Capabilities");var $_=ea;QN.exports=$_});var rS=R((Yg,sS)=>{"use strict";var{BaseBuffer:$N}=fs(),{Buffer:dt}=require("buffer"),we=Ee(),eS=Hr(),jN=js(),tS=Br(),Ti=Y(),ys=dt.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/","utf8"),_p=2048,ap=8,ZN=11,ia=class ia{constructor(e){this.allocLen=e;let t=e%we.CHUNKED_BYTES_CHUNK_SIZE;t>0&&(this.allocLen+=we.CHUNKED_BYTES_CHUNK_SIZE-t),this.buf=dt.allocUnsafe(this.allocLen),this.actualLen=0}};T(ia,"BytesChunk");var ci=ia,na=class na{constructor(){this.chunks=[]}endChunkedRead(){if(this.chunks.length>1){let t=0;for(let n of this.chunks)t+=n.actualLen;let s=0,r=new ci(t);for(let n of this.chunks)n.buf.copy(r.buf,s,0,n.actualLen),s+=n.actualLen;r.actualLen=t,this.chunks=[r]}let e=this.chunks[0];return e.buf.subarray(0,e.actualLen)}getBuf(e){let t;this.chunks.length>0&&(t=this.chunks[this.chunks.length-1],t.allocLen-t.actualLen<e&&(t=void 0)),t||(t=new ci(e),this.chunks.push(t));let s=t.buf.subarray(t.actualLen,t.actualLen+e);return t.actualLen+=e,s}startChunkedRead(){this.chunks.length>0&&(this.chunks=this.chunks.splice(0,1),this.chunks[0].actualLen=0)}};T(na,"ChunkedBytesBuffer");var ta=na,oa=class oa extends $N{constructor(e,t){super(),this.nsi=e,this.caps=t,this.chunkedBytesBuf=new ta}_readBytesWithLength(e){if(e!==we.TNS_LONG_LENGTH_INDICATOR)return this.readBytes(e);for(this.chunkedBytesBuf.startChunkedRead();;){let t=this.readUB4();if(t===0)break;this.readBytes(t,!0)}return this.chunkedBytesBuf.endChunkedRead()}skipBytes(e){this.pos===this.size&&this.receivePacket();let t=this.numBytesLeft();if(e<=t){this.pos+=e;return}for(e-=t;e>0;){this.receivePacket();let s=Math.min(e,this.size-this.pos);this.pos+=s,e-=s}}readBytes(e,t=!1){this.pos===this.size&&this.receivePacket();let s=this.numBytesLeft();if(e<=s){let _;return t?(_=this.chunkedBytesBuf.getBuf(e),this.buf.copy(_,0,this.pos,this.pos+e)):_=this.buf.subarray(this.pos,this.pos+e),this.pos+=e,_}let r;t?r=this.chunkedBytesBuf.getBuf(e):r=dt.allocUnsafe(e);let n=0;for(this.buf.copy(r,n,this.pos,this.pos+s),n+=s,e-=s;e>0;){this.receivePacket();let _=Math.min(e,this.size-this.pos);this.buf.copy(r,n,this.pos,this.pos+_),this.pos+=_,n+=_,e-=_}return r}receivePacket(){if(this.savedPacketPos===this.savedPackets.length){let e=this.nsi.syncRecvPacket();if(!e||this.nsi.isBreak)throw new jN.OutOfPacketsError;this.savedPackets.push(e)}this.startPacket(this.savedPackets[this.savedPacketPos++])}restorePoint(){this.savedPacketPos=0,this.startPacket(this.savedPackets[this.savedPacketPos++]),this.pos=this.savedPos}savePoint(){this.savedPackets?this.savedPackets=this.savedPackets.splice(this.savedPacketPos-1):this.savedPackets=[this.packet],this.savedPacketPos=1,this.savedPos=this.pos}startPacket(e){this.packet=e,this.buf=e.buf,this.pos=10,this.size=e.buf.length,this.packetNum=e.num}async waitForPackets(e=!1){let t=await this.nsi.recvPacket();if(this.savedPackets?this.savedPackets.push(t):(this.savedPackets=[t],this.savedPacketPos=0),e&&this.nsi.endOfRequestSupport)for(;t.type===we.TNS_PACKET_TYPE_DATA&&!(t.buf.readUInt16BE(8)&we.TNS_DATA_FLAGS_END_OF_REQUEST||t.buf.length===ZN&&t.buf[ZN-1]===we.TNS_MSG_TYPE_END_OF_REQUEST);)t=await this.nsi.recvPacket(),this.savedPackets.push(t);this.startPacket(this.savedPackets[this.savedPacketPos++])}readOson(){if(this.readUB4()===0)return null;this.skipUB8(),this.skipUB4();let t=new eS.OsonDecoder(this.readBytesWithLength());return this.skipBytesChunked(),t.decode()}readURowID(){let e=0,t=1,s=this.readBytesWithLength();if(s===null)return null;s=this.readBytesWithLength();let r=s.length;if(s&&s[0]===1){let c=s.readUInt32BE(1),E=s.readUInt16BE(5),l=s.readUInt32BE(7),N=s.readUInt16BE(11);return jN.encodeRowID({rba:c,partitionID:E,blockNum:l,slotNum:N})}let n=Math.floor(r/3)*4,_=r%3;_===1?n+=1:_===2&&(n+=3);let a=dt.allocUnsafe(n);for(r-=1,a[0]=42,e+=1;r>0;){let c=s[t]>>2;if(a[e]=ys[c],e+=1,c=(s[t]&3)<<4,r==1){a[e]=ys[c];break}if(t+=1,c|=(s[t]&240)>>4,a[e]=ys[c],e+=1,c=(s[t]&15)<<2,r==2){a[e]=ys[c];break}t+=1,c|=(s[t]&192)>>6,a[e]=ys[c],e+=1,c=s[t]&63,a[e]=ys[c],e+=1,t+=1,r-=3}return a.toString("utf-8")}readRowID(){let e=this.readUB4(),t=this.readUB2();this.skipUB1();let s=this.readUB4(),r=this.readUB2();return{rba:e,partitionID:t,blockNum:s,slotNum:r}}readVector(){if(this.readUB4()===0)return null;this.skipUB8(),this.skipUB4();let t=new tS.VectorDecoder(this.readBytesWithLength());return this.skipBytesChunked(),t.decode()}skipBytesChunked(){let e=this.readUInt8();if(!(e===0||e===we.TNS_NULL_LENGTH_INDICATOR))if(e!==we.TNS_LONG_LENGTH_INDICATOR)this.skipBytes(e);else for(;;){let t=this.readUB4();if(t===0)break;this.skipBytes(t)}}readNullTerminatedBytes(e=50){let t=0,s=dt.allocUnsafe(e);for(;t<e&&(s[t]=this.readUInt8(),s[t]!==0);)t=t+1;if(t===e){let r=`Byte Arrray Exceeded MaxSize ${e}`;Ti.throwErr(Ti.ERR_INTERNAL,r)}return s.subarray(0,t+1)}};T(oa,"ReadPacket");var sa=oa,_a=class _a extends $N{constructor(e,t,s){super(e.sAtts.sdu),this.size=this.maxSize,this.isLargeSDU=e.sAtts.version>=we.TNS_VERSION_MIN_LARGE_SDU,this.protocol=s,this.packetType=we.TNS_PACKET_TYPE_DATA,this.caps=t,this.nsi=e}_grow(){this._sendPacket()}_sendPacket(e=!1){let t=this.pos;this.pos=0,this.isLargeSDU?this.writeUInt32BE(t):(this.writeUInt16BE(t),this.writeUInt16BE(0)),this.writeUInt8(this.packetType),this.writeUInt8(0),this.writeUInt16BE(0);let s=this.buf.subarray(0,t);e?this.buf.writeUInt16BE(_p,ap):(s=dt.from(s),this.startPacket()),this.nsi.ntAdapter||Ti.throwErr(Ti.ERR_INVALID_CONNECTION),this.nsi.ntAdapter.send(s)}startPacket(e=0){this.pos=we.PACKET_HEADER_SIZE,this.packetType===we.TNS_PACKET_TYPE_DATA&&this.writeUInt16BE(e)}startRequest(e,t=0){this.packetType=e,this.startPacket(t)}endRequest(){this.pos>we.PACKET_HEADER_SIZE&&this._sendPacket(!0)}writeKeyValue(e,t,s=0){let r=dt.byteLength(e),n=dt.byteLength(t);this.writeUB4(r),this.writeBytesWithLength(dt.from(e)),this.writeUB4(n),n>0&&this.writeBytesWithLength(dt.from(t)),this.writeUB4(s)}writeOson(e,t){let r=new eS.OsonEncoder().encode(e,t);this.writeQLocator(r.length),this.writeBytesWithLength(r)}writeSeqNum(){this.writeUInt8(this.protocol.sequenceId),this.protocol.sequenceId=(this.protocol.sequenceId+1)%256}writeVector(e){let s=new tS.VectorEncoder().encode(e);this.writeQLocator(s.length),this.writeBytesWithLength(s)}writeQLocator(e){this.writeUB4(40),this.writeUInt8(40),this.writeUInt16BE(38),this.writeUInt16BE(we.TNS_LOB_QLOCATOR_VERSION),this.writeUInt8(we.TNS_LOB_LOC_FLAGS_VALUE_BASED|we.TNS_LOB_LOC_FLAGS_BLOB|we.TNS_LOB_LOC_FLAGS_ABSTRACT),this.writeUInt8(we.TNS_LOB_LOC_FLAGS_INIT),this.writeUInt16BE(0),this.writeUInt16BE(1),this.writeUInt64BE(e),this.writeUInt16BE(0),this.writeUInt16BE(0),this.writeUInt16BE(0),this.writeUInt64BE(0),this.writeUInt64BE(0)}};T(_a,"WritePacket");var ra=_a;sS.exports={ReadPacket:sa,WritePacket:ra}});var nS=R((Mg,iS)=>{"use strict";var Bs=Ee(),Tp=JN(),{WritePacket:cp,ReadPacket:Ep}=rS(),os=Y(),lp=js(),Ta=class Ta{constructor(e){this._breakInProgress=!1,this.txnInProgress=!1,this.connInProgress=!0,this.nsi=e.nscon,this.sequenceId=1,this.caps=new Tp(e.nscon),this.writeBuf=new cp(e.nscon,this.caps,this),this.readBuf=new Ep(e.nscon,this.caps),this.callTimeout=0}async _decodeMessage(e){for(e.preProcess(),await this.readBuf.waitForPackets(!0);;){this.nsi.isBreak&&(await this.resetMessage(),delete this.readBuf.savedPackets,await this.readBuf.waitForPackets());try{e.decode(this.readBuf);break}catch(t){if(t instanceof lp.OutOfPacketsError){this.nsi.isBreak||(await this.readBuf.waitForPackets(),this.readBuf.restorePoint());continue}throw t}}await e.postProcess()}async _encodeMessage(e){let t=this.nsi.ntAdapter;for(this.writeBuf.startRequest(Bs.TNS_PACKET_TYPE_DATA);e.encode(this.writeBuf);)await t.pauseWrite();this.writeBuf.endRequest()}async _recoverFromError(e,t){try{this.breakMessage(),this._breakInProgress=!1,await this.resetMessage(),await this.readBuf.waitForPackets(),t.decode(this.readBuf)}catch(s){this.nsi.disconnect();let r=os.getErr(os.ERR_CONNECTION_CLOSED);throw e.message=r.message+`
Error recovery failed: `+s.message+`
Original error: `+e.message,e}}async _processMessage(e){let t,s=!1;try{this.callTimeout>0&&(t=setTimeout(()=>{s=!0,this.breakMessage()},this.callTimeout)),await this._encodeMessage(e),e.messageType!==Bs.TNS_MSG_TYPE_ONEWAY_FN&&await this._decodeMessage(e)}catch(r){throw!this.connInProgress&&r.code!==os.ERR_CONNECTION_CLOSED_CODE&&await this._recoverFromError(r,e),r}finally{clearTimeout(t)}if(e.flushOutBinds&&await this.flushOutBindMessage(e),this.txnInProgress=!!(e.callStatus&Bs.TNS_EOCS_FLAGS_TXN_IN_PROGRESS),e.callStatus&Bs.TNS_EOCS_FLAGS_SESS_RELEASE&&e.connection.statementCache.clearCursors(),e.errorOccurred){if(s&&os.throwErr(os.ERR_CALL_TIMEOUT_EXCEEDED,this.callTimeout),e.retry)return e.errorOccurred=!1,await this._processMessage(e);let r=new Error(e.errorInfo.message);throw r.offset=e.errorInfo.pos,r.errorNum=e.errorInfo.num,r=os.transformErr(r),r.code===os.ERR_CONNECTION_CLOSED_CODE&&this.nsi.disconnect(),r}}async flushOutBindMessage(e){this.writeBuf.startRequest(Bs.TNS_PACKET_TYPE_DATA),this.writeBuf.writeUInt8(Bs.TNS_MSG_TYPE_FLUSH_OUT_BINDS),this.writeBuf.endRequest(),await this._decodeMessage(e)}breakMessage(){this._breakInProgress=!0,this.nsi.sendBreak()}async resetMessage(){await this.nsi.reset()}};T(Ta,"Protocol");var aa=Ta;iS.exports=aa});var ws=R((Fg,oS)=>{oS.exports={NSPTCN:1,NSPTAC:2,NSPTAK:3,NSPTRF:4,NSPTRD:5,NSPTDA:6,NSPTNL:7,NSPTAB:9,NSPTRS:11,NSPTMK:12,NSPTAT:13,NSPTCNL:14,NSPTDD:15,NSPTHI:19,NSPHDLEN:0,NSPHDPSM:2,NSPHDTYP:4,NSPHDFLGS:5,NSPHDHSM:6,NSPSIZHD:8,NSPFSID:1,NSPFRDS:2,NSPFRDR:4,NSPFLSD:32,NO_HEADER_FLAGS:0,NSPFSRN:8,NSPCNVSN:8,NSPCNLOV:10,NSPCNOPT:12,NSPCNSDU:14,NSPCNTDU:16,NSPCNNTC:18,NSPCNTNA:20,NSPCNONE:22,NSPCNLEN:24,NSPCNOFF:26,NSPCNMXC:28,NSPCNFL0:32,NSPCNFL1:33,NSPCNTMO:50,NSPCNTCK:52,NSPCNADL:54,NSPCNAOF:56,NSPCNLSD:58,NSPCNLTD:62,NSPCNCFL:66,NSPCNCFL2:70,NSPCNDAT:74,NSPMXCDATA:230,NSINAWANTED:1,NSINAINTCHG:2,NSINADISABLEDFORCONNECTION:4,NSINANOSERVICES:8,NSINAREQUIRED:16,NSINAAUTHWANTED:32,NSISUPSECRENEG:128,NSGDONTCARE:1,NSGHDX:2,NSGFDX:4,NSGHDRCHKSUM:8,NSGPAKCHKSUM:16,NSGBROKEN:32,NSGUSEVIO:64,NSGOSAUTHOK:128,NSGSENDATTN:512,NSGRECVATTN:1024,NSGNOATTNPR:2048,NSGRAW:4096,TNS_VERSION_DESIRED:319,TNS_VERSION_MINIMUM:300,TNS_VERSION_MIN_DATA_FLAGS:318,TNS_VERSION_MIN_END_OF_RESPONSE:319,TNS_UUID_OFFSET:45,NSPACVSN:8,NSPACOPT:10,NSPACSDU:12,NSPACTDU:14,NSPACONE:16,NSPACLEN:18,NSPACOFF:20,NSPACFL0:22,NSPACFL1:23,NSPACTMO:24,NSPACTCK:26,NSPACADL:28,NSPACAOF:30,NSPACLSD:32,NSPACLTD:36,NSPACCFL:40,NSPACFL2:41,NSPACV310DAT:32,NSPACV315DAT:41,NSPRFURS:8,NSPRFSRS:9,NSPRFLEN:10,NSPRFDAT:12,NSPACCFON:128,NSPACCFAT:64,NSPACCFNT:2,NSPACOOB:1,NSGPCHKSCMD:16777216,TNS_ACCEPT_FLAG_HAS_END_OF_REQUEST:33554432,TNS_ACCEPT_FLAG_FAST_AUTH:268435456,NSPRDLEN:8,NSPRDDAT:10,NSPDAFLG:8,NSPDADAT:10,NSPDAFEOF:64,NSPMKTYP:8,NSPMKODT:9,NSPMKDAT:10,NSPMKTD0:0,NSPMKTD1:1,NSPMKTAT:2,NIQBMARK:1,NIQRMARK:2,NIQIMARK:3,NSPCTLCMD:8,NSPCTLDAT:10,NSPCTL_SERR:8,NSPCTL_CLRATTN:9,NSPDFSDULN:8192,NSPABSSDULN:2097152,NSPMXSDULN:65535,NSPMNSDULN:512,NSPDFTDULN:2097152,NSPMXTDULN:2097152,NSPMNTDULN:255,NSFIMM:64,DISABLE_OOB_STR:"DISABLE_OOB",EXPIRE_TIME:"EXPIRE_TIME",PEM_WALLET_FILE_NAME:"ewallet.pem",NT_MOREDATA:1,NS_MOREDATA:2,SVCNAME:3,SERVERTYPE:4,REMOTEADDR:5,HEALTHCHECK:6,CONNCLASS:7,PURITY:8,SID:9,NSNOBLOCK:1}});var TS=R((xg,aS)=>{"use strict";var Ei=require("buffer").Buffer,g=ws(),Xt=Y(),hp=230,_S=74;function Np(i,e,t=0){this.connectData=i,this.connectDataLen=i.length,this.overflow=!1;let s;this.connectDataLen<=hp?s=_S+this.connectDataLen:(s=_S,this.overflow=!0),this.buf=Ei.allocUnsafe(s).fill(0),this.buf.writeUInt16BE(s,g.NSPHDLEN),this.buf.writeUInt8(t,g.NSPHDFLGS),this.buf.writeUInt8(g.NSPTCN,g.NSPHDTYP),this.buf.writeUInt16BE(g.TNS_VERSION_DESIRED,g.NSPCNVSN),this.buf.writeUInt16BE(g.TNS_VERSION_MINIMUM,g.NSPCNLOV);let r=g.NSGDONTCARE;this.buf.writeUInt16BE(r,g.NSPCNOPT),e.sdu>g.NSPMXSDULN?this.buf.writeUInt16BE(g.NSPMXSDULN,g.NSPCNSDU):this.buf.writeUInt16BE(e.sdu,g.NSPCNSDU),e.tdu>g.NSPMXSDULN?this.buf.writeUInt16BE(g.NSPMXSDULN,g.NSPCNTDU):this.buf.writeUInt16BE(e.tdu,g.NSPCNTDU),this.buf.writeUInt16BE(e.ntCha,g.NSPCNNTC),this.buf.writeUInt16BE(1,g.NSPCNONE),this.buf.writeUInt16BE(this.connectDataLen,g.NSPCNLEN),this.buf.writeUInt16BE(g.NSPCNDAT,g.NSPCNOFF),this.buf.writeUInt8(g.NSISUPSECRENEG|g.NSINADISABLEDFORCONNECTION,g.NSPCNFL0),this.buf.writeUInt8(g.NSISUPSECRENEG|g.NSINADISABLEDFORCONNECTION,g.NSPCNFL1),this.buf.writeUInt16BE(0,g.NSPCNTMO),this.buf.writeUInt16BE(0,g.NSPCNTCK),this.buf.writeUInt16BE(0,g.NSPCNADL),this.buf.writeUInt16BE(0,g.NSPCNAOF),this.buf.writeUInt32BE(e.sdu,g.NSPCNLSD),this.buf.writeUInt32BE(e.tdu,g.NSPCNLTD),this.buf.writeUInt32BE(0,g.NSPCNCFL),this.buf.writeUInt32BE(0,g.NSPCNCFL2),!this.overflow&&this.connectDataLen&&this.buf.write(i.toString("ascii"),g.NSPCNDAT,this.connectDataLen,"ascii")}T(Np,"ConnectPacket");function Sp(i){this.dataPtr=0,this.dataLen=0,this.offset=0,this.len=0,this.bufLen=0,this.createPacket=function(e){this.dataPtr=g.NSPDADAT,this.dataLen=g.NSPDADAT,this.buf=Ei.allocUnsafe(e).fill(0),this.buf.writeUInt8(0,g.NSPHDFLGS),this.buf.writeUInt8(g.NSPTDA,g.NSPHDTYP),this.bufLen=e},this.fillBuf=function(e,t,s,r=0){let n;return this.buf||this.createPacket(s+g.NSPDADAT),s>this.bufLen-this.dataLen?n=this.bufLen-this.dataLen:n=s,n&&e.copy(this.buf,this.dataLen,t,t+n),this.dataLen+=n,this.prepare2Send(r),n},this.prepare2Send=function(e=0){i?this.buf.writeUInt32BE(this.dataLen,g.NSPHDLEN):this.buf.writeUInt16BE(this.dataLen,g.NSPHDLEN),this.buf.writeUInt16BE(e,g.NSPDAFLG),this.dataBuf=this.buf.subarray(0,this.dataLen)},this.fromPacket=function(e){this.buf=e.buf,this.dataLen=e.buf.length,this.dataPtr=g.NSPDADAT,this.offset=this.dataPtr,this.len=this.dataLen,e.dataOffset=this.dataPtr}}T(Sp,"DataPacket");function up(i,e){this.buf=i.buf,this.len=i.buf.length,e.version=i.buf.readUInt16BE(g.NSPACVSN),e.options=i.buf.readUInt16BE(g.NSPACOPT),e.sdu=i.buf.readUInt16BE(g.NSPACSDU),e.tdu=i.buf.readUInt16BE(g.NSPACTDU),e.version>=315&&(e.sdu=i.buf.readUInt32BE(g.NSPACLSD),e.tdu=i.buf.readUInt32BE(g.NSPACLTD),e.largeSDU=!0),this.flag0=i.buf.readUInt8(g.NSPACFL0),this.flag1=i.buf.readUInt8(g.NSPACFL1),e.version>=g.TNS_VERSION_MIN_DATA_FLAGS&&(i.flags=i.buf.readUInt32BE(g.NSPACFL2))}T(up,"AcceptPacket");function Ap(i){this.buf=i.buf,this.len=i.buf.length,this.userReason=i.buf.readUInt8(g.NSPRFURS),this.systemReason=i.buf.readUInt8(g.NSPRFURS),this.dataLen=i.buf.readUInt16BE(g.NSPRFLEN),this.dataOff=g.NSPRFDAT,this.len>this.dataOff?(this.dataBuf=this.buf.toString("ascii",this.dataOff,this.len),this.overflow=!1):this.overflow=!0}T(Ap,"RefusePacket");function fp(i){this.buf=i.buf,this.len=i.buf.length,this.flags=i.flags,this.dataLen=i.buf.readUInt16BE(g.NSPRDLEN),this.dataOff=g.NSPRDDAT,this.len>this.dataOff?(this.dataBuf=this.buf.subarray(this.dataOff,this.len),this.overflow=!1):this.overflow=!0}T(fp,"RedirectPacket");function dp(i){this.len=g.NSPMKDAT+1,this.buf=Ei.allocUnsafe(g.NSPMKDAT+1).fill(0),i?this.buf.writeUInt32BE(this.len,g.NSPHDLEN):this.buf.writeUInt16BE(this.len,g.NSPHDLEN),this.buf.writeUInt8(0,g.NSPHDFLGS),this.buf.writeUInt8(g.NSPTMK,g.NSPHDTYP),this.prepare=function(e,t){this.buf.writeUInt8(e,g.NSPMKTYP),this.buf.writeUInt8(t,g.NSPMKDAT)},this.fromPacket=function(e,t){switch(this.type=e.buf.readUInt8(g.NSPMKTYP),this.type){case g.NSPMKTD0:t.isBreak=!0;break;case g.NSPMKTD1:this.data=e.buf.readUInt8(g.NSPMKDAT),t.isBreak=!0,this.data==g.NIQRMARK&&(t.isReset=!0,t.isBreak=!0);break;default:Xt.throwErr(Xt.ERR_INVALID_PACKET)}}}T(dp,"MarkerPacket");function Pp(){this.clear=function(){this.errno=0,this.notif=null,this.notifLen=0,this.cmd=0},this.fromPacket=function(i){let r,n,_;switch(this.cmd=i.buf.readUInt16BE(g.NSPCTLCMD),this.cmd){case g.NSPCTL_SERR:r=i.buf.readUInt32BE(g.NSPCTLDAT),n=i.buf.readUInt32BE(g.NSPCTLDAT+4),_=i.buf.readUInt32BE(g.NSPCTLDAT+8),n==12572?this.errno=n:n==12573?(this.errno=n,this.notifLen=_,this.notif=Ei.allocUnsafe(_+1).fill(0),this.buf.copy(this.notif,0,g.NSPCTLDAT+12,g.NSPCTLDAT+12+_)):(this.errno=n,r==22?Xt.throwErr(Xt.ERR_CONNECTION_INBAND,"ORA-"+n):Xt.throwErr(Xt.ERR_CONNECTION_INBAND,"TNS-"+n));break;default:Xt.throwErr(Xt.ERR_INVALID_PACKET)}}}T(Pp,"ControlPacket");aS.exports={ConnectPacket:Np,DataPacket:Sp,AcceptPacket:up,RefusePacket:Ap,RedirectPacket:fp,MarkerPacket:dp,ControlPacket:Pp}});var Ys=R((bg,uS)=>{"use strict";var se=Y(),cS=0,tr=1,ca=2,Ea=3,li=4,Pa=class Pa{constructor(e){this.name=e,this.listType=Ea,this.rhsType=cS}set setAtom(e){this._containsComment(e)&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),this.rhsType=tr,this.list=null,this.atom=e}_containsComment(e){for(let t=0;t<e.length;t++)if(e.charAt(t)=="#")if(t!=0){if(e.charAt(t-1)=="\\")continue;return!0}else return!0;return!1}getListSize(){return this.list==null?0:this.list.length}getListElement(e){return this.list==null?null:this.list[e]}addListElement(e){this.list==null&&(this.rhsType=ca,this.list=new Array,this.atom=null),this.list.push(e),e.parent=this}removeListElement(e){this.list!=null&&(this.list.splice(e,1),this.getListSize==0&&(this.list=null,this.rhsType=cS))}_space(e){var t="";for(let s=0;s<e;s++)t+=" ";return t}valueToString(){let e="";if(this.rhsType==tr)e=e+this.atom;else if(this.rhsType==ca){if(this.listType==Ea)for(let t=0;t<this.getListSize();t++)e=e+this.getListElement(t).toString();else if(this.listType==li)for(let t=0;t<this.getListSize();t++){let s=this.getListElement(t);e=e+s.name,t!=this.getListSize()-1&&(e=e+", ")}}return e}toString(){let e="("+this.name+"=";if(this.rhsType==tr)e=e+this.atom;else if(this.rhsType==ca){if(this.listType==Ea)for(let t=0;t<this.getListSize();t++)e=e+this.getListElement(t).toString();else if(this.listType==li){e=e+" (";for(let t=0;t<this.getListSize();t++){let s=this.getListElement(t);e=e+s.name,t!=this.getListSize()-1&&(e=e+", ")}e=e+")"}}return e=e+")",e}};T(Pa,"NVPair");var hi=Pa,pp=0,Ni=1,ua=2,zt=3,lS=4,Si=8,Rp=9,la="(",ha=")",Na=",",Sa="=",mp="\\",ES='"',Ip="'",Dp="%",Cp=" ",Op="	",gp=`
`,Lp="\r",pa=class pa{constructor(){this.tkType=null,this.tkValue=null,this.numTokens=0,this.tkPos=0}_isWhiteSpace(e){return e==Cp||e==Op||e==gp||e==Lp}_trimWhiteSpace(e){let t=e.length,s=0,r=t;for(;s<t&&this._isWhiteSpace(e.charAt(s));)s++;for(;s<r&&this._isWhiteSpace(e.charAt(r-1));)r--;return e.substring(s,r)}parseTokens(e){this.numTokens=0,this.tkPos=0,this.tkType=new Array,this.tkValue=new Array;let t=e.length,s=!1,r=new Array;r=Array.from(e);let n=0;for(;n<t;){for(;n<t&&this._isWhiteSpace(r[n]);)n++;if(n<t)switch(r[n]){case la:s=!1,this._addToken(Ni,la),n++;break;case Sa:s=!0,this._addToken(lS,Sa),n++;break;case ha:s=!1,this._addToken(ua,ha),n++;break;case Na:s=!1,this._addToken(zt,Na),n++;break;default:{let _=n,a=-1,c=!1,E=ES;for((r[n]==Ip||r[n]==ES)&&(c=!0,E=r[n],n++,_=n);n<t;){if(r[n]==mp){n+=2;continue}if(c){if(r[n]==E){n++,a=n-1;break}}else if(r[n]==la||r[n]==ha||r[n]==Na&&!s||r[n]==Sa&&!s){a=n;break}n++}a==-1&&(a=n),this._addToken(Si,e.substring(_,a).trim());break}}}return this._addToken(Rp,Dp),!0}getToken(){if(this.tkType==null&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens)return Number(this.tkType[this.tkPos]);se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX)}popToken(){let e=pp;return this.tkType==null&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=Number(this.tkType[this.tkPos++]):se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),e}getLiteral(){let e=null;return this.tkValue==null&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=String(this.tkValue[this.tkPos]):se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),e}popLiteral(){let e=null;return this.tkValue==null&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=String(this.tkValue[this.tkPos++]):se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),e}eatToken(){this.tkPos<this.numTokens&&this.tkPos++}toString(){if(this.tkType==null)return"*NO TOKENS*";let e="Tokens";for(let t=0;t<this.numTokens;t++)e=e+" : "+this.tkValue[t];return e}_addToken(e,t){this.tkType.push(Number(e)),this.tkValue.push(String(t)),this.numTokens++}};T(pa,"NVTokens");var Aa=pa;function yp(i){let e=new Aa;return e.parseTokens(i),Bp(e)}T(yp,"createNVPair");function Bp(i){let e=i.getToken();i.eatToken(),e!=Ni&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=da(i),s=new hi(t);if((e=i.getToken())==zt){for(;e==Si||e==zt;)t+=i.popLiteral(),e=i.getToken();return s.name=t,fa(s,i)}return fa(s,i)}T(Bp,"readTopLevelNVPair");function wp(i){let e=i.getToken();i.eatToken(),e==Ni||e==zt||se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=da(i),s=new hi(t);return fa(s,i)}T(wp,"readNVPair");function fa(i,e){let t=e.getToken();switch(t){case lS:if(e.eatToken(),t=e.getToken(),t==Si){let s=da(e);i.setAtom=s}else hS(e,i);break;case zt:case ua:i.setAtom=i.name;break;default:se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX)}return t=e.getToken(),t==ua?e.eatToken():t!=zt&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),i}T(fa,"readRightHandSide");function da(i){return i.getToken()!=Si&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),i.popLiteral()}T(da,"readNVLiteral");function hS(i,e){let t=i.getToken();if(!(t==Ni||t==zt))return;let s=wp(i);e.addListElement(s),(t==zt||s.name==s.atom)&&e.getListType!=li&&(e.setListType=li),hS(i,e)}T(hS,"readNVList");function NS(i,e){if(!i)return null;if(e.toUpperCase()==i.name.toUpperCase())return i;if(i.getRHSType==tr)return null;for(let t=0;t<i.getListSize();t++){let s=NS(i.getListElement(t),e);if(s!==null)return s}return null}T(NS,"findNVPairRecurse");function SS(i,e){if(!i||i.getRHSType==tr)return null;for(let t=0;t<i.getListSize();t++){let s=i.getListElement(t);if(e.toUpperCase()==s.name.toUpperCase())return s}return null}T(SS,"findNVPair");function Yp(i,e){if(!i||e[0].toUpperCase()!=i.name.toUpperCase())return null;let t=i,s=e.length;for(let r=1;r<s;r++)if(t=SS(t,e[r]),!t)return null;return t.atom==null?t.list==null?null:t.list.toString():t.atom.toString()}T(Yp,"findValue");uS.exports={findNVPairRecurse:NS,createNVPair:yp,findNVPair:SS,findValue:Yp}});var dS=R((qg,fS)=>{"use strict";var{Buffer:Up}=require("buffer"),Mp=require("net"),AS=require("process"),sr=require("tls"),Vp=require("http"),Fp=require("timers"),Ra=ws(),Ne=Y(),{findValue:xp}=Ys(),kp=8,bp=1521,Gp=80,qp=4878,Hp=1,Ia=class Ia{constructor(e){this.atts=e,this.cha=qp,this.connected=!1,this.err=!1,this.needsDrain=!1,this.numPacketsSinceLastWait=0,this.secure=!1,this.largeSDU=!1,this.streamNum=Hp++,this.packetNum=1,this.doDNMatch=!0}dnMatch(e,t){if(this.atts.sslServerDNMatch&&this.doDNMatch){let s=T(r=>r.split(",").map(n=>n.split("=").map(_=>_.trim())).reduce((n,_)=>(n[_[0]]=_[1],n),{}),"toObject");if(this.atts.sslServerCertDN){let r=s(this.atts.sslServerCertDN);if(Object.keys(r).length==Object.keys(t.subject).length){for(let n in r)if(r[n]!=t.subject[n])return Ne.getErr(Ne.ERR_TLS_DNMATCH_FAILURE)}else return Ne.getErr(Ne.ERR_TLS_DNMATCH_FAILURE)}else if(sr.checkServerIdentity(this.hostName,t)&&(!this.originHost||sr.checkServerIdentity(this.originHost,t)))if(this.atts.sslAllowWeakDNMatch){if(xp(this.atts.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"])!=t.subject.CN)return Ne.getErr(Ne.ERR_TLS_DNMATCH_FAILURE)}else{let r=this.hostName+" "+(this.originHost?"or "+this.originHost:"");return Ne.getErr(Ne.ERR_TLS_HOSTMATCH_FAILURE,r)}}}async tlsConnect(e,t){this.stream.removeAllListeners();let s,r={host:this.host,socket:t,rejectUnauthorized:!0,secureContext:e,enableTrace:!1,checkServerIdentity:this.dnMatch.bind(this)};await new Promise(n=>{this.stream=sr.connect(r,()=>{this.stream.authorized||(s="server certificate unauthorized"),n()}).on("error",_=>{s=_.message,n()})}),s&&Ne.throwErr(Ne.ERR_TLS_AUTH_FAILURE,this.host,this.port,this.atts.connectionId,s),this.connStream=t}async ntConnect(e){e.port||(e.port=bp);let t,s,r,n=e.httpsProxy||this.atts.httpsProxy,_=e.httpsProxyPort||this.atts.httpsProxyPort;await new Promise(a=>{n?(_||(_=Gp),r=Vp.request({host:n,port:_,method:"CONNECT",path:e.host+":"+e.port}),r.once("connect",(c,E)=>{c.statusCode==200?(this.connected=!0,this.stream=E):s=c.statusCode,a()}),r.once("error",c=>{s=c.message,a()}),r.end()):(this.stream=Mp.connect(e.port,e.host,()=>{this.connected=!0,a()}),this.stream.once("error",c=>{t=c.message,a()}))}),r&&r.removeAllListeners(),this.connected||(s?Ne.throwErr(Ne.ERR_PROXY_CONNECTION_FAILURE,n,_,this.atts.connectionId,s):Ne.throwErr(Ne.ERR_CONNECTION_INCOMPLETE,this.host,this.port,this.atts.connectionId,t))}async connect(e){this.originHost=e.originHost,this.host=e.host,this.hostName=e.hostname,this.port=e.port;try{if(await this.ntConnect(e),(this.atts.expireTime||this.atts.enableDCD)&&(this.atts.expireTime?this.stream.setKeepAlive(!0,this.atts.expireTime):this.stream.setKeepAlive(!0)),this.atts.tcpNoDelay&&this.stream.setNoDelay(!0),e.protocol.toUpperCase()=="TCPS"){let t;this.secure=!0,this.atts.sslAllowWeakDNMatch&&(this.doDNMatch=!1);try{t=sr.createSecureContext({cert:this.atts.wallet,key:this.atts.wallet,passphrase:this.atts.walletPassword,ca:this.atts.wallet})}catch{Ne.throwErr(Ne.ERR_TLS_INIT_FAILURE)}await this.tlsConnect(t,this.stream)}}finally{this.stream&&this.setupEventHandlers()}}disconnect(e){this.connected&&!this.err&&(e==Ra.NSFIMM?this.stream.destroy():this.stream.end()),this.stream=null,this.connected=!1,this.drainWaiter=null,this.readWaiter=null}getPacketDump(e){let t=[];for(let s=0;s<e.length;s+=8){let r=s.toString().padStart(4,"0"),n=e.slice(s,s+8),_=[],a=[];for(let l of n)_.push(l.toString(16).toUpperCase().padStart(2,"0")),l>32&&l<127?a.push(String.fromCharCode(l)):a.push(".");for(;_.length<8;)_.push("  "),a.push(" ");let c=_.join(" "),E=a.join("");t.push(`${r} : ${c} |${E}|`)}return t.join(`
`)}printPacket(e,t){let s=new Date,r=`${s.getFullYear()}-${s.getMonth().toString().padStart(2,"0")}-${s.getDay().toString().padStart(2,"0")} ${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}:${s.getSeconds().toString().padStart(2,"0")}.${s.getMilliseconds().toString().padStart(3,"0")}`,n=this.getPacketDump(t);console.log(`${r} ${e}:
${n}
`)}checkErr(){if(!this.connected||this.err){let e;this.savedErr?e=Ne.getErr(Ne.ERR_CONNECTION_LOSTCONTACT,this.host,this.port,this.atts.connectionId,this.savedErr.message):e=Ne.getErr(Ne.ERR_CONNECTION_EOF,this.host,this.port,this.atts.connectionId);let t=Ne.getErr(Ne.ERR_CONNECTION_CLOSED);throw t.message=t.message+`
`+e.message,t}}send(e){this.checkErr(),AS.env.NODE_ORACLEDB_DEBUG_PACKETS&&this.printPacket(`Sending packet ${this.packetNum} on stream ${this.streamNum}`,e),this.stream.write(e,s=>{s&&(this.savedErr=s,this.err=!0,this._notifyWaiters())})||(this.needsDrain=!0),this.numPacketsSinceLastWait++,this.packetNum++}shouldPauseWrite(){return this.needsDrain||this.numPacketsSinceLastWait>=100}async pauseWrite(){this.checkErr(),this.needsDrain?(await new Promise(e=>{this.drainWaiter=e}),this.checkErr()):await new Promise(e=>Fp.setImmediate(e)),this.numPacketsSinceLastWait=0}startRead(){let e;this.packets=[],this.stream.on("data",t=>{for(e?e=Up.concat([e,t]):e=t;e.length>=kp;){let s;if(this.largeSDU?s=e.readUInt32BE():s=e.readUInt16BE(),s>e.length)break;let r={buf:e.subarray(0,s),type:e[4],flags:e[5],num:this.packetNum++};if(this.packets.push(r),this.readWaiter&&(this.readWaiter(),this.readWaiter=null),AS.env.NODE_ORACLEDB_DEBUG_PACKETS&&this.printPacket(`Receiving packet ${r.num} on stream ${this.streamNum}`,r.buf),s===e.length){e=null;break}else e=e.subarray(s)}})}syncReceive(){return this.packets.shift()}async receive(){return this.packets.length===0&&(this.checkErr(),await new Promise(e=>{this.readWaiter=e,this.numPacketsSinceLastWait=0}),this.checkErr()),this.packets.shift()}async renegTLS(){try{this.checkErr(),this.doDNMatch=!0;let e=sr.createSecureContext({cert:this.atts.wallet,key:this.atts.wallet,passphrase:this.atts.walletPassword,ca:this.atts.wallet});await this.tlsConnect(e,this.connStream)}finally{this.setupEventHandlers()}}setupEventHandlers(){this.stream.removeAllListeners(),this.stream.on("error",e=>{this.savedErr=e,this.err=!0,this._notifyWaiters()}),this.stream.on("end",()=>{this.err=!0,this._notifyWaiters()}),this.stream.on("close",()=>{this.connected=!1,this._notifyWaiters()}),this.stream.on("drain",()=>{this.needsDrain=!1,this.drainWaiter&&(this.drainWaiter(),this.drainWaiter=null)})}getOption(e){switch(this.checkErr(),e){case Ra.NT_MOREDATA:return this.packets.length>0;case Ra.REMOTEADDR:{let t=this.secure?this.connStream:this.stream;return t.remoteAddress+":"+t.remotePort}default:Ne.throwErr(Ne.ERR_INTERNAL,"getOption not supported for opcode "+e)}}_notifyWaiters(){this.drainWaiter&&(this.drainWaiter(),this.drainWaiter=null),this.readWaiter&&(this.readWaiter(),this.readWaiter=null)}};T(Ia,"NTTCP");var ma=Ia;fS.exports=ma});var RS=R((vg,pS)=>{"use strict";var vp=require("crypto"),Kp=require("path"),PS=ws(),Wp=require("fs");async function Xp(){return await new Promise((i,e)=>{vp.randomBytes(16,(t,s)=>{t?e(t):i(s)})})}T(Xp,"genuuid");var Ca=class Ca{constructor(e){this.largeSDU=!1,this.tdu=PS.NSPDFTDULN,this.nt={},this.nt.tcpNoDelay=!0,this.uuid=e,this.nt.sslServerDNMatch=!0,this.nt.sslAllowWeakDNMatch=!1}setFrom(e){e&&(e.sdu>0&&(this.sdu=parseInt(e.sdu)),typeof e.walletLocation=="string"&&(this.nt.walletFile=Kp.join(e.walletLocation,PS.PEM_WALLET_FILE_NAME)),typeof e.walletPassword=="string"&&(this.nt.walletPassword=e.walletPassword),typeof e.walletContent=="string"&&(this.nt.wallet=e.walletContent),e.expireTime>0&&(this.nt.expireTime=e.expireTime*1e3*60),e.connectTimeout>0&&(this.connectTimeout=e.connectTimeout*1e3),e.transportConnectTimeout>0&&(this.transportConnectTimeout=e.transportConnectTimeout*1e3),e.recvTimeout>0&&(this.recvTimeout=e.recvTimeout*1e3),e.sendTimeout>0&&(this.sendTimeout=e.sendTimeout*1e3),typeof e.connectionIdPrefix=="string"&&(this.connectionIdPrefix=e.connectionIdPrefix),typeof e.tcpNoDelay=="boolean"&&(this.nt.tcpNoDelay=e.tcpNoDelay),typeof e.sslServerDNMatch=="boolean"&&(this.nt.sslServerDNMatch=e.sslServerDNMatch),typeof e.sslAllowWeakDNMatch=="boolean"&&(this.nt.sslAllowWeakDNMatch=e.sslAllowWeakDNMatch),typeof e.sslServerCertDN=="string"&&(this.nt.sslServerCertDN=e.sslServerCertDN),typeof e.enable=="string"&&e.enable.toUpperCase()=="BROKEN"&&(this.nt.enabledDCD=!0),typeof e.httpsProxy=="string"&&(this.nt.httpsProxy=e.httpsProxy),e.httpsProxyPort>=0&&(this.nt.httpsProxyPort=parseInt(e.httpsProxyPort)))}readWalletFile(){return new Promise((e,t)=>{Wp.readFile(this.nt.walletFile,(s,r)=>{s?t(s):e(r)})})}clearWallet(){this.nt.wallet&&Buffer.isBuffer(this.nt.wallet)&&this.nt.wallet.fill(0),this.nt.wallet=null}async prepare(e){this.uuid||(this.uuid=await Xp(),this.uuid=this.uuid.toString("base64")),this.connectionIdPrefix?this.connectionId=this.connectionIdPrefix+this.uuid:this.connectionId=this.uuid,this.nt.connectionId=this.connectionId,e&&e.toUpperCase()=="TCPS"&&!this.nt.wallet&&this.nt.walletFile&&(this.nt.wallet=await this.readWalletFile()),!this.connectTimeout&&!this.transportConnectTimeout&&(this.transportConnectTimeout=60*1e3)}};T(Ca,"SessionAtts");var Da=Ca;pS.exports=Da});var rr=R((Wg,DS)=>{"use strict";var zp=Ye(),ui=Y(),mS=require("os");function Qp(){this.program=process.argv0,this.terminal="unknown",this.pid=process.pid.toString();try{this.userName=mS.userInfo().username}catch{this.userName="unknown"}this.hostName=mS.hostname()}T(Qp,"populateClientInfo");var Jp=new Qp;function jp(i){let e=[];for(let t of i)e.push(t.fetchInfo);return e}T(jp,"getMetadataMany");function IS(i,e){let t=i[0].name===void 0,s=t?[]:{};for(let r=0;r<i.length;r++)t?s.push(i[r].values[e]):s[i[r].name]=i[r].values[e];return s}T(IS,"getOutBindValues");function Zp(i,e,t){let r=i.bindInfoList.map(n=>n.bindVar).filter(n=>n.dir!==zp.BIND_IN);if(r.length>0){if(t){let n=new Array(e);for(let _=0;_<e;_++)n[_]=IS(r,_);return n}return IS(r,0)}}T(Zp,"getOutBinds");function $p(i){let e="",t="",s=!1,r=!1,n=0,_={status:-1,proxyUser:"",schemaUser:""},a=i.length,c=0,E,l;for(;c<a;){if(i.charAt(c)==='"'&&(s=!s,n=c),i.charAt(c)==="["&&!s){if(r=!0,n!=0){for(E=n+1;E<c;E++)if(i.charAt(E)!==" ")return _;for(E=0;E<=n;E++)t+=i.charAt(E)}else for(E=0;E<c&&i.charAt(E)!==" ";E++)t+=i.charAt(E);break}c++}if(t.length===0)return _;_.proxyUser=t,c=c+1,s=!1;let N=c;for(n=0;c<a;){if(i.charAt(c)==='"'&&(s=!s,n=c),i.charAt(c)==="["&&!s&&r)return _;if(i.charAt(c)==="]"&&!s){if(n!=N&&n!=0){for(E=N;E<=n;E++)e+=i.charAt(E);for(E=n+1;E<c;E++)if(i.charAt(E)!=" ")return _}else{for(E=N;E<c&&i.charAt(E)==" ";E++);if(E==c)return _;for(l=E;l<c;l++)e+=i[l]}for(E=c+1;E<a;E++)if(i[E]!=" ")return _}c++}return e.length===0||(_.schemaUser=e,_.status=0),_}T($p,"checkProxyUserValidity");function eR(i){i.token===void 0&&(i.externalAuth===!0&&ui.throwErr(ui.ERR_NOT_IMPLEMENTED,"External Authentication"),i.password===void 0&&ui.throwErr(ui.ERR_MISSING_CREDENTIALS))}T(eR,"checkCredentials");function tR(i){return`-----BEGIN PRIVATE KEY-----
`+i+`
-----END PRIVATE KEY-----`}T(tR,"normalizePrivateKey");DS.exports={getMetadataMany:jp,CLIENT_INFO:Jp,getOutBinds:Zp,checkProxyUserValidity:$p,checkCredentials:eR,normalizePrivateKey:tR}});var LS=R((zg,gS)=>{"use strict";var{findNVPairRecurse:ir,createNVPair:Pi}=Ys(),ke=Y(),sR=require("os"),rR=require("net"),iR=require("dns"),CS=iR.promises,Oa=rr().CLIENT_INFO,pi={ADDR:0,ADDR_LIST:1,DESC:2,DESC_LIST:3},wa=class wa{isS(){return pi.ADDR}initFromString(e){let t=Pi(e);this.initFromNVPair(t)}initFromNVPair(e){(e==null||e.name.toUpperCase()!="ADDRESS")&&ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=ir(e,"protocol"),s=ir(e,"port"),r=ir(e,"host"),n=ir(e,"https_proxy"),_=ir(e,"https_proxy_port");s&&(this.port=Number(s.atom)),r&&(this.host=r.atom),t&&(this.prot=t.atom),n&&(this.httpsProxy=n.atom),_&&(this.httpsProxyPort=Number(_.atom)),this.addr=e.toString()}toString(){return this.addr}};T(wa,"Address");var ga=wa,Ya=class Ya{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!1,this.failover=!0}isS(){return pi.ADDR_LIST}initFromString(e){let t=Pi(e);this.initFromNVPair(t)}initFromNVPair(e){this.children=[];let t,s,r=e.getListSize();r==0&&ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let n=0;n<r;n++)t=e.getListElement(n),t.name.toUpperCase()=="SOURCE_ROUTE"?this.sourceRoute=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="LOAD_BALANCE"?this.loadBalance=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="FAILOVER"?this.failover=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="ADDRESS"?(s=new nr,s.initFromNVPair(t),this.children.push(s)):t.name.toUpperCase()=="ADDRESS_LIST"?(s=new or,s.initFromNVPair(t),this.children.push(s)):ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX);this.children.length==0&&ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX)}toString(){let e=new String("");if(this.children.size()<1)return e;e+="(ADDRESS_LIST=";for(let t=0;t<this.children.size();t++)e+=this.children[t].toString();return this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"+Us.HC),this.loadBalance&&(e+="(LOAD_BALANCE=yes)"),this.failover||(e+="(FAILOVER=false)"),e+=")",e}};T(Ya,"AddressList");var La=Ya,Ua=class Ua{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!1,this.failover=!0,this.delayInMillis=-1,this.params={}}isS(){return pi.DESC}initFromString(e){let t=Pi(e);this.initFromNVPair(t)}initFromNVPair(e){let t=e.getListSize(),s,r;t==0&&ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let n=0;n<t;n++)if(s=e.getListElement(n),s.name.toUpperCase()=="SOURCE_ROUTE")this.sourceRoute=s.atom.toLowerCase()=="yes"||s.atom.toLowerCase()=="on"||s.atom.toLowerCase()=="true";else if(s.name.toUpperCase()=="LOAD_BALANCE")this.loadBalance=s.atom.toLowerCase()=="yes"||s.atom.toLowerCase()=="on"||s.atom.toLowerCase()=="true";else if(s.name.toUpperCase()=="FAILOVER")this.failover=s.atom.toLowerCase()=="yes"||s.atom.toLowerCase()=="on"||s.atom.toLowerCase()=="true";else if(s.name.toUpperCase()=="ADDRESS_LIST")r=new or,r.initFromNVPair(s),this.children.push(r);else if(s.name.toUpperCase()=="ADDRESS")r=new nr,r.initFromNVPair(s),this.children.push(r);else if(s.name.toUpperCase()=="CONNECT_DATA"){let _,a=s.getListSize();for(let c=0;c<a;c++)if(_=s.getListElement(c),_.name.toUpperCase()=="CONNECTION_ID_PREFIX"){this.params.connectionIdPrefix=_.atom,s.removeListElement(c);break}this.connectData=s.valueToString()}else if(s.name.toUpperCase()=="RETRY_DELAY")s.atom>0&&(this.delayInMillis=s.atom*1e3);else if(s.name.toUpperCase()=="RETRY_COUNT")this.retryCount=s.atom;else if(s.name.toUpperCase()=="CONNECTION_ID_PREFIX")this.conidPrefix=s.atom;else if(s.name.toUpperCase()=="CONNECT_TIMEOUT")s.atom>0&&(this.params.connectTimeout=s.atom);else if(s.name.toUpperCase()=="TRANSPORT_CONNECT_TIMEOUT")s.atom>0&&(this.params.transportConnectTimeout=s.atom);else if(s.name.toUpperCase()=="ENABLE")this.params.enable=s.atom;else if(s.name.toUpperCase()=="RECV_TIMEOUT")s.atom>0&&(this.params.recvTimeout=s.atom);else if(s.name.toUpperCase()=="SDU")this.params.sdu=s.atom;else if(s.name.toUpperCase()=="EXPIRE_TIME")s.atom>0&&(this.params.expireTime=s.atom);else if(s.name.toUpperCase()=="SECURITY"){let _=s.getListSize(),a;for(let c=0;c<_;c++)a=s.getListElement(c),a.name.toUpperCase()=="SSL_SERVER_CERT_DN"?this.params.sslServerCertDN=a.valueToString():a.name.toUpperCase()=="SSL_SERVER_DN_MATCH"?this.params.sslServerDNMatch=a.atom.toLowerCase()=="yes"||a.atom.toLowerCase()=="on"||a.atom.toLowerCase()=="true":a.name.toUpperCase()=="SSL_ALLOW_WEAK_DN_MATCH"?this.params.sslAllowWeakDNMatch=a.atom.toLowerCase()=="yes"||a.atom.toLowerCase()=="on"||a.atom.toLowerCase()=="true":(a.name.toUpperCase()=="WALLET_LOCATION"||a.name.toUpperCase()=="MY_WALLET_DIRECTORY")&&(this.params.walletLocation=a.atom)}}toString(){let e=new String(""),t;t=new String("");for(let s=0;s<this.children.size();s++)t=this.children[s].toString(),!t==""&&(e+=t);return!e==""&&this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"),!e==""&&this.loadBalance&&(e+="(LOAD_BALANCE=yes)"),!e==""&&!this.failover&&(e+="(FAILOVER=false)"),e.equals("")||(e="(DESCRIPTION="+e+")"),e}};T(Ua,"Description");var ya=Ua,Ma=class Ma{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!0,this.failover=!0}isS(){return pi.ADDR_LIST}initFromString(e){let t=Pi(e);this.initFromNVPair(t)}initFromNVPair(e){let t=e.getListSize(),s,r;t==0&&ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let n=0;n<t;n++)r=e.getListElement(n),r.name.toUpperCase()=="SOURCE_ROUTE"?this.sourceRoute=r.atom.toLowerCase()=="yes"||r.atom.toLowerCase()=="on"||r.atom.toLowerCase=="true":r.name.toUpperCase()=="LOAD_BALANCE"?this.loadBalance=r.atom.toLowerCase()=="yes"||r.atom.toLowerCase()=="on"||r.atom.toLowerCase()=="true":r.name.toUpperCase()=="FAILOVER"?this.failover=r.atom.toLowerCase()=="yes"||r.atom.toLowerCase()=="on"||r.atom.toLowerCase()=="true":r.name.toUpperCase()=="DESCRIPTION"?(s=new fi,s.initFromNVPair(r),this.children.push(s)):ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX);this.children.length==0&&ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX)}toString(){let e=new String("");if(this.children.size()<1)return e;let t=new String("");for(let s=0;s<this.children.size();s++)t=this.children[s].toString(),t.equals("")||(e+=t);return e.equals("")&&this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"),e.equals("")&&!this.loadBalance&&(e+="(LOAD_BALANCE=no)"),e.equals("")&&!this.failover&&(e+="(FAILOVER=false)"),e.equals("")||(e="(DESCRIPTION_LIST="+e+")"),e}};T(Ma,"DescriptionList");var Ba=Ma,Va=class Va{constructor(){this.CNdata=new Array}};T(Va,"ConnOption");var Ai=Va,Us={DEBUG:!1,SR:"(SOURCE_ROUTE=yes)",HC:"(HOP_COUNT=0)",LB:"(LOAD_BALANCE=yes)",NFO:"(FAILOVER=false)",CD:"(CONNECT_DATA=",CONID:"(CONNECTION_ID="},OS={all:!0},Fa=class Fa extends ga{constructor(){super()}async navigate(e){let t,s=0,r=!1;if(!this.host){s=1,this.host=sR.hostname();try{await CS.lookup(this.host,OS)}catch{this.host="localhost"}}if(e.getcurrentDescription()==null&&(e.newConnectionDescription(),r=!0),rR.isIP(this.host)){let n=new Ai;n.hostname=this.host,n.port=this.port,n.protocol=this.prot,n.httpsProxy=this.httpsProxy,n.httpsProxyPort=this.httpsProxyPort,n.desc=e.getcurrentDescription(),n.CNdata.push(e.sBuf.join("")),n.CNdata.push(this.toString()),n.host=this.host,n.addr=this.addr,e.getcurrentDescription().addConnectOption(n)}else try{t=await CS.lookup(this.host,OS);for(let n of t){let _=new Ai;_.hostname=this.host,_.port=this.port,_.protocol=this.prot,_.httpsProxy=this.httpsProxy,_.httpsProxyPort=this.httpsProxyPort,_.desc=e.getcurrentDescription(),_.CNdata.push(e.sBuf.join("")),s==1?_.CNdata.push("(address=(protocol="+this.prot+")(host="+this.host+")(port="+this.port+"))"):_.CNdata.push(this.toString()),_.host=n.address,_.addr=this.addr,e.getcurrentDescription().addConnectOption(_)}}catch{}r&&e.closeDescription()}addToString(e){let t=this.toString(),s=new Array;s=e.getcurrentDescription().getConnectOptions();for(let r=0;r<s.length;r++)s[r].done||s[r].CNdata.push(t)}};T(Fa,"NavAddress");var nr=Fa,xa=class xa extends La{constructor(){super(),this.activeChildren=new Array,this.sBuflength=0}async navigate(e){await this.navigate2(e,0)}async navigate2(e,t){if(t++,this.sBuflength=e.sBuf.length,e.sBuf.push("(ADDRESS_LIST="),this.sourceRoute){this.activeChildren=this.children,await this.activeChildren[0].navigate(e);for(let s=1;s<this.activeChildren.length;s++)this.activeChildren[s].addToString(e)}else{this.activeChildren=_r.setActiveChildren(this.children,this.failover,this.loadBalance);for(let s=0;s<this.activeChildren.length;s++)this.getChildrenType(s)==1?await this.activeChildren[s].navigate2(e,t):await this.activeChildren[s].navigate(e)}this.closeNVPair(e),e.sBuf.length=this.sBuflength}addToString(e){let t=this.toString(),s=new Array;s=e.getcurrentDescription().getConnectOptions();for(let r=0;r<s.length;r++)s[r].done||s[r].CNdata.push(t)}getChildrenSize(){let e=0;for(let t=0;t<this.activeChildren.length;t++)if(this.getChildrenType(t)==1?e+=this.activeChildren[t].getChildrenSize():e++,this.sourceRoute)return e;return e}getChildrenType(e){return this.activeChildren[e].isS()}getChild(e){return this.children[e]}closeNVPair(e){let t=new Array,s=this.getChildrenSize();if(e.getcurrentDescription()!=null){t=e.getcurrentDescription().getConnectOptions();let r=0,n=null,_=null;for(let a=t.length-1;a>=0&&!t[a].done&&((t[a].hostname!=n||t[a].port!=_)&&r++,n=t[a].hostname,_=t[a].port,!(r>s));a--)this.sourceRoute&&(t[a].CNdata.push(Us.SR),t[a].CNdata.push(Us.HC),t[a].done=!0),t[a].CNdata.push(")")}}};T(xa,"NavAddressList");var or=xa,ka=class ka extends ya{constructor(){super(),this.activeChildren=new Array,this.descProcessed=0}async navigate(e){e.sBuf.length=0,e.sBuf.push("(DESCRIPTION=");let t=e.newConnectionDescription();if(this.retryCount!=null&&(e.retryCount=this.getIntValue(this.retryCount,e.retryCount),t.retryCount=e.retryCount),this.delayInMillis!=-1&&(t.delayInMillis=this.delayInMillis),t.params=this.params,"connectTimeout"in this.params&&e.sBuf.push("(CONNECT_TIMEOUT="+this.params.connectTimeout+")"),"transportConnectTimeout"in this.params&&e.sBuf.push("(TRANSPORT_CONNECT_TIMEOUT="+this.params.transportConnectTimeout+")"),"recvTimeout"in this.params&&e.sBuf.push("(RECV_TIMEOUT="+this.params.recvTimeout+")"),"sdu"in this.params&&e.sBuf.push("(SDU="+this.params.sdu+")"),"expireTime"in this.params&&e.sBuf.push("(EXPIRE_TIME="+this.params.expireTime+")"),"enable"in this.params&&e.sBuf.push("(ENABLE="+this.params.enable+")"),("sslServerCertDN"in this.params||"sslServerDNMatch"in this.params||"walletLocation"in this.params||"sslAllowWeakDNMatch"in this.params)&&(e.sBuf.push("(SECURITY="),"sslServerCertDN"in this.params&&e.sBuf.push("(SSL_SERVER_CERT_DN="+this.params.sslServerCertDN+")"),"sslServerDNMatch"in this.params&&e.sBuf.push("(SSL_SERVER_DN_MATCH="+this.params.sslServerDNMatch+")"),"sslAllowWeakDNMatch"in this.params&&e.sBuf.push("(SSL_ALLOW_WEAK_DN_MATCH="+this.params.sslAllowWeakDNMatch+")"),"walletLocation"in this.params&&e.sBuf.push("(WALLET_LOCATION="+this.params.walletLocation+")"),e.sBuf.push(")")),"httpsProxyPort"in this.params&&e.sBuf.push("(HTTPS_PROXY_PORT="+this.params.httpsProxyPort+")"),"httpsProxy"in this.params&&e.sBuf.push("(HTTPS_PROXY="+this.params.httpsProxy+")"),this.failover||e.sBuf.push(Us.NFO),this.sourceRoute){this.activeChildren=this.children,await this.activeChildren[0].navigate(e);for(let s=1;s<this.activeChildren.length;s++)this.activeChildren[s].addToString(e);this.closeNVPair(e)}else{this.activeChildren=_r.setActiveChildren(this.children,this.failover,this.loadBalance);for(let s=0;s<this.activeChildren.length;s++)await this.activeChildren[s].navigate(e);this.closeNVPair(e)}e.closeDescription()}closeNVPair(e){if(e.getcurrentDescription()==null)return;let t=new Array;t=e.getcurrentDescription().getConnectOptions();for(let s=0;s<t.length;++s){this.sourceRoute&&t[s].CNdata.push(Us.SR),this.connectData==null&&(this.connectData="(SERVICE_NAME=)");let n=`(CID=(PROGRAM=${`"'`+Oa.program+`'"`})(HOST=${Oa.hostName})(USER=${Oa.userName}))`;t[s].CNdata.push(Us.CD),t[s].CNdata.push(this.connectData),t[s].CNdata.push(n),t[s].CNdata.push(")"),this.SID!=null&&(t[s].sid=this.SID),this.serviceName!=null&&(t[s].service_name=this.serviceName),this.instanceName!=null&&(t[s].instance_name=this.instanceName),t[s].CNdata.push(")"),t[s].done=!0}}getIntValue(e,t){try{return parseInt(e)}catch{return t}}};T(ka,"NavDescription");var fi=ka,di=class di extends Ba{constructor(e=new Array,t=0,s=0){super(),this.activeChildren=e,this.descProcessed=t,this.done=s}async navigate(e){for(e.sBuf.push("(DESCRIPTION_LIST="),this.activeChildren=di.setActiveChildren(this.children,this.failover,this.loadBalance);this.descProcessed<this.activeChildren.length;)await this.activeChildren[this.descProcessed].navigate(e),this.descProcessed++}static setActiveChildren(e,t,s){let r,n=e.length,_=new Array,a=Math.floor(Math.random()*10),c=new Array(n).fill(!1);if(t)if(s)for(let E=0;E<n;E++){do r=Math.abs(Math.floor(Math.random()*10))%n;while(c[r]);c[r]=!0,_.push(e[r])}else _=e;else s?(r=Math.abs(a)%n,_.push(e[r])):_.push(e[0]);return _}};T(di,"NavDescriptionList");var _r=di;gS.exports={NavAddress:nr,NavAddressList:or,NavDescription:fi,NavDescriptionList:_r}});var Xa=R((Jg,BS)=>{"use strict";var{NavAddress:nR,NavAddressList:oR,NavDescription:_R,NavDescriptionList:aR}=LS(),{createNVPair:TR}=Ys(),yS=Y(),va=class va{constructor(){this.cOpts=new Array}addConnectOption(e){this.cOpts.push(e)}getConnectOptions(){return this.cOpts}};T(va,"ConnectDescription");var ba=va,Ka=class Ka{constructor(){this.reset(),this.retryCount=0,this.currentDescription=null,this.descriptionList=new Array,this.sBuf=new Array}reset(){this.nextOptToTry=0,this.lastRetryCounter=0,this.lastRetryConnectDescription=0,this.reorderDescriptionList=0}hasMoreOptions(){let e=0;for(let t=0;t<this.descriptionList.length;++t)e+=this.descriptionList[t].getConnectOptions().length;return this.nextOptToTry<e}newConnectionDescription(){return this.currentDescription=new ba,this.currentDescription}getcurrentDescription(){return this.currentDescription}closeDescription(){this.descriptionList.push(this.currentDescription),this.currentDescription=null}async execute(e){e!=null&&this.retryCount==0&&e.retryCount>0&&(this.retryCount=e.retryCount),this.reorderDescriptionList||(this.descriptionList=Ha.reorderDescriptionList(this.descriptionList),this.reorderDescriptionList=!0);for(let t=this.lastRetryConnectDescription;t<this.descriptionList.length;t++){let s=this.descriptionList[t],r=new Array;r=s.getConnectOptions();let n=s.delayInMillis;e!=null&&(n==0||n==null)&&e.retryDelay>0&&(n=e.retryDelay*1e3);for(let _=this.lastRetryCounter;_<=this.retryCount;++_){for(this.nextOptToTry==0&&(r=Ha.reorderAddresses(r));this.nextOptToTry<r.length;){let a=r[this.nextOptToTry];return this.lastRetryCounter=_,this.lastRetryConnectDescription=t,this.nextOptToTry++,a}this.nextOptToTry=0,n>0&&_<this.retryCount&&await cR(n)}this.lastRetryCounter=0}throw this.nextOptToTry=1e3,this.lastRetryCounter=1e3,new Error("All options tried")}};T(Ka,"ConnStrategy");var Ga=Ka;function cR(i){return new Promise(e=>setTimeout(e,i))}T(cR,"sleep");async function ER(i){let e;typeof i=="string"?e=TR(i):e=i;let t=e.name.toUpperCase(),s=null;switch(t){case"ADDRESS":s=new nR;break;case"ADDRESS_LIST":s=new oR;break;case"DESCRIPTION":s=new _R;break;case"DESCRIPTION_LIST":s=new aR;break;default:yS.throwErr(yS.ERR_INVALID_CONNECT_STRING_PARAMETERS,`unknown top element ${t}`)}s.initFromNVPair(e);let r=new Ga;return await s.navigate(r),r}T(ER,"createNode");var Wa=class Wa{constructor(){this.DOWN_HOSTS_TIMEOUT=600,this.MIN_TIME_BETWEEN_REFRESH=60,this.downHostsCacheMap=new Map,this.lastRefreshTime=0}markDownHost(e){return this.downHostsCacheMap.set(e,Date.now())}refreshCache(){Date.now()-this.MIN_TIME_BETWEEN_REFRESH*1e3>this.lastRefreshTime&&(this.downHostsCacheMap.forEach((e,t)=>{let s=e;s!=null&&Date.now()-this.DOWN_HOSTS_TIMEOUT*1e3>s&&this.downHostsCacheMap.delete(t)}),this.lastRefreshTime=Date.now())}reorderAddresses(e){this.refreshCache();let t=0,s=e.length-1;for(;t<s;){for(;t<=s&&!this.isDownHostsCached(e[t]);)t++;for(;s>=t&&this.isDownHostsCached(e[s]);)s--;t<s&&([e[t],e[s]]=[e[s],e[t]])}return e}isDownDescCached(e){let t=e.getConnectOptions();for(let s=0;s<t.length;s++)if(!this.isDownHostsCached(t[s]))return!1;return!0}reorderDescriptionList(e){this.refreshCache();let t=0,s=e.length-1;for(;t<s;){for(;t<=s&&!this.isDownDescCached(e[t]);)t++;for(;s>=t&&this.isDownDescCached(e[s]);)s--;t<s&&([e[t],e[s]]=[e[s],e[t]])}return e}isDownHostsCached(e){return this.downHostsCacheMap.has(e.host)}};T(Wa,"DownHostsCache");var qa=Wa,Ha=new qa;BS.exports={createNode:ER,SOLE_INST_DHCACHE:Ha}});var MS=R((Zg,US)=>{"use strict";var Qt=Y(),YS=new RegExp("((?=(?<hostnames>(((\\[[A-z0-9:]+\\])|([A-z0-9][A-z0-9._-]+))[,]?)+)))\\k<hostnames>(:(?<port>\\d+)?)?","g"),lR=new RegExp("^(((?<protocol>[A-z0-9]+):)?//)?(?<hostinfo>("+YS.source+"(?=([,]|[;]|[/]|[:]|$))([,]|[;])?)+)(/(?<servicename>[A-z0-9][A-z0-9,-.]+)?)?(:(?<servermode>dedicated|shared|pooled))?(/(?<instance>[A-z0-9][A-z0-9]+))?$","ig"),wS='"',hR="=",NR="&",SR=["ENABLE","FAILOVER","LOAD_BALANCE","RECV_BUF_SIZE","SEND_BUF_SIZE","SDU","SOURCE_ROUTE","RETRY_COUNT","RETRY_DELAY","CONNECT_TIMEOUT","TRANSPORT_CONNECT_TIMEOUT","RECV_TIMEOUT"],Qa=class Qa{constructor(e){this.URL_PROPS_ALIAS=this.initializeUrlAlias(),this.url=e,this.resolvedUrl="",this.connectionProps=new Map,this.urlProps=new Map,this.lb=!1}getResolvedUrl(){return this.parse(),this.resolvedUrl}parse(){let e=this.parseExtendedSettings(this.url);this.connectionProps.size===0&&this.urlProps.size===0&&(e=this.url),this.resolvedUrl=this.resolveToLongURLFormat(e)}resolveToLongURLFormat(e){let t=e.replace(/\s/g,""),s=0,r=null,n=null,_=null,a=null,c=null;for(let S of t.matchAll(lR))s=1,r=S.groups.protocol,n=S.groups.hostinfo,_=S.groups.servicename,a=S.groups.servermode,c=S.groups.instance;s||Qt.throwErr(Qt.ERR_INVALID_EZCONNECT_SYNTAX,"input string not in easy connect format",t),r==null?e.includes("//")||(r="TCP"):r.toLowerCase()!="tcp"&&r.toLowerCase()!="tcps"&&Qt.throwErr(Qt.ERR_INVALID_EZCONNECT_SYNTAX,"Unsupported protocol in thin mode",r);let E=this.urlProps.get("HTTPS_PROXY"),l=this.urlProps.get("HTTPS_PROXY_PORT"),N=this.buildAddressList(n,r,E,l),P=this.urlProps.get("CONNECTION_ID_PREFIX"),d=[];return this.lb&&d.push("(LOAD_BALANCE=ON)"),d.push(this.buildDescriptionParams()),d.push(N),d.push(this.buildConnectData(_,a,c,P)),d.push(this.buildSecurityInfo(r)),`(DESCRIPTION=${d.join("")})`}buildConnectData(e,t,s,r){let n=this.urlProps.get("POOL_CONNECTION_CLASS"),_=this.urlProps.get("POOL_PURITY"),a=this.urlProps.get("SERVICE_TAG"),c=this.urlProps.get("POOL_BOUNDARY"),E=[];return e?E.push(`(SERVICE_NAME=${e})`):E.push("(SERVICE_NAME=)"),t&&E.push(`(SERVER=${t})`),s&&E.push(`(INSTANCE_NAME=${s})`),n&&E.push(`(POOL_CONNECTION_CLASS=${n})`),_&&E.push(`(POOL_PURITY=${_})`),a&&E.push(`(SERVICE_TAG=${a})`),r&&E.push(`(CONNECTION_ID_PREFIX=${r})`),c&&E.push(`(POOL_BOUNDARY=${c})`),`(CONNECT_DATA=${E.join("")})`}buildAddressList(e,t,s,r){let n=new Array,_="";s!=null&&(r!=null?_=`(HTTPS_PROXY=${s})(HTTPS_PROXY_PORT=${r})`:_=`(HTTPS_PROXY=${s})`),t==null&&(t="TCP");let a=0,c=e.split(";");for(let E of c){let l=0,N=new Array;for(let d of E.matchAll(YS)){let S=d.groups.hostnames.split(","),A=d.groups.port;A==null&&(A="1521");for(let p of S)N.push(this.getAddrStr(p,A,t,_)),l++}a+=l;let P=[];c.length>1&&l>1&&P.push("(LOAD_BALANCE=ON)"),P.push(N.join("")),c.length>1?n.push(`(ADDRESS_LIST=${P.join("")})`):n.push(P.join(""))}return c.length<2&&a>1&&(this.lb=!0),n.join("")}getAddrStr(e,t,s,r){let n=e.trim();return n.startsWith("[")&&n.endsWith("]")&&(n=n.substring(1,n.length-1)),`(ADDRESS=(PROTOCOL=${s})(HOST=${n})(PORT=${t})${r})`}buildDescriptionParams(){if(this.urlProps.size===0)return"";let e=new Array;return this.urlProps.forEach(function(t,s){SR.includes(s)&&e.push(`(${s}=${t})`)}),e.join("")}buildSecurityInfo(e){let t=new Array;if(e!=null&&e.toLowerCase()=="tcps"){let s=this.urlProps.get("SSL_SERVER_DN_MATCH"),r=this.urlProps.get("SSL_SERVER_CERT_DN"),n=this.urlProps.get("MY_WALLET_DIRECTORY");s!=null&&t.push(`(SSL_SERVER_DN_MATCH=${s})`),r!=null&&t.push(`(SSL_SERVER_CERT_DN=${r}})`),n!=null&&t.push(`(MY_WALLET_DIRECTORY=${n})`)}return t.length===0?"":`(SECURITY=${t.join("")})`}parseExtendedSettings(e){let t=Array.from(e.trim()),s=this.findExtendedSettingPosition(t);return s==-1?e:(this.parseExtendedProperties(t,s+1),e.substring(0,s))}parseExtendedProperties(e,t){let s=null,r=null,n=new Array(e.length),_=0,a="";for(let c=t;c<e.length;c++)if(e[c].trim()!="")switch(e[c]){case wS:a=this.parseQuotedString(c,e,_,n),_=a[1],c=a[0];break;case hR:s!=null&&Qt.throwErr(Qt.ERR_INVALID_EZCONNECT_SYNTAX,"unable to parse, invalid syntax",this.url),s=n.join("").substring(0,_).trim(),_=0;break;case NR:s==null&&Qt.throwErr(Qt.ERR_INVALID_EZCONNECT_SYNTAX,"unable to parse, invalid syntax",this.url),r=n.join("").substring(0,_).trim(),this.addParam(s,r),s=null,r=null,_=0;break;default:n[_++]=e[c]}s!=null&&(r=n.join("").substring(0,_).trim(),this.addParam(s,r))}parseQuotedString(e,t,s,r){let n=e+1;for(;n<t.length;){let _=t[n];if(_==wS)return[n,s];r[s++]=_,n++}}addParam(e,t){let s=e.toLowerCase(),r=this.URL_PROPS_ALIAS.get(s);r!=null?this.urlProps.set(r,t):this.connectionProps.set(r,t)}findExtendedSettingPosition(e){let t=0;for(let s=0;s<e.length;s++)if(e[s]=="(")t++;else if(e[s]==")")t--;else if(e[s]=="?"&&t==0)return s;return-1}initializeUrlAlias(){let e=new Map;return e.set("enable","ENABLE"),e.set("failover","FAILOVER"),e.set("load_balance","LOAD_BALANCE"),e.set("recv_buf_size","RECV_BUF_SIZE"),e.set("send_buf_size","SEND_BUF_SIZE"),e.set("sdu","SDU"),e.set("source_route","SOURCE_ROUTE"),e.set("retry_count","RETRY_COUNT"),e.set("retry_delay","RETRY_DELAY"),e.set("https_proxy","HTTPS_PROXY"),e.set("https_proxy_port","HTTPS_PROXY_PORT"),e.set("connect_timeout","CONNECT_TIMEOUT"),e.set("transport_connect_timeout","TRANSPORT_CONNECT_TIMEOUT"),e.set("recv_timeout","RECV_TIMEOUT"),e.set("ssl_server_cert_dn","SSL_SERVER_CERT_DN"),e.set("ssl_server_dn_match","SSL_SERVER_DN_MATCH"),e.set("wallet_location","MY_WALLET_DIRECTORY"),e.set("pool_connection_class","POOL_CONNECTION_CLASS"),e.set("pool_purity","POOL_PURITY"),e.set("service_tag","SERVICE_TAG"),e.set("connection_id_prefix","CONNECTION_ID_PREFIX"),e.set("pool_boundary","POOL_BOUNDARY"),e}};T(Qa,"EZConnectResolver");var za=Qa;US.exports=za});var xS=R((eL,FS)=>{"use strict";var{createNVPair:uR,findValue:AR}=Ys(),Vs=require("fs"),VS=require("process"),fR=require("readline"),Ms=Y(),dR=4;function PR(i){let e=null,t=VS.env.TNS_ADMIN;if(i){if(e=i+"/tnsnames.ora",Vs.existsSync(e))return e;Ms.throwErr(Ms.ERR_TNS_NAMES_FILE_MISSING,i)}else return t?(e=t,e+="/tnsnames.ora",Vs.existsSync(e)||Ms.throwErr(Ms.ERR_TNS_NAMES_FILE_MISSING,t)):Ms.throwErr(Ms.ERR_NO_CONFIG_DIR),e}T(PR,"tnsnamesFilePath");var ja=class ja{constructor(){this.waiters=[],this.readInProgress=!1}async initializeNlpa(e){return this.readInProgress&&await new Promise(t=>{this.waiters.push(t)}),this.checkModfTime()?(this.ht=new Map,this.modTime=new Map,this.readInProgress=!0,await this.start(e,0),this.ht):this.ht}async start(e,t){if(t>dR)return;let s=Vs.statSync(e);this.modTime.set(e,s.mtime);let r=fR.createInterface({input:Vs.createReadStream(e),output:VS.stdout,terminal:!1}),n="";for await(let a of r)if(a.length!=0){if(a[0]=="#")continue;if(a[0]==" "||a[0]=="	"||a[0]==")"||a[0]=="("){if(a=a.replace(/\s+/g,""),a=this.checkNLPforComments(a),a.length==0)continue;n=n+a}else n.length==0?(a=this.checkNLPforComments(a),n=n+a):n.length!=0&&(await this.addNLPListElement(n,t),n="",a=this.checkNLPforComments(a),n=n+a)}n.length!=0&&(await this.addNLPListElement(n,t),n=""),this.readInProgress=!1;let _;for(;_=this.waiters.pop();)_()}checkNLPforComments(e){let t=new Array(e.length);for(let s=0;s<e.length;s++){let r=e[s];if(r=="#"){if(s!=0)break;return""}else t.push(r)}return t.join("")}checkModfTime(){if(this.modTime)for(let[e,t]of this.modTime)if(Vs.existsSync(e)){if(Vs.statSync(e).mtime-t>0)return!0}else return!0;else return!0;return!1}async addNLPListElement(e,t){let s=e.split(/\r?\n/).filter(r=>r);for(let r=0;r<s.length;r++){s[r].charAt(0)!="("&&(s[r]="("+s[r]+")");let n=uR(s[r]),a=n.name.toUpperCase();if(n.name=a,a=="IFILE")await this.start(n.atom,t+1);else{let c=a.split(",");for(let E=0;E<c.length;E++)this.ht.set(c[E],n)}}}toString(){let e="";return this.ht.forEach(t=>{e=e+t.toString()+`
`}),e}findValueOf(e){let t=e.split("/");return AR(this.ht.get(t[0].toUpperCase()),t)}};T(ja,"NLParamParser");var Ja=ja;FS.exports={NLParamParser:Ja,tnsnamesFilePath:PR}});var sT=R((sL,HS)=>{"use strict";var at=TS(),pR=dS(),RR=RS(),x=ws(),{createNode:GS}=Xa(),le=Y(),{findNVPairRecurse:mR,createNVPair:Ri,findValue:Tt}=Ys(),{Buffer:kS}=require("buffer"),bS=MS(),{NLParamParser:IR,tnsnamesFilePath:DR}=xS(),CR=require("process"),OR=Xa().SOLE_INST_DHCACHE;async function gR(i){let e=await qS(i.connectString,i.configDir),t=await GS(e),s;typeof e=="string"?s=Ri(e):s=e;let r=Tt(s,["DESCRIPTION","CONNECT_DATA","SERVER"]),n=Tt(s,["DESCRIPTION","CONNECT_DATA","POOL_CONNECTION_CLASS"]),_=Tt(s,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"]),a=Tt(s,["DESCRIPTION","CONNECT_DATA","SID"]),c=Tt(s,["DESCRIPTION","CONNECT_DATA","POOL_PURITY"]);return[r,n,_,c,a,t]}T(gR,"getConnectionInfo");var LR=new IR;async function qS(i,e){let t=i.trim(),s=t;if(t.indexOf(")")==-1||t.indexOf("(")!=0){if(t.indexOf(":")!=-1||t.indexOf("/")!=-1)return s=new bS(t).getResolvedUrl(),s;{let r=DR(e);if(s=(await LR.initializeNlpa(r)).get(t.toUpperCase()),s||le.throwErr(le.ERR_TNS_ENTRY_NOT_FOUND,t,e?e+"/tnsnames.ora":CR.env.TNS_ADMIN+"/tnsnames.ora"),s.rhsType==1){let _=s.atom;if(_.indexOf(":")!=-1||_.indexOf("/")!=-1)return new bS(_).getResolvedUrl()}s=s.getListElement(0)}}return s}T(qS,"resolveConnectStr");async function $a(i,e){let t=await qS(i,e);return GS(t)}T($a,"resolveAddress");function Za(i,e,t,s,r){let n,_=new Promise((a,c)=>{e>2147483647&&(e=2147483647),n=setTimeout(()=>c(le.getErr(le.ERR_CONNECTION_TIMEDOUT,s.host,s.port,t,e/1e3,r)),e)});return Promise.race([i,_]).then(a=>(clearTimeout(n),a)).catch(a=>{throw clearTimeout(n),a})}T(Za,"timeout");var tT=class tT{constructor(){this.connected=!1,this.isBreak=!1,this.isReset=!1,this.breakPosted=!1}async getAddress(e,t){let s=await e.execute(t),r=this.sAtts?this.sAtts.uuid:null;this.sAtts=new RR(r),this.sAtts.setFrom(t),this.sAtts.setFrom(s.desc.params),await this.sAtts.prepare(s.protocol);let n=Ri(s.CNdata.join("")),_=mR(n,"CONNECT_DATA"),a=`(CONNECTION_ID=${this.sAtts.connectionId})`,c=Ri(a);return _.addListElement(c),this.cData=kS.from(n.toString(),"ascii"),this.cDataNVPair=n,this.sAtts.nt.cDataNVPair=n,s}async transportConnect(e){e.protocol.toUpperCase()=="TCP"&&e.httpsProxy&&le.throwErr(le.ERR_INVALID_CONNECT_STRING_PARAMETERS,"https proxy requires protocol as","tcps "),e.protocol&&(e.protocol.toUpperCase()=="TCP"||e.protocol.toUpperCase()=="TCPS")?this.ntAdapter=new pR(this.sAtts.nt):le.throwErr(le.ERR_INVALID_CONNECT_STRING_PARAMETERS,e.protocol+" protocol not supported"),await this.ntAdapter.connect(e),this.ntAdapter.startRead(),this.sAtts.ntCha=this.ntAdapter.cha,this.sndDatapkt=new at.DataPacket(this.sAtts.largeSDU),this.rcvDatapkt=new at.DataPacket(this.sAtts.largeSDU)}_sendConnect(e){this._sendPacket(e.buf),e.overflow&&(this._send(e.connectData,0,e.connectDataLen),this.flush())}async connect2(e){if(this.sAtts.sdu?this.sAtts.sdu>x.NSPABSSDULN?this.sAtts.sdu=x.NSPABSSDULN:this.sAtts.sdu<x.NSPMNSDULN&&(this.sAtts.sdu=x.NSPMNSDULN):this.sAtts.sdu=x.NSPDFSDULN,this.sAtts.transportConnectTimeout){let s=this.transportConnect(e);await Za(s,this.sAtts.transportConnectTimeout,"transportConnectTimeout",e,this.sAtts.connectionId)}else await this.transportConnect(e);let t=new at.ConnectPacket(this.cData,this.sAtts);for(this._sendConnect(t);;){let s=await this._recvPacket();if(s.type===x.NSPTAC)break;if(s.type===x.NSPTRF){this.refusePkt.overflow&&(await this._recvPacket(),this.refusePkt.dataBuf=this.rcvDatapkt.buf.subarray(this.rcvDatapkt.offset,this.rcvDatapkt.len).toString());let r=Ri(this.refusePkt.dataBuf);this.refusePkt=null;let n=Tt(r,["DESCRIPTION","ERR"]);n=="12514"?le.throwErr(le.ERR_INVALID_SERVICE_NAME,this.getOption(x.SVCNAME),e.host,e.port,this.sAtts.connectionId):n=="12505"?le.throwErr(le.ERR_INVALID_SID,this.getOption(x.SID),e.host,e.port,this.sAtts.connectionId):n?le.throwErr(le.ERR_CONNECTION_REFUSED,e.host,e.port,this.sAtts.connectionId,"ORA-"+n):le.throwErr(le.ERR_CONNECTION_REFUSED,e.host,e.port,this.sAtts.connectionId,"refused")}else if(s.type===x.NSPTRS)(s.flags&x.NSPFSRN)==x.NSPFSRN&&(await this.ntAdapter.renegTLS(),this.ntAdapter.startRead()),this._sendConnect(t);else if(s.type===x.NSPTRD){let r,n,_;this.redirectPkt.overflow&&(await this._recvPacket(),this.redirectPkt.dataBuf=this.rcvDatapkt.buf.subarray(this.rcvDatapkt.offset,this.rcvDatapkt.len)),this.redirectPkt.flags&x.NSPFRDS?(r=this.redirectPkt.dataBuf.indexOf("\0",0,"ascii"),n=this.redirectPkt.dataBuf.toString("ascii",0,r),_=this.redirectPkt.dataBuf.subarray(r+1,this.redirectPkt.dataLen)):(n=this.redirectPkt.dataBuf.toString("ascii"),_=this.cData);let a=await $a(n),c=e.hostname;if(e=await a.execute(),e.desc&&this.sAtts.setFrom(e.desc.params),e.originHost=c,this.redirectPkt=null,this.ntAdapter.disconnect(x.NSFIMM),this.sAtts.transportConnectTimeout){let E=this.transportConnect(e);await Za(E,this.sAtts.transportConnectTimeout,"transportConnectTimeout",e,this.sAtts.connectionId)}else await this.transportConnect(e);t=new at.ConnectPacket(_,this.sAtts,x.NSPFRDR),this.sndDatapkt=new at.DataPacket(this.sAtts.largeSDU),this._sendConnect(t)}}return this.connected=!0,this.cData=null,this.sndDatapkt=new at.DataPacket(this.sAtts.largeSDU),this.sndDatapkt.createPacket(x.NSPDADAT),this.sndDatapkt.offset=this.sndDatapkt.dataPtr,this.sndDatapkt.len=this.sndDatapkt.bufLen,this.markerPkt=new at.MarkerPacket(this.sAtts.largeSDU),this.controlPkt=new at.ControlPacket,this.ntAdapter.largeSDU=this.sAtts.largeSDU,this.sAtts.clearWallet(),this.sAtts.nt.walletPassword=null,!0}async connect1(e,t,s){let r,n;do try{if(this.sAtts.connectTimeout){let _=this.connect2(e);r=await Za(_,this.sAtts.connectTimeout,"connectTimeout",e,this.sAtts.connectionId)}else r=await this.connect2(e)}catch(_){_.message.startsWith("NJS-510")&&!this.ntAdapter.connected&&(OR.markDownHost(e.host,Date.now()),this.ntAdapter.connected=!0),this.ntAdapter&&(this.ntAdapter.disconnect(x.NSFIMM),this.ntAdapter=null),this.sAtts.clearWallet(),r=!1,n=_;try{e=await this.getAddress(t,s)}catch{break}}while(!r);if(!r)throw n}_processPacket(e){switch(e.type){case x.NSPTDA:this.rcvDatapkt.fromPacket(e);break;case x.NSPTMK:this.markerPkt.fromPacket(e,this);break;case x.NSPTCNL:this.controlPkt.fromPacket(e);break;case x.NSPTAC:at.AcceptPacket(e,this.sAtts),this.sAtts.version>=x.TNS_VERSION_MIN_END_OF_RESPONSE&&e.flags&x.TNS_ACCEPT_FLAG_HAS_END_OF_REQUEST&&(this.endOfRequestSupport=!0),e.flags&x.TNS_ACCEPT_FLAG_FAST_AUTH&&(this.supportsFastAuth=!0);break;case x.NSPTRF:this.refusePkt=new at.RefusePacket(e);break;case x.NSPTRS:break;case x.NSPTRD:this.redirectPkt=new at.RedirectPacket(e);break;default:le.throwErr(le.ERR_CONNECTION_INVALID_PACKET)}}async _recvPacket(){for(;;){let e=await this.ntAdapter.receive();if(!e)break;if(this._processPacket(e),e.type!==x.NSPTCNL)return e}}_sendPacket(e){this.ntAdapter.send(e)}sendBreak(){if(!this.isBreak){if(!this.connected){this.isBreak=!0,this.breakPosted=!0;return}this.isBreak=!0,this.markerPkt.prepare(x.NSPMKTD1,x.NIQIMARK),this._sendPacket(this.markerPkt.buf)}}async reset(){for(this.breakPosted&&(this.markerPkt.prepare(x.NSPMKTD1,x.NIQBMARK),this._sendPacket(this.markerPkt.buf),this.breakPosted=!1),this.markerPkt.prepare(x.NSPMKTD1,x.NIQRMARK),this._sendPacket(this.markerPkt.buf);!this.isReset;)await this._recvPacket();this.sndDatapkt.dataPtr=this.sndDatapkt.dataLen=x.NSPDADAT,this.sndDatapkt.offset=this.sndDatapkt.dataPtr,this.sndDatapkt.len=this.sndDatapkt.bufLen,this.isBreak=this.isReset=!1}async recvPacket(){return await this._recvPacket()}syncRecvPacket(){for(;this.ntAdapter.packets.length>0;){let e=this.ntAdapter.syncReceive();if(!e)break;if(this._processPacket(e),e.type!==x.NSPTCNL)return e}}_send(e,t,s){if(this.isBreak)return;let r=0;for(this.sndDatapkt.dataLen=this.sndDatapkt.offset,(this.sndDatapkt.dataLen<this.sndDatapkt.bufLen||!this.sndDatapkt.bufLen)&&(r=this.sndDatapkt.fillBuf(e,t,s),s-=r,t+=r,this.sndDatapkt.offset=this.sndDatapkt.dataLen);s;){if(this._sendPacket(this.sndDatapkt.dataBuf),this.isBreak)return;this.sndDatapkt.dataLen=this.sndDatapkt.dataPtr,this.sndDatapkt.offset=this.sndDatapkt.dataPtr,r=this.sndDatapkt.fillBuf(e,t,s),s-=r,t+=r,this.sndDatapkt.offset=this.sndDatapkt.dataLen}}flush(){this.isBreak||(this.sndDatapkt.dataLen=this.sndDatapkt.offset,this.sndDatapkt.prepare2Send(),this._sendPacket(kS.from(this.sndDatapkt.dataBuf)),this.sndDatapkt.dataLen=this.sndDatapkt.dataPtr,this.sndDatapkt.offset=this.sndDatapkt.dataPtr)}async connect(e){let t=e.connectString?e.connectString:e.connectionString,s;e._connInfo?(s=e._connInfo[5],s.reset()):s=await $a(t,e.configDir);let r;try{r=await this.getAddress(s,e)}catch(n){n.message=="All options tried"?le.throwErr(le.ERR_INVALID_CONNECT_STRING_PARAMETERS,"Ensure the ADDRESS parameters have been entered correctly, the most likely incorrect parameter is the host name"):le.throwErr(le.ERR_INVALID_CONNECT_STRING_PARAMETERS,n.message)}await this.connect1(r,s,e)}forceDisconnect(e){this.connected&&(this.ntAdapter.stream.destroy(e),this.connected=!1)}disconnect(e){this.connected&&(e!=x.NSFIMM&&!this.ntAdapter.err&&(this.sndDatapkt.dataLen=this.sndDatapkt.offset,this.sndDatapkt.prepare2Send(x.NSPDAFEOF),this._sendPacket(this.sndDatapkt.dataBuf)),this.ntAdapter.disconnect(e),this.ntAdapter=null,this.connected=!1)}getOption(e){switch(e){case x.NS_MOREDATA:return this.ntAdapter.packets.length>0;case x.SVCNAME:return Tt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"]);case x.SID:return Tt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SID"]);case x.SERVERTYPE:return Tt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVER"]);case x.REMOTEADDR:return this.ntAdapter?this.ntAdapter.getOption(e):null;case x.CONNCLASS:return Tt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","POOL_CONNECTION_CLASS"]);case x.PURITY:return Tt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","POOL_PURITY"]);case x.HEALTHCHECK:return this.connected&&this.ntAdapter.connected&&!this.ntAdapter.err;default:le.throwErr(le.ERR_INTERNAL,"getOption not supported for opcode "+e)}}recvInbandNotif(){let e=0;if(this.controlPkt.errno)return e=this.controlPkt.errno,e;if(this.getOption(x.HEALTHCHECK))if(this.getOption(x.NS_MOREDATA)){let t=this.ntAdapter.syncReceive();return t.type==x.NSPTCNL?(this.controlPkt.fromPacket(t),e=this.controlPkt.errno,e):(this.ntAdapter.packets.unshift(t),0)}else return 0;else return le.ERR_CONNECTION_CLOSED}};T(tT,"NetworkSession");var eT=tT;HS.exports={NetworkSession:eT,resolveAddress:$a,getConnectionInfo:gR}});var aT=R((iL,nT)=>{"use strict";var{Buffer:yR}=require("buffer"),be=Ye(),vS=Y(),BR=Ee(),oT=class oT{constructor(e,t=!1){this.bindName=e,this.isReturnBind=t,this.maxSize=0,this.numElements=0,this.maxArraySize=0,this.type=null,this.isArray=!1,this.dir=be.BIND_IN,this.bindVar=null}};T(oT,"BindInfo");var ar=oT;nT.exports.BindInfo=ar;var _T=class _T{constructor(){this.returningKeywordFound=!1,this.pos=0,this.maxPos=0,this.sqlData=""}_parseBindName(e){let t=!1,s=!1,r=!1,n=0,_=this.pos+1,a,c;for(;_<=this.maxPos;){if(c=this.sqlData[_],s){if(r&&!new RegExp("\\p{N}","u").test(c)){this.pos=_-1;break}else if(t&&c==='"'){this.pos=_;break}else if(!r&&!t&&!/[\p{L}\p{N}]/u.test(c)&&!["$","_","#"].includes(c)){this.pos=_-1;break}}else{if(new RegExp("\\p{space}","u").test(c)){_+=1;continue}else if(c==='"')t=!0;else if(new RegExp("\\p{N}","u").test(c))r=!0;else if(!new RegExp("\\p{Alpha}","u").test(c))break;s=!0,n=_}_+=1}s&&(t?a=e.sql.substring(n+1,_):r?a=e.sql.substring(n,_):a=e.sql.substring(n,_).toUpperCase(),e._addBind(a))}_parseMultiLineComment(){let e=!1,t=!1,s=this.pos+1,r;for(;s<=this.maxPos;){if(r=this.sqlData[s],e){if(r==="*")t=!0;else if(t){if(r==="/"){this.pos=s;break}t=!1}}else{if(r!=="*")break;e=!0}s+=1}}_parseQstring(){let e=!1,t=!1,s,r;for(this.pos+=1;this.pos<=this.maxPos;){if(r=this.sqlData[this.pos],!t)r==="["?s="]":r==="{"?s="}":r==="("?s=")":r==="<"?s=">":s=r,t=!0;else if(!e&&r===s)e=!0;else if(e){if(r==="'")break;r!==s&&(e=!1)}this.pos+=1}}_parseQuotedString(e){let t;for(this.pos+=1;this.pos<=this.maxPos&&(t=this.sqlData[this.pos],t!==e);)this.pos+=1}_parseSingleLineComment(){let e=!1,t=this.pos+1,s;for(;t<=this.maxPos;){if(s=this.sqlData[t],e){if(s===`
`)break}else{if(s!=="-")return;e=!0}t+=1}this.pos=t}parse(e){let t=!1,s=!1,r,n="",_="",a=0,c,E,l=!1,N;for(this.pos=0,this.maxPos=e.sql.length-1,this.sqlData=e.sql;this.pos<=this.maxPos;){if(r=this.sqlData[this.pos],E=new RegExp("\\p{L}","u").test(r),E&&!l)a=this.pos,_=r;else if(!E&&l){if(c=this.pos-a,t)e.isDml&&!this.returningKeywordFound&&(c===9||c===6)&&["r","R"].includes(_)?(N=e.sql.substring(a,this.pos).toUpperCase(),["RETURNING","RETURN"].includes(N)&&(this.returningKeywordFound=!0)):this.returningKeywordFound&&c===4&&["i","I"].includes(_)&&(N=e.sql.substring(a,this.pos).toUpperCase(),N==="INTO"&&(e.isReturning=!0));else if(N=e.sql.substring(a,this.pos).toUpperCase(),e._determineStatementType(N),t=!0,e.isDdl)break}r==="'"?(s=!0,["q","Q"].includes(n)?this._parseQstring():this._parseQuotedString(r)):new RegExp("\\p{space}","u").test(r)||(r==="-"?this._parseSingleLineComment():r==="/"?this._parseMultiLineComment():r==='"'?this._parseQuotedString(r):r===":"&&!s&&this._parseBindName(e),s=!1),this.pos+=1,l=E,n=r}t||e._determineStatementType(e.sql.toUpperCase())}};T(_T,"Parser");var rT=_T,mi=class mi{constructor(){this.sql="",this.sqlBytes=[],this.sqlLength=0,this.cursorId=0,this.requiresDefine=!1,this.isQuery=!1,this.isPlSql=!1,this.isDml=!1,this.isDdl=!1,this.isReturning=!1,this.bindInfoList=[],this.queryVars=[],this.bindInfoDict=new Map,this.requiresFullExecute=!1,this.noPrefetch=!1,this.returnToCache=!1,this.numColumns=0,this.lastRowIndex,this.lastRowid,this.moreRowsToFetch=!0,this.inUse=!1,this.bufferRowIndex=0,this.bufferRowCount=0,this.pendingClear=!1,this.statementType=be.STMT_TYPE_UNKNOWN}_copy(){let e=new mi;e.sql=this.sql,e.sqlBytes=this.sqlBytes,e.sqlLength=this.sqlLength,e.isQuery=this.isQuery,e.isPlSql=this.isPlSql,e.isDml=this.isDml,e.isDdl=this.isDdl,e.isReturning=this.isReturning,e.bindInfoList=[];for(let s of this.bindInfoList){let r=new ar(s.bindName,s.isReturnBind);e.bindInfoList.push(r)}let t=e.bindInfoDict=new Map;for(let s of e.bindInfoList)t.has(s.bindName)?t.get(s.bindName).push(s):t.set(s.bindName,[s]);return e.returnToCache=!1,e}_determineStatementType(e){switch(e){case"DECLARE":this.isPlSql=!0,this.statementType=be.STMT_TYPE_DECLARE;break;case"CALL":this.isPlSql=!0,this.statementType=be.STMT_TYPE_CALL;break;case"BEGIN":this.isPlSql=!0,this.statementType=be.STMT_TYPE_BEGIN;break;case"SELECT":this.isQuery=!0,this.statementType=be.STMT_TYPE_SELECT;break;case"WITH":this.isQuery=!0;break;case"INSERT":this.isDml=!0,this.statementType=be.STMT_TYPE_INSERT;break;case"UPDATE":this.isDml=!0,this.statementType=be.STMT_TYPE_UPDATE;break;case"DELETE":this.isDml=!0,this.statementType=be.STMT_TYPE_DELETE;break;case"MERGE":this.isDml=!0,this.statementType=be.STMT_TYPE_MERGE;break;case"ALTER":this.isDdl=!0,this.statementType=be.STMT_TYPE_ALTER;break;case"CREATE":this.isDdl=!0,this.statementType=be.STMT_TYPE_CREATE;break;case"DROP":this.isDdl=!0,this.statementType=be.STMT_TYPE_DROP;break;case"ANALYZE":case"AUDIT":case"COMMENT":case"GRANT":case"REVOKE":case"TRUNCATE":this.isDdl=!0;break;case"COMMIT":this.statementType=be.STMT_TYPE_COMMIT;break;case"ROLLBACK":this.statementType=be.STMT_TYPE_ROLLBACK;break;default:this.statementType=be.STMT_TYPE_UNKNOWN;break}}_prepare(e){this.sql=e,this.sqlBytes=yR.from(this.sql,"utf8"),this.sqlLength=this.sqlBytes.length,new rT().parse(this)}_addBind(e){if(!this.isPlSql||!this.bindInfoDict.has(e)){let t=new ar(e,this.isReturning);this.bindInfoList.push(t),this.bindInfoDict.has(t.bindName)?(this.isReturning&&(this.bindInfoDict.get(t.bindName)[0].isReturnBind||vS.throwErr(vS.ERR_DML_RETURNING_DUP_BINDS,e)),this.bindInfoDict.get(t.bindName).push(t)):this.bindInfoDict.set(t.bindName,[t])}}_setVariable(e,t){t.type._oraTypeNum===BR.TNS_DATA_TYPE_CURSOR&&(this.requiresFullExecute=!0),(t.maxSize!==e.maxSize||t.dir!==e.dir||t.isArray!==e.isArray||t.values.length>e.numElements||t.type!=e.type||t.maxArraySize!=e.maxArraySize)&&(e.isArray=t.isArray,e.numElements=t.values.length,e.maxSize=t.maxSize,e.type=t.type,e.dir=t.dir,e.maxArraySize=t.maxArraySize,this.requiresFullExecute=!0),e.bindVar=t}_clearAllState(){this.cursorId=0,this.requiresDefine=!1,this.noPrefetch=!1,this.requiresFullExecute=!1,this.queryVars=[],this.numQueryVars=0,this.bufferRowCount=0,this.bufferRowIndex=0}_clearState(){this.cursorId=0,this.requiresDefine=!1,this.noPrefetch=!1,this.requiresFullExecute=!1}};T(mi,"Statement");var iT=mi;nT.exports.Statement=iT});var WS=R((oL,KS)=>{"use strict";var{Buffer:$}=require("buffer"),ct=require("crypto"),Ii="aes-256-cbc",wR=$.from([0,1]),cT=class cT{_decrypt(e,t){let s=$.alloc(16,0),r=ct.createDecipheriv(Ii,e,s);r.setAutoPadding(!1);let n=r.update(t);return n=$.concat([n,r.final()]),n}_encrypt(e,t,s){let n=$.alloc(16,0),_=16-t.length%16,a=$.alloc(_,_);_>0&&(s?t+=$.alloc(_):t=$.concat([t,a]));let c=ct.createCipheriv(Ii,e,n),E=c.update(t);return E=$.concat([E,c.final()]),s||(E=E.slice(0,t.length)),t.fill(0),E}_setEncryptedPasswordBuffers(e,t,s,r){let n=$.alloc(16);ct.randomFillSync(n,0,16);let _=$.concat([n,e]);if(r.encodedPassword=this._encrypt(s,_),_.fill(0),r.encodedPassword=r.encodedPassword.slice().toString("hex").toUpperCase(),t){let a=$.concat([n,t]);r.encodedNewPassword=this._encrypt(s,a),a.fill(0),r.encodedNewPassword=r.encodedNewPassword.slice().toString("hex").toUpperCase()}e.fill(0),t&&t.fill(0)}updateVerifierData(e,t,s,r,n){let _=32,a="sha512",c=$.from(e.AUTH_VFR_DATA,"hex"),E=$.from(e.AUTH_SESSKEY,"hex"),l=Number(e.AUTH_PBKDF2_VGEN_COUNT),N=$.from(t,"utf8"),P,d;if(r){Ii="aes-192-cbc",_=24,a="sha1";let O=ct.createHash(a);O.update(N),O.update(c);let M=O.digest();P=$.alloc(M.length+4),M.copy(P,0,0,M.length)}else{Ii="aes-256-cbc";let O=$.from("AUTH_PBKDF2_SPEEDY_KEY","utf8"),M=$.concat([c,O]);d=ct.pbkdf2Sync(N,M,l,64,"sha512");let Q=ct.createHash(a);Q.update(d),Q.update(c),P=Q.digest().slice(0,_)}let S;s&&(S=$.from(s,"utf8"));let A=this._decrypt(P,E),p=$.alloc(A.length);ct.randomFillSync(p);let u=this._encrypt(P,p);if(A.length===48){n.sessionKey=u.slice().toString("hex").toUpperCase().slice(0,96);let O=$.alloc(24);for(let b=16;b<=40;b++)O[b-16]=A[b]^p[b];let M=ct.createHash("md5").update(O.subarray(0,16)).digest(),Q=ct.createHash("md5").update(O.subarray(16)).digest();n.comboKey=$.concat([M,Q]).slice(0,_)}else{n.sessionKey=u.slice().toString("hex").toUpperCase().slice(0,64);let O=$.from(e.AUTH_PBKDF2_CSK_SALT,"hex");l=Number(e.AUTH_PBKDF2_SDER_COUNT);let Q=$.concat([p.slice(0,_),A.slice(0,_)]).toString("hex").toUpperCase(),b=$.from(Q,"utf8");n.comboKey=ct.pbkdf2Sync(b,O,l,_,"sha512")}let C=$.alloc(16);if(!r){ct.randomFillSync(C,0,16);let O=$.concat([C,d]);n.speedyKey=this._encrypt(n.comboKey,O),n.speedyKey=n.speedyKey.slice(0,80).toString("hex").toUpperCase()}this._setEncryptedPasswordBuffers(N,S,n.comboKey,n)}getEncryptedJSWPData(e,t){let s=this._encrypt(e,t,!0);return s=s.slice().toString("hex").toUpperCase(),s=$.concat([s,wR]),s}updatePasswordsWithComboKey(e,t,s,r){let n=$.from(e,"utf8"),_;t&&(_=$.from(t,"utf8")),this._setEncryptedPasswordBuffers(n,_,s,r)}};T(cT,"EncryptDecrypt");var TT=cT,YR=new TT;KS.exports=YR});var JS=R((aL,QS)=>{"use strict";var{Buffer:ET}=require("buffer"),W=Ee(),XS=Y(),zS=require("process"),lT=WS(),UR=je(),hT=rr(),Tr=hT.CLIENT_INFO,MR=require("crypto"),ST=class ST extends UR{constructor(e,t){super(e),this.functionCode=W.TNS_FUNC_AUTH_PHASE_ONE,this.messageType=W.TNS_MSG_TYPE_FUNCTION,this.sessionData={},this.conn=e,this.sessionKey="",this.encodedPassword="",this.changePassword=!1,Object.defineProperty(this,"password",{enumerable:!1,value:t.password}),this.username=t.user,this.username===void 0?this.username="":this.username=this.username.trim(),this.schemaUser="",this.proxyUser="",this.proxyStatus=-1,this.username.length!==0&&(this.proxyStatusObj=hT.checkProxyUserValidity(this.username),this.proxyStatusObj.status===0&&(this.proxyStatus=0,this.proxyUser=this.proxyStatusObj.proxyUser,this.schemaUser=this.proxyStatusObj.schemaUser,this.username=this.proxyUser)),this.newPassword=t.newPassword,t.changePassword&&(this.changePassword=!0,this.functionCode=W.TNS_FUNC_AUTH_PHASE_TWO),this.username?this.userByteLen=ET.byteLength(this.username):this.userByteLen=0,this.token=t.token,this.token&&(this.functionCode=W.TNS_FUNC_AUTH_PHASE_TWO),this.privateKey=t.privateKey,this.privateKey&&(this.privateKey=hT.normalizePrivateKey(this.privateKey)),this.serviceName=this.conn.serviceName,this.remoteAddress=this.conn.remoteAddress,this.setAuthMode(t)}setAuthMode(e){this.newPassword||(this.authMode=W.TNS_AUTH_MODE_LOGON),e.privilege&W.SYSDBA&&(this.authMode|=W.TNS_AUTH_MODE_SYSDBA),e.privilege&W.SYSOPER&&(this.authMode|=W.TNS_AUTH_MODE_SYSOPER),e.privilege&W.SYSASM&&(this.authMode|=W.TNS_AUTH_MODE_SYSASM),e.privilege&W.SYSBKP&&(this.authMode|=W.TNS_AUTH_MODE_SYSBKP),e.privilege&W.SYSDG&&(this.authMode|=W.TNS_AUTH_MODE_SYSDGD),e.privilege&W.SYSKM&&(this.authMode|=W.TNS_AUTH_MODE_SYSKMT),e.privilege&W.SYSRAC&&(this.authMode|=W.TNS_AUTH_MODE_SYSRAC),this.privateKey&&(this.authMode|=W.TNS_AUTH_MODE_IAM_TOKEN),this.newPassword&&(this.authMode|=W.TNS_AUTH_MODE_CHANGE_PASSWORD),this.token||(this.authMode|=W.TNS_AUTH_MODE_WITH_PASSWORD)}getAlterTimezoneStatement(){let e,t;if(zS.env.ORA_SDTZ)t=zS.env.ORA_SDTZ;else{let r=new Date().getTimezoneOffset(),n=Math.trunc(r/60),_=Math.abs((r-n*60)%60);n<0?(e="+",n=-n):e="-",n=n.toLocaleString("en-US",{minimumIntegerDigits:2}),t=`${e}${n}:${_}`}return`ALTER SESSION SET TIME_ZONE ='${t}'\0`}encode(e){let t=!1;if(this.writeFunctionHeader(e),this.userByteLen>0?e.writeUInt8(1):e.writeUInt8(0),e.writeUB4(this.userByteLen),e.writeUB4(this.authMode),this.functionCode===W.TNS_FUNC_AUTH_PHASE_ONE)e.writeUInt8(1),e.writeUB4(5),e.writeUInt8(0),e.writeUInt8(1),this.userByteLen>0&&e.writeBytesWithLength(ET.from(this.username)),e.writeKeyValue("AUTH_TERMINAL",Tr.terminal),e.writeKeyValue("AUTH_PROGRAM_NM",Tr.program),e.writeKeyValue("AUTH_MACHINE",Tr.hostName),e.writeKeyValue("AUTH_PID",Tr.pid),e.writeKeyValue("AUTH_SID",Tr.userName);else{let s=0;if(this.changePassword?(lT.updatePasswordsWithComboKey(this.password,this.newPassword,this.conn.comboKey,this),s=2):(s=4,this.token?s+=1:(s+=2,this.verifierType===W.TNS_VERIFIER_TYPE_11G_1||this.verifierType===W.TNS_VERIFIER_TYPE_11G_2?t=!0:this.verifierType!==W.TNS_VERIFIER_TYPE_12C?XS.throwErr(XS.ERR_UNSUPPORTED_VERIFIER_TYPE,this.verifierType.toString(16)):s+=1,lT.updateVerifierData(this.sessionData,this.password,this.newPassword,t,this),this.conn.comboKey=this.comboKey,this.newPassword&&(s+=1)),this.privateKey&&(s+=2),this.conn.connectionClass&&(s+=1),this.conn.purity&&(s+=1),this.conn.jdwpData&&(this.encryptedJDWPData=lT.getEncryptedJSWPData(this.sessionKey,this.conn.jdwpData),s+=1),this.schemaUser.length!==0&&(s+=1)),e.writeUInt8(1),e.writeUB4(s),e.writeUInt8(1),e.writeUInt8(1),this.userByteLen>0&&e.writeBytesWithLength(ET.from(this.username)),this.token?e.writeKeyValue("AUTH_TOKEN",this.token):this.changePassword||(e.writeKeyValue("AUTH_SESSKEY",this.sessionKey,1),t||e.writeKeyValue("AUTH_PBKDF2_SPEEDY_KEY",this.speedyKey)),this.changePassword||(e.writeKeyValue("SESSION_CLIENT_CHARSET","873"),e.writeKeyValue("SESSION_CLIENT_DRIVER_NAME",W.DRIVER_NAME),e.writeKeyValue("SESSION_CLIENT_VERSION",W.CLIENT_VERSION.toString()),e.writeKeyValue("AUTH_ALTER_SESSION",this.getAlterTimezoneStatement(),1)),this.encodedPassword&&e.writeKeyValue("AUTH_PASSWORD",this.encodedPassword),this.proxyStatus===0&&e.writeKeyValue("PROXY_CLIENT_NAME",this.schemaUser),this.encodedNewPassword&&e.writeKeyValue("AUTH_NEWPASSWORD",this.encodedNewPassword),this.conn.connectionClass&&e.writeKeyValue("AUTH_KPPL_CONN_CLASS",this.conn.connectionClass),this.conn.purity&&e.writeKeyValue("AUTH_KPPL_PURITY",""+this.conn.purity),this.privateKey){let _="date: "+new Date().toGMTString()+`
(request-target): `+this.serviceName+`
host: `+this.remoteAddress,a=MR.createSign("RSA-SHA256").update(_).sign(this.privateKey,"base64");e.writeKeyValue("AUTH_HEADER",_),e.writeKeyValue("AUTH_SIGNATURE",a)}this.conn.jdwpData&&e.writeKeyValue("AUTH_ORA_DEBUG_JDWP",this.encryptedJDWPData)}}processReturnParameter(e){let t=e.readUB2();for(let s=0;s<t;s++){e.skipUB4();let r=e.readStr(W.CSFRM_IMPLICIT),n="";e.readUB4()>0&&(n=e.readStr(W.CSFRM_IMPLICIT));let a=e.readUB4();r==="AUTH_VFR_DATA"&&(this.verifierType=a),this.sessionData[r]=n}if(this.functionCode===W.TNS_FUNC_AUTH_PHASE_ONE)this.functionCode=W.TNS_FUNC_AUTH_PHASE_TWO;else{let s,r,n,_;this.conn.dbDomain=this.sessionData.AUTH_SC_DB_DOMAIN,this.conn.dbName=this.sessionData.AUTH_SC_DBUNIQUE_NAME,this.conn.maxOpenCursors=Number(this.sessionData.AUTH_MAX_OPEN_CURSORS||0),this.conn.serviceName=this.sessionData.AUTH_SC_SERVICE_NAME,this.conn.instanceName=this.sessionData.AUTH_INSTANCENAME;let a=Number(this.sessionData.AUTH_VERSION_NO),c=a>>24&255;this.conn.warning=this.warning,e.caps.ttcFieldVersion>=W.TNS_CCAP_FIELD_VERSION_18_1_EXT_1?(s=a>>16&255,r=a>>12&15,n=a>>4&255,_=a&15):(s=a>>20&15,r=a>>12&255,n=a>>8&15,_=a&255),this.conn.serverVersionString=c+"."+s+"."+r+"."+n+"."+_,this.conn.serverVersion=c*1e8+s*1e6+r*1e4+n*100+_*1}}};T(ST,"AuthMessage");var NT=ST;QS.exports=NT});var ZS=R((cL,jS)=>{"use strict";var VR=je(),FR=Ee(),AT=class AT extends VR{constructor(e){super(e),this.functionCode=FR.TNS_FUNC_COMMIT}encode(e){this.writeFunctionHeader(e)}};T(AT,"CommitMessage");var uT=AT;jS.exports=uT});var eu=R((lL,$S)=>{"use strict";var o=Ee(),xR=je(),dT=class dT extends xR{processMessage(e,t){if(t===o.TNS_MSG_TYPE_DATA_TYPES){for(;e.readUInt16BE()!==0;)e.readUInt16BE()!==0&&e.skipBytes(4);this.endOfResponse=!this.connection.nscon.endOfRequestSupport}else super.processMessage(e,t)}encode(e){e.writeUInt8(o.TNS_MSG_TYPE_DATA_TYPES),e.writeUInt16LE(o.TNS_CHARSET_UTF8),e.writeUInt16LE(o.TNS_CHARSET_UTF8),e.writeUInt8(o.TNS_ENCODING_MULTI_BYTE|o.TNS_ENCODING_CONV_LENGTH),e.writeBytesWithLength(e.caps.compileCaps),e.writeBytesWithLength(e.caps.runtimeCaps);for(let t of kR)e.writeUInt16BE(t[0]),e.writeUInt16BE(t[1]),e.writeUInt16BE(t[2]),e.writeUInt16BE(0);e.writeUInt16BE(0)}};T(dT,"DataTypeMessage");var fT=dT,kR=[[o.TNS_DATA_TYPE_VARCHAR,o.TNS_DATA_TYPE_VARCHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_NUMBER,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_LONG,o.TNS_DATA_TYPE_LONG,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DATE,o.TNS_DATA_TYPE_DATE,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_RAW,o.TNS_DATA_TYPE_RAW,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_LONG_RAW,o.TNS_DATA_TYPE_LONG_RAW,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UB2,o.TNS_DATA_TYPE_UB2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UB4,o.TNS_DATA_TYPE_UB4,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SB1,o.TNS_DATA_TYPE_SB1,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_SB2,o.TNS_DATA_TYPE_SB2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SB4,o.TNS_DATA_TYPE_SB4,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SWORD,o.TNS_DATA_TYPE_SWORD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UWORD,o.TNS_DATA_TYPE_UWORD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PTRB,o.TNS_DATA_TYPE_PTRB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PTRW,o.TNS_DATA_TYPE_PTRW,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TIDDEF,o.TNS_DATA_TYPE_TIDDEF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ROWID,o.TNS_DATA_TYPE_ROWID,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AMS,o.TNS_DATA_TYPE_AMS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BRN,o.TNS_DATA_TYPE_BRN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CWD,o.TNS_DATA_TYPE_CWD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OAC122,o.TNS_DATA_TYPE_OAC122,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OER8,o.TNS_DATA_TYPE_OER8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FUN,o.TNS_DATA_TYPE_FUN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AUA,o.TNS_DATA_TYPE_AUA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RXH7,o.TNS_DATA_TYPE_RXH7,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_NA6,o.TNS_DATA_TYPE_NA6,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BRP,o.TNS_DATA_TYPE_BRP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BRV,o.TNS_DATA_TYPE_BRV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KVA,o.TNS_DATA_TYPE_KVA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CLS,o.TNS_DATA_TYPE_CLS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CUI,o.TNS_DATA_TYPE_CUI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DFN,o.TNS_DATA_TYPE_DFN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DQR,o.TNS_DATA_TYPE_DQR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSC,o.TNS_DATA_TYPE_DSC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_EXE,o.TNS_DATA_TYPE_EXE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FCH,o.TNS_DATA_TYPE_FCH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_GBV,o.TNS_DATA_TYPE_GBV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_GEM,o.TNS_DATA_TYPE_GEM,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_GIV,o.TNS_DATA_TYPE_GIV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OKG,o.TNS_DATA_TYPE_OKG,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_HMI,o.TNS_DATA_TYPE_HMI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_INO,o.TNS_DATA_TYPE_INO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_LNF,o.TNS_DATA_TYPE_LNF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ONT,o.TNS_DATA_TYPE_ONT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OPE,o.TNS_DATA_TYPE_OPE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OSQ,o.TNS_DATA_TYPE_OSQ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SFE,o.TNS_DATA_TYPE_SFE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SPF,o.TNS_DATA_TYPE_SPF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_VSN,o.TNS_DATA_TYPE_VSN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UD7,o.TNS_DATA_TYPE_UD7,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSA,o.TNS_DATA_TYPE_DSA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PIN,o.TNS_DATA_TYPE_PIN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PFN,o.TNS_DATA_TYPE_PFN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PPT,o.TNS_DATA_TYPE_PPT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_STO,o.TNS_DATA_TYPE_STO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ARC,o.TNS_DATA_TYPE_ARC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_MRS,o.TNS_DATA_TYPE_MRS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_MRT,o.TNS_DATA_TYPE_MRT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_MRG,o.TNS_DATA_TYPE_MRG,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_MRR,o.TNS_DATA_TYPE_MRR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_MRC,o.TNS_DATA_TYPE_MRC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_VER,o.TNS_DATA_TYPE_VER,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_LON2,o.TNS_DATA_TYPE_LON2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_INO2,o.TNS_DATA_TYPE_INO2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ALL,o.TNS_DATA_TYPE_ALL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UDB,o.TNS_DATA_TYPE_UDB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQI,o.TNS_DATA_TYPE_AQI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ULB,o.TNS_DATA_TYPE_ULB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ULD,o.TNS_DATA_TYPE_ULD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SID,o.TNS_DATA_TYPE_SID,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_NA7,o.TNS_DATA_TYPE_NA7,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AL7,o.TNS_DATA_TYPE_AL7,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_K2RPC,o.TNS_DATA_TYPE_K2RPC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XDP,o.TNS_DATA_TYPE_XDP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OKO8,o.TNS_DATA_TYPE_OKO8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UD12,o.TNS_DATA_TYPE_UD12,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AL8,o.TNS_DATA_TYPE_AL8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_LFOP,o.TNS_DATA_TYPE_LFOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FCRT,o.TNS_DATA_TYPE_FCRT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DNY,o.TNS_DATA_TYPE_DNY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OPR,o.TNS_DATA_TYPE_OPR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PLS,o.TNS_DATA_TYPE_PLS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XID,o.TNS_DATA_TYPE_XID,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TXN,o.TNS_DATA_TYPE_TXN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DCB,o.TNS_DATA_TYPE_DCB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CCA,o.TNS_DATA_TYPE_CCA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_WRN,o.TNS_DATA_TYPE_WRN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TLH,o.TNS_DATA_TYPE_TLH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TOH,o.TNS_DATA_TYPE_TOH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FOI,o.TNS_DATA_TYPE_FOI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SID2,o.TNS_DATA_TYPE_SID2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TCH,o.TNS_DATA_TYPE_TCH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PII,o.TNS_DATA_TYPE_PII,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PFI,o.TNS_DATA_TYPE_PFI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PPU,o.TNS_DATA_TYPE_PPU,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PTE,o.TNS_DATA_TYPE_PTE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RXH8,o.TNS_DATA_TYPE_RXH8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_N12,o.TNS_DATA_TYPE_N12,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AUTH,o.TNS_DATA_TYPE_AUTH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KVAL,o.TNS_DATA_TYPE_KVAL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FGI,o.TNS_DATA_TYPE_FGI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSY,o.TNS_DATA_TYPE_DSY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYR8,o.TNS_DATA_TYPE_DSYR8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYH8,o.TNS_DATA_TYPE_DSYH8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYL,o.TNS_DATA_TYPE_DSYL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYT8,o.TNS_DATA_TYPE_DSYT8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYV8,o.TNS_DATA_TYPE_DSYV8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYP,o.TNS_DATA_TYPE_DSYP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYF,o.TNS_DATA_TYPE_DSYF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYK,o.TNS_DATA_TYPE_DSYK,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYY,o.TNS_DATA_TYPE_DSYY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYQ,o.TNS_DATA_TYPE_DSYQ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYC,o.TNS_DATA_TYPE_DSYC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYA,o.TNS_DATA_TYPE_DSYA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OT8,o.TNS_DATA_TYPE_OT8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYTY,o.TNS_DATA_TYPE_DSYTY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQE,o.TNS_DATA_TYPE_AQE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KV,o.TNS_DATA_TYPE_KV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQD,o.TNS_DATA_TYPE_AQD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQ8,o.TNS_DATA_TYPE_AQ8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RFS,o.TNS_DATA_TYPE_RFS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RXH10,o.TNS_DATA_TYPE_RXH10,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPN,o.TNS_DATA_TYPE_KPN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNR,o.TNS_DATA_TYPE_KPDNR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYD,o.TNS_DATA_TYPE_DSYD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYS,o.TNS_DATA_TYPE_DSYS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYR,o.TNS_DATA_TYPE_DSYR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYH,o.TNS_DATA_TYPE_DSYH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYT,o.TNS_DATA_TYPE_DSYT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYV,o.TNS_DATA_TYPE_DSYV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQM,o.TNS_DATA_TYPE_AQM,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OER11,o.TNS_DATA_TYPE_OER11,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQL,o.TNS_DATA_TYPE_AQL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OTC,o.TNS_DATA_TYPE_OTC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KFNO,o.TNS_DATA_TYPE_KFNO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KFNP,o.TNS_DATA_TYPE_KFNP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KGT8,o.TNS_DATA_TYPE_KGT8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RASB4,o.TNS_DATA_TYPE_RASB4,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RAUB2,o.TNS_DATA_TYPE_RAUB2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RAUB1,o.TNS_DATA_TYPE_RAUB1,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RATXT,o.TNS_DATA_TYPE_RATXT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RSSB4,o.TNS_DATA_TYPE_RSSB4,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RSUB2,o.TNS_DATA_TYPE_RSUB2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RSUB1,o.TNS_DATA_TYPE_RSUB1,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RSTXT,o.TNS_DATA_TYPE_RSTXT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RIDL,o.TNS_DATA_TYPE_RIDL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_GLRDD,o.TNS_DATA_TYPE_GLRDD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_GLRDG,o.TNS_DATA_TYPE_GLRDG,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_GLRDC,o.TNS_DATA_TYPE_GLRDC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OKO,o.TNS_DATA_TYPE_OKO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DPP,o.TNS_DATA_TYPE_DPP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DPLS,o.TNS_DATA_TYPE_DPLS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DPMOP,o.TNS_DATA_TYPE_DPMOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_STAT,o.TNS_DATA_TYPE_STAT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RFX,o.TNS_DATA_TYPE_RFX,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FAL,o.TNS_DATA_TYPE_FAL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CKV,o.TNS_DATA_TYPE_CKV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DRCX,o.TNS_DATA_TYPE_DRCX,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KGH,o.TNS_DATA_TYPE_KGH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQO,o.TNS_DATA_TYPE_AQO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OKGT,o.TNS_DATA_TYPE_OKGT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPFC,o.TNS_DATA_TYPE_KPFC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FE2,o.TNS_DATA_TYPE_FE2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SPFP,o.TNS_DATA_TYPE_SPFP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DPULS,o.TNS_DATA_TYPE_DPULS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQA,o.TNS_DATA_TYPE_AQA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPBF,o.TNS_DATA_TYPE_KPBF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TSM,o.TNS_DATA_TYPE_TSM,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_MSS,o.TNS_DATA_TYPE_MSS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPC,o.TNS_DATA_TYPE_KPC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CRS,o.TNS_DATA_TYPE_CRS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KKS,o.TNS_DATA_TYPE_KKS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KSP,o.TNS_DATA_TYPE_KSP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KSPTOP,o.TNS_DATA_TYPE_KSPTOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KSPVAL,o.TNS_DATA_TYPE_KSPVAL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PSS,o.TNS_DATA_TYPE_PSS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_NLS,o.TNS_DATA_TYPE_NLS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ALS,o.TNS_DATA_TYPE_ALS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KSDEVTVAL,o.TNS_DATA_TYPE_KSDEVTVAL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KSDEVTTOP,o.TNS_DATA_TYPE_KSDEVTTOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPSPP,o.TNS_DATA_TYPE_KPSPP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KOL,o.TNS_DATA_TYPE_KOL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_LST,o.TNS_DATA_TYPE_LST,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ACX,o.TNS_DATA_TYPE_ACX,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SCS,o.TNS_DATA_TYPE_SCS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RXH,o.TNS_DATA_TYPE_RXH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNS,o.TNS_DATA_TYPE_KPDNS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDCN,o.TNS_DATA_TYPE_KPDCN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPNNS,o.TNS_DATA_TYPE_KPNNS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPNCN,o.TNS_DATA_TYPE_KPNCN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPS,o.TNS_DATA_TYPE_KPS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_APINF,o.TNS_DATA_TYPE_APINF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TEN,o.TNS_DATA_TYPE_TEN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSCS,o.TNS_DATA_TYPE_XSSCS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSSO,o.TNS_DATA_TYPE_XSSSO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSAO,o.TNS_DATA_TYPE_XSSAO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KSRPC,o.TNS_DATA_TYPE_KSRPC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KVL,o.TNS_DATA_TYPE_KVL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSDEF,o.TNS_DATA_TYPE_XSSDEF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PDQCINV,o.TNS_DATA_TYPE_PDQCINV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PDQIDC,o.TNS_DATA_TYPE_PDQIDC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDQCSTA,o.TNS_DATA_TYPE_KPDQCSTA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPRS,o.TNS_DATA_TYPE_KPRS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDQIDC,o.TNS_DATA_TYPE_KPDQIDC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RTSTRM,o.TNS_DATA_TYPE_RTSTRM,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SESSGET,o.TNS_DATA_TYPE_SESSGET,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SESSREL,o.TNS_DATA_TYPE_SESSREL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SESSRET,o.TNS_DATA_TYPE_SESSRET,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SCN6,o.TNS_DATA_TYPE_SCN6,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KECPA,o.TNS_DATA_TYPE_KECPA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KECPP,o.TNS_DATA_TYPE_KECPP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SXA,o.TNS_DATA_TYPE_SXA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KVARR,o.TNS_DATA_TYPE_KVARR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPNGN,o.TNS_DATA_TYPE_KPNGN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BINARY_INTEGER,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_FLOAT,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_STR,o.TNS_DATA_TYPE_VARCHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_VNU,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_PDN,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_VCS,o.TNS_DATA_TYPE_VARCHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_VBI,o.TNS_DATA_TYPE_VARCHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OAC9,o.TNS_DATA_TYPE_OAC9,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UIN,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_SLS,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_LVC,o.TNS_DATA_TYPE_VARCHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_LVB,o.TNS_DATA_TYPE_RAW,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CHAR,o.TNS_DATA_TYPE_CHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AVC,o.TNS_DATA_TYPE_CHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BINARY_FLOAT,o.TNS_DATA_TYPE_BINARY_FLOAT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BINARY_DOUBLE,o.TNS_DATA_TYPE_BINARY_DOUBLE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CURSOR,o.TNS_DATA_TYPE_CURSOR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RDD,o.TNS_DATA_TYPE_ROWID,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OSL,o.TNS_DATA_TYPE_OSL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_EXT_NAMED,o.TNS_DATA_TYPE_INT_NAMED,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_INT_NAMED,o.TNS_DATA_TYPE_INT_NAMED,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_EXT_REF,o.TNS_DATA_TYPE_INT_REF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_INT_REF,o.TNS_DATA_TYPE_INT_REF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CLOB,o.TNS_DATA_TYPE_CLOB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BLOB,o.TNS_DATA_TYPE_BLOB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BFILE,o.TNS_DATA_TYPE_BFILE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CFILE,o.TNS_DATA_TYPE_CFILE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RSET,o.TNS_DATA_TYPE_CURSOR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_JSON,o.TNS_DATA_TYPE_JSON,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DJSON,o.TNS_DATA_TYPE_DJSON,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CLV,o.TNS_DATA_TYPE_CLV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DTR,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_DUN,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_DOP,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_VST,o.TNS_DATA_TYPE_VARCHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ODT,o.TNS_DATA_TYPE_DATE,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_DOL,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_TIME,o.TNS_DATA_TYPE_TIME,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TIME_TZ,o.TNS_DATA_TYPE_TIME_TZ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TIMESTAMP,o.TNS_DATA_TYPE_TIMESTAMP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TIMESTAMP_TZ,o.TNS_DATA_TYPE_TIMESTAMP_TZ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_INTERVAL_YM,o.TNS_DATA_TYPE_INTERVAL_YM,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_INTERVAL_DS,o.TNS_DATA_TYPE_INTERVAL_DS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_EDATE,o.TNS_DATA_TYPE_DATE,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_ETIME,o.TNS_DATA_TYPE_ETIME,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ETTZ,o.TNS_DATA_TYPE_ETTZ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ESTAMP,o.TNS_DATA_TYPE_ESTAMP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ESTZ,o.TNS_DATA_TYPE_ESTZ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_EIYM,o.TNS_DATA_TYPE_EIYM,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_EIDS,o.TNS_DATA_TYPE_EIDS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DCLOB,o.TNS_DATA_TYPE_CLOB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DBLOB,o.TNS_DATA_TYPE_BLOB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DBFILE,o.TNS_DATA_TYPE_BFILE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UROWID,o.TNS_DATA_TYPE_UROWID,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TIMESTAMP_LTZ,o.TNS_DATA_TYPE_TIMESTAMP_LTZ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ESITZ,o.TNS_DATA_TYPE_TIMESTAMP_LTZ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UB8,o.TNS_DATA_TYPE_UB8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PNTY,o.TNS_DATA_TYPE_INT_NAMED,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BOOLEAN,o.TNS_DATA_TYPE_BOOLEAN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSNSOP,o.TNS_DATA_TYPE_XSNSOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSATTR,o.TNS_DATA_TYPE_XSATTR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSNS,o.TNS_DATA_TYPE_XSNS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UB1ARRAY,o.TNS_DATA_TYPE_UB1ARRAY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SESSSTATE,o.TNS_DATA_TYPE_SESSSTATE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AC_REPLAY,o.TNS_DATA_TYPE_AC_REPLAY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AC_CONT,o.TNS_DATA_TYPE_AC_CONT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_IMPLRES,o.TNS_DATA_TYPE_IMPLRES,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OER19,o.TNS_DATA_TYPE_OER19,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TXT,o.TNS_DATA_TYPE_TXT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSESSNS,o.TNS_DATA_TYPE_XSSESSNS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSATTOP,o.TNS_DATA_TYPE_XSATTOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSCREOP,o.TNS_DATA_TYPE_XSCREOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSDETOP,o.TNS_DATA_TYPE_XSDETOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSDESOP,o.TNS_DATA_TYPE_XSDESOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSETSP,o.TNS_DATA_TYPE_XSSETSP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSIDP,o.TNS_DATA_TYPE_XSSIDP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSPRIN,o.TNS_DATA_TYPE_XSPRIN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSKVL,o.TNS_DATA_TYPE_XSKVL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSSDEF2,o.TNS_DATA_TYPE_XSSSDEF2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSNSOP2,o.TNS_DATA_TYPE_XSNSOP2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSNS2,o.TNS_DATA_TYPE_XSNS2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNREQ,o.TNS_DATA_TYPE_KPDNREQ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNRNF,o.TNS_DATA_TYPE_KPDNRNF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPNGNC,o.TNS_DATA_TYPE_KPNGNC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPNRI,o.TNS_DATA_TYPE_KPNRI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQENQ,o.TNS_DATA_TYPE_AQENQ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQDEQ,o.TNS_DATA_TYPE_AQDEQ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQJMS,o.TNS_DATA_TYPE_AQJMS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNRPAY,o.TNS_DATA_TYPE_KPDNRPAY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNRACK,o.TNS_DATA_TYPE_KPDNRACK,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNRMP,o.TNS_DATA_TYPE_KPDNRMP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNRDQ,o.TNS_DATA_TYPE_KPDNRDQ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SCN,o.TNS_DATA_TYPE_SCN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SCN8,o.TNS_DATA_TYPE_SCN8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CHUNKINFO,o.TNS_DATA_TYPE_CHUNKINFO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UD21,o.TNS_DATA_TYPE_UD21,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UDS,o.TNS_DATA_TYPE_UDS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TNP,o.TNS_DATA_TYPE_TNP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OER,o.TNS_DATA_TYPE_OER,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OAC,o.TNS_DATA_TYPE_OAC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_VECTOR,o.TNS_DATA_TYPE_VECTOR,o.TNS_TYPE_REP_UNIVERSAL]];$S.exports=fT});var su=R((NL,tu)=>{"use strict";var bR=je(),GR=Ee(),pT=class pT extends bR{constructor(e){super(e),this.functionCode=GR.TNS_FUNC_LOGOFF}encode(e){this.writePiggybacks(e),this.writeFunctionHeader(e)}};T(pT,"LogOffMessage");var PT=pT;tu.exports=PT});var iu=R((uL,ru)=>{"use strict";var qR=je(),HR=Ee(),mT=class mT extends qR{constructor(e){super(e),this.functionCode=HR.TNS_FUNC_PING}encode(e){this.writeFunctionHeader(e)}};T(mT,"PingMessage");var RT=mT;ru.exports=RT});var ou=R((fL,nu)=>{"use strict";var IT=Ee(),vR=je(),CT=class CT extends vR{encode(e){e.writeUInt8(IT.TNS_MSG_TYPE_PROTOCOL),e.writeUInt8(6),e.writeUInt8(0),e.writeStr("node-oracledb"),e.writeUInt8(0)}processMessage(e,t){t===IT.TNS_MSG_TYPE_PROTOCOL?(this.processProtocolInfo(e),this.endOfResponse=!this.connection.nscon.endOfRequestSupport):super.processMessage(e,t)}processProtocolInfo(e){this.serverVersion=e.readUInt8(),e.skipUB1(),this.serverBanner=e.readNullTerminatedBytes(48),e.caps.charSetID=e.readUInt16LE(),this.serverFlags=e.readUInt8();let t=e.readUInt16LE();t>0&&e.skipBytes(t*5);let s=e.readUInt16BE(),r=e.readBytes(s),n=6+r[5]+r[6];e.caps.nCharsetId=(r[n+3]<<8)+r[n+4];let _=e.readBytesWithLength();_&&(this.serverCompileCaps=Buffer.from(_),e.caps.adjustForServerCompileCaps(this.serverCompileCaps,this.connection.nscon),e.caps.ttcFieldVersion>=IT.TNS_CCAP_FIELD_VERSION_23_1?this.connection._osonMaxFieldNameSize=65535:this.connection._osonMaxFieldNameSize=255);let a=e.readBytesWithLength();a&&(this.serverRunTimeCaps=Buffer.from(a),e.caps.adjustForServerRuntimeCaps(this.serverRunTimeCaps))}};T(CT,"ProtocolMessage");var DT=CT;nu.exports=DT});var au=R((PL,_u)=>{"use strict";var KR=je(),WR=Ee(),gT=class gT extends KR{constructor(e){super(e),this.functionCode=WR.TNS_FUNC_ROLLBACK}encode(e){this.writeFunctionHeader(e)}};T(gT,"RollbackMessage");var OT=gT;_u.exports=OT});var Eu=R((RL,cu)=>{"use strict";var XR=je(),Tu=Ee(),yT=class yT extends XR{constructor(e){super(e),this.functionCode=Tu.TNS_FUNC_SESSION_RELEASE,this.messageType=Tu.TNS_MSG_TYPE_ONEWAY_FN,this.sessReleaseMode=0}encode(e){this.writeFunctionHeader(e),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(this.sessReleaseMode)}decode(){}};T(yT,"SessionReleaseMessage");var LT=yT;cu.exports=LT});var hu=R((IL,lu)=>{"use strict";var _s=Ee(),zR=je(),wT=class wT extends zR{encode(e){e.writeUInt8(_s.TNS_MSG_TYPE_FAST_AUTH),e.writeUInt8(1),e.writeUInt8(_s.TNS_SERVER_CONVERTS_CHARS),e.writeUInt8(0),this.protocolMessage.encode(e),e.writeUInt16BE(0),e.writeUInt8(0),e.writeUInt16BE(0),e.caps.ttcFieldVersion=_s.TNS_CCAP_FIELD_VERSION_19_1_EXT_1,e.writeUInt8(e.caps.ttcFieldVersion),this.dataTypeMessage.encode(e),this.authMessage.encode(e),e.caps.ttcFieldVersion=_s.TNS_CCAP_FIELD_VERSION_MAX}processMessage(e,t){t===_s.TNS_MSG_TYPE_RENEGOTIATE?this.reNegotiate=!0:t===_s.TNS_MSG_TYPE_PROTOCOL?this.protocolMessage.processMessage(e,t):t===_s.TNS_MSG_TYPE_DATA_TYPES?this.dataTypeMessage.processMessage(e,t):(this.authMessage.processMessage(e,t),this.endOfResponse=this.authMessage.endOfResponse)}};T(wT,"FastAuthMessage");var BT=wT;lu.exports=BT});var Su=R((CL,Nu)=>{"use strict";var QR=je(),JR=Ee(),UT=class UT extends QR{constructor(e){super(e),this.functionCode=JR.TNS_FUNC_TPC_TXN_CHANGE_STATE}processReturnParameter(e){this.state=e.readUB4()}encode(e){let t;this.xid&&(t=Buffer.alloc(128),this.xid.globalTransactionId.copy(t),this.xid.branchQualifier.copy(t,this.xid.globalTransactionId.length)),this.writeFunctionHeader(e),e.writeUB4(this.operation),this.context?(e.writeUInt8(1),e.writeUB4(this.context.length)):(e.writeUInt8(0),e.writeUB4(0)),this.xid?(e.writeUB4(this.xid.formatId),e.writeUB4(this.xid.globalTransactionId.length),e.writeUB4(this.xid.branchQualifier.length),e.writeUInt8(1),e.writeUB4(t.length)):(e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0)),e.writeUB4(0),e.writeUB4(this.state),e.writeUInt8(1),e.writeUB4(this.flags),this.context&&e.writeBytes(this.context),this.xid&&e.writeBytes(t)}};T(UT,"TransactionChangeStateMessage");var YT=UT;Nu.exports=YT});var Au=R((gL,uu)=>{"use strict";var jR=je(),ZR=Ee(),VT=class VT extends jR{constructor(e){super(e),this.functionCode=ZR.TNS_FUNC_TPC_TXN_SWITCH,this.applicationValue=0,this.internalName=e.internalName,this.internalName&&(this.internalName=Buffer.from(this.internalName)),this.externalName=e.externalName,this.externalName&&(this.externalName=Buffer.from(this.externalName))}processReturnParameter(e){this.applicationValue=e.readUB4(),this.contextLen=e.readUB2(),this.contextLen>0&&(this.context=Buffer.from(e.readBytes(this.contextLen)))}encode(e){let t;this.xid&&(t=Buffer.alloc(128),this.xid.globalTransactionId.copy(t),this.xid.branchQualifier.copy(t,this.xid.globalTransactionId.length)),this.writeFunctionHeader(e),e.writeUB4(this.operation),this.context?(e.writeUInt8(1),e.writeUB4(this.context.length)):(e.writeUInt8(0),e.writeUB4(0)),this.xid?(e.writeUB4(this.xid.formatId),e.writeUB4(this.xid.globalTransactionId.length),e.writeUB4(this.xid.branchQualifier.length),e.writeUInt8(1),e.writeUB4(t.length)):(e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0)),e.writeUB4(this.flags),e.writeUB4(this.timeout),e.writeUInt8(1),e.writeUInt8(1),e.writeUInt8(1),this.internalName?(e.writeUInt8(1),e.writeUB4(this.internalName.length)):(e.writeUInt8(0),e.writeUB4(0)),this.externalName?(e.writeUInt8(1),e.writeUB4(this.externalName.length)):(e.writeUInt8(0),e.writeUB4(0)),this.context&&e.writeBytes(this.context),this.xid&&e.writeBytes(t),e.writeUB4(this.applicationValue),this.internalName&&e.writeBytes(this.internalName),this.externalName&&e.writeBytes(this.externalName)}};T(VT,"TransactionSwitchMessage");var MT=VT;uu.exports=MT});var du=R((yL,fu)=>{"use strict";var $R=JS(),em=ZS(),tm=eu(),sm=W_(),rm=Q_(),im=M_(),nm=su(),om=iu(),_m=ou(),am=au(),Tm=Eu(),cm=hu(),Em=Su(),lm=Au();fu.exports={AuthMessage:$R,CommitMessage:em,FastAuthMessage:cm,DataTypeMessage:tm,ExecuteMessage:sm,FetchMessage:rm,LobOpMessage:im,LogOffMessage:nm,PingMessage:om,ProtocolMessage:_m,RollbackMessage:am,SessionReleaseMessage:Tm,TransactionChangeStateMessage:Em,TransactionSwitchMessage:lm}});var Ru=R((BL,pu)=>{var Pu=Y(),{Statement:hm}=aT(),xT=class xT{constructor(e){this._cachedStatements=new Map,this._maxSize=e,this._cursorsToClose=new Set,this._openCursors=new Set}_addCursorToClose(e){if(this._cursorsToClose.has(e.cursorId)){let t=`attempt to close cursor ${e.cursorId} twice`;Pu.throwErr(Pu.ERR_INTERNAL,t)}e.cursorId!=0&&this._cursorsToClose.add(e.cursorId),this._openCursors.delete(e)}_adjustCache(){for(;this._cachedStatements.size>this._maxSize;){let e=this._cachedStatements.keys().next().value,t=this._cachedStatements.get(e);this._cachedStatements.delete(e),t.inUse?t.returnToCache=!1:t.cursorId!==0&&this._addCursorToClose(t)}}clearCursors(){let e=new Set;for(let t of this._openCursors)(t.inUse||t.returnToCache)&&(t.pendingClear=!0,e.add(t)),t._clearState();this._openCursors=e,this._cursorsToClose.clear()}clearPendingStatus(){for(let e of this._openCursors)e.pendingClear&&!e.inUse&&(e._clearAllState(),e.pendingClear=!1)}getStatement(e,t=!1,s=!1){let r=null;return e&&(r=this._cachedStatements.get(e)),r?s||r.inUse?(t||(this._addCursorToClose(r),this._cachedStatements.delete(e)),r=r._copy(),this._openCursors.add(r)):t?(this._cachedStatements.delete(e),this._cachedStatements.set(e,r)):(this._cachedStatements.delete(e),r.returnToCache=!1):(r=new hm,e&&r._prepare(e),t&&!r.isDdl&&this._maxSize>0&&(r.returnToCache=!0,this._cachedStatements.set(e,r),this._adjustCache()),this._openCursors.add(r)),this._openCursors.add(r),r.inUse=!0,r}clearCursor(e){this._addCursorToClose(e),e.cursorId=0}returnStatement(e){e.bindInfoList&&e.bindInfoList.forEach(t=>{t.bindVar=null}),e.queryVars&&e.queryVars.forEach(t=>{t.values.fill(null)}),e.returnToCache?e.inUse=!1:this._addCursorToClose(e),this.clearPendingStatus()}writeCursorsToClose(e){e.writeUB4(this._cursorsToClose.size);for(let t of this._cursorsToClose.keys())e.writeUB4(t);this._cursorsToClose.clear()}};T(xT,"StatementCache");var FT=xT;pu.exports=FT});var vT=R((YL,Du)=>{"use strict";var{Buffer:mu}=require("buffer"),Nm=xr(),Sm=Z_(),kT=$s(),um=nS(),{BaseBuffer:Am}=fs(),{NetworkSession:fm}=sT(),{Statement:dm}=aT(),Di=rr(),Fs=ws(),U=Ee(),Iu=require("process"),k=Fe(),me=Y(),Me=du(),Pm=Ru(),pm=new global.FinalizationRegistry(i=>{i.disconnect()}),qT=class qT extends Am{};T(qT,"TDSBuffer");var bT=qT,HT=class HT extends Nm{async close(){try{if(this._protocol.txnInProgress){if(this.tpcContext){let e=this.createTpcRollbackMessage();await this._protocol._processMessage(e)}else await this.rollback();this.tpcContext=null}if(this._drcpEnabled&&(await this._sessRelease(),this._drcpEstablishSession=!0),this._pool&&!this._dropSess)await this._pool.release(this);else{if(!this._drcpEnabled){let e=new Me.LogOffMessage(this);await this._protocol._processMessage(e)}this.nscon.disconnect()}}catch{this.nscon.disconnect(Fs.NSFIMM)}}async _sessRelease(){let e=new Me.SessionReleaseMessage(this);this.isPooled()||(e.sessReleaseMode=U.DRCP_DEAUTHENTICATE),await this._protocol._processMessage(e)}async _getElementTypeObj(e){let t=[{name:"owner",type:k.DB_TYPE_VARCHAR,dir:U.BIND_IN,maxSize:128,values:[e.schema]},{name:"name",type:k.DB_TYPE_VARCHAR,dir:U.BIND_IN,maxSize:128,values:[e.name]},{name:"package_name",type:k.DB_TYPE_VARCHAR,dir:U.BIND_IN,maxSize:128,values:[e.packageName]}],s;e.packageName?s=`
        select
            elem_type_owner,
            elem_type_name,
            elem_type_package
        from all_plsql_coll_types
        where owner = :owner
          and type_name = :name
          and package_name = :package_name`:(t.pop(),s=`
        select
            elem_type_owner,
            elem_type_name
        from all_coll_types
        where owner = :owner
          and type_name = :name`);let r={connection:{_impl:this},prefetchRows:2},n=await this.execute(s,1,t,r,!1),_=await n.resultSet.getRows(1,r);await n.resultSet.close();let a=_[0];e.elementTypeClass=this._getDbObjectType(a[0],a[1],a[2]),e.elementTypeClass.partial&&this._partialDbObjectTypes.push(e.elementTypeClass)}async _execute(e,t,s,r,n){let _=e.bindInfoList.length,a=s.length;_!==a&&(a===0||!s[0].name)&&me.throwErr(me.ERR_WRONG_NUMBER_OF_POSITIONAL_BINDS,_,a);for(let l=0;l<s.length;l++)await this._bind(e,s[l],l+1);e.isPlSql&&(r.batchErrors||r.dmlRowCounts)&&me.throwErr(me.ERR_EXEC_MODE_ONLY_FOR_DML);let c=new Me.ExecuteMessage(this,e,r);c.numExecs=t,c.arrayDmlRowCounts=r.dmlRowCounts,c.batchErrors=r.batchErrors,e.isPlSql&&(e.cursorId===0||e.requiresFullExecute)&&(c.numExecs=1,c.noImplicitRelease=!0,await this._protocol._processMessage(c),e.requiresFullExecute=!1,c.numExecs=t-1,c.offset=1,c.noImplicitRelease=!1),c.numExecs>0&&(await this._protocol._processMessage(c),e.requiresFullExecute=!1),e.requiresDefine&&e.sql&&(e.requiresFullExecute=!0,await this._protocol._processMessage(c),e.requiresFullExecute=!1,e.requiresDefine=!1);let E={};if(c.warning&&(E.warning=c.warning),e.numQueryVars>0)E.resultSet=c.resultSet;else{e.bufferRowIndex=0;let l=Di.getOutBinds(e,t,n);l&&(E.outBinds=l),n?(e.isPlSql||(E.rowsAffected=e.rowCount,delete e.rowCount),r.dmlRowCounts&&(E.dmlRowCounts=r.dmlRowCounts),r.batchErrors&&(E.batchErrors=r.batchErrors)):(e.isPlSql&&r.implicitResultSet&&(E.implicitResults=r.implicitResultSet),e.lastRowid&&(E.lastRowid=e.lastRowid,delete e.lastRowid),e.isPlSql?e.rowCount&&(E.rowsAffected=e.rowCount):E.rowsAffected=e.rowCount||0,e.rowCount&&delete e.rowCount),this._returnStatement(e)}return E}_parseTDSAttr(e,t){let s,r,n;for(;;)if(n=e.readUInt8(),n===U.TNS_OBJ_TDS_TYPE_EMBED_ADT_INFO)e.skipBytes(1);else if(n!==U.TNS_OBJ_TDS_TYPE_SUBTYPE_MARKER)break;switch(n){case U.TNS_OBJ_TDS_TYPE_NUMBER:return t.precision=e.readInt8(),t.scale=e.readInt8(),k.DB_TYPE_NUMBER;case U.TNS_OBJ_TDS_TYPE_FLOAT:return t.precision=e.readInt8(),k.DB_TYPE_NUMBER;case U.TNS_OBJ_TDS_TYPE_VARCHAR:case U.TNS_OBJ_TDS_TYPE_CHAR:return t.maxSize=e.readUInt16BE(),s=n===U.TNS_OBJ_TDS_TYPE_VARCHAR?U.TNS_DATA_TYPE_VARCHAR:U.TNS_DATA_TYPE_CHAR,r=e.readUInt8(),r=r&127,e.skipBytes(2),k.getTypeByOraTypeNum(s,r);case U.TNS_OBJ_TDS_TYPE_RAW:return t.maxSize=e.readUInt16BE(),k.DB_TYPE_RAW;case U.TNS_OBJ_TDS_TYPE_BINARY_FLOAT:return k.DB_TYPE_BINARY_FLOAT;case U.TNS_OBJ_TDS_TYPE_BINARY_DOUBLE:return k.DB_TYPE_BINARY_DOUBLE;case U.TNS_OBJ_TDS_TYPE_DATE:return k.DB_TYPE_DATE;case U.TNS_OBJ_TDS_TYPE_TIMESTAMP:return e.skipBytes(1),k.DB_TYPE_TIMESTAMP;case U.TNS_OBJ_TDS_TYPE_TIMESTAMP_LTZ:return e.skipBytes(1),k.DB_TYPE_TIMESTAMP_LTZ;case U.TNS_OBJ_TDS_TYPE_TIMESTAMP_TZ:return e.skipBytes(1),k.DB_TYPE_TIMESTAMP_TZ;case U.TNS_OBJ_TDS_TYPE_BOOLEAN:return k.DB_TYPE_BOOLEAN;case U.TNS_OBJ_TDS_TYPE_CLOB:return k.DB_TYPE_CLOB;case U.TNS_OBJ_TDS_TYPE_BLOB:return k.DB_TYPE_BLOB;case U.TNS_OBJ_TDS_TYPE_OBJ:return e.skipBytes(5),k.DB_TYPE_OBJECT;case U.TNS_OBJ_TDS_TYPE_START_EMBED_ADT:for(;this._parseTDSAttr(e,{})!==0;);return k.DB_TYPE_OBJECT;case U.TNS_OBJ_TDS_TYPE_END_EMBED_ADT:return 0;default:me.throwErr(me.ERR_TDS_TYPE_NOT_SUPPORTED,n)}}async _parseTDS(e,t){let s=new bT(e);s.skipBytes(4),s.skipBytes(2),s.skipBytes(2);let r=s.readUInt16BE();if(s.skipBytes(1),s.skipBytes(1),s.skipBytes(2),s.skipBytes(4),t.isCollection=!1,r===1){let n=s.pos;s.readUInt8()===U.TNS_OBJ_TDS_TYPE_COLL?t.isCollection=!0:s.pos=n}if(t.isCollection){let n=s.readUInt32BE();t.maxNumElements=s.readUInt32BE(),t.collectionType=s.readUInt8(),t.collectionType===U.TNS_OBJ_PLSQL_INDEX_TABLE&&(t.collectionFlags=U.TNS_OBJ_HAS_INDEXES),s.pos=n,t.elementTypeInfo={},t.elementType=this._parseTDSAttr(s,t.elementTypeInfo),t.elementType===k.DB_TYPE_OBJECT&&(await this._getElementTypeObj(t),t.elementTypeClass.isXmlType&&(t.elementType=k.DB_TYPE_XMLTYPE))}else if(t.attributes)for(let n of t.attributes)this._parseTDSAttr(s,n)}async _populateDbObjectTypeInfo(e){let t=`
      declare
          t_Instantiable              varchar2(3);
          t_SuperTypeOwner            varchar2(128);
          t_SuperTypeName             varchar2(128);
          t_SubTypeRefCursor          sys_refcursor;
          t_Pos                       pls_integer;
      begin
          :ret_val := dbms_pickler.get_type_shape(:full_name, :oid,
              :version, :tds, t_Instantiable, t_SuperTypeOwner,
              t_SuperTypeName, :attrs_rc, t_SubTypeRefCursor);
          :package_name := null;
          if substr(:full_name, length(:full_name) - 7) = '%ROWTYPE' then
              t_Pos := instr(:full_name, '.');
              :schema := substr(:full_name, 1, t_Pos - 1);
              :name := substr(:full_name, t_Pos + 1);
          else
              begin
                  select owner, type_name
                  into :schema, :name
                  from all_types
                  where type_oid = :oid;
              exception
              when no_data_found then
                  begin
                      select owner, package_name, type_name
                      into :schema, :package_name, :name
                      from all_plsql_types
                      where type_oid = :oid;
                  exception
                  when no_data_found then
                      null;
                  end;
              end;
          end if;
      end;`,s=`
      SELECT
        column_name,
        data_type,
        data_type_owner,
        case
          when data_type in
            ('CHAR', 'NCHAR', 'VARCHAR2', 'NVARCHAR2', 'RAW')
          then data_length
          else 0
        end,
        nvl(data_precision, 0),
        nvl(data_scale, 0)
      from all_tab_cols
      where owner = :owner
        and table_name = :name
        and hidden_column != 'YES'
      order by column_id`,r=[{name:"full_name",type:k.DB_TYPE_VARCHAR,dir:U.BIND_INOUT,maxSize:500,values:[e]},{name:"ret_val",type:k.DB_TYPE_BINARY_INTEGER,dir:U.BIND_OUT,values:[]},{name:"oid",type:k.DB_TYPE_RAW,maxSize:16,dir:U.BIND_OUT,values:[]},{name:"version",type:k.DB_TYPE_BINARY_INTEGER,dir:U.BIND_OUT,values:[]},{name:"tds",type:k.DB_TYPE_RAW,maxSize:2e3,dir:U.BIND_OUT,values:[]},{name:"attrs_rc",type:k.DB_TYPE_CURSOR,dir:U.BIND_OUT,values:[]},{name:"package_name",type:k.DB_TYPE_VARCHAR,maxSize:128,dir:U.BIND_OUT,values:[]},{name:"schema",type:k.DB_TYPE_VARCHAR,maxSize:128,dir:U.BIND_OUT,values:[]},{name:"name",type:k.DB_TYPE_VARCHAR,maxSize:128,dir:U.BIND_OUT,values:[]}],n={connection:{_impl:this},nullifyInvalidCursor:!0},_=await this.execute(t,1,r,n,!1);_.outBinds.ret_val!==0&&me.throwErr(me.ERR_INVALID_OBJECT_TYPE_NAME,e);let a=this._getDbObjectType(_.outBinds.schema,_.outBinds.name,_.outBinds.package_name,_.outBinds.oid);if(!a.partial)return a;if(a.name.endsWith("%ROWTYPE")){let c=[{name:"owner",type:k.DB_TYPE_VARCHAR,maxSize:128,dir:U.BIND_IN,values:[_.outBinds.schema]},{name:"name",type:k.DB_TYPE_VARCHAR,maxSize:128,dir:U.BIND_IN,values:[a.name.substring(0,a.name.length-8)]}],l=await(await this.execute(s,1,c,n,!1)).resultSet._getAllRows();a.attributes=[];for(let N of l){let P={name:N[0],dataType:N[1],dataTypeOwner:N[2],maxSize:N[3],dataPrecision:N[4],dataScale:N[5]};if(!P.dataTypeOwner){let d=N[1].indexOf("("),S=N[1].indexOf(")");S>d&&(P.dataType=P.dataType.substring(0,d)+P.dataType.substring(S+1,P.dataType.length))}this._addAttr(a.attributes,P)}}else{a.version=_.outBinds.version;let c=await _.outBinds.attrs_rc._getAllRows();if(c.length>0){a.attributes=[];for(let E of c){let l={name:E[1],dataType:E[3],dataTypeOwner:E[4],packageName:E[5],oid:E[6]};this._addAttr(a.attributes,l)}}await this._parseTDS(_.outBinds.tds,a)}return a.partial=!1,a}_addAttr(e,t){let s={name:t.name};t.dataTypeOwner?(s.type=k.DB_TYPE_OBJECT,s.typeClass=this._getDbObjectType(t.dataTypeOwner,t.dataType,t.packageName,t.oid),s.typeClass.isXmlType&&(s.type=k.DB_TYPE_XMLTYPE),s.typeClass.partial&&this._partialDbObjectTypes.push(s.typeClass)):(s.type=k.getTypeByColumnTypeName(t.dataType),s.maxSize=t.maxSize,s.precision=t.dataPrecision,s.scale=t.dataScale),e.push(s)}async _populatePartialDbObjectTypes(){for(;this._partialDbObjectTypes.length>0;){let e=this._partialDbObjectTypes.pop(),t="%ROWTYPE",s=e.name;s.endsWith(t)?s=s.substring(0,s.length-t.length):t="";let r;e.packageName?r=`"${e.schema}"."${e.packageName}"."${s}"${t}`:r=`"${e.schema}"."${s}"${t}`,await this._populateDbObjectTypeInfo(r)}}async commit(){let e=new Me.CommitMessage(this);await this._protocol._processMessage(e)}async breakExecution(){await this._protocol.breakMessage()}isHealthy(){try{return this.nscon.recvInbandNotif()===0}catch{return!1}}isPooled(){return!!this._pool}async connect(e){e.connectString||me.throwErr(me.ERR_EMPTY_CONNECT_STRING),Di.checkCredentials(e),this.sessionID=0,this.serialNum=0,this.autoCommit=!1,this.serverVersion="",this.statementCache=null,this.currentSchema="",this.invokeSessionCallback=!0,this.statementCacheSize=e.stmtCacheSize,this._currentSchemaModified=!1,this._tempLobsToClose=[],this._tempLobsTotalSize=0,this._drcpEstablishSession=!1,this._cclass=null,this._clientIdentifier="",this._clientIdentifierModified=!1,this._action="",this._actionModified=!1,this._dbOp="",this._dbOpModified=!1,this._clientInfo="",this._clientInfoModified=!1,this._module="",this._moduleModified=!1,this._drcpEnabled=!1,this.serviceName="",this.remoteAddress="",this.comboKey=null,this.tpcContext=null,this.nscon=new fm,pm.register(this,this.nscon),await this.nscon.connect(e);let t;this.isPooled()?(t=e._connInfo[0],this.serviceName=e._connInfo[2],this.purity=e._connInfo[3]|U.PURITY_DEFAULT,this.sid=e._connInfo[4]):(t=this.nscon.getOption(Fs.SERVERTYPE),this.serviceName=this.nscon.getOption(Fs.SVCNAME),this.sid=this.nscon.getOption(Fs.SID),this.purity=this.nscon.getOption(Fs.PURITY)|U.PURITY_DEFAULT),t&&(this._drcpEnabled=t.toLowerCase()==="pooled"),this.remoteAddress=this.nscon.getOption(Fs.REMOTEADDR),this.connectionClass=e.connectionClass,this.purity===U.PURITY_DEFAULT&&this._drcpEnabled&&(this.isPooled()?this.purity=U.PURITY_SELF:this.purity=U.PURITY_NEW),this._protocol=new um(this),this._protocol.caps.protocolVersion<U.TNS_VERSION_MIN_ACCEPTED&&me.throwErr(me.ERR_SERVER_VERSION_NOT_SUPPORTED);try{let s=new Me.ProtocolMessage(this),r=new Me.DataTypeMessage(this),n=new Me.AuthMessage(this,e);if(this.nscon.supportsFastAuth){let _=new Me.FastAuthMessage(this);_.protocolMessage=s,_.dataTypeMessage=r,_.authMessage=n,await this._protocol._processMessage(_),_.reNegotiate&&(await this._protocol._processMessage(r),await this._protocol._processMessage(n))}else await this._protocol._processMessage(s),await this._protocol._processMessage(r),await this._protocol._processMessage(n);e.token||await this._protocol._processMessage(n)}catch(s){throw this.nscon.disconnect(),s}this.statementCache=new Pm(this.statementCacheSize),this._partialDbObjectTypes=[],e.debugJDWP?this.jdwpData=mu.from(e.debugJDWP):Iu.env.ORA_DEBUG_JDWP&&(this.jdwpData=mu.from(Iu.env.ORA_DEBUG_JDWP)),this._protocol.connInProgress=!1}_returnStatement(e){this.statementCache.returnStatement(e)}_prepare(e,t){let s=this._getStatement(e,t.keepInStmtCache);return s.bufferRowIndex=0,s.bufferRowCount=0,s.lastRowIndex=0,s.moreRowsToFetch=!0,s}async _bind(e,t,s=0){let r=e.bindInfoDict,n=e.bindInfoList;if(e.isPlSql&&t.maxSize>32767){t.type===k.DB_TYPE_RAW||t.type===k.DB_TYPE_LONG_RAW?t.type=k.DB_TYPE_BLOB:t.type._csfrm===U.CSFRM_NCHAR?t.type=k.DB_TYPE_NCLOB:t.type=k.DB_TYPE_CLOB;let _=t.maxSize;delete t.maxSize,t.outConverter=async function(a){if(a===null)return null;let c=await a.getData(),E=a._length;return c&&E>_&&me.throwErr(me.ERR_INSUFFICIENT_BUFFER_FOR_BINDS),c}}if(t.type===k.DB_TYPE_CLOB||t.type===k.DB_TYPE_NCLOB||t.type===k.DB_TYPE_BLOB){for(let[_,a]of t.values.entries())if(!(a instanceof kT))if(a&&a.length>0){let c=new kT;await c.create(this,t.type),await c.write(1,a),t.values[_]=c}else t.values[_]=null}if(t.name){let _;t.name.startsWith('"')&&t.name.endsWith('"')?_=t.name.substring(1,t.name.length-1):_=t.name.toUpperCase(),_.startsWith(":")&&(_=t.name.substring(1)),r.has(_)||me.throwErr(me.ERR_INVALID_BIND_NAME,_),r.get(_).forEach(a=>{e._setVariable(a,t)})}else{let _=n[s-1];e._setVariable(_,t)}}_createResultSet(e,t){let s=new Sm;if(t||(t=new dm),s._resultSetNew(this,t,e),t.queryVars.length>0){let r=Di.getMetadataMany(t.queryVars);s._setup(e,r)}return s}async getDbObjectClass(e){let t=await this._populateDbObjectTypeInfo(e);return await this._populatePartialDbObjectTypes(),t}async getStatementInfo(e){let t={},s={},r=this._prepare(e,t);t.connection=this;try{if(!r.isDdl){let n=new Me.ExecuteMessage(this,r,t);n.parseOnly=!0,await this._protocol._processMessage(n)}return r.numQueryVars>0&&(s.metaData=Di.getMetadataMany(r.queryVars)),s.bindNames=Array.from(r.bindInfoDict.keys()),s.statementType=r.statementType,s}finally{this._returnStatement(r)}}async execute(e,t,s,r,n){let _=this._prepare(e,r);try{return await this._execute(_,t,s,r,n)}catch(a){throw this._returnStatement(_),a}}_getStatement(e,t=!1){return this.statementCache.getStatement(e,t,this._drcpEstablishSession)}async ping(){let e=new Me.PingMessage(this);await this._protocol._processMessage(e)}async rollback(){let e=new Me.RollbackMessage(this);await this._protocol._processMessage(e)}getOracleServerVersion(){return this.serverVersion}getOracleServerVersionString(){return this.serverVersionString}setCurrentSchema(e){this._currentSchemaModified=!0,this.currentSchema=e}getCurrentSchema(){return this.currentSchema}setClientId(e){this._clientIdentifierModified=!0,this._clientIdentifier=e}setDbOp(e){this._dbOpModified=!0,this._dbOp=e}setExternalName(e){this.externalName=e}setInternalName(e){this.internalName=e}setClientInfo(e){this._clientInfoModified=!0,this._clientInfo=e}setModule(e){this._moduleModified=!0,this._module=e,this._actionModified=!0}setAction(e){this._actionModified=!0,this._action=e}async changePassword(e,t,s){let r={user:e,newPassword:s,password:t,changePassword:!0},n=new Me.AuthMessage(this,r);await this._protocol._processMessage(n)}async createLob(e){let t=new kT;return await t.create(this,e),t}checkTpcCommitState(e,t){(t&&e!==U.TNS_TPC_TXN_STATE_READ_ONLY&&e!==U.TNS_TPC_TXN_STATE_COMMITTED||!t&&e!==U.TNS_TPC_TXN_STATE_FORGOTTEN)&&me.throwErr(me.ERR_UNKNOWN_TRANSACTION_STATE,e)}createTpcCommitMessage(e,t){let s=new Me.TransactionChangeStateMessage(this);return s.operation=U.TNS_TPC_TXN_COMMIT,s.state=t==0?U.TNS_TPC_TXN_STATE_COMMITTED:U.TNS_TPC_TXN_STATE_READ_ONLY,s.xid=e,s.context=this.tpcContext,s}createTpcRollbackMessage(e=null){let t=new Me.TransactionChangeStateMessage(this);return t.operation=U.TNS_TPC_TXN_ABORT,t.state=U.TNS_TPC_TXN_STATE_ABORTED,t.xid=e,t.context=this.tpcContext,t}async tpcBegin(e,t,s){let r=new Me.TransactionSwitchMessage(this);r.operation=U.TNS_TPC_TXN_START,r.xid=e,r.flags=t,r.timeout=s,await this._protocol._processMessage(r),this.tpcContext=r.context}async tpcCommit(e,t){let s=this.createTpcCommitMessage(e,t);await this._protocol._processMessage(s),this.checkTpcCommitState(s.state,t)}async tpcEnd(e,t){let s=new Me.TransactionSwitchMessage(this);s.operation=U.TNS_TPC_TXN_DETACH,s.xid=e,s.context=this.tpcContext,s.flags=t,await this._protocol._processMessage(s),this.tpcContext=null}async tpcPrepare(e){let t=new Me.TransactionChangeStateMessage(this);if(t.operation=U.TNS_TPC_TXN_PREPARE,t.xid=e,t.context=this.tpcContext,await this._protocol._processMessage(t),t.state===U.TNS_TPC_TXN_STATE_REQUIRES_COMMIT)return!0;if(t.state===U.TNS_TPC_TXN_STATE_READ_ONLY)return!1;me.throwErr(me.ERR_UNKNOWN_TRANSACTION_STATE,t.state)}async tpcRollback(e){let t=this.createTpcRollbackMessage(e);await this._protocol._processMessage(t),t.state!==U.TNS_TPC_TXN_STATE_ABORTED&&me.throwErr(me.ERR_UNKNOWN_TRANSACTION_STATE,t.state)}getStmtCacheSize(){return this.statementCache._maxSize}setCallTimeout(e){this._protocol.callTimeout=e}getCallTimeout(){return this._protocol.callTimeout}getTag(){return""}getExternalName(){return this.externalName}getInstanceName(){return this.instanceName}getInternalName(){return this.internalName}getDbDomain(){return this.dbDomain}getDbName(){return this.dbName}getMaxOpenCursors(){return this.maxOpenCursors}getServiceName(){return this.serviceName}getTransactionInProgress(){return this._protocol.txnInProgress}getWarning(){return this.warning}};T(HT,"ThinConnectionImpl");var GT=HT;Du.exports=GT});var Ou=R((ML,Cu)=>{"use strict";var Rm=co(),mm=vT(),Ke=js(),Jt=Y(),Im=nt(),KT=Le(),Dm=rr(),{getConnectionInfo:Cm}=sT(),Om=require("crypto"),gm=require("events"),Lm=require("timers"),XT=class XT extends Rm{_init(e){if(e.homogeneous||Jt.throwErr(Jt.ERR_NOT_IMPLEMENTED,"Heterogeneous Pooling"),Dm.checkCredentials(e),this._availableObjects=[],this._name="node-thin",this._poolMin=e.poolMin,this._poolMax=e.poolMax,this._poolIncrement=e.poolIncrement,this._poolTimeout=e.poolTimeout,this._poolPingInterval=e.poolPingInterval,this._poolPingTimeout=e.poolPingTimeout,this._stmtCacheSize=e.stmtCacheSize,this._userConfig=e,this._freeConnectionList=[],this._usedConnectionList=new Set,this._password=e.password,this._walletPassword=e.walletPassword,this._walletContent=e.walletContent,this._obfuscatedPassword=[],this._obfuscatedWalletPassword=[],this._token=e.token,this._obfuscatedToken=[],this._privateKey=e.privateKey,this._obfuscatedPrivateKey=[],this._schedulerJob=null,this._poolCloseWaiter=null,this._pendingRequests=[],this._password!==void 0){let t=Ke.setObfuscatedValue(this._password);this._password=t.value,this._obfuscatedPassword=t.obfuscatedValue,this._userConfig.password=null}if(this._walletPassword!==void 0){let t=Ke.setObfuscatedValue(this._walletPassword);this._walletPassword=t.value,this._obfuscatedWalletPassword=t.obfuscatedValue,this._userConfig.walletPassword=null}if(this._walletContent!==void 0){let t=Ke.setObfuscatedValue(this._walletContent);this._walletContent=t.value,this._obfuscatedWalletContent=t.obfuscatedValue,this._userConfig.walletConent=null}if(this._token!==void 0){let t=Ke.setObfuscatedValue(this._token);this._token=t.value,this._obfuscatedToken=t.obfuscatedValue,this._userConfig.token=null}if(this._privateKey!==void 0){let t=Ke.setObfuscatedValue(this._privateKey);this._privateKey=t.value,this._obfuscatedPrivateKey=t.obfuscatedValue,this._userConfig.privateKey=null}this._accessTokenFn=e.accessTokenFn,this._accessTokenConfig=e.accessTokenConfig,this._isDRCPEnabled=!1,this._implicitPool=null,this.eventEmitter=new gm,this.eventEmitter.on("_removePoolConnection",async t=>{await this._destroy(t)})}async create(e){this._init(e),this._userConfig._connInfo=await Cm(e),this._isDRCPEnabled=String(this._userConfig._connInfo[0]).toLowerCase()==="pooled",this._isDRCPEnabled&&Im.connectionClass===""&&this._generateConnectionClass(),this.bgThreadFunc()}setAccessToken(e){if(e.token){this._token=e.token;let t=Ke.setObfuscatedValue(this._token);this._token=t.value,this._obfuscatedToken=t.obfuscatedValue}if(e.privateKey){this._privateKey=e.privateKey;let t=Ke.setObfuscatedValue(this._privateKey);this._privateKey=t.value,this._obfuscatedPrivateKey=t.obfuscatedValue}}async _getConnAttrs(){let e,t=Object.assign({},this._userConfig);if(t.password===null&&(t.password=Ke.getDeobfuscatedValue(this._password,this._obfuscatedPassword)),t.walletPassword===null&&(t.walletPassword=Ke.getDeobfuscatedValue(this._walletPassword,this._obfuscatedWalletPassword)),t.walletContent===null&&(t.walletContent=Ke.getDeobfuscatedValue(this._walletContent,this._obfuscatedWalletContent)),t.token===null&&(t.token=Ke.getDeobfuscatedValue(this._token,this._obfuscatedToken),KT.isTokenExpired(t.token)))if(typeof this._accessTokenFn=="function"){if(e=await this._accessTokenFn(!0,this._accessTokenConfig),typeof e=="string")if(t.token=e,KT.isTokenExpired(t.token))Jt.throwErr(Jt.ERR_TOKEN_HAS_EXPIRED);else{let s=Ke.setObfuscatedValue(t.token);this._token=s.value,this._obfuscatedToken=s.obfuscatedValue}else if(typeof e=="object")if(t.token=e.token,t.privateKey=e.privateKey,KT.isTokenExpired(t.token))Jt.throwErr(Jt.ERR_TOKEN_HAS_EXPIRED);else{let s=Ke.setObfuscatedValue(t.token);this._token=s.value,this._obfuscatedToken=s.obfuscatedValue;let r=Ke.setObfuscatedValue(t.privateKey);this._privateKey=r.value,this._obfuscatedPrivateKey=r.obfuscatedValue}}else Jt.throwErr(Jt.ERR_TOKEN_HAS_EXPIRED);return t.privateKey===null&&(t.privateKey=Ke.getDeobfuscatedValue(this._privateKey,this._obfuscatedPrivateKey)),t}async getConnection(){return await this.acquire()}async _destroy(e){e.nscon.ntAdapter.connected&&(e._dropSess=!0,await e.close())}async close(){await new Promise(e=>{this._poolCloseWaiter=e,this.bgWaiter&&this.bgWaiter()}),this._schedulerJob&&(clearTimeout(this._schedulerJob),this._schedulerJob=null);for(let e of this._freeConnectionList)await this._destroy(e);for(let e of this._usedConnectionList)await this._destroy(e);this.eventEmitter.removeAllListeners()}getPoolMax(){return this._poolMax}getPoolMin(){return this._poolMin}getConnectionsInUse(){return this._usedConnectionList.size}getConnectionsOpen(){return this._freeConnectionList.length+this._usedConnectionList.size}getPoolIncrement(){return this._poolIncrement}getPoolMaxPerShard(){}getPoolPingInterval(){return this._poolPingInterval}getPoolPingTimeout(){return this._poolPingTimeout}getPoolTimeout(){return this._poolTimeout}getSodaMetaDataCache(){}getStmtCacheSize(){return this._stmtCacheSize}_setScheduler(){!this._schedulerJob&&this._poolTimeout>0&&this._freeConnectionList.length>0&&this._freeConnectionList.length+this._usedConnectionList.size>this._poolMin&&(this._schedulerJob=setTimeout(()=>{this._scanIdleConnection()},this._poolTimeout*1e3))}_scanIdleConnection(){for(;this._usedConnectionList.size+this._freeConnectionList.length>this._poolMin&&this._freeConnectionList.length>0;){let e=this._freeConnectionList[0];if(Date.now()-e._lastTimeUsed<this._poolTimeout*1e3)break;this.eventEmitter.emit("_removePoolConnection",e),this._freeConnectionList.shift()}this._schedulerJob=null,this._setScheduler()}_getNumConnsToCreate(){let e=this._freeConnectionList.length+this._usedConnectionList.size;return e<this._poolMin?this._poolMin-e:this._pendingRequests.length>0?Math.min(this._poolIncrement,this._poolMax-e):0}async bgThreadFunc(){for(;!this._poolCloseWaiter;){let e=this._poolMax-this.getConnectionsOpen();for(;e>0&&this._freeConnectionList.length>0;){let s=this._freeConnectionList.shift();this.eventEmitter.emit("_removePoolConnection",s),e--}let t=this._getNumConnsToCreate();for(let s=0;s<t;s++){try{let r=await this._getConnAttrs(),n=new mm;n._pool=this,await n.connect(r),n._newSession=!0,n._dropSess=!1,n._lastTimeUsed=Date.now(),this._freeConnectionList.push(n)}catch(r){this._bgErr=r}if(this._poolIncrement>1&&this._poolMax-this._usedConnectionList.size-this._freeConnectionList.length>1&&this._setScheduler(),this._pendingRequests.length>0&&this._pendingRequests.shift().resolve(),await new Promise(r=>Lm.setImmediate(r)),this._poolCloseWaiter)break}if(this._poolCloseWaiter)break;(this._pendingRequests.length==0||this._bgErr)&&(await new Promise(s=>{this.bgWaiter=s}),this.bgWaiter=null)}this._poolCloseWaiter()}async acquire(){for(;this._freeConnectionList.length>0;){let t=this._freeConnectionList.pop();if(!t.isHealthy()){this.eventEmitter.emit("_removePoolConnection",t);continue}let s=!1;if((this._poolPingInterval===0||this._poolPingInterval>0&&Date.now()-t._lastTimeUsed>this._poolPingInterval*1e3)&&(s=!0),s){let r;try{this._poolPingTimeout&&(r=setTimeout(()=>{t.nscon.forceDisconnect()},this._poolPingTimeout)),await t.ping()}catch{t.nscon.forceDisconnect();continue}finally{clearTimeout(r)}}return this._usedConnectionList.add(t),t}if(await new Promise(t=>{this._pendingRequests.push({resolve:t}),this.bgWaiter&&this.bgWaiter()}),this._bgErr){let t=this._bgErr;throw this._bgErr=null,this._pendingRequests.length>0&&this.bgWaiter&&this.bgWaiter(),t}let e=this._freeConnectionList.pop();return this._usedConnectionList.add(e),e}release(e){e.warning=void 0,this._usedConnectionList.delete(e),e.nscon.connected&&(e._lastTimeUsed=Date.now(),e._newSession=!1,this._freeConnectionList.length+this._usedConnectionList.size<this._poolMax?this._freeConnectionList.push(e):this.eventEmitter.emit("_removePoolConnection",e)),this._setScheduler()}_generateConnectionClass(){this._userConfig.connectionClass=Om.randomBytes(16).toString("base64"),this._userConfig.connectionClass="NJS:"+this._userConfig.connectionClass}reconfigure(e){e.poolIncrement!==void 0&&(this._poolIncrement=e.poolIncrement),e.poolTimeout!==void 0&&this._poolTimeout!==e.poolTimeout&&(this._poolTimeout=e.poolTimeout,this._schedulerJob&&(clearTimeout(this._schedulerJob),this._schedulerJob=null)),e.poolPingInterval!==void 0&&(this._poolPingInterval=e.poolPingInterval),e.stmtCacheSize!==void 0&&(this._stmtCacheSize=e.stmtCacheSize),e.poolMax!==void 0&&(this._poolMax=e.poolMax),e.poolMin!==void 0&&(this._poolMin=e.poolMin),this.bgWaiter&&this.bgWaiter()}};T(XT,"ThinPoolImpl");var WT=XT;Cu.exports=WT});var gu=R(()=>{"use strict";var ym=vT(),Bm=Z_(),wm=Ou(),Ym=$s(),{ThinDbObjectImpl:Um}=b_(),cr=Is();cr.ConnectionImpl=ym;cr.ResultSetImpl=Bm;cr.PoolImpl=wm;cr.LobImpl=Ym;cr.DbObjectImpl=Um});var Mu=R((kL,Uu)=>{"use strict";Wn();var D=Ye(),re=Le(),m=Y(),v=Fe(),Lu=Is(),Vm=require("process"),Fm=require("util"),zT=Vm.version.substring(1).split(".").map(Number);m.assert(zT[0]>14||zT[0]===14&&zT[1]>=6,m.ERR_NODE_TOO_OLD,re.PACKAGE_JSON_VERSION,"14.6");var xm=qo(),km=Wo(),bm=Qo(),Gm=__(),qm=ho(),Hm=Ds(),yu=R_(),vm=ts(),Bu=ON(),Km=D_(),Wm=Xr(),y=nt(),Xm=f_(),zm=S_(),Qm=c_(),Jm=Os(),jm=h_(),xs={},Ci={},Er="default",as;function Zm(i){let e=typeof __non_webpack_require__=="function"?__non_webpack_require__:require,t=["../"+re.RELEASE_DIR+"/"+re.BINARY_FILE,"../"+re.RELEASE_DIR+"/"+re.BUILD_FILE,"../build/Debug/"+re.BUILD_FILE,"./node_modules/oracledb/"+re.RELEASE_DIR+"/"+re.BINARY_FILE,"./node_modules/oracledb/"+re.RELEASE_DIR+"/"+re.BUILD_FILE];i.binaryDir!==void 0&&t.splice(0,0,i.binaryDir+"/"+re.BINARY_FILE,i.binaryDir+"/"+re.BUILD_FILE);let s;for(let r=0;r<t.length;r++)try{s=e(t[r]);break}catch(n){if(n.code!=="MODULE_NOT_FOUND"||r==t.length-1){let _;n.code==="MODULE_NOT_FOUND"?_=`
  Looked for ${t.map(a=>require("path").resolve(__dirname,a)).join(", ")}
  ${re.getInstallURL()}
`:_=`
  Node.js require('oracledb') error was:
  ${n.message}
  ${re.getInstallHelp()}
`,m.throwErr(m.ERR_CANNOT_LOAD_BINARY,_)}}return s}T(Zm,"_initCLib");function wu(){gu()}T(wu,"_initializeThinDriver");async function Yu(i,e){let t={};if(i=await iI(i),i.user!==void 0&&(m.assertParamPropValue(typeof i.user=="string",1,"user"),t.user=i.user),i.username!==void 0&&(m.assert(t.user===void 0,m.ERR_DBL_USER),m.assertParamPropValue(typeof i.username=="string",1,"username"),t.user=i.username),i.password!==void 0&&(m.assertParamPropValue(typeof i.password=="string",1,"password"),t.password=i.password),i.connectString!==void 0&&(m.assertParamPropValue(typeof i.connectString=="string",1,"connectString"),t.connectString=i.connectString),i.connectionString!==void 0&&(m.assert(t.connectString===void 0,m.ERR_DBL_CONNECT_STRING),m.assertParamPropValue(typeof i.connectionString=="string",1,"connectionString"),t.connectString=i.connectionString),i.walletPassword!==void 0&&(m.assertParamPropValue(typeof i.walletPassword=="string",1,"walletPassword"),t.walletPassword=i.walletPassword),i.walletLocation!==void 0&&(m.assertParamPropValue(typeof i.walletLocation=="string",1,"walletLocation"),t.walletLocation=i.walletLocation),i.walletContent!==void 0&&(m.assertParamPropValue(typeof i.walletContent=="string",1,"walletContent"),t.walletContent=i.walletContent),i.edition!==void 0&&(m.assertParamPropValue(typeof i.edition=="string",1,"edition"),t.edition=i.edition),i.stmtCacheSize!==void 0&&(m.assertParamPropValue(Number.isInteger(i.stmtCacheSize)&&i.stmtCacheSize>=0,1,"stmtCacheSize"),t.stmtCacheSize=i.stmtCacheSize),t.externalAuth=y.externalAuth,i.externalAuth!==void 0&&(m.assertParamPropValue(typeof i.externalAuth=="boolean",1,"externalAuth"),t.externalAuth=i.externalAuth),i.events!==void 0&&(m.assertParamPropValue(typeof i.events=="boolean",1,"events"),t.events=i.events),i.poolAlias!==void 0&&(m.assertParamPropValue(typeof i.poolAlias=="string"&&i.poolAlias.length>0,1,"poolAlias"),t.poolAlias=i.poolAlias),i.configDir!==void 0&&(m.assertParamPropValue(typeof i.configDir=="string",1,"configDir"),t.configDir=i.configDir),i.sslServerCertDN!==void 0&&(m.assertParamPropValue(typeof i.sslServerCertDN=="string",1,"sslServerCertDN"),t.sslServerCertDN=i.sslServerCertDN),i.sslServerDNMatch!==void 0&&(m.assertParamPropValue(typeof i.sslServerDNMatch=="boolean",1,"sslServerDNMatch"),t.sslServerDNMatch=i.sslServerDNMatch),i.sslAllowWeakDNMatch!==void 0&&(m.assertParamPropValue(typeof i.sslAllowWeakDNMatch=="boolean",1,"sslAllowWeakDNMatch"),t.sslAllowWeakDNMatch=i.sslAllowWeakDNMatch),i.httpsProxy!==void 0&&(m.assertParamPropValue(typeof i.httpsProxy=="string",1,"httpsProxy"),t.httpsProxy=i.httpsProxy),i.httpsProxyPort!==void 0&&(m.assertParamPropValue(Number.isInteger(i.httpsProxyPort)&&i.httpsProxyPort>=0,1,"httpsProxyPort"),t.httpsProxyPort=i.httpsProxyPort),i.retryCount!==void 0&&(m.assertParamPropValue(Number.isInteger(i.retryCount)&&i.retryCount>=0,1,"retryCount"),t.retryCount=i.retryCount),i.retryDelay!==void 0&&(m.assertParamPropValue(Number.isInteger(i.retryDelay)&&i.retryDelay>=0,1,"retryDelay"),t.retryDelay=i.retryDelay),i.connectTimeout!==void 0&&(m.assertParamPropValue(Number.isInteger(i.connectTimeout)&&i.connectTimeout>=0,1,"connectTimeout"),t.connectTimeout=i.connectTimeout),i.transportConnectTimeout!==void 0&&(m.assertParamPropValue(Number.isInteger(i.transportConnectTimeout)&&i.transportConnectTimeout>=0,1,"transportConnectTimeout"),t.transportConnectTimeout=i.transportConnectTimeout),i.expireTime!==void 0&&(m.assertParamPropValue(Number.isInteger(i.expireTime)&&i.expireTime>=0,1,"expireTime"),t.expireTime=i.expireTime),i.sdu!==void 0&&(m.assertParamPropValue(Number.isInteger(i.sdu)&&i.sdu>0,1,"sdu"),t.sdu=i.sdu),i.connectionIdPrefix!==void 0&&(m.assertParamPropValue(typeof i.connectionIdPrefix=="string",1,"connectionIdPrefix"),t.connectionIdPrefix=i.connectionIdPrefix),i.privilege!==void 0&&(m.assertParamPropValue(re.isPrivilege(i.privilege),1,"privilege"),t.privilege=i.privilege),e)i.poolMax!==void 0&&(m.assertParamPropValue(Number.isInteger(i.poolMax)&&i.poolMax>0,1,"poolMax"),t.poolMax=i.poolMax),i.poolMaxPerShard!==void 0&&(m.assertParamPropValue(Number.isInteger(i.poolMaxPerShard)&&i.poolMaxPerShard>=0,1,"poolMaxPerShard"),t.poolMaxPerShard=i.poolMaxPerShard),i.poolMin!==void 0&&(m.assertParamPropValue(Number.isInteger(i.poolMin)&&i.poolMin>=0,1,"poolMin"),t.poolMin=i.poolMin),i.poolIncrement!==void 0&&(m.assertParamPropValue(Number.isInteger(i.poolIncrement)&&i.poolIncrement>=0,1,"poolIncrement"),t.poolIncrement=i.poolIncrement),i.poolTimeout!==void 0&&(m.assertParamPropValue(Number.isInteger(i.poolTimeout)&&i.poolTimeout>=0,1,"poolTimeout"),t.poolTimeout=i.poolTimeout),i.poolPingInterval!==void 0&&(m.assertParamPropValue(Number.isInteger(i.poolPingInterval)&&i.poolPingInterval>=-2147483648&&i.poolPingInterval<=2147483647,1,"poolPingInterval"),t.poolPingInterval=i.poolPingInterval),i.poolPingTimeout!==void 0&&(m.assertParamPropValue(Number.isInteger(i.poolPingTimeout)&&i.poolPingTimeout>=0,1,"poolPingTimeout"),t.poolPingTimeout=i.poolPingTimeout),t.homogeneous=!0,i.homogeneous!==void 0&&(m.assertParamPropValue(typeof i.homogeneous=="boolean",1,"homogeneous"),t.homogeneous=i.homogeneous),i.queueTimeout!==void 0&&(m.assertParamPropValue(Number.isInteger(i.queueTimeout)&&i.queueTimeout>=0,1,"queueTimeout"),t.queueTimeout=i.queueTimeout),i.queueMax!==void 0&&(m.assertParamPropValue(Number.isInteger(i.queueMax),1,"queueMax"),t.queueMax=i.queueMax),t.sodaMetaDataCache=!1,i.sodaMetaDataCache!==void 0&&(m.assertParamPropValue(typeof i.sodaMetaDataCache=="boolean",1,"sodaMetaDataCache"),t.sodaMetaDataCache=i.sodaMetaDataCache),i.sessionCallback!==void 0&&(m.assertParamPropValue(typeof i.sessionCallback=="string"||typeof i.sessionCallback=="function",1,"sessionCallback"),t.sessionCallback=i.sessionCallback),t.enableStatistics=!1,i.enableStatistics!==void 0&&(m.assertParamPropValue(typeof i.enableStatistics=="boolean",1,"enableStatistics"),t.enableStatistics=i.enableStatistics),!t.enableStatistics&&i._enableStats!==void 0&&(m.assertParamPropValue(typeof i._enableStats=="boolean",1,"_enableStats"),t.enableStatistics=i._enableStats);else{if(i.newPassword!==void 0&&(m.assertParamPropValue(typeof i.newPassword=="string",1,"newPassword"),t.newPassword=i.newPassword),i.shardingKey!==void 0){let s=i.shardingKey;m.assertParamPropValue(re.isShardingKey(s),1,"shardingKey"),t.shardingKey=i.shardingKey}if(i.superShardingKey!==void 0){let s=i.superShardingKey;m.assertParamPropValue(re.isShardingKey(s),1,"superShardingKey"),t.superShardingKey=i.superShardingKey}}if(i.accessToken!==void 0){m.assert(t.user===void 0&&t.password===void 0,m.ERR_TOKEN_BASED_AUTH),e?m.assert(t.homogeneous&&t.externalAuth,m.ERR_POOL_TOKEN_BASED_AUTH):m.assert(t.externalAuth,m.ERR_CONN_TOKEN_BASED_AUTH);let s;typeof i.accessToken=="function"?(t.accessTokenFn=i.accessToken,t.accessTokenConfig=i.accessTokenConfig,s=await i.accessToken(!1,i.accessTokenConfig),re.isTokenValid(s)||(s=await i.accessToken(!0,i.accessTokenConfig))):s=i.accessToken,m.assert(re.isTokenValid(s),m.ERR_TOKEN_HAS_EXPIRED),s.privateKey!==void 0&&(m.assert(typeof s.privateKey=="string",m.ERR_TOKEN_BASED_AUTH),s.privateKey=re.denormalizePrivateKey(s.privateKey)),typeof s=="string"?t.token=s:(t.token=s.token,t.privateKey=s.privateKey)}return t.token===void 0&&t.externalAuth&&(t.password&&m.throwErr(m.ERR_WRONG_CRED_FOR_EXTAUTH),t.user&&(e?m.throwErr(m.ERR_WRONG_CRED_FOR_EXTAUTH):(t.user[0]!=="["||t.user.slice(-1)!=="]")&&m.throwErr(m.ERR_WRONG_USER_FORMAT_EXTAUTH_PROXY))),t}T(Yu,"_verifyOptions");async function $m(i){let e;m.assertArgCount(arguments,1,1),m.assertParamValue(re.isObject(i),1),i=await Yu(i,!0);let t=i.sessionCallback;typeof t=="function"&&delete i.sessionCallback,i.poolAlias!==void 0?e=i.poolAlias:i.poolAlias===void 0&&!xs[Er]&&!Ci[Er]&&(e=Er),(xs[e]||Ci[e])&&m.throwErr(m.ERR_POOL_WITH_ALIAS_ALREADY_EXISTS,e),y.addToOptions(i,"connectionClass","edition","events","externalAuth","stmtCacheSize","poolMax","poolMaxPerShard","poolMin","poolIncrement","poolTimeout","poolPingInterval","poolPingTimeout","queueMax","queueTimeout"),i.poolMin>i.poolMax&&m.throwErr(m.ERR_INVALID_NUMBER_OF_CONNECTIONS,i.poolMax,i.poolMin),as===void 0&&!y.thinDriverInitialized&&wu(),e&&(Ci[e]=!0);let s=new Bu;try{await s._impl.create(i)}finally{e&&delete Ci[e]}return e&&(xs[e]=s),s._setup(i,e),s._sessionCallback=t,s.on("_afterPoolClose",()=>{s.poolAlias&&delete xs[s.poolAlias]}),as===void 0&&(y.thinDriverInitialized=!0),s}T($m,"createPool");async function eI(i){let e={},t;if(m.assertArgCount(arguments,0,1),arguments.length==0?t=Er:typeof i=="string"?t=i:(e=i,m.assertParamValue(re.isObject(e),1),t=e.poolAlias),t){let r=xs[t];return m.assert(r,m.ERR_POOL_WITH_ALIAS_NOT_FOUND,t),await r.getConnection(e)}e=await Yu(e,!1),y.addToOptions(e,"connectionClass","edition","events","externalAuth","stmtCacheSize"),as===void 0&&!y.thinDriverInitialized&&wu();let s=new yu;return s._impl=new Lu.ConnectionImpl,await s._impl.connect(e),as===void 0&&(y.thinDriverInitialized=!0),s}T(eI,"getConnection");function tI(i){m.assertArgCount(arguments,0,1),i&&m.assertParamValue(typeof i=="string"||typeof i=="number",1),i=i||Er;let e=xs[i];return e||m.throwErr(m.ERR_POOL_WITH_ALIAS_NOT_FOUND,i),e}T(tI,"getPool");function sI(i){let e={};if(m.assertArgCount(arguments,0,1),i!==void 0&&(m.assertParamValue(re.isObject(i),1),e={...i},m.assertParamPropString(e,1,"libDir"),m.assertParamPropString(e,1,"configDir"),m.assertParamPropString(e,1,"errorUrl"),m.assertParamPropString(e,1,"driverName"),m.assertParamPropString(e,1,"binaryDir")),y.thinDriverInitialized&&m.throwErr(m.ERR_THIN_CONNECTION_ALREADY_CREATED),as===void 0){let t=Zm(e);e.driverName===void 0&&(e.driverName=D.DEFAULT_DRIVER_NAME+" thk"),e.errorUrl===void 0&&(e.errorUrl=D.DEFAULT_ERROR_URL);try{t.initOracleClient(e,Lu,y)}catch(s){let r=m.transformErr(s);throw r.code==="DPI-1047"&&(r.message+=`
`+re.getInstallHelp()),r}as=i||{}}else Fm.isDeepStrictEqual(as,e)||m.throwErr(m.ERR_INIT_ORACLE_CLIENT_ARGS);y.thin=!1}T(sI,"initOracleClient");async function rI(i,e){let t={},s=D.SHUTDOWN_MODE_DEFAULT;m.assertArgCount(arguments,0,2),arguments.length==2?(m.assertParamValue(typeof i=="object",1),m.assertParamValue(typeof e=="number",2),t=i,s=e):arguments.length==1&&(m.assertParamValue(typeof i=="object",1),t=i);let r={user:t.user,password:t.password,connectString:t.connectString,connectionString:t.connectionString,externalAuth:t.externalAuth,privilege:D.SYSOPER},n=await this.getConnection(r);await n.shutdown(s),s!=this.SHUTDOWN_MODE_ABORT&&(await n.execute("ALTER DATABASE CLOSE"),await n.execute("ALTER DATABASE DISMOUNT"),await n.shutdown(this.SHUTDOWN_MODE_FINAL)),await n.close()}T(rI,"shutdown");async function iI(i){let e=i.connectString||i.connectionString;if(!e)return i;let t=e,s,r=new RegExp("^config-(?<provider>[A-Za-z0-9]+)(://)(?<provider_arg>[^?]+)");e.indexOf("?")!=-1&&(t=e.substring(0,e.indexOf("?")),s=e.substring(e.indexOf("?"),e.length));let n=t.match(r);if(n){let _=n.groups.provider,a=n.groups.provider_arg,c;try{c=Mm("./configProviders/"+_)}catch{m.throwErr(m.ERR_CONFIG_PROVIDER_NOT_SUPPORTED,_)}let E=new c(a,s);try{E.init()}catch(N){m.throwErr(m.ERR_CONFIG_PROVIDER_LOAD_FAILED,N.message)}let l;try{l=await E.returnConfig()}catch(N){m.throwErr(m.ERR_CONFIG_PROVIDER_FAILED_TO_RETRIEVE_CONFIG,N.message)}i=E.modifyOptionsPrecedence(l,i)}return i}T(iI,"_checkConfigProvider");async function nI(i,e){let t={},s={};m.assertArgCount(arguments,0,2),arguments.length==2?(m.assertParamValue(typeof i=="object",1),m.assertParamValue(typeof e=="object",2),t=i,s=e):arguments.length==1&&(m.assertParamValue(typeof i=="object",1),t=i);let r={user:t.user,password:t.password,connectString:t.connectString,connectionString:t.connectionString,externalAuth:t.externalAuth,privilege:this.SYSOPER|this.SYSPRELIM},n=await this.getConnection(r);await n.startup(s),await n.close(),r.privilege=this.SYSOPER,n=await this.getConnection(r),await n.execute("ALTER DATABASE MOUNT"),await n.execute("ALTER DATABASE OPEN"),await n.close()}T(nI,"startup");Uu.exports={AqDeqOptions:xm,AqEnqOptions:km,AqMessage:bm,AqQueue:Gm,BaseDbObject:Hm,Connection:yu,JsonId:v.JsonId,Lob:vm,Pool:Bu,PoolStatistics:Km,ResultSet:Wm,SodaDatabase:Xm,SodaCollection:zm,SodaDocCursor:Qm,SodaDocument:Jm,SodaOperation:jm,getConnection:re.callbackify(eI),createPool:re.callbackify($m),getPool:tI,initOracleClient:sI,shutdown:re.callbackify(rI),startup:re.callbackify(nI),CQN_OPCODE_ALL_OPS:D.CQN_OPCODE_ALL_OPS,CQN_OPCODE_ALL_ROWS:D.CQN_OPCODE_ALL_ROWS,CQN_OPCODE_ALTER:D.CQN_OPCODE_ALTER,CQN_OPCODE_DELETE:D.CQN_OPCODE_DELETE,CQN_OPCODE_DROP:D.CQN_OPCODE_DROP,CQN_OPCODE_INSERT:D.CQN_OPCODE_INSERT,CQN_OPCODE_UPDATE:D.CQN_OPCODE_UPDATE,DB_TYPE_BFILE:v.DB_TYPE_BFILE,DB_TYPE_BINARY_DOUBLE:v.DB_TYPE_BINARY_DOUBLE,DB_TYPE_BINARY_FLOAT:v.DB_TYPE_BINARY_FLOAT,DB_TYPE_BINARY_INTEGER:v.DB_TYPE_BINARY_INTEGER,DB_TYPE_BLOB:v.DB_TYPE_BLOB,DB_TYPE_BOOLEAN:v.DB_TYPE_BOOLEAN,DB_TYPE_CHAR:v.DB_TYPE_CHAR,DB_TYPE_CLOB:v.DB_TYPE_CLOB,DB_TYPE_CURSOR:v.DB_TYPE_CURSOR,DB_TYPE_DATE:v.DB_TYPE_DATE,DB_TYPE_INTERVAL_DS:v.DB_TYPE_INTERVAL_DS,DB_TYPE_INTERVAL_YM:v.DB_TYPE_INTERVAL_YM,DB_TYPE_JSON:v.DB_TYPE_JSON,DB_TYPE_LONG:v.DB_TYPE_LONG,DB_TYPE_LONG_NVARCHAR:v.DB_TYPE_LONG_NVARCHAR,DB_TYPE_LONG_RAW:v.DB_TYPE_LONG_RAW,DB_TYPE_NCHAR:v.DB_TYPE_NCHAR,DB_TYPE_NCLOB:v.DB_TYPE_NCLOB,DB_TYPE_NUMBER:v.DB_TYPE_NUMBER,DB_TYPE_NVARCHAR:v.DB_TYPE_NVARCHAR,DB_TYPE_OBJECT:v.DB_TYPE_OBJECT,DB_TYPE_RAW:v.DB_TYPE_RAW,DB_TYPE_ROWID:v.DB_TYPE_ROWID,DB_TYPE_TIMESTAMP:v.DB_TYPE_TIMESTAMP,DB_TYPE_TIMESTAMP_LTZ:v.DB_TYPE_TIMESTAMP_LTZ,DB_TYPE_TIMESTAMP_TZ:v.DB_TYPE_TIMESTAMP_TZ,DB_TYPE_VARCHAR:v.DB_TYPE_VARCHAR,DB_TYPE_XMLTYPE:v.DB_TYPE_XMLTYPE,DB_TYPE_VECTOR:v.DB_TYPE_VECTOR,DEFAULT:D.DEFAULT,STMT_TYPE_UNKNOWN:D.STMT_TYPE_UNKNOWN,STMT_TYPE_SELECT:D.STMT_TYPE_SELECT,STMT_TYPE_UPDATE:D.STMT_TYPE_UPDATE,STMT_TYPE_DELETE:D.STMT_TYPE_DELETE,STMT_TYPE_INSERT:D.STMT_TYPE_INSERT,STMT_TYPE_CREATE:D.STMT_TYPE_CREATE,STMT_TYPE_DROP:D.STMT_TYPE_DROP,STMT_TYPE_ALTER:D.STMT_TYPE_ALTER,STMT_TYPE_BEGIN:D.STMT_TYPE_BEGIN,STMT_TYPE_DECLARE:D.STMT_TYPE_DECLARE,STMT_TYPE_CALL:D.STMT_TYPE_CALL,STMT_TYPE_EXPLAIN_PLAN:D.STMT_TYPE_EXPLAIN_PLAN,STMT_TYPE_MERGE:D.STMT_TYPE_MERGE,STMT_TYPE_ROLLBACK:D.STMT_TYPE_ROLLBACK,STMT_TYPE_COMMIT:D.STMT_TYPE_COMMIT,SHUTDOWN_MODE_DEFAULT:D.SHUTDOWN_MODE_DEFAULT,SHUTDOWN_MODE_TRANSACTIONAL:D.SHUTDOWN_MODE_TRANSACTIONAL,SHUTDOWN_MODE_TRANSACTIONAL_LOCAL:D.SHUTDOWN_MODE_TRANSACTIONAL_LOCAL,SHUTDOWN_MODE_IMMEDIATE:D.SHUTDOWN_MODE_IMMEDIATE,SHUTDOWN_MODE_ABORT:D.SHUTDOWN_MODE_ABORT,SHUTDOWN_MODE_FINAL:D.SHUTDOWN_MODE_FINAL,STARTUP_MODE_DEFAULT:D.STARTUP_MODE_DEFAULT,STARTUP_MODE_FORCE:D.STARTUP_MODE_FORCE,STARTUP_MODE_RESTRICT:D.STARTUP_MODE_RESTRICT,SUBSCR_EVENT_TYPE_SHUTDOWN:D.SUBSCR_EVENT_TYPE_SHUTDOWN,SUBSCR_EVENT_TYPE_SHUTDOWN_ANY:D.SUBSCR_EVENT_TYPE_SHUTDOWN_ANY,SUBSCR_EVENT_TYPE_STARTUP:D.SUBSCR_EVENT_TYPE_STARTUP,SUBSCR_EVENT_TYPE_DEREG:D.SUBSCR_EVENT_TYPE_DEREG,SUBSCR_EVENT_TYPE_OBJ_CHANGE:D.SUBSCR_EVENT_TYPE_OBJ_CHANGE,SUBSCR_EVENT_TYPE_QUERY_CHANGE:D.SUBSCR_EVENT_TYPE_QUERY_CHANGE,SUBSCR_EVENT_TYPE_AQ:D.SUBSCR_EVENT_TYPE_AQ,SUBSCR_GROUPING_CLASS_TIME:D.SUBSCR_GROUPING_CLASS_TIME,SUBSCR_GROUPING_TYPE_SUMMARY:D.SUBSCR_GROUPING_TYPE_SUMMARY,SUBSCR_GROUPING_TYPE_LAST:D.SUBSCR_GROUPING_TYPE_LAST,SUBSCR_NAMESPACE_AQ:D.SUBSCR_NAMESPACE_AQ,SUBSCR_NAMESPACE_DBCHANGE:D.SUBSCR_NAMESPACE_DBCHANGE,SUBSCR_QOS_BEST_EFFORT:D.SUBSCR_QOS_BEST_EFFORT,SUBSCR_QOS_DEREG_NFY:D.SUBSCR_QOS_DEREG_NFY,SUBSCR_QOS_QUERY:D.SUBSCR_QOS_QUERY,SUBSCR_QOS_RELIABLE:D.SUBSCR_QOS_RELIABLE,SUBSCR_QOS_ROWIDS:D.SUBSCR_QOS_ROWIDS,SYSASM:D.SYSASM,SYSBACKUP:D.SYSBACKUP,SYSDBA:D.SYSDBA,SYSDG:D.SYSDG,SYSKM:D.SYSKM,SYSOPER:D.SYSOPER,SYSPRELIM:D.SYSPRELIM,SYSRAC:D.SYSRAC,BIND_IN:D.BIND_IN,BIND_INOUT:D.BIND_INOUT,BIND_OUT:D.BIND_OUT,OUT_FORMAT_ARRAY:D.OUT_FORMAT_ARRAY,OUT_FORMAT_OBJECT:D.OUT_FORMAT_OBJECT,SODA_COLL_MAP_MODE:D.SODA_COLL_MAP_MODE,POOL_STATUS_OPEN:D.POOL_STATUS_OPEN,POOL_STATUS_DRAINING:D.POOL_STATUS_DRAINING,POOL_STATUS_CLOSED:D.POOL_STATUS_CLOSED,POOL_STATUS_RECONFIGURING:D.POOL_STATUS_RECONFIGURING,AQ_DEQ_NO_WAIT:D.AQ_DEQ_NO_WAIT,AQ_DEQ_WAIT_FOREVER:D.AQ_DEQ_WAIT_FOREVER,AQ_DEQ_MODE_BROWSE:D.AQ_DEQ_MODE_BROWSE,AQ_DEQ_MODE_LOCKED:D.AQ_DEQ_MODE_LOCKED,AQ_DEQ_MODE_REMOVE:D.AQ_DEQ_MODE_REMOVE,AQ_DEQ_MODE_REMOVE_NO_DATA:D.AQ_DEQ_MODE_REMOVE_NO_DATA,AQ_DEQ_NAV_FIRST_MSG:D.AQ_DEQ_NAV_FIRST_MSG,AQ_DEQ_NAV_NEXT_TRANSACTION:D.AQ_DEQ_NAV_NEXT_TRANSACTION,AQ_DEQ_NAV_NEXT_MSG:D.AQ_DEQ_NAV_NEXT_MSG,AQ_MSG_DELIV_MODE_PERSISTENT:D.AQ_MSG_DELIV_MODE_PERSISTENT,AQ_MSG_DELIV_MODE_BUFFERED:D.AQ_MSG_DELIV_MODE_BUFFERED,AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED:D.AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED,AQ_MSG_STATE_READY:D.AQ_MSG_STATE_READY,AQ_MSG_STATE_WAITING:D.AQ_MSG_STATE_WAITING,AQ_MSG_STATE_PROCESSED:D.AQ_MSG_STATE_PROCESSED,AQ_MSG_STATE_EXPIRED:D.AQ_MSG_STATE_EXPIRED,AQ_VISIBILITY_IMMEDIATE:D.AQ_VISIBILITY_IMMEDIATE,AQ_VISIBILITY_ON_COMMIT:D.AQ_VISIBILITY_ON_COMMIT,TPC_BEGIN_JOIN:D.TPC_BEGIN_JOIN,TPC_BEGIN_NEW:D.TPC_BEGIN_NEW,TPC_BEGIN_PROMOTE:D.TPC_BEGIN_PROMOTE,TPC_BEGIN_RESUME:D.TPC_BEGIN_RESUME,TPC_END_NORMAL:D.TPC_END_NORMAL,TPC_END_SUSPEND:D.TPC_END_SUSPEND,VECTOR_FORMAT_FLOAT32:D.VECTOR_FORMAT_FLOAT32,VECTOR_FORMAT_FLOAT64:D.VECTOR_FORMAT_FLOAT64,VECTOR_FORMAT_INT8:D.VECTOR_FORMAT_INT8,VECTOR_FORMAT_BINARY:D.VECTOR_FORMAT_BINARY,BLOB:v.DB_TYPE_BLOB,BUFFER:v.DB_TYPE_RAW,CLOB:v.DB_TYPE_CLOB,CURSOR:v.DB_TYPE_CURSOR,DATE:v.DB_TYPE_TIMESTAMP,NCLOB:v.DB_TYPE_NCLOB,NUMBER:v.DB_TYPE_NUMBER,STRING:v.DB_TYPE_VARCHAR,ARRAY:D.OUT_FORMAT_ARRAY,OBJECT:D.OUT_FORMAT_OBJECT,future:qm,get autoCommit(){return y.autoCommit},get connectionClass(){return y.connectionClass},get dbObjectAsPojo(){return y.dbObjectAsPojo},get edition(){return y.edition},get errorOnConcurrentExecute(){return y.errorOnConcurrentExecute},get events(){return y.events},get externalAuth(){return y.externalAuth},get fetchArraySize(){return y.fetchArraySize},get fetchAsBuffer(){return y.fetchAsBuffer},get fetchAsString(){return y.fetchAsString},get fetchTypeHandler(){return y.fetchTypeHandler},get lobPrefetchSize(){return y.lobPrefetchSize},get maxRows(){return y.maxRows},get oracleClientVersion(){return y.oracleClientVersion},get oracleClientVersionString(){return y.oracleClientVersionString},get outFormat(){return y.outFormat},get poolIncrement(){return y.poolIncrement},get poolMax(){return y.poolMax},get poolMaxPerShard(){return y.poolMaxPerShard},get poolMin(){return y.poolMin},get poolPingInterval(){return y.poolPingInterval},get poolPingTimeout(){return y.poolPingTimeout},get poolTimeout(){return y.poolTimeout},get prefetchRows(){return y.prefetchRows},get stmtCacheSize(){return y.stmtCacheSize},get thin(){return y.thin},get version(){return D.VERSION_MAJOR*1e4+D.VERSION_MINOR*100+D.VERSION_PATCH},get versionString(){return D.VERSION_STRING},get versionSuffix(){return D.VERSION_SUFFIX},set autoCommit(i){m.assertPropValue(typeof i=="boolean","autoCommit"),y.autoCommit=i},set connectionClass(i){m.assertPropValue(typeof i=="string","connectionClass"),y.connectionClass=i},set dbObjectAsPojo(i){m.assertPropValue(typeof i=="boolean","dbObjectAsPojo"),y.dbObjectAsPojo=i},set edition(i){m.assertPropValue(typeof i=="string","edition"),y.edition=i},set errorOnConcurrentExecute(i){m.assertPropValue(typeof i=="boolean","errorOnConcurrentExecute"),y.errorOnConcurrentExecute=i},set events(i){m.assertPropValue(typeof i=="boolean","events"),y.events=i},set externalAuth(i){m.assertPropValue(typeof i=="boolean","externalAuth"),y.externalAuth=i},set fetchArraySize(i){m.assertPropValue(Number.isInteger(i)&&i>0,"fetchArraySize"),y.fetchArraySize=i},set fetchAsBuffer(i){m.assertPropValue(Array.isArray(i),"fetchAsBuffer"),y.createFetchTypeMap(y.fetchAsString,i),y.fetchAsBuffer=i},set fetchAsString(i){m.assertPropValue(Array.isArray(i),"fetchAsString"),y.createFetchTypeMap(i,y.fetchAsBuffer),y.fetchAsString=i},set fetchTypeHandler(i){i!==void 0&&m.assertPropValue(typeof i=="function","fetchTypeHandler"),y.fetchTypeHandler=i},set lobPrefetchSize(i){m.assertPropValue(Number.isInteger(i)&&i>=0,"lobPrefetchSize"),y.lobPrefetchSize=i},set maxRows(i){m.assertPropValue(Number.isInteger(i)&&i>=0,"maxRows"),y.maxRows=i},set outFormat(i){i!==D.OUT_FORMAT_ARRAY&&i!==D.OUT_FORMAT_OBJECT&&m.throwErr(m.ERR_INVALID_PROPERTY_VALUE,"outFormat"),y.outFormat=i},set poolIncrement(i){m.assertPropValue(Number.isInteger(i)&&i>=0,"poolIncrement"),y.poolIncrement=i},set poolMax(i){m.assertPropValue(Number.isInteger(i)&&i>=0,"poolMax"),y.poolMax=i},set poolMaxPerShard(i){m.assertPropValue(Number.isInteger(i)&&i>=0,"poolMaxPerShard"),y.poolMaxPerShard=i},set poolMin(i){m.assertPropValue(Number.isInteger(i)&&i>=0,"poolMin"),y.poolMin=i},set poolPingInterval(i){m.assertPropValue(Number.isInteger(i)&&i<2**31&&i>=(-2)**31,"poolPingInterval"),y.poolPingInterval=i},set poolPingTimeout(i){m.assertPropValue(Number.isInteger(i)&&i>=0,"poolPingTimeout"),y.poolPingTimeout=i},set poolTimeout(i){m.assertPropValue(Number.isInteger(i)&&i>=0,"poolTimeout"),y.poolTimeout=i},set prefetchRows(i){m.assertPropValue(Number.isInteger(i)&&i>=0,"prefetchRows"),y.prefetchRows=i},set stmtCacheSize(i){m.assertPropValue(Number.isInteger(i)&&i>=0,"stmtCacheSize"),y.stmtCacheSize=i}}});var Fu=R((qL,Vu)=>{Vu.exports=Mu()});var QT=R(xu=>{xu.require=function(){if(typeof process=="object"&&process.versions&&process.versions.electron)try{let i=require("original-fs");if(Object.keys(i).length>0)return i}catch{}return require("fs")}});var JT=R((vL,ku)=>{ku.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var Hu=R((KL,qu)=>{var oI=QT().require(),We=require("path"),bu=JT(),_I=typeof process=="object"&&process.platform==="win32",Gu=T(i=>i&&typeof i=="object","is_Obj"),jT=new Uint32Array(256).map((i,e)=>{for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e>>>=1;return e>>>0});function Ve(i){this.sep=We.sep,this.fs=oI,Gu(i)&&Gu(i.fs)&&typeof i.fs.statSync=="function"&&(this.fs=i.fs)}T(Ve,"Utils");qu.exports=Ve;Ve.prototype.makeDir=function(i){let e=this;function t(s){let r=s.split(e.sep)[0];s.split(e.sep).forEach(function(n){if(!(!n||n.substr(-1,1)===":")){r+=e.sep+n;var _;try{_=e.fs.statSync(r)}catch{e.fs.mkdirSync(r)}if(_&&_.isFile())throw Errors.FILE_IN_THE_WAY.replace("%s",r)}})}T(t,"mkdirSync"),t(i)};Ve.prototype.writeFileTo=function(i,e,t,s){let r=this;if(r.fs.existsSync(i)){if(!t)return!1;var n=r.fs.statSync(i);if(n.isDirectory())return!1}var _=We.dirname(i);r.fs.existsSync(_)||r.makeDir(_);var a;try{a=r.fs.openSync(i,"w",438)}catch{r.fs.chmodSync(i,438),a=r.fs.openSync(i,"w",438)}if(a)try{r.fs.writeSync(a,e,0,e.length,0)}finally{r.fs.closeSync(a)}return r.fs.chmodSync(i,s||438),!0};Ve.prototype.writeFileToAsync=function(i,e,t,s,r){typeof s=="function"&&(r=s,s=void 0);let n=this;n.fs.exists(i,function(_){if(_&&!t)return r(!1);n.fs.stat(i,function(a,c){if(_&&c.isDirectory())return r(!1);var E=We.dirname(i);n.fs.exists(E,function(l){l||n.makeDir(E),n.fs.open(i,"w",438,function(N,P){N?n.fs.chmod(i,438,function(){n.fs.open(i,"w",438,function(d,S){n.fs.write(S,e,0,e.length,0,function(){n.fs.close(S,function(){n.fs.chmod(i,s||438,function(){r(!0)})})})})}):P?n.fs.write(P,e,0,e.length,0,function(){n.fs.close(P,function(){n.fs.chmod(i,s||438,function(){r(!0)})})}):n.fs.chmod(i,s||438,function(){r(!0)})})})})})};Ve.prototype.findFiles=function(i){let e=this;function t(s,r,n){typeof r=="boolean"&&(n=r,r=void 0);let _=[];return e.fs.readdirSync(s).forEach(function(a){var c=We.join(s,a);e.fs.statSync(c).isDirectory()&&n&&(_=_.concat(t(c,r,n))),(!r||r.test(c))&&_.push(We.normalize(c)+(e.fs.statSync(c).isDirectory()?e.sep:""))}),_}return T(t,"findSync"),t(i,void 0,!0)};Ve.prototype.getAttributes=function(){};Ve.prototype.setAttributes=function(){};Ve.crc32update=function(i,e){return jT[(i^e)&255]^i>>>8};Ve.crc32=function(i){typeof i=="string"&&(i=Buffer.from(i,"utf8")),jT.length||genCRCTable();let e=i.length,t=-1;for(let s=0;s<e;)t=Ve.crc32update(t,i[s++]);return~t>>>0};Ve.methodToString=function(i){switch(i){case bu.STORED:return"STORED ("+i+")";case bu.DEFLATED:return"DEFLATED ("+i+")";default:return"UNSUPPORTED ("+i+")"}};Ve.canonical=function(i){if(!i)return"";var e=We.posix.normalize("/"+i.split("\\").join("/"));return We.join(".",e)};Ve.sanitize=function(i,e){i=We.resolve(We.normalize(i));for(var t=e.split("/"),s=0,r=t.length;s<r;s++){var n=We.normalize(We.join(i,t.slice(s,r).join(We.sep)));if(n.indexOf(i)===0)return n}return We.normalize(We.join(i,We.basename(e)))};Ve.toBuffer=T(function(e){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?Buffer.from(e,"utf8"):Buffer.alloc(0)},"toBuffer");Ve.readBigUInt64LE=function(i,e){var t=Buffer.from(i.slice(e,e+8));return t.swap64(),parseInt(`0x${t.toString("hex")}`)};Ve.isWin=_I;Ve.crcTable=jT});var Ku=R((XL,vu)=>{vu.exports={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed",FILE_IN_THE_WAY:"There is a file in the way: %s",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:"File not found: %s",NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found"}});var zu=R((zL,Xu)=>{var Oi=QT().require(),Wu=require("path");Oi.existsSync=Oi.existsSync||Wu.existsSync;Xu.exports=function(i){var e=i||"",t=r(),s=null;function r(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return T(r,"newAttr"),e&&Oi.existsSync(e)?(s=Oi.statSync(e),t.directory=s.isDirectory(),t.mtime=s.mtime,t.atime=s.atime,t.executable=(73&s.mode)!==0,t.readonly=(128&s.mode)===0,t.hidden=Wu.basename(e)[0]==="."):console.warn("Invalid path: "+e),{get directory(){return t.directory},get readOnly(){return t.readonly},get hidden(){return t.hidden},get mtime(){return t.mtime},get atime(){return t.atime},get executable(){return t.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:e,isDirectory:t.directory,isReadOnly:t.readonly,isHidden:t.hidden,isExecutable:t.executable,mTime:t.mtime,aTime:t.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var ks=R((JL,lr)=>{lr.exports=Hu();lr.exports.Constants=JT();lr.exports.Errors=Ku();lr.exports.FileAttr=zu()});var Ju=R((jL,Qu)=>{var hr=ks(),B=hr.Constants;Qu.exports=function(){var i=20,e=10,t=0,s=0,r=0,n=0,_=0,a=0,c=0,E=0,l=0,N=0,P=0,d=0,S=0;i|=hr.isWin?2560:768,t|=B.FLG_EFS;var A={};function p(u){u=new Date(u),r=(u.getFullYear()-1980&127)<<25|u.getMonth()+1<<21|u.getDate()<<16|u.getHours()<<11|u.getMinutes()<<5|u.getSeconds()>>1}return T(p,"setTime"),p(+new Date),{get made(){return i},set made(u){i=u},get version(){return e},set version(u){e=u},get flags(){return t},set flags(u){t=u},get method(){return s},set method(u){switch(u){case B.STORED:this.version=10;case B.DEFLATED:default:this.version=20}s=u},get time(){return new Date((r>>25&127)+1980,(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(r&31)<<1)},set time(u){p(u)},get crc(){return n},set crc(u){n=Math.max(0,u)>>>0},get compressedSize(){return _},set compressedSize(u){_=Math.max(0,u)>>>0},get size(){return a},set size(u){a=Math.max(0,u)>>>0},get fileNameLength(){return c},set fileNameLength(u){c=u},get extraLength(){return E},set extraLength(u){E=u},get commentLength(){return l},set commentLength(u){l=u},get diskNumStart(){return N},set diskNumStart(u){N=Math.max(0,u)>>>0},get inAttr(){return P},set inAttr(u){P=Math.max(0,u)>>>0},get attr(){return d},set attr(u){d=Math.max(0,u)>>>0},get fileAttr(){return d?(d>>>0|0)>>16&4095:0},get offset(){return S},set offset(u){S=Math.max(0,u)>>>0},get encripted(){return(t&1)===1},get entryHeaderSize(){return B.CENHDR+c+E+l},get realDataOffset(){return S+B.LOCHDR+A.fnameLen+A.extraLen},get dataHeader(){return A},loadDataHeaderFromBinary:function(u){var C=u.slice(S,S+B.LOCHDR);if(C.readUInt32LE(0)!==B.LOCSIG)throw new Error(hr.Errors.INVALID_LOC);A={version:C.readUInt16LE(B.LOCVER),flags:C.readUInt16LE(B.LOCFLG),method:C.readUInt16LE(B.LOCHOW),time:C.readUInt32LE(B.LOCTIM),crc:C.readUInt32LE(B.LOCCRC),compressedSize:C.readUInt32LE(B.LOCSIZ),size:C.readUInt32LE(B.LOCLEN),fnameLen:C.readUInt16LE(B.LOCNAM),extraLen:C.readUInt16LE(B.LOCEXT)}},loadFromBinary:function(u){if(u.length!==B.CENHDR||u.readUInt32LE(0)!==B.CENSIG)throw new Error(hr.Errors.INVALID_CEN);i=u.readUInt16LE(B.CENVEM),e=u.readUInt16LE(B.CENVER),t=u.readUInt16LE(B.CENFLG),s=u.readUInt16LE(B.CENHOW),r=u.readUInt32LE(B.CENTIM),n=u.readUInt32LE(B.CENCRC),_=u.readUInt32LE(B.CENSIZ),a=u.readUInt32LE(B.CENLEN),c=u.readUInt16LE(B.CENNAM),E=u.readUInt16LE(B.CENEXT),l=u.readUInt16LE(B.CENCOM),N=u.readUInt16LE(B.CENDSK),P=u.readUInt16LE(B.CENATT),d=u.readUInt32LE(B.CENATX),S=u.readUInt32LE(B.CENOFF)},dataHeaderToBinary:function(){var u=Buffer.alloc(B.LOCHDR);return u.writeUInt32LE(B.LOCSIG,0),u.writeUInt16LE(e,B.LOCVER),u.writeUInt16LE(t,B.LOCFLG),u.writeUInt16LE(s,B.LOCHOW),u.writeUInt32LE(r,B.LOCTIM),u.writeUInt32LE(n,B.LOCCRC),u.writeUInt32LE(_,B.LOCSIZ),u.writeUInt32LE(a,B.LOCLEN),u.writeUInt16LE(c,B.LOCNAM),u.writeUInt16LE(E,B.LOCEXT),u},entryHeaderToBinary:function(){var u=Buffer.alloc(B.CENHDR+c+E+l);return u.writeUInt32LE(B.CENSIG,0),u.writeUInt16LE(i,B.CENVEM),u.writeUInt16LE(e,B.CENVER),u.writeUInt16LE(t,B.CENFLG),u.writeUInt16LE(s,B.CENHOW),u.writeUInt32LE(r,B.CENTIM),u.writeUInt32LE(n,B.CENCRC),u.writeUInt32LE(_,B.CENSIZ),u.writeUInt32LE(a,B.CENLEN),u.writeUInt16LE(c,B.CENNAM),u.writeUInt16LE(E,B.CENEXT),u.writeUInt16LE(l,B.CENCOM),u.writeUInt16LE(N,B.CENDSK),u.writeUInt16LE(P,B.CENATT),u.writeUInt32LE(d,B.CENATX),u.writeUInt32LE(S,B.CENOFF),u.fill(0,B.CENHDR),u},toJSON:function(){let u=T(function(C){return C+" bytes"},"bytes");return{made:i,version:e,flags:t,method:hr.methodToString(s),time:this.time,crc:"0x"+n.toString(16).toUpperCase(),compressedSize:u(_),size:u(a),fileNameLength:u(c),extraLength:u(E),commentLength:u(l),diskNumStart:N,inAttr:P,attr:d,offset:S,entryHeaderSize:u(B.CENHDR+c+E+l)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Zu=R(($L,ju)=>{var bs=ks(),ue=bs.Constants;ju.exports=function(){var i=0,e=0,t=0,s=0,r=0;return{get diskEntries(){return i},set diskEntries(n){i=e=n},get totalEntries(){return e},set totalEntries(n){e=i=n},get size(){return t},set size(n){t=n},get offset(){return s},set offset(n){s=n},get commentLength(){return r},set commentLength(n){r=n},get mainHeaderSize(){return ue.ENDHDR+r},loadFromBinary:function(n){if((n.length!==ue.ENDHDR||n.readUInt32LE(0)!==ue.ENDSIG)&&(n.length<ue.ZIP64HDR||n.readUInt32LE(0)!==ue.ZIP64SIG))throw new Error(bs.Errors.INVALID_END);n.readUInt32LE(0)===ue.ENDSIG?(i=n.readUInt16LE(ue.ENDSUB),e=n.readUInt16LE(ue.ENDTOT),t=n.readUInt32LE(ue.ENDSIZ),s=n.readUInt32LE(ue.ENDOFF),r=n.readUInt16LE(ue.ENDCOM)):(i=bs.readBigUInt64LE(n,ue.ZIP64SUB),e=bs.readBigUInt64LE(n,ue.ZIP64TOT),t=bs.readBigUInt64LE(n,ue.ZIP64SIZ),s=bs.readBigUInt64LE(n,ue.ZIP64OFF),r=0)},toBinary:function(){var n=Buffer.alloc(ue.ENDHDR+r);return n.writeUInt32LE(ue.ENDSIG,0),n.writeUInt32LE(0,4),n.writeUInt16LE(i,ue.ENDSUB),n.writeUInt16LE(e,ue.ENDTOT),n.writeUInt32LE(t,ue.ENDSIZ),n.writeUInt32LE(s,ue.ENDOFF),n.writeUInt16LE(r,ue.ENDCOM),n.fill(" ",ue.ENDHDR),n},toJSON:function(){let n=T(function(_,a){let c=_.toString(16).toUpperCase();for(;c.length<a;)c="0"+c;return"0x"+c},"offset");return{diskEntries:i,totalEntries:e,size:t+" bytes",offset:n(s,4),commentLength:r}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var $T=R(ZT=>{ZT.EntryHeader=Ju();ZT.MainHeader=Zu()});var eA=R((sy,$u)=>{$u.exports=function(i){var e=require("zlib"),t={chunkSize:(parseInt(i.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(i,t)},deflateAsync:function(s){var r=e.createDeflateRaw(t),n=[],_=0;r.on("data",function(a){n.push(a),_+=a.length}),r.on("end",function(){var a=Buffer.alloc(_),c=0;a.fill(0);for(var E=0;E<n.length;E++){var l=n[E];l.copy(a,c),c+=l.length}s&&s(a)}),r.end(i)}}}});var sA=R((ry,tA)=>{tA.exports=function(i){var e=require("zlib");return{inflate:function(){return e.inflateRawSync(i)},inflateAsync:function(t){var s=e.createInflateRaw(),r=[],n=0;s.on("data",function(_){r.push(_),n+=_.length}),s.on("end",function(){var _=Buffer.alloc(n),a=0;_.fill(0);for(var c=0;c<r.length;c++){var E=r[c];E.copy(_,a),a+=E.length}t&&t(_)}),s.end(i)}}}});var _A=R((iy,oA)=>{"use strict";var{randomFillSync:rA}=require("crypto"),aI=new Uint32Array(256).map((i,e)=>{for(let t=0;t<8;t++)e&1?e=e>>>1^3988292384:e>>>=1;return e>>>0}),nA=T((i,e)=>Math.imul(i,e)>>>0,"uMul"),iA=T((i,e)=>aI[(i^e)&255]^i>>>8,"crc32update"),Nr=T(()=>typeof rA=="function"?rA(Buffer.alloc(12)):Nr.node(),"genSalt");Nr.node=()=>{let i=Buffer.alloc(12),e=i.length;for(let t=0;t<e;t++)i[t]=Math.random()*256&255;return i};var gi={genSalt:Nr};function Li(i){let e=Buffer.isBuffer(i)?i:Buffer.from(i);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let t=0;t<e.length;t++)this.updateKeys(e[t])}T(Li,"Initkeys");Li.prototype.updateKeys=function(i){let e=this.keys;return e[0]=iA(e[0],i),e[1]+=e[0]&255,e[1]=nA(e[1],134775813)+1,e[2]=iA(e[2],e[1]>>>24),i};Li.prototype.next=function(){let i=(this.keys[2]|2)>>>0;return nA(i,i^1)>>8&255};function TI(i){let e=new Li(i);return function(t){let s=Buffer.alloc(t.length),r=0;for(let n of t)s[r++]=e.updateKeys(n^e.next());return s}}T(TI,"make_decrypter");function cI(i){let e=new Li(i);return function(t,s,r=0){s||(s=Buffer.alloc(t.length));for(let n of t){let _=e.next();s[r++]=n^_,e.updateKeys(n)}return s}}T(cI,"make_encrypter");function EI(i,e,t){if(!i||!Buffer.isBuffer(i)||i.length<12)return Buffer.alloc(0);let s=TI(t);if(s(i.slice(0,12))[11]!==e.crc>>>24)throw"ADM-ZIP: Wrong Password";return s(i.slice(12))}T(EI,"decrypt");function lI(i){Buffer.isBuffer(i)&&i.length>=12?gi.genSalt=function(){return i.slice(0,12)}:i==="node"?gi.genSalt=Nr.node:gi.genSalt=Nr}T(lI,"_salter");function hI(i,e,t,s=!1){i==null&&(i=Buffer.alloc(0)),Buffer.isBuffer(i)||(i=Buffer.from(i.toString()));let r=cI(t),n=gi.genSalt();n[11]=e.crc>>>24&255,s&&(n[10]=e.crc>>>16&255);let _=Buffer.alloc(i.length+12);return r(n,_),r(i,_,12)}T(hI,"encrypt");oA.exports={decrypt:EI,encrypt:hI,_salter:lI}});var aA=R(yi=>{yi.Deflater=eA();yi.Inflater=sA();yi.ZipCrypto=_A()});var tc=R((_y,TA)=>{var Ce=ks(),NI=$T(),et=Ce.Constants,ec=aA();TA.exports=function(i){var e=new NI.EntryHeader,t=Buffer.alloc(0),s=Buffer.alloc(0),r=!1,n=null,_=Buffer.alloc(0);function a(){return!i||!Buffer.isBuffer(i)?Buffer.alloc(0):(e.loadDataHeaderFromBinary(i),i.slice(e.realDataOffset,e.realDataOffset+e.compressedSize))}T(a,"getCompressedDataFromZip");function c(S){return!((e.flags&8)!==8&&Ce.crc32(S)!==e.dataHeader.crc)}T(c,"crc32OK");function E(S,A,p){if(typeof A>"u"&&typeof S=="string"&&(p=S,S=void 0),r)return S&&A&&A(Buffer.alloc(0),Ce.Errors.DIRECTORY_CONTENT_ERROR),Buffer.alloc(0);var u=a();if(u.length===0)return S&&A&&A(u),u;if(e.encripted){if(typeof p!="string"&&!Buffer.isBuffer(p))throw new Error("ADM-ZIP: Incompatible password parameter");u=ec.ZipCrypto.decrypt(u,e,p)}var C=Buffer.alloc(e.size);switch(e.method){case Ce.Constants.STORED:if(u.copy(C),c(C))return S&&A&&A(C),C;throw S&&A&&A(C,Ce.Errors.BAD_CRC),new Error(Ce.Errors.BAD_CRC);case Ce.Constants.DEFLATED:var O=new ec.Inflater(u);if(S)O.inflateAsync(function(M){M.copy(M,0),A&&(c(M)?A(M):A(M,Ce.Errors.BAD_CRC))});else{if(O.inflate(C).copy(C,0),!c(C))throw new Error(Ce.Errors.BAD_CRC+" "+t.toString());return C}break;default:throw S&&A&&A(Buffer.alloc(0),Ce.Errors.UNKNOWN_METHOD),new Error(Ce.Errors.UNKNOWN_METHOD)}}T(E,"decompress");function l(S,A){if((!n||!n.length)&&Buffer.isBuffer(i))return S&&A&&A(a()),a();if(n.length&&!r){var p;switch(e.method){case Ce.Constants.STORED:return e.compressedSize=e.size,p=Buffer.alloc(n.length),n.copy(p),S&&A&&A(p),p;default:case Ce.Constants.DEFLATED:var u=new ec.Deflater(n);if(S)u.deflateAsync(function(O){p=Buffer.alloc(O.length),e.compressedSize=O.length,O.copy(p),A&&A(p)});else{var C=u.deflate();return e.compressedSize=C.length,C}u=null;break}}else if(S&&A)A(Buffer.alloc(0));else return Buffer.alloc(0)}T(l,"compress");function N(S,A){return(S.readUInt32LE(A+4)<<4)+S.readUInt32LE(A)}T(N,"readUInt64LE");function P(S){for(var A=0,p,u,C;A<S.length;)p=S.readUInt16LE(A),A+=2,u=S.readUInt16LE(A),A+=2,C=S.slice(A,A+u),A+=u,et.ID_ZIP64===p&&d(C)}T(P,"parseExtra");function d(S){var A,p,u,C;S.length>=et.EF_ZIP64_SCOMP&&(A=N(S,et.EF_ZIP64_SUNCOMP),e.size===et.EF_ZIP64_OR_32&&(e.size=A)),S.length>=et.EF_ZIP64_RHO&&(p=N(S,et.EF_ZIP64_SCOMP),e.compressedSize===et.EF_ZIP64_OR_32&&(e.compressedSize=p)),S.length>=et.EF_ZIP64_DSN&&(u=N(S,et.EF_ZIP64_RHO),e.offset===et.EF_ZIP64_OR_32&&(e.offset=u)),S.length>=et.EF_ZIP64_DSN+4&&(C=S.readUInt32LE(et.EF_ZIP64_DSN),e.diskNumStart===et.EF_ZIP64_OR_16&&(e.diskNumStart=C))}return T(d,"parseZip64ExtendedInformation"),{get entryName(){return t.toString()},get rawEntryName(){return t},set entryName(S){t=Ce.toBuffer(S);var A=t[t.length-1];r=A===47||A===92,e.fileNameLength=t.length},get extra(){return _},set extra(S){_=S,e.extraLength=S.length,P(S)},get comment(){return s.toString()},set comment(S){s=Ce.toBuffer(S),e.commentLength=s.length},get name(){var S=t.toString();return r?S.substr(S.length-1).split("/").pop():S.split("/").pop()},get isDirectory(){return r},getCompressedData:function(){return l(!1,null)},getCompressedDataAsync:function(S){l(!0,S)},setData:function(S){n=Ce.toBuffer(S),!r&&n.length?(e.size=n.length,e.method=Ce.Constants.DEFLATED,e.crc=Ce.crc32(S),e.changed=!0):e.method=Ce.Constants.STORED},getData:function(S){return e.changed?n:E(!1,null,S)},getDataAsync:function(S,A){e.changed?S(n):E(!0,S,A)},set attr(S){e.attr=S},get attr(){return e.attr},set header(S){e.loadFromBinary(S)},get header(){return e},packHeader:function(){var S=e.entryHeaderToBinary(),A=Ce.Constants.CENHDR;return t.copy(S,A),A+=t.length,e.extraLength&&(_.copy(S,A),A+=e.extraLength),e.commentLength&&s.copy(S,A),S},toJSON:function(){let S=T(function(A){return"<"+(A&&A.length+" bytes buffer"||"null")+">"},"bytes");return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:e.toJSON(),compressedData:S(i),data:S(n)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var lA=R((Ty,EA)=>{var cA=tc(),SI=$T(),Ge=ks();EA.exports=function(i,e){var t=[],s={},r=Buffer.alloc(0),n=new SI.MainHeader,_=!1;let a=Object.assign(Object.create(null),e),{noSort:c}=a;i?N(a.readEntries):_=!0;function E(d){let S=n.diskEntries,A=n.offset;for(let p=0;p<S;p++){let u=A,C=new cA(i);C.header=i.slice(u,u+=Ge.Constants.CENHDR),C.entryName=i.slice(u,u+=C.header.fileNameLength),A+=C.header.entryHeaderSize,d(C)}}T(E,"iterateEntries");function l(){_=!0,s={},t=new Array(n.diskEntries);for(var d=n.offset,S=0;S<t.length;S++){var A=d,p=new cA(i);p.header=i.slice(A,A+=Ge.Constants.CENHDR),p.entryName=i.slice(A,A+=p.header.fileNameLength),p.header.extraLength&&(p.extra=i.slice(A,A+=p.header.extraLength)),p.header.commentLength&&(p.comment=i.slice(A,A+p.header.commentLength)),d+=p.header.entryHeaderSize,t[S]=p,s[p.entryName]=p}}T(l,"readEntries");function N(d){var S=i.length-Ge.Constants.ENDHDR,A=Math.max(0,S-65535),p=A,u=i.length,C=-1,O=0;for(S;S>=p;S--)if(i[S]===80){if(i.readUInt32LE(S)===Ge.Constants.ENDSIG){C=S,O=S,u=S+Ge.Constants.ENDHDR,p=S-Ge.Constants.END64HDR;continue}if(i.readUInt32LE(S)===Ge.Constants.END64SIG){p=A;continue}if(i.readUInt32LE(S)===Ge.Constants.ZIP64SIG){C=S,u=S+Ge.readBigUInt64LE(i,S+Ge.Constants.ZIP64SIZE)+Ge.Constants.ZIP64LEAD;break}}if(!~C)throw new Error(Ge.Errors.INVALID_FORMAT);n.loadFromBinary(i.slice(C,u)),n.commentLength&&(r=i.slice(O+Ge.Constants.ENDHDR)),d&&l()}T(N,"readMainHeader");function P(){t.length>1&&!c&&t.sort((d,S)=>d.entryName.toLowerCase().localeCompare(S.entryName.toLowerCase()))}return T(P,"sortEntries"),{get entries(){return _||l(),t},get comment(){return r.toString()},set comment(d){r=Ge.toBuffer(d),n.commentLength=r.length},getEntryCount:function(){return _?t.length:n.diskEntries},forEach:function(d){if(!_){E(d);return}t.forEach(d)},getEntry:function(d){return _||l(),s[d]||null},setEntry:function(d){_||l(),t.push(d),s[d.entryName]=d,n.totalEntries=t.length},deleteEntry:function(d){_||l();var S=s[d];if(S&&S.isDirectory){var A=this;this.getEntryChildren(S).forEach(function(p){p.entryName!==d&&A.deleteEntry(p.entryName)})}t.splice(t.indexOf(S),1),delete s[d],n.totalEntries=t.length},getEntryChildren:function(d){if(_||l(),d&&d.isDirectory){let S=[],A=d.entryName,p=A.length;return t.forEach(function(u){u.entryName.substr(0,p)===A&&S.push(u)}),S}return[]},compressToBuffer:function(){_||l(),P();let d=[],S=[],A=0,p=0;n.size=0,n.offset=0;for(let O of t){let M=O.getCompressedData();O.header.offset=p;let Q=O.header.dataHeaderToBinary(),b=O.rawEntryName.length,G=Buffer.alloc(b+O.extra.length);O.rawEntryName.copy(G,0),G.copy(O.extra,b);let Se=Q.length+G.length+M.length;p+=Se,d.push(Q),d.push(G),d.push(M);let Ae=O.packHeader();S.push(Ae),n.size+=Ae.length,A+=Se+Ae.length}A+=n.mainHeaderSize,n.offset=p,p=0;let u=Buffer.alloc(A);for(let O of d)O.copy(u,p),p+=O.length;for(let O of S)O.copy(u,p),p+=O.length;let C=n.toBinary();return r&&r.copy(C,Ge.Constants.ENDHDR),C.copy(u,p),u},toAsyncBuffer:function(d,S,A,p){try{_||l(),P();let u=[],C=[],O=0,M=0;n.size=0,n.offset=0;let Q=T(function(b){if(b.length){let G=b.pop(),Se=G.entryName+G.extra.toString();A&&A(Se),G.getCompressedDataAsync(function(Ae){p&&p(Se),G.header.offset=M;let Et=G.header.dataHeaderToBinary(),pt=Buffer.alloc(Se.length,Se),lt=Et.length+pt.length+Ae.length;M+=lt,u.push(Et),u.push(pt),u.push(Ae);let Vt=G.packHeader();C.push(Vt),n.size+=Vt.length,O+=lt+Vt.length,Q(b)})}else{O+=n.mainHeaderSize,n.offset=M,M=0;let G=Buffer.alloc(O);u.forEach(function(Ae){Ae.copy(G,M),M+=Ae.length}),C.forEach(function(Ae){Ae.copy(G,M),M+=Ae.length});let Se=n.toBinary();r&&r.copy(Se,Ge.Constants.ENDHDR),Se.copy(G,M),d(G)}},"compress2Buffer");Q(t)}catch(u){S(u)}}}}});var NA=R((Ey,hA)=>{var ge=ks(),Pt=require("path"),uI=tc(),AI=lA(),Ts=T((i,e)=>typeof i=="boolean"?i:e,"get_Bool"),sc=T((i,e)=>typeof i=="string"?i:e,"get_Str"),fI={noSort:!1,readEntries:!1,method:ge.Constants.NONE,fs:null};hA.exports=function(i,e){let t=null,s=Object.assign(Object.create(null),fI);i&&typeof i=="object"&&(i instanceof Uint8Array||(Object.assign(s,i),i=s.input?s.input:void 0,s.input&&delete s.input),Buffer.isBuffer(i)&&(t=i,s.method=ge.Constants.BUFFER,i=void 0)),Object.assign(s,e);let r=new ge(s);if(i&&typeof i=="string")if(r.fs.existsSync(i))s.method=ge.Constants.FILE,s.filename=i,t=r.fs.readFileSync(i);else throw new Error(ge.Errors.INVALID_FILENAME);let n=new AI(t,s),{canonical:_,sanitize:a}=ge;function c(l){if(l&&n){var N;if(typeof l=="string"&&(N=n.getEntry(l)),typeof l=="object"&&typeof l.entryName<"u"&&typeof l.header<"u"&&(N=n.getEntry(l.entryName)),N)return N}return null}T(c,"getEntry");function E(l){let{join:N,normalize:P,sep:d}=Pt.posix;return N(".",P(d+l.split("\\").join(d)+d))}return T(E,"fixPath"),{readFile:function(l,N){var P=c(l);return P&&P.getData(N)||null},readFileAsync:function(l,N){var P=c(l);P?P.getDataAsync(N):N(null,"getEntry failed for:"+l)},readAsText:function(l,N){var P=c(l);if(P){var d=P.getData();if(d&&d.length)return d.toString(N||"utf8")}return""},readAsTextAsync:function(l,N,P){var d=c(l);d?d.getDataAsync(function(S,A){if(A){N(S,A);return}S&&S.length?N(S.toString(P||"utf8")):N("")}):N("")},deleteFile:function(l){var N=c(l);N&&n.deleteEntry(N.entryName)},addZipComment:function(l){n.comment=l},getZipComment:function(){return n.comment||""},addZipEntryComment:function(l,N){var P=c(l);P&&(P.comment=N)},getZipEntryComment:function(l){var N=c(l);return N&&N.comment||""},updateFile:function(l,N){var P=c(l);P&&P.setData(N)},addLocalFile:function(l,N,P,d){if(r.fs.existsSync(l)){N=N?E(N):"";var S=l.split("\\").join("/").split("/").pop();N+=P||S;let A=r.fs.statSync(l);this.addFile(N,r.fs.readFileSync(l),d,A)}else throw new Error(ge.Errors.FILE_NOT_FOUND.replace("%s",l))},addLocalFolder:function(l,N,P){if(P instanceof RegExp?P=function(d){return function(S){return d.test(S)}}(P):typeof P!="function"&&(P=T(function(){return!0},"filter")),N=N?E(N):"",l=Pt.normalize(l),r.fs.existsSync(l)){let d=r.findFiles(l),S=this;d.length&&d.forEach(function(A){var p=Pt.relative(l,A).split("\\").join("/");if(P(p)){var u=r.fs.statSync(A);u.isFile()?S.addFile(N+p,r.fs.readFileSync(A),"",u):S.addFile(N+p+"/",Buffer.alloc(0),"",u)}})}else throw new Error(ge.Errors.FILE_NOT_FOUND.replace("%s",l))},addLocalFolderAsync:function(l,N,P,d){d instanceof RegExp?d=function(A){return function(p){return A.test(p)}}(d):typeof d!="function"&&(d=T(function(){return!0},"filter")),P=P?E(P):"",l=Pt.normalize(l);var S=this;r.fs.open(l,"r",function(A){if(A&&A.code==="ENOENT")N(void 0,ge.Errors.FILE_NOT_FOUND.replace("%s",l));else if(A)N(void 0,A);else{var p=r.findFiles(l),u=-1,C=T(function(){if(u+=1,u<p.length){var O=p[u],M=Pt.relative(l,O).split("\\").join("/");M=M.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),d(M)?r.fs.stat(O,function(Q,b){Q&&N(void 0,Q),b.isFile()?r.fs.readFile(O,function(G,Se){G?N(void 0,G):(S.addFile(P+M,Se,"",b),C())}):(S.addFile(P+M+"/",Buffer.alloc(0),"",b),C())}):C()}else N(!0,void 0)},"next");C()}})},addLocalFolderPromise:function(l,N){return new Promise((P,d)=>{let{filter:S,zipPath:A}=Object.assign({},N);this.addLocalFolderAsync(l,(p,u)=>{u&&d(u),p&&P(this)},A,S)})},addFile:function(l,N,P,d){let S=c(l),A=S!=null;A||(S=new uI,S.entryName=l),S.comment=P||"";let p=typeof d=="object"&&d instanceof r.fs.Stats;p&&(S.header.time=d.mtime);var u=S.isDirectory?16:0;if(!ge.isWin){let C=S.isDirectory?16384:32768;p?C|=4095&d.mode:typeof d=="number"?C|=4095&d:C|=S.isDirectory?493:420,u=(u|C<<16)>>>0}S.attr=u,S.setData(N),A||n.setEntry(S)},getEntries:function(){return n?n.entries:[]},getEntry:function(l){return c(l)},getEntryCount:function(){return n.getEntryCount()},forEach:function(l){return n.forEach(l)},extractEntryTo:function(l,N,P,d,S,A){d=Ts(d,!1),S=Ts(S,!1),P=Ts(P,!0),A=sc(A,sc(S,void 0));var p=c(l);if(!p)throw new Error(ge.Errors.NO_ENTRY);var u=_(p.entryName),C=a(N,A&&!p.isDirectory?A:P?u:Pt.basename(u));if(p.isDirectory){var O=n.getEntryChildren(p);return O.forEach(function(b){if(b.isDirectory)return;var G=b.getData();if(!G)throw new Error(ge.Errors.CANT_EXTRACT_FILE);var Se=_(b.entryName),Ae=a(N,P?Se:Pt.basename(Se));let Et=S?b.header.fileAttr:void 0;r.writeFileTo(Ae,G,d,Et)}),!0}var M=p.getData();if(!M)throw new Error(ge.Errors.CANT_EXTRACT_FILE);if(r.fs.existsSync(C)&&!d)throw new Error(ge.Errors.CANT_OVERRIDE);let Q=S?l.header.fileAttr:void 0;return r.writeFileTo(C,M,d,Q),!0},test:function(l){if(!n)return!1;for(var N in n.entries)try{if(N.isDirectory)continue;var P=n.entries[N].getData(l);if(!P)return!1}catch{return!1}return!0},extractAllTo:function(l,N,P,d){if(N=Ts(N,!1),d=sc(P,d),P=Ts(P,!1),!n)throw new Error(ge.Errors.NO_ZIP);n.entries.forEach(function(S){var A=a(l,_(S.entryName.toString()));if(S.isDirectory){r.makeDir(A);return}var p=S.getData(d);if(!p)throw new Error(ge.Errors.CANT_EXTRACT_FILE);let u=P?S.header.fileAttr:void 0;r.writeFileTo(A,p,N,u);try{r.fs.utimesSync(A,S.header.time,S.header.time)}catch{throw new Error(ge.Errors.CANT_EXTRACT_FILE)}})},extractAllToAsync:function(l,N,P,d){if(d||(d=T(function(){},"callback")),N=Ts(N,!1),typeof P=="function"&&!d&&(d=P),P=Ts(P,!1),!n){d(new Error(ge.Errors.NO_ZIP));return}l=Pt.resolve(l);let S=T(O=>a(l,Pt.normalize(_(O.entryName.toString()))),"getPath"),A=T((O,M)=>new Error(O+': "'+M+'"'),"getError"),p=[],u=new Set;n.entries.forEach(O=>{O.isDirectory?p.push(O):u.add(O)});for(let O of p){let M=S(O),Q=P?O.header.fileAttr:void 0;try{r.makeDir(M),Q&&r.fs.chmodSync(M,Q),r.fs.utimesSync(M,O.header.time,O.header.time)}catch{d(A("Unable to create folder",M))}}let C=T(()=>{u.size===0&&d()},"done");for(let O of u.values()){let M=Pt.normalize(_(O.entryName.toString())),Q=a(l,M);O.getDataAsync(function(b,G){if(G){d(new Error(G));return}if(!b)d(new Error(ge.Errors.CANT_EXTRACT_FILE));else{let Se=P?O.header.fileAttr:void 0;r.writeFileToAsync(Q,b,N,Se,function(Ae){if(!Ae){d(A("Unable to write file",Q));return}r.fs.utimes(Q,O.header.time,O.header.time,function(Et){if(Et){d(A("Unable to set times",Q));return}u.delete(O),C()})})}})}C()},writeZip:function(l,N){if(arguments.length===1&&typeof l=="function"&&(N=l,l=""),!l&&s.filename&&(l=s.filename),!!l){var P=n.compressToBuffer();if(P){var d=r.writeFileTo(l,P,!0);typeof N=="function"&&N(d?null:new Error("failed"),"")}}},writeZipPromise:function(l,N){let{overwrite:P,perm:d}=Object.assign({overwrite:!0},N);return new Promise((S,A)=>{!l&&s.filename&&(l=s.filename),l||A("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(p=>{let u=T(C=>C?S(C):A("ADM-ZIP: Wasn't able to write zip file"),"ret");r.writeFileToAsync(l,p,P,d,u)},A)})},toBufferPromise:function(){return new Promise((l,N)=>{n.toAsyncBuffer(l,N)})},toBuffer:function(l,N,P,d){return this.valueOf=2,typeof l=="function"?(n.toAsyncBuffer(l,N,P,d),null):n.compressToBuffer()}}}});var AA=R((hy,uA)=>{"use strict";var dI=require("crypto"),Gs=require("fs"),SA=require("path"),PI=NA(),pI=T((i,e)=>new Promise((t,s)=>{try{let r=new PI(i);if(!r)return s(new Error("Link to zip file is broken or system has no permissions to "+i+" folder"));let n=r.getEntries();return Object.keys(n).length===0?s(new Error("Zip file is empty")):(r.extractAllTo(e,!0),t(e))}catch(r){s(r)}}),"extractZip"),RI=T((i,e)=>{if(!Gs.existsSync(i))return;let t=/DIRECTORY\=\".+?\"/i,s=Gs.readFileSync(i).toString();t.test(s)&&(s=s.replace(t,`DIRECTORY="${e}"`),Gs.writeFileSync(i,s))},"replaceSqlNetOraDirectoryPath"),mI=T(i=>new Promise((e,t)=>{let s=T(_=>dI.createHash("md5").update(_,"utf-8").digest("hex"),"getHash"),r=Gs.createReadStream(i),n="";r.on("data",_=>{n+=_}),r.on("error",_=>{t(_)}),r.on("end",function(){e(s(n))})}),"getHashByFile"),II=T(async({walletFile:i,tempFolder:e,name:t})=>{if(!Gs.existsSync(i))return;let s=await mI(i),r=SA.join(e,t+"_"+s);if(Gs.existsSync(r))return r;await pI(i,r);let n=SA.join(r,"sqlnet.ora");return RI(n,r),r},"extractWallet");uA.exports=II});var fA=R(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});var DI=function(){function i(e,t){t===void 0&&(t=0),this.source=e,this.position=t}return T(i,"LexerState"),i.prototype.copy=function(){return new i(this.source,this.position)},i}();rc.default=DI});var pA=R(cs=>{"use strict";var CI=cs&&cs.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(e,t){i(e,t);function s(){this.constructor=e}T(s,"__"),e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}();Object.defineProperty(cs,"__esModule",{value:!0});var dA=function(){function i(e,t,s,r,n,_){this.type=e,this.match=t,this.groups=s,this.start=r,this.end=n,this.lexer=_}return T(i,"Token"),i.prototype.strpos=function(){var e=this.lexer.strpos(this.start),t=this.lexer.strpos(this.end);return{start:e,end:t}},i.prototype.isEof=function(){return!1},i}();cs.default=dA;var PA=function(i){CI(e,i);function e(t){var s=this,r=t.source.length;return s=i.call(this,null,"(eof)",[],r,r,t)||this,s}return T(e,"EOFToken"),e.prototype.isEof=function(){return!0},e}(dA);cs.EOFToken=PA;cs.EOF=function(i){return new PA(i)}});var RA=R(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});function OI(i){return new RegExp(i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))}T(OI,"toRegExp");function gI(i){return typeof i=="string"&&(i=OI(i)),i.source.startsWith("^")?i:new RegExp("^"+i.source,i.flags)}T(gI,"normalize");function LI(i,e){for(var t=0,s=0,r=i;s<r.length;s++){var n=r[s],_=e(n,t++);if(_)return{item:n,result:_}}}T(LI,"first");var yI=function(){function i(){this.tokenTypes=[]}return T(i,"TokenTypes"),i.prototype.disable=function(e){return this.enable(e,!1)},i.prototype.enable=function(e,t){return t===void 0&&(t=!0),this.tokenTypes.filter(function(s){return s.type==e}).forEach(function(s){return s.enabled=t}),this},i.prototype.isEnabled=function(e){var t=this.tokenTypes.filter(function(s){return s.type==e});if(t.length==0)throw new Error("Token of type "+e+" does not exists");return t[0].enabled},i.prototype.peek=function(e,t){var s=e.substr(t);return LI(this.tokenTypes.filter(function(r){return r.enabled}),function(r){return r.regex.lastIndex=0,r.regex.exec(s)})},i.prototype.token=function(e,t,s){return s===void 0&&(s=!1),this.tokenTypes.push({type:e,regex:gI(t),enabled:!0,skip:s}),this},i}();ic.default=yI});var IA=R(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});var nc=fA();Es.LexerState=nc.default;var Bi=pA();Es.Token=Bi.default;Es.EOF=Bi.EOF;var mA=RA();Es.TokenTypes=mA.default;var BI=function(){function i(e){e===void 0&&(e=""),this._state=new nc.default(e),this._tokenTypes=new mA.default}return T(i,"Lexer"),Object.defineProperty(i.prototype,"position",{get:function(){return this._state.position},set:function(e){this._state.position=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this._state.source},set:function(e){this._state=new nc.default(e)},enumerable:!0,configurable:!0}),i.prototype.attachTo=function(e){this._state=e._state},i.prototype.disable=function(e){return this._tokenTypes.disable(e),this},i.prototype.enable=function(e,t){return this._tokenTypes.enable(e,t),this},i.prototype.expect=function(e){var t=this.next();if(t.type!=e){var s=t.strpos();throw new Error("Expected "+e+(t?", got "+t.type:"")+" at "+s.start.line+":"+s.start.column)}return t},i.prototype.isEnabled=function(e){return this._tokenTypes.isEnabled(e)},i.prototype.next=function(){try{var e=this.peek();return this._state.position=e.end,e}catch(t){throw this._state.position=t.end,t}},i.prototype.peek=function(e){var t=this;e===void 0&&(e=this._state.position);var s=T(function(l){if(l===void 0&&(l=e),l>=t._state.source.length)return Bi.EOF(t);var N=t._tokenTypes.peek(t._state.source,l);return N?N.item.skip?s(l+N.result[0].length):new Bi.default(N.item.type,N.result[0],N.result.map(function(P){return P}),l,l+N.result[0].length,t):null},"read"),r=s();if(r)return r;var n=this._state.source.substring(e,e+1);try{this.peek(e+1)}catch(l){n+=l.unexpected}var _=this.strpos(e),a=_.line,c=_.column,E=new Error("Unexpected input: "+n+" at ("+a+":"+c+")");throw E.unexpected=n,E.end=e+n.length,E},i.prototype.strpos=function(e){var t=this._state.source.substring(0,e).split(/\r?\n/);Array.isArray(t)||(t=[t]);var s=t.length,r=t[t.length-1].length+1;return{line:s,column:r}},i.prototype.toArray=function(){var e=this._state.copy();this._state.position=0;for(var t=[],s;!(s=this.next()).isEof();)t.push(s);return this._state=e,t},i.prototype.token=function(e,t,s){return this._tokenTypes.token(e,t,s),this},i.prototype.keyword=function(e){return this.token(e,new RegExp(e+"(?=\\W|$)"))},i.prototype.operator=function(e){var t=new String(e).valueOf();return this.token(e,t)},i}();Es.default=BI});var CA=R((my,DA)=>{DA.exports=IA()});var LA=R((Iy,gA)=>{"use strict";var wI=CA().default;function OA(i,e={}){i.expect("(");let t=i.expect("WORD").match;i.expect("=");let s;if(i.peek().type==="("){s={};do Object.assign(s,OA(i,e));while(i.peek().type==="(")}else s=i.expect("WORD").match;return i.expect(")"),{...e,[t]:s}}T(OA,"parseObject");var YI=T(i=>{let e=i.expect("WORD").match;return i.expect("="),{name:e,data:OA(i)}},"parseConnection"),UI=T(i=>{let e=new wI(i).token("$SKIP_COMMENT",/#[^\n]*/,!0).token("$SKIP_WS",/\s+/,!0).token("WORD",/([a-z0-9._-]+|["'][\s\S]*?["'])/i).token("(",/\(/).token(")",/\)/).token("=",/=/),t={};for(;e.peek().type!==null;){let s=YI(e);t[s.name]=s}return t},"parseTns");gA.exports=UI});var BA=R((Cy,yA)=>{"use strict";var ac=class ac{cache;cacheValue;cycle;ifNotExist;increment;maxValue;minValue;sequenceName;start;sharing;order;keep;scale;scaleExtend;shard;shardExtend;type};T(ac,"Sequence");var oc=ac,Tc=class Tc{sharing;ddlScript;sequenceName;minValue;maxValue;increment;cycle;order;cacheValue;scale;extend;shard;type;keep};T(Tc,"SequenceDto");var _c=Tc;yA.exports={Sequence:oc,SequenceDto:_c}});var YA=R((wi,wA)=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.default=function(i){return function(...e){var t=e.pop();return i.call(this,e,t)}};wA.exports=wi.default});var VA=R(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.fallback=UA;jt.wrap=MA;var MI=jt.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,VI=jt.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,FI=jt.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function UA(i){setTimeout(i,0)}T(UA,"fallback");function MA(i){return(e,...t)=>i(()=>e(...t))}T(MA,"wrap");var Sr;MI?Sr=queueMicrotask:VI?Sr=setImmediate:FI?Sr=process.nextTick:Sr=UA;jt.default=MA(Sr)});var GA=R((Yi,bA)=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.default=HI;var xI=YA(),kI=kA(xI),bI=VA(),GI=kA(bI),qI=Ui();function kA(i){return i&&i.__esModule?i:{default:i}}T(kA,"_interopRequireDefault");function HI(i){return(0,qI.isAsync)(i)?function(...e){let t=e.pop(),s=i.apply(this,e);return FA(s,t)}:(0,kI.default)(function(e,t){var s;try{s=i.apply(this,e)}catch(r){return t(r)}if(s&&typeof s.then=="function")return FA(s,t);t(null,s)})}T(HI,"asyncify");function FA(i,e){return i.then(t=>{xA(e,null,t)},t=>{xA(e,t&&(t instanceof Error||t.message)?t:new Error(t))})}T(FA,"handlePromise");function xA(i,e,t){try{i(e,t)}catch(s){(0,GI.default)(r=>{throw r},s)}}T(xA,"invokeCallback");bA.exports=Yi.default});var Ui=R(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.isAsyncIterable=Ut.isAsyncGenerator=Ut.isAsync=void 0;var vI=GA(),KI=WI(vI);function WI(i){return i&&i.__esModule?i:{default:i}}T(WI,"_interopRequireDefault");function qA(i){return i[Symbol.toStringTag]==="AsyncFunction"}T(qA,"isAsync");function XI(i){return i[Symbol.toStringTag]==="AsyncGenerator"}T(XI,"isAsyncGenerator");function zI(i){return typeof i[Symbol.asyncIterator]=="function"}T(zI,"isAsyncIterable");function QI(i){if(typeof i!="function")throw new Error("expected a function");return qA(i)?(0,KI.default)(i):i}T(QI,"wrapAsync");Ut.default=QI;Ut.isAsync=qA;Ut.isAsyncGenerator=XI;Ut.isAsyncIterable=zI});var vA=R((Mi,HA)=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.default=$I;var JI=Ui(),jI=ZI(JI);function ZI(i){return i&&i.__esModule?i:{default:i}}T(ZI,"_interopRequireDefault");function $I(i,e,t,s){e=e||[];var r=[],n=0,_=(0,jI.default)(t);return i(e,(a,c,E)=>{var l=n++;_(a,(N,P)=>{r[l]=P,E(N)})},a=>{s(a,r)})}T($I,"_asyncMap");HA.exports=Mi.default});var WA=R((Vi,KA)=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.default=eD;function eD(i){function e(...t){if(i!==null){var s=i;i=null,s.apply(this,t)}}return T(e,"wrapper"),Object.assign(e,i),e}T(eD,"once");KA.exports=Vi.default});var zA=R((Fi,XA)=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.default=tD;function tD(i){return i&&typeof i.length=="number"&&i.length>=0&&i.length%1===0}T(tD,"isArrayLike");XA.exports=Fi.default});var JA=R((xi,QA)=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.default=function(i){return i[Symbol.iterator]&&i[Symbol.iterator]()};QA.exports=xi.default});var $A=R((ki,ZA)=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.default=TD;var sD=zA(),rD=jA(sD),iD=JA(),nD=jA(iD);function jA(i){return i&&i.__esModule?i:{default:i}}T(jA,"_interopRequireDefault");function oD(i){var e=-1,t=i.length;return T(function(){return++e<t?{value:i[e],key:e}:null},"next")}T(oD,"createArrayIterator");function _D(i){var e=-1;return T(function(){var s=i.next();return s.done?null:(e++,{value:s.value,key:e})},"next")}T(_D,"createES2015Iterator");function aD(i){var e=i?Object.keys(i):[],t=-1,s=e.length;return T(function r(){var n=e[++t];return n==="__proto__"?r():t<s?{value:i[n],key:n}:null},"next")}T(aD,"createObjectIterator");function TD(i){if((0,rD.default)(i))return oD(i);var e=(0,nD.default)(i);return e?_D(e):aD(i)}T(TD,"createIterator");ZA.exports=ki.default});var tf=R((bi,ef)=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.default=cD;function cD(i){return function(...e){if(i===null)throw new Error("Callback was already called.");var t=i;i=null,t.apply(this,e)}}T(cD,"onlyOnce");ef.exports=bi.default});var cc=R((Gi,sf)=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});var ED={};Gi.default=ED;sf.exports=Gi.default});var nf=R((qi,rf)=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.default=SD;var lD=cc(),hD=ND(lD);function ND(i){return i&&i.__esModule?i:{default:i}}T(ND,"_interopRequireDefault");function SD(i,e,t,s){let r=!1,n=!1,_=!1,a=0,c=0;function E(){a>=e||_||r||(_=!0,i.next().then(({value:P,done:d})=>{if(!(n||r)){if(_=!1,d){r=!0,a<=0&&s(null);return}a++,t(P,c,l),c++,E()}}).catch(N))}T(E,"replenish");function l(P,d){if(a-=1,!n){if(P)return N(P);if(P===!1){r=!0,n=!0;return}if(d===hD.default||r&&a<=0)return r=!0,s(null);E()}}T(l,"iterateeCallback");function N(P){n||(_=!1,r=!0,s(P))}T(N,"handleError"),E()}T(SD,"asyncEachOfLimit");rf.exports=qi.default});var Tf=R((Hi,af)=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});var uD=WA(),AD=ur(uD),fD=$A(),dD=ur(fD),PD=tf(),pD=ur(PD),of=Ui(),RD=nf(),_f=ur(RD),mD=cc(),ID=ur(mD);function ur(i){return i&&i.__esModule?i:{default:i}}T(ur,"_interopRequireDefault");Hi.default=i=>(e,t,s)=>{if(s=(0,AD.default)(s),i<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return s(null);if((0,of.isAsyncGenerator)(e))return(0,_f.default)(e,i,t,s);if((0,of.isAsyncIterable)(e))return(0,_f.default)(e[Symbol.asyncIterator](),i,t,s);var r=(0,dD.default)(e),n=!1,_=!1,a=0,c=!1;function E(N,P){if(!_)if(a-=1,N)n=!0,s(N);else if(N===!1)n=!0,_=!0;else{if(P===ID.default||n&&a<=0)return n=!0,s(null);c||l()}}T(E,"iterateeCallback");function l(){for(c=!0;a<i&&!n;){var N=r();if(N===null){n=!0,a<=0&&s(null);return}a+=1,t(N.value,N.key,(0,pD.default)(E))}c=!1}T(l,"replenish"),l()};af.exports=Hi.default});var Ef=R((vi,cf)=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.default=DD;function DD(i,e){if(e||(e=i.length),!e)throw new Error("arity is undefined");function t(...s){return typeof s[e-1]=="function"?i.apply(this,s):new Promise((r,n)=>{s[e-1]=(_,...a)=>{if(_)return n(_);r(a.length>1?a:a[0])},i.apply(this,s)})}return T(t,"awaitable"),t}T(DD,"awaitify");cf.exports=vi.default});var hf=R((Ki,lf)=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});var CD=vA(),OD=Ec(CD),gD=Tf(),LD=Ec(gD),yD=Ef(),BD=Ec(yD);function Ec(i){return i&&i.__esModule?i:{default:i}}T(Ec,"_interopRequireDefault");function wD(i,e,t,s){return(0,OD.default)((0,LD.default)(e),i,t,s)}T(wD,"mapLimit");Ki.default=(0,BD.default)(wD,4);lf.exports=Ki.default});var uf=R((vy,Sf)=>{"use strict";var{Sequence:qy,SequenceDto:Hy}=BA(),YD=hf(),UD=/(?<=START WITH)(\s+)([\w]+)(?=\s+)?/,MD=/\s+LINK$/,qe={true:"Y",false:"N"},ae={cache:"cache",cycle:"cycle",extend:"extend",global:"global",keep:"keep",noCache:"nocache",noCycle:"nocycle",noExtend:"noextend",noKeep:"nokeep",noOrder:"noorder",noScale:"noscale",noShard:"noshard",order:"order",scale:"scale",scaleExtend:"scaleExtend",session:"session",shard:"shard",sharing:"sharing",type:"type"},Nf={[ae.cycle]:{[qe.true]:ae.cycle,[qe.false]:ae.noCycle},[ae.order]:{[qe.true]:ae.order,[qe.false]:ae.noOrder},[ae.shard]:{[qe.true]:ae.shard,[qe.false]:""},[ae.scale]:{[qe.true]:ae.scale,[qe.false]:ae.noScale},[ae.type]:{[qe.true]:ae.session,[qe.false]:ae.global},[ae.keep]:{[qe.true]:ae.keep,[qe.false]:ae.noKeep},[ae.extend]:{[qe.true]:ae.extend,[qe.false]:ae.noExtend}},VD=T(async({schema:i,allDDLs:e,execute:t,logger:s})=>{try{s.log("info",{message:"Start getting sequences"},"Getting sequences");let r=(await t(`
				SELECT JSON_OBJECT(
				    'sharing'      VALUE ALL_OBJECTS.SHARING,
				    'sequenceName' VALUE ALL_SEQUENCES.SEQUENCE_NAME,
				    'minValue'     VALUE ALL_SEQUENCES.MIN_VALUE,
				    'maxValue'     VALUE ALL_SEQUENCES.MAX_VALUE,
				    'increment'    VALUE ALL_SEQUENCES.INCREMENT_BY,
				    'cycle'        VALUE ALL_SEQUENCES.CYCLE_FLAG,
				    'order'        VALUE ALL_SEQUENCES.ORDER_FLAG,
				    'cacheValue'   VALUE ALL_SEQUENCES.CACHE_SIZE,
				    'scale'        VALUE ALL_SEQUENCES.SCALE_FLAG,
				    'extend'       VALUE ALL_SEQUENCES.EXTEND_FLAG,
				    'shard'        VALUE ALL_SEQUENCES.SHARDED_FLAG,
				    'type'         VALUE ALL_SEQUENCES.SESSION_FLAG,
				    'keep'         VALUE ALL_SEQUENCES.KEEP_VALUE
				)
				FROM ALL_OBJECTS
				LEFT JOIN ALL_SEQUENCES
				  ON ALL_SEQUENCES.SEQUENCE_OWNER = ALL_OBJECTS.OWNER
				  AND ALL_SEQUENCES.SEQUENCE_NAME = ALL_OBJECTS.OBJECT_NAME
				LEFT JOIN ALL_TAB_IDENTITY_COLS
				  ON ALL_TAB_IDENTITY_COLS.SEQUENCE_NAME = ALL_SEQUENCES.SEQUENCE_NAME
				  AND ALL_TAB_IDENTITY_COLS.OWNER = ALL_OBJECTS.OWNER
				-- take only sequences that are not associated with identity columns
				WHERE ALL_OBJECTS.OBJECT_TYPE = 'SEQUENCE' AND ALL_TAB_IDENTITY_COLS.COLUMN_NAME IS NULL
				AND ALL_OBJECTS.OWNER = '${i}'
     		 `)).map(([a])=>JSON.parse(a));if(s.log("info",{message:"Finish getting sequences",count:(r==null?void 0:r.length)||0},"Getting sequences"),!(r!=null&&r.length))return[];let n=KD({sequenceDtos:r,allDDLs:e});s.log("info",{message:"Filtering of sequences used in tables and views finished",usedSequencesCount:(n==null?void 0:n.length)||0},"Getting sequences");let _=await FD({schema:i,namesOfSequences:n.map(a=>a.sequenceName),execute:t,logger:s});return n.map(a=>{let c=_[a.sequenceName]||"";return{...a,ddlScript:c}})}catch(r){s.progress({message:"Warning: Getting sequences failed: sequences are not reverse-engineered.",containerName:i,entityName:""});let{message:n,stack:_,...a}=r;return s.log("error",{message:"Cannot get sequences",error:{message:n,stack:_,err:a}},"Getting sequences"),[]}},"getSchemaSequenceDtos"),FD=T(async({schema:i,namesOfSequences:e,execute:t,logger:s})=>{try{s.log("info",{message:"Start getting sequences DDL"},"Getting DDL of sequences");let r=YD(e,50,async _=>{var a,c;try{let E=await t(`SELECT JSON_OBJECT('ddl' VALUE DBMS_METADATA.GET_DDL('SEQUENCE', '${_}', '${i}')) FROM DUAL`);return[_,((c=JSON.parse(((a=E==null?void 0:E[0])==null?void 0:a[0])||"{}"))==null?void 0:c.ddl)||""]}catch(E){let{message:l,stack:N,...P}=E;return s.log("error",{sequenceName:_,schema:i,message:l,stack:N,err:P},"Getting sequence DDL ERROR"),[_,""]}}),n=await Promise.race([r,vD(3e4,"Timeout error on getting sequences DDL.")]);return s.log("info",{message:"Finish getting sequences DDL",count:(n==null?void 0:n.length)||0},"Getting DDL of sequences"),n!=null&&n.length?Object.fromEntries(n):{}}catch(r){s.progress({message:"Warning: Getting DDL of sequences failed: sequences are created but the \u201Cstart with\u201D property is defaulted to its \u201Cmin/max\u201D value.",containerName:i,entityName:""});let{message:n,stack:_,...a}=r;return s.log("error",{message:"Cannot get sequences DDL",error:{message:n,stack:_,err:a}},"Getting DDL of sequences"),{}}},"getSchemaSequenceDdl"),xD=T(({execute:i})=>async({schema:e,allDDLs:t,logger:s})=>(await VD({schema:e,allDDLs:t,execute:i,logger:s})).map(n=>{let _=kD({sequenceDto:n}),a=GD({sequenceDto:n}),c=qD({sequenceDto:n}),E=bD({sequenceDto:n}),l=n.cacheValue?ae.cache:ae.noCache;return{sequenceName:n.sequenceName,minValue:n.minValue,maxValue:n.maxValue,increment:n.increment,cacheValue:n.cacheValue,cache:l,sharing:_,...a,...c,...E}}),"getSchemaSequences"),kD=T(({sequenceDto:i})=>{var e,t;return(t=(e=i.sharing)==null?void 0:e.replace(MD,""))==null?void 0:t.toLowerCase()},"getSequenceSharing"),bD=T(({sequenceDto:i})=>{let e=i[ae.scale],t=i[ae.shard],s=i[ae.extend],r=Nf[ae.extend][s],n=e===qe.true?r:"",_=t===qe.true?r:"";return{scaleExtend:n,shardExtend:_}},"getExtendOptions"),GD=T(({sequenceDto:i})=>Object.entries(Nf).reduce((e,[t,s])=>({...e,[t]:s[i[t]]}),{}),"getBooleanOptions"),qD=T(({sequenceDto:i})=>({start:HD({sequenceDto:i})}),"getOptionsFromDdl"),HD=T(({sequenceDto:i})=>{var s;let e=i.ddlScript;if(!e.includes("START WITH"))return i.minValue<i.maxValue?i.minValue:i.maxValue;let t=(s=e.match(UD))==null?void 0:s[2];return isNaN(Number(t))?t:Number(t)},"getStartOptionFromDdl"),vD=T((i,e)=>new Promise((t,s)=>setTimeout(()=>s(new Error(e+" TIMEOUT: "+i)),i)),"throwErrorOnTimeout"),KD=T(({sequenceDtos:i,allDDLs:e})=>{let t=[];for(let s of i)new RegExp("\\b"+s.sequenceName+"\\b","i").test(e)&&t.push(s);return t},"filterUsedSequences");Sf.exports={getSchemaSequences:xD}});var mf=R((Wy,Rf)=>{"use strict";var fr=Fu(),WD=AA(),Ar=require("path"),Xi=require("fs"),XD=LA(),{getSchemaSequences:zD}=uf(),ne=require("lodash"),ff={message:"Connection error"},Mt,lc,QD=T((i="")=>{let e=i.match(/http:\/\/(?:.*?:.*?@)?(.*?):(\d+)/i);return e?{httpsProxy:e[1],httpsProxyPort:e[2]}:{}},"parseProxyOptions"),df=T(i=>[i,process.env.TNS_ADMIN,Ar.join(process.env.ORACLE_HOME||"","network","admin"),Ar.join(process.env.LD_LIBRARY_PATH||"","network","admin")].reduce((t,s)=>{if(t)return t;let r=Ar.join(s,"tnsnames.ora");return Xi.existsSync(r)?r:t},""),"getTnsNamesOraFile"),Pf=T(i=>{let e=Xi.readFileSync(i).toString();return XD(e)},"parseTnsNamesOra"),JD=T((i,e,t,s)=>{var P,d,S,A,p,u,C,O;let r=df(i);if(!Xi.existsSync(r))return e;s({message:"Found tnsnames.ora file: "+r});let n=Pf(r);s({message:"tnsnames.ora successfully parsed"});let _=Object.keys(n);if(!n[e]&&_.length===0)return s({message:`Cannot find '${e}' in tnsnames.ora and no fallback found`}),e;let[a]=_,c=n[e]||n[a];n[e]?s({message:`Connect using TNS service ${e}' from ${Ar.join(i,"tnsnames.ora")}.`}):s({message:`Connect using first TNS service ${a}' from ${Ar.join(i,"tnsnames.ora")}.`});let E=(d=(P=c==null?void 0:c.data)==null?void 0:P.description)==null?void 0:d.address,l=(p=(A=(S=c==null?void 0:c.data)==null?void 0:S.description)==null?void 0:A.connect_data)==null?void 0:p.service_name,N=(O=(C=(u=c==null?void 0:c.data)==null?void 0:u.description)==null?void 0:C.connect_data)==null?void 0:O.sid;return s({message:"tnsnames.ora",address:E,service:l}),hc(ne.omitBy({...E,...t,protocol:(E==null?void 0:E.protocol)||"tcps",service:l||e,sid:N},ne.isUndefined),s)},"getConnectionStringByTnsNames"),Wi=T((i,e)=>i?e:"","combine"),hc=T(({protocol:i,host:e,port:t,sid:s,service:r,httpsProxy:n,httpsProxyPort:_},a)=>{let c=`(DESCRIPTION=
		(ADDRESS=
			(PROTOCOL=${i||"tcp"})
			(HOST=${e})
			(PORT=${t}))
			${Wi(n,`(HTTPS_PROXY=${n})`)}
			${Wi(_,`(HTTPS_PROXY_PORT=${_})`)}
		(CONNECT_DATA=
					${Wi(s,`(SID=${s})`)}
					${Wi(r,`(SERVICE_NAME=${r})`)}
		)
	)`;return a({message:"connectionString",connectionString:c}),c},"getConnectionDescription"),jD=T(async(i,e,t)=>{var n,_,a,c,E,l,N,P,d,S,A;let s={protocol:"",host:"",port:"",service:""};if(["Wallet","TNS"].includes(i.connectionMethod)){let p=df(i.configDir);if(!Xi.existsSync(p))throw new Error("Cannot find tnsnames.ora file. Please, specify tnsnames folder or use Base connection method.");t({message:"Found tnsnames.ora file: "+p});let u=Pf(p);if(!u[i.serviceName])throw new Error('Cannot find "'+i.serviceName+'" in tnsnames.ora');let C=(a=(_=(n=u[i.serviceName])==null?void 0:n.data)==null?void 0:_.description)==null?void 0:a.address,O=(N=(l=(E=(c=u[i.serviceName])==null?void 0:c.data)==null?void 0:E.description)==null?void 0:l.connect_data)==null?void 0:N.service_name,M=(A=(S=(d=(P=u[i.serviceName])==null?void 0:P.data)==null?void 0:d.description)==null?void 0:S.connect_data)==null?void 0:A.sid;t({message:"tnsnames.ora",address:C,service:O}),s.protocol=C==null?void 0:C.protocol,s.host=C==null?void 0:C.host,s.port=C==null?void 0:C.port,s.service=O||i.serviceName,s.sid=M}else s.host=i.host,s.port=i.port,s.service=i.serviceName,s.sid=i.sid;let{options:r}=await e.openTunnel({sshAuthMethod:i.sshConfig.ssh_method==="privateKey"?"IDENTITY_FILE":"USER_PASSWORD",sshTunnelHostname:i.sshConfig.ssh_host,sshTunnelPort:i.sshConfig.ssh_port,sshTunnelUsername:i.sshConfig.ssh_user,sshTunnelPassword:i.sshConfig.ssh_password,sshTunnelIdentityFile:i.sshConfig.ssh_key_file,sshTunnelPassphrase:i.sshConfig.ssh_key_passphrase,host:s.host,port:s.port});return hc({...s,host:r.host,port:r.port.toString()},t)},"getSshConnectionString"),ZD=T(async({walletFile:i,walletPassword:e,tempFolder:t,name:s,connectionMethod:r,TNSpath:n,host:_,port:a,userName:c,userPassword:E,serviceName:l,clientPath:N,clientType:P,queryRequestTimeout:d,authMethod:S,options:A,sid:p,ssh:u,ssh_user:C,ssh_host:O,ssh_port:M,ssh_method:Q,ssh_key_file:b,ssh_key_passphrase:G,ssh_password:Se,authRole:Ae,mode:Et},pt,lt)=>{if(Mt)return Mt;let Vt={thin:"thin",thick:"thick"},Rt,Sc,ls={},uc="";r==="Wallet"&&(Rt=await WD({walletFile:i,tempFolder:t,name:s}),process.env.TNS_ADMIN=Rt),r==="TNS"&&(Rt=n),P==="InstantClient"&&(Sc=N),A!=null&&A.proxy&&(uc=QD(A==null?void 0:A.proxy)),Et!==Vt.thin&&fr.initOracleClient({libDir:Sc,configDir:Rt});let dr="";return["Wallet","TNS"].includes(r)?dr=JD(Rt,l,uc,lt):dr=hc({host:_,port:a,sid:p,service:l},lt),u&&(lc=!0,dr=await jD({host:_,port:a,configDir:Rt,serviceName:l,sid:p,connectionMethod:r,sshConfig:{ssh_user:C,ssh_host:O,ssh_port:M,ssh_method:Q,ssh_key_file:b,ssh_password:Se,ssh_key_passphrase:G}},pt,lt)),S==="OS"?ls.externalAuth=!0:S==="Kerberos"?(ls.username=c,ls.password=E,ls.externalAuth=!0):(ls.username=c,ls.password=E),eC({connectString:dr,username:c,password:E,queryRequestTimeout:d,authRole:Ae,walletLocation:Rt,walletPassword:e})},"connect"),$D=T(async i=>Mt?(lc&&(lc=!1,await i.closeConsumer()),new Promise((e,t)=>{Mt.close(s=>{if(Mt=null,s)return t(s);e()})})):Promise.reject(ff),"disconnect"),eC=T(({connectString:i,username:e,password:t,queryRequestTimeout:s,authRole:r,walletPassword:n,walletLocation:_})=>new Promise((a,c)=>{let E={username:e,password:t,connectString:i,privilege:r==="default"?void 0:fr[r],walletLocation:_,walletPassword:n};fr.getConnection(E,(l,N)=>{if(l)return Mt=null,c(l);try{N.callTimeout=Number(s||0),Mt=N,a()}catch(P){c(P)}})}),"authByCredentials"),tC=T(async({includeSystemCollection:i,schemaName:e},t)=>{let s="SELECT USERNAME FROM ALL_USERS",r,n="";return e&&(n=`USERNAME = '${e}'`),i?r=`${s}${n?` WHERE ${n}`:""}`:r=`${s} WHERE ORACLE_MAINTAINED = 'N'${n?` AND ${n}`:""}`,await Xe(r).catch(_=>(t.info({message:"Cannot retrieve schema names"}),t.error(_),[]))},"getSchemaNames"),sC=T(i=>ne.reduce(i,(e,t)=>({...e,[t[0]]:[...e[t[0]]||[],t[1]]}),{}),"pairToObj"),zi=T((i,e,t)=>{let s="";return t&&(s=`T.OWNER = '${t}'`),Xe(e?`${i}${s?` WHERE ${s}`:""}`:`${i} INNER JOIN ALL_USERS U ON T.OWNER = U.USERNAME WHERE U.ORACLE_MAINTAINED = 'N'${s?` AND ${s}`:""}`)},"selectEntities"),rC=T(({includeSystemCollection:i,schemaName:e})=>zi("SELECT T.OWNER, T.TABLE_NAME FROM ALL_TABLES T",i,e),"tableNamesByUser"),iC=T(({includeSystemCollection:i,schemaName:e})=>zi("SELECT T.OWNER, T.TABLE_NAME FROM ALL_EXTERNAL_TABLES T",i,e),"externalTableNamesByUser"),nC=T(({includeSystemCollection:i,schemaName:e})=>zi("SELECT T.OWNER, T.VIEW_NAME || ' (v)' FROM ALL_VIEWS T",i,e),"viewNamesByUser"),oC=T(({includeSystemCollection:i,schemaName:e})=>zi("SELECT T.OWNER, T.MVIEW_NAME || ' (v)' FROM ALL_MVIEWS T",i,e),"materializedViewNamesByUser"),_C=T(async(i,e)=>{let t=await oC(i).catch(c=>(e.info({message:"Cannot retrieve materialized views"}),e.error(c),[]));e.info({materializedViews:t});let s=t.map(c=>ne.join(c,".").slice(0,-4)),r=await rC(i).then(c=>ne.reject(c,E=>s.includes(ne.join(E,".")))).catch(c=>(e.info({message:"Cannot retrieve tables"}),e.error(c),[]));e.info({tables:r});let n=await iC(i).catch(c=>(e.info({message:"Cannot retrieve external tables"}),e.error(c),[]));e.info({externalTables:n});let _=await nC(i).catch(c=>(e.info({message:"Cannot retrieve views"}),e.error(c),[]));e.info({views:_});let a=sC([...r,...n,..._,...t]);return Object.keys(a).reduce((c,E)=>[...c,{dbName:E,dbCollections:a[E],isEmpty:!a[E].length}],[])},"getEntitiesNames"),Xe=T((i,e={},t=[])=>Mt?new Promise((s,r)=>{Mt.execute(i,t,e,(n,_)=>{if(n)return r(n);s(_.rows)})}):Promise.reject(ff),"execute"),aC=T(async i=>{var s,r;let e=["12c","18c","19c","21c","23ai"],t="21c";try{let n=await Xe("SELECT VERSION FROM PRODUCT_COMPONENT_VERSION WHERE product LIKE 'Oracle Database%'");i.log("info",n,"DB Version");let _=(r=(s=n==null?void 0:n[0])==null?void 0:s[0])==null?void 0:r.split(".").shift();return _&&e.find(c=>c.startsWith(_))||t}catch(n){return i.log("error",{message:n.message,stack:n.stack},"Error of getting DB Version"),t}},"getDbVersion"),TC=T(i=>i.slice(-4)===" (v)","isView"),cC=T(i=>{let e=ne.partition(i,TC);return{views:e[0].map(t=>t.slice(0,-4)),tables:e[1]}},"splitEntityNames"),Nc=T(()=>Xe(`BEGIN
		DBMS_METADATA.SET_TRANSFORM_PARAM(DBMS_METADATA.SESSION_TRANSFORM,'SQLTERMINATOR', TRUE);
	END;`),"setSQLTerminator"),EC=T(async(i,e,t)=>{var s;try{await Nc();let r=await Xe(`
			SELECT JSON_OBJECT(
			'tableDDL' VALUE DBMS_METADATA.GET_DDL('TABLE', T.TABLE_NAME, T.OWNER),
			'countOfRecords' VALUE (SELECT COUNT(*) FROM ALL_TABLES WHERE TABLE_NAME='${i}'),
			'indexDDLs' VALUE (
				SELECT JSON_ARRAYAGG(DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME, OWNER) RETURNING CLOB)
				FROM ALL_INDEXES
				WHERE TABLE_OWNER=T.OWNER
					AND TABLE_NAME=T.TABLE_NAME
					AND INDEX_NAME NOT IN (
						SELECT CONSTRAINT_NAME
						FROM ALL_CONSTRAINTS
						WHERE CONSTRAINT_TYPE='P'
						AND OWNER=T.OWNER
						AND TABLE_NAME=T.TABLE_NAME
					)
				),
			'jsonColumns' VALUE (
				SELECT JSON_ARRAYAGG(JSON_OBJECT('name' VALUE COLUMN_NAME, 'datatype' VALUE DATA_TYPE) RETURNING CLOB)
				FROM ALL_TAB_COLUMNS
				WHERE TABLE_NAME=T.TABLE_NAME
				AND OWNER=T.OWNER
				AND DATA_TYPE IN ('CLOB', 'BLOB', 'NVARCHAR2', 'JSON')
			),
			'tableComment' VALUE (
				SELECT COMMENTS
				FROM ALL_TAB_COMMENTS
				WHERE OWNER = T.OWNER AND TABLE_NAME = T.TABLE_NAME AND COMMENTS IS NOT NULL
			),
			'columnComments' VALUE (
				SELECT JSON_ARRAYAGG(JSON_OBJECT('name' VALUE COLUMN_NAME, 'comment' VALUE COMMENTS) RETURNING CLOB)
				FROM ALL_COL_COMMENTS
				WHERE OWNER = T.OWNER AND TABLE_NAME = T.TABLE_NAME  AND COMMENTS IS NOT NULL
			) RETURNING CLOB
			)
			FROM ALL_TABLES T
			WHERE T.OWNER='${e}' AND T.TABLE_NAME='${i}'
		`),n=await((s=ne.first(ne.first(r)))==null?void 0:s.getData());try{let _=JSON.parse(n);t.log("info",_,`Getting DDL from "${e}"."${i}"`);let a=_.tableComment?`COMMENT ON TABLE ${Zt(e)}.${Zt(i)} IS ${Af(_.tableComment)};`:"",c=ne.map(_.columnComments,l=>`COMMENT ON COLUMN ${Zt(e)}.${Zt(i)}.${Zt(l.name)}  IS ${Af(l.comment)};`);return{ddl:`${_.tableDDL}
				${ne.join(_.indexDDLs,`
`)}
				${a}

				${ne.join(c,`
`)}`,jsonColumns:_.jsonColumns,countOfRecords:_.countOfRecords}}catch(_){return t.log("error",{message:`Cannot parse query result: 

`+n,error:{message:_.message,stack:_.stack,err:ne.omit(_,["message","stack"])}},`Getting DDL from "${e}"."${i}"`),{ddl:"",jsonColumns:[],countOfRecords:0}}}catch(r){if((r==null?void 0:r.errorNum)===31603&&!await pf(t))throw r;return t.log("error",{message:"Cannot get DDL for table: "+i,error:{message:r.message,stack:r.stack,err:ne.omit(r,["message","stack"])}},`Getting DDL from "${e}"."${i}"`),{ddl:"",jsonColumns:[],countOfRecords:0}}},"getDDL"),lC=T(i=>Object.keys(i).reduce(async(e,t)=>{let s=await e,r=i[t];return r instanceof fr.Lob&&(r=await r.getData()),r instanceof Buffer&&(r=r.toString()),s[t]=r,s},Promise.resolve({})),"readLobs"),hC=T(async i=>await i.reduce(async(e,t)=>{let s=await e,r=await lC(t);return s.concat(r)},Promise.resolve([])),"readRecordsValues"),Zt=T(i=>/[\s\da-z]/.test(i)?`"${i}"`:i,"escapeName"),Af=T(i=>`'${i.replaceAll("'","''")}'`,"escapeComment"),NC=T((i,e)=>e.map(t=>i.reduce((s,r)=>(s[r]=t[r],s),{})),"replaceNames"),SC=T(async({tableName:i,limit:e,jsonColumns:t,schema:s})=>{let r=ne.map(t,a=>a.name),n=await Xe(`SELECT ${r.map(a=>Zt(a)).join(", ")} FROM ${Zt(s)}.${Zt(i)} FETCH NEXT ${e} ROWS ONLY`,{outFormat:fr.OBJECT});return await hC(NC(r,n))},"selectRecords"),uC=T((i,e)=>{let t={number:"number",boolean:"boolean",string:"string"};return i.reduce((s,r)=>{if(s)return s;let n=r[e];return Array.isArray(n)?"array":typeof n=="object"?n?"object":"null":t[typeof n]??s},"")},"getJsonType"),AC=T(i=>`json${i.charAt(0).toUpperCase()}${i.slice(1)}`,"getJsonTypeName"),fC=T(async(i,e)=>{let t={CLOB:{type:"lobs",mode:"clob"},BLOB:{type:"lobs",mode:"blob"},NVARCHAR2:{type:"char",mode:"nvarchar2"},JSON:{type:"json"}};return{properties:i.reduce((r,n)=>{let _=n.name,a=n.datatype,c=t[a];if(!c)return r;let E=uC(e,_);if(!E)return r;let l=AC(E);return{...r,[_]:{...c,subtype:E,childType:"json",type:l}}},{})}},"getJsonSchema"),dC=T(async(i,e,t)=>{try{let s=await PC(i);if(await Nc(),s){t.log("info",{viewName:i,schema:e},'Is materialized view"');let _=await Xe(`SELECT JSON_OBJECT(
					'viewDDL' VALUE DBMS_METADATA.GET_DDL('MATERIALIZED_VIEW', MV.MVIEW_NAME, MV.OWNER),
					'indexDDLs' VALUE (
						SELECT JSON_ARRAYAGG(DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME, OWNER) RETURNING CLOB)
						FROM ALL_INDEXES
						WHERE TABLE_OWNER=MV.OWNER
							AND TABLE_NAME=MV.MVIEW_NAME
							AND INDEX_NAME NOT IN (
								SELECT CONSTRAINT_NAME
								FROM ALL_CONSTRAINTS
								WHERE CONSTRAINT_TYPE='P'
								AND OWNER=MV.OWNER
								AND TABLE_NAME=MV.MVIEW_NAME
							)
						)
					)
					FROM ALL_MVIEWS MV
					WHERE MV.OWNER='${e}' AND MV.MVIEW_NAME='${i}'`),a=ne.first(ne.first(_)),c=JSON.parse(a);return t.log("info",{viewName:i,schema:e},`Getting DDL from "${e}"."${i}"`),`${c.viewDDL}
${ne.join(c.indexDDLs,`
`)}`}let r=await Xe(`SELECT DBMS_METADATA.GET_DDL('VIEW', VIEW_NAME, OWNER) FROM ALL_VIEWS WHERE VIEW_NAME='${i}'`);return await ne.first(ne.first(r)).getData()}catch(s){if((s==null?void 0:s.errorNum)===31603&&!await pf(t))throw s;return t.log("error",{message:"Cannot get DDL for view: "+i,error:{message:s.message,stack:s.stack,err:ne.omit(s,["message","stack"])}},"Getting DDL"),""}},"getViewDDL"),PC=T(async i=>{await Nc();let e=await Xe(`SELECT * FROM ALL_MVIEWS WHERE MVIEW_NAME = '${i}'`);return!ne.isEmpty(e)},"checkEntityMaterializedView"),pf=T(async i=>{var e;try{let t=await Xe("SELECT sys_context('USERENV', 'CURRENT_USER') FROM dual"),s=ne.first(ne.first(t));return((e=await Xe(`SELECT GRANTED_ROLE FROM USER_ROLE_PRIVS WHERE USERNAME = '${s}'`))==null?void 0:e.map(([n])=>n)).includes("SELECT_CATALOG_ROLE")}catch(t){return i.log("error",{message:"Checking user privileges error",error:{message:t.message,stack:t.stack,err:ne.omit(t,["message","stack"])}},"Getting DDL"),!1}},"checkUserHaveRequiredRole"),pC=T(i=>{i.log("info",{TNS_ADMIN:process.env.TNS_ADMIN??"",ORACLE_HOME:process.env.ORACLE_HOME??"",LD_LIBRARY_PATH:process.env.LD_LIBRARY_PATH??"",ORACLE_BASE:process.env.ORACLE_BASE??""},"Environment variables")},"logEnvironment"),RC=T(async({schema:i,allDDLs:e,logger:t})=>{try{t.log("info",{message:"Start getting synonyms"},"Getting synonyms");let s=await Xe(`
			SELECT ALL_SYNONYMS.OWNER,
			    ALL_SYNONYMS.SYNONYM_NAME,
			    ALL_SYNONYMS.TABLE_NAME,
			    ALL_OBJECTS.EDITIONABLE 
			  FROM ALL_SYNONYMS
			  LEFT JOIN ALL_OBJECTS
			    ON ALL_OBJECTS.OWNER = ALL_SYNONYMS.OWNER
			    AND ALL_OBJECTS.OBJECT_NAME = ALL_SYNONYMS.SYNONYM_NAME
			  WHERE ORIGIN_CON_ID > 1 AND ALL_SYNONYMS.TABLE_OWNER = '${i}'
			`);if(t.log("info",{message:"Finish getting synonyms",count:(s==null?void 0:s.length)||0},"Getting synonyms"),ne.isEmpty(s))return[];let r=s.map(([n,_,a,c])=>({synonymPublic:n==="PUBLIC",synonymName:_,synonymEntityId:a,synonymEditionable:c===null||c==="N"?"NONEDITIONABLE":"EDITIONABLE"}));return mC({synonyms:r,allDDLs:e})}catch(s){t.log("error",{message:"Cannot get synonyms",error:{message:s.message,stack:s.stack,err:ne.omit(s,["message","stack"])}},"Getting synonyms")}},"getSchemaSynonyms"),mC=T(({synonyms:i,allDDLs:e})=>{let t=[];for(let s of i)new RegExp("\\b"+s.synonymName+"\\b","i").test(e)&&t.push(s);return t},"filterUsedSynonyms");Rf.exports={connect:ZD,disconnect:$D,getEntitiesNames:_C,getSchemaNames:tC,splitEntityNames:cC,getDDL:EC,getJsonSchema:fC,getViewDDL:dC,getDbVersion:aC,selectRecords:SC,logEnvironment:pC,execute:Xe,getSchemaSynonyms:RC,getSchemaSequences:zD({execute:Xe})}});var Qi=require("lodash"),If=Pc(),tt=mf();module.exports={async connect(i,e,t,s){let r=s.require("@hackolade/ssh-service");If("Connect to instance",i,e),tt.logEnvironment(e);try{await tt.connect(i,r,n=>{e.log("info",n,"Connection")}),t()}catch(n){throw Df(e,n,t),n}},async disconnect(i,e,t,s){try{let r=s.require("@hackolade/ssh-service");await tt.disconnect(r),t(null)}catch(r){Df(e,r,t)}},async testConnection(i,e,t,s){try{await this.connect(i,e,()=>{},s),t(null)}catch(r){e.log("error",{message:r.message,stack:r.stack,error:r},"Test connection"),t({message:r.message,stack:r.stack})}},async getSchemaNames(i,e,t,s){try{If("Get schemas",i,e),await this.connect(i,e,()=>{},s);let r=await tt.getSchemaNames();return e.log("info",r,"All schemas list",i.hiddenKeys),t(null,r)}catch(r){return e.log("error",{message:r.message,stack:r.stack,error:r},"Get schemas"),t({message:r.message,stack:r.stack})}},async getDbCollectionsNames(i,e,t,s){try{await this.connect(i,e,()=>{},s);let r=await tt.getEntitiesNames(i,{info:n=>{e.log("info",n,"Retrieving table and view names")},error:n=>{e.log("error",{message:n.message,stack:n.stack,error:n},"Retrieving databases and tables information")}});t(null,r)}catch(r){e.log("error",{message:r.message,stack:r.stack,error:r},"Retrieving databases and tables information"),t({message:r.message,stack:r.stack})}},async getDbCollectionsData(i,e,t,s){try{let r=T(({message:l,containerName:N="",entityName:P=""})=>{e.log("info",{message:l,schema:N,table:P},"Retrieving schema"),e.progress({message:l,containerName:N,entityName:P})},"progress");e.log("info",i,"Retrieving schema",i.hiddenKeys),r({message:"Start reverse-engineering process",containerName:"",entityName:""});let n=i.collectionData,_=n.collections,a=n.dataBaseNames,c=await tt.getDbVersion(e),E=await a.reduce(async(l,N)=>{let P=await l,d=tt.splitEntityNames(_[N]),S=await d.tables.reduce(async(b,G)=>{let Se=await b;r({message:"Start getting data from table",containerName:N,entityName:G});let{ddl:Ae,countOfRecords:Et,jsonColumns:pt}=await tt.getDDL(G,N,e),lt=[],Vt={};if(!Qi.isEmpty(pt)){let Rt=IC(Et,i.recordSamplingSettings);r({message:`Fetching columns for JSON schema inference: ${JSON.stringify(pt)}`,containerName:N,entityName:G}),lt=await tt.selectRecords({tableName:G,limit:Rt,jsonColumns:pt,schema:N}),Vt=await tt.getJsonSchema(pt,lt)}return r({message:"Data retrieved successfully",containerName:N,entityName:G}),Se.concat({dbName:N,collectionName:G,entityLevel:{},documents:lt,views:[],ddl:{script:Ae,type:"oracle",takeAllDdlProperties:!0},emptyBucket:!1,validation:{jsonSchema:Vt},bucketInfo:{database:N}})},Promise.resolve([])),A=await d.views.reduce(async(b,G)=>{let Se=await b;r({message:"Start getting data from view",containerName:N,entityName:G});let Ae=await tt.getViewDDL(G,N,e);return r({message:"Data retrieved successfully",containerName:N,entityName:G}),Se.concat({name:G,data:{},ddl:{script:Ae,type:"oracle",takeAllDdlProperties:!0}})},Promise.resolve([]));if(Qi.isEmpty(A))return[...P,...S];let p=S.map(b=>b.ddl.script).join(""),u=A.map(b=>b.ddl.script).join(""),C=[p,u].join("").toLowerCase(),O=await tt.getSchemaSequences({schema:N,allDDLs:C,logger:e}),M=await tt.getSchemaSynonyms({schema:N,allDDLs:C,logger:e}),Q={dbName:N,entityLevel:{},views:A,emptyBucket:!1,bucketInfo:{indexes:[],database:N,synonyms:M,sequences:O}};return[...P,...S.map(b=>({...b,bucketInfo:{...b.bucketInfo,synonyms:M,sequences:O}})),Q]},Promise.resolve([]));r({message:"Start processing the retrieved data in the application ..."}),t(null,E.filter(Boolean),{version:c})}catch(r){if((r==null?void 0:r.errorNum)===31603)return e.log("error",{message:"Missing required role \u201CSELECT_CATALOG_ROLE\u201D to perform this operation",stack:r.stack,error:r},"Reverse-engineering process failed"),t({message:"Missing required role \u201CSELECT_CATALOG_ROLE\u201D to perform this operation",type:"simpleError"});e.log("error",{message:r.message,stack:r.stack,error:r},"Reverse-engineering process failed"),t({message:r.message,stack:r.stack})}}};var Df=T((i,e,t)=>{let s=Qi.isString(e)?e:Qi.get(e,"message","Reverse Engineering error");i.log("error",{error:e},"Reverse Engineering error"),t(s)},"handleError"),IC=T((i,e)=>{if(e.active==="absolute")return Number(e.absolute.value);let t=Math.ceil(i*e.relative.value/100);return Math.min(t,e.maxValue)},"getSampleDocSize");
