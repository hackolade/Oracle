"use strict";var IA=Object.defineProperty;var T=(i,e)=>IA(i,"name",{value:e,configurable:!0});var jT=i=>e=>{var t=i[e];if(t)return t();throw new Error("Module not found in bundle: "+e)};var DA=(i,e)=>()=>(i&&(e=i(i=0)),e);var I=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var ZT=I((II,CA)=>{CA.exports={name:"Oracle",version:"0.2.13",author:"hackolade",engines:{hackolade:"6.11.1",hackoladePlugin:"1.2.0"},contributes:{target:{applicationTarget:"Oracle",title:"Oracle",versions:["12c","18c","19c","21c","23ai"]},features:{nestedCollections:!1,disablePatternField:!0,disableMultipleTypes:!0,enableForwardEngineering:!0,disableReverseEngineering:!1,disableChoices:!0,enableJsonType:!0,useJsonTypesWithComplexTypes:!0,reverseSchemaIntoOneColumn:!0,disableDenormalization:!0,enableComplexTypesNormalization:!0,restrictNestedFieldsAsPrimaryKey:!1,views:{enabled:!0,viewLevel:"model",disablePipelines:!0},relationships:{compositeRelationships:!0},enableFetchSystemEntitiesCheckbox:!0,discoverRelationships:!0}},description:"Hackolade plugin for Oracle and Autonomous databases",disabled:!1,dependencies:{"adm-zip":"0.5.9",lodash:"4.17.21",oracledb:"6.6.0",perplex:"0.11.0"},"lint-staged":{"*.{js,json}":"prettier --write"},"simple-git-hooks":{"pre-commit":"npx lint-staged","pre-push":"npx eslint ."},scripts:{lint:"eslint . --max-warnings=0",package:"node esbuild.package.js"},devDependencies:{"@hackolade/hck-esbuild-plugins-pack":"0.0.1","@typescript-eslint/eslint-plugin":"7.11.0","@typescript-eslint/parser":"7.11.0",esbuild:"0.20.2","esbuild-plugin-clean":"1.0.1","esbuild-plugin-copy":"2.1.1",eslint:"8.57.0","eslint-config-prettier":"9.1.0","eslint-formatter-teamcity":"^1.0.0","eslint-plugin-import":"^2.26.0","eslint-plugin-prettier":"5.1.3","eslint-plugin-unused-imports":"3.2.0","lint-staged":"14.0.1",prettier:"3.2.5","simple-git-hooks":"2.11.1"}}});var ec=I((DI,$T)=>{"use strict";var Pt=require("os"),OA=ZT(),gA=T(i=>i<10?"0"+i:i,"prefixZero"),LA=T(i=>i.reduce((e,t)=>Math.max(e,t.speed),0),"maxClock"),yA=T(i=>Math.floor(i/3600)+":"+gA(parseInt((i/3600-Math.floor(i/3600))*60)),"toTime"),BA=T(()=>OA.version,"getPluginVersion"),wA=T(i=>`Date: ${new Date}
Application version: ${i}
Plugin version: ${BA()}

System information:
 Hostname:  ${Pt.hostname()}
 Platform:  ${Pt.platform()} ${Pt.arch()}
 Release:   ${Pt.release()}
 Uptime:    ${yA(Pt.uptime())}
 Total RAM: ${(Pt.totalmem()/1073741824).toFixed(2)} GB
 CPU Model: ${Pt.cpus()[0].model}
 CPU Clock: ${LA(Pt.cpus())} MHZ
 CPU Cores: ${Pt.cpus().length} cores

`,"getSystemInfo"),YA=T((i,e,t)=>{t.clear(),t.log("info",wA(e.appVersion),i),t.log("info",e,"connectionInfo",e.hiddenKeys)},"logInfo");$T.exports=YA});var sc=I((OI,tc)=>{tc.exports={VERSION_MAJOR:6,VERSION_MINOR:6,VERSION_PATCH:0,VERSION_SUFFIX:""}});var Ye=I((gI,ic)=>{"use strict";var wt=sc(),rc=wt.VERSION_MAJOR+"."+wt.VERSION_MINOR+"."+wt.VERSION_PATCH+wt.VERSION_SUFFIX;ic.exports={VERSION_MAJOR:wt.VERSION_MAJOR,VERSION_MINOR:wt.VERSION_MINOR,VERSION_PATCH:wt.VERSION_PATCH,VERSION_SUFFIX:wt.VERSION_SUFFIX,VERSION_STRING:rc,DEFAULT_DRIVER_NAME:"node-oracledb : "+rc,DEFAULT_ERROR_URL:"https://node-oracledb.readthedocs.io/en/latest/user_guide/installation.html",DEFAULT_MAX_SIZE_FOR_OUT_BINDS:200,CSFRM_IMPLICIT:1,CSFRM_NCHAR:2,CQN_OPCODE_ALL_OPS:0,CQN_OPCODE_ALL_ROWS:1,CQN_OPCODE_ALTER:16,CQN_OPCODE_DELETE:8,CQN_OPCODE_DROP:32,CQN_OPCODE_INSERT:2,CQN_OPCODE_UPDATE:4,DEFAULT:0,STMT_TYPE_UNKNOWN:0,STMT_TYPE_SELECT:1,STMT_TYPE_UPDATE:2,STMT_TYPE_DELETE:3,STMT_TYPE_INSERT:4,STMT_TYPE_CREATE:5,STMT_TYPE_DROP:6,STMT_TYPE_ALTER:7,STMT_TYPE_BEGIN:8,STMT_TYPE_DECLARE:9,STMT_TYPE_CALL:10,STMT_TYPE_EXPLAIN_PLAN:15,STMT_TYPE_MERGE:16,STMT_TYPE_ROLLBACK:17,STMT_TYPE_COMMIT:21,SHUTDOWN_MODE_DEFAULT:0,SHUTDOWN_MODE_TRANSACTIONAL:1,SHUTDOWN_MODE_TRANSACTIONAL_LOCAL:2,SHUTDOWN_MODE_IMMEDIATE:3,SHUTDOWN_MODE_ABORT:4,SHUTDOWN_MODE_FINAL:5,STARTUP_MODE_DEFAULT:0,STARTUP_MODE_FORCE:1,STARTUP_MODE_RESTRICT:2,SUBSCR_EVENT_TYPE_SHUTDOWN:2,SUBSCR_EVENT_TYPE_SHUTDOWN_ANY:3,SUBSCR_EVENT_TYPE_STARTUP:1,SUBSCR_EVENT_TYPE_DEREG:5,SUBSCR_EVENT_TYPE_OBJ_CHANGE:6,SUBSCR_EVENT_TYPE_QUERY_CHANGE:7,SUBSCR_EVENT_TYPE_AQ:100,SUBSCR_GROUPING_CLASS_TIME:1,SUBSCR_GROUPING_TYPE_SUMMARY:1,SUBSCR_GROUPING_TYPE_LAST:2,SUBSCR_NAMESPACE_AQ:1,SUBSCR_NAMESPACE_DBCHANGE:2,SUBSCR_QOS_BEST_EFFORT:16,SUBSCR_QOS_DEREG_NFY:2,SUBSCR_QOS_QUERY:8,SUBSCR_QOS_RELIABLE:1,SUBSCR_QOS_ROWIDS:4,SYSASM:32768,SYSBACKUP:131072,SYSDBA:2,SYSDG:262144,SYSKM:524288,SYSOPER:4,SYSPRELIM:8,SYSRAC:1048576,BIND_IN:3001,BIND_INOUT:3002,BIND_OUT:3003,OUT_FORMAT_ARRAY:4001,OUT_FORMAT_OBJECT:4002,SODA_COLL_MAP_MODE:5001,POOL_STATUS_OPEN:6e3,POOL_STATUS_DRAINING:6001,POOL_STATUS_CLOSED:6002,POOL_STATUS_RECONFIGURING:6003,PURITY_DEFAULT:0,PURITY_NEW:1,PURITY_SELF:2,AQ_DEQ_NO_WAIT:0,AQ_DEQ_WAIT_FOREVER:4294967295,AQ_DEQ_MODE_BROWSE:1,AQ_DEQ_MODE_LOCKED:2,AQ_DEQ_MODE_REMOVE:3,AQ_DEQ_MODE_REMOVE_NO_DATA:4,AQ_DEQ_NAV_FIRST_MSG:1,AQ_DEQ_NAV_NEXT_TRANSACTION:2,AQ_DEQ_NAV_NEXT_MSG:3,AQ_MSG_DELIV_MODE_PERSISTENT:1,AQ_MSG_DELIV_MODE_BUFFERED:2,AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED:3,AQ_MSG_STATE_READY:0,AQ_MSG_STATE_WAITING:1,AQ_MSG_STATE_PROCESSED:2,AQ_MSG_STATE_EXPIRED:3,AQ_VISIBILITY_IMMEDIATE:1,AQ_VISIBILITY_ON_COMMIT:2,TPC_BEGIN_JOIN:2,TPC_BEGIN_NEW:1,TPC_BEGIN_PROMOTE:8,TPC_BEGIN_RESUME:4,TPC_END_NORMAL:0,TPC_END_SUSPEND:1048576,VECTOR_FORMAT_FLOAT32:2,VECTOR_FORMAT_FLOAT64:3,VECTOR_FORMAT_INT8:4,VECTOR_FORMAT_BINARY:5}});var Fe=I((LI,oc)=>{"use strict";var mt=Ye(),Ns=U(),UA=require("util"),nc=new Map,_c=new Map,rt=new Map,ki=class ki{constructor(e,t,s,r){this.num=e,this.name=t,this.columnTypeName=s,this._bufferSizeFactor=r.bufferSizeFactor||0,this._oraTypeNum=r.oraTypeNum||0,this._csfrm=r.csfrm||0,nc.set(e,this);let n=(r.csfrm||0)*256+r.oraTypeNum;_c.set(n,this),rt.set(s,this)}[Symbol.toPrimitive](e){switch(e){case"number":return this.num;default:return this.toString()}}[UA.inspect.custom](){return this.toString()}toString(){return`[DbType ${this.name}]`}};T(ki,"DbType");var v=ki;function MA(i){let e=rt.get(i);return e||Ns.throwErr(Ns.ERR_UNKNOWN_COLUMN_TYPE_NAME,i),e}T(MA,"getTypeByColumnTypeName");function VA(i){let e=nc.get(i);return e||Ns.throwErr(Ns.ERR_INVALID_TYPE_NUM,i),e}T(VA,"getTypeByNum");function FA(i,e){let t=(e||0)*256+i,s=_c.get(t);return s||Ns.throwErr(Ns.ERR_INVALID_ORACLE_TYPE_NUM,i,e),s}T(FA,"getTypeByOraTypeNum");var wi=new v(2020,"DB_TYPE_BFILE","BFILE",{oraTypeNum:114,bufferSizeFactor:4e3}),Sr=new v(2008,"DB_TYPE_BINARY_DOUBLE","BINARY_DOUBLE",{oraTypeNum:101,bufferSizeFactor:8}),ur=new v(2007,"DB_TYPE_BINARY_FLOAT","BINARY_FLOAT",{oraTypeNum:100,bufferSizeFactor:4}),bs=new v(2009,"DB_TYPE_BINARY_INTEGER","BINARY_INTEGER",{oraTypeNum:3,bufferSizeFactor:22}),Ar=new v(2019,"DB_TYPE_BLOB","BLOB",{oraTypeNum:113,bufferSizeFactor:112}),fr=new v(2022,"DB_TYPE_BOOLEAN","BOOLEAN",{oraTypeNum:252,bufferSizeFactor:4}),cs=new v(2003,"DB_TYPE_CHAR","CHAR",{oraTypeNum:96,csfrm:mt.CSFRM_IMPLICIT,bufferSizeFactor:4}),Es=new v(2017,"DB_TYPE_CLOB","CLOB",{oraTypeNum:112,csfrm:mt.CSFRM_IMPLICIT,bufferSizeFactor:112}),Yi=new v(2021,"DB_TYPE_CURSOR","CURSOR",{oraTypeNum:102,bufferSizeFactor:4}),dr=new v(2011,"DB_TYPE_DATE","DATE",{oraTypeNum:12,bufferSizeFactor:7}),Ui=new v(2015,"DB_TYPE_INTERVAL_DS","INTERVAL DAY TO SECOND",{oraTypeNum:183,bufferSizeFactor:11}),Mi=new v(2016,"DB_TYPE_INTERVAL_YM","INTERVAL YEAR TO MONTH",{oraTypeNum:182}),Pr=new v(2027,"DB_TYPE_JSON","JSON",{oraTypeNum:119}),st=new v(2024,"DB_TYPE_LONG","LONG",{oraTypeNum:8,csfrm:mt.CSFRM_IMPLICIT,bufferSizeFactor:2**31-1}),Yt=new v(2031,"DB_TYPE_LONG_NVARCHAR","LONG",{oraTypeNum:8,csfrm:mt.CSFRM_NCHAR,bufferSizeFactor:2**31-1}),Ut=new v(2025,"DB_TYPE_LONG_RAW","LONG RAW",{oraTypeNum:24,bufferSizeFactor:2**31-1}),Mt=new v(2004,"DB_TYPE_NCHAR","NCHAR",{oraTypeNum:96,csfrm:mt.CSFRM_NCHAR,bufferSizeFactor:4}),pr=new v(2018,"DB_TYPE_NCLOB","NCLOB",{oraTypeNum:112,csfrm:mt.CSFRM_NCHAR,bufferSizeFactor:112}),Rt=new v(2010,"DB_TYPE_NUMBER","NUMBER",{oraTypeNum:2,bufferSizeFactor:22}),pt=new v(2002,"DB_TYPE_NVARCHAR","NVARCHAR2",{oraTypeNum:1,csfrm:mt.CSFRM_NCHAR,bufferSizeFactor:4}),Vi=new v(2023,"DB_TYPE_OBJECT","OBJECT",{oraTypeNum:109}),ls=new v(2006,"DB_TYPE_RAW","RAW",{oraTypeNum:23,bufferSizeFactor:1}),hs=new v(2005,"DB_TYPE_ROWID","ROWID",{oraTypeNum:11,bufferSizeFactor:18}),Rr=new v(2012,"DB_TYPE_TIMESTAMP","TIMESTAMP",{oraTypeNum:180,bufferSizeFactor:11}),lt=new v(2014,"DB_TYPE_TIMESTAMP_LTZ","TIMESTAMP WITH LOCAL TIME ZONE",{oraTypeNum:231,bufferSizeFactor:11}),Vt=new v(2013,"DB_TYPE_TIMESTAMP_TZ","TIMESTAMP WITH TIME ZONE",{oraTypeNum:181,bufferSizeFactor:13}),mr=new v(2030,"DB_TYPE_UROWID","UROWID",{oraTypeNum:208}),z=new v(2001,"DB_TYPE_VARCHAR","VARCHAR2",{oraTypeNum:1,csfrm:mt.CSFRM_IMPLICIT,bufferSizeFactor:4}),Fi=new v(2032,"DB_TYPE_XMLTYPE","XMLTYPE",{oraTypeNum:109,csfrm:mt.CSFRM_IMPLICIT,bufferSizeFactor:2147483647}),Ir=new v(2033,"DB_TYPE_VECTOR","VECTOR",{oraTypeNum:127}),xA=new Map([[Sr,new Map([[z,z]])],[ur,new Map([[z,z]])],[Ar,new Map([[ls,Ut],[Ut,Ut]])],[cs,new Map([[z,z]])],[Es,new Map([[z,st],[st,st]])],[dr,new Map([[z,z],[lt,lt]])],[Pr,new Map([[z,z]])],[st,new Map([[z,st]])],[Ut,new Map([[ls,Ut]])],[Mt,new Map([[cs,Mt],[z,pt],[pt,pt]])],[pr,new Map([[z,Yt],[pt,Yt],[st,Yt],[Yt,Yt]])],[Rt,new Map([[z,z]])],[pt,new Map([[cs,Mt],[Mt,Mt],[z,pt]])],[ls,new Map([[z,z]])],[hs,new Map([[z,hs]])],[Rr,new Map([[z,z],[lt,lt]])],[lt,new Map([[z,z],[Vt,Vt]])],[Vt,new Map([[z,z],[lt,lt]])],[mr,new Map([[z,hs]])],[Ir,new Map([[z,st],[st,st],[Es,Es]])]]),kA=new Map([[wi,wi],[Sr,Sr],[ur,ur],[bs,bs],[Ar,Ar],[fr,fr],[cs,cs],[Es,Es],[Yi,Yi],[dr,dr],[Ui,Ui],[Mi,Mi],[Pr,Pr],[st,st],[Yt,Yt],[Ut,Ut],[Mt,Mt],[pr,pr],[Rt,Rt],[pt,pt],[Vi,Vi],[ls,ls],[hs,hs],[Rr,Rr],[lt,Vt],[Vt,Vt],[mr,mr],[z,z],[Fi,Fi],[Ir,Ir]]);rt.set("DOUBLE PRECISION",Rt);rt.set("FLOAT",Rt);rt.set("INTEGER",Rt);rt.set("PL/SQL BOOLEAN",fr);rt.set("PL/SQL BINARY INTEGER",bs);rt.set("PL/SQL PLS INTEGER",bs);rt.set("REAL",Rt);rt.set("SMALLINT",Rt);rt.set("TIMESTAMP WITH LOCAL TZ",lt);rt.set("TIMESTAMP WITH TZ",Vt);var bi=class bi extends Uint8Array{toJSON(){return Buffer.from(this.buffer).toString("hex")}};T(bi,"JsonId");var xi=bi;oc.exports={DbType:v,DB_TYPE_BFILE:wi,DB_TYPE_BINARY_DOUBLE:Sr,DB_TYPE_BINARY_FLOAT:ur,DB_TYPE_BINARY_INTEGER:bs,DB_TYPE_BLOB:Ar,DB_TYPE_BOOLEAN:fr,DB_TYPE_CHAR:cs,DB_TYPE_CLOB:Es,DB_TYPE_CURSOR:Yi,DB_TYPE_DATE:dr,DB_TYPE_INTERVAL_DS:Ui,DB_TYPE_INTERVAL_YM:Mi,DB_TYPE_JSON:Pr,DB_TYPE_LONG:st,DB_TYPE_LONG_NVARCHAR:Yt,DB_TYPE_LONG_RAW:Ut,DB_TYPE_NCHAR:Mt,DB_TYPE_NCLOB:pr,DB_TYPE_NUMBER:Rt,DB_TYPE_NVARCHAR:pt,DB_TYPE_OBJECT:Vi,DB_TYPE_RAW:ls,DB_TYPE_ROWID:hs,DB_TYPE_TIMESTAMP:Rr,DB_TYPE_TIMESTAMP_LTZ:lt,DB_TYPE_TIMESTAMP_TZ:Vt,DB_TYPE_UROWID:mr,DB_TYPE_VARCHAR:z,DB_TYPE_VECTOR:Ir,DB_TYPE_CONVERSION_MAP:xA,DB_TYPE_FETCH_TYPE_MAP:kA,DB_TYPE_XMLTYPE:Fi,getTypeByColumnTypeName:MA,getTypeByNum:VA,getTypeByOraTypeNum:FA,JsonId:xi}});var ac=I((BI,bA)=>{bA.exports={name:"oracledb",version:"6.6.0",description:"A Node.js module for Oracle Database access from JavaScript and TypeScript",license:"(Apache-2.0 OR UPL-1.0)",homepage:"http://oracle.github.io/node-oracledb/",keywords:["Oracle","Database","official","DB","SQL","JSON","PL/SQL","SODA","OCI","API","client","library","driver","add-on","extension","binding","interface","adapter","module"],repository:{type:"git",url:"git://github.com/oracle/node-oracledb.git"},scripts:{install:"node package/install.js",prune:"node package/prunebinaries.js"},engines:{node:">=14.6"},maintainers:[{name:"Oracle Corp."}],bugs:{url:"https://github.com/oracle/node-oracledb/issues"},main:"./index.js"}});var Le=I((wI,Nc)=>{"use strict";var{Buffer:Dt}=require("buffer"),fe=U(),ze=require("process"),GA=require("util"),HA=Fe(),It=Ye(),Tc;try{Tc=ac()}catch{fe.throwErr(fe.ERR_MISSING_FILE,"package.json")}var cc=Tc.version,qA="build/Release",vA="oracledb-"+cc+"-"+ze.platform+"-"+ze.arch+".node",KA="oracledb.node",WA="package/Staging";function Ec(){return"Node-oracledb installation instructions: https://node-oracledb.readthedocs.io/en/latest/user_guide/installation.html"}T(Ec,"getInstallURL");function XA(){let i,e,t=Ec()+`
`;return ze.platform==="linux"?(ze.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html
`,i="64-bit"):ze.arch==="x32"?(e=`https://www.oracle.com/database/technologies/instant-client/linux-x86-32-downloads.html
`,i="32-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,i=ze.arch),t+="You must have Linux "+i+` Oracle Client libraries configured with ldconfig, or in LD_LIBRARY_PATH.
`,t+=`If you do not have Oracle Database on this computer, then install the Instant Client Basic or Basic Light package from 
`,t+=e):ze.platform==="darwin"?(ze.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/macos-intel-x86-downloads.html
`,i="64-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,i=ze.arch),t+="You must have macOS "+i+` Oracle Instant Client Basic or Basic Light package libraries in
`,t+=`/usr/local/lib or set by calling oracledb.initOracleClient({libDir: "/my/instant_client_directory"}).
`,t+="Oracle Instant Client can be downloaded from "+e):ze.platform==="win32"?(ze.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html
`,i="64-bit"):ze.arch==="x32"?(e=`https://www.oracle.com/database/technologies/instant-client/microsoft-windows-32-downloads.html
`,i="32-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,i=ze.arch),t+="You must have Windows "+i+` Oracle Client libraries in your PATH environment variable.
`,t+=`If you do not have Oracle Database on this computer, then install the Instant Client Basic or Basic Light package from
`,t+=e,t+=`A Microsoft Visual Studio Redistributable suitable for your Oracle client library version must be available.
`):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,t+="You must have "+ze.arch+` Oracle Client libraries in your operating system library search path.
`,t+=`If you do not have Oracle Database on this computer, then install an Instant Client Basic or Basic Light package from: 
`,t+=e),t}T(XA,"getInstallHelp");function Gi(i){let e=T(function(){if(typeof arguments[arguments.length-1]!="function")return i.apply(this,arguments).catch(T(function r(n){throw fe.transformErr(n,r)},"stackCapture"));let t=Array.prototype.slice.call(arguments,0,arguments.length-1),s=arguments[arguments.length-1];i.apply(this,t).then(function(r){s(null,r)},T(function r(n){s(fe.transformErr(n,r))},"stackCapture"))},"wrapper");return i.name&&Object.defineProperty(e,"name",{value:i.name}),e}T(Gi,"callbackify");function Hi(i){return async function(){let e;this._impl&&(e=this._impl._getConnImpl(),await e._acquireLock());try{return await i.apply(this,arguments)}finally{e&&e._releaseLock()}}}T(Hi,"serialize");function lc(i,e){return async function(){this._isActive&&fe.throwErr(e),this._isActive=!0;try{return await i.apply(this,arguments)}finally{this._isActive=!1}}}T(lc,"preventConcurrent");function zA(i){let e=1,t;typeof arguments[1]=="number"&&(e=2,t=arguments[1]);for(let s=e;s<arguments.length;s++){let r=arguments[s],n=i[r];t?i[r]=Gi(lc(Hi(n),t)):i[r]=Gi(Hi(n))}}T(zA,"wrapFns");function QA(i){if(!Array.isArray(i))return!1;for(let e=0;e<i.length;e++)if(typeof i[e]!="string")return!1;return!0}T(QA,"isArrayOfStrings");function vi(i){return i!==null&&typeof i=="object"}T(vi,"isObject");function JA(i){return i!==null&&typeof i=="object"||Array.isArray(i)}T(JA,"isObjectOrArray");function jA(i){return i&It.SYSPRELIM&&(i=i^It.SYSPRELIM),i===It.SYSASM||i===It.SYSBACKUP||i===It.SYSDBA||i===It.SYSDG||i===It.SYSKM||i===It.SYSOPER||i===It.SYSRAC}T(jA,"isPrivilege");function ZA(i){if(!Array.isArray(i))return!1;for(let e=0;e<i.length;e++){let t=i[e];if(!(typeof t=="string"||typeof t=="number"||Dt.isBuffer(t)||GA.types.isDate(t)))return!1}return!0}T(ZA,"isShardingKey");function hc(i){return i!=null&&i._sodaDocumentMarker}T(hc,"isSodaDocument");function $A(i){return vi(i)&&Number.isInteger(i.formatId)&&(Dt.isBuffer(i.globalTransactionId)||typeof i.globalTransactionId=="string")&&(Dt.isBuffer(i.branchQualifier)||typeof i.branchQualifier=="string")}T($A,"isXid");function ef(i){let e;return Dt.isBuffer(i.globalTransactionId)&&Dt.isBuffer(i.branchQualifier)?e=i:(e={formatId:i.formatId,globalTransactionId:i.globalTransactionId,branchQualifier:i.branchQualifier},typeof i.globalTransactionId=="string"&&(e.globalTransactionId=Dt.from(i.globalTransactionId)),typeof i.branchQualifier=="string"&&(e.branchQualifier=Dt.from(i.branchQualifier))),e.globalTransactionId.length>64&&fe.throwErr(fe.ERR_INVALID_TRANSACTION_SIZE,e.globalTransactionId.length),e.branchQualifier.length>64&&fe.throwErr(fe.ERR_INVALID_BRANCH_SIZE,e.branchQualifier.length),e}T(ef,"normalizeXid");function tf(i){return hc(i)?i._impl:(fe.assertParamValue(vi(i),1),Dt.from(JSON.stringify(i)))}T(tf,"verifySodaDoc");function qi(i){fe.assert(typeof i=="string",fe.ERR_TOKEN_BASED_AUTH),i.split(".")[1]===void 0&&fe.throwErr(fe.ERR_TOKEN_BASED_AUTH);let t=i.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=Dt.from(t,"base64").toString("ascii"),n=JSON.parse(r).exp;return fe.assert(n!=null,fe.ERR_TOKEN_BASED_AUTH),n=n*1e3,new Date().getTime()>n}T(qi,"isTokenExpired");function sf(i){switch(typeof i){case"string":return i===""&&fe.throwErr(fe.ERR_TOKEN_BASED_AUTH),!qi(i);case"object":return(i.token===void 0||i.token===""||i.privateKey===void 0||i.privateKey==="")&&fe.throwErr(fe.ERR_TOKEN_BASED_AUTH),!qi(i.token);default:fe.throwErr(fe.ERR_TOKEN_BASED_AUTH)}}T(sf,"isTokenValid");function rf(i){return i=i.replace(/\n/g,""),i=i.replace("-----BEGIN PRIVATE KEY-----",""),i=i.replace("-----END PRIVATE KEY-----",""),i}T(rf,"denormalizePrivateKey");function nf(i,e){let t=e+"Class",s=e+"Name",r=i[t],n=i[e];typeof n=="number"&&(n=i[e]=HA.getTypeByNum(n)),r?i[s]=r.prototype.fqn:n&&(i[s]=n.columnTypeName)}T(nf,"addTypeProperties");function _f(i){return i instanceof Float32Array||i instanceof Float64Array||i instanceof Int8Array||Object.getPrototypeOf(i)===Uint8Array.prototype}T(_f,"isVectorValue");function of(i,e,t,s,r,n,o,a,c){return i?new Date(e,t-1,s,r,n,o,a):new Date(Date.UTC(e,t-1,s,r,n,o,a)-c*6e4)}T(of,"makeDate");Nc.exports={BINARY_FILE:vA,BUILD_FILE:KA,PACKAGE_JSON_VERSION:cc,RELEASE_DIR:qA,STAGING_DIR:WA,addTypeProperties:nf,callbackify:Gi,denormalizePrivateKey:rf,getInstallURL:Ec,getInstallHelp:XA,isArrayOfStrings:QA,isObject:vi,isObjectOrArray:JA,isPrivilege:jA,isShardingKey:ZA,isSodaDocument:hc,isTokenExpired:qi,isTokenValid:sf,isVectorValue:_f,isXid:$A,normalizeXid:ef,makeDate:of,preventConcurrent:lc,serialize:Hi,verifySodaDoc:tf,wrapFns:zA}});var Hs=I((UI,Sc)=>{"use strict";var Gs=Ye();Sc.exports={TNS_VECTOR_MAGIC_BYTE:219,TNS_VECTOR_VERSION_BASE:0,TNS_VECTOR_VERSION_WITH_BINARY:1,TNS_VECTOR_FLAG_NORMSRC:16,TNS_VECTOR_FLAG_NORM:2,TNS_JSON_MAGIC_BYTE_1:255,TNS_JSON_MAGIC_BYTE_2:74,TNS_JSON_MAGIC_BYTE_3:90,TNS_JSON_VERSION_MAX_FNAME_255:1,TNS_JSON_VERSION_MAX_FNAME_65535:3,TNS_JSON_FLAG_HASH_ID_UINT8:256,TNS_JSON_FLAG_HASH_ID_UINT16:512,TNS_JSON_FLAG_NUM_FNAMES_UINT16:1024,TNS_JSON_FLAG_FNAMES_SEG_UINT32:2048,TNS_JSON_FLAG_TINY_NODES_STAT:8192,TNS_JSON_FLAG_TREE_SEG_UINT32:4096,TNS_JSON_FLAG_REL_OFFSET_MODE:1,TNS_JSON_FLAG_INLINE_LEAF:2,TNS_JSON_FLAG_LEN_IN_PCODE:4,TNS_JSON_FLAG_NUM_FNAMES_UINT32:8,TNS_JSON_FLAG_IS_SCALAR:16,TNS_JSON_FLAG_SEC_FNAMES_SEG_UINT16:256,TNS_JSON_TYPE_NULL:48,TNS_JSON_TYPE_TRUE:49,TNS_JSON_TYPE_FALSE:50,TNS_JSON_TYPE_STRING_LENGTH_UINT8:51,TNS_JSON_TYPE_NUMBER_LENGTH_UINT8:52,TNS_JSON_TYPE_BINARY_DOUBLE:54,TNS_JSON_TYPE_STRING_LENGTH_UINT16:55,TNS_JSON_TYPE_STRING_LENGTH_UINT32:56,TNS_JSON_TYPE_TIMESTAMP:57,TNS_JSON_TYPE_BINARY_LENGTH_UINT16:58,TNS_JSON_TYPE_BINARY_LENGTH_UINT32:59,TNS_JSON_TYPE_DATE:60,TNS_JSON_TYPE_INTERVAL_YM:61,TNS_JSON_TYPE_INTERVAL_DS:62,TNS_JSON_TYPE_TIMESTAMP_TZ:124,TNS_JSON_TYPE_TIMESTAMP7:125,TNS_JSON_TYPE_BINARY_FLOAT:127,TNS_JSON_TYPE_OBJECT:132,TNS_JSON_TYPE_ARRAY:192,TNS_JSON_TYPE_EXTENDED:123,TNS_JSON_TYPE_VECTOR:1,TNS_JSON_TYPE_ID:126,TZ_HOUR_OFFSET:20,TZ_MINUTE_OFFSET:60,TNS_MAX_SHORT_LENGTH:252,TNS_DURATION_MID:2147483648,TNS_DURATION_OFFSET:60,TNS_CHUNK_SIZE:32767,TNS_HAS_REGION_ID:128,NUMBER_MAX_DIGITS:40,BUFFER_CHUNK_SIZE:65536,CSFRM_IMPLICIT:Gs.CSFRM_IMPLICIT,VECTOR_FORMAT_FLOAT32:Gs.VECTOR_FORMAT_FLOAT32,VECTOR_FORMAT_FLOAT64:Gs.VECTOR_FORMAT_FLOAT64,VECTOR_FORMAT_INT8:Gs.VECTOR_FORMAT_INT8,VECTOR_FORMAT_BINARY:Gs.VECTOR_FORMAT_BINARY,TNS_NULL_LENGTH_INDICATOR:255,TNS_LONG_LENGTH_INDICATOR:254}});var Ss=I((MI,Ac)=>{"use strict";var{Buffer:ht}=require("buffer"),it=Hs(),Qe=U(),uc=Fe(),af=Le(),Wi=class Wi{constructor(e){typeof e=="number"?(this.buf=ht.alloc(e),this.size=0,this.maxSize=e):e&&(this.buf=e,this.size=this.maxSize=e.length),this.pos=0}_grow(e){Qe.throwErr(Qe.ERR_BUFFER_LENGTH_INSUFFICIENT,this.numBytesLeft(),e)}_readBytesWithLength(e){return this.readBytes(e)}_readInteger(e,t,s){let r=!1,n=this.readUInt8();if(n===0)return 0;if(n&128&&(t||Qe.throwErr(Qe.ERR_UNEXPECTED_NEGATIVE_INTEGER,this.pos,this.packetNum),r=!0,n=n&127),n>e&&Qe.throwErr(Qe.ERR_INTEGER_TOO_LARGE,n,e,this.pos,this.packetNum),s)this.skipBytes(n);else{let a=this.readBytes(n).readUIntBE(0,n);return r?-a:a}}numBytesLeft(){return this.size-this.pos}parseBinaryDouble(e){return e=ht.from(e),e[0]&128?e[0]&=127:(e[0]^=255,e[1]^=255,e[2]^=255,e[3]^=255,e[4]^=255,e[5]^=255,e[6]^=255,e[7]^=255),e.readDoubleBE()}parseBinaryFloat(e){return e=ht.from(e),e[0]&128?e[0]&=127:(e[0]^=255,e[1]^=255,e[2]^=255,e[3]^=255),e.readFloatBE()}parseOracleDate(e,t=!0){let s=0;e.length>=11&&(s=Math.floor(e.readUInt32BE(7)/(1e3*1e3)));let r=(e[0]-100)*100+e[1]-100;return af.makeDate(t,r,e[2],e[3],e[4]-1,e[5]-1,e[6]-1,s,0)}parseOracleNumber(e){let t=e[0],s=!!(t&128);s||(t=t^255),t-=193;let r=t*2+2;if(e.length===1)return s?"0":"-1e126";let n=e.length;!s&&e[e.length-1]===102&&(n-=1);let o,a=[];for(let E=1;E<n;E++){s?o=e[E]-1:o=101-e[E];let l=Math.floor(o/10);l===0&&E===1?r-=1:l===10?(a.push("1"),a.push("0"),r+=1):(l!==0||E>1)&&a.push(l.toString()),l=o%10,(l!==0||E<n-1)&&a.push(l.toString())}let c=[];s||c.push("-"),r<=0&&(c.push("."),r<0&&c.push("0".repeat(-r)));for(let E=0;E<a.length;E++)E>0&&E===r&&c.push("."),c.push(a[E]);if(r>a.length)for(let E=a.length;E<r;E++)c.push("0");return c.join("")}readBinaryDouble(){let e=this.readBytesWithLength();return e?this.parseBinaryDouble(e):null}readBinaryFloat(){let e=this.readBytesWithLength();return e?this.parseBinaryFloat(e):null}readBinaryInteger(){let e=this.readBytesWithLength();return e?(e.length>4&&Qe.throwErr(Qe.ERR_INTEGER_TOO_LARGE,e.length,4,this.pos,this.packetNum),e.readIntBE(0,e.length)):0}readBool(){let e=this.readBytesWithLength();return e?e[e.length-1]===1:null}readBytes(e){let t=this.numBytesLeft();e>t&&Qe.throwErr(Qe.ERR_UNEXPECTED_END_OF_DATA,e,t);let s=this.buf.subarray(this.pos,this.pos+e);return this.pos+=e,s}readBytesWithLength(){let e=this.readUInt8();return e===0||e===it.TNS_NULL_LENGTH_INDICATOR?null:this._readBytesWithLength(e)}readDbObject(){let e={},t=this.readUB4();return t>0&&(e.toid=ht.from(this.readBytesWithLength())),t=this.readUB4(),t>0&&(e.oid=ht.from(this.readBytesWithLength())),t=this.readUB4(),t>0&&(e.snapshot=ht.from(this.readBytesWithLength())),this.skipUB2(),t=this.readUB4(),this.skipUB2(),t>0&&(e.packedData=ht.from(this.readBytesWithLength())),e}readInt8(){return this.readBytes(1).readInt8()}readOracleDate(e){let t=this.readBytesWithLength();return t?this.parseOracleDate(t,e):null}readOracleNumber(){let e=this.readBytesWithLength();return e?this.parseOracleNumber(e):null}readSB2(){return this._readInteger(2,!0,!1)}readSB4(){return this._readInteger(4,!0,!1)}readSB8(){return this._readInteger(8,!0,!1)}readStr(e){let t=this.readBytesWithLength();return t?e===it.CSFRM_IMPLICIT?t.toString():ht.from(t).swap16().toString("utf16le"):null}readUB2(){return this._readInteger(2,!1,!1)}readUB4(){return this._readInteger(4,!1,!1)}readUB8(){return this._readInteger(8,!1,!1)}readUInt8(){return this.readBytes(1)[0]}readUInt16BE(){return this.readBytes(2).readUInt16BE()}readUInt16LE(){return this.readBytes(2).readUInt16LE()}readUInt32BE(){return this.readBytes(4).readUInt32BE()}reserveBytes(e){e>this.numBytesLeft()&&this._grow(this.pos+e);let t=this.pos;return this.pos+=e,t}skipBytes(e){e>this.numBytesLeft()&&Qe.throwErr(Qe.ERR_UNEXPECTED_END_OF_DATA),this.pos+=e}skipSB4(){return this._readInteger(4,!0,!0)}skipUB1(){this.skipBytes(1)}skipUB2(){return this._readInteger(2,!1,!0)}skipUB4(){return this._readInteger(4,!1,!0)}skipUB8(){return this._readInteger(8,!1,!0)}writeBinaryDouble(e,t){t||(t=this.reserveBytes(8)),this.buf.writeDoubleBE(e,t),this.buf[t]&128?(this.buf[t]^=255,this.buf[t+1]^=255,this.buf[t+2]^=255,this.buf[t+3]^=255,this.buf[t+4]^=255,this.buf[t+5]^=255,this.buf[t+6]^=255,this.buf[t+7]^=255):this.buf[t]|=128}writeBinaryFloat(e,t){t||(t=this.reserveBytes(4)),this.buf.writeFloatBE(e,t),this.buf[t]&128?(this.buf[t]^=255,this.buf[t+1]^=255,this.buf[t+2]^=255,this.buf[t+3]^=255):this.buf[t]|=128}writeBytes(e){let t=0,s=e.length;for(;s>0;){let r=this.numBytesLeft();r===0&&this._grow(this.pos+s);let n=Math.min(r,s);e.copy(this.buf,this.pos,t,t+n),this.pos+=n,t+=n,s-=n}}_writeRawBytesAndLength(e,t){if(t<=it.TNS_MAX_SHORT_LENGTH)this.writeUInt8(t),t>0&&this.writeBytes(e);else{let s=0;for(this.writeUInt8(it.TNS_LONG_LENGTH_INDICATOR);t>0;){let r=Math.min(t,it.BUFFER_CHUNK_SIZE);this.writeUB4(r),this.writeBytes(e.subarray(s,s+r)),t-=r,s+=r}this.writeUB4(0)}}writeBytesWithLength(e){let t=e.length;this._writeRawBytesAndLength(e,t)}writeDbObject(e){this.writeUB4(e.toid.length),this.writeBytesWithLength(e.toid),e.oid?(this.writeUB4(e.oid.length),this.writeBytesWithLength(e.oid)):this.writeUB4(0),this.writeUB4(0),this.writeUB4(0);let t=e._getPackedData();this.writeUB4(t.length),this.writeUB4(e.flags),this.writeBytesWithLength(t)}writeOracleDate(e,t,s=!0){let r,n=t._bufferSizeFactor;n>7&&(r=e.getUTCMilliseconds()*1e3*1e3,r===0&&n<=11&&(n=7)),s&&this.writeUInt8(n);let o=this.reserveBytes(n);if(t===uc.DB_TYPE_DATE||t==uc.DB_TYPE_TIMESTAMP){let a=e.getFullYear();this.buf[o]=Math.trunc(a/100)+100,this.buf[o+1]=a%100+100,this.buf[o+2]=e.getMonth()+1,this.buf[o+3]=e.getDate(),this.buf[o+4]=e.getHours()+1,this.buf[o+5]=e.getMinutes()+1,this.buf[o+6]=e.getSeconds()+1}else{let a=e.getUTCFullYear();this.buf[o]=Math.trunc(a/100)+100,this.buf[o+1]=a%100+100,this.buf[o+2]=e.getUTCMonth()+1,this.buf[o+3]=e.getUTCDate(),this.buf[o+4]=e.getUTCHours()+1,this.buf[o+5]=e.getUTCMinutes()+1,this.buf[o+6]=e.getUTCSeconds()+1}n>7&&(this.buf.writeInt32BE(r,o+7),n>11&&(this.buf[o+11]=it.TZ_HOUR_OFFSET,this.buf[o+12]=it.TZ_MINUTE_OFFSET))}writeOracleNumber(e){let t=!1;e[0]==="-"&&(t=!0,e=e.substring(1));let s=0,r=e.indexOf("e");r>0&&(s=Number(e.substring(r+1)),e=e.substring(0,r));let n=e.indexOf(".");if(n>0&&(s-=e.length-n-1,e=e.substring(0,n)+e.substring(n+1)),e[0]==="0"&&(e=e.replace(/^0+/,"")),e.length>0&&e[e.length-1]==="0"){let l=e.replace(/0+$/,"");s+=e.length-l.length,e=l}(e.length>it.NUMBER_MAX_DIGITS||s>=126||s<=-131)&&Qe.throwErr(Qe.ERR_ORACLE_NUMBER_NO_REPR),(s>0&&s%2===1||s<0&&s%2===-1)&&(s--,e+="0"),e.length%2===1&&(e="0"+e);let o=t&&e.length<it.NUMBER_MAX_DIGITS,a=e.length/2,c=(s+e.length)/2+192;t?c=c^255:e.length===0&&s===0&&(c=128);let E=this.reserveBytes(a+2+o);this.buf[E++]=a+1+o,this.buf[E++]=c;for(let l=0;l<e.length;l+=2){let u=Number(e.substring(l,l+2));t?this.buf[E++]=101-u:this.buf[E++]=u+1}o&&(this.buf[E]=102)}writeStr(e){this.writeBytes(ht.from(e))}writeInt32BE(e){let t=this.reserveBytes(4);this.buf.writeInt32BE(e,t)}writeUB4(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):e<=65535?(this.writeUInt8(2),this.writeUInt16BE(e)):(this.writeUInt8(4),this.writeUInt32BE(e))}writeUB2(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):(this.writeUInt8(2),this.writeUInt16BE(e))}writeUB8(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):e<=65535?(this.writeUInt8(2),this.writeUInt16BE(e)):e<=4294967295?(this.writeUInt8(4),this.writeUInt32BE(e)):(this.writeUInt8(8),this.writeUInt64BE(e))}writeUInt8(e){let t=this.reserveBytes(1);this.buf[t]=e}writeSB1(e){let t=this.reserveBytes(1);this.buf[t]=e}writeUInt16BE(e){let t=this.reserveBytes(2);this.buf.writeUInt16BE(e,t)}writeUInt32BE(e){let t=this.reserveBytes(4);this.buf.writeUInt32BE(e,t)}writeUInt64BE(e){let t=this.reserveBytes(8);this.buf.writeUInt32BE(0,t),this.buf.writeUInt32BE(e,t+4)}writeUInt16LE(e){let t=this.reserveBytes(2);this.buf.writeUInt16LE(e,t)}};T(Wi,"BaseBuffer");var Dr=Wi,Xi=class Xi extends Dr{constructor(e){e?super(e):(super(it.BUFFER_CHUNK_SIZE),this.size=this.maxSize)}_grow(e){let t=e%it.BUFFER_CHUNK_SIZE;t>0&&(e+=it.BUFFER_CHUNK_SIZE-t);let s=ht.allocUnsafe(e);this.buf.copy(s),this.buf=s,this.maxSize=this.size=e}};T(Xi,"GrowableBuffer");var Ki=Xi;Ac.exports={BaseBuffer:Dr,GrowableBuffer:Ki}});var Cr=I((FI,fc)=>{"use strict";var{BaseBuffer:Tf,GrowableBuffer:cf}=Ss(),{Buffer:Ef}=require("buffer"),De=Hs(),us=U(),Ji=class Ji extends Tf{decode(){let e=this.readUInt8();e!=De.TNS_VECTOR_MAGIC_BYTE&&us.throwErr(us.ERR_UNEXPECTED_DATA,Ef.from([e]).toString("hex"));let t=this.readUInt8();t>De.TNS_VECTOR_VERSION_WITH_BINARY&&us.throwErr(us.ERR_VECTOR_VERSION_NOT_SUPPORTED,t);let s=this.readUInt16BE(),r=this.readUInt8(),n=this.readUInt32BE(),o,a;r===De.VECTOR_FORMAT_FLOAT32?(o=4,a=new Float32Array(n)):r===De.VECTOR_FORMAT_FLOAT64?(o=8,a=new Float64Array(n)):r===De.VECTOR_FORMAT_INT8?(o=1,a=new Int8Array(n)):r===De.VECTOR_FORMAT_BINARY?(o=1,n=n/8,a=new Uint8Array(n)):us.throwErr(us.ERR_VECTOR_FORMAT_NOT_SUPPORTED,r),(r===De.VECTOR_FORMAT_BINARY||s&De.TNS_VECTOR_FLAG_NORM)&&this.skipBytes(8);for(let c=0;c<n;c++){let E=this.readBytes(o);r===De.VECTOR_FORMAT_FLOAT32?a[c]=this.parseBinaryFloat(E):r===De.VECTOR_FORMAT_FLOAT64?a[c]=this.parseBinaryDouble(E):a[c]=E[0]}return a}};T(Ji,"VectorDecoder");var zi=Ji,ji=class ji extends cf{encode(e){let t=De.VECTOR_FORMAT_FLOAT32,s=this.writeBinaryFloat.bind(this),r=e.length,n=De.TNS_VECTOR_VERSION_BASE,o=De.TNS_VECTOR_FLAG_NORMSRC|De.TNS_VECTOR_FLAG_NORM;return Array.isArray(e)||e instanceof Float64Array?(t=De.VECTOR_FORMAT_FLOAT64,s=this.writeBinaryDouble.bind(this)):e instanceof Int8Array?(t=De.VECTOR_FORMAT_INT8,s=this.writeSB1.bind(this)):e.constructor.name==="Uint8Array"&&(t=De.VECTOR_FORMAT_BINARY,r=r*8,n=De.TNS_VECTOR_VERSION_WITH_BINARY,o=De.TNS_VECTOR_FLAG_NORMSRC,s=this.writeUInt8.bind(this)),this.writeUInt8(De.TNS_VECTOR_MAGIC_BYTE),this.writeUInt8(n),this.writeUInt16BE(o),this.writeUInt8(t),this.writeUInt32BE(r),this.reserveBytes(8),e.forEach(a=>{s(a)}),this.buf.subarray(0,this.pos)}};T(ji,"VectorEncoder");var Qi=ji;fc.exports={VectorDecoder:zi,VectorEncoder:Qi}});var nt=I((kI,Pc)=>{"use strict";var lf=Ye(),Or=U(),G=Fe(),hf=Le(),dc=Cr(),$i=class $i{constructor(){this.autoCommit=!1,this.connectionClass="",this.dbObjectAsPojo=!1,this.edition="",this.errorOnConcurrentExecute=!1,this.events=!1,this.externalAuth=!1,this.fetchArraySize=100,this.fetchAsBuffer=[],this.fetchAsString=[],this.lobPrefetchSize=16384,this.maxRows=0,this.outFormat=lf.OUT_FORMAT_ARRAY,this.poolIncrement=1,this.poolMax=4,this.poolMaxPerShard=0,this.poolMin=0,this.poolPingInterval=60,this.poolPingTimeout=5e3,this.poolTimeout=60,this.prefetchRows=2,this.queueTimeout=6e4,this.queueMax=500,this.stmtCacheSize=30,this.thin=!0,this.thinDriverInitialized=!1,this.createFetchTypeMap(this.fetchAsString,this.fetchAsBuffer),this.fetchTypeHandler=void 0,this._JsonId=G.JsonId}_getDateComponents(e,t){return e?[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()*1e3*1e3]:[t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()*1e3*1e3]}_makeDate(e,t,s,r,n,o,a,c,E){return hf.makeDate(e,t,s,r,n,o,a,c,E)}_decodeVector(e){return new dc.VectorDecoder(e).decode()}_encodeVector(e){return new dc.VectorEncoder().encode(e)}addToOptions(e){for(let t=1;t<arguments.length;t++){let s=arguments[t];e[s]===void 0&&(e[s]=this[s])}}createFetchTypeMap(e,t){let s=new Map(G.DB_TYPE_FETCH_TYPE_MAP);for(let r of e)switch(r){case G.DB_TYPE_NUMBER:s.set(G.DB_TYPE_BINARY_DOUBLE,G.DB_TYPE_VARCHAR),s.set(G.DB_TYPE_BINARY_FLOAT,G.DB_TYPE_VARCHAR),s.set(G.DB_TYPE_BINARY_INTEGER,G.DB_TYPE_VARCHAR),s.set(G.DB_TYPE_NUMBER,G.DB_TYPE_VARCHAR);break;case G.DB_TYPE_TIMESTAMP:s.set(G.DB_TYPE_DATE,G.DB_TYPE_VARCHAR),s.set(G.DB_TYPE_TIMESTAMP,G.DB_TYPE_VARCHAR),s.set(G.DB_TYPE_TIMESTAMP_TZ,G.DB_TYPE_VARCHAR),s.set(G.DB_TYPE_TIMESTAMP_LTZ,G.DB_TYPE_VARCHAR);break;case G.DB_TYPE_CLOB:case G.DB_TYPE_NCLOB:s.set(G.DB_TYPE_CLOB,G.DB_TYPE_LONG),s.set(G.DB_TYPE_NCLOB,G.DB_TYPE_LONG_NVARCHAR);break;case G.DB_TYPE_VECTOR:s.set(G.DB_TYPE_VECTOR,G.DB_TYPE_LONG);break;case G.DB_TYPE_RAW:s.set(G.DB_TYPE_RAW,G.DB_TYPE_VARCHAR);break;case G.DB_TYPE_JSON:s.set(G.DB_TYPE_JSON,G.DB_TYPE_VARCHAR);break;default:Or.throwErr(Or.ERR_INVALID_TYPE_FOR_CONVERSION)}for(let r of t)switch(r){case G.DB_TYPE_BLOB:s.set(G.DB_TYPE_BLOB,G.DB_TYPE_LONG_RAW);break;default:Or.throwErr(Or.ERR_INVALID_TYPE_FOR_CONVERSION)}this.fetchTypeMap=s}};T($i,"Settings");var Zi=$i;Pc.exports=new Zi});var U=I((GI,vl)=>{"use strict";var Nf=require("util"),pc="NJS",Sf=[1,1400,1438,2290,2291,2292,21525,40479],Rc=2,en=3,tn=4,sn=5,rn=7,nn=9,mc=10,Ic=11,Dc=12,Cc=13,Oc=15,gc=16,Lc=17,yc=18,Bc=19,wc=21,Yc=22,Uc=23,Mc=24,Vc=34,Fc=35,xc=36,kc=37,bc=40,Gc=41,Hc=42,qc=43,vc=44,Kc=45,Wc=46,Xc=47,zc=52,Qc=55,Jc=56,jc=57,Zc=58,$c=59,eE=60,tE=61,sE=62,rE=63,iE=64,nE=65,_E=66,oE=67,_n=68,aE=69,TE=70,cE=75,EE=76,lE=78,hE=80,NE=81,SE=82,uE=83,AE=84,fE=85,dE=86,on=87,an=89,PE=90,pE=91,RE=92,Tn=95,mE=97,IE=98,DE=99,CE=100,OE=101,gE=102,LE=103,yE=104,cn=105,BE=106,En=107,wE=109,YE=110,UE=111,ME=112,VE=113,FE=114,ln=115,xE=116,kE=118,bE=119,GE=120,HE=121,qE=122,hn=123,vE=125,KE=126,WE=127,XE=128,Nn=129,zE=130,Sn=131,un=132,An=133,QE=134,JE=135,jE=136,ZE=137,$E=138,el=139,tl=140,sl=141,rl=142,il=143,nl=144,_l=145,ol=146,al=147,Tl=149,cl=150,El=151,ll=152,hl=153,Nl=154,Sl=155,ul=156,As=500,Al=501,fl=503,dl=504,Pl=505,pl=506,Rl=507,ml=508,Il=509,Dl=510,Cl=511,Ol=512,gl=513,Ll=514,yl=515,Bl=516,wl=517,Yl=518,Ul=519,Ml=520,Vl=521,Fl=522,xl=523,kl=524,bl=525,Gl=526,Hl=527,ql=528,fn=700,Ue=new Map;Ue.set("DPI-1010",en);Ue.set("DPI-1024",[un,"at index ([0-9]+) does"]);Ue.set("DPI-1044",ln);Ue.set("DPI-1055",cn);Ue.set("DPI-1063",Tn);Ue.set("DPI-1067",[hn,"call timeout of ([0-9]+) ms"]);Ue.set("DPI-1080",As);Ue.set("OCI-22303",[Nn,'type "([^"]*"."[^"]*)"']);Ue.set("OCI-22164",An);Ue.set("OCI-22165",[Sn,/index \[([0-9]+)\] must be in the range of \[([0-9]+)\] to \[([0-9]+)\]/]);Ue.set("ORA-00028",As);Ue.set("ORA-00600",As);Ue.set("ORA-24338",En);Ue.set("ORA-25708",on);Ue.set("ORA-24344",fn);var f=new Map;f.set(Rc,"invalid pool");f.set(en,"invalid or closed connection");f.set(tn,'invalid value for property "%s"');f.set(sn,"invalid value for parameter %d");f.set(rn,'invalid value for "%s" in parameter %d');f.set(nn,"invalid number of parameters");f.set(mc,"unsupported data type %d in column %d");f.set(Ic,"encountered bind value and type mismatch");f.set(Dc,"encountered invalid bind data type in parameter %d");f.set(Cc,"invalid bind direction");f.set(Oc,"type was not specified for conversion");f.set(gc,"buffer is too small for OUT binds");f.set(Lc,"concurrent operations on ResultSet are not allowed");f.set(yc,"invalid ResultSet");f.set(Bc,"ResultSet cannot be returned for non-query statements");f.set(wc,"invalid type for conversion specified");f.set(Yc,"invalid Lob");f.set(Uc,"concurrent operations on a Lob are not allowed");f.set(Mc,"memory allocation failed");f.set(Vc,"data type is unsupported for array bind");f.set(Fc,"maxArraySize is required for IN OUT array bind");f.set(xc,'length of given array is greater than "maxArraySize"');f.set(kc,'invalid data type at array index %d for bind ":%s"');f.set(bc,'connection request timeout. Request exceeded "queueTimeout" of %d');f.set(Gc,"cannot convert ResultSet to QueryStream after invoking methods");f.set(Hc,"cannot invoke ResultSet methods after converting to QueryStream");f.set(qc,"ResultSet already converted to QueryStream");f.set(vc,'bind object must contain one of the following attributes: "dir", "type", "maxSize", or "val"');f.set(Kc,"cannot load a node-oracledb Thick mode binary for Node.js. Please try using Thin mode. %s");f.set(Wc,'pool alias "%s" already exists in the connection pool cache');f.set(Xc,'pool alias "%s" not found in connection pool cache');f.set(zc,"invalid data type at array index %d for bind position %d");f.set(Qc,"binding by position and name cannot be mixed");f.set(Jc,"maxSize for bind position %d must be specified and be greater than zero");f.set(jc,'maxSize for bind "%s" must be specified and greater than zero');f.set(Zc,"maxSize of %d is too small for value of length %d in row %d");f.set($c,"type must be specified for bind position %d");f.set(eE,'type must be specified for bind "%s"');f.set(tE,"invalid subscription");f.set(sE,"subscription notification callback missing");f.set(rE,"subscription notification SQL missing");f.set(iE,"connection pool is closing");f.set(nE,"connection pool was closed");f.set(_E,"invalid SODA document cursor");f.set(oE,"a pre-built node-oracledb Thick mode binary was not found for %s");f.set(_n,"invalid error number %d supplied");f.set(aE,"node-oracledb %s requires Node.js %s or later");f.set(TE,"message must be a string, buffer, database object or an object containing a payload property which itself is a string, buffer or database object");f.set(cE,'only one of "connectString" and "connectionString" can be used');f.set(EE,'connection request rejected. Pool queue length "queueMax" %d reached');f.set(lE,"unsupported data type %d in JSON value");f.set(hE,'only one of "user" and "username" can be used');f.set(NE,"concurrent operations on a connection are disabled");f.set(SE,"connection pool is being reconfigured");f.set(uE,"pool statistics are not enabled");f.set(AE,"invalid access token");f.set(fE,'invalid connection pool configuration with token-based authentication. The "homogeneous" and "externalAuth" attributes must be set to true');f.set(dE,'invalid standalone configuration with token-based authentication. The "externalAuth" attribute must be set to true');f.set(on,"access token has expired");f.set(an,"%s is not supported by node-oracledb in Thin mode");f.set(PE,"initOracleClient() was already called with different arguments");f.set(pE,"file %s is missing");f.set(RE,'"poolMax" %d must be greater than or equal to "poolMin" %d');f.set(Tn,'setting "batchErrors" or "dmlRowCounts" to true is only permitted for DML statements');f.set(mE,'no bind placeholder named ":%s" was found in the statement text');f.set(IE,"%s positional bind values are required but %s were provided");f.set(DE,"internal error: buffer of length %s insufficient to hold %s bytes");f.set(CE,"national character set id %d is not supported by node-oracledb in Thin mode");f.set(OE,"no credentials specified");f.set(gE,"unexpected end of data: want %d bytes but only %d bytes are available");f.set(LE,"unexpected message type %d received at position %d of packet %d");f.set(yE,"connection pool cannot be closed because connections are busy");f.set(cn,"value is not a number (NaN) and cannot be used in Oracle Database numbers");f.set(BE,"internal error: %s");f.set(En,"invalid cursor");f.set(wE,"invalid type number %d");f.set(YE,"invalid Oracle type number %d [csfrm: %d]");f.set(UE,"internal error: read a negative integer when expecting a positive integer at position %d of packet %d");f.set(ME,"internal error: read integer of length %d when expecting integer of no more than length %d at position %d of packet %d");f.set(VE,"unexpected data received: %s");f.set(FE,"OSON field names may not exceed %d UTF-8 encoded bytes");f.set(ln,"value cannot be represented as an Oracle Database number");f.set(xE,"password verifier type 0x%s is not supported by node-oracledb in Thin mode");f.set(kE,"node-oracledb Thick mode cannot be enabled because a Thin mode connection has already been created");f.set(bE,"conversion from type %s to type %s is not supported");f.set(GE,"fetchTypeHandler return value must be an object");f.set(HE,'fetchTypeHandler return value attribute "type" must be a valid database type');f.set(qE,'fetchTypeHandler return value attribute "converter" must be a function');f.set(hn,"call timeout of %d ms exceeded");f.set(vE,'"connectString" cannot be empty or undefined. Bequeath connections are not supported in Thin mode');f.set(KE,"OSON version %s is not supported");f.set(WE,"internal error: unknown server side piggyback opcode %s");f.set(XE,'internal error: unknown column type name "%s"');f.set(Nn,'invalid object type name: "%s"');f.set(zE,"Oracle TDS data type %d is not supported");f.set(Sn,"given index %d must be in the range of %d to %d");f.set(un,"element at index %d does not exist");f.set(An,"cannot delete elements of a VARRAY");f.set(QE,"value is of wrong type for attribute %s of object %s");f.set(JE,"value is of wrong type for an element of object %s");f.set(jE,"user name and password cannot be set when using external authentication");f.set(ZE,'a bind variable replacement value for placeholder ":%s" was not provided');f.set($E,"connections to this database server version are not supported by node-oracledb in Thin mode");f.set(el,"unexpected XML type with flag %d");f.set(tl,"user name must be enclosed in [] when using external authentication with a proxy user");f.set(sl,"the number of batch errors from executemany() exceeds 65535");f.set(rl,"value too large for attribute %s of object %s (actual: %d, maximum: %d)");f.set(il,"value too large for element %d of object %s (actual: %d, maximum: %d)");f.set(nl,"VECTOR format %d is not supported");f.set(_l,"VECTOR version %d is not supported");f.set(ol,"object %s is not a collection");f.set(al,"cursor has been closed by the database");f.set(Tl,'the bind variable placeholder "%s" cannot be used both before and after the RETURNING clause in a DML RETURNING statement');f.set(cl,"invalid flags for tpcBegin() in Two Phase Commit");f.set(El,"invalid flags for tpcEnd() in Two Phase Commit");f.set(ll,"internal error: unknown transaction state {state} in Two Phase Commit");f.set(hl,"size of the transaction ID is %d and cannot exceed 64");f.set(Nl,"size of the branch ID is %d and cannot exceed 64");f.set(Sl,"operation is not supported on BFILE LOBs");f.set(ul,"operation is only supported on BFILE LOBs");f.set(As,"connection to the Oracle Database was broken");f.set(Al,`connection to host %s port %d terminated unexpectedly. (CONNECTION_ID=%s)
%s`);f.set(fl,`connection to host %s port %d could not be established. (CONNECTION_ID=%s)
%s`);f.set(dl,`connection establishment through a web proxy at host %s port %d failed. (CONNECTION_ID=%s)
%s`);f.set(Pl,"unable to initiate TLS connection. Please check if wallet credentials are valid");f.set(pl,`connection to host %s port %d encountered TLS handshake failure. (CONNECTION_ID=%s)
%s`);f.set(Rl,"TLS detected an invalid certificate. Server DN in certificate does not match the specified DN");f.set(ml,"TLS detected an invalid certificate. %s not present in certificate");f.set(Il,"internal error: invalid packet type or malformed packet received");f.set(Dl,'connection to host %s port %d timed out. Request exceeded "%s" of %d seconds. (CONNECTION_ID=%s)');f.set(Cl,`connection to listener at host %s port %d was refused. (CONNECTION_ID=%s)
Cause: %s`);f.set(Ol,`invalid connection string parameters.
%s`);f.set(gl,"error received through in-band notification: %s");f.set(Ll,"syntax error in connection string");f.set(yl,"error in Easy Connect connection string: %s: %s");f.set(Bl,"no configuration directory set or available to search for tnsnames.ora");f.set(wl,'cannot connect to Oracle Database. Unable to find "%s" in "%s"');f.set(Yl,'cannot connect to Oracle Database. Service "%s" is not registered with the listener at host %s port %s. (CONNECTION_ID=%s)');f.set(Ul,'cannot connect to Oracle Database. SID "%s" is not registered with the listener at host %s port %s. (CONNECTION_ID=%s)');f.set(Ml,"cannot connect to Oracle Database. File tnsnames.ora not found in %s");f.set(Vl,"connection to host %s port %d received end-of-file on communication channel. (CONNECTION_ID=%s)");f.set(Fl,"Azure Authentication Failed: The authentication parameter value %s may be incorrect");f.set(xl,`Failed to retrieve configuration from Centralized Configuration Provider:
 %s`);f.set(kl,"Configuration Provider not supported: %s");f.set(bl,`Centralized Config Provider failed to load required libraries. Please install the required libraries.
 %s`);f.set(Gl,"OCI authentication failed: The authentication parameter value %s may be incorrect");f.set(Hl,"Azure Vault: Provide correct azure vault authentication details");f.set(ql,"Azure service principal authentication requires either a client certificate path or a client secret string");f.set(fn,"creation succeeded with compilation errors");function qs(i){if(!i){let e=Array.prototype.slice.call(arguments,1);dn(...e)}}T(qs,"assert");function uf(i,e,t){qs(i.length>=e&&i.length<=t,nn)}T(uf,"assertArgCount");function Af(i,e,t){i[t]!==void 0&&zt(typeof i[t]=="boolean",e,t)}T(Af,"assertParamPropBool");function ff(i,e,t){i[t]!==void 0&&zt(typeof i[t]=="function",e,t)}T(ff,"assertParamPropFunction");function df(i,e,t){i[t]!==void 0&&zt(Number.isInteger(i[t]),e,t)}T(df,"assertParamPropInt");function Pf(i,e,t){i[t]!==void 0&&zt(Number.isInteger(i[t])&&i[t]>=0,e,t)}T(Pf,"assertParamPropUnsignedInt");function pf(i,e,t){i[t]!==void 0&&zt(Number.isInteger(i[t])&&i[t]>0,e,t)}T(pf,"assertParamPropUnsignedIntNonZero");function Rf(i,e,t){i[t]!==void 0&&zt(typeof i[t]=="string",e,t)}T(Rf,"assertParamPropString");function zt(i,e,t){qs(i,rn,t,e)}T(zt,"assertParamPropValue");function mf(i,e){qs(i,sn,e)}T(mf,"assertParamValue");function If(i,e){qs(i,tn,e)}T(If,"assertPropValue");function gr(i){let e=f.get(i),t=[...arguments];e||(t=[void 0,i],i=_n,e=f.get(i));let s=i.toString().padStart(3,"0"),r=`${pc}-${s}`;t[0]=`${r}: ${e}`;let n=new Error(Nf.format(...t));return n.code=r,Error.captureStackTrace(n,gr),n}T(gr,"getErr");function dn(){throw gr(...arguments)}T(dn,"throwErr");function Df(i){dn(an,i)}T(Df,"throwNotImplemented");function Cf(i,e){if(!i.code){let t=i.message.indexOf(":");if(t>0){i.code=i.message.substr(0,t);let s=nt();if(i.errorNum&&s.thin&&(i.message+=`
Help: https://docs.oracle.com/error-help/db/ora-${i.errorNum.toString().padStart(5,"0")}/`),Ue.has(i.code)){let r=[],n,o=Ue.get(i.code);if(typeof o=="number")n=o;else{n=o[0];let c=o[1],E=i.message.match(c);E&&(r=E.slice(1))}let a=gr(n,...r);i.code=a.code,i.message=a.message+`
`+i.message}}}return i.requiresStackCapture&&(delete i.requiresStackCapture,Error.captureStackTrace(i,e)),i}T(Cf,"transformErr");vl.exports={ERR_INTEGRITY_ERROR_CODES:Sf,ERR_INVALID_POOL:Rc,ERR_INVALID_CONNECTION:en,ERR_INVALID_PROPERTY_VALUE:tn,ERR_INVALID_PARAMETER_VALUE:sn,ERR_INVALID_PROPERTY_VALUE_IN_PARAM:rn,ERR_INVALID_NUMBER_OF_PARAMETERS:nn,ERR_UNSUPPORTED_DATA_TYPE:mc,ERR_BIND_VALUE_AND_TYPE_MISMATCH:Ic,ERR_INVALID_BIND_DATA_TYPE:Dc,ERR_INVALID_BIND_DIRECTION:Cc,ERR_NO_TYPE_FOR_CONVERSION:Oc,ERR_INSUFFICIENT_BUFFER_FOR_BINDS:gc,ERR_BUSY_RS:Lc,ERR_INVALID_RS:yc,ERR_NOT_A_QUERY:Bc,ERR_INVALID_TYPE_FOR_CONVERSION:wc,ERR_INVALID_LOB:Yc,ERR_BUSY_LOB:Uc,ERR_INSUFFICIENT_MEMORY:Mc,ERR_INVALID_TYPE_FOR_ARRAY_BIND:Vc,ERR_REQUIRED_MAX_ARRAY_SIZE:Fc,ERR_INVALID_ARRAY_SIZE:xc,ERR_INCOMPATIBLE_TYPE_ARRAY_BIND:kc,ERR_CONN_REQUEST_TIMEOUT:bc,ERR_CANNOT_CONVERT_RS_TO_STREAM:Gc,ERR_CANNOT_INVOKE_RS_METHODS:Hc,ERR_RS_ALREADY_CONVERTED:qc,ERR_INVALID_BIND_UNIT:vc,ERR_CANNOT_LOAD_BINARY:Kc,ERR_POOL_WITH_ALIAS_ALREADY_EXISTS:Wc,ERR_POOL_WITH_ALIAS_NOT_FOUND:Xc,ERR_INCOMPATIBLE_TYPE_ARRAY_INDEX_BIND:zc,ERR_MIXED_BIND:Qc,ERR_MISSING_MAX_SIZE_BY_POS:Jc,ERR_MISSING_MAX_SIZE_BY_NAME:jc,ERR_MAX_SIZE_TOO_SMALL:Zc,ERR_MISSING_TYPE_BY_POS:$c,ERR_MISSING_TYPE_BY_NAME:eE,ERR_INVALID_SUBSCR:tE,ERR_MISSING_SUBSCR_CALLBACK:sE,ERR_MISSING_SUBSCR_SQL:rE,ERR_POOL_CLOSING:iE,ERR_POOL_CLOSED:nE,ERR_INVALID_SODA_DOC_CURSOR:_E,ERR_NO_BINARY_AVAILABLE:oE,ERR_INVALID_ERR_NUM:_n,ERR_NODE_TOO_OLD:aE,ERR_INVALID_AQ_MESSAGE:TE,ERR_DBL_CONNECT_STRING:cE,ERR_QUEUE_MAX_EXCEEDED:EE,ERR_UNSUPPORTED_DATA_TYPE_IN_JSON:lE,ERR_DBL_USER:hE,ERR_CONCURRENT_OPS:NE,ERR_POOL_RECONFIGURING:SE,ERR_POOL_STATISTICS_DISABLED:uE,ERR_TOKEN_BASED_AUTH:AE,ERR_POOL_TOKEN_BASED_AUTH:fE,ERR_CONN_TOKEN_BASED_AUTH:dE,ERR_TOKEN_HAS_EXPIRED:on,ERR_NOT_IMPLEMENTED:an,ERR_INIT_ORACLE_CLIENT_ARGS:PE,ERR_MISSING_FILE:pE,ERR_INVALID_NUMBER_OF_CONNECTIONS:RE,ERR_EXEC_MODE_ONLY_FOR_DML:Tn,ERR_CONNECTION_CLOSED:As,ERR_CONNECTION_LOSTCONTACT:Al,ERR_CONNECTION_INCOMPLETE:fl,ERR_PROXY_CONNECTION_FAILURE:dl,ERR_TLS_INIT_FAILURE:Pl,ERR_TLS_AUTH_FAILURE:pl,ERR_TLS_DNMATCH_FAILURE:Rl,ERR_TLS_HOSTMATCH_FAILURE:ml,ERR_INVALID_PACKET:Il,ERR_CONNECTION_TIMEDOUT:Dl,ERR_CONNECTION_REFUSED:Cl,ERR_INVALID_CONNECT_STRING_PARAMETERS:Ol,ERR_CONNECTION_INBAND:gl,ERR_INVALID_CONNECT_STRING_SYNTAX:Ll,ERR_INVALID_EZCONNECT_SYNTAX:yl,ERR_NO_CONFIG_DIR:Bl,ERR_TNS_ENTRY_NOT_FOUND:wl,ERR_CONNECTION_EOF:Vl,ERR_AZURE_CONFIG_PROVIDER_AUTH_FAILED:Fl,ERR_OCIOBJECT_CONFIG_PROVIDER_AUTH_FAILED:Gl,ERR_AZURE_VAULT_AUTH_FAILED:Hl,ERR_AZURE_SERVICE_PRINCIPAL_AUTH_FAILED:ql,ERR_CONFIG_PROVIDER_FAILED_TO_RETRIEVE_CONFIG:xl,ERR_CONFIG_PROVIDER_NOT_SUPPORTED:kl,ERR_CONFIG_PROVIDER_LOAD_FAILED:bl,ERR_INVALID_BIND_NAME:mE,ERR_WRONG_NUMBER_OF_POSITIONAL_BINDS:IE,ERR_BUFFER_LENGTH_INSUFFICIENT:DE,ERR_NCHAR_CS_NOT_SUPPORTED:CE,ERR_MISSING_CREDENTIALS:OE,ERR_UNEXPECTED_END_OF_DATA:gE,ERR_UNEXPECTED_MESSAGE_TYPE:LE,ERR_POOL_HAS_BUSY_CONNECTIONS:yE,ERR_INTERNAL:BE,ERR_INVALID_REF_CURSOR:En,ERR_UNSUPPORTED_VERIFIER_TYPE:xE,ERR_NAN_VALUE:cn,ERR_ORACLE_NUMBER_NO_REPR:ln,ERR_INVALID_SERVICE_NAME:Yl,ERR_INVALID_SID:Ul,ERR_TNS_NAMES_FILE_MISSING:Ml,ERR_INVALID_TYPE_NUM:wE,ERR_INVALID_ORACLE_TYPE_NUM:YE,ERR_UNEXPECTED_NEGATIVE_INTEGER:UE,ERR_INTEGER_TOO_LARGE:ME,ERR_UNEXPECTED_DATA:VE,ERR_OSON_FIELD_NAME_LIMITATION:FE,ERR_OSON_VERSION_NOT_SUPPORTED:KE,ERR_THIN_CONNECTION_ALREADY_CREATED:kE,ERR_UNSUPPORTED_CONVERSION:bE,ERR_FETCH_TYPE_HANDLER_RETURN_VALUE:GE,ERR_FETCH_TYPE_HANDLER_TYPE:HE,ERR_FETCH_TYPE_HANDLER_CONVERTER:qE,ERR_CALL_TIMEOUT_EXCEEDED:hn,ERR_EMPTY_CONNECT_STRING:vE,ERR_UNKOWN_SERVER_SIDE_PIGGYBACK:WE,ERR_UNKNOWN_COLUMN_TYPE_NAME:XE,ERR_INVALID_OBJECT_TYPE_NAME:Nn,ERR_TDS_TYPE_NOT_SUPPORTED:zE,ERR_INVALID_COLL_INDEX_SET:Sn,ERR_INVALID_COLL_INDEX_GET:un,ERR_DELETE_ELEMENTS_OF_VARRAY:An,ERR_WRONG_VALUE_FOR_DBOBJECT_ATTR:QE,ERR_WRONG_VALUE_FOR_DBOBJECT_ELEM:JE,ERR_WRONG_CRED_FOR_EXTAUTH:jE,ERR_MISSING_BIND_VALUE:ZE,ERR_SERVER_VERSION_NOT_SUPPORTED:$E,ERR_UNEXPECTED_XML_TYPE:el,ERR_WRONG_USER_FORMAT_EXTAUTH_PROXY:tl,ERR_TOO_MANY_BATCH_ERRORS:sl,ERR_WRONG_LENGTH_FOR_DBOBJECT_ATTR:rl,ERR_WRONG_LENGTH_FOR_DBOBJECT_ELEM:il,ERR_VECTOR_FORMAT_NOT_SUPPORTED:nl,ERR_VECTOR_VERSION_NOT_SUPPORTED:_l,ERR_OBJECT_IS_NOT_A_COLLECTION:ol,ERR_CURSOR_HAS_BEEN_CLOSED:al,ERR_DML_RETURNING_DUP_BINDS:Tl,ERR_INVALID_TPC_BEGIN_FLAGS:cl,ERR_INVALID_TPC_END_FLAGS:El,ERR_UNKNOWN_TRANSACTION_STATE:ll,ERR_INVALID_TRANSACTION_SIZE:hl,ERR_INVALID_BRANCH_SIZE:Nl,ERR_CONNECTION_CLOSED_CODE:`${pc}-${As}`,ERR_OPERATION_NOT_SUPPORTED_ON_BFILE:Sl,ERR_OPERATION_ONLY_SUPPORTED_ON_BFILE:ul,WRN_COMPILATION_CREATE:fn,assert:qs,assertArgCount:uf,assertParamPropBool:Af,assertParamPropFunction:ff,assertParamPropInt:df,assertParamPropString:Rf,assertParamPropUnsignedInt:Pf,assertParamPropUnsignedIntNonZero:pf,assertParamPropValue:zt,assertParamValue:mf,assertPropValue:If,getErr:gr,throwErr:dn,throwNotImplemented:Df,transformErr:Cf}});var Lr=I((qI,Kl)=>{"use strict";var pn=class pn{constructor(e){let t=new URLSearchParams(e);this.paramMap=new URLSearchParams([...t].map(([s,r])=>[s.toLowerCase(),r]))}modifyOptionsPrecedence(e,t){return t={...t},t.user||(t.user=e.user),t.password||(t.password=e.password),e.connectString&&(t.connectString=e.connectString,t.connectionString=void 0),e.poolMin&&(t.poolMin=e.poolMin),e.poolMax&&(t.poolMax=e.poolMax),e.poolIncrement&&(t.poolIncrement=e.poolIncrement),e.poolTimeout&&(t.poolTimeout=e.poolTimeout),e.poolPingInterval&&(t.poolPingInterval=e.poolPingInterval),e.poolPingTimeout&&(t.poolPingTimeout=e.poolPingTimeout),e.stmtCacheSize&&(t.stmtCacheSize=e.stmtCacheSize),e.prefetchRows&&(t.prefetchRows=e.prefetchRows),e.lobPrefetch&&(t.lobPrefetch=e.lobPrefetch),t}_addParam(e,t){let s=e.toLowerCase();this.paramMap.set(s,t)}_parsePwd(e){let t=new RegExp("(?<vault_url>https://[A-Za-z0-9._-]+)/secrets/(?<secretKey>[A-Za-z][A-Za-z0-9-]*)$","g"),s=[];for(let r of e.matchAll(t))s[0]=r.groups.vault_url,s[1]=r.groups.secretKey;return s}};T(pn,"base");var Pn=pn;Kl.exports={base:Pn}});var jl=I((KI,Jl)=>{"use strict";var Wl,Rn,mn,Xl,zl,Ql,yr=U(),{base:Of}=Lr(),Dn=class Dn extends Of{constructor(e,t){super(t),this._addParam("appconfigname",e)}init(){({AppConfigurationClient:Wl}=require("@azure/app-configuration")),{ClientSecretCredential:Rn,ClientCertificateCredential:mn,ChainedTokenCredential:Xl,ManagedIdentityCredential:zl,EnvironmentCredential:Ql}=require("@azure/identity")}_withChainedTokenCredential(){let e=[];return this.paramMap.get("azure_client_secret")&&e.push(new Rn(this.paramMap.get("azure_tenant_id"),this.paramMap.get("azure_client_id"),this.paramMap.get("azure_client_secret"))),this.paramMap.get("azure_client_certificate_path")&&e.push(new mn(this.paramMap.get("azure_tenant_id"),this.paramMap.get("azure_client_id"),this.paramMap.get("azure_client_certificate_path"))),this.paramMap.get("azure_managed_identity_client_id")&&e.push(this.paramMap.get("azure_managed_identity_client_id")),e.push(new Ql),new Xl(...e)}_returnCredential(){let e=null;if(this.paramMap.get("authentication")&&(e=this.paramMap.get("authentication").toUpperCase()),e&&e!="AZURE_DEFAULT")if(e=="AZURE_SERVICE_PRINCIPAL"){if(this.paramMap.get("azure_client_certificate_path"))return new mn(this.paramMap.get("azure_tenant_id"),this.paramMap.get("azure_client_id"),this.paramMap.get("azure_client_certificate_path"));if(this.paramMap.get("azure_client_secret"))return new Rn(this.paramMap.get("azure_tenant_id"),this.paramMap.get("azure_client_id"),this.paramMap.get("azure_client_secret"));yr.throwErr(yr.ERR_AZURE_SERVICE_PRINCIPAL_AUTH_FAILED)}else{if(e=="AZURE_MANAGED_IDENTITY")return new zl(this.paramMap.get("azure_managed_identity_client_id"));yr.throwErr(yr.ERR_AZURE_CONFIG_PROVIDER_AUTH_FAILED,e)}else return this._withChainedTokenCredential()}async _getConfigurationSetting(e,t,s){return await e.getConfigurationSetting({key:t,label:s})}async returnConfig(){let e={},t=this.paramMap.get("label"),s=this._returnCredential(),r=new Wl("https://"+this.paramMap.get("appconfigname"),s);e.connectString=(await this._getConfigurationSetting(r,this.paramMap.get("key")+"connect_descriptor",t)).value;try{let a=(await this._getConfigurationSetting(r,this.paramMap.get("key")+"node-oracledb",t)).value,c=JSON.parse(a);for(let E in c){var n=c[E];e[E]=n}}catch{e["node-oracledb"]=null}try{e.user=(await this._getConfigurationSetting(r,this.paramMap.get("key")+"user",t)).value}catch{e.user=null}let o=null;try{o=await this._getConfigurationSetting(r,this.paramMap.get("key")+"password",t)}catch{e.password=null}if(o){let a;try{a=JSON.parse(o.value)}catch{a=o.value}if(a.uri){let{SecretClient:c}=require("@azure/keyvault-secrets"),E=await this._parsePwd(a.uri),l=new c(E[0],s);e.password=(await l.getSecret(E[1])).value}else e.password=o.value}return e}};T(Dn,"AzureProvider");var In=Dn;Jl.exports=In});var $l=I((XI,Zl)=>{"use strict";var fs=U(),{base:gf}=Lr(),Lf=require("fs"),yf=new RegExp("(?<objservername>[A-Za-z0-9._-]+)/n/(?<namespace>[A-Za-z0-9._-]+)/b/(?<bucketname>[A-Za-z0-9._-]+)/o/(?<filename>[A-Za-z0-9._-]+)(/c/(?<alias>.+))?$"),Ft={},On=class On extends gf{constructor(e,t){super(t);let s=e.match(yf);s&&(this._addParam("objservername",s.groups.objservername),this._addParam("namespace",s.groups.namespace),this._addParam("bucketname",s.groups.bucketname),this._addParam("filename",s.groups.filename),s.groups.alias&&this._addParam("alias",s.groups.alias))}init(){Ft.common=require("oci-common"),Ft.objectstorage=require("oci-objectstorage")}async _streamToString(e){let t=[];for await(let s of e)t.push(Buffer.from(s));return Buffer.concat(t).toString("utf-8")}async _returnCredential(){let e=null,t=null;if(this.paramMap.get("authentication")&&(t=this.paramMap.get("authentication").toUpperCase()),t&&t!="OCI_DEFAULT")t=="OCI_INSTANCE_PRINCIPAL"?e=await new Ft.common.InstancePrincipalsAuthenticationDetailsProviderBuilder().build():t=="OCI_RESOURCE_PRINCIPAL"?e=await new Ft.common.ResourcePrincipalAuthenticationDetailsProvider.builder:fs.throwErr(fs.ERR_OCIOBJECT_CONFIG_PROVIDER_AUTH_FAILED,t);else try{e=new Ft.common.ConfigFileAuthenticationDetailsProvider(this.paramMap.get("oci_profile_path"),this.paramMap.get("oci_profile"))}catch(s){if(!this.paramMap.get("oci_tenancy")||!this.paramMap.get("oci_user"))throw s;let r=Lf.readFileSync(this.paramMap.get("oci_key_file"),{encoding:"utf8"}),n=this.retrieveRegion(this.paramMap.get("objservername"));e=new Ft.common.SimpleAuthenticationDetailsProvider(this.paramMap.get("oci_tenancy"),this.paramMap.get("oci_user"),this.paramMap.get("oci_fingerprint"),r,void 0,Ft.common.Region[n])}return e}async returnConfig(){let e={},t=await this._returnCredential(),s=new Ft.objectstorage.ObjectStorageClient({authenticationDetailsProvider:t}),r={objectName:this.paramMap.get("filename"),bucketName:this.paramMap.get("bucketname"),namespaceName:this.paramMap.get("namespace")},n,o=await s.getObject(r),a=await this._streamToString(o.value),c=JSON.parse(a),E=this.paramMap.get("alias");E&&(c=c[E]);let u=c["node-oracledb"];for(let d in u){var p=u[d];e[d]=p}if(e.connectString=c.connect_descriptor,e.user=c.user,c.password)if(c.password.type=="vault-azure")if(c.password.authentication){let{SecretClient:d}=require("@azure/keyvault-secrets"),{ClientSecretCredential:N,ClientCertificateCredential:A}=require("@azure/identity");c.password.authentication.azure_client_secret?n=new N(c.password.authentication.azure_tenant_id,c.password.authentication.azure_client_id,c.password.authentication.azure_client_secret):c.password.authentication.azure_client_certificate_path?n=new A(c.password.authentication.azure_tenant_id,c.password.authentication.azure_client_id,c.password.authentication.azure_client_certificate_path):fs.throwErr(fs.ERR_AZURE_VAULT_AUTH_FAILED);let P=await this._parsePwd(c.password.value),S=new d(P[0],n);e.password=(await S.getSecret(P[1])).value}else fs.throwErr(fs.ERR_AZURE_VAULT_AUTH_FAILED);else if(c.password.type=="vault-oci"){let d=require("oci-secrets"),N=new d.SecretsClient({authenticationDetailsProvider:t}),A={secretId:c.password.value},P=await N.getSecretBundle(A);e.password=P.secretBundle.secretBundleContent.content}else c.password&&(e.password=c.password);else e.password=null;return e}retrieveRegion(e){return e.split(".")[1].toUpperCase().replaceAll("-","_")}};T(On,"OCIProvider");var Cn=On;Zl.exports=Cn});var UR,gn=DA(()=>{UR=jT({"./configProviders/azure.js":()=>jl(),"./configProviders/base.js":()=>Lr(),"./configProviders/ociobject.js":()=>$l()})});var th=I((jI,eh)=>{"use strict";var ye=U(),yn=class yn{getCondition(){ye.throwNotImplemented("getting condition (dequeue options)")}getConsumerName(){ye.throwNotImplemented("getting consumer name (dequeue options)")}getCorrelation(){ye.throwNotImplemented("getting correlation (dequeue options)")}getMode(){ye.throwNotImplemented("getting mode (dequeue options)")}getMsgId(){ye.throwNotImplemented("getting message id (dequeue options)")}getNavigation(){ye.throwNotImplemented("getting navigation (dequeue options)")}getTransformation(){ye.throwNotImplemented("getting transformation (dequeue options)")}getVisibility(){ye.throwNotImplemented("getting visibility (dequeue options)")}getWait(){ye.throwNotImplemented("getting wait (dequeue options)")}setCondition(){ye.throwNotImplemented("setting condition (dequeue options)")}setConsumerName(){ye.throwNotImplemented("setting consumer name (dequeue options)")}setCorrelation(){ye.throwNotImplemented("setting correlation (dequeue options)")}setMode(){ye.throwNotImplemented("setting mode (dequeue options)")}setMsgId(){ye.throwNotImplemented("setting message id (dequeue options)")}setNavigation(){ye.throwNotImplemented("setting navigation (dequeue options)")}setTransformation(){ye.throwNotImplemented("setting transformation (dequeue options)")}setVisibility(){ye.throwNotImplemented("setting visibility (dequeue options)")}setWait(){ye.throwNotImplemented("setting wait (dequeue options)")}};T(yn,"AqDeqOptionsImpl");var Ln=yn;eh.exports=Ln});var rh=I(($I,sh)=>{"use strict";var ds=U(),wn=class wn{getDeliveryMode(){ds.throwNotImplemented("getting delivery mode (enqueue options)")}getTransformation(){ds.throwNotImplemented("getting transformation (enqueue options)")}getVisibility(){ds.throwNotImplemented("getting visibility (enqueue options)")}setDeliveryMode(){ds.throwNotImplemented("setting delivery mode (enqueue options)")}setTransformation(){ds.throwNotImplemented("setting transformation (enqueue options)")}setVisibility(){ds.throwNotImplemented("setting visibility (enqueue options)")}};T(wn,"AqEnqOptionsImpl");var Bn=wn;sh.exports=Bn});var nh=I((tD,ih)=>{"use strict";var ot=U(),Un=class Un{getCorrelation(){ot.throwNotImplemented("getting correlation (message)")}getDelay(){ot.throwNotImplemented("getting delay (message)")}getDeliveryMode(){ot.throwNotImplemented("getting delivery mode (message)")}getExceptionQueue(){ot.throwNotImplemented("getting exception queue (message)")}getExpiration(){ot.throwNotImplemented("getting expiration (message)")}getMsgId(){ot.throwNotImplemented("getting message id (message)")}getNumAttempts(){ot.throwNotImplemented("getting number of attempts (message)")}getOriginalMsgId(){ot.throwNotImplemented("getting original message id (message)")}getPayload(){ot.throwNotImplemented("getting payload (message)")}getPriority(){ot.throwNotImplemented("getting priority (message)")}getState(){ot.throwNotImplemented("getting state (message)")}};T(Un,"AqMessageImpl");var Yn=Un;ih.exports=Yn});var oh=I((rD,_h)=>{"use strict";var Br=U(),Vn=class Vn{_getConnImpl(){return this._connection}deqMany(){Br.throwNotImplemented("dequeuing multiple items from a queue")}deqOne(){Br.throwNotImplemented("dequeuing a single item from a queue")}enqMany(){Br.throwNotImplemented("enqueuing multiple items from a queue")}enqOne(){Br.throwNotImplemented("enqueuing a single item from a queue")}};T(Vn,"AqQueueImpl");var Mn=Vn;_h.exports=Mn});var wr=I((nD,ah)=>{"use strict";var $e=U(),xn=class xn{constructor(e){this._objType=e}append(){$e.throwNotImplemented("appending element to collection")}copy(){$e.throwNotImplemented("copying an object")}deleteElement(){$e.throwNotImplemented("deleting an element from a collection")}getElement(){$e.throwNotImplemented("getting an element from a collection")}getFirstIndex(){$e.throwNotImplemented("getting the first index in a collection")}getKeys(){$e.throwNotImplemented("returning the keys of a collection")}getLastIndex(){$e.throwNotImplemented("getting the last index in a collection")}getNextIndex(){$e.throwNotImplemented("getting the next index in a collection")}getPrevIndex(){$e.throwNotImplemented("getting the previous index in a collection")}getValues(){$e.throwNotImplemented("getting the values in a collection")}hasElement(){$e.throwNotImplemented("getting if value exists in a collection")}setElement(){$e.throwNotImplemented("setting an element in a collection")}trim(){$e.throwNotImplemented("trimming elements from a collection")}};T(xn,"DbObjectImpl");var Fn=xn;ah.exports=Fn});var Yr=I((oD,Th)=>{"use strict";var Bf=nt(),F=U(),wf=require("util"),bn=class bn{constructor(){this._inProgress=!1,this._dbObjectTypes=new Map,this._requestQueue=[],this._osonMaxFieldNameSize=255}async _acquireLock(){this._inProgress&&(Bf.errorOnConcurrentExecute&&F.throwErr(F.ERR_CONCURRENT_OPS),await new Promise((e,t)=>{let s={resolve:e,reject:t};this._requestQueue.push(s)})),this._inProgress=!0}_getConnImpl(){return this}_getDbObjectType(e,t,s,r){let n;if(r&&(n=this._dbObjectTypes.get(r),n))return n;let o=s?`${e}.${s}.${t}`:`${e}.${t}`;return n=this._dbObjectTypes.get(o),n||(n={oid:r,fqn:o,schema:e,name:t,packageName:s,partial:!0,isXmlType:e==="SYS"&&t==="XMLTYPE"},this._dbObjectTypes.set(o,n)),r&&!n.oid&&(n.oid=r,this._dbObjectTypes.set(r,n)),n}_isDate(e){return wf.types.isDate(e)}_releaseLock(){this._requestQueue.length>0?this._requestQueue.shift().resolve():this._inProgress=!1}breakExecution(){F.throwNotImplemented("getting Oracle Server version number")}changePassword(){F.throwNotImplemented("changing the password")}close(){F.throwNotImplemented("closing the connection")}commit(){F.throwNotImplemented("committing the transaction")}createLob(){F.throwNotImplemented("creating a temporary LOB")}execute(){F.throwNotImplemented("executing a SQL statement")}executeMany(){F.throwNotImplemented("executing a SQL statement multiple times")}getCallTimeout(){F.throwNotImplemented("getting call timeout")}getCurrentSchema(){F.throwNotImplemented("getting current schema")}getDbDomain(){F.throwNotImplemented("getting db domain")}getDbName(){F.throwNotImplemented("getting db name")}getDbObjectClass(){F.throwNotImplemented("getting a database object class")}getExternalName(){F.throwNotImplemented("getting the external name")}getInstanceName(){F.throwNotImplemented("getting the Oracle Database instance name.")}getInternalName(){F.throwNotImplemented("getting the internal name")}getMaxOpenCursors(){F.throwNotImplemented("getting max open cursors")}getOracleServerVersion(){F.throwNotImplemented("getting Oracle Server version number")}getOracleServerVersionString(){F.throwNotImplemented("getting Oracle Server version as a string")}getQueue(){F.throwNotImplemented("getting a queue")}getServiceName(){F.throwNotImplemented("getting service name")}getSodaDatabase(){F.throwNotImplemented("getting a SODA database")}getStatementInfo(){F.throwNotImplemented("getting information about a statement")}getStmtCacheSize(){F.throwNotImplemented("getting the statement cache size")}getTag(){F.throwNotImplemented("getting the tag for the connection")}getTransactionInProgress(){F.throwNotImplemented("getting the status of an active transaction on the connection")}getWarning(){F.throwNotImplemented("getting information about warning")}isHealthy(){F.throwNotImplemented("getting the health of the connection")}ping(){F.throwNotImplemented("sending a ping to the database")}rollback(){F.throwNotImplemented("rolling back a transaction")}setAction(){F.throwNotImplemented("setting end-to-end attribute 'action'")}setCallTimeout(){F.throwNotImplemented("setting call timeout")}setClientId(){F.throwNotImplemented("setting end-to-end attribute 'clientId'")}setClientInfo(){F.throwNotImplemented("setting end-to-end attribute 'clientInfo'")}setCurrentSchema(){F.throwNotImplemented("setting the current schema")}setDbOp(){F.throwNotImplemented("setting end-to-end attribute 'dbOp'")}setECID(){F.throwNotImplemented("setting end-to-end attribute 'ecid'")}setExternalName(){F.throwNotImplemented("setting the external name")}setInternalName(){F.throwNotImplemented("setting the internal name")}setStmtCacheSize(){F.throwNotImplemented("setting the size of the statement cache")}setModule(){F.throwNotImplemented("setting end-to-end attribute 'module'")}setTag(){F.throwNotImplemented("setting the tag for the connection")}shutdown(){F.throwNotImplemented("shutting down the database instance")}startup(){F.throwNotImplemented("starting up the database instance")}subscribe(){F.throwNotImplemented("subscribing to events in the database")}tpcBegin(){F.throwNotImplemented("starting a two-phase transaction")}tpcCommit(){F.throwNotImplemented("committing a two-phase transaction")}tpcEnd(){F.throwNotImplemented("ending a two-phase transaction")}tpcForget(){F.throwNotImplemented("forgetting a two-phase transaction")}tpcPrepare(){F.throwNotImplemented("preparing a two-phase transaction")}tpcRollback(){F.throwNotImplemented("rolling back a two-phase transaction")}unsubscribe(){F.throwNotImplemented("unsubscribing from events")}};T(bn,"ConnectionImpl");var kn=bn;Th.exports=kn});var qn=I((TD,ch)=>{"use strict";var Yf=Yr(),Qt=U(),Hn=class Hn{_getConnImpl(){let e=this._parentObj;for(;!(e instanceof Yf);)e=e._parentObj;return e}close(){Qt.throwNotImplemented("closing a LOB")}fileExists(){Qt.throwNotImplemented("check if BFILE exists")}getData(){Qt.throwNotImplemented("getting all of the data from a LOB")}getDirFileName(){Qt.throwNotImplemented("getting directory and filename of LOB(BFILE)")}read(){Qt.throwNotImplemented("reading from a LOB")}setDirFileName(){Qt.throwNotImplemented("setting directory and filename of LOB(BFILE)")}write(){Qt.throwNotImplemented("writing to a LOB")}};T(Hn,"LobImpl");var Gn=Hn;ch.exports=Gn});var Wn=I((ED,lh)=>{"use strict";var Be=U(),Eh=Le(),Kn=class Kn{async _accessTokenHandler(e,t,s,r){let n;try{let o=e(s,r);o instanceof Promise&&(o=await o),Eh.isTokenValid(o)||Be.throwErr(Be.ERR_TOKEN_HAS_EXPIRED),typeof o=="object"&&o.privateKey!==void 0&&(o.privateKey=Eh.denormalizePrivateKey(o.privateKey)),n=o}finally{this.returnAccessToken(t,n)}}close(){Be.throwNotImplemented("closing the pool")}create(){Be.throwNotImplemented("creating the pool")}getConnection(){Be.throwNotImplemented("getting a connection from the pool")}getConnectionsInUse(){Be.throwNotImplemented("getting num connection in use")}getConnectionsOpen(){Be.throwNotImplemented("getting num connection open")}getPoolIncrement(){Be.throwNotImplemented("getting the pool increment")}getPoolMax(){Be.throwNotImplemented("getting the pool max")}getPoolMaxPerShard(){Be.throwNotImplemented("getting the pool max per shard")}getPoolMin(){Be.throwNotImplemented("getting the pool min")}getPoolPingInterval(){Be.throwNotImplemented("getting the pool ping interval")}getPoolPingTimeout(){Be.throwNotImplemented("getting the pool ping Timeout")}getPoolTimeout(){Be.throwNotImplemented("getting the pool timeout")}getStmtCacheSize(){Be.throwNotImplemented("getting the pool statement cache size")}getSodaMetaDataCache(){Be.throwNotImplemented("getting the SODA metadata cache flag")}reconfigure(){Be.throwNotImplemented("reconfiguring the pool")}setAccessToken(){Be.throwNotImplemented("sets the access token")}};T(Kn,"PoolImpl");var vn=Kn;lh.exports=vn});var Qn=I((hD,hh)=>{"use strict";var Uf=U(),zn=class zn{constructor(){this._featureFlags={},this._featureFlags.oldJsonColumnAsObj=!1}get oldJsonColumnAsObj(){return this._featureFlags.oldJsonColumnAsObj}set oldJsonColumnAsObj(e){Uf.assertPropValue(typeof e=="boolean","oldJsonColumnAsObj"),this._featureFlags.oldJsonColumnAsObj=e}};T(zn,"Future");var Xn=zn;hh.exports=new Xn});var Jt=I((SD,Sh)=>{"use strict";var{Buffer:Jn}=require("buffer"),{Duplex:Mf}=require("stream"),Nh=Ye(),de=U(),Mr=Le(),Ur=Fe(),jn=class jn extends Mf{constructor(){super({decodeStrings:!1}),this.offset=1,this._isActive=!1,this.once("finish",function(){this._autoCloseLob&&this.destroy()})}_checkIsBfile(){this.type!==Ur.DB_TYPE_BFILE&&de.throwErr(de.ERR_OPERATION_ONLY_SUPPORTED_ON_BFILE)}_checkNotBfile(){this.type===Ur.DB_TYPE_BFILE&&de.throwErr(de.ERR_OPERATION_NOT_SUPPORTED_ON_BFILE)}async _destroy(e,t){if(e&&e.message.startsWith("NJS-003:")&&delete this._impl,this._impl){let s=this._impl;delete this._impl;try{await s.close()}catch(r){t(r);return}}t(e)}async _read(){try{let e=await this._serializedRead(this.offset);e?(this.offset+=e.length,this.push(e)):(this.push(null),this._autoCloseLob&&this.destroy())}catch(e){throw this._autoCloseLob&&this.destroy(e),e}}async _readData(e){de.assert(this._impl,de.ERR_INVALID_LOB);try{return await this._impl.read(e)}catch(t){throw de.transformErr(t,this._readData)}}_setup(e,t){this._impl=e,this.type!==Ur.DB_TYPE_BFILE&&(this._chunkSize=e.getChunkSize()),this._pieceSize=e.getPieceSize(),this._length=e.getLength(),this._type=e.getType(),typeof this._type=="number"&&(this._type=Ur.getTypeByNum(this._type)),this._autoCloseLob=t}async _write(e,t,s){this.type==Nh.DB_TYPE_BLOB&&!Jn.isBuffer(e)?e=Jn.from(e):this.type==Nh.DB_TYPE_CLOB&&Jn.isBuffer(e)&&(e=e.toString());try{await this._serializedWrite(this.offset,e)}catch(r){this._autoCloseLob&&this.destroy(r),s(r);return}this.offset+=e.length,s(null)}async _writeData(e,t){de.assert(this._impl,de.ERR_INVALID_LOB);try{await this._impl.write(e,t)}catch(s){throw de.transformErr(s,this._writeData)}}get chunkSize(){return this._checkNotBfile(),this._chunkSize}async close(){if(de.assertArgCount(arguments,0,0),this._impl){let e=this._impl;delete this._impl;try{await e.close(),this.emit("close")}catch(t){this.destroy(t)}}}async getData(e,t){return de.assertArgCount(arguments,0,2),e===void 0?e=1:de.assertParamValue(Number.isInteger(e)&&e>0,1),t===void 0?t=0:de.assertParamValue(Number.isInteger(t)&&t>0,2),de.assert(this._impl,de.ERR_INVALID_LOB),await this._impl.getData(e,t)}getDirFileName(){return this._checkIsBfile(),this._impl.getDirFileName()}setDirFileName(e){this._checkIsBfile(),de.assertArgCount(arguments,1,1),de.assertParamValue(Mr.isObject(e),1),this._impl.setDirFileName(e)}async fileExists(){return this._checkIsBfile(),await this._impl.fileExists()}get length(){return this._length}get pieceSize(){return this._pieceSize}set pieceSize(e){de.assertPropValue(Number.isInteger(e)&&e>=0,"pieceSize"),de.assert(this._impl,de.ERR_INVALID_LOB),this._impl.setPieceSize(e),this._pieceSize=e}get type(){return this._type}};T(jn,"Lob");var xt=jn;Mr.wrapFns(xt.prototype,de.ERR_BUSY_LOB,"close","fileExists","getData");xt.prototype._serializedRead=Mr.serialize(xt.prototype._readData);xt.prototype._serializedWrite=Mr.serialize(xt.prototype._writeData);Sh.exports=xt});var xr=I((AD,Ah)=>{"use strict";var{BaseBuffer:Vf,GrowableBuffer:s_}=Ss(),{Buffer:Ps}=require("buffer"),Y=Hs(),kt=U(),Vr=Fe(),Ff=require("util"),uh=Cr(),xf=Le(),r_=class r_ extends Vf{_decodeContainerNode(e){let t,s,r,n=this.pos-this.treeSegPos-1,o=this._getNumChildren(e),a=(e&64)===0;if(o===void 0){let c=this._getOffset(e);s=this.pos,this.pos=this.treeSegPos+c;let E=this.readUInt8();o=this._getNumChildren(E),t=a?{}:new Array(o),r=this.pos}else a?(t={},r=this.pos,s=this.pos+this.fieldIdLength*o):(t=new Array(o),s=this.pos);for(let c=0;c<o;c++){let E;if(a){let u;this.fieldIdLength===1?u=this.buf[r]:this.fieldIdLength==2?u=this.buf.readUInt16BE(r):u=this.buf.readUInt32BE(r),E=this.fieldNames[u-1],r+=this.fieldIdLength}this.pos=s;let l=this._getOffset(e);this.relativeOffsets&&(l+=n),s=this.pos,this.pos=this.treeSegPos+l,a?t[E]=this._decodeNode():t[c]=this._decodeNode()}return t}_decodeNode(){let e=this.readUInt8();if(e&128)return this._decodeContainerNode(e);if(e===Y.TNS_JSON_TYPE_NULL)return null;if(e===Y.TNS_JSON_TYPE_TRUE)return!0;if(e===Y.TNS_JSON_TYPE_FALSE)return!1;if(e===Y.TNS_JSON_TYPE_DATE||e===Y.TNS_JSON_TYPE_TIMESTAMP7)return this.parseOracleDate(this.readBytes(7));if(e===Y.TNS_JSON_TYPE_TIMESTAMP)return this.parseOracleDate(this.readBytes(11));if(e===Y.TNS_JSON_TYPE_TIMESTAMP_TZ)return this.parseOracleDate(this.readBytes(13));if(e===Y.TNS_JSON_TYPE_BINARY_FLOAT)return this.parseBinaryFloat(this.readBytes(4));if(e===Y.TNS_JSON_TYPE_BINARY_DOUBLE)return this.parseBinaryDouble(this.readBytes(8));if(e===Y.TNS_JSON_TYPE_STRING_LENGTH_UINT8)return this.readBytes(this.readUInt8()).toString();if(e===Y.TNS_JSON_TYPE_STRING_LENGTH_UINT16)return this.readBytes(this.readUInt16BE()).toString();if(e===Y.TNS_JSON_TYPE_STRING_LENGTH_UINT32)return this.readBytes(this.readUInt32BE()).toString();if(e===Y.TNS_JSON_TYPE_NUMBER_LENGTH_UINT8)return parseFloat(this.readOracleNumber());if(e===Y.TNS_JSON_TYPE_ID){let s=this.readBytes(this.readUInt8()),r=new Vr.JsonId(s.length);return s.copy(r),r}else{if(e===Y.TNS_JSON_TYPE_BINARY_LENGTH_UINT16)return Ps.from(this.readBytes(this.readUInt16BE()));if(e===Y.TNS_JSON_TYPE_BINARY_LENGTH_UINT32)return Ps.from(this.readBytes(this.readUInt32BE()));if(e===Y.TNS_JSON_TYPE_EXTENDED&&(e=this.readUInt8(),e===Y.TNS_JSON_TYPE_VECTOR)){let s=this.readBytes(this.readUInt32BE());return new uh.VectorDecoder(s).decode()}}let t=e&240;if(t===32||t===96){let s=e&15;return parseFloat(this.parseOracleNumber(this.readBytes(s+1)))}else if(t===64||t===80){let s=e&15;return parseFloat(this.parseOracleNumber(this.readBytes(s)))}else if(!(e&224))return e===0?"":this.readBytes(e).toString();kt.throwErr(kt.ERR_UNSUPPORTED_DATA_TYPE_IN_JSON,e)}_getNumChildren(e){let t=e&24;if(t===0)return this.readUInt8();if(t===8)return this.readUInt16BE();if(t===16)return this.readUInt32BE()}_getOffset(e){return e&32?this.readUInt32BE():this.readUInt16BE()}_getFieldNames(e,t,s,r,n){this.skipBytes(t*n);let o=this.pos;this.skipBytes(t*s);let a=this.readBytes(r),c=this.pos;this.pos=o;let E;for(let l=e;l<e+t;l++){s===2?E=this.readUInt16BE():E=this.readUInt32BE();let u;n===1?u=a.readUInt8(E):u=a.readUInt16BE(E),this.fieldNames[l]=a.subarray(E+n,E+u+n).toString()}this.pos=c}decode(){let e=this.readBytes(3);(e[0]!==Y.TNS_JSON_MAGIC_BYTE_1||e[1]!==Y.TNS_JSON_MAGIC_BYTE_2||e[2]!==Y.TNS_JSON_MAGIC_BYTE_3)&&kt.throwErr(kt.ERR_UNEXPECTED_DATA,e.toString("hex"));let t=this.readUInt8();t!==Y.TNS_JSON_VERSION_MAX_FNAME_255&&t!==Y.TNS_JSON_VERSION_MAX_FNAME_65535&&kt.throwErr(kt.ERR_OSON_VERSION_NOT_SUPPORTED,t);let s=this.readUInt16BE();if(this.relativeOffsets=s&Y.TNS_JSON_FLAG_REL_OFFSET_MODE,s&Y.TNS_JSON_FLAG_IS_SCALAR)return s&Y.TNS_JSON_FLAG_TREE_SEG_UINT32?this.skipBytes(4):this.skipBytes(2),this._decodeNode();let r;s&Y.TNS_JSON_FLAG_NUM_FNAMES_UINT32?(r=this.readUInt32BE(),this.fieldIdLength=4):s&Y.TNS_JSON_FLAG_NUM_FNAMES_UINT16?(r=this.readUInt16BE(),this.fieldIdLength=2):(r=this.readUInt8(),this.fieldIdLength=1);let n,o;s&Y.TNS_JSON_FLAG_FNAMES_SEG_UINT32?(n=4,o=this.readUInt32BE()):(n=2,o=this.readUInt16BE());let a,c,E=0;return t===Y.TNS_JSON_VERSION_MAX_FNAME_65535&&(this.readUInt16BE()&Y.TNS_JSON_FLAG_SEC_FNAMES_SEG_UINT16?a=2:a=4,E=this.readUInt32BE(),c=this.readUInt32BE()),s&Y.TNS_JSON_FLAG_TREE_SEG_UINT32?this.skipBytes(4):this.skipBytes(2),this.skipBytes(2),this.fieldNames=new Array(r+E),r>0&&this._getFieldNames(0,r,n,o,1),E>0&&this._getFieldNames(r,E,a,c,2),this.treeSegPos=this.pos,this._decodeNode()}};T(r_,"OsonDecoder");var Zn=r_,i_=class i_{constructor(e,t){this.name=e,this.nameBytes=Ps.from(e),this.nameBytes.length>t&&kt.throwErr(kt.ERR_OSON_FIELD_NAME_LIMITATION,t);let s=0x811C9DC5n,r=16777619n,n=0xffffffffn;this.hashId=s;for(let o=0;o<this.nameBytes.length;o++){let a=BigInt(this.nameBytes[o]);this.hashId=(this.hashId^a)*r&n}this.hashId=Number(this.hashId)&255}};T(i_,"OsonFieldName");var $n=i_,n_=class n_ extends s_{constructor(){super(),this.fieldNames=[]}addName(e){e.offset=this.pos,e.nameBytes.length<=255?this.writeUInt8(e.nameBytes.length):this.writeUInt16BE(e.nameBytes.length),this.writeBytes(e.nameBytes),this.fieldNames.push(e)}_processFieldNames(e){this.fieldNames.sort((t,s)=>t.hashId<s.hashId?-1:t.hashId>s.hashId?1:t.nameBytes.length<s.nameBytes.length?-1:t.nameBytes.length>s.nameBytes.length?1:t.name<s.name?-1:t.name>s.name?1:0);for(let t=0;t<this.fieldNames.length;t++)this.fieldNames[t].fieldId=e+t+1;this.fieldNames.length<256?this.fieldIdSize=1:this.fieldNames.length<65536?this.fieldIdSize=2:this.fieldIdSize=4}};T(n_,"OsonFieldNamesSegment");var Fr=n_,__=class __ extends s_{_encodeArray(e,t){this._encodeContainer(Y.TNS_JSON_TYPE_ARRAY,e.length);let s=e.length*4,n=this.reserveBytes(s);for(let o of e)this.buf.writeUInt32BE(this.pos,n),n+=4,this.encodeNode(o,t)}_encodeContainer(e,t){e|=32,t>65535?e|=16:t>255&&(e|=8),this.writeUInt8(e),t<256?this.writeUInt8(t):t<65536?this.writeUInt16BE(t):this.writeUInt32BE(t)}_encodeObject(e,t){let s=e.values.length;this._encodeContainer(Y.TNS_JSON_TYPE_OBJECT,s);let r=this.pos,n=this.pos+s*t.fieldIdSize,o=n+s*4;this.reserveBytes(o-this.pos);for(let a=0;a<e.fields.length;a++){let c=t.fieldNamesMap.get(e.fields[a]);t.fieldIdSize==1?this.buf[r]=c.fieldId:t.fieldIdSize==2?this.buf.writeUInt16BE(c.fieldId,r):this.buf.writeUInt32BE(c.fieldId,r),this.buf.writeUInt32BE(this.pos,n),r+=t.fieldIdSize,n+=4,this.encodeNode(e.values[a],t)}}encodeNode(e,t){if(e==null)this.writeUInt8(Y.TNS_JSON_TYPE_NULL);else if(typeof e=="boolean")e?this.writeUInt8(Y.TNS_JSON_TYPE_TRUE):this.writeUInt8(Y.TNS_JSON_TYPE_FALSE);else if(typeof e=="number")this.writeUInt8(Y.TNS_JSON_TYPE_NUMBER_LENGTH_UINT8),this.writeOracleNumber(e.toString());else if(typeof e=="string"){let s=Ps.from(e);s.length<256?(this.writeUInt8(Y.TNS_JSON_TYPE_STRING_LENGTH_UINT8),this.writeUInt8(s.length)):s.length<65536?(this.writeUInt8(Y.TNS_JSON_TYPE_STRING_LENGTH_UINT16),this.writeUInt16BE(s.length)):(this.writeUInt8(Y.TNS_JSON_TYPE_STRING_LENGTH_UINT32),this.writeUInt32BE(s.length)),s.length>0&&this.writeBytes(s)}else if(Ff.types.isDate(e))e.getUTCMilliseconds()===0?(this.writeUInt8(Y.TNS_JSON_TYPE_TIMESTAMP7),this.writeOracleDate(e,Vr.DB_TYPE_DATE,!1)):(this.writeUInt8(Y.TNS_JSON_TYPE_TIMESTAMP),this.writeOracleDate(e,Vr.DB_TYPE_TIMESTAMP,!1));else if(Ps.isBuffer(e))e.length<65536?(this.writeUInt8(Y.TNS_JSON_TYPE_BINARY_LENGTH_UINT16),this.writeUInt16BE(e.length)):(this.writeUInt8(Y.TNS_JSON_TYPE_BINARY_LENGTH_UINT32),this.writeUInt32BE(e.length)),this.writeBytes(e);else if(Array.isArray(e))this._encodeArray(e,t);else if(xf.isVectorValue(e)){this.writeUInt8(Y.TNS_JSON_TYPE_EXTENDED),this.writeUInt8(Y.TNS_JSON_TYPE_VECTOR);let r=new uh.VectorEncoder().encode(e);this.writeUInt32BE(r.length),this.writeBytes(r)}else e instanceof Vr.JsonId?(this.writeUInt8(Y.TNS_JSON_TYPE_ID),this.writeUInt8(e.length),this.writeBytes(Ps.from(e.buffer))):this._encodeObject(e,t)}};T(__,"OsonTreeSegment");var e_=__,o_=class o_ extends s_{_addFieldName(e){let t=new $n(e,this.maxFieldNameSize);this.fieldNamesMap.set(e,t),t.nameBytes.length<=255?this.shortFieldNamesSeg.addName(t):(this.longFieldNamesSeg||(this.longFieldNamesSeg=new Fr),this.longFieldNamesSeg.addName(t))}_examineNode(e){if(Array.isArray(e))for(let t of e)this._examineNode(t);else if(e&&Array.isArray(e.fields))for(let t=0;t<e.fields.length;t++){let s=e.fields[t],r=e.values[t];this.fieldNamesMap.has(s)||this._addFieldName(s),this._examineNode(r)}}_writeExtendedHeader(){if(this.fieldIdSize===1?this.writeUInt8(this.shortFieldNamesSeg.fieldNames.length):this.fieldIdSize===2?this.writeUInt16BE(this.shortFieldNamesSeg.fieldNames.length):this.writeUInt32BE(this.shortFieldNamesSeg.fieldNames.length),this.shortFieldNamesSeg.pos<65536?this.writeUInt16BE(this.shortFieldNamesSeg.pos):this.writeUInt32BE(this.shortFieldNamesSeg.pos),this.longFieldNamesSeg){let e=0;this.longFieldNamesSeg.pos<65536&&(e=Y.TNS_JSON_FLAG_SEC_FNAMES_SEG_UINT16),this.writeUInt16BE(e),this.writeUInt32BE(this.longFieldNamesSeg.fieldNames.length),this.writeUInt32BE(this.longFieldNamesSeg.pos)}}_writeFieldNamesSeg(e){for(let t of e.fieldNames)t.nameBytes.length<=255?this.writeUInt8(t.hashId):this.writeUInt16BE(t.hashId);for(let t of e.fieldNames)e.pos<65536?this.writeUInt16BE(t.offset):this.writeUInt32BE(t.offset);e.pos>0&&this.writeBytes(e.buf.subarray(0,e.pos))}encode(e,t){this.maxFieldNameSize=t;let s=Y.TNS_JSON_FLAG_INLINE_LEAF;if(Array.isArray(e)||e&&Array.isArray(e.fields)){this.fieldNamesMap=new Map,this.shortFieldNamesSeg=new Fr,this._examineNode(e);let n=0;this.shortFieldNamesSeg&&(this.shortFieldNamesSeg._processFieldNames(0),n+=this.shortFieldNamesSeg.fieldNames.length),this.longFieldNamesSeg&&(this.longFieldNamesSeg._processFieldNames(n),n+=this.longFieldNamesSeg.fieldNames.length),s|=Y.TNS_JSON_FLAG_HASH_ID_UINT8|Y.TNS_JSON_FLAG_TINY_NODES_STAT,n>65535?(s|=Y.TNS_JSON_FLAG_NUM_FNAMES_UINT32,this.fieldIdSize=4):n>255?(s|=Y.TNS_JSON_FLAG_NUM_FNAMES_UINT16,this.fieldIdSize=2):this.fieldIdSize=1,this.shortFieldNamesSeg.pos>65535&&(s|=Y.TNS_JSON_FLAG_FNAMES_SEG_UINT32)}else s|=Y.TNS_JSON_FLAG_IS_SCALAR;let r=new e_;return r.encodeNode(e,this),r.pos>65535&&(s|=Y.TNS_JSON_FLAG_TREE_SEG_UINT32),this.writeUInt8(Y.TNS_JSON_MAGIC_BYTE_1),this.writeUInt8(Y.TNS_JSON_MAGIC_BYTE_2),this.writeUInt8(Y.TNS_JSON_MAGIC_BYTE_3),this.longFieldNamesSeg?this.writeUInt8(Y.TNS_JSON_VERSION_MAX_FNAME_65535):this.writeUInt8(Y.TNS_JSON_VERSION_MAX_FNAME_255),this.writeUInt16BE(s),this.shortFieldNamesSeg&&this._writeExtendedHeader(),r.pos<65536?this.writeUInt16BE(r.pos):this.writeUInt32BE(r.pos),this.shortFieldNamesSeg&&(this.writeUInt16BE(0),this._writeFieldNamesSeg(this.shortFieldNamesSeg),this.longFieldNamesSeg&&this._writeFieldNamesSeg(this.longFieldNamesSeg)),this.writeBytes(r.buf.subarray(0,r.pos)),this.buf.subarray(0,this.pos)}};T(o_,"OsonEncoder");var t_=o_;Ah.exports={OsonDecoder:Zn,OsonEncoder:t_}});var c_=I((dD,Ph)=>{"use strict";var kf=Ye(),Nt=U(),bf=Le(),fh=nt(),Gf=Qn(),Ie=Fe(),dh=Jt(),Hf=xr(),T_=class T_{_determineFetchType(e,t){if(delete e.fetchType,delete e.converter,t.fetchTypeHandler){let n=t.fetchTypeHandler(e);n!==void 0&&(Nt.assert(typeof n=="object",Nt.ERR_FETCH_TYPE_HANDLER_RETURN_VALUE),n.type!==void 0&&Nt.assert(n.type instanceof Ie.DbType,Nt.ERR_FETCH_TYPE_HANDLER_TYPE),n.converter!==void 0&&Nt.assert(typeof n.converter=="function",Nt.ERR_FETCH_TYPE_HANDLER_CONVERTER),e.fetchType=n.type,e.converter=n.converter)}if(e.fetchType||(t.fetchTypeMap&&t.fetchTypeMap.has(e.name)?(e.fetchType=t.fetchTypeMap.get(e.name),e.fetchType===kf.DEFAULT&&(e.fetchType=Ie.DB_TYPE_FETCH_TYPE_MAP.get(e.dbType))):e.fetchType=fh.fetchTypeMap.get(e.dbType)),e.fetchType!==e.dbType){let n=Ie.DB_TYPE_CONVERSION_MAP.get(e.dbType),o=n&&n.get(e.fetchType);o||Nt.throwErr(Nt.ERR_UNSUPPORTED_CONVERSION,e.dbType.name,e.fetchType.name),e.fetchType=o}let s,r=e.converter;if(e.dbType!==Ie.DB_TYPE_JSON&&Gf.oldJsonColumnAsObj&&r===void 0){let n;e.isOson?(n=T(async function(o){if(!o)return o;let a=o;return o instanceof dh&&(a=await o.getData()),new Hf.OsonDecoder(a).decode()},"outConverter"),s=n):e.isJson&&(n=T(async function(o){if(!o)return o;let a=o;return o instanceof dh&&(a=await o.getData()),a instanceof Buffer&&(a=a.toString()),a=JSON.parse(a),a},"outConverter"),s=n)}if(fh.thin&&(e.dbType===Ie.DB_TYPE_NUMBER&&e.fetchType===Ie.DB_TYPE_NUMBER?s=T(n=>n===null?null:parseFloat(n),"converter"):e.fetchType===Ie.DB_TYPE_VARCHAR?e.dbType===Ie.DB_TYPE_BINARY_DOUBLE||e.dbType===Ie.DB_TYPE_BINARY_FLOAT||e.dbType===Ie.DB_TYPE_DATE||e.dbType===Ie.DB_TYPE_TIMESTAMP||e.dbType===Ie.DB_TYPE_TIMESTAMP_LTZ||e.dbType===Ie.DB_TYPE_TIMESTAMP_TZ?s=T(n=>n===null?null:n.toString(),"converter"):e.dbType===Ie.DB_TYPE_RAW&&(s=T(n=>n===null?null:n.toString("hex").toUpperCase(),"converter")):e.dbType===Ie.DB_TYPE_XMLTYPE&&(s=T(async function(o){return!o||typeof o=="string"?o:await o.getData()},"xmlConverter")),r&&s)){let n=s;s=T(o=>r(n(o)),"converter")}s&&(e.converter=s)}_getConnImpl(){return this._parentObj}_setup(e,t){this._parentObj=e.connection._impl,this.metaData=t,this.lobIndices=[],this.dbObjectIndices=[],this.nestedCursorIndices=[],this.converterIndices=[],this.outFormat=e.outFormat,this.fetchArraySize=e.fetchArraySize,this.dbObjectAsPojo=e.dbObjectAsPojo,this.maxRows=e.maxRows;let s=new Map;for(let r=0;r<t.length;r++){let n=t[r].name;s.has(n)||s.set(n,r)}for(let r=0;r<t.length;r++){let n=t[r];if(n.dbTypeClass){let a=e.connection._getDbObjectClass(n.dbTypeClass);n.dbTypeClass=a}bf.addTypeProperties(n,"dbType"),this._determineFetchType(n,e),n.fetchType===Ie.DB_TYPE_CURSOR?this.nestedCursorIndices.push(r):n.fetchType===Ie.DB_TYPE_CLOB||n.fetchType===Ie.DB_TYPE_NCLOB||n.fetchType===Ie.DB_TYPE_BLOB||n.fetchType===Ie.DB_TYPE_BFILE?this.lobIndices.push(r):n.fetchType===Ie.DB_TYPE_OBJECT&&this.dbObjectIndices.push(r),n.converter&&this.converterIndices.push(r);let o=n.name;if(s.get(o)!==r){let a=0;for(;s.has(o);)a=a+1,o=`${n.name}_${a}`;s.set(o,r),n.name=o}}}close(){Nt.throwNotImplemented("closing a result set")}getRows(){Nt.throwNotImplemented("getting rows")}async _getAllRows(){let t=[];for(;;){let s=await this.getRows(100,{});if(s&&(await this._processRows(s,!1),t=t.concat(s)),s.length<100)break}return t}};T(T_,"ResultSetImpl");var a_=T_;Ph.exports=a_});var Rh=I((pD,ph)=>{"use strict";var Je=U(),l_=class l_{_getConnImpl(){return this._database._connection}createIndex(){Je.throwNotImplemented("creating an index on a SODA collection")}drop(){Je.throwNotImplemented("dropping a SODA collection")}dropIndex(){Je.throwNotImplemented("dropping an index on a SODA collection")}find(){Je.throwNotImplemented("creating a SODA operation")}getDataGuide(){Je.throwNotImplemented("getting the data guide for the collection")}getMetaData(){Je.throwNotImplemented("getting the metadata for the collection")}getName(){Je.throwNotImplemented("getting the name of the collection")}insertMany(){Je.throwNotImplemented("inserting multiple docs into a collection")}insertManyAndGet(){Je.throwNotImplemented("insert/return many docs in a collection")}insertOne(){Je.throwNotImplemented("inserting a single doc into a collection")}insertOneAndGet(){Je.throwNotImplemented("insert/return a single doc in a collection")}save(){Je.throwNotImplemented("saving a single doc in a collection")}saveAndGet(){Je.throwNotImplemented("saving a single doc in a collection")}truncate(){Je.throwNotImplemented("removing all docs from a collection")}};T(l_,"SodaCollectionImpl");var E_=l_;ph.exports=E_});var Ih=I((mD,mh)=>{"use strict";var kr=U(),N_=class N_{_getConnImpl(){return this._connection}createCollection(){kr.throwNotImplemented("creating a SODA collection")}createDocument(){kr.throwNotImplemented("creating a SODA document")}getCollectionNames(){kr.throwNotImplemented("getting a list of SODA collection names")}openCollection(){kr.throwNotImplemented("getting a list of SODA collection names")}};T(N_,"SodaDatabaseImpl");var h_=N_;mh.exports=h_});var Oh=I((DD,Ch)=>{"use strict";var Dh=U(),u_=class u_{_getConnImpl(){return this._operation._getConnImpl()}close(){Dh.throwNotImplemented("closing a SODA document cursor")}getNext(){Dh.throwNotImplemented("getting a document from a SODA doc cursor")}};T(u_,"SodaDocCursorImpl");var S_=u_;Ch.exports=S_});var Lh=I((OD,gh)=>{"use strict";var jt=U(),f_=class f_{getContentAsBuffer(){jt.throwNotImplemented("getting doc content as a buffer")}getContentAsString(){jt.throwNotImplemented("getting doc content as a string")}getCreatedOn(){jt.throwNotImplemented("getting the created date of a document")}getKey(){jt.throwNotImplemented("getting the key of a document")}getLastModified(){jt.throwNotImplemented("getting the last modified date of a doc")}getMediaType(){jt.throwNotImplemented("getting the media type of a document")}getVersion(){jt.throwNotImplemented("getting the version of a document")}};T(f_,"SodaDocumentImpl");var A_=f_;gh.exports=A_});var Bh=I((LD,yh)=>{"use strict";var Zt=U(),P_=class P_{_getConnImpl(){return this._collection._database._connection}count(){Zt.throwNotImplemented("getting a count of documents")}getCursor(){Zt.throwNotImplemented("getting a cursor for documents")}getDocuments(){Zt.throwNotImplemented("getting a cursor for documents")}getOne(){Zt.throwNotImplemented("getting a single document")}remove(){Zt.throwNotImplemented("removing documents from a collection")}replaceOne(){Zt.throwNotImplemented("replacing a single document")}replaceOneAndGet(){Zt.throwNotImplemented("replacing/returning a single document")}};T(P_,"SodaOperationImpl");var d_=P_;yh.exports=d_});var ps=I((BD,wh)=>{"use strict";var qf=th(),vf=rh(),Kf=nh(),Wf=oh(),Xf=wr(),zf=Yr(),Qf=qn(),Jf=Wn(),jf=c_(),Zf=Rh(),$f=Ih(),ed=Oh(),td=Lh(),sd=Bh();wh.exports={AqDeqOptionsImpl:qf,AqEnqOptionsImpl:vf,AqMessageImpl:Kf,AqQueueImpl:Wf,DbObjectImpl:Xf,ConnectionImpl:zf,LobImpl:Qf,PoolImpl:Jf,ResultSetImpl:jf,SodaCollectionImpl:Zf,SodaDatabaseImpl:$f,SodaDocCursorImpl:ed,SodaDocumentImpl:td,SodaOperationImpl:sd}});var m_=I((wD,Yh)=>{"use strict";var{Buffer:rd}=require("buffer"),Ct=Ye(),Ot=U(),R_=class R_{get condition(){return this._impl.getCondition()}set condition(e){Ot.assertPropValue(typeof e=="string","condition"),this._impl.setCondition(e)}get consumerName(){return this._impl.getConsumerName()}set consumerName(e){Ot.assertPropValue(typeof e=="string","consumerName"),this._impl.setConsumerName(e)}get correlation(){return this._impl.getCorrelation()}set correlation(e){Ot.assertPropValue(typeof e=="string","correlation"),this._impl.setCorrelation(e)}get mode(){return this._impl.getMode()}set mode(e){Ot.assertPropValue(e===Ct.AQ_DEQ_MODE_BROWSE||e===Ct.AQ_DEQ_MODE_LOCKED||e===Ct.AQ_DEQ_MODE_REMOVE||e===Ct.AQ_DEQ_MODE_REMOVE_NO_DATA,"mode"),this._impl.setMode(e)}get msgId(){return this._impl.getMsgId()}set msgId(e){Ot.assertPropValue(rd.isBuffer(e),"msgId"),this._impl.setMsgId(e)}get navigation(){return this._impl.getNavigation()}set navigation(e){Ot.assertPropValue(e===Ct.AQ_DEQ_NAV_FIRST_MSG||e===Ct.AQ_DEQ_NAV_NEXT_TRANSACTION||e===Ct.AQ_DEQ_NAV_NEXT_MSG,"navigation"),this._impl.setNavigation(e)}get transformation(){return this._impl.getTransformation()}set transformation(e){Ot.assertPropValue(typeof e=="string","transformation"),this._impl.setTransformation(e)}get visibility(){return this._impl.getVisibility()}set visibility(e){Ot.assertPropValue(e===Ct.AQ_VISIBILITY_IMMEDIATE||e===Ct.AQ_VISIBILITY_ON_COMMIT,"visibility"),this._impl.setVisibility(e)}get wait(){return this._impl.getWait()}set wait(e){Ot.assertPropValue(Number.isInteger(e)&&e>=0,"wait"),this._impl.setWait(e)}};T(R_,"AqDeqOptions");var p_=R_;Yh.exports=p_});var O_=I((UD,Uh)=>{"use strict";var vs=Ye(),I_=U(),C_=class C_{get deliveryMode(){return this._impl.getDeliveryMode()}set deliveryMode(e){I_.assertPropValue(e===vs.AQ_MSG_DELIV_MODE_PERSISTENT||e===vs.AQ_MSG_DELIV_MODE_BUFFERED||e===vs.AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED,"deliveryMode"),this._impl.setDeliveryMode(e)}get transformation(){return this._impl.getTransformation()}set transformation(e){I_.assertPropValue(typeof e=="string","transformation"),this._impl.setTransformation(e)}get visibility(){return this._impl.getVisibility()}set visibility(e){I_.assertPropValue(e===vs.AQ_VISIBILITY_IMMEDIATE||e===vs.AQ_VISIBILITY_ON_COMMIT,"visibility"),this._impl.setVisibility(e)}};T(C_,"AqEnqOptions");var D_=C_;Uh.exports=D_});var y_=I((VD,Mh)=>{"use strict";var id=wr(),L_=class L_{get correlation(){return this._impl.getCorrelation()}get delay(){return this._impl.getDelay()}get deliveryMode(){return this._impl.getDeliveryMode()}get exceptionQueue(){return this._impl.getExceptionQueue()}get expiration(){return this._impl.getExpiration()}get msgId(){return this._impl.getMsgId()}get numAttempts(){return this._impl.getNumAttempts()}get originalMsgId(){return this._impl.getOriginalMsgId()}get payload(){let e=this._impl.getPayload();if(e instanceof id){let t=Object.create(this._payloadTypeClass.prototype);return t._impl=e,t}return e}get priority(){return this._impl.getPriority()}get state(){return this._impl.getState()}};T(L_,"AqMessage");var g_=L_;Mh.exports=g_});var Y_=I((xD,Vh)=>{"use strict";var nd=require("process"),{Readable:_d}=require("stream"),w_=class w_ extends _d{constructor(e){super({objectMode:!0}),this._fetching=!1,this._numRows=0,e&&nd.nextTick(()=>{this._open(e)})}async _destroy(e,t){if(this._resultSet){let s=this._resultSet;this._resultSet=null,this._fetching&&await new Promise(r=>this.once("_doneFetching",r));try{await s._impl.close()}catch(r){t(r);return}}t(e)}_open(e){this._resultSet=e,this.emit("open"),this.emit("metadata",e.metaData)}async _read(){if(!this._resultSet){this.once("open",this._read);return}try{this._fetching=!0,this._resultSet._allowGetRowCall=!0;let e=await this._resultSet.getRow();e?this.push(e):this.push(null)}catch(e){this.destroy(e)}finally{this._fetching=!1,this._resultSet?this._resultSet._allowGetRowCall=!1:this.emit("_doneFetching")}}};T(w_,"QueryStream");var B_=w_;Vh.exports=B_});var Hr=I((bD,Fh)=>{"use strict";var od=Y_(),ad=Rs(),Td=Le(),cd=Ye(),Ed=Jt(),Pe=U(),Gr=class Gr{constructor(){this._rowCache=[],this._processingStarted=!1,this._convertedToStream=!1,this._allowGetRowCall=!1,this._isActive=!1}async _getAllRows(){try{let e=this._impl.maxRows,t=this._impl.fetchArraySize,s=[];for(;;){e>0&&t>=e&&(t=e);let r=await this._getRows(t);if(r&&(await this._processRows(r,!0),s=s.concat(r)),r.length==e||r.length<t)break;e>0&&(e-=r.length)}return s}finally{await this._impl.close(),delete this._impl}}async _getRows(e){let t={};return this._impl.nestedCursorIndices.length>0&&(t={connection:this._connection,outFormat:this._impl.outFormat,fetchArraySize:this._impl.fetchArraySize,dbObjectAsPojo:this._impl.dbObjectAsPojo,maxRows:this._impl.maxRows,fetchTypeMap:this._impl.fetchTypeMap}),await this._impl.getRows(e,t)}async _processRows(e,t){for(let s of this._impl.nestedCursorIndices)for(let r=0;r<e.length;r++){let n=e[r][s];if(n){let o=new Gr;o._setup(this._connection,n),this._impl.metaData[s].metaData=n.metaData,t?e[r][s]=await o._getAllRows():e[r][s]=o}}for(let s of this._impl.lobIndices)for(let r=0;r<e.length;r++){let n=e[r][s];n&&(e[r][s]=new Ed)._setup(n,!0)}for(let s of this._impl.dbObjectIndices){let r=this._impl.metaData[s].dbTypeClass;for(let n=0;n<e.length;n++){let o=e[n][s];if(o){let a=e[n][s]=Object.create(r.prototype);a._impl=o,this._impl.dbObjectAsPojo?e[n][s]=a._toPojo():a.isCollection&&(e[n][s]=new Proxy(a,ad._collectionProxyHandler))}}}for(let s of this._impl.converterIndices){let r=this._impl.metaData[s].converter;this._connection._impl._inProgress=!1;try{for(let n=0;n<e.length;n++){let o=r(e[n][s]);o instanceof Promise&&(o=await o),e[n][s]=o}}finally{this._connection._impl._inProgress=!0}}if(this._impl.outFormat===cd.OUT_FORMAT_OBJECT)for(let s=0;s<e.length;s++){let r=e[s],n=e[s]={},o=this._impl.metaData;for(let a=0;a<o.length;a++)n[o[a].name]=r[a]}}_setup(e,t){this._connection=e,this._impl=t}async close(){Pe.assertArgCount(arguments,0,0),Pe.assert(this._impl&&this._connection._impl,Pe.ERR_INVALID_RS),this._convertedToStream&&Pe.throwErr(Pe.ERR_CANNOT_INVOKE_RS_METHODS),this._processingStarted=!0;let e=this._impl;delete this._impl,await e.close()}async getRow(){if(Pe.assertArgCount(arguments,0,0),Pe.assert(this._impl&&this._connection._impl,Pe.ERR_INVALID_RS),this._convertedToStream&&!this._allowGetRowCall&&Pe.throwErr(Pe.ERR_CANNOT_INVOKE_RS_METHODS),this._allowGetRowCall=!1,this._processingStarted=!0,this._rowCache.length==0){let e=await this._getRows(this._impl.fetchArraySize);await this._processRows(e,!1),this._rowCache=e}return this._rowCache.shift()}async getRows(e){let t;Pe.assertArgCount(arguments,0,1),Pe.assert(this._impl&&this._connection._impl,Pe.ERR_INVALID_RS),arguments.length==0?e=0:Pe.assertParamValue(Number.isInteger(e)&&e>=0,1),this._convertedToStream&&Pe.throwErr(Pe.ERR_CANNOT_INVOKE_RS_METHODS),this._processingStarted=!0;let s;if(e==0){s=this._rowCache;let r=this._impl.fetchArraySize;for(;;){let n=await this._getRows(r);if(n&&(await this._processRows(n,!1),s=s.concat(n)),n.length<r)break}return s}if(this._rowCache.length===0)s=await this._getRows(e),await this._processRows(s,!1);else if(t=e-this._rowCache.length,t<=0)s=this._rowCache.splice(0,e);else{let r=await this._getRows(t);await this._processRows(r,!1),s=this._rowCache.concat(r),this._rowCache=[]}return s}get metaData(){if(this._impl)return this._impl.metaData}toQueryStream(){return Pe.assertArgCount(arguments,0,0),this._processingStarted&&Pe.throwErr(Pe.ERR_CANNOT_CONVERT_RS_TO_STREAM),this._convertedToStream&&Pe.throwErr(Pe.ERR_RS_ALREADY_CONVERTED),this._convertedToStream=!0,new od(this)}[Symbol.asyncIterator](){let e=this;return{async next(){let t=await e.getRow();return{value:t,done:t===void 0}},return(){return{done:!0}}}}};T(Gr,"ResultSet");var br=Gr;Td.wrapFns(br.prototype,Pe.ERR_BUSY_RS,"close","getRow","getRows");Fh.exports=br});var vr=I((HD,Gh)=>{"use strict";var U_=Rs(),{Buffer:M_}=require("buffer"),ld=Jt(),hd=Hr(),Nd=Ye(),pe=U(),xh=require("util"),ee=Fe(),kh=Le();function St(i,e){if(i.type===void 0&&arguments.length>2)i.type=arguments[2];else{let t=!1;for(let s=2;s<arguments.length;s++)if(i.type===arguments[s]){t=!0;break}t||(i.attrName?pe.throwErr(pe.ERR_WRONG_VALUE_FOR_DBOBJECT_ATTR,i.attrName,i.fqn):i.fqn?pe.throwErr(pe.ERR_WRONG_VALUE_FOR_DBOBJECT_ELEM,i.fqn):i.isArray&&i.name?pe.throwErr(pe.ERR_INCOMPATIBLE_TYPE_ARRAY_BIND,e.pos,i.name):i.isArray?pe.throwErr(pe.ERR_INCOMPATIBLE_TYPE_ARRAY_INDEX_BIND,e.pos,i.pos):pe.throwErr(pe.ERR_BIND_VALUE_AND_TYPE_MISMATCH))}}T(St,"checkType");function qr(i){if(i==null||typeof i=="number"||typeof i=="string"||typeof i=="boolean"||M_.isBuffer(i)||xh.types.isDate(i)||kh.isVectorValue(i))return i;if(Array.isArray(i)){let t=new Array(i.length);for(let s=0;s<i.length;s++)t[s]=qr(i[s]);return t}if(i instanceof U_)return{fields:[],values:[]};if(i instanceof ee.JsonId)return i;let e={};e.fields=Object.getOwnPropertyNames(i),e.values=new Array(e.fields.length);for(let t=0;t<e.fields.length;t++)e.values[t]=qr(i[e.fields[t]]);return e}T(qr,"transformJsonValue");function bh(i,e,t){if(e!=null){if(i.type===ee.DB_TYPE_OBJECT){let s=e;return e instanceof U_||(s=new i.typeClass(e)),s._impl}else{if(i.type===ee.DB_TYPE_JSON)return qr(e);if(typeof e=="string"){if(St(i,t,ee.DB_TYPE_VARCHAR,ee.DB_TYPE_NVARCHAR,ee.DB_TYPE_CHAR,ee.DB_TYPE_NCHAR,ee.DB_TYPE_CLOB,ee.DB_TYPE_NCLOB),i.type!==ee.DB_TYPE_CLOB&&i.type!==ee.DB_TYPE_NCLOB){let s=M_.byteLength(e);(i.maxSize===void 0||s>i.maxSize)&&(i.checkSize&&pe.throwErr(pe.ERR_MAX_SIZE_TOO_SMALL,i.maxSize,s,t.pos),i.maxSize=s)}return e}else{if(typeof e=="number"||typeof e=="bigint")return St(i,t,ee.DB_TYPE_NUMBER,ee.DB_TYPE_BINARY_INTEGER,ee.DB_TYPE_BINARY_FLOAT,ee.DB_TYPE_BINARY_DOUBLE),Number.isNaN(e)&&i.type===ee.DB_TYPE_NUMBER&&pe.throwErr(pe.ERR_NAN_VALUE),e;if(typeof e=="boolean")return St(i,t,ee.DB_TYPE_BOOLEAN),e;if(xh.types.isDate(e))return St(i,t,ee.DB_TYPE_TIMESTAMP,ee.DB_TYPE_TIMESTAMP_TZ,ee.DB_TYPE_TIMESTAMP_LTZ,ee.DB_TYPE_DATE),e;if(M_.isBuffer(e))return St(i,t,ee.DB_TYPE_RAW,ee.DB_TYPE_BLOB),i.type===ee.DB_TYPE_RAW&&(i.maxSize===void 0||e.length>i.maxSize)&&(i.checkSize&&pe.throwErr(pe.ERR_MAX_SIZE_TOO_SMALL,i.maxSize,e.length,t.pos),i.maxSize=e.length),e;if(e instanceof hd)return St(i,t,ee.DB_TYPE_CURSOR),e._impl;if(e instanceof ld)return St(i,t,e.type),e._impl;if(e instanceof U_)return St(i,t,ee.DB_TYPE_OBJECT),e._impl;if(kh.isVectorValue(e))return St(i,t,ee.DB_TYPE_VECTOR),e;if(i.type===ee.DB_TYPE_VECTOR&&Array.isArray(e))return new Float64Array(e);if(t.allowArray&&Array.isArray(e)){i.isArray=!0,i.dir===Nd.BIND_IN?i.maxArraySize=e.length||1:i.maxArraySize===void 0?pe.throwErr(pe.ERR_REQUIRED_MAX_ARRAY_SIZE):e.length>i.maxArraySize&&pe.throwErr(pe.ERR_INVALID_ARRAY_SIZE),t.allowArray=!1;let s=new Array(e.length);for(let r=0;r<e.length;r++)t.pos=r,s[r]=bh(i,e[r],t);return s}}}i.type===void 0&&pe.throwErr(pe.ERR_INVALID_BIND_DATA_TYPE,2),St(i,t)}}T(bh,"transformValueIn");Gh.exports={transformJsonValue:qr,transformValueIn:bh}});var Rs=I((vD,qh)=>{"use strict";var Sd=Jt(),Hh=ps(),te=U(),ms=Fe(),V_=require("util");function F_(i,e,t,s){let r,n=!1;if(t){switch(e.type){case ms.DB_TYPE_VARCHAR:case ms.DB_TYPE_NVARCHAR:case ms.DB_TYPE_NCHAR:case ms.DB_TYPE_CHAR:r=Buffer.byteLength(t),r>e.maxSize&&(n=!0);break;case ms.DB_TYPE_RAW:r=t.length,r>e.maxSize&&(n=!0);break;default:break}n&&(s!==void 0?te.throwErr(te.ERR_WRONG_LENGTH_FOR_DBOBJECT_ELEM,s,i.fqn,r,e.maxSize):te.throwErr(te.ERR_WRONG_LENGTH_FOR_DBOBJECT_ATTR,e.name,i.fqn,r,e.maxSize))}}T(F_,"validatePropertyValue");var Ks=class Ks{_getAttrValue(e){let t=this._impl.getAttrValue(e);return this._transformValueOut(t,e.typeClass)}_setAttrValue(e,t){let s={fqn:this._objType.fqn,attrName:e.name,type:e.type,typeClass:e.typeClass},r={allowArray:!1};t=x_.transformValueIn(s,t,r),F_(this._objType,e,t),this._impl.setAttrValue(e,t)}_toPojo(){if(this.isCollection){let t=this.getValues();if(this.elementType===ms.DB_TYPE_OBJECT)for(let s=0;s<t.length;s++)t[s]=t[s]._toPojo();return t}let e={};for(let t in this.attributes){let s=this[t];s instanceof Ks&&(s=s._toPojo()),e[t]=s}return e}_transformValueOut(e,t){let s=e;return e instanceof Hh.LobImpl?(s=new Sd,s._setup(e,!0)):e instanceof Hh.DbObjectImpl&&(s=Object.create(t.prototype),s._impl=e,s.isCollection&&(s=new Proxy(s,Ks._collectionProxyHandler))),s}append(e){te.assertArgCount(arguments,1,1);let t={fqn:this._objType.fqn,type:this._objType.elementType,typeClass:this._objType.elementTypeClass},s={allowArray:!1};e=x_.transformValueIn(t,e,s);let r=this._impl.getLastIndex();r?r=r+1:r=0,F_(this._objType,this._objType.elementTypeInfo,e,r),this._impl.append(e)}get attributes(){if(!this._attributes){let e=this._objType.attributes||[],t={};for(let s=0;s<e.length;s++){let r=e[s],n={type:r.type,typeName:r.typeName};r.typeClass&&(n.typeClass=r.typeClass),t[r.name]=n}this._attributes=t}return this._attributes}deleteElement(e){return te.assertArgCount(arguments,1,1),te.assertParamValue(Number.isInteger(e),1),this._impl.deleteElement(e)}get elementType(){return this._objType.elementType}get elementTypeClass(){return this._objType.elementTypeClass}get elementTypeName(){return this._objType.elementTypeName}get fqn(){return this._objType.fqn}getElement(e){te.assertArgCount(arguments,1,1),te.assertParamValue(Number.isInteger(e),1);let t=this._impl.getElement(e);return this._transformValueOut(t,this.elementTypeClass)}getKeys(){return te.assertArgCount(arguments,0,0),this._impl.getKeys()}getFirstIndex(){return te.assertArgCount(arguments,0,0),this._impl.getFirstIndex()}getLastIndex(){return te.assertArgCount(arguments,0,0),this._impl.getLastIndex()}getNextIndex(e){return te.assertArgCount(arguments,1,1),te.assertParamValue(Number.isInteger(e),1),this._impl.getNextIndex(e)}getPrevIndex(e){return te.assertArgCount(arguments,1,1),te.assertParamValue(Number.isInteger(e),1),this._impl.getPrevIndex(e)}getValues(){te.assertArgCount(arguments,0,0);let e=this._impl.getValues();for(let t=0;t<e.length;t++)e[t]=this._transformValueOut(e[t],this.elementTypeClass);return e}hasElement(e){return te.assertArgCount(arguments,1,1),te.assertParamValue(Number.isInteger(e),1),this._impl.hasElement(e)}get isCollection(){return this._objType.isCollection}get name(){return this._objType.name}get schema(){return this._objType.schema}get packageName(){return this._objType.packageName}setElement(e,t){te.assertArgCount(arguments,2,2),te.assertParamValue(Number.isInteger(e),1);let s={fqn:this._objType.fqn,type:this._objType.elementType,typeClass:this._objType.elementTypeClass},r={allowArray:!1};t=x_.transformValueIn(s,t,r),F_(this._objType,this._objType.elementTypeInfo,t,e),this._impl.setElement(e,t)}trim(e){te.assertArgCount(arguments,1,1),te.assertParamValue(Number.isInteger(e)&&e>=0,1),this._impl.trim(e)}[V_.inspect.custom](e,t){return"["+this.fqn+"] "+V_.inspect(this._toPojo(),t)}[Symbol.iterator](){if(this.isCollection)return this.getValues()[Symbol.iterator]();throw TypeError("obj is not iterable")}[Symbol.toPrimitive](e){switch(e){case"number":return NaN;default:return"["+this.fqn+"] "+V_.inspect(this._toPojo(),{})}}get[Symbol.toStringTag](){return this.fqn}toJSON(){return this._toPojo()}toMap(){te.assertArgCount(arguments,0,0),this.isCollection||te.throwErr(te.ERR_OBJECT_IS_NOT_A_COLLECTION,this.name);let e=new Map;return this.getKeys().forEach(t=>{e.set(t,this.getElement(t))}),e}};T(Ks,"BaseDbObject");var Ws=Ks;function ud(i){return function(){try{return i.apply(this,arguments)}catch(e){throw te.transformErr(e,te.transformErr)}}}T(ud,"transformErr");function Ad(i){for(let e=1;e<arguments.length;e++){let t=arguments[e];i[t]=ud(i[t])}}T(Ad,"wrapFns");Ad(Ws.prototype,"_getAttrValue","_setAttrValue","append","deleteElement","getElement","getKeys","getFirstIndex","getLastIndex","getNextIndex","getPrevIndex","getValues","toMap","hasElement","setElement","trim");Ws._collectionProxyHandler={deleteProperty(i,e){if(typeof e=="string"){let t=+e;if(!isNaN(t))return i.deleteElement(t)}return delete i[e]},get(i,e){if(typeof e=="string"){let s=+e;if(!isNaN(s))return i.getElement(s)}let t=i[e];return typeof t=="function"?t.bind(i):t},set(i,e,t){if(typeof e=="string"){let s=+e;if(!isNaN(s))return i.setElement(s,t),!0}return i[e]=t,!0}};qh.exports=Ws;var x_=vr()});var H_=I((WD,Kh)=>{"use strict";var{Buffer:k_}=require("buffer"),ve=U(),b_=Le(),fd=m_(),dd=O_(),Pd=y_(),vh=Rs(),pd=vr(),Xs=Fe(),G_=class G_{_isPayload(e){return typeof e=="string"||k_.isBuffer(e)||e instanceof vh}_makeMessage(e){let t=new Pd;return t._impl=e,t._payloadTypeClass=this._payloadTypeClass,t}_verifyMessage(e){let t;return this._isPayload(e)?(t=e,e={}):(e={...e},this._isJson||this._isPayload(e.payload)?t=e.payload:this._payloadTypeClass?t=new this._payloadTypeClass(e.payload):ve.throwErr(ve.ERR_INVALID_AQ_MESSAGE)),this._isJson?e.payload=pd.transformJsonValue(t):typeof t=="string"?e.payload=k_.from(t):k_.isBuffer(t)?e.payload=t:e.payload=t._impl,e.correlation!==void 0&&ve.assertParamPropValue(typeof e.correlation=="string",1,"correlation"),e.delay!==void 0&&ve.assertParamPropValue(Number.isInteger(e.delay),1,"delay"),e.exceptionQueue!==void 0&&ve.assertParamPropValue(typeof e.exceptionQueue=="string",1,"exceptionQueue"),e.expiration!==void 0&&ve.assertParamPropValue(Number.isInteger(e.expiration),1,"expiration"),e.priority!==void 0&&ve.assertParamPropValue(Number.isInteger(e.priority),1,"priority"),e.recipients!==void 0&&ve.assertParamPropValue(b_.isArrayOfStrings(e.recipients),1,"recipients"),e}async create(e,t,s){if(s.payloadType===Xs.DB_TYPE_JSON)this._isJson=!0,this._payloadType=Xs.DB_TYPE_JSON,this._payloadTypeName="JSON";else if(s.payloadType===void 0||s.payloadType===Xs.DB_TYPE_RAW)this._payloadType=Xs.DB_TYPE_RAW,this._payloadTypeName="RAW";else{if(typeof s.payloadType=="string"){let r=await e._getDbObjectClassForName(s.payloadType);this._payloadTypeClass=r,s.payloadType=r}else ve.assertParamPropValue(b_.isObject(s.payloadType)&&s.payloadType.prototype instanceof vh,2,"payloadType"),this._payloadTypeClass=s.payloadType;this._payloadType=Xs.DB_TYPE_OBJECT,this._payloadTypeName=this._payloadTypeClass.prototype.name}this._name=t,this._impl=await e._impl.getQueue(t,this._payloadTypeClass,this._payloadType)}async deqMany(e){return ve.assertArgCount(arguments,1,1),ve.assertParamValue(Number.isInteger(e)&&e>0,1),(await this._impl.deq(e)).map(s=>this._makeMessage(s))}async deqOne(){ve.assertArgCount(arguments,0,0);let e=await this._impl.deq(1);if(e.length>0)return this._makeMessage(e[0])}get deqOptions(){if(!this._deqOptions){let e=new fd;e._impl=this._impl.deqOptions,this._deqOptions=e}return this._deqOptions}async enqMany(e){ve.assertArgCount(arguments,1,1),ve.assertParamValue(Array.isArray(e)&&e.length>0,1);let t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=this._verifyMessage(e[r]);return(await this._impl.enq(t)).map(r=>this._makeMessage(r))}async enqOne(e){ve.assertArgCount(arguments,1,1),e=this._verifyMessage(e);let t=await this._impl.enq([e]);return this._makeMessage(t[0])}get enqOptions(){if(!this._enqOptions){let e=new dd;e._impl=this._impl.enqOptions,this._enqOptions=e}return this._enqOptions}get name(){return this._name}get payloadType(){return this._payloadType}get payloadTypeName(){return this._payloadTypeName}get payloadTypeClass(){return this._payloadTypeClass}};T(G_,"AqQueue");var Kr=G_;b_.wrapFns(Kr.prototype,"deqOne","deqMany","enqOne","enqMany");Kh.exports=Kr});var Is=I((zD,Wh)=>{"use strict";var q_=class q_{get createdOn(){return this._impl.getCreatedOn()}getContent(){return JSON.parse(this._impl.getContentAsString())}getContentAsBuffer(){return this._impl.getContentAsBuffer()}getContentAsString(){return this._impl.getContentAsString()}get key(){return this._impl.getKey()}get lastModified(){return this._impl.getLastModified()}get mediaType(){return this._impl.getMediaType()}get version(){return this._impl.getVersion()}};T(q_,"SodaDocument");var Wr=q_;Wr.prototype._sodaDocumentMarker=!0;Wh.exports=Wr});var K_=I((JD,Xh)=>{"use strict";var Ds=U(),Rd=Le(),md=Is(),v_=class v_{async close(){Ds.assertArgCount(arguments,0,0),Ds.assert(this._impl,Ds.ERR_INVALID_SODA_DOC_CURSOR),await this._impl.close(),delete this._impl}async getNext(){Ds.assertArgCount(arguments,0,0),Ds.assert(this._impl,Ds.ERR_INVALID_SODA_DOC_CURSOR);let e=await this._impl.getNext();if(e){let t=new md;return t._impl=e,t}}[Symbol.asyncIterator](){let e=this;return{async next(){let t=await e.getNext();return{value:t,done:t===void 0}},return(){return{done:!0}}}}};T(v_,"SodaDocCursor");var Xr=v_;Rd.wrapFns(Xr.prototype,"close","getNext");Xh.exports=Xr});var z_=I((ZD,Qh)=>{"use strict";var Id=K_(),W_=Is(),Te=U(),zr=Le(),zh=nt(),X_=class X_{constructor(){this._options={autoCommit:zh.autoCommit,fetchArraySize:zh.fetchArraySize}}async count(){return Te.assertArgCount(arguments,0,0),await this._impl.count(this._options)}async getCursor(){Te.assertArgCount(arguments,0,0);let e=new Id;return e._impl=await this._impl.getCursor(this._options),e}async getDocuments(){Te.assertArgCount(arguments,0,0);let e=await this._impl.getDocuments(this._options),t=new Array(e.length);for(let s=0;s<e.length;s++)t[s]=new W_,t[s]._impl=e[s];return t}async getOne(){Te.assertArgCount(arguments,0,0);let e=await this._impl.getOne(this._options);if(e){let t=new W_;return t._impl=e,t}}lock(){return Te.assertArgCount(arguments,0,0),this._options.lock=!0,this}async replaceOne(e){return Te.assertArgCount(arguments,1,1),e=zr.verifySodaDoc(e),await this._impl.replaceOne(this._options,e)}async replaceOneAndGet(e){Te.assertArgCount(arguments,1,1),e=zr.verifySodaDoc(e);let t=await this._impl.replaceOneAndGet(this._options,e);if(t){let s=new W_;return s._impl=t,s}}async remove(){return Te.assertArgCount(arguments,0,0),await this._impl.remove(this._options)}fetchArraySize(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(Number.isInteger(e)&&e>=0,1),this._options.fetchArraySize=e,this}filter(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(zr.isObject(e),1),this._options.filter=JSON.stringify(e),this}hint(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(typeof e=="string",1),this._options.hint=e,this}key(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(typeof e=="string",1),this._options.key=e,this._options.keys=void 0,this}keys(e){Te.assertArgCount(arguments,1,1),Te.assertParamValue(Array.isArray(e),1);for(let t=0;t<e.length;t++)Te.assertParamValue(typeof e[t]=="string",1);return this._options.keys=e,this._options.key=void 0,this}limit(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(typeof e=="number",1),this._options.limit=e,this}skip(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(typeof e=="number",1),this._options.skip=e,this}version(e){return Te.assertArgCount(arguments,1,1),Te.assertParamValue(typeof e=="string",1),this._options.version=e,this}};T(X_,"SodaOperation");var Qr=X_;zr.wrapFns(Qr.prototype,"count","getCursor","getDocuments","getOne","remove","replaceOne","replaceOneAndGet");Qh.exports=Qr});var J_=I((eC,Jh)=>{"use strict";var Jr=Is(),Dd=z_(),Ne=U(),at=Le(),gt=nt(),Q_=class Q_{async createIndex(e){Ne.assertArgCount(arguments,1,1),Ne.assertParamValue(at.isObject(e),1);let t={autoCommit:gt.autoCommit};return await this._impl.createIndex(JSON.stringify(e),t)}async drop(){Ne.assertArgCount(arguments,0,0);let e={autoCommit:gt.autoCommit};return await this._impl.drop(e)}async dropIndex(e,t){let s={autoCommit:gt.autoCommit};return Ne.assertArgCount(arguments,1,2),Ne.assertParamValue(typeof e=="string",1),arguments.length==2&&(Ne.assertParamValue(typeof t=="object",2),t.force!==void 0&&(Ne.assertParamPropValue(typeof t.force=="boolean",2,"force"),s.force=t.force)),await this._impl.dropIndex(e,s)}find(){Ne.assertArgCount(arguments,0,0);let e=new Dd;return e._impl=this._impl.find(),e}async getDataGuide(){Ne.assertArgCount(arguments,0,0);let e=new Jr;return e._impl=await this._impl.getDataGuide(),e}async insertMany(e){Ne.assertArgCount(arguments,1,1),Ne.assertParamValue(Array.isArray(e)&&e.length>0,1);let t=Array(e.length);for(let r=0;r<e.length;r++)t[r]=at.verifySodaDoc(e[r]);let s={autoCommit:gt.autoCommit};await this._impl.insertMany(t,s)}async insertManyAndGet(e,t){let s={autoCommit:gt.autoCommit};Ne.assertArgCount(arguments,1,2),Ne.assertParamValue(Array.isArray(e)&&e.length>0,1),arguments.length==2&&(Ne.assertParamValue(at.isObject(t),2),t.hint!==void 0&&(Ne.assertParamPropValue(typeof t.hint=="string",2,"hint"),s.hint=t.hint));let r=Array(e.length);for(let o=0;o<e.length;o++)r[o]=at.verifySodaDoc(e[o]);let n=await this._impl.insertManyAndGet(r,s);for(let o=0;o<e.length;o++){let a=r[o]=new Jr;a._impl=n[o]}return r}async insertOne(e){Ne.assertArgCount(arguments,1,1),e=at.verifySodaDoc(e);let t={autoCommit:gt.autoCommit};await this._impl.insertOne(e,t)}async insertOneAndGet(e,t){let s={autoCommit:gt.autoCommit};Ne.assertArgCount(arguments,1,2),e=at.verifySodaDoc(e),arguments.length==2&&(Ne.assertParamValue(at.isObject(t),2),t.hint!==void 0&&(Ne.assertParamPropValue(typeof t.hint=="string",2,"hint"),s.hint=t.hint));let r=new Jr;return r._impl=await this._impl.insertOneAndGet(e,s),r}async listIndexes(){return(await this._impl.listIndexes()).map(t=>JSON.parse(t))}get metaData(){return JSON.parse(this._impl.getMetaData())}get name(){return this._impl.getName()}async save(e){Ne.assertArgCount(arguments,1,1),e=at.verifySodaDoc(e);let t={autoCommit:gt.autoCommit};await this._impl.save(e,t)}async saveAndGet(e,t){Ne.assertArgCount(arguments,1,2),e=at.verifySodaDoc(e);let s={autoCommit:gt.autoCommit};arguments.length==2&&(Ne.assertParamValue(at.isObject(t),2),t.hint!==void 0&&(Ne.assertParamPropValue(typeof t.hint=="string",2,"hint"),s.hint=t.hint));let r=new Jr;return r._impl=await this._impl.saveAndGet(e,s),r}async truncate(){Ne.assertArgCount(arguments,0,0),await this._impl.truncate()}};T(Q_,"SodaCollection");var jr=Q_;at.wrapFns(jr.prototype,"createIndex","drop","dropIndex","getDataGuide","insertMany","insertManyAndGet","insertOne","insertOneAndGet","listIndexes","save","saveAndGet","truncate");Jh.exports=jr});var $_=I((sC,$h)=>{"use strict";var{Buffer:j_}=require("buffer"),jh=J_(),Cd=Is(),xe=U(),$t=Le(),Zh=nt(),Z_=class Z_{_getConnection(){return this._connection}async createCollection(e,t){let s={autoCommit:Zh.autoCommit};xe.assertArgCount(arguments,1,2),xe.assertParamValue(typeof e=="string",1),arguments.length==2&&(xe.assertParamValue($t.isObject(t),2),t.mode!==void 0&&(xe.assertParamPropValue(Number.isInteger(t.mode)&&t.mode>0,2,"mode"),s.mode=t.mode),t.metaData!==void 0&&(xe.assertParamPropValue($t.isObject(t.metaData),2,"metaData"),s.metaData=JSON.stringify(t.metaData)));let r=new jh;return r._impl=await this._impl.createCollection(e,s),r}createDocument(e,t){let s={};xe.assertArgCount(arguments,1,2),xe.assertParamValue(j_.isBuffer(e)||typeof e=="string"||$t.isObject(e),1),arguments.length>1&&(xe.assertParamValue($t.isObject(t),2),s=t,xe.assertParamPropString(s,2,"key"),xe.assertParamPropString(s,2,"mediaType")),typeof e=="string"?e=j_.from(e):$t.isObject(e)&&(e=j_.from(JSON.stringify(e)));let r=new Cd;return r._impl=this._impl.createDocument(e,s),r}async getCollectionNames(e){let t={};return xe.assertArgCount(arguments,0,1),arguments.length==1&&(xe.assertParamValue($t.isObject(e),1),t=e,t.startsWith!==void 0&&xe.assertParamPropValue(typeof t.startsWith=="string",1,"startsWith"),t.limit!==void 0&&xe.assertParamPropValue(Number.isInteger(t.limit),1,"limit")),await this._impl.getCollectionNames(t)}async openCollection(e){xe.assertArgCount(arguments,1,1),xe.assertParamValue(typeof e=="string",1);let t={autoCommit:Zh.autoCommit},s=await this._impl.openCollection(e,t);if(s){let r=new jh;return r._impl=s,r}}};T(Z_,"SodaDatabase");var Zr=Z_;$t.wrapFns(Zr.prototype,"createCollection","getCollectionNames","openCollection");$h.exports=Zr});var ro=I((iC,rN)=>{"use strict";var Od=H_(),Cs=Rs(),{Buffer:eN}=require("buffer"),eo=Jt(),$r=Hr(),gd=$_(),Ld=require("events"),yd=Y_(),h=U(),Q=Le(),ei=ps(),Bd=require("process"),wd=require("util"),ce=Ye(),to=nt(),tN=vr(),_e=Fe(),sN=xr(),zs=new Map,so=class so extends Ld{constructor(){super(),this._dbObjectClasses=new Map,this._closing=!1}_addDefaultsToExecOpts(e){e.connection=this,e.keepInStmtCache===void 0&&(e.keepInStmtCache=!0),to.addToOptions(e,"autoCommit","dbObjectAsPojo","fetchArraySize","fetchTypeHandler","maxRows","outFormat","prefetchRows")}_buildDbObjectClass(e){let t=T(function(s){if(this._impl=new ei.DbObjectImpl(e),this.isCollection){let r=new Proxy(this,Cs._collectionProxyHandler);if(s!==void 0)for(let n=0;n<s.length;n++)this.append(s[n]);return r}else s!==void 0&&Object.assign(this,s)},"DbObject");if(t.prototype=Object.create(Cs.prototype),t.prototype.constructor=t,t.prototype._objType=e,e.elementTypeClass){let s=this._getDbObjectClass(e.elementTypeClass);e.elementTypeClass=s}if(e.isCollection&&(Q.addTypeProperties(e,"elementType"),e.elementTypeInfo.type=e.elementType),e.attributes){let s={};for(let r of e.attributes){r.typeClass&&(r.typeClass=this._getDbObjectClass(r.typeClass)),Q.addTypeProperties(r,"type");let n={get(){return this._getAttrValue(r)},set(o){this._setAttrValue(r,o)}};s[r.name]=n}Object.defineProperties(t.prototype,s)}return t.toString=function(){return"DbObjectClass ["+e.fqn+"]"},t}_getDbObjectClass(e){if(e.prototype instanceof Cs)return e;let t=this._dbObjectClasses.get(e);return t||(t=this._buildDbObjectClass(e),t._connection=this,t._objType=e,e._connection=this._impl,this._dbObjectClasses.set(e,t)),t}async _getDbObjectClassForName(e){let t=this._dbObjectClasses.get(e);if(!t){let s=await this._impl.getDbObjectClass(e);t=this._getDbObjectClass(s),this._dbObjectClasses.set(e,t)}return t}_isBindDir(e){return e===ce.BIND_IN||e===ce.BIND_OUT||e===ce.BIND_INOUT}_isBindValue(e){return e==null||typeof e=="number"||typeof e=="string"||typeof e=="boolean"||typeof e=="bigint"||Array.isArray(e)||Q.isVectorValue(e)||eN.isBuffer(e)||wd.types.isDate(e)||e instanceof eo||e instanceof $r||e instanceof Cs}async _processBindUnit(e,t,s){let r=!1;if(t.dir===void 0?e.dir=ce.BIND_IN:(h.assert(this._isBindDir(t.dir),h.ERR_INVALID_BIND_DIRECTION),e.dir=t.dir,r=!0),t.type!==void 0?(typeof t.type=="string"?(e.type=_e.DB_TYPE_OBJECT,e.typeClass=await this._getDbObjectClassForName(t.type),e.objType=e.typeClass._objType):t.type.prototype instanceof Cs?(e.type=_e.DB_TYPE_OBJECT,e.typeClass=t.type,e.objType=e.typeClass._objType):(h.assert(t.type instanceof _e.DbType,h.ERR_INVALID_BIND_DATA_TYPE,2),e.type=t.type),r=!0):s&&(e.name&&h.throwErr(h.ERR_MISSING_TYPE_BY_NAME,e.name),h.throwErr(h.ERR_MISSING_TYPE_BY_POS,e.pos)),(e.dir!==ce.BIND_IN||s)&&(t.maxSize!==void 0?(h.assertParamPropValue(Number.isInteger(t.maxSize)&&t.maxSize>0,2,"maxSize"),e.maxSize=t.maxSize,e.checkSize=!0,r=!0):s?(e.type===_e.DB_TYPE_VARCHAR||e.type===_e.DB_TYPE_RAW)&&(e.name&&h.throwErr(h.ERR_MISSING_MAX_SIZE_BY_NAME,e.name),h.throwErr(h.ERR_MISSING_MAX_SIZE_BY_POS,e.pos)):e.maxSize=ce.DEFAULT_MAX_SIZE_FOR_OUT_BINDS),e.isArray=!1,s||t.maxArraySize!==void 0&&(h.assertParamPropValue(Number.isInteger(t.maxArraySize)&&t.maxArraySize>0,2,"maxArraySize"),e.maxArraySize=t.maxArraySize,e.isArray=!0),!s&&t.val!==void 0)return t.val;r||h.throwErr(h.ERR_INVALID_BIND_UNIT)}async _processBindValue(e,t,s){let r=tN.transformValueIn(e,t,s);e.isArray?e.values=r.concat(e.values.slice(r.length)):e.values[s.pos]=r,e.type===_e.DB_TYPE_OBJECT&&e.typeClass===void 0&&(e.typeClass=await this._getDbObjectClass(t._objType),e.objType=e.typeClass._objType)}async _processExecuteBind(e,t){e.isArray=!1;let s;if(this._isBindValue(t)?(e.dir=ce.BIND_IN,s=t):s=await this._processBindUnit(e,t,!1),e.dir!==ce.BIND_OUT){let r={pos:0,allowArray:!0};await this._processBindValue(e,s,r)}e.type===void 0&&(e.type=_e.DB_TYPE_VARCHAR,e.maxSize===void 0&&(e.maxSize=1)),e.isArray&&e.type!==_e.DB_TYPE_VARCHAR&&e.type!==_e.DB_TYPE_NVARCHAR&&e.type!==_e.DB_TYPE_CHAR&&e.type!==_e.DB_TYPE_NCHAR&&e.type!==_e.DB_TYPE_NUMBER&&e.type!==_e.DB_TYPE_BINARY_FLOAT&&e.type!==_e.DB_TYPE_BINARY_DOUBLE&&e.type!==_e.DB_TYPE_DATE&&e.type!==_e.DB_TYPE_TIMESTAMP&&e.type!==_e.DB_TYPE_TIMESTAMP_LTZ&&e.type!==_e.DB_TYPE_TIMESTAMP_TZ&&e.type!==_e.DB_TYPE_RAW&&h.throwErr(h.ERR_INVALID_TYPE_FOR_ARRAY_BIND)}async _processExecuteBinds(e){let t=[];if(Array.isArray(e))for(let s=0;s<e.length;s++){let r=t[s]={pos:s+1,values:[]};await this._processExecuteBind(r,e[s])}else{h.assertParamValue(Q.isObject(e),2);let s=Object.getOwnPropertyNames(e);for(let r=0;r<s.length;r++){let n=t[r]={name:s[r],values:[]};await this._processExecuteBind(n,e[s[r]])}}return t}async _processExecuteManyBinds(e,t){let s=[],r;if(t!==void 0)if(Array.isArray(t)){r=!0;for(let n=0;n<t.length;n++){let o=s[n]={pos:n+1,values:[]};await this._processBindUnit(o,t[n],!0)}}else{r=!1;let n=Object.getOwnPropertyNames(t);for(let o=0;o<n.length;o++){let a=s[o]={name:n[o],values:[]};await this._processBindUnit(a,t[n[o]],!0)}}else{let n=e[0];if(h.assertParamValue(Q.isObjectOrArray(n),2),Array.isArray(n)){r=!0;for(let o=0;o<n.length;o++)s[o]={pos:o+1}}else{r=!1;let o=Object.getOwnPropertyNames(n);for(let a=0;a<o.length;a++)s[a]={name:o[a]}}for(let o=0;o<s.length;o++)s[o].dir=ce.BIND_IN,s[o].isArray=!1,s[o].values=[]}for(let n=0;n<e.length;n++){let o=e[n],a={pos:n,allowArray:!1};h.assert(r&&Array.isArray(o)||!r&&Q.isObject(o),h.ERR_MIXED_BIND);for(let c=0;c<s.length;c++){let E=s[c],l=r?o[c]:o[E.name];await this._processBindValue(E,l,a)}}for(let n=0;n<s.length;n++){let o=s[n];o.type===void 0&&(o.type=_e.DB_TYPE_VARCHAR,o.maxSize=1)}return s}_transformOutBind(e,t){let s=e;if(Array.isArray(e)){s=[];for(let r=0;r<e.length;r++)s.push(this._transformOutBind(e[r],t))}else if(e instanceof ei.ResultSetImpl)s=new $r,s._setup(this,e);else if(e instanceof ei.LobImpl)s=new eo,s._setup(e,!0);else if(e instanceof ei.DbObjectImpl){let r=this._dbObjectClasses.get(e._objType);s=Object.create(r.prototype),s._impl=e,t.dbObjectAsPojo?s=s._toPojo():s.isCollection&&(s=new Proxy(s,Cs._collectionProxyHandler))}return s}_verifyExecOpts(e,t){let s={};if(h.assertParamValue(Q.isObject(e),3),e.autoCommit!==void 0&&(h.assertParamPropValue(typeof e.autoCommit=="boolean",3,"autoCommit"),s.autoCommit=e.autoCommit),e.dbObjectAsPojo!==void 0&&(h.assertParamPropValue(typeof e.dbObjectAsPojo=="boolean",3,"dbObjectAsPojo"),s.dbObjectAsPojo=e.dbObjectAsPojo),e.keepInStmtCache!==void 0&&(h.assertParamPropValue(typeof e.keepInStmtCache=="boolean",3,"keepInStmtCache"),s.keepInStmtCache=e.keepInStmtCache),t)e.bindDefs!==void 0&&(h.assertParamPropValue(Q.isObjectOrArray(e.bindDefs),3,"bindDefs"),s.bindDefs=e.bindDefs),e.batchErrors!==void 0&&(h.assertParamPropValue(typeof e.batchErrors=="boolean",3,"batchErrors"),s.batchErrors=e.batchErrors),e.dmlRowCounts!==void 0&&(h.assertParamPropValue(typeof e.dmlRowCounts=="boolean",3,"dmlRowCounts"),s.dmlRowCounts=e.dmlRowCounts);else{if(h.assertParamPropUnsignedIntNonZero(e,3,"fetchArraySize"),s.fetchArraySize=e.fetchArraySize,e.fetchInfo!==void 0){h.assertParamPropValue(Q.isObject(e.fetchInfo),3,"fetchInfo");let r=Object.getOwnPropertyNames(e.fetchInfo),n=new Map(to.fetchTypeMap);for(let o of r){let a=e.fetchInfo[o];a.type===void 0&&h.throwErr(h.ERR_NO_TYPE_FOR_CONVERSION),a.type!==ce.DEFAULT&&a.type!==_e.DB_TYPE_VARCHAR&&a.type!==_e.DB_TYPE_RAW&&h.throwErr(h.ERR_INVALID_TYPE_FOR_CONVERSION),n.set(o,a.type)}s.fetchTypeMap=n}if(e.fetchTypeHandler!==void 0){let r=typeof e.fetchTypeHandler;h.assertParamPropValue(r==="function",3,"fetchTypeHandler"),s.fetchTypeHandler=e.fetchTypeHandler}e.maxRows!==void 0&&(h.assertParamPropValue(Number.isInteger(e.maxRows)&&e.maxRows>=0,3,"maxRows"),s.maxRows=e.maxRows),e.outFormat!==void 0&&(h.assertParamPropValue(e.outFormat===ce.OUT_FORMAT_ARRAY||e.outFormat===ce.OUT_FORMAT_OBJECT,3,"outFormat"),s.outFormat=e.outFormat),e.prefetchRows!==void 0&&(h.assertParamPropValue(Number.isInteger(e.prefetchRows)&&e.prefetchRows>=0,3,"prefetchRows"),s.prefetchRows=e.prefetchRows),e.resultSet!==void 0&&(h.assertParamPropValue(typeof e.resultSet=="boolean",3,"resultSet"),s.resultSet=e.resultSet)}return s}get action(){return null}set action(e){h.assertPropValue(typeof e=="string","action"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setAction(e)}async breakExecution(){h.assertArgCount(arguments,0,0),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.breakExecution()}get callTimeout(){if(this._impl)return this._impl.getCallTimeout()}set callTimeout(e){h.assertPropValue(Number.isInteger(e)&&e>=0,"callTimeout"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setCallTimeout(e)}async changePassword(e,t,s){h.assertArgCount(arguments,3,3),h.assertParamValue(typeof e=="string",1),h.assertParamValue(typeof t=="string",2),h.assertParamValue(typeof s=="string",3),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.changePassword(e,t,s)}get clientId(){return null}set clientId(e){h.assertPropValue(typeof e=="string","clientId"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setClientId(e)}get clientInfo(){return null}set clientInfo(e){h.assertPropValue(typeof e=="string","clientInfo"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setClientInfo(e)}async close(e){let t={};h.assertArgCount(arguments,0,1),arguments.length==1&&(h.assertParamValue(Q.isObject(e),1),t=e,h.assertParamPropBool(t,1,"drop")),h.assert(this._impl&&!this._closing,h.ERR_INVALID_CONNECTION),this._closing=!0;try{await this._impl.close(t)}finally{this._closing=!1}delete this._impl,this._dbObjectClasses.clear(),this.emit("_afterConnClose")}async commit(){h.assertArgCount(arguments,0,0),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.commit()}async createLob(e){h.assertArgCount(arguments,1,1),h.assertParamValue(e===_e.DB_TYPE_CLOB||e===_e.DB_TYPE_BLOB||e===_e.DB_TYPE_NCLOB,1),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let t=new eo;return t._setup(await this._impl.createLob(e),!1),t}get currentSchema(){if(this._impl)return this._impl.getCurrentSchema()}set currentSchema(e){h.assertPropValue(typeof e=="string","currentSchema"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setCurrentSchema(e)}get dbOp(){return null}set dbOp(e){h.assertPropValue(typeof e=="string","dbOp"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setDbOp(e)}get thin(){return to.thin}get ecid(){return null}set ecid(e){h.assertPropValue(typeof e=="string","ecid"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setECID(e)}decodeOSON(e){return h.assertArgCount(arguments,1,1),h.assertParamValue(eN.isBuffer(e),1),new sN.OsonDecoder(e).decode()}encodeOSON(e){return new sN.OsonEncoder().encode(tN.transformJsonValue(e),this._impl._osonMaxFieldNameSize)}async execute(e,t,s){let n=[],o={};Q.isObject(e)&&typeof e.statement=="string"?(h.assertArgCount(arguments,1,2),e.values&&(n=await this._processExecuteBinds(e.values)),e=e.statement,arguments.length==2&&(o=this._verifyExecOpts(t,!1))):(h.assertArgCount(arguments,1,3),h.assertParamValue(typeof e=="string",1),arguments.length>=2&&(n=await this._processExecuteBinds(t)),arguments.length==3&&(o=this._verifyExecOpts(s,!1))),this._addDefaultsToExecOpts(o),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let a;try{a=await this._impl.execute(e,1,n,o,!1)}catch(c){throw c.errorNum===1406&&h.throwErr(h.ERR_INSUFFICIENT_BUFFER_FOR_BINDS),c}if(a.warning&&(a.warning=h.transformErr(a.warning)),a.resultSet!==void 0){let c=new $r;c._setup(this,a.resultSet),a.metaData=c._impl.metaData,o.resultSet?a.resultSet=c:(a.rows=await c._getAllRows(),delete a.resultSet)}if(a.outBinds!==void 0)for(let[c,E]of Object.entries(a.outBinds)){let l=this._transformOutBind(E,o);a.outBinds[c]=l}if(a.implicitResults)for(let[c,E]of Object.entries(a.implicitResults)){let l=new $r;l._setup(this,E),o.resultSet?a.implicitResults[c]=l:a.implicitResults[c]=await l._getAllRows()}return a}async executeMany(e,t,s){let r={},n=[],o;h.assertArgCount(arguments,2,3),h.assertParamValue(typeof e=="string",1),arguments.length==3&&(r=this._verifyExecOpts(s,!0)),this._addDefaultsToExecOpts(r),typeof t=="number"?(h.assertParamValue(Number.isInteger(t)&&t>0,2),o=t,r.bindDefs!==void 0&&(n=await this._processExecuteManyBinds([],r.bindDefs))):(h.assertParamValue(Array.isArray(t)&&t.length>0,2),o=t.length,n=await this._processExecuteManyBinds(t,r.bindDefs)),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let a=await this._impl.execute(e,o,n,r,!0);if(a.warning&&(a.warning=h.transformErr(a.warning)),a.outBinds!==void 0)for(let c=0;c<a.outBinds.length;c++){let E=a.outBinds[c];for(let[l,u]of Object.entries(E))E[l]=this._transformOutBind(u,r)}return a}get externalName(){if(this._impl)return this._impl.getExternalName()}set externalName(e){h.assertPropValue(typeof e=="string","externalName"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setExternalName(e)}get dbDomain(){return this._impl&&this._impl.getDbDomain()}get dbName(){return this._impl&&this._impl.getDbName()}async getDbObjectClass(e){return h.assertArgCount(arguments,1,1),h.assertParamValue(typeof e=="string",1),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._getDbObjectClassForName(e)}async getQueue(e,t){let s={};h.assertArgCount(arguments,1,2),h.assertParamValue(typeof e=="string",1),arguments.length==2&&(h.assertParamValue(Q.isObject(t),2),s={...t}),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let r=new Od;return await r.create(this,e,s),r}getSodaDatabase(){h.assertArgCount(arguments,0,0),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let e=new gd;return e._impl=this._impl.getSodaDatabase(),e}async getStatementInfo(e){h.assertArgCount(arguments,1,1),h.assertParamValue(typeof e=="string",1),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let t=await this._impl.getStatementInfo(e);if(t.metaData)for(let s=0;s<t.metaData.length;s++){let r=t.metaData[s];Q.addTypeProperties(r,"dbType"),r.fetchType=_e.DB_TYPE_FETCH_TYPE_MAP.get(r.dbType)}return t}get instanceName(){if(this._impl)return this._impl.getInstanceName()}get internalName(){if(this._impl)return this._impl.getInternalName()}set internalName(e){h.assertPropValue(typeof e=="string","internalName"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setInternalName(e)}isHealthy(){return this._impl!==void 0&&!this._closing&&this._impl.isHealthy()}get maxOpenCursors(){return this._impl&&this._impl.getMaxOpenCursors()}get warning(){let e=this._impl.getWarning();return e&&(e=h.transformErr(e)),this._impl&&e}get module(){return null}set module(e){h.assertPropValue(typeof e=="string","module"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setModule(e)}get oracleServerVersion(){if(this._impl)return this._impl.getOracleServerVersion()}get oracleServerVersionString(){if(this._impl)return this._impl.getOracleServerVersionString()}get serviceName(){return this._impl&&this._impl.getServiceName()}get transactionInProgress(){return this._impl&&this._impl.getTransactionInProgress()}async ping(){h.assertArgCount(arguments,0,0),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.ping()}queryStream(e,t,s){h.assertArgCount(arguments,1,3),h.assertParamValue(typeof e=="string",1),arguments.length==3?(h.assertParamValue(Q.isObject(s),3),s={...s}):s={},s.resultSet=!0;let r=new yd;return Bd.nextTick(async()=>{try{let n=await this.execute(e,t||[],s);n.resultSet||h.throwErr(h.ERR_NOT_A_QUERY),r._open(n.resultSet)}catch(n){r.destroy(n);return}}),r}async rollback(){h.assertArgCount(arguments,0,0),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.rollback()}async shutdown(e){let t=ce.SHUTDOWN_MODE_DEFAULT;h.assertArgCount(arguments,0,1),e!==void 0&&(h.assertParamValue(typeof t=="number",1),t=e),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.shutdown(t)}async startup(e){let t={};h.assertArgCount(arguments,0,1),arguments.length==1&&(h.assertParamValue(typeof t=="object",1),t=e,h.assertParamPropBool(t,1,"force"),h.assertParamPropBool(t,1,"restrict"),h.assertParamPropString(t,1,"pfile")),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.startup(t)}get stmtCacheSize(){if(this._impl)return this._impl.getStmtCacheSize()}set stmtCacheSize(e){h.assertPropValue(Number.isInteger(e)&&e>=0,"stmtCacheSize"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setStmtCacheSize(e)}async subscribe(e,t){h.assertArgCount(arguments,2,2),h.assertParamValue(typeof e=="string",1),h.assertParamValue(Q.isObject(t),2),t={name:e,...t},h.assertParamPropUnsignedInt(t,2,"namespace"),t.namespace===void 0&&(t.namespace=ce.SUBSCR_NAMESPACE_DBCHANGE),h.assertParamPropString(t,2,"ipAddress"),h.assertParamPropUnsignedInt(t,2,"port"),h.assertParamPropUnsignedInt(t,2,"timeout"),h.assertParamPropUnsignedInt(t,2,"operations"),h.assertParamPropUnsignedInt(t,2,"qos"),h.assertParamPropUnsignedInt(t,2,"groupingClass"),h.assertParamPropUnsignedInt(t,2,"groupingValue"),h.assertParamPropUnsignedInt(t,2,"groupingType"),h.assertParamPropBool(t,2,"clientInitiated"),h.assertParamPropFunction(t,2,"callback"),h.assert(t.callback,h.ERR_MISSING_SUBSCR_CALLBACK),t.namespace===ce.SUBSCR_NAMESPACE_DBCHANGE&&(h.assertParamPropString(t,2,"sql"),h.assert(t.sql&&t.sql.length>0,h.ERR_MISSING_SUBSCR_SQL),t.binds!==void 0&&(t.binds=await this._processExecuteBinds(t.binds))),h.assert(this._impl,h.ERR_INVALID_CONNECTION);let s=zs.get(e),r=await this._impl.subscribe(s,t),n;return t.namespace===ce.SUBSCR_NAMESPACE_DBCHANGE?(n=r.subscription,delete r.subscription):n=r,zs.set(e,n),r}get tag(){if(this._impl)return this._impl.getTag()}set tag(e){h.assertPropValue(typeof e=="string","tag"),h.assert(this._impl,h.ERR_INVALID_CONNECTION),this._impl.setTag(e)}async tpcBegin(e,t,s){h.assertArgCount(arguments,1,3),h.assertParamValue(Q.isXid(e),1);let r=Q.normalizeXid(e);arguments.length<3?s=60:h.assertParamValue(typeof s=="number",3),arguments.length<2?t=ce.TPC_BEGIN_NEW:(h.assertParamValue(typeof t=="number",2),[ce.TPC_BEGIN_NEW,ce.TPC_BEGIN_JOIN,ce.TPC_BEGIN_RESUME,ce.TPC_BEGIN_PROMOTE].indexOf(t)<0&&h.throwErr(h.ERR_INVALID_TPC_BEGIN_FLAGS)),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.tpcBegin(r,t,s)}async tpcCommit(e,t){h.assertArgCount(arguments,0,2),arguments.length<2?t=!1:h.assertParamValue(typeof t=="boolean",2);let s;arguments.length>=1&&(h.assertParamValue(Q.isXid(e),1),s=Q.normalizeXid(e)),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.tpcCommit(s,t)}async tpcEnd(e,t){h.assertArgCount(arguments,0,2),arguments.length<2?t=ce.TPC_END_NORMAL:(h.assertParamValue(typeof t=="number",2),[ce.TPC_END_NORMAL,ce.TPC_END_SUSPEND].includes(t)||h.throwErr(h.ERR_INVALID_TPC_END_FLAGS));let s;arguments.length>=1&&(h.assertParamValue(Q.isXid(e),1),s=Q.normalizeXid(e)),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.tpcEnd(s,t)}async tpcForget(e){h.assertArgCount(arguments,1,1),h.assertParamValue(Q.isXid(e),1);let t=Q.normalizeXid(e);h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.tpcForget(t)}async tpcPrepare(e){h.assertArgCount(arguments,0,1);let t;return arguments.length>=1&&(h.assertParamValue(Q.isXid(e),1),t=Q.normalizeXid(e)),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.tpcPrepare(t)}async tpcRecover(e){h.assertArgCount(arguments,0,1),arguments.length==1?h.assertParamValue(typeof e=="boolean",1):e=!0;let t=`
      SELECT
          formatid as "formatId",
          UTL_RAW.CAST_TO_VARCHAR2(globalid) as "globalTransactionId",
          UTL_RAW.CAST_TO_VARCHAR2(branchid) as "branchQualifier"
      FROM DBA_PENDING_TRANSACTIONS`,s=`
      SELECT
          formatid as "formatId",
          globalid as "globalTransactionId",
          branchid as "branchQualifier"
      FROM DBA_PENDING_TRANSACTIONS`,r={outFormat:ce.OUT_FORMAT_OBJECT,resultSet:!1};return(await this.execute(e?t:s,{},r)).rows}async tpcRollback(e){h.assertArgCount(arguments,0,1);let t;arguments.length==1&&(h.assertParamValue(Q.isXid(e),1),t=Q.normalizeXid(e)),h.assert(this._impl,h.ERR_INVALID_CONNECTION),await this._impl.tpcRollback(t)}async unsubscribe(e){h.assertArgCount(arguments,1,1),h.assertParamValue(typeof e=="string",1),h.assert(this._impl,h.ERR_INVALID_CONNECTION),h.assert(zs.has(e),h.ERR_INVALID_SUBSCR),await this._impl.unsubscribe(zs.get(e)),zs.delete(e)}};T(so,"Connection");var ut=so;ut.prototype.break=Q.callbackify(ut.prototype.breakExecution);ut.prototype.tpcRecover=Q.callbackify(ut.prototype.tpcRecover);Q.wrapFns(ut.prototype,"changePassword","close","commit","createLob","execute","executeMany","getDbObjectClass","getQueue","getStatementInfo","ping","rollback","shutdown","startup","subscribe","tpcBegin","tpcCommit","tpcEnd","tpcForget","tpcPrepare","tpcRollback","unsubscribe");ut.prototype.release=ut.prototype.close;rN.exports=ut});var _o=I((_C,iN)=>{"use strict";var Yd=require("process"),Ud=nt(),no=class no{constructor(e){let t=0;e._totalRequestsEnqueued!==0&&(t=Math.round(e._totalTimeInQueue/e._totalRequestsEnqueued)),this.gatheredDate=Date.now(),this.upTime=this.gatheredDate-e._createdDate,this.upTimeSinceReset=this.gatheredDate-e._timeOfReset,this.connectionRequests=e._totalConnectionRequests,this.requestsEnqueued=e._totalRequestsEnqueued,this.requestsDequeued=e._totalRequestsDequeued,this.failedRequests=e._totalFailedRequests,this.rejectedRequests=e._totalRequestsRejected,this.requestTimeouts=e._totalRequestTimeouts,this.maximumQueueLength=e._maximumQueueLength,this.currentQueueLength=e._connRequestQueue.length,this.timeInQueue=e._totalTimeInQueue,this.minimumTimeInQueue=e._minTimeInQueue,this.maximumTimeInQueue=e._maxTimeInQueue,this.averageTimeInQueue=t,this.connectionsInUse=e.connectionsInUse,this.connectionsOpen=e.connectionsOpen,this.connectString=e.connectString,this.edition=e.edition,this.events=e.events,this.externalAuth=e.externalAuth,this.homogeneous=e.homogeneous,this.poolAlias=e.poolAlias,this.poolIncrement=e.poolIncrement,this.poolMax=e.poolMax,this.poolMaxPerShard=e.poolMaxPerShard,this.poolMin=e.poolMin,this.poolPingInterval=e.poolPingInterval,this.poolPingTimeout=e.poolPingTimeout,this.poolTimeout=e.poolTimeout,this.queueMax=e.queueMax,this.queueTimeout=e.queueTimeout,this.sodaMetaDataCache=e.sodaMetaDataCache,this.stmtCacheSize=e.stmtCacheSize,this.user=e.user,this.threadPoolSize=Yd.env.UV_THREADPOOL_SIZE,this.thin=Ud.thin}logStatistics(){console.log(`
Driver:`),console.log("...thin mode:",this.thin),console.log("Pool statistics:"),console.log("...gathered at:",new Date(this.gatheredDate).toISOString()),console.log("...up time (milliseconds):",this.upTime),console.log("...up time from last reset (milliseconds)",this.upTimeSinceReset),console.log("...connection requests:",this.connectionRequests),console.log("...requests enqueued:",this.requestsEnqueued),console.log("...requests dequeued:",this.requestsDequeued),console.log("...requests failed:",this.failedRequests),console.log("...requests exceeding queueMax:",this.rejectedRequests),console.log("...requests exceeding queueTimeout:",this.requestTimeouts),console.log("...current queue length:",this.currentQueueLength),console.log("...maximum queue length:",this.maximumQueueLength),console.log("...sum of time in queue (milliseconds):",this.timeInQueue),console.log("...minimum time in queue (milliseconds):",this.minimumTimeInQueue),console.log("...maximum time in queue (milliseconds):",this.maximumTimeInQueue),console.log("...average time in queue (milliseconds):",this.averageTimeInQueue),console.log("...pool connections in use:",this.connectionsInUse),console.log("...pool connections open:",this.connectionsOpen),console.log("Pool attributes:"),console.log("...connectString:",this.connectString),console.log("...edition:",this.edition),console.log("...events:",this.events),console.log("...externalAuth:",this.externalAuth),console.log("...homogeneous:",this.homogeneous),console.log("...poolAlias:",this.poolAlias),console.log("...poolIncrement:",this.poolIncrement),console.log("...poolMax:",this.poolMax),console.log("...poolMaxPerShard:",this.poolMaxPerShard),console.log("...poolMin:",this.poolMin),console.log("...poolPingInterval (seconds):",this.poolPingInterval),console.log("...poolPingTimeout (milliseconds):",this.poolPingTimeout),console.log("...poolTimeout (seconds):",this.poolTimeout),console.log("...queueMax:",this.queueMax),console.log("...queueTimeout (milliseconds):",this.queueTimeout),console.log("...sessionCallback:",this.sessionCallback),console.log("...sodaMetaDataCache:",this.sodaMetaDataCache),console.log("...stmtCacheSize:",this.stmtCacheSize),console.log("...user:",this.user),console.log("Related environment variables:"),console.log("...UV_THREADPOOL_SIZE:",this.threadPoolSize)}};T(no,"PoolStatistics");var io=no;iN.exports=io});var oN=I((aC,_N)=>{"use strict";var Md=ro(),Vd=require("events"),Lt=Ye(),V=U(),nN=nt(),At=Le(),Fd=ps(),xd=_o(),oo=class oo extends Vd{constructor(){super(),this._impl=new Fd.PoolImpl,this._queueMax=0,this._queueTimeout=0,this._enableStatistics=!1,this._timeOfReset=this._createdDate=Date.now(),this._sessionCallback=void 0,this._connRequestQueue=[],this._connectionClass=nN.connectionClass}_checkPoolOpen(e){this.status===Lt.POOL_STATUS_DRAINING?V.throwErr(V.ERR_POOL_CLOSING):this.status===Lt.POOL_STATUS_CLOSED?V.throwErr(V.ERR_POOL_CLOSED):e||this.status===Lt.POOL_STATUS_RECONFIGURING&&V.throwErr(V.ERR_POOL_RECONFIGURING)}_checkRequestQueue(){let e=this._connectionsOut;for(;this._connRequestQueue.length>0&&e<this.poolMax;){e+=1;let t=this._connRequestQueue.shift();this._enableStatistics&&(this._totalRequestsDequeued+=1,this._updateWaitStatistics(t)),t.timeoutHandle&&clearTimeout(t.timeoutHandle),t.resolve()}}get _enableStats(){return this._enableStatistics}_resetStatistics(){this._timeOfReset=Date.now(),this._totalConnectionRequests=0,this._totalRequestsEnqueued=0,this._totalRequestsDequeued=0,this._totalFailedRequests=0,this._totalRequestsRejected=0,this._totalRequestTimeouts=0,this._maximumQueueLength=this._connRequestQueue.length,this._totalTimeInQueue=0,this._minTimeInQueue=0,this._maxTimeInQueue=0}_setup(e,t){this._queueTimeout=e.queueTimeout,this._queueMax=e.queueMax,this._enableStatistics=e.enableStatistics,this._edition=e.edition,this._eventsFlag=e.events,this._externalAuth=e.externalAuth,this._homogeneous=e.homogeneous,this._user=e.user,this._connectString=e.connectString,this._status=Lt.POOL_STATUS_OPEN,this._connectionsOut=0,this._poolAlias=t,this.on("_checkRequestQueue",this._checkRequestQueue),this._resetStatistics()}_updateWaitStatistics(e){let t=Date.now()-e.enqueuedTime;this._totalTimeInQueue+=t,this._minTimeInQueue===0?this._minTimeInQueue=t:this._minTimeInQueue=Math.min(this._minTimeInQueue,t),this._maxTimeInQueue=Math.max(this._maxTimeInQueue,t)}_verifyGetConnectionOptions(e){let t={};if(e.user!==void 0&&(V.assertParamPropValue(typeof e.user=="string",1,"user"),t.user=e.user),e.username!==void 0&&(V.assert(t.user===void 0,V.ERR_DBL_USER),V.assertParamPropValue(typeof e.username=="string",1,"username"),t.user=e.username),this.externalAuth&&t.user&&(t.user[0]!=="["||t.user.slice(-1)!=="]")&&V.throwErr(V.ERR_WRONG_USER_FORMAT_EXTAUTH_PROXY),e.password!==void 0&&(V.assertParamPropValue(typeof e.password=="string",1,"password"),this.externalAuth&&V.throwErr(V.ERR_WRONG_CRED_FOR_EXTAUTH),t.password=e.password),e.tag!==void 0&&(V.assertParamPropValue(typeof e.tag=="string",1,"tag"),t.tag=e.tag),e.matchAnyTag!==void 0&&(V.assertParamPropValue(typeof e.matchAnyTag=="boolean",1,"matchAnyTag"),t.matchAnyTag=e.matchAnyTag),e.shardingKey!==void 0){let s=e.shardingKey;V.assertParamPropValue(At.isShardingKey(s),1,"shardingKey"),t.shardingKey=e.shardingKey}if(e.superShardingKey!==void 0){let s=e.superShardingKey;V.assertParamPropValue(At.isShardingKey(s),1,"superShardingKey"),t.superShardingKey=e.superShardingKey}return e.privilege!==void 0&&(V.assertParamPropValue(At.isPrivilege(e.privilege),1,"privilege"),t.privilege=e.privilege),t}async close(e){let t=0,s=!1;V.assertArgCount(arguments,0,1),arguments.length==1&&(V.assertParamValue(typeof e=="number",1),(e<0||isNaN(e)||e>2**31)&&V.throwErr(V.ERR_INVALID_PARAMETER_VALUE,1),s=!0,this._connectionsOut>0&&(t=e*1e3)),this._checkPoolOpen(!1),t>0&&(this._status=Lt.POOL_STATUS_DRAINING,await new Promise(r=>{let n=setTimeout(()=>{this.removeAllListeners("_allCheckedIn"),r()},t);this.once("_allCheckedIn",()=>{clearTimeout(n),r()})})),!s&&this._connectionsOut>0&&V.throwErr(V.ERR_POOL_HAS_BUSY_CONNECTIONS),await this._impl.close(),this._status=Lt.POOL_STATUS_CLOSED,this.emit("_afterPoolClose")}get connectionsInUse(){return this._impl.getConnectionsInUse()}get connectionsOpen(){return this._impl.getConnectionsOpen()}get connectString(){return this._connectString}get thin(){return nN.thin}get edition(){return this._edition}get enableStatistics(){return this._enableStatistics}get events(){return this._eventsFlag}get externalAuth(){return this._externalAuth}async getConnection(e){let t,s={};V.assertArgCount(arguments,0,1),arguments.length==1&&(V.assertParamValue(At.isObject(e),1),s=this._verifyGetConnectionOptions(e)),s.connectionClass=this._connectionClass,this._checkPoolOpen(!0),this._enableStatistics&&(this._totalConnectionRequests+=1);try{t=this.poolMax}catch(r){throw this._enableStatistics&&(this._totalFailedRequests+=1),r}(this._connectionsOut>=t||this.status===Lt.POOL_STATUS_RECONFIGURING)&&(this._connRequestQueue.length>=this._queueMax&&this._queueMax>=0&&(this._enableStatistics&&(this._totalRequestsRejected+=1),V.throwErr(V.ERR_QUEUE_MAX_EXCEEDED,this._queueMax)),await new Promise((r,n)=>{let o={resolve:r,reject:n};this._queueTimeout!==0&&(o.timeoutHandle=setTimeout(()=>{let a=this._connRequestQueue.indexOf(o);a>=0&&this._connRequestQueue.splice(a,1),this._enableStatistics&&(this._totalRequestTimeouts+=1,this._updateWaitStatistics(o));try{V.throwErr(V.ERR_CONN_REQUEST_TIMEOUT,this._queueTimeout)}catch(c){n(c)}},this._queueTimeout)),this._connRequestQueue.push(o),this._enableStatistics&&(o.enqueuedTime=Date.now(),this._totalRequestsEnqueued+=1,this._maximumQueueLength=Math.max(this._maximumQueueLength,this._connRequestQueue.length))}),this._checkPoolOpen(!0)),this._connectionsOut+=1;try{let r=new Md;r._impl=await this._impl.getConnection(s),r._pool=this;let n=s.tag||"";if(typeof this.sessionCallback=="function"&&(r._impl._newSession||r.tag!=n))try{await new Promise((o,a)=>{this.sessionCallback(r,n,function(c){c?a(c):o()})})}catch(o){throw await r.close({drop:!0}),o}return r.on("_afterConnClose",()=>{this._connectionsOut-=1,this.emit("_checkRequestQueue"),this._connectionsOut==0&&this.emit("_allCheckedIn")}),r}catch(r){throw this._connectionsOut-=1,this._enableStatistics&&(this._totalFailedRequests+=1),this.emit("_checkRequestQueue"),r}}getStatistics(){return this._checkPoolOpen(!1),this._enableStatistics!==!0?null:new xd(this)}get homogeneous(){return this._homogeneous}logStatistics(){let e=this.getStatistics();e===null&&V.throwErr(V.ERR_POOL_STATISTICS_DISABLED),e.logStatistics()}get poolAlias(){return this._poolAlias}get poolIncrement(){return this._impl.getPoolIncrement()}get poolMax(){return this._impl.getPoolMax()}get poolMaxPerShard(){return this._impl.getPoolMaxPerShard()}get poolMin(){return this._impl.getPoolMin()}get poolPingInterval(){return this._impl.getPoolPingInterval()}get poolPingTimeout(){return this._impl.getPoolPingTimeout()}get poolTimeout(){return this._impl.getPoolTimeout()}get queueMax(){return this._queueMax}get queueTimeout(){return this._queueTimeout}async reconfigure(e){V.assertArgCount(arguments,1,1),V.assertParamValue(At.isObject(e)),V.assertParamPropUnsignedInt(e,1,"queueMax"),V.assertParamPropUnsignedInt(e,1,"queueTimeout"),V.assertParamPropBool(e,1,"enableStatistics"),V.assertParamPropBool(e,1,"resetStatistics"),V.assertParamPropUnsignedInt(e,1,"poolMin"),V.assertParamPropUnsignedIntNonZero(e,1,"poolMax"),V.assertParamPropUnsignedInt(e,1,"poolMaxPerShard"),V.assertParamPropUnsignedInt(e,1,"poolIncrement"),V.assertParamPropInt(e,1,"poolPingInterval"),V.assertParamPropUnsignedInt(e,1,"poolTimeout"),V.assertParamPropUnsignedInt(e,1,"stmtCacheSize"),V.assertParamPropBool(e,1,"sodaMetaDataCache"),e.poolMin>e.poolMax&&V.throwErr(V.ERR_INVALID_NUMBER_OF_CONNECTIONS,e.poolMax,e.poolMin),this._checkPoolOpen(!1),this._status=Lt.POOL_STATUS_RECONFIGURING;try{await this._impl.reconfigure(e),(e.resetStatistics==!0||e.enableStatistics==!0&&this._enableStatistics==!1)&&this._resetStatistics(),e.queueMax!==void 0&&(this._queueMax=e.queueMax),e.queueTimeout!==void 0&&(this._queueTimeout=e.queueTimeout),e.enableStatistics!==void 0&&(this._enableStatistics=e.enableStatistics)}finally{this._status=Lt.POOL_STATUS_OPEN}this.emit("_checkRequestQueue")}get sessionCallback(){return this._sessionCallback}async setAccessToken(e){V.assertArgCount(arguments,1,1),V.assertParamValue(At.isObject(e),1),V.assertParamPropString(e,1,"token"),V.assertParamPropString(e,1,"privateKey"),await this._impl.setAccessToken(e)}get sodaMetaDataCache(){return this._impl.getSodaMetaDataCache()}get status(){return this._status}get stmtCacheSize(){return this._impl.getStmtCacheSize()}get user(){return this._user}};T(oo,"Pool");var Ke=oo;Ke.prototype.close=At.callbackify(Ke.prototype.close);Ke.prototype.getConnection=At.callbackify(Ke.prototype.getConnection);Ke.prototype.reconfigure=At.callbackify(Ke.prototype.reconfigure);Ke.prototype.setAccessToken=At.callbackify(Ke.prototype.setAccessToken);Ke.prototype.terminate=Ke.prototype.close;Ke.prototype._logStats=Ke.prototype.logStatistics;_N.exports=Ke});var Ee=I((cC,cN)=>{"use strict";var{Buffer:aN}=require("buffer"),Oe=Ye(),TN=Hs();cN.exports={BIND_IN:Oe.BIND_IN,BIND_INOUT:Oe.BIND_INOUT,BIND_OUT:Oe.BIND_OUT,CLIENT_VERSION:Oe.VERSION_MAJOR<<24|Oe.VERSION_MINOR<<20|Oe.VERSION_PATCH<<12,CSFRM_IMPLICIT:Oe.CSFRM_IMPLICIT,CSFRM_NCHAR:Oe.CSFRM_NCHAR,DRIVER_NAME:Oe.DEFAULT_DRIVER_NAME+" thn",PURITY_DEFAULT:Oe.PURITY_DEFAULT,PURITY_NEW:Oe.PURITY_NEW,PURITY_SELF:Oe.PURITY_SELF,SYSASM:Oe.SYSASM,SYSBKP:Oe.SYSBKP,SYSDBA:Oe.SYSDBA,SYSDG:Oe.SYSDG,SYSKM:Oe.SYSKM,SYSOPER:Oe.SYSOPER,SYSRAC:Oe.SYSRAC,AUTH_MODE_DEFAULT:0,AUTH_MODE_PRELIM:8,AUTH_MODE_SYSASM:32768,AUTH_MODE_SYSBKP:131072,AUTH_MODE_SYSDBA:2,AUTH_MODE_SYSDGD:262144,AUTH_MODE_SYSKMT:524288,AUTH_MODE_SYSOPER:4,AUTH_MODE_SYSRAC:1048576,TNS_AUTH_MODE_LOGON:1,TNS_AUTH_MODE_CHANGE_PASSWORD:2,TNS_AUTH_MODE_SYSDBA:32,TNS_AUTH_MODE_SYSOPER:64,TNS_AUTH_MODE_PRELIM:128,TNS_AUTH_MODE_WITH_PASSWORD:256,TNS_AUTH_MODE_SYSASM:4194304,TNS_AUTH_MODE_SYSBKP:16777216,TNS_AUTH_MODE_SYSDGD:33554432,TNS_AUTH_MODE_SYSKMT:67108864,TNS_AUTH_MODE_SYSRAC:134217728,TNS_AUTH_MODE_IAM_TOKEN:536870912,TNS_PACKET_TYPE_CONNECT:1,TNS_PACKET_TYPE_ACCEPT:2,TNS_PACKET_TYPE_REFUSE:4,TNS_PACKET_TYPE_REDIRECT:5,TNS_PACKET_TYPE_DATA:6,TNS_PACKET_TYPE_RESEND:11,TNS_PACKET_TYPE_MARKER:12,TNS_PACKET_TYPE_CONTROL:14,TNS_DATA_TYPE_DEFAULT:0,TNS_DATA_TYPE_VARCHAR:1,TNS_DATA_TYPE_NUMBER:2,TNS_DATA_TYPE_BINARY_INTEGER:3,TNS_DATA_TYPE_FLOAT:4,TNS_DATA_TYPE_STR:5,TNS_DATA_TYPE_VNU:6,TNS_DATA_TYPE_PDN:7,TNS_DATA_TYPE_LONG:8,TNS_DATA_TYPE_VCS:9,TNS_DATA_TYPE_TIDDEF:10,TNS_DATA_TYPE_ROWID:11,TNS_DATA_TYPE_DATE:12,TNS_DATA_TYPE_VBI:15,TNS_DATA_TYPE_RAW:23,TNS_DATA_TYPE_LONG_RAW:24,TNS_DATA_TYPE_UB2:25,TNS_DATA_TYPE_UB4:26,TNS_DATA_TYPE_SB1:27,TNS_DATA_TYPE_SB2:28,TNS_DATA_TYPE_SB4:29,TNS_DATA_TYPE_SWORD:30,TNS_DATA_TYPE_UWORD:31,TNS_DATA_TYPE_PTRB:32,TNS_DATA_TYPE_PTRW:33,TNS_DATA_TYPE_OER8:290,TNS_DATA_TYPE_FUN:291,TNS_DATA_TYPE_AUA:292,TNS_DATA_TYPE_RXH7:293,TNS_DATA_TYPE_NA6:294,TNS_DATA_TYPE_OAC9:39,TNS_DATA_TYPE_AMS:40,TNS_DATA_TYPE_BRN:41,TNS_DATA_TYPE_BRP:298,TNS_DATA_TYPE_BRV:299,TNS_DATA_TYPE_KVA:300,TNS_DATA_TYPE_CLS:301,TNS_DATA_TYPE_CUI:302,TNS_DATA_TYPE_DFN:303,TNS_DATA_TYPE_DQR:304,TNS_DATA_TYPE_DSC:305,TNS_DATA_TYPE_EXE:306,TNS_DATA_TYPE_FCH:307,TNS_DATA_TYPE_GBV:308,TNS_DATA_TYPE_GEM:309,TNS_DATA_TYPE_GIV:310,TNS_DATA_TYPE_OKG:311,TNS_DATA_TYPE_HMI:312,TNS_DATA_TYPE_INO:313,TNS_DATA_TYPE_LNF:315,TNS_DATA_TYPE_ONT:316,TNS_DATA_TYPE_OPE:317,TNS_DATA_TYPE_OSQ:318,TNS_DATA_TYPE_SFE:319,TNS_DATA_TYPE_SPF:320,TNS_DATA_TYPE_VSN:321,TNS_DATA_TYPE_UD7:322,TNS_DATA_TYPE_DSA:323,TNS_DATA_TYPE_UIN:68,TNS_DATA_TYPE_PIN:327,TNS_DATA_TYPE_PFN:328,TNS_DATA_TYPE_PPT:329,TNS_DATA_TYPE_STO:331,TNS_DATA_TYPE_ARC:333,TNS_DATA_TYPE_MRS:334,TNS_DATA_TYPE_MRT:335,TNS_DATA_TYPE_MRG:336,TNS_DATA_TYPE_MRR:337,TNS_DATA_TYPE_MRC:338,TNS_DATA_TYPE_VER:339,TNS_DATA_TYPE_LON2:340,TNS_DATA_TYPE_INO2:341,TNS_DATA_TYPE_ALL:342,TNS_DATA_TYPE_UDB:343,TNS_DATA_TYPE_AQI:344,TNS_DATA_TYPE_ULB:345,TNS_DATA_TYPE_ULD:346,TNS_DATA_TYPE_SLS:91,TNS_DATA_TYPE_SID:348,TNS_DATA_TYPE_NA7:349,TNS_DATA_TYPE_LVC:94,TNS_DATA_TYPE_LVB:95,TNS_DATA_TYPE_CHAR:96,TNS_DATA_TYPE_AVC:97,TNS_DATA_TYPE_AL7:354,TNS_DATA_TYPE_K2RPC:355,TNS_DATA_TYPE_BINARY_FLOAT:100,TNS_DATA_TYPE_BINARY_DOUBLE:101,TNS_DATA_TYPE_CURSOR:102,TNS_DATA_TYPE_RDD:104,TNS_DATA_TYPE_XDP:359,TNS_DATA_TYPE_OSL:106,TNS_DATA_TYPE_OKO8:363,TNS_DATA_TYPE_EXT_NAMED:108,TNS_DATA_TYPE_INT_NAMED:109,TNS_DATA_TYPE_EXT_REF:110,TNS_DATA_TYPE_INT_REF:111,TNS_DATA_TYPE_CLOB:112,TNS_DATA_TYPE_BLOB:113,TNS_DATA_TYPE_BFILE:114,TNS_DATA_TYPE_CFILE:115,TNS_DATA_TYPE_RSET:116,TNS_DATA_TYPE_CWD:117,TNS_DATA_TYPE_JSON:119,TNS_DATA_TYPE_OAC122:120,TNS_DATA_TYPE_UD12:380,TNS_DATA_TYPE_AL8:381,TNS_DATA_TYPE_LFOP:382,TNS_DATA_TYPE_VECTOR:127,TNS_DATA_TYPE_FCRT:383,TNS_DATA_TYPE_DNY:384,TNS_DATA_TYPE_OPR:385,TNS_DATA_TYPE_PLS:386,TNS_DATA_TYPE_XID:387,TNS_DATA_TYPE_TXN:388,TNS_DATA_TYPE_DCB:389,TNS_DATA_TYPE_CCA:390,TNS_DATA_TYPE_WRN:391,TNS_DATA_TYPE_TLH:393,TNS_DATA_TYPE_TOH:394,TNS_DATA_TYPE_FOI:395,TNS_DATA_TYPE_SID2:396,TNS_DATA_TYPE_TCH:397,TNS_DATA_TYPE_PII:398,TNS_DATA_TYPE_PFI:399,TNS_DATA_TYPE_PPU:400,TNS_DATA_TYPE_PTE:401,TNS_DATA_TYPE_CLV:146,TNS_DATA_TYPE_RXH8:404,TNS_DATA_TYPE_N12:405,TNS_DATA_TYPE_AUTH:406,TNS_DATA_TYPE_KVAL:407,TNS_DATA_TYPE_DTR:152,TNS_DATA_TYPE_DUN:153,TNS_DATA_TYPE_DOP:154,TNS_DATA_TYPE_VST:155,TNS_DATA_TYPE_ODT:156,TNS_DATA_TYPE_FGI:413,TNS_DATA_TYPE_DSY:414,TNS_DATA_TYPE_DSYR8:415,TNS_DATA_TYPE_DSYH8:416,TNS_DATA_TYPE_DSYL:417,TNS_DATA_TYPE_DSYT8:418,TNS_DATA_TYPE_DSYV8:419,TNS_DATA_TYPE_DSYP:420,TNS_DATA_TYPE_DSYF:421,TNS_DATA_TYPE_DSYK:422,TNS_DATA_TYPE_DSYY:423,TNS_DATA_TYPE_DSYQ:424,TNS_DATA_TYPE_DSYC:425,TNS_DATA_TYPE_DSYA:426,TNS_DATA_TYPE_OT8:427,TNS_DATA_TYPE_DOL:172,TNS_DATA_TYPE_DSYTY:429,TNS_DATA_TYPE_AQE:430,TNS_DATA_TYPE_KV:431,TNS_DATA_TYPE_AQD:432,TNS_DATA_TYPE_AQ8:433,TNS_DATA_TYPE_TIME:178,TNS_DATA_TYPE_TIME_TZ:179,TNS_DATA_TYPE_TIMESTAMP:180,TNS_DATA_TYPE_TIMESTAMP_TZ:181,TNS_DATA_TYPE_INTERVAL_YM:182,TNS_DATA_TYPE_INTERVAL_DS:183,TNS_DATA_TYPE_EDATE:184,TNS_DATA_TYPE_ETIME:185,TNS_DATA_TYPE_ETTZ:186,TNS_DATA_TYPE_ESTAMP:187,TNS_DATA_TYPE_ESTZ:188,TNS_DATA_TYPE_EIYM:189,TNS_DATA_TYPE_EIDS:190,TNS_DATA_TYPE_RFS:449,TNS_DATA_TYPE_RXH10:450,TNS_DATA_TYPE_DCLOB:195,TNS_DATA_TYPE_DBLOB:196,TNS_DATA_TYPE_DBFILE:197,TNS_DATA_TYPE_DJSON:198,TNS_DATA_TYPE_KPN:454,TNS_DATA_TYPE_KPDNR:455,TNS_DATA_TYPE_DSYD:456,TNS_DATA_TYPE_DSYS:457,TNS_DATA_TYPE_DSYR:458,TNS_DATA_TYPE_DSYH:459,TNS_DATA_TYPE_DSYT:460,TNS_DATA_TYPE_DSYV:461,TNS_DATA_TYPE_AQM:462,TNS_DATA_TYPE_OER11:463,TNS_DATA_TYPE_UROWID:208,TNS_DATA_TYPE_AQL:466,TNS_DATA_TYPE_OTC:467,TNS_DATA_TYPE_KFNO:468,TNS_DATA_TYPE_KFNP:469,TNS_DATA_TYPE_KGT8:470,TNS_DATA_TYPE_RASB4:471,TNS_DATA_TYPE_RAUB2:472,TNS_DATA_TYPE_RAUB1:473,TNS_DATA_TYPE_RATXT:474,TNS_DATA_TYPE_RSSB4:475,TNS_DATA_TYPE_RSUB2:476,TNS_DATA_TYPE_RSUB1:477,TNS_DATA_TYPE_RSTXT:478,TNS_DATA_TYPE_RIDL:479,TNS_DATA_TYPE_GLRDD:480,TNS_DATA_TYPE_GLRDG:481,TNS_DATA_TYPE_GLRDC:482,TNS_DATA_TYPE_OKO:483,TNS_DATA_TYPE_DPP:484,TNS_DATA_TYPE_DPLS:485,TNS_DATA_TYPE_DPMOP:486,TNS_DATA_TYPE_TIMESTAMP_LTZ:231,TNS_DATA_TYPE_ESITZ:232,TNS_DATA_TYPE_UB8:233,TNS_DATA_TYPE_STAT:490,TNS_DATA_TYPE_RFX:491,TNS_DATA_TYPE_FAL:492,TNS_DATA_TYPE_CKV:493,TNS_DATA_TYPE_DRCX:494,TNS_DATA_TYPE_KGH:495,TNS_DATA_TYPE_AQO:496,TNS_DATA_TYPE_PNTY:241,TNS_DATA_TYPE_OKGT:498,TNS_DATA_TYPE_KPFC:499,TNS_DATA_TYPE_FE2:500,TNS_DATA_TYPE_SPFP:501,TNS_DATA_TYPE_DPULS:502,TNS_DATA_TYPE_BOOLEAN:252,TNS_DATA_TYPE_AQA:509,TNS_DATA_TYPE_KPBF:510,TNS_DATA_TYPE_TSM:513,TNS_DATA_TYPE_MSS:514,TNS_DATA_TYPE_KPC:516,TNS_DATA_TYPE_CRS:517,TNS_DATA_TYPE_KKS:518,TNS_DATA_TYPE_KSP:519,TNS_DATA_TYPE_KSPTOP:520,TNS_DATA_TYPE_KSPVAL:521,TNS_DATA_TYPE_PSS:522,TNS_DATA_TYPE_NLS:523,TNS_DATA_TYPE_ALS:524,TNS_DATA_TYPE_KSDEVTVAL:525,TNS_DATA_TYPE_KSDEVTTOP:526,TNS_DATA_TYPE_KPSPP:527,TNS_DATA_TYPE_KOL:528,TNS_DATA_TYPE_LST:529,TNS_DATA_TYPE_ACX:530,TNS_DATA_TYPE_SCS:531,TNS_DATA_TYPE_RXH:532,TNS_DATA_TYPE_KPDNS:533,TNS_DATA_TYPE_KPDCN:534,TNS_DATA_TYPE_KPNNS:535,TNS_DATA_TYPE_KPNCN:536,TNS_DATA_TYPE_KPS:537,TNS_DATA_TYPE_APINF:538,TNS_DATA_TYPE_TEN:539,TNS_DATA_TYPE_XSSCS:540,TNS_DATA_TYPE_XSSSO:541,TNS_DATA_TYPE_XSSAO:542,TNS_DATA_TYPE_KSRPC:543,TNS_DATA_TYPE_KVL:560,TNS_DATA_TYPE_SESSGET:563,TNS_DATA_TYPE_SESSREL:564,TNS_DATA_TYPE_XSSDEF:565,TNS_DATA_TYPE_PDQCINV:572,TNS_DATA_TYPE_PDQIDC:573,TNS_DATA_TYPE_KPDQCSTA:574,TNS_DATA_TYPE_KPRS:575,TNS_DATA_TYPE_KPDQIDC:576,TNS_DATA_TYPE_RTSTRM:578,TNS_DATA_TYPE_SESSRET:579,TNS_DATA_TYPE_SCN6:580,TNS_DATA_TYPE_KECPA:581,TNS_DATA_TYPE_KECPP:582,TNS_DATA_TYPE_SXA:583,TNS_DATA_TYPE_KVARR:584,TNS_DATA_TYPE_KPNGN:585,TNS_DATA_TYPE_XSNSOP:590,TNS_DATA_TYPE_XSATTR:591,TNS_DATA_TYPE_XSNS:592,TNS_DATA_TYPE_TXT:593,TNS_DATA_TYPE_XSSESSNS:594,TNS_DATA_TYPE_XSATTOP:595,TNS_DATA_TYPE_XSCREOP:596,TNS_DATA_TYPE_XSDETOP:597,TNS_DATA_TYPE_XSDESOP:598,TNS_DATA_TYPE_XSSETSP:599,TNS_DATA_TYPE_XSSIDP:600,TNS_DATA_TYPE_XSPRIN:601,TNS_DATA_TYPE_XSKVL:602,TNS_DATA_TYPE_XSSSDEF2:603,TNS_DATA_TYPE_XSNSOP2:604,TNS_DATA_TYPE_XSNS2:605,TNS_DATA_TYPE_IMPLRES:611,TNS_DATA_TYPE_OER19:612,TNS_DATA_TYPE_UB1ARRAY:613,TNS_DATA_TYPE_SESSSTATE:614,TNS_DATA_TYPE_AC_REPLAY:615,TNS_DATA_TYPE_AC_CONT:616,TNS_DATA_TYPE_KPDNREQ:622,TNS_DATA_TYPE_KPDNRNF:623,TNS_DATA_TYPE_KPNGNC:624,TNS_DATA_TYPE_KPNRI:625,TNS_DATA_TYPE_AQENQ:626,TNS_DATA_TYPE_AQDEQ:627,TNS_DATA_TYPE_AQJMS:628,TNS_DATA_TYPE_KPDNRPAY:629,TNS_DATA_TYPE_KPDNRACK:630,TNS_DATA_TYPE_KPDNRMP:631,TNS_DATA_TYPE_KPDNRDQ:632,TNS_DATA_TYPE_CHUNKINFO:636,TNS_DATA_TYPE_SCN:637,TNS_DATA_TYPE_SCN8:638,TNS_DATA_TYPE_UD21:639,TNS_DATA_TYPE_TNP:640,TNS_DATA_TYPE_OAC:646,TNS_DATA_TYPE_OER:652,TNS_DATA_TYPE_UDS:663,TNS_TYPE_REP_NATIVE:0,TNS_TYPE_REP_UNIVERSAL:1,TNS_TYPE_REP_ORACLE:10,TNS_MSG_TYPE_PROTOCOL:1,TNS_MSG_TYPE_DATA_TYPES:2,TNS_MSG_TYPE_FUNCTION:3,TNS_MSG_TYPE_ERROR:4,TNS_MSG_TYPE_ROW_HEADER:6,TNS_MSG_TYPE_ROW_DATA:7,TNS_MSG_TYPE_PARAMETER:8,TNS_MSG_TYPE_STATUS:9,TNS_MSG_TYPE_IO_VECTOR:11,TNS_MSG_TYPE_LOB_DATA:14,TNS_MSG_TYPE_WARNING:15,TNS_MSG_TYPE_DESCRIBE_INFO:16,TNS_MSG_TYPE_PIGGYBACK:17,TNS_MSG_TYPE_FLUSH_OUT_BINDS:19,TNS_MSG_TYPE_BIT_VECTOR:21,TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK:23,TNS_MSG_TYPE_ONEWAY_FN:26,TNS_MSG_TYPE_IMPLICIT_RESULTSET:27,TNS_MSG_TYPE_RENEGOTIATE:28,TNS_MSG_TYPE_END_OF_REQUEST:29,TNS_MSG_TYPE_FAST_AUTH:34,TNS_KEYWORD_NUM_CURRENT_SCHEMA:168,TNS_KEYWORD_NUM_EDITION:172,TNS_BIND_USE_INDICATORS:1,TNS_BIND_USE_LENGTH:2,TNS_BIND_ARRAY:64,TNS_BIND_DIR_OUTPUT:16,TNS_BIND_DIR_INPUT:32,TNS_BIND_DIR_INPUT_OUTPUT:48,TNS_EXEC_OPTION_PARSE:1,TNS_EXEC_OPTION_BIND:8,TNS_EXEC_OPTION_DEFINE:16,TNS_EXEC_OPTION_EXECUTE:32,TNS_EXEC_OPTION_FETCH:64,TNS_EXEC_OPTION_COMMIT:256,TNS_EXEC_OPTION_COMMIT_REEXECUTE:1,TNS_EXEC_OPTION_PLSQL_BIND:1024,TNS_EXEC_OPTION_DML_ROWCOUNTS:16384,TNS_EXEC_OPTION_NOT_PLSQL:32768,TNS_EXEC_OPTION_IMPLICIT_RESULTSET:32768,TNS_EXEC_OPTION_DESCRIBE:131072,TNS_EXEC_OPTION_NO_COMPRESSED_FETCH:262144,TNS_EXEC_OPTION_BATCH_ERRORS:524288,TNS_EXEC_OPTION_NO_IMPL_REL:2097152,TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION:1,TNS_SERVER_PIGGYBACK_OS_PID_MTS:2,TNS_SERVER_PIGGYBACK_TRACE_EVENT:3,TNS_SERVER_PIGGYBACK_SESS_RET:4,TNS_SERVER_PIGGYBACK_SYNC:5,TNS_SERVER_PIGGYBACK_LTXID:7,TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT:8,TNS_SERVER_PIGGYBACK_EXT_SYNC:9,TNS_SESSGET_SESSION_CHANGED:4,TNS_LOB_OP_GET_LENGTH:1,TNS_LOB_OP_READ:2,TNS_LOB_OP_TRIM:32,TNS_LOB_OP_WRITE:64,TNS_LOB_OP_GET_CHUNK_SIZE:16384,TNS_LOB_OP_CREATE_TEMP:272,TNS_LOB_OP_FREE_TEMP:273,TNS_LOB_OP_OPEN:32768,TNS_LOB_OP_CLOSE:65536,TNS_LOB_OP_IS_OPEN:69632,TNS_LOB_OP_ARRAY:524288,TNS_LOB_OP_FILE_OPEN:256,TNS_LOB_OP_FILE_CLOSE:512,TNS_LOB_OP_FILE_ISOPEN:1024,TNS_LOB_OP_FILE_EXISTS:2048,TNS_LOB_LOC_OFFSET_FLAG_1:4,TNS_LOB_LOC_OFFSET_FLAG_3:6,TNS_LOB_LOC_OFFSET_FLAG_4:7,TNS_LOB_QLOCATOR_VERSION:4,TNS_LOB_LOC_FIXED_OFFSET:16,TNS_LOB_LOC_FLAGS_BLOB:1,TNS_LOB_LOC_FLAGS_VALUE_BASED:32,TNS_LOB_LOC_FLAGS_ABSTRACT:64,TNS_LOB_LOC_FLAGS_INIT:8,TNS_LOB_LOC_FLAGS_TEMP:1,TNS_LOB_LOC_FLAGS_VAR_LENGTH_CHARSET:128,TNS_LOB_OPEN_READ_WRITE:2,TNS_LOB_OPEN_READ_ONLY:11,TNS_LOB_PREFETCH_FLAG:33554432,TNS_JSON_MAX_LENGTH:32*1024*1024,TNS_END_TO_END_ACTION:16,TNS_END_TO_END_CLIENT_IDENTIFIER:1,TNS_END_TO_END_CLIENT_INFO:256,TNS_END_TO_END_DBOP:512,TNS_END_TO_END_MODULE:8,TNS_VERSION_MIN_ACCEPTED:315,TNS_VERSION_MIN_LARGE_SDU:315,TNS_FUNC_AUTH_PHASE_ONE:118,TNS_FUNC_AUTH_PHASE_TWO:115,TNS_FUNC_CLOSE_CURSORS:105,TNS_FUNC_COMMIT:14,TNS_FUNC_EXECUTE:94,TNS_FUNC_FETCH:5,TNS_FUNC_LOB_OP:96,TNS_FUNC_LOGOFF:9,TNS_FUNC_PING:147,TNS_FUNC_ROLLBACK:15,TNS_FUNC_SET_END_TO_END_ATTR:135,TNS_FUNC_REEXECUTE:4,TNS_FUNC_REEXECUTE_AND_FETCH:78,TNS_FUNC_SET_SCHEMA:152,TNS_FUNC_SESSION_GET:162,TNS_FUNC_SESSION_RELEASE:163,TNS_FUNC_SESSION_STATE:176,TNS_FUNC_CANCEL_ALL:120,TNS_FUNC_TPC_TXN_SWITCH:103,TNS_FUNC_TPC_TXN_CHANGE_STATE:104,TNS_CHARSET_UTF8:873,TNS_CHARSET_UTF16:2e3,TNS_ENCODING_UTF8:"UTF-8",TNS_ENCODING_UTF16:"UTF-16LE",TNS_ENCODING_MULTI_BYTE:1,TNS_ENCODING_CONV_LENGTH:2,TNS_CCAP_SQL_VERSION:0,TNS_CCAP_LOGON_TYPES:4,TNS_CCAP_CTB_FEATURE_BACKPORT:5,TNS_CCAP_FIELD_VERSION:7,TNS_CCAP_SERVER_DEFINE_CONV:8,TNS_CCAP_TTC1:15,TNS_CCAP_OCI1:16,TNS_CCAP_TDS_VERSION:17,TNS_CCAP_RPC_VERSION:18,TNS_CCAP_RPC_SIG:19,TNS_CCAP_DBF_VERSION:21,TNS_CCAP_LOB:23,TNS_CCAP_TTC2:26,TNS_CCAP_UB2_DTY:27,TNS_CCAP_OCI2:31,TNS_CCAP_CLIENT_FN:34,TNS_CCAP_TTC3:37,TNS_CCAP_TTC4:40,TNS_CCAP_LOB2:42,TNS_CCAP_TTC5:44,TNS_CCAP_VECTOR_FEATURES:52,TNS_CCAP_MAX:53,TNS_CCAP_SQL_VERSION_MAX:6,TNS_CCAP_FIELD_VERSION_11_2:6,TNS_CCAP_FIELD_VERSION_12_1:7,TNS_CCAP_FIELD_VERSION_12_2:8,TNS_CCAP_FIELD_VERSION_12_2_EXT1:9,TNS_CCAP_FIELD_VERSION_18_1:10,TNS_CCAP_FIELD_VERSION_18_1_EXT_1:11,TNS_CCAP_FIELD_VERSION_19_1:12,TNS_CCAP_FIELD_VERSION_19_1_EXT_1:13,TNS_CCAP_FIELD_VERSION_20_1:14,TNS_CCAP_FIELD_VERSION_20_1_EXT_1:15,TNS_CCAP_FIELD_VERSION_21_1:16,TNS_CCAP_FIELD_VERSION_23_1:17,TNS_CCAP_FIELD_VERSION_23_1_EXT_1:18,TNS_CCAP_FIELD_VERSION_23_1_EXT_2:19,TNS_CCAP_FIELD_VERSION_23_1_EXT_3:20,TNS_CCAP_FIELD_VERSION_23_1_EXT_4:21,TNS_CCAP_FIELD_VERSION_23_1_EXT_5:22,TNS_CCAP_FIELD_VERSION_23_1_EXT_6:23,TNS_CCAP_FIELD_VERSION_23_4:24,TNS_CCAP_FIELD_VERSION_MAX:24,TNS_CCAP_O5LOGON:8,TNS_CCAP_O5LOGON_NP:2,TNS_CCAP_O7LOGON:32,TNS_CCAP_O8LOGON_LONG_IDENTIFIER:64,TNS_CCAP_O9LOGON_LONG_PASSWORD:128,TNS_CCAP_END_OF_CALL_STATUS:1,TNS_CCAP_IND_RCD:8,TNS_CCAP_FAST_BVEC:32,TNS_CCAP_FAST_SESSION_PROPAGATE:16,TNS_CCAP_APP_CTX_PIGGYBACK:128,TNS_CCAP_TDS_VERSION_MAX:3,TNS_CCAP_RPC_VERSION_MAX:7,TNS_CCAP_RPC_SIG_VALUE:3,TNS_CCAP_DBF_VERSION_MAX:1,TNS_CCAP_IMPLICIT_RESULTS:16,TNS_CCAP_BIG_CHUNK_CLR:32,TNS_CCAP_KEEP_OUT_ORDER:128,TNS_CCAP_LOB_UB8_SIZE:1,TNS_CCAP_LOB_ENCS:2,TNS_CCAP_LOB_PREFETCH_DATA:4,TNS_CCAP_LOB_TEMP_SIZE:8,TNS_CCAP_LOB_PREFETCH:64,TNS_CCAP_LOB_12C:128,TNS_CCAP_DRCP:16,TNS_CCAP_ZLNP:4,TNS_CCAP_INBAND_NOTIFICATION:4,TNS_CCAP_END_OF_REQUEST:32,TNS_CCAP_CLIENT_FN_MAX:12,TNS_CCAP_LOB2_QUASI:1,TNS_CCAP_LOB2_2GB_PREFETCH:4,TNS_CCAP_CTB_IMPLICIT_POOL:8,TNS_CCAP_VECTOR_SUPPORT:8,TNS_CCAP_VECTOR_FEATURE_BINARY:1,TNS_RCAP_COMPAT:0,TNS_RCAP_TTC:6,TNS_RCAP_MAX:7,TNS_RCAP_COMPAT_81:2,TNS_RCAP_TTC_ZERO_COPY:1,TNS_RCAP_TTC_32K:4,TNS_VERIFIER_TYPE_11G_1:45394,TNS_VERIFIER_TYPE_11G_2:6949,TNS_VERIFIER_TYPE_12C:18453,TNS_UDS_FLAGS_IS_JSON:256,TNS_UDS_FLAGS_IS_OSON:2048,TNS_EOCS_FLAGS_TXN_IN_PROGRESS:2,TNS_EOCS_FLAGS_SESS_RELEASE:32768,TNS_TPC_TXN_START:1,TNS_TPC_TXN_DETACH:2,TNS_TPC_TXN_COMMIT:1,TNS_TPC_TXN_ABORT:2,TNS_TPC_TXN_PREPARE:3,TNS_TPC_TXN_FORGET:4,TNS_TPC_TXN_STATE_PREPARE:0,TNS_TPC_TXN_STATE_REQUIRES_COMMIT:1,TNS_TPC_TXN_STATE_COMMITTED:2,TNS_TPC_TXN_STATE_ABORTED:3,TNS_TPC_TXN_STATE_READ_ONLY:4,TNS_TPC_TXN_STATE_FORGOTTEN:5,TNS_ESCAPE_CHAR:253,TNS_LONG_LENGTH_INDICATOR:TN.TNS_LONG_LENGTH_INDICATOR,TNS_NULL_LENGTH_INDICATOR:TN.TNS_NULL_LENGTH_INDICATOR,TNS_MAX_ROWID_LENGTH:18,TNS_DURATION_SESSION:10,TNS_MAX_LONG_LENGTH:2147483647,TNS_SDU:8192,TNS_TDU:65535,TNS_MAX_CONNECT_DATA:230,TNS_MAX_UROWID_LENGTH:3950,TNS_SERVER_CONVERTS_CHARS:1,DRCP_DEAUTHENTICATE:2,TNS_OBJ_IS_VERSION_81:128,TNS_OBJ_IS_DEGENERATE:16,TNS_OBJ_IS_COLLECTION:8,TNS_OBJ_NO_PREFIX_SEG:4,TNS_OBJ_IMAGE_VERSION:1,TNS_OBJ_MAX_SHORT_LENGTH:245,TNS_OBJ_ATOMIC_NULL:253,TNS_OBJ_NON_NULL_OID:2,TNS_OBJ_HAS_EXTENT_OID:8,TNS_OBJ_TOP_LEVEL:1,TNS_OBJ_HAS_INDEXES:16,TNS_OBJ_PLSQL_INDEX_TABLE:1,TNS_OBJ_NESTED_TABLE:2,TNS_OBJ_VARRAY:3,TNS_OBJ_TDS_TYPE_CHAR:1,TNS_OBJ_TDS_TYPE_DATE:2,TNS_OBJ_TDS_TYPE_FLOAT:5,TNS_OBJ_TDS_TYPE_NUMBER:6,TNS_OBJ_TDS_TYPE_VARCHAR:7,TNS_OBJ_TDS_TYPE_BOOLEAN:8,TNS_OBJ_TDS_TYPE_RAW:19,TNS_OBJ_TDS_TYPE_TIMESTAMP:21,TNS_OBJ_TDS_TYPE_TIMESTAMP_TZ:23,TNS_OBJ_TDS_TYPE_OBJ:27,TNS_OBJ_TDS_TYPE_COLL:28,TNS_OBJ_TDS_TYPE_CLOB:29,TNS_OBJ_TDS_TYPE_BLOB:30,TNS_OBJ_TDS_TYPE_TIMESTAMP_LTZ:33,TNS_OBJ_TDS_TYPE_BINARY_FLOAT:37,TNS_OBJ_TDS_TYPE_START_EMBED_ADT:39,TNS_OBJ_TDS_TYPE_END_EMBED_ADT:40,TNS_OBJ_TDS_TYPE_SUBTYPE_MARKER:43,TNS_OBJ_TDS_TYPE_EMBED_ADT_INFO:44,TNS_OBJ_TDS_TYPE_BINARY_DOUBLE:45,TNS_XML_TYPE_LOB:1,TNS_XML_TYPE_STRING:4,TNS_XML_TYPE_FLAG_SKIP_NEXT_4:1048576,TNS_ERR_INCONSISTENT_DATA_TYPES:932,TNS_ERR_VAR_NOT_IN_SELECT_LIST:1007,TNS_ERR_INBAND_MESSAGE:12573,TNS_ERR_INVALID_SERVICE_NAME:12514,TNS_ERR_INVALID_SID:12505,TNS_ERR_NO_DATA_FOUND:1403,TNS_ERR_SESSION_SHUTDOWN:12572,TNS_WARN_COMPILATION_CREATE:32,TNS_VECTOR_MAX_LENGTH:1048576,VECTOR_FORMAT_FLEX:0,VECTOR_META_FLAG_FLEXIBLE_DIM:1,PACKET_HEADER_SIZE:8,NUMBER_AS_TEXT_CHARS:172,CHUNKED_BYTES_CHUNK_SIZE:65536,TNS_DATA_FLAGS_END_OF_REQUEST:8192,TNS_BASE64_ALPHABET_ARRAY:aN.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),TNS_EXTENT_OID:aN.from("00000000000000000000000000010001","hex")}});var Qs=I((EC,lN)=>{"use strict";var{Buffer:To}=require("buffer"),EN=Ee(),kd=require("crypto"),co=class co extends Error{};T(co,"OutOfPacketsError");var ao=co;function ti(i,e,t,s){for(let r=0;r<t;r++)i[s+t-r-1]=EN.TNS_BASE64_ALPHABET_ARRAY[e&63],e=e>>6;return s+t}T(ti,"_convertBase64");function bd(i){let e=0;if(i.rba!==0||i.partitionID!==0||i.blockNum!==0||i.slotNum!=0){let t=To.allocUnsafe(EN.TNS_MAX_ROWID_LENGTH);return e=ti(t,i.rba,6,e),e=ti(t,i.partitionID,3,e),e=ti(t,i.blockNum,6,e),ti(t,i.slotNum,3,e),t.toString("utf8")}}T(bd,"encodeRowID");function Gd(i){let e=To.from(i),t=kd.randomBytes(e.length);for(let s=0;s<e.length;s++)e[s]=t[s]^e[s];return{obfuscatedValue:t,value:e}}T(Gd,"setObfuscatedValue");function Hd(i,e){let t=To.from(i);for(let r=0;r<i.length;r++)t[r]=i[r]^e[r];let s=t.toString();return t.fill(0),s}T(Hd,"getDeobfuscatedValue");lN.exports={encodeRowID:bd,getDeobfuscatedValue:Hd,OutOfPacketsError:ao,setObfuscatedValue:Gd}});var je=I((hC,hN)=>{"use strict";var{Buffer:Eo}=require("buffer"),b=Ee(),yt=U(),ho=class ho{constructor(e){this.errorInfo={},this.connection=e,this.messageType=b.TNS_MSG_TYPE_FUNCTION,this.functionCode=0,this.callStatus=0,this.flushOutBinds=!1,this.endOfResponse=!1,this.endToEndSeqNum=0,this.errorOccurred=!1,this.warning=void 0}preProcess(){}async postProcess(){}writeFunctionHeader(e){e.writeUInt8(this.messageType),e.writeUInt8(this.functionCode),e.writeSeqNum(),e.caps.ttcFieldVersion>=b.TNS_CCAP_FIELD_VERSION_23_1_EXT_1&&e.writeUB8(0)}processErrorInfo(e){this.callStatus=e.readUB4(),e.skipUB2(),e.skipUB4(),e.skipUB2(),e.skipUB2(),e.skipUB2(),this.errorInfo.cursorId=e.readUB2();let t=e.readSB2();e.skipUB1(),e.skipUB1(),e.skipUB1(),e.skipUB1(),e.skipUB1(),e.readUInt8()&b.TNS_WARN_COMPILATION_CREATE&&(this.warning=yt.getErr(yt.WRN_COMPILATION_CREATE)),this.errorInfo.rowID=e.readRowID(),e.skipUB4(),e.skipUB1(),e.skipUB1(),e.skipUB2(),e.skipUB4(),e.readUB4()>0&&e.skipBytesChunked();let n=e.readUB2();if(n>0){this.errorInfo.batchErrors=[];let c=e.readUInt8();for(let E=0;E<n;E++){c===b.TNS_LONG_LENGTH_INDICATOR&&e.skipUB4();let l=e.readUB2();this.errorInfo.batchErrors.push(new Error(l))}c===b.TNS_LONG_LENGTH_INDICATOR&&e.skipBytes(1)}let o=e.readUB4();if(o>0){o>65535&&yt.throwErr(yt.ERR_TOO_MANY_BATCH_ERRORS);let c=e.readUInt8(),E;for(let l=0;l<o;l++)c===b.TNS_LONG_LENGTH_INDICATOR&&e.skipUB4(),E=e.readUB4(),l<n&&(this.errorInfo.batchErrors[l].offset=E);c===b.TNS_LONG_LENGTH_INDICATOR&&e.skipBytes(1)}let a=e.readUB2();if(a>0){e.skipBytes(1);for(let c=0;c<a;c++)e.skipUB2(),this.errorInfo.batchErrors[c].message=e.readStr(b.CSFRM_IMPLICIT),e.skipBytes(2)}this.errorInfo.num=e.readUB4(),this.errorInfo.rowCount=e.readUB8(),e.caps.ttcFieldVersion>=b.TNS_CCAP_FIELD_VERSION_20_1&&(e.skipUB4(),e.skipUB4()),this.errorInfo.num!==0&&(this.errorOccurred=!0,t>=0&&(this.errorInfo.pos=t),this.errorInfo.message=e.readStr(b.CSFRM_IMPLICIT),this.errorInfo.message=this.errorInfo.message.trim()),this.endOfResponse=!this.connection.nscon.endOfRequestSupport}processReturnParameter(){}processWarningInfo(e){let t=e.readUB2(),s=e.readUB2();if(e.skipUB2(),t!=0&&s>0){let r=e.readStr(b.CSFRM_IMPLICIT).trim();this.warning=new Error(r),this.warning.errorNum=t}}decode(e){this.process(e)}process(e){this.endOfResponse=!1,this.flushOutBinds=!1;do{this.savePoint(e);let t=e.readUInt8();this.processMessage(e,t)}while(!this.endOfResponse)}savePoint(e){e.savePoint()}processMessage(e,t){t===b.TNS_MSG_TYPE_ERROR?this.processErrorInfo(e):t===b.TNS_MSG_TYPE_WARNING?this.processWarningInfo(e):t===b.TNS_MSG_TYPE_STATUS?(this.callStatus=e.readUB4(),this.endToEndSeqNum=e.readUB2(),this.endOfResponse=!this.connection.nscon.endOfRequestSupport):t===b.TNS_MSG_TYPE_PARAMETER?this.processReturnParameter(e):t===b.TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK?this.processServerSidePiggyBack(e):t===b.TNS_MSG_TYPE_END_OF_REQUEST?this.endOfResponse=!0:yt.throwErr(yt.ERR_UNEXPECTED_MESSAGE_TYPE,t,e.pos,e.packetNum)}processServerSidePiggyBack(e){let t=e.readUInt8();if(t===b.TNS_SERVER_PIGGYBACK_LTXID)e.readUB4()>0&&e.skipBytesChunked();else if(!(t===b.TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION||t===b.TNS_SERVER_PIGGYBACK_TRACE_EVENT))if(t===b.TNS_SERVER_PIGGYBACK_OS_PID_MTS){let s=e.readUB2();e.skipUB1(),e.skipBytes(s)}else if(t===b.TNS_SERVER_PIGGYBACK_SYNC){e.skipUB2(),e.skipUB1();let s=e.readUB4();e.skipBytes(1);for(let r=0;r<s;r++){let n=e.readUB2();n>0&&e.skipBytesChunked(),n=e.readUB2(),n>0&&e.skipBytesChunked(),e.skipUB2()}e.skipUB4()}else if(t===b.TNS_SERVER_PIGGYBACK_EXT_SYNC)e.skipUB2(),e.skipUB1();else if(t===b.TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT)e.skipUB2(),e.skipUB1(),e.skipUB4(),e.skipUB4(),e.skipUB1(),e.readUB4()>0&&e.skipBytesChunked();else if(t===b.TNS_SERVER_PIGGYBACK_SESS_RET){e.skipUB2(),e.skipUB1();let s=e.readUB2();if(s>0){e.skipUB1();for(let n=0;n<s;++n){let o=e.readUB2();o>0&&e.skipBytesChunked(),o=e.readUB2(),o>0&&e.skipBytesChunked(),e.skipUB2()}}e.readUB4()&b.TNS_SESSGET_SESSION_CHANGED&&this.connection._drcpEstablishSession&&this.connection.statementCache.clearCursors(),this.connection._drcpEstablishSession=!1,e.skipUB4(),e.skipUB2()}else yt.throwErr(yt.ERR_UNKOWN_SERVER_SIDE_PIGGYBACK,t)}writePiggybacks(e){this.connection._currentSchemaModified&&this._writeCurrentSchemaPiggyback(e),this.connection.statementCache._cursorsToClose.size>0&&!this.connection._drcpEstablishSession&&this.writeCloseCursorsPiggyBack(e),(this.connection._actionModified||this.connection._clientIdentifierModified||this.connection._dbopModified||this.connection._clientInfoModified||this.connection._moduleModified)&&this._writeEndToEndPiggybacks(e),this.connection._tempLobsTotalSize>0&&this.writeCloseTempLobsPiggyback(e)}writePiggybackHeader(e,t){e.writeUInt8(b.TNS_MSG_TYPE_PIGGYBACK),e.writeUInt8(t),e.writeSeqNum(),e.caps.ttcFieldVersion>=b.TNS_CCAP_FIELD_VERSION_23_1_EXT_1&&e.writeUB8(0)}writeCloseCursorsPiggyBack(e){this.writePiggybackHeader(e,b.TNS_FUNC_CLOSE_CURSORS),e.writeUInt8(1),this.connection.statementCache.writeCursorsToClose(e)}writeCloseTempLobsPiggyback(e){let t=this.connection._tempLobsToClose,s=b.TNS_LOB_OP_FREE_TEMP|b.TNS_LOB_OP_ARRAY;this.writePiggybackHeader(e,b.TNS_FUNC_LOB_OP),e.writeUInt8(1),e.writeUB4(this.connection._tempLobsTotalSize),e.writeUInt8(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(s),e.writeUInt8(0),e.writeUB4(0),e.writeUB8(0),e.writeUB8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);for(let r of t)e.writeBytes(r);this.connection._tempLobsToClose=[],this.connection._tempLobsTotalSize=0}_writeCurrentSchemaPiggyback(e){this.writePiggybackHeader(e,b.TNS_FUNC_SET_SCHEMA),e.writeUInt8(1);let t=Eo.byteLength(this.connection.currentSchema);e.writeUB4(t),e.writeBytesWithLength(Eo.from(this.connection.currentSchema))}_writeEndToEndPiggybacks(e){let t=0;this.connection._actionModified&&(t|=b.TNS_END_TO_END_ACTION),this.connection._clientIdentifierModified&&(t|=b.TNS_END_TO_END_CLIENT_IDENTIFIER),this.connection._clientInfoModified&&(t|=b.TNS_END_TO_END_CLIENT_INFO),this.connection._moduleModified&&(t|=b.TNS_END_TO_END_MODULE),this.connection._dbOpModified&&(t|=b.TNS_END_TO_END_DBOP),this.writePiggybackHeader(e,b.TNS_FUNC_SET_END_TO_END_ATTR),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(t);let s=this.writeEndEndTraceValue(e,this.connection._clientIdentifier,this.connection._clientIdentifierModified),r=this.writeEndEndTraceValue(e,this.connection._module,this.connection._moduleModified),n=this.writeEndEndTraceValue(e,this.connection._action,this.connection._actionModified);e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);let o=this.writeEndEndTraceValue(e,this.connection._clientInfo,this.connection._clientInfoModified);e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);let a=this.writeEndEndTraceValue(e,this.connection._dbOp,this.connection._dbOpModified);this.connection._clientIdentifierModified&&this.connection._clientIdentifier&&e.writeBytesWithLength(s),this.connection._moduleModified&&this.connection._module&&e.writeBytesWithLength(r),this.connection._actionModified&&this.connection._action&&e.writeBytesWithLength(n),this.connection._clientInfoModified&&this.connection._clientInfo&&e.writeBytesWithLength(o),this.connection._dbOpModified&&this.connection._dbOp&&e.writeBytesWithLength(a),this.connection._actionModified=!1,this.connection._action="",this.connection._clientIdentifierModified=!1,this.connection._clientIdentifier="",this.connection._clientInfoModified=!1,this.connection._clientInfo="",this.connection._dbOpModified=!1,this.connection._dbOp="",this.connection._moduleModified=!1,this.connection._module=""}writeEndEndTraceValue(e,t,s){let r;return s?(e.writeUInt8(1),t?(r=Eo.from(t),e.writeUB4(r.length)):e.writeUB4(0)):(e.writeUInt8(0),e.writeUB4(0)),r}saveDeferredErr(){this.deferredErr||(this.deferredErr=yt.getErr(...arguments))}};T(ho,"Message");var lo=ho;hN.exports=lo});var uo=I((SC,NN)=>{"use strict";var{Buffer:Js}=require("buffer"),Re=Ee(),qd=je(),So=class So extends qd{constructor(e,t){super(e),this.sourceLobImpl=t.sourceLobImpl||null,this.operation=t.operation,this.destLobImpl=t.destLobImpl||null,this.sourceOffset=t.sourceOffset||0,this.destOffset=t.destOffset||0,this.boolFlag=!1,t.data&&(this.data=t.data),this.functionCode=Re.TNS_FUNC_LOB_OP,this.sendAmount=t.sendAmount,this.amount=t.amount||0}encode(e){this.writeFunctionHeader(e),this.sourceLobImpl===null?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(this.sourceLobImpl._locator.length)),this.destLobImpl===null?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(this.destLobImpl._locator.length)),e.writeUB4(0),e.writeUB4(0),this.operation===Re.TNS_LOB_OP_CREATE_TEMP?e.writeUInt8(1):e.writeUInt8(0),e.writeUInt8(0),[Re.TNS_LOB_OP_CREATE_TEMP,Re.TNS_LOB_OP_IS_OPEN,Re.TNS_LOB_OP_FILE_EXISTS,Re.TNS_LOB_OP_FILE_ISOPEN].includes(this.operation)?e.writeUInt8(1):e.writeUInt8(0),e.writeUB4(this.operation),e.writeUInt8(0),e.writeUInt8(0),e.writeUB8(this.sourceOffset),e.writeUB8(this.destOffset),this.sendAmount?e.writeUInt8(1):e.writeUInt8(0);for(let s=0;s<3;s++)e.writeUInt16BE(0);if(this.sourceLobImpl&&e.writeBytes(this.sourceLobImpl._locator),this.destLobImpl&&e.writeBytes(this.destLobImpl._locator),this.operation===Re.TNS_LOB_OP_CREATE_TEMP&&(this.sourceLobImpl.dbType._csfrm===Re.CSFRM_NCHAR?(e.caps.checkNCharsetId(),e.writeUB4(Re.TNS_CHARSET_UTF16)):e.writeUB4(Re.TNS_CHARSET_UTF8)),this.data){let s;e.writeUInt8(Re.TNS_MSG_TYPE_LOB_DATA),this.sourceLobImpl.dbType._oraTypeNum===Re.TNS_DATA_TYPE_BLOB?s=this.data:this.sourceLobImpl.getCsfrm()===Re.CSFRM_NCHAR?(s=this.data,Js.isBuffer(this.data)&&(s=s.toString()),s=Js.from(s,Re.TNS_ENCODING_UTF16).swap16()):s=Js.from(this.data),e.writeBytesWithLength(s)}this.sendAmount&&e.writeUB8(this.amount)}processMessage(e,t){if(t===Re.TNS_MSG_TYPE_LOB_DATA){let s=this.sourceLobImpl.dbType._oraTypeNum,r=e.readBytesWithLength();r!==null&&(s===Re.TNS_DATA_TYPE_BLOB||s===Re.TNS_DATA_TYPE_BFILE?r=Js.from(r):this.sourceLobImpl.getCsfrm()===Re.CSFRM_NCHAR?r=Js.from(r).swap16().toString("utf16le"):r=r.toString()),this.data=r}else super.processMessage(e,t)}processReturnParameter(e){let t,s,r,n;this.sourceLobImpl!==null&&(n=this.sourceLobImpl._locator.length,t=e.readBytes(n),s=t.slice(0,n),s.copy(this.sourceLobImpl._locator)),this.destLobImpl!==null&&(n=this.destLobImpl._locator.length,t=e.readBytes(n),s=t.slice(0,n),s.copy(this.destLobImpl._locator)),this.operation===Re.TNS_LOB_OP_CREATE_TEMP?(e.skipUB2(),e.skipBytes(3)):this.sendAmount&&(this.amount=e.readSB8()),(this.operation===Re.TNS_LOB_OP_IS_OPEN||this.operation===Re.TNS_LOB_OP_FILE_EXISTS||this.operation===Re.TNS_LOB_OP_FILE_ISOPEN)&&(r=e.readUInt8(),this.boolFlag=r>0)}};T(So,"LobOpMessage");var No=So;NN.exports=No});var js=I((AC,uN)=>{"use strict";var{Buffer:si}=require("buffer"),vd=qn(),j=Ee(),Kd=uo(),SN=U(),Wd=Fe(),fo=class fo extends vd{_getConnImpl(){return this.conn}async _sendMessage(e){let t=new Kd(this.conn,e);return await this.conn._protocol._processMessage(t),e.operation===j.TNS_LOB_OP_READ?t.data?t.data:null:e.operation===j.TNS_LOB_OP_FILE_EXISTS||e.operation===j.TNS_LOB_OP_FILE_ISOPEN?t.boolFlag:t.amount}getChunkSize(){return this._chunkSize}async _getChunkSizeAsync(){this.checkConn();let e={operation:j.TNS_LOB_OP_GET_CHUNK_SIZE,sourceLobImpl:this,sendAmount:!0};this._chunkSize=this._pieceSize=await this._sendMessage(e)}getLength(){return this._length}getPieceSize(){return this._pieceSize}setPieceSize(e){this._pieceSize=e}getType(){return this.dbType}async getData(e=1,t=this._length){let s=!1;t||(t=this._length),this.dbType===Wd.DB_TYPE_BFILE&&(await this.isFileOpen()||(s=!0,await this.openFile()));let r;try{r=await this.read(e,t)}finally{s&&await this.closeFile()}return r}async read(e,t){this.checkConn();let s={operation:j.TNS_LOB_OP_READ,sourceLobImpl:this,sourceOffset:e,sendAmount:!0,amount:t||this._pieceSize};return await this._sendMessage(s)}async write(e,t){this.checkConn();let s={operation:j.TNS_LOB_OP_WRITE,sourceLobImpl:this,sourceOffset:e,data:t};await this._sendMessage(s),this._length+=t.length}getCsfrm(){return this.dbType._csfrm!==j.CSFRM_NCHAR&&this._locator[j.TNS_LOB_LOC_OFFSET_FLAG_3]&j.TNS_LOB_LOC_FLAGS_VAR_LENGTH_CHARSET?j.CSFRM_NCHAR:this.dbType._csfrm}async create(e,t){this.dirtyLength=!1,this.conn=e,this.dbType=t,this._locator=si.alloc(40),this._isTempLob=!0,this._length=0;let s={operation:j.TNS_LOB_OP_CREATE_TEMP,sourceLobImpl:this,amount:j.TNS_DURATION_SESSION,destOffset:t._oraTypeNum,sourceOffset:t._csfrm,sendAmount:!0};await this._sendMessage(s),await this._getChunkSizeAsync()}async fileExists(){this.checkConn();let e={operation:j.TNS_LOB_OP_FILE_EXISTS,sourceLobImpl:this};return await this._sendMessage(e)}getDirFileName(){let e=j.TNS_LOB_LOC_FIXED_OFFSET+2,t=this._locator.readUInt16BE(j.TNS_LOB_LOC_FIXED_OFFSET),s=j.TNS_LOB_LOC_FIXED_OFFSET+t+4,r=this._locator.readUInt16BE(e+t),n=this._locator.slice(e,e+t).toString(),o=this._locator.slice(s,s+r).toString();return{dirName:n,fileName:o}}checkConn(){this.conn.nscon.connected||SN.throwErr(SN.ERR_INVALID_CONNECTION)}close(){this.checkConn(),this._isTempLob&&(this.conn._tempLobsToClose.push(this._locator),this.conn._tempLobsTotalSize+=this._locator.length)}async closeFile(){this.checkConn();let e={operation:j.TNS_LOB_OP_FILE_CLOSE,sourceLobImpl:this};await this._sendMessage(e)}init(e,t,s,r,n){this.dirtyLength=!1,this.conn=e,this._locator=t,this._isTempLob=!1,(this._locator[j.TNS_LOB_LOC_OFFSET_FLAG_4]&j.TNS_LOB_LOC_FLAGS_TEMP===j.TNS_LOB_LOC_FLAGS_TEMP||this._locator[j.TNS_LOB_LOC_OFFSET_FLAG_1]&j.TNS_LOB_LOC_FLAGS_ABSTRACT===j.TNS_LOB_LOC_FLAGS_ABSTRACT)&&(this._isTempLob=!0),this.dbType=s,this._length=r,this._chunkSize=n,this._pieceSize=n}async isFileOpen(){let e={operation:j.TNS_LOB_OP_FILE_ISOPEN,sourceLobImpl:this};await this._sendMessage(e)}async openFile(){this.checkConn();let e={operation:j.TNS_LOB_OP_FILE_OPEN,sourceLobImpl:this,amount:j.TNS_LOB_OPEN_READ_ONLY,sendAmount:!0};return await this._sendMessage(e)}setDirFileName(e){let t=si.byteLength(e.dirName),s=j.TNS_LOB_LOC_FIXED_OFFSET+2,r=s+t+2,n=si.byteLength(e.fileName),o=r+n,a=si.allocUnsafe(o);this._locator.copy(a,0,0,j.TNS_LOB_LOC_FIXED_OFFSET+1),a.writeUInt16BE(t,j.TNS_LOB_LOC_FIXED_OFFSET),a.write(e.dirName,s),a.writeInt16BE(n,s+t),a.write(e.fileName,r),this._locator=a}};T(fo,"ThinLobImpl");var Ao=fo;uN.exports=Ao});var Ro=I((dC,fN)=>{"use strict";var{Buffer:es}=require("buffer"),Z=Ee(),Ze=U(),X=Fe(),Xd=wr(),{GrowableBuffer:zd}=Ss(),Qd=js(),po=class po extends zd{_readBytesWithLength(e){return e===Z.TNS_LONG_LENGTH_INDICATOR&&(e=this.readUInt32BE()),this.readBytes(e)}getIsAtomicNull(){let e=this.readUInt8();return e===Z.TNS_OBJ_ATOMIC_NULL||e===Z.TNS_NULL_LENGTH_INDICATOR?!0:(this.pos-=1,!1)}readHeader(e){if(e.imageFlags=this.readUInt8(),e.imageVersion=this.readUInt8(),this.readLength(),!(e.imageFlags&Z.TNS_OBJ_NO_PREFIX_SEG)){let t=this.readLength();this.skipBytes(t)}}readLength(){let e=this.readUInt8();return e!==Z.TNS_LONG_LENGTH_INDICATOR?e:this.readUInt32BE()}writeHeader(e){this.writeUInt8(e.imageFlags),this.writeUInt8(e.imageVersion),this.writeUInt8(Z.TNS_LONG_LENGTH_INDICATOR),this.writeUInt32BE(0),e._objType.isCollection&&(this.writeUInt8(1),this.writeUInt8(1))}writeLength(e){e<=Z.TNS_OBJ_MAX_SHORT_LENGTH?this.writeUInt8(e):(this.writeUInt8(Z.TNS_LONG_LENGTH_INDICATOR),this.writeUInt32BE(e))}_writeRawBytesAndLength(e,t){this.writeLength(t),this.writeBytes(e)}};T(po,"DbObjectPickleBuffer");var Zs=po,ri=class ri extends Xd{constructor(e,t){if(typeof e=="function"&&(e=e.prototype._objType),super(e),this.packedData=t,this.unpackedAttrs=new Map,t)this.unpackedAssocArray=new Map,this.unpackedAssocKeys=void 0;else if(e){let s=es.from([0,34,Z.TNS_OBJ_NON_NULL_OID,Z.TNS_OBJ_HAS_EXTENT_OID]);this.toid=es.concat([s,e.oid,Z.TNS_EXTENT_OID]),this.flags=Z.TNS_OBJ_TOP_LEVEL,this.imageFlags=Z.TNS_OBJ_IS_VERSION_81,this.imageVersion=Z.TNS_OBJ_IMAGE_VERSION,e.isCollection?(this.imageFlags|=Z.TNS_OBJ_IS_COLLECTION,e.collectionType===Z.TNS_OBJ_PLSQL_INDEX_TABLE?this.unpackedAssocArray=new Map:this.unpackedArray=[]):this.imageFlags|=Z.TNS_OBJ_NO_PREFIX_SEG}}_ensureAssocKeys(){this.unpackedAssocKeys||(this.unpackedAssocKeys=[...this.unpackedAssocArray.keys()].sort())}_ensureUnpacked(){this.packedData&&this._unpackData()}_getPackedData(){if(this.packedData)return this.packedData;let e=new Zs;e.writeHeader(this),this._packData(e);let t=e.pos;return e.pos=3,e.writeUInt32BE(t),e.buf.subarray(0,t)}_packData(e){let t=this._objType;if(t.isCollection)if(e.writeUInt8(t.collectionFlags),t.collectionType===Z.TNS_OBJ_PLSQL_INDEX_TABLE){this._ensureAssocKeys(),e.writeLength(this.unpackedAssocKeys.length);for(let s of this.unpackedAssocKeys)e.writeInt32BE(s),this._packValue(e,t.elementType,t.elementTypeClass,this.unpackedAssocArray.get(s))}else{e.writeLength(this.unpackedArray.length);for(let s of this.unpackedArray)this._packValue(e,t.elementType,t.elementTypeClass,s)}else for(let s of t.attributes)this._packValue(e,s.type,s.typeClass,this.unpackedAttrs.get(s.name))}_packValue(e,t,s,r){if(r==null)s&&!s.prototype.isCollection?e.writeUInt8(Z.TNS_OBJ_ATOMIC_NULL):e.writeUInt8(Z.TNS_NULL_LENGTH_INDICATOR);else switch(t){case X.DB_TYPE_CHAR:case X.DB_TYPE_VARCHAR:e.writeBytesWithLength(es.from(r));break;case X.DB_TYPE_NCHAR:case X.DB_TYPE_NVARCHAR:e.writeBytesWithLength(es.from(r,"utf16le").swap16());break;case X.DB_TYPE_NUMBER:e.writeOracleNumber(r.toString());break;case X.DB_TYPE_BINARY_INTEGER:case X.DB_TYPE_BOOLEAN:e.writeUInt8(4),e.writeUInt32BE(r);break;case X.DB_TYPE_RAW:e.writeBytesWithLength(r);break;case X.DB_TYPE_BINARY_DOUBLE:e.writeUInt8(8),e.writeBinaryDouble(r);break;case X.DB_TYPE_BINARY_FLOAT:e.writeUInt8(4),e.writeBinaryFloat(r);break;case X.DB_TYPE_DATE:case X.DB_TYPE_TIMESTAMP:case X.DB_TYPE_TIMESTAMP_LTZ:case X.DB_TYPE_TIMESTAMP_TZ:e.writeOracleDate(r,t);break;case X.DB_TYPE_OBJECT:this._objType.isCollection||r._objType.isCollection?e.writeBytesWithLength(r._getPackedData()):r._packData(e);break;default:Ze.throwErr(Ze.ERR_NOT_IMPLEMENTED,t)}}_unpackData(){let e=new Zs(this.packedData);e.readHeader(this),this._unpackDataFromBuf(e),this.packedData=void 0}_unpackDataFromBuf(e){let t,s,r,n,o=this._objType;if(o.isCollection){o.collectionType===Z.TNS_OBJ_PLSQL_INDEX_TABLE?s=new Map:t=[],this.collectionFlags=e.readUInt8();let a=e.readLength();for(let c=0;c<a;c++){o.collectionType===Z.TNS_OBJ_PLSQL_INDEX_TABLE&&(r=e.readUInt32BE());let E=this._unpackValue(e,o.elementType,o.elementTypeClass);o.collectionType===Z.TNS_OBJ_PLSQL_INDEX_TABLE?s.set(r,E):t.push(E)}}else{n=new Map;for(let a of o.attributes){let c=this._unpackValue(e,a.type,a.typeClass);n.set(a.name,c)}}this.unpackedAttrs=n,this.unpackedArray=t,this.unpackedAssocArray=s}_unpackValue(e,t,s){let r,n,o;switch(t){case X.DB_TYPE_NUMBER:return o=e.readOracleNumber(),o!==null&&(o=parseFloat(o)),o;case X.DB_TYPE_BINARY_INTEGER:return e.readBinaryInteger();case X.DB_TYPE_VARCHAR:case X.DB_TYPE_CHAR:return e.readStr(Z.CSFRM_IMPLICIT);case X.DB_TYPE_NVARCHAR:case X.DB_TYPE_NCHAR:return e.readStr(Z.CSFRM_NCHAR);case X.DB_TYPE_RAW:return o=e.readBytesWithLength(),o!==null&&(o=es.from(o)),o;case X.DB_TYPE_BINARY_DOUBLE:return e.readBinaryDouble();case X.DB_TYPE_BINARY_FLOAT:return e.readBinaryFloat();case X.DB_TYPE_DATE:case X.DB_TYPE_TIMESTAMP:return e.readOracleDate(!0);case X.DB_TYPE_TIMESTAMP_LTZ:case X.DB_TYPE_TIMESTAMP_TZ:return e.readOracleDate(!1);case X.DB_TYPE_BOOLEAN:return e.readBool();case X.DB_TYPE_OBJECT:case X.DB_TYPE_XMLTYPE:return r=e.getIsAtomicNull(),r?null:(n=new ri(s),n._objType.isXmlType?AN(n._objType._connection,e.readBytesWithLength()):(n._objType.isCollection||this._objType.isCollection?n.packedData=es.from(e.readBytesWithLength()):n._unpackDataFromBuf(e),n));default:Ze.throwErr(Ze.ERR_NOT_IMPLEMENTED,t)}}append(e){if(this._ensureUnpacked(),this.unpackedArray){let t=this._objType;t.maxNumElements>0&&this.unpackedArray.length>=t.maxNumElements&&Ze.throwErr(Ze.ERR_INVALID_COLL_INDEX_SET,this.unpackedArray.length,0,t.maxNumElements),this.unpackedArray.push(e)}else{this._ensureAssocKeys();let t;if(this.unpackedAssocKeys.length===0)t=0;else{let s=this.unpackedAssocKeys.length-1;t=this.unpackedAssocKeys[s]+1}this.unpackedAssocArray.set(t,e),this.unpackedAssocKeys.push(t)}}deleteElement(e){this._ensureUnpacked(),this.unpackedArray?(this._objType.collectionType==Z.TNS_OBJ_VARRAY&&Ze.throwErr(Ze.ERR_DELETE_ELEMENTS_OF_VARRAY),this.unpackedArray.splice(e,1)):(this._unpackedAssocKeys=void 0,this.unpackedAssocArray.delete(e))}getAttrValue(e){this._ensureUnpacked();let t=this.unpackedAttrs.get(e.name);return t===void 0?null:t}getElement(e){let t;return this._ensureUnpacked(),this.unpackedArray?t=this.unpackedArray[e]:t=this.unpackedAssocArray.get(e),t===void 0&&Ze.throwErr(Ze.ERR_INVALID_COLL_INDEX_GET,e),t}getFirstIndex(){if(this._ensureUnpacked(),this.unpackedArray)return 0;if(this.unpackedAssocArray)return this._ensureAssocKeys(),this.unpackedAssocKeys[0]}getKeys(){return this._ensureUnpacked(),this.unpackedArray?Array.from(this.unpackedArray.keys()):this.unpackedAssocArray?(this._ensureAssocKeys(),Array.from(this.unpackedAssocKeys)):[]}getLastIndex(){if(this._ensureUnpacked(),this.unpackedArray){if(this.unpackedArray.length>0)return this.unpackedArray.length-1}else if(this.unpackedAssocArray)return this._ensureAssocKeys(),this.unpackedAssocKeys[this.unpackedAssocKeys.length-1]}getNextIndex(e){if(this._ensureUnpacked(),this.unpackedArray){if(e+1<this.unpackedArray.length)return e+1}else if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys)if(t>e)return t}}getPrevIndex(e){if(this._ensureUnpacked(),this.unpackedArray){if(e>0)return e-1}else if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys.reverse())if(t<e)return t}}getValues(){let e=[];if(this._ensureUnpacked(),this.unpackedArray)return Array.from(this.unpackedArray);if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys)e.push(this.unpackedAssocArray.get(t))}return e}hasElement(e){return this._ensureUnpacked(),this.unpackedArray?e>=0&&e<this.unpackedArray.length:this.unpackedAssocArray.has(e)}setAttrValue(e,t){this._ensureUnpacked(),this.unpackedAttrs.set(e.name,t)}setElement(e,t){if(this._ensureUnpacked(),this.unpackedArray){let s=Math.max(this.unpackedArray.length-1,0);e>s&&Ze.throwErr(Ze.ERR_INVALID_COLL_INDEX_SET,e,0,s),this.unpackedArray[e]=t}else this.unpackedAssocArray.has(e)||(this.unpackedAssocKeys=void 0),this.unpackedAssocArray.set(e,t)}trim(e){this._ensureUnpacked(),e>0&&(this.unpackedArray=this.unpackedArray.slice(0,this.unpackedArray.length-e))}};T(ri,"ThinDbObjectImpl");var Po=ri;function AN(i,e){let t,s=new Zs(e),r={};s.readHeader(r),s.skipBytes(1);let n=s.readUInt32BE();n&Z.TNS_XML_TYPE_FLAG_SKIP_NEXT_4&&s.skipBytes(4);let o=s.numBytesLeft(),a=s.readBytes(o);if(n&Z.TNS_XML_TYPE_STRING)t=a.toString();else if(n&Z.TNS_XML_TYPE_LOB){let c=new Qd,E=es.from(a);c.init(i,E,X.DB_TYPE_CLOB,0,0),t=c}else Ze.throwErr(Ze.ERR_UNEXPECTED_XML_TYPE,n);return t}T(AN,"readXML");fN.exports={ThinDbObjectImpl:Po,readXML:AN}});var Do=I((pC,pN)=>{"use strict";var{Buffer:bt}=require("buffer"),dN=Qs(),m=Ee(),Jd=je(),{ThinDbObjectImpl:jd,readXML:Zd}=Ro(),$d=js(),Gt=U(),ne=Fe(),Io=class Io extends Jd{constructor(e,t=null,s=null){super(e),this.statement=t,this.options=s,this.offset=0,this.numExecs=1,this.arrayDmlRowCounts=!1,this.requiresDefine=!1,this.rowIndex=t.bufferRowCount||0,this.dmlRowCounts=[],this.batchErrors=!1,this.outVariables=[],this.inFetch=!1,this.parseOnly=!1,this.resultSetsToSetup=[],this.deferredErr=null}processMessage(e,t){if(t===m.TNS_MSG_TYPE_DESCRIBE_INFO){e.skipBytesChunked();let s=this.statement.queryVars;this.statement.queryVars=[],this.statement.numQueryVars=0,this.statement.bufferRowCount=0,this.statement.bufferRowIndex=0,this.processDescribeInfo(e,this.resultSet,s),this.outVariables=this.statement.queryVars}else t===m.TNS_MSG_TYPE_ROW_HEADER?this.processRowHeader(e):t===m.TNS_MSG_TYPE_ROW_DATA?this.processRowData(e):t===m.TNS_MSG_TYPE_IMPLICIT_RESULTSET?this.processImplicitResultSet(e):t===m.TNS_MSG_TYPE_BIT_VECTOR?this.processBitVector(e):t===m.TNS_MSG_TYPE_IO_VECTOR?this.processIOVector(e):t===m.TNS_MSG_TYPE_FLUSH_OUT_BINDS?(this.flushOutBinds=!0,this.endOfResponse=!0):t===m.TNS_MSG_TYPE_ERROR?this.processErrorInfo(e):super.processMessage(e,t)}processErrorInfo(e){super.processErrorInfo(e),this.errorInfo.cursorId!==0&&(this.statement.cursorId=this.errorInfo.cursorId),this.statement.isPlSql||(this.statement.rowCount=this.errorInfo.rowCount),this.errorInfo.rowCount>0&&(this.statement.lastRowid=dN.encodeRowID(this.errorInfo.rowID)),this.options.batchErrors=this.errorInfo.batchErrors,this.batchErrors&&this.options.batchErrors===null&&(this.options.batchErrors=[]),this.errorInfo.num===m.TNS_ERR_NO_DATA_FOUND&&this.statement.isQuery?(this.errorInfo.num=0,this.errorOccurred=!1,this.statement.moreRowsToFetch=!1):this.retry?this.retry=!1:this.statement.isQuery&&(this.errorInfo.num===m.TNS_ERR_VAR_NOT_IN_SELECT_LIST||this.errorInfo.num===m.TNS_ERR_INCONSISTENT_DATA_TYPES)?(this.retry=!0,this.connection.statementCache.clearCursor(this.statement)):this.errorInfo.num!==0&&this.errorInfo.cursorId!==0&&(Gt.ERR_INTEGRITY_ERROR_CODES.includes(this.errorInfo.num)||(this.connection.statementCache.clearCursor(this.statement),this.statement.returnToCache=!1)),this.errorInfo.batchErrors&&(this.errorOccurred=!1)}_adjustFetchType(e,t){(t.fetchInfo.dbType._oraTypeNum===m.TNS_DATA_TYPE_CLOB&&e.fetchInfo.fetchType._oraTypeNum===m.TNS_DATA_TYPE_LONG||t.fetchInfo.dbType._oraTypeNum===m.TNS_DATA_TYPE_BLOB&&e.fetchInfo.fetchType._oraTypeNum===m.TNS_DATA_TYPE_LONG_RAW||t.fetchInfo.dbType._oraTypeNum===m.TNS_DATA_TYPE_JSON&&e.fetchInfo.fetchType._oraTypeNum===m.TNS_DATA_TYPE_VARCHAR||t.fetchInfo.dbType._oraTypeNum===m.TNS_DATA_TYPE_VECTOR&&e.fetchInfo.fetchType._oraTypeNum===m.TNS_DATA_TYPE_LONG)&&(t.type=e.fetchInfo.fetchType,t.maxSize=e.maxSize)}processDescribeInfo(e,t,s){let r=t.statement;e.skipUB4(),r.numQueryVars=e.readUB4(),r.numQueryVars>0&&e.skipUB1(),t.metadata=[];let n=[],o=[];for(let c=0;c<r.numQueryVars;c++){let E=this.processColumnInfo(e,c+1);s&&c<s.length&&this._adjustFetchType(s[c],E),o.push(E),n.push(E.fetchInfo)}let a=e.readUB4();a>0&&e.skipBytesChunked(),e.skipUB4(),e.skipUB4(),e.skipUB4(),e.skipUB4(),a=e.readUB4(),a>0&&e.skipBytesChunked(),t.metadata=n,r.queryVars=o,this.resultSetsToSetup.push(t)}processColumnInfo(e,t){let s=e.readUInt8();e.skipUB1();let r=e.readInt8(),n=e.readInt8(),o=e.readUB4();e.skipUB4(),e.skipUB8();let a,c=e.readUB4();c>0&&(a=bt.from(e.readBytesWithLength())),e.skipUB2(),e.skipUB2();let E=e.readUInt8(),l=e.readUB4();s===m.TNS_DATA_TYPE_RAW&&(l=o),e.caps.ttcFieldVersion>=m.TNS_CCAP_FIELD_VERSION_12_2&&e.skipUB4();let u=!!e.readUInt8();e.skipUB1();let p;c=e.readUB4(),c>0&&(p=e.readStr(m.CSFRM_IMPLICIT));let d;c=e.readUB4(),c>0&&(d=e.readStr(m.CSFRM_IMPLICIT)),c=e.readUB4();let N;c>0&&(N=e.readStr(m.CSFRM_IMPLICIT)),e.skipUB2();let A=e.readUB4(),P={name:p,dbType:ne.getTypeByOraTypeNum(s,E),nullable:u};if(P.isJson=!!(A&m.TNS_UDS_FLAGS_IS_JSON),P.isOson=!!(A&m.TNS_UDS_FLAGS_IS_OSON),e.caps.ttcFieldVersion>=m.TNS_CCAP_FIELD_VERSION_23_1&&(c=e.readUB4(),c>0&&(P.domainSchema=e.readStr(m.CSFRM_IMPLICIT)),c=e.readUB4(),c>0&&(P.domainName=e.readStr(m.CSFRM_IMPLICIT))),e.caps.ttcFieldVersion>=m.TNS_CCAP_FIELD_VERSION_23_1_EXT_3&&e.readUB4()>0){P.annotations={},e.skipUB1();let S=e.readUB4();e.skipUB1();let C,O;for(let y=0;y<S;y++)e.skipUB4(),O="",C=e.readStr(m.CSFRM_IMPLICIT),c=e.readUB4(),c>0&&(O=e.readStr(m.CSFRM_IMPLICIT)),P.annotations[C]=O,e.skipUB4();e.skipUB4()}if(e.caps.ttcFieldVersion>=m.TNS_CCAP_FIELD_VERSION_23_4){let S=e.readUB4(),C=e.readUInt8(),O=e.readUInt8();P.dbType===ne.DB_TYPE_VECTOR&&(O&m.VECTOR_META_FLAG_FLEXIBLE_DIM||(P.vectorDimensions=S),C!==m.VECTOR_FORMAT_FLEX&&(P.vectorFormat=C))}switch(P.dbType){case ne.DB_TYPE_VARCHAR:case ne.DB_TYPE_NVARCHAR:case ne.DB_TYPE_CHAR:case ne.DB_TYPE_NCHAR:case ne.DB_TYPE_RAW:P.byteSize=l;break;case ne.DB_TYPE_NUMBER:P.precision=r;break;case ne.DB_TYPE_TIMESTAMP:case ne.DB_TYPE_TIMESTAMP_TZ:case ne.DB_TYPE_TIMESTAMP_LTZ:P.precision=n;break;case ne.DB_TYPE_OBJECT:P.dbTypeClass=this.connection._getDbObjectType(d,N,void 0,a),P.dbTypeClass.partial&&this.connection._partialDbObjectTypes.push(P.dbTypeClass),P.dbTypeClass.isXmlType&&(P.dbType=ne.DB_TYPE_XMLTYPE);break;default:break}return P.dbType===ne.DB_TYPE_NUMBER&&(P.scale=n),{fetchInfo:P,type:P.dbType,maxSize:o,columnNum:t,values:new Array(this.options.fetchArraySize)}}processRowHeader(e){e.skipUB1(),e.skipUB2(),e.skipUB4(),e.skipUB4(),e.skipUB2();let t=e.readUB4();t>0&&(this.bitVector=bt.from(e.readBytesWithLength())),t=e.readUB4(),t>0&&e.skipBytesChunked()}isDuplicateData(e){if(!this.bitVector)return!1;let t=Math.floor(e/8),s=e%8;return(this.bitVector[t]&1<<s)===0}processRowData(e){let t;for(let[s,r]of this.outVariables.entries())if(r.isArray){r.numElementsInArray=e.readUB4();let n=new Array(r.numElementsInArray).fill(null);for(let o=0;o<r.numElementsInArray;o++)t=this.processColumnData(e,r,o),n[o]=t;r.values[this.rowIndex]=n}else if(this.statement.isReturning){let n=e.readUB4(),o=Array(n).fill(null);for(let a=0;a<n;a++)o[a]=this.processColumnData(e,r,a);r.values[this.rowIndex]=o}else this.isDuplicateData(s)?(this.rowIndex===0&&r.outConverter?t=r.lastRawValue:t=r.values[this.statement.lastRowIndex],r.values[this.rowIndex]=t):(t=this.processColumnData(e,r,this.rowIndex),r.values[this.rowIndex]=t);this.rowIndex++,this.inFetch&&(this.statement.lastRowIndex=this.rowIndex-1,this.statement.bufferRowCount++,this.bitVector=null)}processIOVector(e){let t;e.skipUB1();let s=e.readUB2(),n=e.readUB4()*256+s;e.skipUB4(),e.skipUB2(),t=e.readUB2(),t>0&&e.skipBytes(t),t=e.readUB2(),t>0&&e.skipBytes(t),this.outVariables=[];for(let o=0;o<n;o++){let a=this.statement.bindInfoList[o];a.bindDir=e.readUInt8(),a.bindDir!==m.TNS_BIND_DIR_INPUT&&this.outVariables.push(a.bindVar)}}processColumnData(e,t){let s=t.type,r=s._oraTypeNum,n=s._csfrm,o=t.maxSize,a=null;if(o===0&&r!==m.TNS_DATA_TYPE_LONG&&r!==m.TNS_DATA_TYPE_LONG_RAW&&r!==m.TNS_DATA_TYPE_UROWID)a=null;else if(r===m.TNS_DATA_TYPE_VARCHAR||r===m.TNS_DATA_TYPE_CHAR||r===m.TNS_DATA_TYPE_LONG)n===m.CSFRM_NCHAR&&e.caps.checkNCharsetId(),a=e.readStr(n);else if(r===m.TNS_DATA_TYPE_RAW||r===m.TNS_DATA_TYPE_LONG_RAW)a=e.readBytesWithLength(),a!==null&&(a=bt.from(a));else if(r===m.TNS_DATA_TYPE_NUMBER)a=e.readOracleNumber(),!this.inFetch&&a!==null&&(a=parseFloat(a));else if(r===m.TNS_DATA_TYPE_DATE||r===m.TNS_DATA_TYPE_TIMESTAMP||r===m.TNS_DATA_TYPE_TIMESTAMP_LTZ||r===m.TNS_DATA_TYPE_TIMESTAMP_TZ){let c=r===m.TNS_DATA_TYPE_DATE||r===m.TNS_DATA_TYPE_TIMESTAMP;a=e.readOracleDate(c)}else if(r===m.TNS_DATA_TYPE_ROWID)if(!this.inFetch)a=e.readStr(m.CSFRM_IMPLICIT);else{let c=e.readUInt8();if(PN(c))a=null;else{let E=e.readRowID();a=dN.encodeRowID(E)}}else if(r===m.TNS_DATA_TYPE_UROWID)this.inFetch?a=e.readURowID():a=e.readStr(m.CSFRM_IMPLICIT);else if(r===m.TNS_DATA_TYPE_BINARY_DOUBLE)a=e.readBinaryDouble();else if(r===m.TNS_DATA_TYPE_BINARY_FLOAT)a=e.readBinaryFloat();else if(r===m.TNS_DATA_TYPE_BINARY_INTEGER)a=e.readOracleNumber(),a!==null&&(a=parseFloat(a));else if(r===m.TNS_DATA_TYPE_CURSOR){let c=e.readUInt8();PN(c)?a=null:(a=this.createCursorFromDescribe(e),a.statement.cursorId=e.readUB2(),a.statement.cursorId===0&&t.dir!==m.BIND_IN&&(this.options.nullifyInvalidCursor?a=null:Gt.throwErr(Gt.ERR_INVALID_REF_CURSOR)))}else if(r===m.TNS_DATA_TYPE_BOOLEAN)a=e.readBool();else if(r===m.TNS_DATA_TYPE_CLOB||r===m.TNS_DATA_TYPE_BLOB||r===m.TNS_DATA_TYPE_BFILE){let c=0,E=0;if(e.readUB4()>0){a=new $d,r===m.TNS_DATA_TYPE_BFILE?e.skipUB4():(c=e.readUB8(),E=e.readUB4());let u=bt.from(e.readBytesWithLength());a.init(this.connection,u,s,c,E)}}else if(r===m.TNS_DATA_TYPE_JSON)a=e.readOson();else if(r===m.TNS_DATA_TYPE_VECTOR)a=e.readVector();else if(r===m.TNS_DATA_TYPE_INT_NAMED){let c=e.readDbObject();if(c.packedData){let E=t.fetchInfo?t.fetchInfo.dbTypeClass:t.typeClass;t.type===ne.DB_TYPE_XMLTYPE?a=Zd(this.connection,c.packedData):(a=new jd(E,c.packedData),a.toid=c.toid,a.oid=c.oid)}}else Gt.throwErr(Gt.ERR_UNSUPPORTED_DATA_TYPE,s.num,t.columnNum);if(this.inFetch)(r===m.TNS_DATA_TYPE_LONG||r===m.TNS_DATA_TYPE_LONG_RAW||t.maxSize>e.caps.maxStringSize)&&(e.skipSB4(),e.skipUB4());else{let c=e.readSB4();c<0&&r===m.TNS_DATA_TYPE_BOOLEAN?a=null:c!==0&&a!==null&&r!==m.TNS_DATA_TYPE_INT_NAMED&&this.saveDeferredErr(Gt.ERR_INSUFFICIENT_BUFFER_FOR_BINDS)}return a}processReturnParameter(e){let t=0,s,r=e.readUB2();for(let o=0;o<r;o++)e.skipUB4();let n=e.readUB2();n>0&&e.skipBytes(n),r=e.readUB2();for(let o=0;o<r;o++)n=e.readUB2(),n>0&&(s=e.readStr(m.CSFRM_IMPLICIT)),n=e.readUB2(),n>0&&e.skipBytesChunked(),t=e.readUB2(),t===m.TNS_KEYWORD_NUM_CURRENT_SCHEMA?this.connection.currentSchema=s:t===m.TNS_KEYWORD_NUM_EDITION&&(this.connection._edition=s);if(n=e.readUB2(),n>0&&e.skip(n),this.arrayDmlRowCounts){let o=e.readUB4(),a=this.options.dmlRowCounts=[];for(let c=0;c<o;c++){let E=e.readUB8();a.push(E)}}}async postProcess(){if(this.deferredErr)throw this.deferredErr;if(this.outVariables)for(let e of this.outVariables)if(e.isArray){if(e.outConverter)for(let t=0;t<e.numElementsInArray;t++)e.values[0][t]=await e.outConverter(e.values[0][t])}else e.outConverter&&(e.values[0]=await e.outConverter(e.values[0]));await this.connection._populatePartialDbObjectTypes();for(let e of this.resultSetsToSetup){e._setup(this.options,e.metadata);for(let t of e.statement.queryVars)(t.type===ne.DB_TYPE_CLOB||t.type===ne.DB_TYPE_NCLOB||t.type===ne.DB_TYPE_BLOB||t.type===ne.DB_TYPE_BFILE||t.type===ne.DB_TYPE_JSON||t.type===ne.DB_TYPE_VECTOR)&&(t.type!==t.fetchInfo.fetchType&&(t.type=t.fetchInfo.fetchType,t.maxSize=m.TNS_MAX_LONG_LENGTH),e.statement.noPrefetch||(e.statement.requiresDefine=!0,e.statement.noPrefetch=!0))}}preProcess(){if(this.statement.isReturning&&!this.parseOnly){this.outVariables=[];for(let e of this.statement.bindInfoList)e.isReturnBind&&this.outVariables.push(e.bindVar)}if(this.statement.isQuery&&(this.inFetch=!0,this.statement.queryVars)){this.outVariables=[];for(let e=0;e<this.statement.queryVars.length;e++)this.outVariables.push(this.statement.queryVars[e])}}processBitVector(e){this.numColumnsSent=e.readUB2();let t=Math.floor(this.statement.numQueryVars/8);this.statement.numQueryVars%8>0&&(t+=1),this.bitVector=bt.from(e.readBytes(t))}processBindParams(e,t){let s=[],r=[];for(let n of t)n.isReturnBind||r.push(n),s.push(n.bindVar);return this.writeColumnMetadata(e,s),r}writeColumnMetadata(e,t){for(let s of t){let r=s.type._oraTypeNum,n=s.maxSize||s.type._bufferSizeFactor,o=0;s.type._csfrm===m.CSFRM_NCHAR&&(n*=s.type._bufferSizeFactor),[m.TNS_DATA_TYPE_ROWID,m.TNS_DATA_TYPE_UROWID].includes(r)&&(r=m.TNS_DATA_TYPE_VARCHAR,n=m.TNS_MAX_UROWID_LENGTH);let a=m.TNS_BIND_USE_INDICATORS;s.isArray&&(a|=m.TNS_BIND_ARRAY);let c=0;if(s.type===ne.DB_TYPE_BLOB||s.type===ne.DB_TYPE_CLOB||s.type===ne.DB_TYPE_NCLOB||s.type===ne.DB_TYPE_BFILE?c=m.TNS_LOB_PREFETCH_FLAG:s.type===ne.DB_TYPE_JSON?(c=m.TNS_LOB_PREFETCH_FLAG,n=o=m.TNS_JSON_MAX_LENGTH):s.type===ne.DB_TYPE_VECTOR&&(c=m.TNS_LOB_PREFETCH_FLAG,n=o=m.TNS_VECTOR_MAX_LENGTH),e.writeUInt8(r),e.writeUInt8(a),e.writeUInt8(0),e.writeUInt8(0),n>e.caps.maxStringSize?e.writeUB4(m.TNS_MAX_LONG_LENGTH):e.writeUB4(n),s.isArray?e.writeUB4(s.maxArraySize):e.writeUB4(0),e.writeUB4(c),s.objType){let E=s.objType;e.writeUB4(E.oid.length),e.writeBytesWithLength(E.oid),e.writeUB2(E.version)}else e.writeUB4(0),e.writeUB2(0);s.type._csfrm!==0?e.writeUB2(m.TNS_CHARSET_UTF8):e.writeUB2(0),e.writeUInt8(s.type._csfrm),e.writeUB4(o),e.caps.ttcFieldVersion>=m.TNS_CCAP_FIELD_VERSION_12_2&&e.writeUB4(0)}}writeBindParamsRow(e,t,s){let r=this.offset,n=!1;for(let o of t){if(o.isReturnBind)continue;let a=o.bindVar;if(a.isArray){let c=a.values.length;e.writeUB4(c);for(let E=0;E<c;E++)this.writeBindParamsColumn(e,a,a.values[E])}else!this.statement.isPlSql&&a.maxSize>e.caps.maxStringSize?n=!0:this.writeBindParamsColumn(e,a,a.values[s+r])}if(n)for(let o of t){if(o.isReturnBind)continue;let a=o.bindVar;a.maxSize>e.caps.maxStringSize&&this.writeBindParamsColumn(e,a,a.values[s+r])}}writeBindParamsColumn(e,t,s){let r=t.type._oraTypeNum,n;if(s==null&&r!==m.TNS_DATA_TYPE_CURSOR&&r!==m.TNS_DATA_TYPE_JSON)r===m.TNS_DATA_TYPE_BOOLEAN?(e.writeUInt8(m.TNS_ESCAPE_CHAR),e.writeUInt8(1)):r===m.TNS_DATA_TYPE_INT_NAMED?(e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(m.TNS_OBJ_TOP_LEVEL)):e.writeUInt8(0);else if(r===m.TNS_DATA_TYPE_NUMBER||r===m.TNS_DATA_TYPE_BINARY_INTEGER)typeof s=="boolean"?n=s?"1":"0":n=s.toString(),e.writeOracleNumber(n);else if(r===m.TNS_DATA_TYPE_VARCHAR||r===m.TNS_DATA_TYPE_CHAR||r===m.TNS_DATA_TYPE_LONG||r===m.TNS_DATA_TYPE_RAW||r===m.TNS_DATA_TYPE_LONG_RAW)t.type._csfrm===m.CSFRM_NCHAR?(e.caps.checkNCharsetId(),s=bt.from(s,m.TNS_ENCODING_UTF16).swap16()):s=bt.from(s),e.writeBytesWithLength(s);else if(r===m.TNS_DATA_TYPE_DATE||r===m.TNS_DATA_TYPE_TIMESTAMP||r===m.TNS_DATA_TYPE_TIMESTAMP_TZ||r===m.TNS_DATA_TYPE_TIMESTAMP_LTZ)e.writeOracleDate(s,t.type);else if(r===m.TNS_DATA_TYPE_BINARY_DOUBLE)e.writeUInt8(8),e.writeBinaryDouble(s);else if(r===m.TNS_DATA_TYPE_BINARY_FLOAT)e.writeUInt8(4),e.writeBinaryFloat(s);else if(r===m.TNS_DATA_TYPE_CURSOR){let o=s;s||(o=this.connection._createResultSet()),o.statement.cursorId===0?(e.writeUInt8(1),e.writeUInt8(0)):(e.writeUB4(1),e.writeUB4(o.statement.cursorId))}else if(r===m.TNS_DATA_TYPE_BOOLEAN)s?(e.writeUInt8(2),e.writeUInt16BE(257)):e.writeUInt16BE(256);else if(r===m.TNS_DATA_TYPE_CLOB||r===m.TNS_DATA_TYPE_BLOB||r===m.TNS_DATA_TYPE_BFILE)e.writeUB4(s._locator.length),e.writeBytesWithLength(s._locator);else if([m.TNS_DATA_TYPE_ROWID,m.TNS_DATA_TYPE_UROWID].includes(r))e.writeBytesWithLength(bt.from(s));else if(r===m.TNS_DATA_TYPE_JSON)e.writeOson(s,this.connection._osonMaxFieldNameSize);else if(r===m.TNS_DATA_TYPE_VECTOR)e.writeVector(s);else if(r===m.TNS_DATA_TYPE_INT_NAMED)e.writeDbObject(s);else{let o=`Binding data of type ${t.type}`;Gt.throwErr(Gt.ERR_NOT_IMPLEMENTED,o)}}createCursorFromDescribe(e){let t=this.connection._createResultSet(this.options);return t.options.moreRowsToFetch=!0,t.statement.isQuery=!0,t.statement.requiresFullExecute=!0,this.processDescribeInfo(e,t),t}processImplicitResultSet(e){this.options.implicitResultSet=[];let t=e.readUB4();for(let s=0;s<t;s++){let r=e.readUInt8();e.skipBytes(r);let n=this.createCursorFromDescribe(e);n.statement.cursorId=e.readUB2(),this.options.implicitResultSet.push(n)}}};T(Io,"MessageWithData");var mo=Io,PN=T(i=>i===0||i===m.TNS_NULL_LENGTH_INDICATOR,"isNullLength");pN.exports=mo});var go=I((mC,mN)=>{"use strict";var eP=Do(),oe=Ee(),RN=U(),Oo=class Oo extends eP{constructor(e,t,s,r){super(e,t,s),!r&&t.isQuery&&(r=e._createResultSet(s,t)),this.resultSet=r,this.functionCode=oe.TNS_FUNC_EXECUTE,this.bindParams=void 0,this.currentRow=0}writeExecuteMessage(e){let t=0,s=0,r=0,n=1,o=this.statement,a=o.bindInfoList;if(this.noImplicitRelease&&(s|=oe.TNS_EXEC_OPTION_NO_IMPL_REL),!o.requiresDefine&&!this.parseOnly&&a&&(r=a.length),o.requiresDefine?t|=oe.TNS_EXEC_OPTION_DEFINE:!this.parseOnly&&o.sql&&(s|=oe.TNS_EXEC_OPTION_IMPLICIT_RESULTSET,t|=oe.TNS_EXEC_OPTION_EXECUTE),(o.cursorId===0||o.isDdl)&&(t|=oe.TNS_EXEC_OPTION_PARSE),o.isQuery&&(this.parseOnly?t|=oe.TNS_EXEC_OPTION_DESCRIBE:(o.cursorId===0||o.requiresDefine?n=this.options.prefetchRows:n=this.options.fetchArraySize,n>0&&!o.noPrefetch&&(t|=oe.TNS_EXEC_OPTION_FETCH))),!o.isPlSql&&!this.parseOnly?t|=oe.TNS_EXEC_OPTION_NOT_PLSQL:o.isPlSql&&r>0&&(t|=oe.TNS_EXEC_OPTION_PLSQL_BIND),r>0&&(t|=oe.TNS_EXEC_OPTION_BIND),this.batchErrors&&(t|=oe.TNS_EXEC_OPTION_BATCH_ERRORS),this.arrayDmlRowCounts&&(s=oe.TNS_EXEC_OPTION_DML_ROWCOUNTS),this.options.autoCommit&&(t|=oe.TNS_EXEC_OPTION_COMMIT),this.writePiggybacks(e),this.writeFunctionHeader(e),e.writeUB4(t),e.writeUB4(o.cursorId),o.cursorId===0||o.isDdl?(e.writeUInt8(1),e.writeUB4(o.sqlLength)):(e.writeUInt8(0),e.writeUB4(0)),e.writeUInt8(1),e.writeUB4(13),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(n),e.writeUB4(oe.TNS_MAX_LONG_LENGTH),r===0?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(r)),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),o.requiresDefine?(e.writeUInt8(1),e.writeUB4(this.statement.queryVars.length)):(e.writeUInt8(0),e.writeUB4(0)),e.writeUB4(0),e.writeUInt8(0),e.writeUInt8(1),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUB4(0),this.arrayDmlRowCounts?(e.writeUInt8(1),e.writeUB4(this.numExecs),e.writeUInt8(1)):(e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0)),e.caps.ttcFieldVersion>=oe.TNS_CCAP_FIELD_VERSION_12_2&&(e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.caps.ttcFieldVersion>=oe.TNS_CCAP_FIELD_VERSION_12_2_EXT1&&(e.writeUInt8(0),e.writeUB4(0))),o.cursorId===0||o.isDdl?o.sql?(e.writeBytesWithLength(o.sqlBytes),e.writeUB4(1)):RN.throwErr(RN.ERR_INVALID_REF_CURSOR):e.writeUB4(0),o.isQuery?o.cursorId===0?e.writeUB4(0):e.writeUB4(n):e.writeUB4(this.numExecs),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(o.isQuery?1:0),e.writeUB4(0),e.writeUB4(s),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),o.requiresDefine)this.writeColumnMetadata(e,this.statement.queryVars);else if(r>0)return this.processBindParams(e,a)}writeReExecuteMessage(e){let t=this.statement,s=t.bindInfoList,r=0,n=0,o;if(s!==void 0){t.isQuery||(this.outVariables=[],s.forEach(c=>{c.bindDir!==oe.TNS_BIND_DIR_INPUT&&this.outVariables.push(c.bindVar)}));let a=[];s.forEach(c=>{c.bindDir!==oe.TNS_BIND_DIR_OUTPUT&&!c.isReturnBind&&a.push(c)}),s=a}return this.functionCode===oe.TNS_FUNC_REEXECUTE_AND_FETCH?(r|=oe.TNS_EXEC_OPTION_EXECUTE,o=this.options.prefetchRows):(this.options.autoCommit&&(n|=oe.TNS_EXEC_OPTION_COMMIT_REEXECUTE),o=this.numExecs),this.writePiggybacks(e),this.writeFunctionHeader(e),e.writeUB4(t.cursorId),e.writeUB4(o),e.writeUB4(r),e.writeUB4(n),s}encode(e){if(this.currentRow===0){let t=this.statement;t.cursorId!==0&&!t.requiresFullExecute&&!this.parseOnly&&!t.requiresDefine&&!t.noPrefetch&&!t.isDdl&&!this.batchErrors?(t.isQuery&&this.options.prefetchRows>0?this.functionCode=oe.TNS_FUNC_REEXECUTE_AND_FETCH:this.functionCode=oe.TNS_FUNC_REEXECUTE,this.bindParams=this.writeReExecuteMessage(e)):(this.functionCode=oe.TNS_FUNC_EXECUTE,this.bindParams=this.writeExecuteMessage(e))}if(this.bindParams&&this.bindParams.length>0){let t=e.nsi.ntAdapter;for(;this.currentRow<this.numExecs;)if(e.writeUInt8(oe.TNS_MSG_TYPE_ROW_DATA),this.writeBindParamsRow(e,this.bindParams,this.currentRow),this.currentRow++,this.currentRow<this.numExecs&&t.shouldPauseWrite())return!0}this.currentRow=0,this.bindParams=void 0}};T(Oo,"ExecuteMessage");var Co=Oo;mN.exports=Co});var Bo=I((DC,DN)=>{"use strict";var tP=Ee(),sP=Do(),IN=U(),yo=class yo extends sP{constructor(e,t,s,r){super(e,t,s),this.resultSet=r,this.functionCode=tP.TNS_FUNC_FETCH}encode(e){this.writeFunctionHeader(e),this.statement.cursorId===0&&IN.throwErr(IN.ERR_CURSOR_HAS_BEEN_CLOSED),e.writeUB4(this.statement.cursorId),e.writeUB4(this.options.fetchArraySize)}};T(yo,"FetchMessage");var Lo=yo;DN.exports=Lo});var Uo=I((OC,CN)=>{"use strict";var rP=c_(),iP=go(),nP=Bo(),Yo=class Yo extends rP{async _fetchMoreRows(e){let t=this.statement.requiresFullExecute?iP:nP,s=new t(this.connection,this.statement,e,this);await this.connection._protocol._processMessage(s),this.statement.requiresFullExecute=!1}_resultSetNew(e,t,s){this.connection=e,this.statement=t,this._nestedCursorIndices=[],this.options=s,this.prefetchRowsProcessed=!1,this.statement.bufferRowIndex=0}close(){this.connection._returnStatement(this.statement)}_processRows(e){let t=[],s=this.statement.bufferRowIndex;for(let r=s;r<s+e;r++){let n=[];for(let o=0;o<this.statement.numQueryVars;o++)n.push(this.statement.queryVars[o].values[r]);t.push(n)}return this.statement.bufferRowIndex+=e,this.statement.bufferRowIndex===this.statement.bufferRowCount&&(this.statement.bufferRowCount=0,this.statement.bufferRowIndex=0),t}async getRows(e,t){if(t.fetchArraySize=e||this.options.fetchArraySize,t.prefetchRows=this.options.prefetchRows,this.statement.bufferRowCount-this.statement.bufferRowIndex>=t.fetchArraySize)return this._processRows(t.fetchArraySize);{t.fetchArraySize=t.fetchArraySize-(this.statement.bufferRowCount-this.statement.bufferRowIndex);let r=this.statement.bufferRowCount;if(this.statement.moreRowsToFetch&&t.fetchArraySize>0&&await this._fetchMoreRows(t),t.fetchArraySize=e||this.options.fetchArraySize,r===this.statement.bufferRowCount){let n=this.statement.bufferRowCount-this.statement.bufferRowIndex;return this.statement.bufferRowCount=0,n>0?this._processRows(n):[]}}let s=this.statement.bufferRowCount-this.statement.bufferRowIndex;return this._processRows(s)}};T(Yo,"ThinResultSetImpl");var wo=Yo;CN.exports=wo});var yN=I((LC,LN)=>{"use strict";var{Buffer:ON}=require("buffer"),L=Ee(),gN=U(),Vo=class Vo{constructor(e){this.protocolVersion=e.sAtts.version,this.ttcFieldVersion=L.TNS_CCAP_FIELD_VERSION_MAX,this.supports12cLogon=!0,this.supportsOob=!1,this.nCharsetId=L.TNS_CHARSET_UTF16,this.compileCaps=ON.alloc(L.TNS_CCAP_MAX),this.runtimeCaps=ON.alloc(L.TNS_RCAP_MAX),this.initCompileCaps(e),this.initRuntimeCaps(),this.maxStringSize=0}adjustForServerCompileCaps(e,t){e[L.TNS_CCAP_FIELD_VERSION]<this.ttcFieldVersion&&(this.ttcFieldVersion=e[L.TNS_CCAP_FIELD_VERSION],this.compileCaps[L.TNS_CCAP_FIELD_VERSION]=this.ttcFieldVersion),this.ttcFieldVersion<L.TNS_CCAP_FIELD_VERSION_23_4&&t.endOfRequestSupport&&(this.compileCaps[L.TNS_CCAP_TTC4]^=L.TNS_CCAP_END_OF_REQUEST,t.endOfRequestSupport=!1)}adjustForServerRuntimeCaps(e){e[L.TNS_RCAP_TTC]&L.TNS_RCAP_TTC_32K?this.maxStringSize=32767:this.maxStringSize=4e3}initCompileCaps(e){this.compileCaps[L.TNS_CCAP_SQL_VERSION]=L.TNS_CCAP_SQL_VERSION_MAX,this.compileCaps[L.TNS_CCAP_LOGON_TYPES]=L.TNS_CCAP_O5LOGON|L.TNS_CCAP_O5LOGON_NP|L.TNS_CCAP_O7LOGON|L.TNS_CCAP_O8LOGON_LONG_IDENTIFIER|L.TNS_CCAP_O9LOGON_LONG_PASSWORD,this.compileCaps[L.TNS_CCAP_FIELD_VERSION]=this.ttcFieldVersion,this.compileCaps[L.TNS_CCAP_SERVER_DEFINE_CONV]=1,this.compileCaps[L.TNS_CCAP_TTC1]=L.TNS_CCAP_FAST_BVEC|L.TNS_CCAP_END_OF_CALL_STATUS|L.TNS_CCAP_IND_RCD,this.compileCaps[L.TNS_CCAP_OCI1]=L.TNS_CCAP_FAST_SESSION_PROPAGATE|L.TNS_CCAP_APP_CTX_PIGGYBACK,this.compileCaps[L.TNS_CCAP_TDS_VERSION]=L.TNS_CCAP_TDS_VERSION_MAX,this.compileCaps[L.TNS_CCAP_RPC_VERSION]=L.TNS_CCAP_RPC_VERSION_MAX,this.compileCaps[L.TNS_CCAP_RPC_SIG]=L.TNS_CCAP_RPC_SIG_VALUE,this.compileCaps[L.TNS_CCAP_DBF_VERSION]=L.TNS_CCAP_DBF_VERSION_MAX,this.compileCaps[L.TNS_CCAP_LOB]=L.TNS_CCAP_LOB_UB8_SIZE|L.TNS_CCAP_LOB_ENCS|L.TNS_CCAP_LOB_PREFETCH|L.TNS_CCAP_LOB_TEMP_SIZE|L.TNS_CCAP_LOB_12C|L.TNS_CCAP_LOB_PREFETCH_DATA,this.compileCaps[L.TNS_CCAP_UB2_DTY]=1,this.compileCaps[L.TNS_CCAP_LOB2]=L.TNS_CCAP_LOB2_QUASI|L.TNS_CCAP_LOB2_2GB_PREFETCH,this.compileCaps[L.TNS_CCAP_TTC3]=L.TNS_CCAP_IMPLICIT_RESULTS|L.TNS_CCAP_BIG_CHUNK_CLR|L.TNS_CCAP_KEEP_OUT_ORDER,this.compileCaps[L.TNS_CCAP_TTC2]=L.TNS_CCAP_ZLNP,this.compileCaps[L.TNS_CCAP_OCI2]=L.TNS_CCAP_DRCP,this.compileCaps[L.TNS_CCAP_CLIENT_FN]=L.TNS_CCAP_CLIENT_FN_MAX,this.compileCaps[L.TNS_CCAP_TTC4]=L.TNS_CCAP_INBAND_NOTIFICATION,e.endOfRequestSupport&&(this.compileCaps[L.TNS_CCAP_TTC4]|=L.TNS_CCAP_END_OF_REQUEST),this.compileCaps[L.TNS_CCAP_CTB_FEATURE_BACKPORT]=L.TNS_CCAP_CTB_IMPLICIT_POOL,this.compileCaps[L.TNS_CCAP_TTC5]=L.TNS_CCAP_VECTOR_SUPPORT,this.compileCaps[L.TNS_CCAP_VECTOR_FEATURES]=L.TNS_CCAP_VECTOR_FEATURE_BINARY}initRuntimeCaps(){this.runtimeCaps[L.TNS_RCAP_COMPAT]=L.TNS_RCAP_COMPAT_81,this.runtimeCaps[L.TNS_RCAP_TTC]=L.TNS_RCAP_TTC_ZERO_COPY|L.TNS_RCAP_TTC_32K}checkNCharsetId(){this.nCharsetId!==L.TNS_CHARSET_UTF16&&gN.throwErr(gN.ERR_NCHAR_CS_NOT_SUPPORTED,this.nCharsetId)}};T(Vo,"Capabilities");var Mo=Vo;LN.exports=Mo});var FN=I((BC,VN)=>{"use strict";var{BaseBuffer:YN}=Ss(),{Buffer:ft}=require("buffer"),we=Ee(),UN=xr(),BN=Qs(),MN=Cr(),ii=U(),Os=ft.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/","utf8"),_P=2048,oP=8,wN=11,bo=class bo{constructor(e){this.allocLen=e;let t=e%we.CHUNKED_BYTES_CHUNK_SIZE;t>0&&(this.allocLen+=we.CHUNKED_BYTES_CHUNK_SIZE-t),this.buf=ft.allocUnsafe(this.allocLen),this.actualLen=0}};T(bo,"BytesChunk");var ni=bo,Go=class Go{constructor(){this.chunks=[]}endChunkedRead(){if(this.chunks.length>1){let t=0;for(let n of this.chunks)t+=n.actualLen;let s=0,r=new ni(t);for(let n of this.chunks)n.buf.copy(r.buf,s,0,n.actualLen),s+=n.actualLen;r.actualLen=t,this.chunks=[r]}let e=this.chunks[0];return e.buf.subarray(0,e.actualLen)}getBuf(e){let t;this.chunks.length>0&&(t=this.chunks[this.chunks.length-1],t.allocLen-t.actualLen<e&&(t=void 0)),t||(t=new ni(e),this.chunks.push(t));let s=t.buf.subarray(t.actualLen,t.actualLen+e);return t.actualLen+=e,s}startChunkedRead(){this.chunks.length>0&&(this.chunks=this.chunks.splice(0,1),this.chunks[0].actualLen=0)}};T(Go,"ChunkedBytesBuffer");var Fo=Go,Ho=class Ho extends YN{constructor(e,t){super(),this.nsi=e,this.caps=t,this.chunkedBytesBuf=new Fo}_readBytesWithLength(e){if(e!==we.TNS_LONG_LENGTH_INDICATOR)return this.readBytes(e);for(this.chunkedBytesBuf.startChunkedRead();;){let t=this.readUB4();if(t===0)break;this.readBytes(t,!0)}return this.chunkedBytesBuf.endChunkedRead()}skipBytes(e){this.pos===this.size&&this.receivePacket();let t=this.numBytesLeft();if(e<=t){this.pos+=e;return}for(e-=t;e>0;){this.receivePacket();let s=Math.min(e,this.size-this.pos);this.pos+=s,e-=s}}readBytes(e,t=!1){this.pos===this.size&&this.receivePacket();let s=this.numBytesLeft();if(e<=s){let o;return t?(o=this.chunkedBytesBuf.getBuf(e),this.buf.copy(o,0,this.pos,this.pos+e)):o=this.buf.subarray(this.pos,this.pos+e),this.pos+=e,o}let r;t?r=this.chunkedBytesBuf.getBuf(e):r=ft.allocUnsafe(e);let n=0;for(this.buf.copy(r,n,this.pos,this.pos+s),n+=s,e-=s;e>0;){this.receivePacket();let o=Math.min(e,this.size-this.pos);this.buf.copy(r,n,this.pos,this.pos+o),this.pos+=o,n+=o,e-=o}return r}receivePacket(){if(this.savedPacketPos===this.savedPackets.length){let e=this.nsi.syncRecvPacket();if(!e||this.nsi.isBreak)throw new BN.OutOfPacketsError;this.savedPackets.push(e)}this.startPacket(this.savedPackets[this.savedPacketPos++])}restorePoint(){this.savedPacketPos=0,this.startPacket(this.savedPackets[this.savedPacketPos++]),this.pos=this.savedPos}savePoint(){this.savedPackets?this.savedPackets=this.savedPackets.splice(this.savedPacketPos-1):this.savedPackets=[this.packet],this.savedPacketPos=1,this.savedPos=this.pos}startPacket(e){this.packet=e,this.buf=e.buf,this.pos=10,this.size=e.buf.length,this.packetNum=e.num}async waitForPackets(e=!1){let t=await this.nsi.recvPacket();if(this.savedPackets?this.savedPackets.push(t):(this.savedPackets=[t],this.savedPacketPos=0),e&&this.nsi.endOfRequestSupport)for(;t.type===we.TNS_PACKET_TYPE_DATA&&!(t.buf.readUInt16BE(8)&we.TNS_DATA_FLAGS_END_OF_REQUEST||t.buf.length===wN&&t.buf[wN-1]===we.TNS_MSG_TYPE_END_OF_REQUEST);)t=await this.nsi.recvPacket(),this.savedPackets.push(t);this.startPacket(this.savedPackets[this.savedPacketPos++])}readOson(){if(this.readUB4()===0)return null;this.skipUB8(),this.skipUB4();let t=new UN.OsonDecoder(this.readBytesWithLength());return this.skipBytesChunked(),t.decode()}readURowID(){let e=0,t=1,s=this.readBytesWithLength();if(s===null)return null;s=this.readBytesWithLength();let r=s.length;if(s&&s[0]===1){let c=s.readUInt32BE(1),E=s.readUInt16BE(5),l=s.readUInt32BE(7),u=s.readUInt16BE(11);return BN.encodeRowID({rba:c,partitionID:E,blockNum:l,slotNum:u})}let n=Math.floor(r/3)*4,o=r%3;o===1?n+=1:o===2&&(n+=3);let a=ft.allocUnsafe(n);for(r-=1,a[0]=42,e+=1;r>0;){let c=s[t]>>2;if(a[e]=Os[c],e+=1,c=(s[t]&3)<<4,r==1){a[e]=Os[c];break}if(t+=1,c|=(s[t]&240)>>4,a[e]=Os[c],e+=1,c=(s[t]&15)<<2,r==2){a[e]=Os[c];break}t+=1,c|=(s[t]&192)>>6,a[e]=Os[c],e+=1,c=s[t]&63,a[e]=Os[c],e+=1,t+=1,r-=3}return a.toString("utf-8")}readRowID(){let e=this.readUB4(),t=this.readUB2();this.skipUB1();let s=this.readUB4(),r=this.readUB2();return{rba:e,partitionID:t,blockNum:s,slotNum:r}}readVector(){if(this.readUB4()===0)return null;this.skipUB8(),this.skipUB4();let t=new MN.VectorDecoder(this.readBytesWithLength());return this.skipBytesChunked(),t.decode()}skipBytesChunked(){let e=this.readUInt8();if(!(e===0||e===we.TNS_NULL_LENGTH_INDICATOR))if(e!==we.TNS_LONG_LENGTH_INDICATOR)this.skipBytes(e);else for(;;){let t=this.readUB4();if(t===0)break;this.skipBytes(t)}}readNullTerminatedBytes(e=50){let t=0,s=ft.allocUnsafe(e);for(;t<e&&(s[t]=this.readUInt8(),s[t]!==0);)t=t+1;if(t===e){let r=`Byte Arrray Exceeded MaxSize ${e}`;ii.throwErr(ii.ERR_INTERNAL,r)}return s.subarray(0,t+1)}};T(Ho,"ReadPacket");var xo=Ho,qo=class qo extends YN{constructor(e,t,s){super(e.sAtts.sdu),this.size=this.maxSize,this.isLargeSDU=e.sAtts.version>=we.TNS_VERSION_MIN_LARGE_SDU,this.protocol=s,this.packetType=we.TNS_PACKET_TYPE_DATA,this.caps=t,this.nsi=e}_grow(){this._sendPacket()}_sendPacket(e=!1){let t=this.pos;this.pos=0,this.isLargeSDU?this.writeUInt32BE(t):(this.writeUInt16BE(t),this.writeUInt16BE(0)),this.writeUInt8(this.packetType),this.writeUInt8(0),this.writeUInt16BE(0);let s=this.buf.subarray(0,t);e?this.buf.writeUInt16BE(_P,oP):(s=ft.from(s),this.startPacket()),this.nsi.ntAdapter||ii.throwErr(ii.ERR_INVALID_CONNECTION),this.nsi.ntAdapter.send(s)}startPacket(e=0){this.pos=we.PACKET_HEADER_SIZE,this.packetType===we.TNS_PACKET_TYPE_DATA&&this.writeUInt16BE(e)}startRequest(e,t=0){this.packetType=e,this.startPacket(t)}endRequest(){this.pos>we.PACKET_HEADER_SIZE&&this._sendPacket(!0)}writeKeyValue(e,t,s=0){let r=ft.byteLength(e),n=ft.byteLength(t);this.writeUB4(r),this.writeBytesWithLength(ft.from(e)),this.writeUB4(n),n>0&&this.writeBytesWithLength(ft.from(t)),this.writeUB4(s)}writeOson(e,t){let r=new UN.OsonEncoder().encode(e,t);this.writeQLocator(r.length),this.writeBytesWithLength(r)}writeSeqNum(){this.writeUInt8(this.protocol.sequenceId),this.protocol.sequenceId=(this.protocol.sequenceId+1)%256}writeVector(e){let s=new MN.VectorEncoder().encode(e);this.writeQLocator(s.length),this.writeBytesWithLength(s)}writeQLocator(e){this.writeUB4(40),this.writeUInt8(40),this.writeUInt16BE(38),this.writeUInt16BE(we.TNS_LOB_QLOCATOR_VERSION),this.writeUInt8(we.TNS_LOB_LOC_FLAGS_VALUE_BASED|we.TNS_LOB_LOC_FLAGS_BLOB|we.TNS_LOB_LOC_FLAGS_ABSTRACT),this.writeUInt8(we.TNS_LOB_LOC_FLAGS_INIT),this.writeUInt16BE(0),this.writeUInt16BE(1),this.writeUInt64BE(e),this.writeUInt16BE(0),this.writeUInt16BE(0),this.writeUInt16BE(0),this.writeUInt64BE(0),this.writeUInt64BE(0)}};T(qo,"WritePacket");var ko=qo;VN.exports={ReadPacket:xo,WritePacket:ko}});var kN=I((YC,xN)=>{"use strict";var gs=Ee(),aP=yN(),{WritePacket:TP,ReadPacket:cP}=FN(),ts=U(),EP=Qs(),Ko=class Ko{constructor(e){this._breakInProgress=!1,this.txnInProgress=!1,this.connInProgress=!0,this.nsi=e.nscon,this.sequenceId=1,this.caps=new aP(e.nscon),this.writeBuf=new TP(e.nscon,this.caps,this),this.readBuf=new cP(e.nscon,this.caps),this.callTimeout=0}async _decodeMessage(e){for(e.preProcess(),await this.readBuf.waitForPackets(!0);;){this.nsi.isBreak&&(await this.resetMessage(),delete this.readBuf.savedPackets,await this.readBuf.waitForPackets());try{e.decode(this.readBuf);break}catch(t){if(t instanceof EP.OutOfPacketsError){this.nsi.isBreak||(await this.readBuf.waitForPackets(),this.readBuf.restorePoint());continue}throw t}}await e.postProcess()}async _encodeMessage(e){let t=this.nsi.ntAdapter;for(this.writeBuf.startRequest(gs.TNS_PACKET_TYPE_DATA);e.encode(this.writeBuf);)await t.pauseWrite();this.writeBuf.endRequest()}async _recoverFromError(e,t){try{this.breakMessage(),this._breakInProgress=!1,await this.resetMessage(),await this.readBuf.waitForPackets(),t.decode(this.readBuf)}catch(s){this.nsi.disconnect();let r=ts.getErr(ts.ERR_CONNECTION_CLOSED);throw e.message=r.message+`
Error recovery failed: `+s.message+`
Original error: `+e.message,e}}async _processMessage(e){let t,s=!1;try{this.callTimeout>0&&(t=setTimeout(()=>{s=!0,this.breakMessage()},this.callTimeout)),await this._encodeMessage(e),e.messageType!==gs.TNS_MSG_TYPE_ONEWAY_FN&&await this._decodeMessage(e)}catch(r){throw!this.connInProgress&&r.code!==ts.ERR_CONNECTION_CLOSED_CODE&&await this._recoverFromError(r,e),r}finally{clearTimeout(t)}if(e.flushOutBinds&&await this.flushOutBindMessage(e),this.txnInProgress=!!(e.callStatus&gs.TNS_EOCS_FLAGS_TXN_IN_PROGRESS),e.callStatus&gs.TNS_EOCS_FLAGS_SESS_RELEASE&&e.connection.statementCache.clearCursors(),e.errorOccurred){if(s&&ts.throwErr(ts.ERR_CALL_TIMEOUT_EXCEEDED,this.callTimeout),e.retry)return e.errorOccurred=!1,await this._processMessage(e);let r=new Error(e.errorInfo.message);throw r.offset=e.errorInfo.pos,r.errorNum=e.errorInfo.num,r=ts.transformErr(r),r.code===ts.ERR_CONNECTION_CLOSED_CODE&&this.nsi.disconnect(),r}}async flushOutBindMessage(e){this.writeBuf.startRequest(gs.TNS_PACKET_TYPE_DATA),this.writeBuf.writeUInt8(gs.TNS_MSG_TYPE_FLUSH_OUT_BINDS),this.writeBuf.endRequest(),await this._decodeMessage(e)}breakMessage(){this._breakInProgress=!0,this.nsi.sendBreak()}async resetMessage(){await this.nsi.reset()}};T(Ko,"Protocol");var vo=Ko;xN.exports=vo});var Ls=I((MC,bN)=>{bN.exports={NSPTCN:1,NSPTAC:2,NSPTAK:3,NSPTRF:4,NSPTRD:5,NSPTDA:6,NSPTNL:7,NSPTAB:9,NSPTRS:11,NSPTMK:12,NSPTAT:13,NSPTCNL:14,NSPTDD:15,NSPTHI:19,NSPHDLEN:0,NSPHDPSM:2,NSPHDTYP:4,NSPHDFLGS:5,NSPHDHSM:6,NSPSIZHD:8,NSPFSID:1,NSPFRDS:2,NSPFRDR:4,NSPFLSD:32,NO_HEADER_FLAGS:0,NSPFSRN:8,NSPCNVSN:8,NSPCNLOV:10,NSPCNOPT:12,NSPCNSDU:14,NSPCNTDU:16,NSPCNNTC:18,NSPCNTNA:20,NSPCNONE:22,NSPCNLEN:24,NSPCNOFF:26,NSPCNMXC:28,NSPCNFL0:32,NSPCNFL1:33,NSPCNTMO:50,NSPCNTCK:52,NSPCNADL:54,NSPCNAOF:56,NSPCNLSD:58,NSPCNLTD:62,NSPCNCFL:66,NSPCNCFL2:70,NSPCNDAT:74,NSPMXCDATA:230,NSINAWANTED:1,NSINAINTCHG:2,NSINADISABLEDFORCONNECTION:4,NSINANOSERVICES:8,NSINAREQUIRED:16,NSINAAUTHWANTED:32,NSISUPSECRENEG:128,NSGDONTCARE:1,NSGHDX:2,NSGFDX:4,NSGHDRCHKSUM:8,NSGPAKCHKSUM:16,NSGBROKEN:32,NSGUSEVIO:64,NSGOSAUTHOK:128,NSGSENDATTN:512,NSGRECVATTN:1024,NSGNOATTNPR:2048,NSGRAW:4096,TNS_VERSION_DESIRED:319,TNS_VERSION_MINIMUM:300,TNS_VERSION_MIN_DATA_FLAGS:318,TNS_VERSION_MIN_END_OF_RESPONSE:319,TNS_UUID_OFFSET:45,NSPACVSN:8,NSPACOPT:10,NSPACSDU:12,NSPACTDU:14,NSPACONE:16,NSPACLEN:18,NSPACOFF:20,NSPACFL0:22,NSPACFL1:23,NSPACTMO:24,NSPACTCK:26,NSPACADL:28,NSPACAOF:30,NSPACLSD:32,NSPACLTD:36,NSPACCFL:40,NSPACFL2:41,NSPACV310DAT:32,NSPACV315DAT:41,NSPRFURS:8,NSPRFSRS:9,NSPRFLEN:10,NSPRFDAT:12,NSPACCFON:128,NSPACCFAT:64,NSPACCFNT:2,NSPACOOB:1,NSGPCHKSCMD:16777216,TNS_ACCEPT_FLAG_HAS_END_OF_REQUEST:33554432,TNS_ACCEPT_FLAG_FAST_AUTH:268435456,NSPRDLEN:8,NSPRDDAT:10,NSPDAFLG:8,NSPDADAT:10,NSPDAFEOF:64,NSPMKTYP:8,NSPMKODT:9,NSPMKDAT:10,NSPMKTD0:0,NSPMKTD1:1,NSPMKTAT:2,NIQBMARK:1,NIQRMARK:2,NIQIMARK:3,NSPCTLCMD:8,NSPCTLDAT:10,NSPCTL_SERR:8,NSPCTL_CLRATTN:9,NSPDFSDULN:8192,NSPABSSDULN:2097152,NSPMXSDULN:65535,NSPMNSDULN:512,NSPDFTDULN:2097152,NSPMXTDULN:2097152,NSPMNTDULN:255,NSFIMM:64,DISABLE_OOB_STR:"DISABLE_OOB",EXPIRE_TIME:"EXPIRE_TIME",PEM_WALLET_FILE_NAME:"ewallet.pem",NT_MOREDATA:1,NS_MOREDATA:2,SVCNAME:3,SERVERTYPE:4,REMOTEADDR:5,HEALTHCHECK:6,CONNCLASS:7,PURITY:8,SID:9,NSNOBLOCK:1}});var qN=I((VC,HN)=>{"use strict";var _i=require("buffer").Buffer,g=Ls(),Ht=U(),lP=230,GN=74;function hP(i,e,t=0){this.connectData=i,this.connectDataLen=i.length,this.overflow=!1;let s;this.connectDataLen<=lP?s=GN+this.connectDataLen:(s=GN,this.overflow=!0),this.buf=_i.allocUnsafe(s).fill(0),this.buf.writeUInt16BE(s,g.NSPHDLEN),this.buf.writeUInt8(t,g.NSPHDFLGS),this.buf.writeUInt8(g.NSPTCN,g.NSPHDTYP),this.buf.writeUInt16BE(g.TNS_VERSION_DESIRED,g.NSPCNVSN),this.buf.writeUInt16BE(g.TNS_VERSION_MINIMUM,g.NSPCNLOV);let r=g.NSGDONTCARE;this.buf.writeUInt16BE(r,g.NSPCNOPT),e.sdu>g.NSPMXSDULN?this.buf.writeUInt16BE(g.NSPMXSDULN,g.NSPCNSDU):this.buf.writeUInt16BE(e.sdu,g.NSPCNSDU),e.tdu>g.NSPMXSDULN?this.buf.writeUInt16BE(g.NSPMXSDULN,g.NSPCNTDU):this.buf.writeUInt16BE(e.tdu,g.NSPCNTDU),this.buf.writeUInt16BE(e.ntCha,g.NSPCNNTC),this.buf.writeUInt16BE(1,g.NSPCNONE),this.buf.writeUInt16BE(this.connectDataLen,g.NSPCNLEN),this.buf.writeUInt16BE(g.NSPCNDAT,g.NSPCNOFF),this.buf.writeUInt8(g.NSISUPSECRENEG|g.NSINADISABLEDFORCONNECTION,g.NSPCNFL0),this.buf.writeUInt8(g.NSISUPSECRENEG|g.NSINADISABLEDFORCONNECTION,g.NSPCNFL1),this.buf.writeUInt16BE(0,g.NSPCNTMO),this.buf.writeUInt16BE(0,g.NSPCNTCK),this.buf.writeUInt16BE(0,g.NSPCNADL),this.buf.writeUInt16BE(0,g.NSPCNAOF),this.buf.writeUInt32BE(e.sdu,g.NSPCNLSD),this.buf.writeUInt32BE(e.tdu,g.NSPCNLTD),this.buf.writeUInt32BE(0,g.NSPCNCFL),this.buf.writeUInt32BE(0,g.NSPCNCFL2),!this.overflow&&this.connectDataLen&&this.buf.write(i.toString("ascii"),g.NSPCNDAT,this.connectDataLen,"ascii")}T(hP,"ConnectPacket");function NP(i){this.dataPtr=0,this.dataLen=0,this.offset=0,this.len=0,this.bufLen=0,this.createPacket=function(e){this.dataPtr=g.NSPDADAT,this.dataLen=g.NSPDADAT,this.buf=_i.allocUnsafe(e).fill(0),this.buf.writeUInt8(0,g.NSPHDFLGS),this.buf.writeUInt8(g.NSPTDA,g.NSPHDTYP),this.bufLen=e},this.fillBuf=function(e,t,s,r=0){let n;return this.buf||this.createPacket(s+g.NSPDADAT),s>this.bufLen-this.dataLen?n=this.bufLen-this.dataLen:n=s,n&&e.copy(this.buf,this.dataLen,t,t+n),this.dataLen+=n,this.prepare2Send(r),n},this.prepare2Send=function(e=0){i?this.buf.writeUInt32BE(this.dataLen,g.NSPHDLEN):this.buf.writeUInt16BE(this.dataLen,g.NSPHDLEN),this.buf.writeUInt16BE(e,g.NSPDAFLG),this.dataBuf=this.buf.subarray(0,this.dataLen)},this.fromPacket=function(e){this.buf=e.buf,this.dataLen=e.buf.length,this.dataPtr=g.NSPDADAT,this.offset=this.dataPtr,this.len=this.dataLen,e.dataOffset=this.dataPtr}}T(NP,"DataPacket");function SP(i,e){this.buf=i.buf,this.len=i.buf.length,e.version=i.buf.readUInt16BE(g.NSPACVSN),e.options=i.buf.readUInt16BE(g.NSPACOPT),e.sdu=i.buf.readUInt16BE(g.NSPACSDU),e.tdu=i.buf.readUInt16BE(g.NSPACTDU),e.version>=315&&(e.sdu=i.buf.readUInt32BE(g.NSPACLSD),e.tdu=i.buf.readUInt32BE(g.NSPACLTD),e.largeSDU=!0),this.flag0=i.buf.readUInt8(g.NSPACFL0),this.flag1=i.buf.readUInt8(g.NSPACFL1),e.version>=g.TNS_VERSION_MIN_DATA_FLAGS&&(i.flags=i.buf.readUInt32BE(g.NSPACFL2))}T(SP,"AcceptPacket");function uP(i){this.buf=i.buf,this.len=i.buf.length,this.userReason=i.buf.readUInt8(g.NSPRFURS),this.systemReason=i.buf.readUInt8(g.NSPRFURS),this.dataLen=i.buf.readUInt16BE(g.NSPRFLEN),this.dataOff=g.NSPRFDAT,this.len>this.dataOff?(this.dataBuf=this.buf.toString("ascii",this.dataOff,this.len),this.overflow=!1):this.overflow=!0}T(uP,"RefusePacket");function AP(i){this.buf=i.buf,this.len=i.buf.length,this.flags=i.flags,this.dataLen=i.buf.readUInt16BE(g.NSPRDLEN),this.dataOff=g.NSPRDDAT,this.len>this.dataOff?(this.dataBuf=this.buf.subarray(this.dataOff,this.len),this.overflow=!1):this.overflow=!0}T(AP,"RedirectPacket");function fP(i){this.len=g.NSPMKDAT+1,this.buf=_i.allocUnsafe(g.NSPMKDAT+1).fill(0),i?this.buf.writeUInt32BE(this.len,g.NSPHDLEN):this.buf.writeUInt16BE(this.len,g.NSPHDLEN),this.buf.writeUInt8(0,g.NSPHDFLGS),this.buf.writeUInt8(g.NSPTMK,g.NSPHDTYP),this.prepare=function(e,t){this.buf.writeUInt8(e,g.NSPMKTYP),this.buf.writeUInt8(t,g.NSPMKDAT)},this.fromPacket=function(e,t){switch(this.type=e.buf.readUInt8(g.NSPMKTYP),this.type){case g.NSPMKTD0:t.isBreak=!0;break;case g.NSPMKTD1:this.data=e.buf.readUInt8(g.NSPMKDAT),t.isBreak=!0,this.data==g.NIQRMARK&&(t.isReset=!0,t.isBreak=!0);break;default:Ht.throwErr(Ht.ERR_INVALID_PACKET)}}}T(fP,"MarkerPacket");function dP(){this.clear=function(){this.errno=0,this.notif=null,this.notifLen=0,this.cmd=0},this.fromPacket=function(i){let r,n,o;switch(this.cmd=i.buf.readUInt16BE(g.NSPCTLCMD),this.cmd){case g.NSPCTL_SERR:r=i.buf.readUInt32BE(g.NSPCTLDAT),n=i.buf.readUInt32BE(g.NSPCTLDAT+4),o=i.buf.readUInt32BE(g.NSPCTLDAT+8),n==12572?this.errno=n:n==12573?(this.errno=n,this.notifLen=o,this.notif=_i.allocUnsafe(o+1).fill(0),this.buf.copy(this.notif,0,g.NSPCTLDAT+12,g.NSPCTLDAT+12+o)):(this.errno=n,r==22?Ht.throwErr(Ht.ERR_CONNECTION_INBAND,"ORA-"+n):Ht.throwErr(Ht.ERR_CONNECTION_INBAND,"TNS-"+n));break;default:Ht.throwErr(Ht.ERR_INVALID_PACKET)}}}T(dP,"ControlPacket");HN.exports={ConnectPacket:hP,DataPacket:NP,AcceptPacket:SP,RefusePacket:uP,RedirectPacket:AP,MarkerPacket:fP,ControlPacket:dP}});var ys=I((xC,JN)=>{"use strict";var se=U(),vN=0,$s=1,Wo=2,Xo=3,oi=4,sa=class sa{constructor(e){this.name=e,this.listType=Xo,this.rhsType=vN}set setAtom(e){this._containsComment(e)&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),this.rhsType=$s,this.list=null,this.atom=e}_containsComment(e){for(let t=0;t<e.length;t++)if(e.charAt(t)=="#")if(t!=0){if(e.charAt(t-1)=="\\")continue;return!0}else return!0;return!1}getListSize(){return this.list==null?0:this.list.length}getListElement(e){return this.list==null?null:this.list[e]}addListElement(e){this.list==null&&(this.rhsType=Wo,this.list=new Array,this.atom=null),this.list.push(e),e.parent=this}removeListElement(e){this.list!=null&&(this.list.splice(e,1),this.getListSize==0&&(this.list=null,this.rhsType=vN))}_space(e){var t="";for(let s=0;s<e;s++)t+=" ";return t}valueToString(){let e="";if(this.rhsType==$s)e=e+this.atom;else if(this.rhsType==Wo){if(this.listType==Xo)for(let t=0;t<this.getListSize();t++)e=e+this.getListElement(t).toString();else if(this.listType==oi)for(let t=0;t<this.getListSize();t++){let s=this.getListElement(t);e=e+s.name,t!=this.getListSize()-1&&(e=e+", ")}}return e}toString(){let e="("+this.name+"=";if(this.rhsType==$s)e=e+this.atom;else if(this.rhsType==Wo){if(this.listType==Xo)for(let t=0;t<this.getListSize();t++)e=e+this.getListElement(t).toString();else if(this.listType==oi){e=e+" (";for(let t=0;t<this.getListSize();t++){let s=this.getListElement(t);e=e+s.name,t!=this.getListSize()-1&&(e=e+", ")}e=e+")"}}return e=e+")",e}};T(sa,"NVPair");var ai=sa,PP=0,Ti=1,Zo=2,qt=3,WN=4,ci=8,pP=9,zo="(",Qo=")",Jo=",",jo="=",RP="\\",KN='"',mP="'",IP="%",DP=" ",CP="	",OP=`
`,gP="\r",ra=class ra{constructor(){this.tkType=null,this.tkValue=null,this.numTokens=0,this.tkPos=0}_isWhiteSpace(e){return e==DP||e==CP||e==OP||e==gP}_trimWhiteSpace(e){let t=e.length,s=0,r=t;for(;s<t&&this._isWhiteSpace(e.charAt(s));)s++;for(;s<r&&this._isWhiteSpace(e.charAt(r-1));)r--;return e.substring(s,r)}parseTokens(e){this.numTokens=0,this.tkPos=0,this.tkType=new Array,this.tkValue=new Array;let t=e.length,s=!1,r=new Array;r=Array.from(e);let n=0;for(;n<t;){for(;n<t&&this._isWhiteSpace(r[n]);)n++;if(n<t)switch(r[n]){case zo:s=!1,this._addToken(Ti,zo),n++;break;case jo:s=!0,this._addToken(WN,jo),n++;break;case Qo:s=!1,this._addToken(Zo,Qo),n++;break;case Jo:s=!1,this._addToken(qt,Jo),n++;break;default:{let o=n,a=-1,c=!1,E=KN;for((r[n]==mP||r[n]==KN)&&(c=!0,E=r[n],n++,o=n);n<t;){if(r[n]==RP){n+=2;continue}if(c){if(r[n]==E){n++,a=n-1;break}}else if(r[n]==zo||r[n]==Qo||r[n]==Jo&&!s||r[n]==jo&&!s){a=n;break}n++}a==-1&&(a=n),this._addToken(ci,e.substring(o,a).trim());break}}}return this._addToken(pP,IP),!0}getToken(){if(this.tkType==null&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens)return Number(this.tkType[this.tkPos]);se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX)}popToken(){let e=PP;return this.tkType==null&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=Number(this.tkType[this.tkPos++]):se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),e}getLiteral(){let e=null;return this.tkValue==null&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=String(this.tkValue[this.tkPos]):se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),e}popLiteral(){let e=null;return this.tkValue==null&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=String(this.tkValue[this.tkPos++]):se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),e}eatToken(){this.tkPos<this.numTokens&&this.tkPos++}toString(){if(this.tkType==null)return"*NO TOKENS*";let e="Tokens";for(let t=0;t<this.numTokens;t++)e=e+" : "+this.tkValue[t];return e}_addToken(e,t){this.tkType.push(Number(e)),this.tkValue.push(String(t)),this.numTokens++}};T(ra,"NVTokens");var $o=ra;function LP(i){let e=new $o;return e.parseTokens(i),yP(e)}T(LP,"createNVPair");function yP(i){let e=i.getToken();i.eatToken(),e!=Ti&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=ta(i),s=new ai(t);if((e=i.getToken())==qt){for(;e==ci||e==qt;)t+=i.popLiteral(),e=i.getToken();return s.name=t,ea(s,i)}return ea(s,i)}T(yP,"readTopLevelNVPair");function BP(i){let e=i.getToken();i.eatToken(),e==Ti||e==qt||se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=ta(i),s=new ai(t);return ea(s,i)}T(BP,"readNVPair");function ea(i,e){let t=e.getToken();switch(t){case WN:if(e.eatToken(),t=e.getToken(),t==ci){let s=ta(e);i.setAtom=s}else XN(e,i);break;case qt:case Zo:i.setAtom=i.name;break;default:se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX)}return t=e.getToken(),t==Zo?e.eatToken():t!=qt&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),i}T(ea,"readRightHandSide");function ta(i){return i.getToken()!=ci&&se.throwErr(se.ERR_INVALID_CONNECT_STRING_SYNTAX),i.popLiteral()}T(ta,"readNVLiteral");function XN(i,e){let t=i.getToken();if(!(t==Ti||t==qt))return;let s=BP(i);e.addListElement(s),(t==qt||s.name==s.atom)&&e.getListType!=oi&&(e.setListType=oi),XN(i,e)}T(XN,"readNVList");function zN(i,e){if(!i)return null;if(e.toUpperCase()==i.name.toUpperCase())return i;if(i.getRHSType==$s)return null;for(let t=0;t<i.getListSize();t++){let s=zN(i.getListElement(t),e);if(s!==null)return s}return null}T(zN,"findNVPairRecurse");function QN(i,e){if(!i||i.getRHSType==$s)return null;for(let t=0;t<i.getListSize();t++){let s=i.getListElement(t);if(e.toUpperCase()==s.name.toUpperCase())return s}return null}T(QN,"findNVPair");function wP(i,e){if(!i||e[0].toUpperCase()!=i.name.toUpperCase())return null;let t=i,s=e.length;for(let r=1;r<s;r++)if(t=QN(t,e[r]),!t)return null;return t.atom==null?t.list==null?null:t.list.toString():t.atom.toString()}T(wP,"findValue");JN.exports={findNVPairRecurse:zN,createNVPair:LP,findNVPair:QN,findValue:wP}});var $N=I((bC,ZN)=>{"use strict";var{Buffer:YP}=require("buffer"),UP=require("net"),jN=require("process"),er=require("tls"),MP=require("http"),VP=require("timers"),ia=Ls(),Se=U(),{findValue:FP}=ys(),xP=8,kP=1521,bP=80,GP=4878,HP=1,_a=class _a{constructor(e){this.atts=e,this.cha=GP,this.connected=!1,this.err=!1,this.needsDrain=!1,this.numPacketsSinceLastWait=0,this.secure=!1,this.largeSDU=!1,this.streamNum=HP++,this.packetNum=1,this.doDNMatch=!0}dnMatch(e,t){if(this.atts.sslServerDNMatch&&this.doDNMatch){let s=T(r=>r.split(",").map(n=>n.split("=").map(o=>o.trim())).reduce((n,o)=>(n[o[0]]=o[1],n),{}),"toObject");if(this.atts.sslServerCertDN){let r=s(this.atts.sslServerCertDN);if(Object.keys(r).length==Object.keys(t.subject).length){for(let n in r)if(r[n]!=t.subject[n])return Se.getErr(Se.ERR_TLS_DNMATCH_FAILURE)}else return Se.getErr(Se.ERR_TLS_DNMATCH_FAILURE)}else if(er.checkServerIdentity(this.hostName,t)&&(!this.originHost||er.checkServerIdentity(this.originHost,t)))if(this.atts.sslAllowWeakDNMatch){if(FP(this.atts.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"])!=t.subject.CN)return Se.getErr(Se.ERR_TLS_DNMATCH_FAILURE)}else{let r=this.hostName+" "+(this.originHost?"or "+this.originHost:"");return Se.getErr(Se.ERR_TLS_HOSTMATCH_FAILURE,r)}}}async tlsConnect(e,t){this.stream.removeAllListeners();let s,r={host:this.host,socket:t,rejectUnauthorized:!0,secureContext:e,enableTrace:!1,checkServerIdentity:this.dnMatch.bind(this)};await new Promise(n=>{this.stream=er.connect(r,()=>{this.stream.authorized||(s="server certificate unauthorized"),n()}).on("error",o=>{s=o.message,n()})}),s&&Se.throwErr(Se.ERR_TLS_AUTH_FAILURE,this.host,this.port,this.atts.connectionId,s),this.connStream=t}async ntConnect(e){e.port||(e.port=kP);let t,s,r,n=e.httpsProxy||this.atts.httpsProxy,o=e.httpsProxyPort||this.atts.httpsProxyPort;await new Promise(a=>{n?(o||(o=bP),r=MP.request({host:n,port:o,method:"CONNECT",path:e.host+":"+e.port}),r.once("connect",(c,E)=>{c.statusCode==200?(this.connected=!0,this.stream=E):s=c.statusCode,a()}),r.once("error",c=>{s=c.message,a()}),r.end()):(this.stream=UP.connect(e.port,e.host,()=>{this.connected=!0,a()}),this.stream.once("error",c=>{t=c.message,a()}))}),r&&r.removeAllListeners(),this.connected||(s?Se.throwErr(Se.ERR_PROXY_CONNECTION_FAILURE,n,o,this.atts.connectionId,s):Se.throwErr(Se.ERR_CONNECTION_INCOMPLETE,this.host,this.port,this.atts.connectionId,t))}async connect(e){this.originHost=e.originHost,this.host=e.host,this.hostName=e.hostname,this.port=e.port;try{if(await this.ntConnect(e),(this.atts.expireTime||this.atts.enableDCD)&&(this.atts.expireTime?this.stream.setKeepAlive(!0,this.atts.expireTime):this.stream.setKeepAlive(!0)),this.atts.tcpNoDelay&&this.stream.setNoDelay(!0),e.protocol.toUpperCase()=="TCPS"){let t;this.secure=!0,this.atts.sslAllowWeakDNMatch&&(this.doDNMatch=!1);try{t=er.createSecureContext({cert:this.atts.wallet,key:this.atts.wallet,passphrase:this.atts.walletPassword,ca:this.atts.wallet})}catch{Se.throwErr(Se.ERR_TLS_INIT_FAILURE)}await this.tlsConnect(t,this.stream)}}finally{this.stream&&this.setupEventHandlers()}}disconnect(e){this.connected&&!this.err&&(e==ia.NSFIMM?this.stream.destroy():this.stream.end()),this.stream=null,this.connected=!1,this.drainWaiter=null,this.readWaiter=null}getPacketDump(e){let t=[];for(let s=0;s<e.length;s+=8){let r=s.toString().padStart(4,"0"),n=e.slice(s,s+8),o=[],a=[];for(let l of n)o.push(l.toString(16).toUpperCase().padStart(2,"0")),l>32&&l<127?a.push(String.fromCharCode(l)):a.push(".");for(;o.length<8;)o.push("  "),a.push(" ");let c=o.join(" "),E=a.join("");t.push(`${r} : ${c} |${E}|`)}return t.join(`
`)}printPacket(e,t){let s=new Date,r=`${s.getFullYear()}-${s.getMonth().toString().padStart(2,"0")}-${s.getDay().toString().padStart(2,"0")} ${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}:${s.getSeconds().toString().padStart(2,"0")}.${s.getMilliseconds().toString().padStart(3,"0")}`,n=this.getPacketDump(t);console.log(`${r} ${e}:
${n}
`)}checkErr(){if(!this.connected||this.err){let e;this.savedErr?e=Se.getErr(Se.ERR_CONNECTION_LOSTCONTACT,this.host,this.port,this.atts.connectionId,this.savedErr.message):e=Se.getErr(Se.ERR_CONNECTION_EOF,this.host,this.port,this.atts.connectionId);let t=Se.getErr(Se.ERR_CONNECTION_CLOSED);throw t.message=t.message+`
`+e.message,t}}send(e){this.checkErr(),jN.env.NODE_ORACLEDB_DEBUG_PACKETS&&this.printPacket(`Sending packet ${this.packetNum} on stream ${this.streamNum}`,e),this.stream.write(e,s=>{s&&(this.savedErr=s,this.err=!0,this._notifyWaiters())})||(this.needsDrain=!0),this.numPacketsSinceLastWait++,this.packetNum++}shouldPauseWrite(){return this.needsDrain||this.numPacketsSinceLastWait>=100}async pauseWrite(){this.checkErr(),this.needsDrain?(await new Promise(e=>{this.drainWaiter=e}),this.checkErr()):await new Promise(e=>VP.setImmediate(e)),this.numPacketsSinceLastWait=0}startRead(){let e;this.packets=[],this.stream.on("data",t=>{for(e?e=YP.concat([e,t]):e=t;e.length>=xP;){let s;if(this.largeSDU?s=e.readUInt32BE():s=e.readUInt16BE(),s>e.length)break;let r={buf:e.subarray(0,s),type:e[4],flags:e[5],num:this.packetNum++};if(this.packets.push(r),this.readWaiter&&(this.readWaiter(),this.readWaiter=null),jN.env.NODE_ORACLEDB_DEBUG_PACKETS&&this.printPacket(`Receiving packet ${r.num} on stream ${this.streamNum}`,r.buf),s===e.length){e=null;break}else e=e.subarray(s)}})}syncReceive(){return this.packets.shift()}async receive(){return this.packets.length===0&&(this.checkErr(),await new Promise(e=>{this.readWaiter=e,this.numPacketsSinceLastWait=0}),this.checkErr()),this.packets.shift()}async renegTLS(){try{this.checkErr(),this.doDNMatch=!0;let e=er.createSecureContext({cert:this.atts.wallet,key:this.atts.wallet,passphrase:this.atts.walletPassword,ca:this.atts.wallet});await this.tlsConnect(e,this.connStream)}finally{this.setupEventHandlers()}}setupEventHandlers(){this.stream.removeAllListeners(),this.stream.on("error",e=>{this.savedErr=e,this.err=!0,this._notifyWaiters()}),this.stream.on("end",()=>{this.err=!0,this._notifyWaiters()}),this.stream.on("close",()=>{this.connected=!1,this._notifyWaiters()}),this.stream.on("drain",()=>{this.needsDrain=!1,this.drainWaiter&&(this.drainWaiter(),this.drainWaiter=null)})}getOption(e){switch(this.checkErr(),e){case ia.NT_MOREDATA:return this.packets.length>0;case ia.REMOTEADDR:{let t=this.secure?this.connStream:this.stream;return t.remoteAddress+":"+t.remotePort}default:Se.throwErr(Se.ERR_INTERNAL,"getOption not supported for opcode "+e)}}_notifyWaiters(){this.drainWaiter&&(this.drainWaiter(),this.drainWaiter=null),this.readWaiter&&(this.readWaiter(),this.readWaiter=null)}};T(_a,"NTTCP");var na=_a;ZN.exports=na});var sS=I((HC,tS)=>{"use strict";var qP=require("crypto"),vP=require("path"),eS=Ls(),KP=require("fs");async function WP(){return await new Promise((i,e)=>{qP.randomBytes(16,(t,s)=>{t?e(t):i(s)})})}T(WP,"genuuid");var aa=class aa{constructor(e){this.largeSDU=!1,this.tdu=eS.NSPDFTDULN,this.nt={},this.nt.tcpNoDelay=!0,this.uuid=e,this.nt.sslServerDNMatch=!0,this.nt.sslAllowWeakDNMatch=!1}setFrom(e){e&&(e.sdu>0&&(this.sdu=parseInt(e.sdu)),typeof e.walletLocation=="string"&&(this.nt.walletFile=vP.join(e.walletLocation,eS.PEM_WALLET_FILE_NAME)),typeof e.walletPassword=="string"&&(this.nt.walletPassword=e.walletPassword),typeof e.walletContent=="string"&&(this.nt.wallet=e.walletContent),e.expireTime>0&&(this.nt.expireTime=e.expireTime*1e3*60),e.connectTimeout>0&&(this.connectTimeout=e.connectTimeout*1e3),e.transportConnectTimeout>0&&(this.transportConnectTimeout=e.transportConnectTimeout*1e3),e.recvTimeout>0&&(this.recvTimeout=e.recvTimeout*1e3),e.sendTimeout>0&&(this.sendTimeout=e.sendTimeout*1e3),typeof e.connectionIdPrefix=="string"&&(this.connectionIdPrefix=e.connectionIdPrefix),typeof e.tcpNoDelay=="boolean"&&(this.nt.tcpNoDelay=e.tcpNoDelay),typeof e.sslServerDNMatch=="boolean"&&(this.nt.sslServerDNMatch=e.sslServerDNMatch),typeof e.sslAllowWeakDNMatch=="boolean"&&(this.nt.sslAllowWeakDNMatch=e.sslAllowWeakDNMatch),typeof e.sslServerCertDN=="string"&&(this.nt.sslServerCertDN=e.sslServerCertDN),typeof e.enable=="string"&&e.enable.toUpperCase()=="BROKEN"&&(this.nt.enabledDCD=!0),typeof e.httpsProxy=="string"&&(this.nt.httpsProxy=e.httpsProxy),e.httpsProxyPort>=0&&(this.nt.httpsProxyPort=parseInt(e.httpsProxyPort)))}readWalletFile(){return new Promise((e,t)=>{KP.readFile(this.nt.walletFile,(s,r)=>{s?t(s):e(r)})})}clearWallet(){this.nt.wallet&&Buffer.isBuffer(this.nt.wallet)&&this.nt.wallet.fill(0),this.nt.wallet=null}async prepare(e){this.uuid||(this.uuid=await WP(),this.uuid=this.uuid.toString("base64")),this.connectionIdPrefix?this.connectionId=this.connectionIdPrefix+this.uuid:this.connectionId=this.uuid,this.nt.connectionId=this.connectionId,e&&e.toUpperCase()=="TCPS"&&!this.nt.wallet&&this.nt.walletFile&&(this.nt.wallet=await this.readWalletFile()),!this.connectTimeout&&!this.transportConnectTimeout&&(this.transportConnectTimeout=60*1e3)}};T(aa,"SessionAtts");var oa=aa;tS.exports=oa});var tr=I((vC,nS)=>{"use strict";var XP=Ye(),Ei=U(),rS=require("os");function zP(){this.program=process.argv0,this.terminal="unknown",this.pid=process.pid.toString();try{this.userName=rS.userInfo().username}catch{this.userName="unknown"}this.hostName=rS.hostname()}T(zP,"populateClientInfo");var QP=new zP;function JP(i){let e=[];for(let t of i)e.push(t.fetchInfo);return e}T(JP,"getMetadataMany");function iS(i,e){let t=i[0].name===void 0,s=t?[]:{};for(let r=0;r<i.length;r++)t?s.push(i[r].values[e]):s[i[r].name]=i[r].values[e];return s}T(iS,"getOutBindValues");function jP(i,e,t){let r=i.bindInfoList.map(n=>n.bindVar).filter(n=>n.dir!==XP.BIND_IN);if(r.length>0){if(t){let n=new Array(e);for(let o=0;o<e;o++)n[o]=iS(r,o);return n}return iS(r,0)}}T(jP,"getOutBinds");function ZP(i){let e="",t="",s=!1,r=!1,n=0,o={status:-1,proxyUser:"",schemaUser:""},a=i.length,c=0,E,l;for(;c<a;){if(i.charAt(c)==='"'&&(s=!s,n=c),i.charAt(c)==="["&&!s){if(r=!0,n!=0){for(E=n+1;E<c;E++)if(i.charAt(E)!==" ")return o;for(E=0;E<=n;E++)t+=i.charAt(E)}else for(E=0;E<c&&i.charAt(E)!==" ";E++)t+=i.charAt(E);break}c++}if(t.length===0)return o;o.proxyUser=t,c=c+1,s=!1;let u=c;for(n=0;c<a;){if(i.charAt(c)==='"'&&(s=!s,n=c),i.charAt(c)==="["&&!s&&r)return o;if(i.charAt(c)==="]"&&!s){if(n!=u&&n!=0){for(E=u;E<=n;E++)e+=i.charAt(E);for(E=n+1;E<c;E++)if(i.charAt(E)!=" ")return o}else{for(E=u;E<c&&i.charAt(E)==" ";E++);if(E==c)return o;for(l=E;l<c;l++)e+=i[l]}for(E=c+1;E<a;E++)if(i[E]!=" ")return o}c++}return e.length===0||(o.schemaUser=e,o.status=0),o}T(ZP,"checkProxyUserValidity");function $P(i){i.token===void 0&&(i.externalAuth===!0&&Ei.throwErr(Ei.ERR_NOT_IMPLEMENTED,"External Authentication"),i.password===void 0&&Ei.throwErr(Ei.ERR_MISSING_CREDENTIALS))}T($P,"checkCredentials");function ep(i){return`-----BEGIN PRIVATE KEY-----
`+i+`
-----END PRIVATE KEY-----`}T(ep,"normalizePrivateKey");nS.exports={getMetadataMany:JP,CLIENT_INFO:QP,getOutBinds:jP,checkProxyUserValidity:ZP,checkCredentials:$P,normalizePrivateKey:ep}});var TS=I((WC,aS)=>{"use strict";var{findNVPairRecurse:sr,createNVPair:Si}=ys(),ke=U(),tp=require("os"),sp=require("net"),rp=require("dns"),_S=rp.promises,Ta=tr().CLIENT_INFO,ui={ADDR:0,ADDR_LIST:1,DESC:2,DESC_LIST:3},Na=class Na{isS(){return ui.ADDR}initFromString(e){let t=Si(e);this.initFromNVPair(t)}initFromNVPair(e){(e==null||e.name.toUpperCase()!="ADDRESS")&&ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=sr(e,"protocol"),s=sr(e,"port"),r=sr(e,"host"),n=sr(e,"https_proxy"),o=sr(e,"https_proxy_port");s&&(this.port=Number(s.atom)),r&&(this.host=r.atom),t&&(this.prot=t.atom),n&&(this.httpsProxy=n.atom),o&&(this.httpsProxyPort=Number(o.atom)),this.addr=e.toString()}toString(){return this.addr}};T(Na,"Address");var ca=Na,Sa=class Sa{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!1,this.failover=!0}isS(){return ui.ADDR_LIST}initFromString(e){let t=Si(e);this.initFromNVPair(t)}initFromNVPair(e){this.children=[];let t,s,r=e.getListSize();r==0&&ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let n=0;n<r;n++)t=e.getListElement(n),t.name.toUpperCase()=="SOURCE_ROUTE"?this.sourceRoute=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="LOAD_BALANCE"?this.loadBalance=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="FAILOVER"?this.failover=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="ADDRESS"?(s=new rr,s.initFromNVPair(t),this.children.push(s)):t.name.toUpperCase()=="ADDRESS_LIST"?(s=new ir,s.initFromNVPair(t),this.children.push(s)):ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX);this.children.length==0&&ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX)}toString(){let e=new String("");if(this.children.size()<1)return e;e+="(ADDRESS_LIST=";for(let t=0;t<this.children.size();t++)e+=this.children[t].toString();return this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"+Bs.HC),this.loadBalance&&(e+="(LOAD_BALANCE=yes)"),this.failover||(e+="(FAILOVER=false)"),e+=")",e}};T(Sa,"AddressList");var Ea=Sa,ua=class ua{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!1,this.failover=!0,this.delayInMillis=-1,this.params={}}isS(){return ui.DESC}initFromString(e){let t=Si(e);this.initFromNVPair(t)}initFromNVPair(e){let t=e.getListSize(),s,r;t==0&&ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let n=0;n<t;n++)if(s=e.getListElement(n),s.name.toUpperCase()=="SOURCE_ROUTE")this.sourceRoute=s.atom.toLowerCase()=="yes"||s.atom.toLowerCase()=="on"||s.atom.toLowerCase()=="true";else if(s.name.toUpperCase()=="LOAD_BALANCE")this.loadBalance=s.atom.toLowerCase()=="yes"||s.atom.toLowerCase()=="on"||s.atom.toLowerCase()=="true";else if(s.name.toUpperCase()=="FAILOVER")this.failover=s.atom.toLowerCase()=="yes"||s.atom.toLowerCase()=="on"||s.atom.toLowerCase()=="true";else if(s.name.toUpperCase()=="ADDRESS_LIST")r=new ir,r.initFromNVPair(s),this.children.push(r);else if(s.name.toUpperCase()=="ADDRESS")r=new rr,r.initFromNVPair(s),this.children.push(r);else if(s.name.toUpperCase()=="CONNECT_DATA"){let o,a=s.getListSize();for(let c=0;c<a;c++)if(o=s.getListElement(c),o.name.toUpperCase()=="CONNECTION_ID_PREFIX"){this.params.connectionIdPrefix=o.atom,s.removeListElement(c);break}this.connectData=s.valueToString()}else if(s.name.toUpperCase()=="RETRY_DELAY")s.atom>0&&(this.delayInMillis=s.atom*1e3);else if(s.name.toUpperCase()=="RETRY_COUNT")this.retryCount=s.atom;else if(s.name.toUpperCase()=="CONNECTION_ID_PREFIX")this.conidPrefix=s.atom;else if(s.name.toUpperCase()=="CONNECT_TIMEOUT")s.atom>0&&(this.params.connectTimeout=s.atom);else if(s.name.toUpperCase()=="TRANSPORT_CONNECT_TIMEOUT")s.atom>0&&(this.params.transportConnectTimeout=s.atom);else if(s.name.toUpperCase()=="ENABLE")this.params.enable=s.atom;else if(s.name.toUpperCase()=="RECV_TIMEOUT")s.atom>0&&(this.params.recvTimeout=s.atom);else if(s.name.toUpperCase()=="SDU")this.params.sdu=s.atom;else if(s.name.toUpperCase()=="EXPIRE_TIME")s.atom>0&&(this.params.expireTime=s.atom);else if(s.name.toUpperCase()=="SECURITY"){let o=s.getListSize(),a;for(let c=0;c<o;c++)a=s.getListElement(c),a.name.toUpperCase()=="SSL_SERVER_CERT_DN"?this.params.sslServerCertDN=a.valueToString():a.name.toUpperCase()=="SSL_SERVER_DN_MATCH"?this.params.sslServerDNMatch=a.atom.toLowerCase()=="yes"||a.atom.toLowerCase()=="on"||a.atom.toLowerCase()=="true":a.name.toUpperCase()=="SSL_ALLOW_WEAK_DN_MATCH"?this.params.sslAllowWeakDNMatch=a.atom.toLowerCase()=="yes"||a.atom.toLowerCase()=="on"||a.atom.toLowerCase()=="true":(a.name.toUpperCase()=="WALLET_LOCATION"||a.name.toUpperCase()=="MY_WALLET_DIRECTORY")&&(this.params.walletLocation=a.atom)}}toString(){let e=new String(""),t;t=new String("");for(let s=0;s<this.children.size();s++)t=this.children[s].toString(),!t==""&&(e+=t);return!e==""&&this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"),!e==""&&this.loadBalance&&(e+="(LOAD_BALANCE=yes)"),!e==""&&!this.failover&&(e+="(FAILOVER=false)"),e.equals("")||(e="(DESCRIPTION="+e+")"),e}};T(ua,"Description");var la=ua,Aa=class Aa{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!0,this.failover=!0}isS(){return ui.ADDR_LIST}initFromString(e){let t=Si(e);this.initFromNVPair(t)}initFromNVPair(e){let t=e.getListSize(),s,r;t==0&&ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let n=0;n<t;n++)r=e.getListElement(n),r.name.toUpperCase()=="SOURCE_ROUTE"?this.sourceRoute=r.atom.toLowerCase()=="yes"||r.atom.toLowerCase()=="on"||r.atom.toLowerCase=="true":r.name.toUpperCase()=="LOAD_BALANCE"?this.loadBalance=r.atom.toLowerCase()=="yes"||r.atom.toLowerCase()=="on"||r.atom.toLowerCase()=="true":r.name.toUpperCase()=="FAILOVER"?this.failover=r.atom.toLowerCase()=="yes"||r.atom.toLowerCase()=="on"||r.atom.toLowerCase()=="true":r.name.toUpperCase()=="DESCRIPTION"?(s=new hi,s.initFromNVPair(r),this.children.push(s)):ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX);this.children.length==0&&ke.throwErr(ke.ERR_INVALID_CONNECT_STRING_SYNTAX)}toString(){let e=new String("");if(this.children.size()<1)return e;let t=new String("");for(let s=0;s<this.children.size();s++)t=this.children[s].toString(),t.equals("")||(e+=t);return e.equals("")&&this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"),e.equals("")&&!this.loadBalance&&(e+="(LOAD_BALANCE=no)"),e.equals("")&&!this.failover&&(e+="(FAILOVER=false)"),e.equals("")||(e="(DESCRIPTION_LIST="+e+")"),e}};T(Aa,"DescriptionList");var ha=Aa,fa=class fa{constructor(){this.CNdata=new Array}};T(fa,"ConnOption");var li=fa,Bs={DEBUG:!1,SR:"(SOURCE_ROUTE=yes)",HC:"(HOP_COUNT=0)",LB:"(LOAD_BALANCE=yes)",NFO:"(FAILOVER=false)",CD:"(CONNECT_DATA=",CONID:"(CONNECTION_ID="},oS={all:!0},da=class da extends ca{constructor(){super()}async navigate(e){let t,s=0,r=!1;if(!this.host){s=1,this.host=tp.hostname();try{await _S.lookup(this.host,oS)}catch{this.host="localhost"}}if(e.getcurrentDescription()==null&&(e.newConnectionDescription(),r=!0),sp.isIP(this.host)){let n=new li;n.hostname=this.host,n.port=this.port,n.protocol=this.prot,n.httpsProxy=this.httpsProxy,n.httpsProxyPort=this.httpsProxyPort,n.desc=e.getcurrentDescription(),n.CNdata.push(e.sBuf.join("")),n.CNdata.push(this.toString()),n.host=this.host,n.addr=this.addr,e.getcurrentDescription().addConnectOption(n)}else try{t=await _S.lookup(this.host,oS);for(let n of t){let o=new li;o.hostname=this.host,o.port=this.port,o.protocol=this.prot,o.httpsProxy=this.httpsProxy,o.httpsProxyPort=this.httpsProxyPort,o.desc=e.getcurrentDescription(),o.CNdata.push(e.sBuf.join("")),s==1?o.CNdata.push("(address=(protocol="+this.prot+")(host="+this.host+")(port="+this.port+"))"):o.CNdata.push(this.toString()),o.host=n.address,o.addr=this.addr,e.getcurrentDescription().addConnectOption(o)}}catch{}r&&e.closeDescription()}addToString(e){let t=this.toString(),s=new Array;s=e.getcurrentDescription().getConnectOptions();for(let r=0;r<s.length;r++)s[r].done||s[r].CNdata.push(t)}};T(da,"NavAddress");var rr=da,Pa=class Pa extends Ea{constructor(){super(),this.activeChildren=new Array,this.sBuflength=0}async navigate(e){await this.navigate2(e,0)}async navigate2(e,t){if(t++,this.sBuflength=e.sBuf.length,e.sBuf.push("(ADDRESS_LIST="),this.sourceRoute){this.activeChildren=this.children,await this.activeChildren[0].navigate(e);for(let s=1;s<this.activeChildren.length;s++)this.activeChildren[s].addToString(e)}else{this.activeChildren=nr.setActiveChildren(this.children,this.failover,this.loadBalance);for(let s=0;s<this.activeChildren.length;s++)this.getChildrenType(s)==1?await this.activeChildren[s].navigate2(e,t):await this.activeChildren[s].navigate(e)}this.closeNVPair(e),e.sBuf.length=this.sBuflength}addToString(e){let t=this.toString(),s=new Array;s=e.getcurrentDescription().getConnectOptions();for(let r=0;r<s.length;r++)s[r].done||s[r].CNdata.push(t)}getChildrenSize(){let e=0;for(let t=0;t<this.activeChildren.length;t++)if(this.getChildrenType(t)==1?e+=this.activeChildren[t].getChildrenSize():e++,this.sourceRoute)return e;return e}getChildrenType(e){return this.activeChildren[e].isS()}getChild(e){return this.children[e]}closeNVPair(e){let t=new Array,s=this.getChildrenSize();if(e.getcurrentDescription()!=null){t=e.getcurrentDescription().getConnectOptions();let r=0,n=null,o=null;for(let a=t.length-1;a>=0&&!t[a].done&&((t[a].hostname!=n||t[a].port!=o)&&r++,n=t[a].hostname,o=t[a].port,!(r>s));a--)this.sourceRoute&&(t[a].CNdata.push(Bs.SR),t[a].CNdata.push(Bs.HC),t[a].done=!0),t[a].CNdata.push(")")}}};T(Pa,"NavAddressList");var ir=Pa,pa=class pa extends la{constructor(){super(),this.activeChildren=new Array,this.descProcessed=0}async navigate(e){e.sBuf.length=0,e.sBuf.push("(DESCRIPTION=");let t=e.newConnectionDescription();if(this.retryCount!=null&&(e.retryCount=this.getIntValue(this.retryCount,e.retryCount),t.retryCount=e.retryCount),this.delayInMillis!=-1&&(t.delayInMillis=this.delayInMillis),t.params=this.params,"connectTimeout"in this.params&&e.sBuf.push("(CONNECT_TIMEOUT="+this.params.connectTimeout+")"),"transportConnectTimeout"in this.params&&e.sBuf.push("(TRANSPORT_CONNECT_TIMEOUT="+this.params.transportConnectTimeout+")"),"recvTimeout"in this.params&&e.sBuf.push("(RECV_TIMEOUT="+this.params.recvTimeout+")"),"sdu"in this.params&&e.sBuf.push("(SDU="+this.params.sdu+")"),"expireTime"in this.params&&e.sBuf.push("(EXPIRE_TIME="+this.params.expireTime+")"),"enable"in this.params&&e.sBuf.push("(ENABLE="+this.params.enable+")"),("sslServerCertDN"in this.params||"sslServerDNMatch"in this.params||"walletLocation"in this.params||"sslAllowWeakDNMatch"in this.params)&&(e.sBuf.push("(SECURITY="),"sslServerCertDN"in this.params&&e.sBuf.push("(SSL_SERVER_CERT_DN="+this.params.sslServerCertDN+")"),"sslServerDNMatch"in this.params&&e.sBuf.push("(SSL_SERVER_DN_MATCH="+this.params.sslServerDNMatch+")"),"sslAllowWeakDNMatch"in this.params&&e.sBuf.push("(SSL_ALLOW_WEAK_DN_MATCH="+this.params.sslAllowWeakDNMatch+")"),"walletLocation"in this.params&&e.sBuf.push("(WALLET_LOCATION="+this.params.walletLocation+")"),e.sBuf.push(")")),"httpsProxyPort"in this.params&&e.sBuf.push("(HTTPS_PROXY_PORT="+this.params.httpsProxyPort+")"),"httpsProxy"in this.params&&e.sBuf.push("(HTTPS_PROXY="+this.params.httpsProxy+")"),this.failover||e.sBuf.push(Bs.NFO),this.sourceRoute){this.activeChildren=this.children,await this.activeChildren[0].navigate(e);for(let s=1;s<this.activeChildren.length;s++)this.activeChildren[s].addToString(e);this.closeNVPair(e)}else{this.activeChildren=nr.setActiveChildren(this.children,this.failover,this.loadBalance);for(let s=0;s<this.activeChildren.length;s++)await this.activeChildren[s].navigate(e);this.closeNVPair(e)}e.closeDescription()}closeNVPair(e){if(e.getcurrentDescription()==null)return;let t=new Array;t=e.getcurrentDescription().getConnectOptions();for(let s=0;s<t.length;++s){this.sourceRoute&&t[s].CNdata.push(Bs.SR),this.connectData==null&&(this.connectData="(SERVICE_NAME=)");let n=`(CID=(PROGRAM=${`"'`+Ta.program+`'"`})(HOST=${Ta.hostName})(USER=${Ta.userName}))`;t[s].CNdata.push(Bs.CD),t[s].CNdata.push(this.connectData),t[s].CNdata.push(n),t[s].CNdata.push(")"),this.SID!=null&&(t[s].sid=this.SID),this.serviceName!=null&&(t[s].service_name=this.serviceName),this.instanceName!=null&&(t[s].instance_name=this.instanceName),t[s].CNdata.push(")"),t[s].done=!0}}getIntValue(e,t){try{return parseInt(e)}catch{return t}}};T(pa,"NavDescription");var hi=pa,Ni=class Ni extends ha{constructor(e=new Array,t=0,s=0){super(),this.activeChildren=e,this.descProcessed=t,this.done=s}async navigate(e){for(e.sBuf.push("(DESCRIPTION_LIST="),this.activeChildren=Ni.setActiveChildren(this.children,this.failover,this.loadBalance);this.descProcessed<this.activeChildren.length;)await this.activeChildren[this.descProcessed].navigate(e),this.descProcessed++}static setActiveChildren(e,t,s){let r,n=e.length,o=new Array,a=Math.floor(Math.random()*10),c=new Array(n).fill(!1);if(t)if(s)for(let E=0;E<n;E++){do r=Math.abs(Math.floor(Math.random()*10))%n;while(c[r]);c[r]=!0,o.push(e[r])}else o=e;else s?(r=Math.abs(a)%n,o.push(e[r])):o.push(e[0]);return o}};T(Ni,"NavDescriptionList");var nr=Ni;aS.exports={NavAddress:rr,NavAddressList:ir,NavDescription:hi,NavDescriptionList:nr}});var La=I((zC,ES)=>{"use strict";var{NavAddress:ip,NavAddressList:np,NavDescription:_p,NavDescriptionList:op}=TS(),{createNVPair:ap}=ys(),cS=U(),Ca=class Ca{constructor(){this.cOpts=new Array}addConnectOption(e){this.cOpts.push(e)}getConnectOptions(){return this.cOpts}};T(Ca,"ConnectDescription");var Ra=Ca,Oa=class Oa{constructor(){this.reset(),this.retryCount=0,this.currentDescription=null,this.descriptionList=new Array,this.sBuf=new Array}reset(){this.nextOptToTry=0,this.lastRetryCounter=0,this.lastRetryConnectDescription=0,this.reorderDescriptionList=0}hasMoreOptions(){let e=0;for(let t=0;t<this.descriptionList.length;++t)e+=this.descriptionList[t].getConnectOptions().length;return this.nextOptToTry<e}newConnectionDescription(){return this.currentDescription=new Ra,this.currentDescription}getcurrentDescription(){return this.currentDescription}closeDescription(){this.descriptionList.push(this.currentDescription),this.currentDescription=null}async execute(e){e!=null&&this.retryCount==0&&e.retryCount>0&&(this.retryCount=e.retryCount),this.reorderDescriptionList||(this.descriptionList=Da.reorderDescriptionList(this.descriptionList),this.reorderDescriptionList=!0);for(let t=this.lastRetryConnectDescription;t<this.descriptionList.length;t++){let s=this.descriptionList[t],r=new Array;r=s.getConnectOptions();let n=s.delayInMillis;e!=null&&(n==0||n==null)&&e.retryDelay>0&&(n=e.retryDelay*1e3);for(let o=this.lastRetryCounter;o<=this.retryCount;++o){for(this.nextOptToTry==0&&(r=Da.reorderAddresses(r));this.nextOptToTry<r.length;){let a=r[this.nextOptToTry];return this.lastRetryCounter=o,this.lastRetryConnectDescription=t,this.nextOptToTry++,a}this.nextOptToTry=0,n>0&&o<this.retryCount&&await Tp(n)}this.lastRetryCounter=0}throw this.nextOptToTry=1e3,this.lastRetryCounter=1e3,new Error("All options tried")}};T(Oa,"ConnStrategy");var ma=Oa;function Tp(i){return new Promise(e=>setTimeout(e,i))}T(Tp,"sleep");async function cp(i){let e;typeof i=="string"?e=ap(i):e=i;let t=e.name.toUpperCase(),s=null;switch(t){case"ADDRESS":s=new ip;break;case"ADDRESS_LIST":s=new np;break;case"DESCRIPTION":s=new _p;break;case"DESCRIPTION_LIST":s=new op;break;default:cS.throwErr(cS.ERR_INVALID_CONNECT_STRING_PARAMETERS,`unknown top element ${t}`)}s.initFromNVPair(e);let r=new ma;return await s.navigate(r),r}T(cp,"createNode");var ga=class ga{constructor(){this.DOWN_HOSTS_TIMEOUT=600,this.MIN_TIME_BETWEEN_REFRESH=60,this.downHostsCacheMap=new Map,this.lastRefreshTime=0}markDownHost(e){return this.downHostsCacheMap.set(e,Date.now())}refreshCache(){Date.now()-this.MIN_TIME_BETWEEN_REFRESH*1e3>this.lastRefreshTime&&(this.downHostsCacheMap.forEach((e,t)=>{let s=e;s!=null&&Date.now()-this.DOWN_HOSTS_TIMEOUT*1e3>s&&this.downHostsCacheMap.delete(t)}),this.lastRefreshTime=Date.now())}reorderAddresses(e){this.refreshCache();let t=0,s=e.length-1;for(;t<s;){for(;t<=s&&!this.isDownHostsCached(e[t]);)t++;for(;s>=t&&this.isDownHostsCached(e[s]);)s--;t<s&&([e[t],e[s]]=[e[s],e[t]])}return e}isDownDescCached(e){let t=e.getConnectOptions();for(let s=0;s<t.length;s++)if(!this.isDownHostsCached(t[s]))return!1;return!0}reorderDescriptionList(e){this.refreshCache();let t=0,s=e.length-1;for(;t<s;){for(;t<=s&&!this.isDownDescCached(e[t]);)t++;for(;s>=t&&this.isDownDescCached(e[s]);)s--;t<s&&([e[t],e[s]]=[e[s],e[t]])}return e}isDownHostsCached(e){return this.downHostsCacheMap.has(e.host)}};T(ga,"DownHostsCache");var Ia=ga,Da=new Ia;ES.exports={createNode:cp,SOLE_INST_DHCACHE:Da}});var SS=I((JC,NS)=>{"use strict";var vt=U(),hS=new RegExp("((?=(?<hostnames>(((\\[[A-z0-9:]+\\])|([A-z0-9][A-z0-9._-]+))[,]?)+)))\\k<hostnames>(:(?<port>\\d+)?)?","g"),Ep=new RegExp("^(((?<protocol>[A-z0-9]+):)?//)?(?<hostinfo>("+hS.source+"(?=([,]|[;]|[/]|[:]|$))([,]|[;])?)+)(/(?<servicename>[A-z0-9][A-z0-9,-.]+)?)?(:(?<servermode>dedicated|shared|pooled))?(/(?<instance>[A-z0-9][A-z0-9]+))?$","ig"),lS='"',lp="=",hp="&",Np=["ENABLE","FAILOVER","LOAD_BALANCE","RECV_BUF_SIZE","SEND_BUF_SIZE","SDU","SOURCE_ROUTE","RETRY_COUNT","RETRY_DELAY","CONNECT_TIMEOUT","TRANSPORT_CONNECT_TIMEOUT","RECV_TIMEOUT"],Ba=class Ba{constructor(e){this.URL_PROPS_ALIAS=this.initializeUrlAlias(),this.url=e,this.resolvedUrl="",this.connectionProps=new Map,this.urlProps=new Map,this.lb=!1}getResolvedUrl(){return this.parse(),this.resolvedUrl}parse(){let e=this.parseExtendedSettings(this.url);this.connectionProps.size===0&&this.urlProps.size===0&&(e=this.url),this.resolvedUrl=this.resolveToLongURLFormat(e)}resolveToLongURLFormat(e){let t=e.replace(/\s/g,""),s=0,r=null,n=null,o=null,a=null,c=null;for(let N of t.matchAll(Ep))s=1,r=N.groups.protocol,n=N.groups.hostinfo,o=N.groups.servicename,a=N.groups.servermode,c=N.groups.instance;s||vt.throwErr(vt.ERR_INVALID_EZCONNECT_SYNTAX,"input string not in easy connect format",t),r==null?e.includes("//")||(r="TCP"):r.toLowerCase()!="tcp"&&r.toLowerCase()!="tcps"&&vt.throwErr(vt.ERR_INVALID_EZCONNECT_SYNTAX,"Unsupported protocol in thin mode",r);let E=this.urlProps.get("HTTPS_PROXY"),l=this.urlProps.get("HTTPS_PROXY_PORT"),u=this.buildAddressList(n,r,E,l),p=this.urlProps.get("CONNECTION_ID_PREFIX"),d=[];return this.lb&&d.push("(LOAD_BALANCE=ON)"),d.push(this.buildDescriptionParams()),d.push(u),d.push(this.buildConnectData(o,a,c,p)),d.push(this.buildSecurityInfo(r)),`(DESCRIPTION=${d.join("")})`}buildConnectData(e,t,s,r){let n=this.urlProps.get("POOL_CONNECTION_CLASS"),o=this.urlProps.get("POOL_PURITY"),a=this.urlProps.get("SERVICE_TAG"),c=this.urlProps.get("POOL_BOUNDARY"),E=[];return e?E.push(`(SERVICE_NAME=${e})`):E.push("(SERVICE_NAME=)"),t&&E.push(`(SERVER=${t})`),s&&E.push(`(INSTANCE_NAME=${s})`),n&&E.push(`(POOL_CONNECTION_CLASS=${n})`),o&&E.push(`(POOL_PURITY=${o})`),a&&E.push(`(SERVICE_TAG=${a})`),r&&E.push(`(CONNECTION_ID_PREFIX=${r})`),c&&E.push(`(POOL_BOUNDARY=${c})`),`(CONNECT_DATA=${E.join("")})`}buildAddressList(e,t,s,r){let n=new Array,o="";s!=null&&(r!=null?o=`(HTTPS_PROXY=${s})(HTTPS_PROXY_PORT=${r})`:o=`(HTTPS_PROXY=${s})`),t==null&&(t="TCP");let a=0,c=e.split(";");for(let E of c){let l=0,u=new Array;for(let d of E.matchAll(hS)){let N=d.groups.hostnames.split(","),A=d.groups.port;A==null&&(A="1521");for(let P of N)u.push(this.getAddrStr(P,A,t,o)),l++}a+=l;let p=[];c.length>1&&l>1&&p.push("(LOAD_BALANCE=ON)"),p.push(u.join("")),c.length>1?n.push(`(ADDRESS_LIST=${p.join("")})`):n.push(p.join(""))}return c.length<2&&a>1&&(this.lb=!0),n.join("")}getAddrStr(e,t,s,r){let n=e.trim();return n.startsWith("[")&&n.endsWith("]")&&(n=n.substring(1,n.length-1)),`(ADDRESS=(PROTOCOL=${s})(HOST=${n})(PORT=${t})${r})`}buildDescriptionParams(){if(this.urlProps.size===0)return"";let e=new Array;return this.urlProps.forEach(function(t,s){Np.includes(s)&&e.push(`(${s}=${t})`)}),e.join("")}buildSecurityInfo(e){let t=new Array;if(e!=null&&e.toLowerCase()=="tcps"){let s=this.urlProps.get("SSL_SERVER_DN_MATCH"),r=this.urlProps.get("SSL_SERVER_CERT_DN"),n=this.urlProps.get("MY_WALLET_DIRECTORY");s!=null&&t.push(`(SSL_SERVER_DN_MATCH=${s})`),r!=null&&t.push(`(SSL_SERVER_CERT_DN=${r}})`),n!=null&&t.push(`(MY_WALLET_DIRECTORY=${n})`)}return t.length===0?"":`(SECURITY=${t.join("")})`}parseExtendedSettings(e){let t=Array.from(e.trim()),s=this.findExtendedSettingPosition(t);return s==-1?e:(this.parseExtendedProperties(t,s+1),e.substring(0,s))}parseExtendedProperties(e,t){let s=null,r=null,n=new Array(e.length),o=0,a="";for(let c=t;c<e.length;c++)if(e[c].trim()!="")switch(e[c]){case lS:a=this.parseQuotedString(c,e,o,n),o=a[1],c=a[0];break;case lp:s!=null&&vt.throwErr(vt.ERR_INVALID_EZCONNECT_SYNTAX,"unable to parse, invalid syntax",this.url),s=n.join("").substring(0,o).trim(),o=0;break;case hp:s==null&&vt.throwErr(vt.ERR_INVALID_EZCONNECT_SYNTAX,"unable to parse, invalid syntax",this.url),r=n.join("").substring(0,o).trim(),this.addParam(s,r),s=null,r=null,o=0;break;default:n[o++]=e[c]}s!=null&&(r=n.join("").substring(0,o).trim(),this.addParam(s,r))}parseQuotedString(e,t,s,r){let n=e+1;for(;n<t.length;){let o=t[n];if(o==lS)return[n,s];r[s++]=o,n++}}addParam(e,t){let s=e.toLowerCase(),r=this.URL_PROPS_ALIAS.get(s);r!=null?this.urlProps.set(r,t):this.connectionProps.set(r,t)}findExtendedSettingPosition(e){let t=0;for(let s=0;s<e.length;s++)if(e[s]=="(")t++;else if(e[s]==")")t--;else if(e[s]=="?"&&t==0)return s;return-1}initializeUrlAlias(){let e=new Map;return e.set("enable","ENABLE"),e.set("failover","FAILOVER"),e.set("load_balance","LOAD_BALANCE"),e.set("recv_buf_size","RECV_BUF_SIZE"),e.set("send_buf_size","SEND_BUF_SIZE"),e.set("sdu","SDU"),e.set("source_route","SOURCE_ROUTE"),e.set("retry_count","RETRY_COUNT"),e.set("retry_delay","RETRY_DELAY"),e.set("https_proxy","HTTPS_PROXY"),e.set("https_proxy_port","HTTPS_PROXY_PORT"),e.set("connect_timeout","CONNECT_TIMEOUT"),e.set("transport_connect_timeout","TRANSPORT_CONNECT_TIMEOUT"),e.set("recv_timeout","RECV_TIMEOUT"),e.set("ssl_server_cert_dn","SSL_SERVER_CERT_DN"),e.set("ssl_server_dn_match","SSL_SERVER_DN_MATCH"),e.set("wallet_location","MY_WALLET_DIRECTORY"),e.set("pool_connection_class","POOL_CONNECTION_CLASS"),e.set("pool_purity","POOL_PURITY"),e.set("service_tag","SERVICE_TAG"),e.set("connection_id_prefix","CONNECTION_ID_PREFIX"),e.set("pool_boundary","POOL_BOUNDARY"),e}};T(Ba,"EZConnectResolver");var ya=Ba;NS.exports=ya});var fS=I((ZC,AS)=>{"use strict";var{createNVPair:Sp,findValue:up}=ys(),Ys=require("fs"),uS=require("process"),Ap=require("readline"),ws=U(),fp=4;function dp(i){let e=null,t=uS.env.TNS_ADMIN;if(i){if(e=i+"/tnsnames.ora",Ys.existsSync(e))return e;ws.throwErr(ws.ERR_TNS_NAMES_FILE_MISSING,i)}else return t?(e=t,e+="/tnsnames.ora",Ys.existsSync(e)||ws.throwErr(ws.ERR_TNS_NAMES_FILE_MISSING,t)):ws.throwErr(ws.ERR_NO_CONFIG_DIR),e}T(dp,"tnsnamesFilePath");var Ya=class Ya{constructor(){this.waiters=[],this.readInProgress=!1}async initializeNlpa(e){return this.readInProgress&&await new Promise(t=>{this.waiters.push(t)}),this.checkModfTime()?(this.ht=new Map,this.modTime=new Map,this.readInProgress=!0,await this.start(e,0),this.ht):this.ht}async start(e,t){if(t>fp)return;let s=Ys.statSync(e);this.modTime.set(e,s.mtime);let r=Ap.createInterface({input:Ys.createReadStream(e),output:uS.stdout,terminal:!1}),n="";for await(let a of r)if(a.length!=0){if(a[0]=="#")continue;if(a[0]==" "||a[0]=="	"||a[0]==")"||a[0]=="("){if(a=a.replace(/\s+/g,""),a=this.checkNLPforComments(a),a.length==0)continue;n=n+a}else n.length==0?(a=this.checkNLPforComments(a),n=n+a):n.length!=0&&(await this.addNLPListElement(n,t),n="",a=this.checkNLPforComments(a),n=n+a)}n.length!=0&&(await this.addNLPListElement(n,t),n=""),this.readInProgress=!1;let o;for(;o=this.waiters.pop();)o()}checkNLPforComments(e){let t=new Array(e.length);for(let s=0;s<e.length;s++){let r=e[s];if(r=="#"){if(s!=0)break;return""}else t.push(r)}return t.join("")}checkModfTime(){if(this.modTime)for(let[e,t]of this.modTime)if(Ys.existsSync(e)){if(Ys.statSync(e).mtime-t>0)return!0}else return!0;else return!0;return!1}async addNLPListElement(e,t){let s=e.split(/\r?\n/).filter(r=>r);for(let r=0;r<s.length;r++){s[r].charAt(0)!="("&&(s[r]="("+s[r]+")");let n=Sp(s[r]),a=n.name.toUpperCase();if(n.name=a,a=="IFILE")await this.start(n.atom,t+1);else{let c=a.split(",");for(let E=0;E<c.length;E++)this.ht.set(c[E],n)}}}toString(){let e="";return this.ht.forEach(t=>{e=e+t.toString()+`
`}),e}findValueOf(e){let t=e.split("/");return up(this.ht.get(t[0].toUpperCase()),t)}};T(Ya,"NLParamParser");var wa=Ya;AS.exports={NLParamParser:wa,tnsnamesFilePath:dp}});var xa=I((eO,mS)=>{"use strict";var Tt=qN(),Pp=$N(),pp=sS(),x=Ls(),{createNode:pS}=La(),le=U(),{findNVPairRecurse:Rp,createNVPair:Ai,findValue:ct}=ys(),{Buffer:dS}=require("buffer"),PS=SS(),{NLParamParser:mp,tnsnamesFilePath:Ip}=fS(),Dp=require("process"),Cp=La().SOLE_INST_DHCACHE;async function Op(i){let e=await RS(i.connectString,i.configDir),t=await pS(e),s;typeof e=="string"?s=Ai(e):s=e;let r=ct(s,["DESCRIPTION","CONNECT_DATA","SERVER"]),n=ct(s,["DESCRIPTION","CONNECT_DATA","POOL_CONNECTION_CLASS"]),o=ct(s,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"]),a=ct(s,["DESCRIPTION","CONNECT_DATA","SID"]),c=ct(s,["DESCRIPTION","CONNECT_DATA","POOL_PURITY"]);return[r,n,o,c,a,t]}T(Op,"getConnectionInfo");var gp=new mp;async function RS(i,e){let t=i.trim(),s=t;if(t.indexOf(")")==-1||t.indexOf("(")!=0){if(t.indexOf(":")!=-1||t.indexOf("/")!=-1)return s=new PS(t).getResolvedUrl(),s;{let r=Ip(e);if(s=(await gp.initializeNlpa(r)).get(t.toUpperCase()),s||le.throwErr(le.ERR_TNS_ENTRY_NOT_FOUND,t,e?e+"/tnsnames.ora":Dp.env.TNS_ADMIN+"/tnsnames.ora"),s.rhsType==1){let o=s.atom;if(o.indexOf(":")!=-1||o.indexOf("/")!=-1)return new PS(o).getResolvedUrl()}s=s.getListElement(0)}}return s}T(RS,"resolveConnectStr");async function Ma(i,e){let t=await RS(i,e);return pS(t)}T(Ma,"resolveAddress");function Ua(i,e,t,s,r){let n,o=new Promise((a,c)=>{e>2147483647&&(e=2147483647),n=setTimeout(()=>c(le.getErr(le.ERR_CONNECTION_TIMEDOUT,s.host,s.port,t,e/1e3,r)),e)});return Promise.race([i,o]).then(a=>(clearTimeout(n),a)).catch(a=>{throw clearTimeout(n),a})}T(Ua,"timeout");var Fa=class Fa{constructor(){this.connected=!1,this.isBreak=!1,this.isReset=!1,this.breakPosted=!1}async getAddress(e,t){let s=await e.execute(t),r=this.sAtts?this.sAtts.uuid:null;this.sAtts=new pp(r),this.sAtts.setFrom(t),this.sAtts.setFrom(s.desc.params),await this.sAtts.prepare(s.protocol);let n=Ai(s.CNdata.join("")),o=Rp(n,"CONNECT_DATA"),a=`(CONNECTION_ID=${this.sAtts.connectionId})`,c=Ai(a);return o.addListElement(c),this.cData=dS.from(n.toString(),"ascii"),this.cDataNVPair=n,this.sAtts.nt.cDataNVPair=n,s}async transportConnect(e){e.protocol.toUpperCase()=="TCP"&&e.httpsProxy&&le.throwErr(le.ERR_INVALID_CONNECT_STRING_PARAMETERS,"https proxy requires protocol as","tcps "),e.protocol&&(e.protocol.toUpperCase()=="TCP"||e.protocol.toUpperCase()=="TCPS")?this.ntAdapter=new Pp(this.sAtts.nt):le.throwErr(le.ERR_INVALID_CONNECT_STRING_PARAMETERS,e.protocol+" protocol not supported"),await this.ntAdapter.connect(e),this.ntAdapter.startRead(),this.sAtts.ntCha=this.ntAdapter.cha,this.sndDatapkt=new Tt.DataPacket(this.sAtts.largeSDU),this.rcvDatapkt=new Tt.DataPacket(this.sAtts.largeSDU)}_sendConnect(e){this._sendPacket(e.buf),e.overflow&&(this._send(e.connectData,0,e.connectDataLen),this.flush())}async connect2(e){if(this.sAtts.sdu?this.sAtts.sdu>x.NSPABSSDULN?this.sAtts.sdu=x.NSPABSSDULN:this.sAtts.sdu<x.NSPMNSDULN&&(this.sAtts.sdu=x.NSPMNSDULN):this.sAtts.sdu=x.NSPDFSDULN,this.sAtts.transportConnectTimeout){let s=this.transportConnect(e);await Ua(s,this.sAtts.transportConnectTimeout,"transportConnectTimeout",e,this.sAtts.connectionId)}else await this.transportConnect(e);let t=new Tt.ConnectPacket(this.cData,this.sAtts);for(this._sendConnect(t);;){let s=await this._recvPacket();if(s.type===x.NSPTAC)break;if(s.type===x.NSPTRF){this.refusePkt.overflow&&(await this._recvPacket(),this.refusePkt.dataBuf=this.rcvDatapkt.buf.subarray(this.rcvDatapkt.offset,this.rcvDatapkt.len).toString());let r=Ai(this.refusePkt.dataBuf);this.refusePkt=null;let n=ct(r,["DESCRIPTION","ERR"]);n=="12514"?le.throwErr(le.ERR_INVALID_SERVICE_NAME,this.getOption(x.SVCNAME),e.host,e.port,this.sAtts.connectionId):n=="12505"?le.throwErr(le.ERR_INVALID_SID,this.getOption(x.SID),e.host,e.port,this.sAtts.connectionId):n?le.throwErr(le.ERR_CONNECTION_REFUSED,e.host,e.port,this.sAtts.connectionId,"ORA-"+n):le.throwErr(le.ERR_CONNECTION_REFUSED,e.host,e.port,this.sAtts.connectionId,"refused")}else if(s.type===x.NSPTRS)(s.flags&x.NSPFSRN)==x.NSPFSRN&&(await this.ntAdapter.renegTLS(),this.ntAdapter.startRead()),this._sendConnect(t);else if(s.type===x.NSPTRD){let r,n,o;this.redirectPkt.overflow&&(await this._recvPacket(),this.redirectPkt.dataBuf=this.rcvDatapkt.buf.subarray(this.rcvDatapkt.offset,this.rcvDatapkt.len)),this.redirectPkt.flags&x.NSPFRDS?(r=this.redirectPkt.dataBuf.indexOf("\0",0,"ascii"),n=this.redirectPkt.dataBuf.toString("ascii",0,r),o=this.redirectPkt.dataBuf.subarray(r+1,this.redirectPkt.dataLen)):(n=this.redirectPkt.dataBuf.toString("ascii"),o=this.cData);let a=await Ma(n),c=e.hostname;if(e=await a.execute(),e.desc&&this.sAtts.setFrom(e.desc.params),e.originHost=c,this.redirectPkt=null,this.ntAdapter.disconnect(x.NSFIMM),this.sAtts.transportConnectTimeout){let E=this.transportConnect(e);await Ua(E,this.sAtts.transportConnectTimeout,"transportConnectTimeout",e,this.sAtts.connectionId)}else await this.transportConnect(e);t=new Tt.ConnectPacket(o,this.sAtts,x.NSPFRDR),this.sndDatapkt=new Tt.DataPacket(this.sAtts.largeSDU),this._sendConnect(t)}}return this.connected=!0,this.cData=null,this.sndDatapkt=new Tt.DataPacket(this.sAtts.largeSDU),this.sndDatapkt.createPacket(x.NSPDADAT),this.sndDatapkt.offset=this.sndDatapkt.dataPtr,this.sndDatapkt.len=this.sndDatapkt.bufLen,this.markerPkt=new Tt.MarkerPacket(this.sAtts.largeSDU),this.controlPkt=new Tt.ControlPacket,this.ntAdapter.largeSDU=this.sAtts.largeSDU,this.sAtts.clearWallet(),this.sAtts.nt.walletPassword=null,!0}async connect1(e,t,s){let r,n;do try{if(this.sAtts.connectTimeout){let o=this.connect2(e);r=await Ua(o,this.sAtts.connectTimeout,"connectTimeout",e,this.sAtts.connectionId)}else r=await this.connect2(e)}catch(o){o.message.startsWith("NJS-510")&&!this.ntAdapter.connected&&(Cp.markDownHost(e.host,Date.now()),this.ntAdapter.connected=!0),this.ntAdapter&&(this.ntAdapter.disconnect(x.NSFIMM),this.ntAdapter=null),this.sAtts.clearWallet(),r=!1,n=o;try{e=await this.getAddress(t,s)}catch{break}}while(!r);if(!r)throw n}_processPacket(e){switch(e.type){case x.NSPTDA:this.rcvDatapkt.fromPacket(e);break;case x.NSPTMK:this.markerPkt.fromPacket(e,this);break;case x.NSPTCNL:this.controlPkt.fromPacket(e);break;case x.NSPTAC:Tt.AcceptPacket(e,this.sAtts),this.sAtts.version>=x.TNS_VERSION_MIN_END_OF_RESPONSE&&e.flags&x.TNS_ACCEPT_FLAG_HAS_END_OF_REQUEST&&(this.endOfRequestSupport=!0),e.flags&x.TNS_ACCEPT_FLAG_FAST_AUTH&&(this.supportsFastAuth=!0);break;case x.NSPTRF:this.refusePkt=new Tt.RefusePacket(e);break;case x.NSPTRS:break;case x.NSPTRD:this.redirectPkt=new Tt.RedirectPacket(e);break;default:le.throwErr(le.ERR_CONNECTION_INVALID_PACKET)}}async _recvPacket(){for(;;){let e=await this.ntAdapter.receive();if(!e)break;if(this._processPacket(e),e.type!==x.NSPTCNL)return e}}_sendPacket(e){this.ntAdapter.send(e)}sendBreak(){if(!this.isBreak){if(!this.connected){this.isBreak=!0,this.breakPosted=!0;return}this.isBreak=!0,this.markerPkt.prepare(x.NSPMKTD1,x.NIQIMARK),this._sendPacket(this.markerPkt.buf)}}async reset(){for(this.breakPosted&&(this.markerPkt.prepare(x.NSPMKTD1,x.NIQBMARK),this._sendPacket(this.markerPkt.buf),this.breakPosted=!1),this.markerPkt.prepare(x.NSPMKTD1,x.NIQRMARK),this._sendPacket(this.markerPkt.buf);!this.isReset;)await this._recvPacket();this.sndDatapkt.dataPtr=this.sndDatapkt.dataLen=x.NSPDADAT,this.sndDatapkt.offset=this.sndDatapkt.dataPtr,this.sndDatapkt.len=this.sndDatapkt.bufLen,this.isBreak=this.isReset=!1}async recvPacket(){return await this._recvPacket()}syncRecvPacket(){for(;this.ntAdapter.packets.length>0;){let e=this.ntAdapter.syncReceive();if(!e)break;if(this._processPacket(e),e.type!==x.NSPTCNL)return e}}_send(e,t,s){if(this.isBreak)return;let r=0;for(this.sndDatapkt.dataLen=this.sndDatapkt.offset,(this.sndDatapkt.dataLen<this.sndDatapkt.bufLen||!this.sndDatapkt.bufLen)&&(r=this.sndDatapkt.fillBuf(e,t,s),s-=r,t+=r,this.sndDatapkt.offset=this.sndDatapkt.dataLen);s;){if(this._sendPacket(this.sndDatapkt.dataBuf),this.isBreak)return;this.sndDatapkt.dataLen=this.sndDatapkt.dataPtr,this.sndDatapkt.offset=this.sndDatapkt.dataPtr,r=this.sndDatapkt.fillBuf(e,t,s),s-=r,t+=r,this.sndDatapkt.offset=this.sndDatapkt.dataLen}}flush(){this.isBreak||(this.sndDatapkt.dataLen=this.sndDatapkt.offset,this.sndDatapkt.prepare2Send(),this._sendPacket(dS.from(this.sndDatapkt.dataBuf)),this.sndDatapkt.dataLen=this.sndDatapkt.dataPtr,this.sndDatapkt.offset=this.sndDatapkt.dataPtr)}async connect(e){let t=e.connectString?e.connectString:e.connectionString,s;e._connInfo?(s=e._connInfo[5],s.reset()):s=await Ma(t,e.configDir);let r;try{r=await this.getAddress(s,e)}catch(n){n.message=="All options tried"?le.throwErr(le.ERR_INVALID_CONNECT_STRING_PARAMETERS,"Ensure the ADDRESS parameters have been entered correctly, the most likely incorrect parameter is the host name"):le.throwErr(le.ERR_INVALID_CONNECT_STRING_PARAMETERS,n.message)}await this.connect1(r,s,e)}forceDisconnect(e){this.connected&&(this.ntAdapter.stream.destroy(e),this.connected=!1)}disconnect(e){this.connected&&(e!=x.NSFIMM&&!this.ntAdapter.err&&(this.sndDatapkt.dataLen=this.sndDatapkt.offset,this.sndDatapkt.prepare2Send(x.NSPDAFEOF),this._sendPacket(this.sndDatapkt.dataBuf)),this.ntAdapter.disconnect(e),this.ntAdapter=null,this.connected=!1)}getOption(e){switch(e){case x.NS_MOREDATA:return this.ntAdapter.packets.length>0;case x.SVCNAME:return ct(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"]);case x.SID:return ct(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SID"]);case x.SERVERTYPE:return ct(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVER"]);case x.REMOTEADDR:return this.ntAdapter?this.ntAdapter.getOption(e):null;case x.CONNCLASS:return ct(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","POOL_CONNECTION_CLASS"]);case x.PURITY:return ct(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","POOL_PURITY"]);case x.HEALTHCHECK:return this.connected&&this.ntAdapter.connected&&!this.ntAdapter.err;default:le.throwErr(le.ERR_INTERNAL,"getOption not supported for opcode "+e)}}recvInbandNotif(){let e=0;if(this.controlPkt.errno)return e=this.controlPkt.errno,e;if(this.getOption(x.HEALTHCHECK))if(this.getOption(x.NS_MOREDATA)){let t=this.ntAdapter.syncReceive();return t.type==x.NSPTCNL?(this.controlPkt.fromPacket(t),e=this.controlPkt.errno,e):(this.ntAdapter.packets.unshift(t),0)}else return 0;else return le.ERR_CONNECTION_CLOSED}};T(Fa,"NetworkSession");var Va=Fa;mS.exports={NetworkSession:Va,resolveAddress:Ma,getConnectionInfo:Op}});var va=I((sO,Ga)=>{"use strict";var{Buffer:Lp}=require("buffer"),be=Ye(),IS=U(),yp=Ee(),Ha=class Ha{constructor(e,t=!1){this.bindName=e,this.isReturnBind=t,this.maxSize=0,this.numElements=0,this.maxArraySize=0,this.type=null,this.isArray=!1,this.dir=be.BIND_IN,this.bindVar=null}};T(Ha,"BindInfo");var _r=Ha;Ga.exports.BindInfo=_r;var qa=class qa{constructor(){this.returningKeywordFound=!1,this.pos=0,this.maxPos=0,this.sqlData=""}_parseBindName(e){let t=!1,s=!1,r=!1,n=0,o=this.pos+1,a,c;for(;o<=this.maxPos;){if(c=this.sqlData[o],s){if(r&&!new RegExp("\\p{N}","u").test(c)){this.pos=o-1;break}else if(t&&c==='"'){this.pos=o;break}else if(!r&&!t&&!/[\p{L}\p{N}]/u.test(c)&&!["$","_","#"].includes(c)){this.pos=o-1;break}}else{if(new RegExp("\\p{space}","u").test(c)){o+=1;continue}else if(c==='"')t=!0;else if(new RegExp("\\p{N}","u").test(c))r=!0;else if(!new RegExp("\\p{Alpha}","u").test(c))break;s=!0,n=o}o+=1}s&&(t?a=e.sql.substring(n+1,o):r?a=e.sql.substring(n,o):a=e.sql.substring(n,o).toUpperCase(),e._addBind(a))}_parseMultiLineComment(){let e=!1,t=!1,s=this.pos+1,r;for(;s<=this.maxPos;){if(r=this.sqlData[s],e){if(r==="*")t=!0;else if(t){if(r==="/"){this.pos=s;break}t=!1}}else{if(r!=="*")break;e=!0}s+=1}}_parseQstring(){let e=!1,t=!1,s,r;for(this.pos+=1;this.pos<=this.maxPos;){if(r=this.sqlData[this.pos],!t)r==="["?s="]":r==="{"?s="}":r==="("?s=")":r==="<"?s=">":s=r,t=!0;else if(!e&&r===s)e=!0;else if(e){if(r==="'")break;r!==s&&(e=!1)}this.pos+=1}}_parseQuotedString(e){let t;for(this.pos+=1;this.pos<=this.maxPos&&(t=this.sqlData[this.pos],t!==e);)this.pos+=1}_parseSingleLineComment(){let e=!1,t=this.pos+1,s;for(;t<=this.maxPos;){if(s=this.sqlData[t],e){if(s===`
`)break}else{if(s!=="-")return;e=!0}t+=1}this.pos=t}parse(e){let t=!1,s=!1,r,n="",o="",a=0,c,E,l=!1,u;for(this.pos=0,this.maxPos=e.sql.length-1,this.sqlData=e.sql;this.pos<=this.maxPos;){if(r=this.sqlData[this.pos],E=new RegExp("\\p{L}","u").test(r),E&&!l)a=this.pos,o=r;else if(!E&&l){if(c=this.pos-a,t)e.isDml&&!this.returningKeywordFound&&(c===9||c===6)&&["r","R"].includes(o)?(u=e.sql.substring(a,this.pos).toUpperCase(),["RETURNING","RETURN"].includes(u)&&(this.returningKeywordFound=!0)):this.returningKeywordFound&&c===4&&["i","I"].includes(o)&&(u=e.sql.substring(a,this.pos).toUpperCase(),u==="INTO"&&(e.isReturning=!0));else if(u=e.sql.substring(a,this.pos).toUpperCase(),e._determineStatementType(u),t=!0,e.isDdl)break}r==="'"?(s=!0,["q","Q"].includes(n)?this._parseQstring():this._parseQuotedString(r)):new RegExp("\\p{space}","u").test(r)||(r==="-"?this._parseSingleLineComment():r==="/"?this._parseMultiLineComment():r==='"'?this._parseQuotedString(r):r===":"&&!s&&this._parseBindName(e),s=!1),this.pos+=1,l=E,n=r}t||e._determineStatementType(e.sql.toUpperCase())}};T(qa,"Parser");var ka=qa,fi=class fi{constructor(){this.sql="",this.sqlBytes=[],this.sqlLength=0,this.cursorId=0,this.requiresDefine=!1,this.isQuery=!1,this.isPlSql=!1,this.isDml=!1,this.isDdl=!1,this.isReturning=!1,this.bindInfoList=[],this.queryVars=[],this.bindInfoDict=new Map,this.requiresFullExecute=!1,this.noPrefetch=!1,this.returnToCache=!1,this.numColumns=0,this.lastRowIndex,this.lastRowid,this.moreRowsToFetch=!0,this.inUse=!1,this.bufferRowIndex=0,this.bufferRowCount=0,this.pendingClear=!1,this.statementType=be.STMT_TYPE_UNKNOWN}_copy(){let e=new fi;e.sql=this.sql,e.sqlBytes=this.sqlBytes,e.sqlLength=this.sqlLength,e.isQuery=this.isQuery,e.isPlSql=this.isPlSql,e.isDml=this.isDml,e.isDdl=this.isDdl,e.isReturning=this.isReturning,e.bindInfoList=[];for(let s of this.bindInfoList){let r=new _r(s.bindName,s.isReturnBind);e.bindInfoList.push(r)}let t=e.bindInfoDict=new Map;for(let s of e.bindInfoList)t.has(s.bindName)?t.get(s.bindName).push(s):t.set(s.bindName,[s]);return e.returnToCache=!1,e}_determineStatementType(e){switch(e){case"DECLARE":this.isPlSql=!0,this.statementType=be.STMT_TYPE_DECLARE;break;case"CALL":this.isPlSql=!0,this.statementType=be.STMT_TYPE_CALL;break;case"BEGIN":this.isPlSql=!0,this.statementType=be.STMT_TYPE_BEGIN;break;case"SELECT":this.isQuery=!0,this.statementType=be.STMT_TYPE_SELECT;break;case"WITH":this.isQuery=!0;break;case"INSERT":this.isDml=!0,this.statementType=be.STMT_TYPE_INSERT;break;case"UPDATE":this.isDml=!0,this.statementType=be.STMT_TYPE_UPDATE;break;case"DELETE":this.isDml=!0,this.statementType=be.STMT_TYPE_DELETE;break;case"MERGE":this.isDml=!0,this.statementType=be.STMT_TYPE_MERGE;break;case"ALTER":this.isDdl=!0,this.statementType=be.STMT_TYPE_ALTER;break;case"CREATE":this.isDdl=!0,this.statementType=be.STMT_TYPE_CREATE;break;case"DROP":this.isDdl=!0,this.statementType=be.STMT_TYPE_DROP;break;case"ANALYZE":case"AUDIT":case"COMMENT":case"GRANT":case"REVOKE":case"TRUNCATE":this.isDdl=!0;break;case"COMMIT":this.statementType=be.STMT_TYPE_COMMIT;break;case"ROLLBACK":this.statementType=be.STMT_TYPE_ROLLBACK;break;default:this.statementType=be.STMT_TYPE_UNKNOWN;break}}_prepare(e){this.sql=e,this.sqlBytes=Lp.from(this.sql,"utf8"),this.sqlLength=this.sqlBytes.length,new ka().parse(this)}_addBind(e){if(!this.isPlSql||!this.bindInfoDict.has(e)){let t=new _r(e,this.isReturning);this.bindInfoList.push(t),this.bindInfoDict.has(t.bindName)?(this.isReturning&&(this.bindInfoDict.get(t.bindName)[0].isReturnBind||IS.throwErr(IS.ERR_DML_RETURNING_DUP_BINDS,e)),this.bindInfoDict.get(t.bindName).push(t)):this.bindInfoDict.set(t.bindName,[t])}}_setVariable(e,t){t.type._oraTypeNum===yp.TNS_DATA_TYPE_CURSOR&&(this.requiresFullExecute=!0),(t.maxSize!==e.maxSize||t.dir!==e.dir||t.isArray!==e.isArray||t.values.length>e.numElements||t.type!=e.type||t.maxArraySize!=e.maxArraySize)&&(e.isArray=t.isArray,e.numElements=t.values.length,e.maxSize=t.maxSize,e.type=t.type,e.dir=t.dir,e.maxArraySize=t.maxArraySize,this.requiresFullExecute=!0),e.bindVar=t}_clearAllState(){this.cursorId=0,this.requiresDefine=!1,this.noPrefetch=!1,this.requiresFullExecute=!1,this.queryVars=[],this.numQueryVars=0,this.bufferRowCount=0,this.bufferRowIndex=0}_clearState(){this.cursorId=0,this.requiresDefine=!1,this.noPrefetch=!1,this.requiresFullExecute=!1}};T(fi,"Statement");var ba=fi;Ga.exports.Statement=ba});var CS=I((iO,DS)=>{"use strict";var{Buffer:$}=require("buffer"),Et=require("crypto"),di="aes-256-cbc",Bp=$.from([0,1]),Wa=class Wa{_decrypt(e,t){let s=$.alloc(16,0),r=Et.createDecipheriv(di,e,s);r.setAutoPadding(!1);let n=r.update(t);return n=$.concat([n,r.final()]),n}_encrypt(e,t,s){let n=$.alloc(16,0),o=16-t.length%16,a=$.alloc(o,o);o>0&&(s?t+=$.alloc(o):t=$.concat([t,a]));let c=Et.createCipheriv(di,e,n),E=c.update(t);return E=$.concat([E,c.final()]),s||(E=E.slice(0,t.length)),t.fill(0),E}_setEncryptedPasswordBuffers(e,t,s,r){let n=$.alloc(16);Et.randomFillSync(n,0,16);let o=$.concat([n,e]);if(r.encodedPassword=this._encrypt(s,o),o.fill(0),r.encodedPassword=r.encodedPassword.slice().toString("hex").toUpperCase(),t){let a=$.concat([n,t]);r.encodedNewPassword=this._encrypt(s,a),a.fill(0),r.encodedNewPassword=r.encodedNewPassword.slice().toString("hex").toUpperCase()}e.fill(0),t&&t.fill(0)}updateVerifierData(e,t,s,r,n){let o=32,a="sha512",c=$.from(e.AUTH_VFR_DATA,"hex"),E=$.from(e.AUTH_SESSKEY,"hex"),l=Number(e.AUTH_PBKDF2_VGEN_COUNT),u=$.from(t,"utf8"),p,d;if(r){di="aes-192-cbc",o=24,a="sha1";let O=Et.createHash(a);O.update(u),O.update(c);let y=O.digest();p=$.alloc(y.length+4),y.copy(p,0,0,y.length)}else{di="aes-256-cbc";let O=$.from("AUTH_PBKDF2_SPEEDY_KEY","utf8"),y=$.concat([c,O]);d=Et.pbkdf2Sync(u,y,l,64,"sha512");let W=Et.createHash(a);W.update(d),W.update(c),p=W.digest().slice(0,o)}let N;s&&(N=$.from(s,"utf8"));let A=this._decrypt(p,E),P=$.alloc(A.length);Et.randomFillSync(P);let S=this._encrypt(p,P);if(A.length===48){n.sessionKey=S.slice().toString("hex").toUpperCase().slice(0,96);let O=$.alloc(24);for(let q=16;q<=40;q++)O[q-16]=A[q]^P[q];let y=Et.createHash("md5").update(O.subarray(0,16)).digest(),W=Et.createHash("md5").update(O.subarray(16)).digest();n.comboKey=$.concat([y,W]).slice(0,o)}else{n.sessionKey=S.slice().toString("hex").toUpperCase().slice(0,64);let O=$.from(e.AUTH_PBKDF2_CSK_SALT,"hex");l=Number(e.AUTH_PBKDF2_SDER_COUNT);let W=$.concat([P.slice(0,o),A.slice(0,o)]).toString("hex").toUpperCase(),q=$.from(W,"utf8");n.comboKey=Et.pbkdf2Sync(q,O,l,o,"sha512")}let C=$.alloc(16);if(!r){Et.randomFillSync(C,0,16);let O=$.concat([C,d]);n.speedyKey=this._encrypt(n.comboKey,O),n.speedyKey=n.speedyKey.slice(0,80).toString("hex").toUpperCase()}this._setEncryptedPasswordBuffers(u,N,n.comboKey,n)}getEncryptedJSWPData(e,t){let s=this._encrypt(e,t,!0);return s=s.slice().toString("hex").toUpperCase(),s=$.concat([s,Bp]),s}updatePasswordsWithComboKey(e,t,s,r){let n=$.from(e,"utf8"),o;t&&(o=$.from(t,"utf8")),this._setEncryptedPasswordBuffers(n,o,s,r)}};T(Wa,"EncryptDecrypt");var Ka=Wa,wp=new Ka;DS.exports=wp});var yS=I((_O,LS)=>{"use strict";var{Buffer:Xa}=require("buffer"),K=Ee(),OS=U(),gS=require("process"),za=CS(),Yp=je(),Qa=tr(),or=Qa.CLIENT_INFO,Up=require("crypto"),ja=class ja extends Yp{constructor(e,t){super(e),this.functionCode=K.TNS_FUNC_AUTH_PHASE_ONE,this.messageType=K.TNS_MSG_TYPE_FUNCTION,this.sessionData={},this.conn=e,this.sessionKey="",this.encodedPassword="",this.changePassword=!1,Object.defineProperty(this,"password",{enumerable:!1,value:t.password}),this.username=t.user,this.username===void 0?this.username="":this.username=this.username.trim(),this.schemaUser="",this.proxyUser="",this.proxyStatus=-1,this.username.length!==0&&(this.proxyStatusObj=Qa.checkProxyUserValidity(this.username),this.proxyStatusObj.status===0&&(this.proxyStatus=0,this.proxyUser=this.proxyStatusObj.proxyUser,this.schemaUser=this.proxyStatusObj.schemaUser,this.username=this.proxyUser)),this.newPassword=t.newPassword,t.changePassword&&(this.changePassword=!0,this.functionCode=K.TNS_FUNC_AUTH_PHASE_TWO),this.username?this.userByteLen=Xa.byteLength(this.username):this.userByteLen=0,this.token=t.token,this.token&&(this.functionCode=K.TNS_FUNC_AUTH_PHASE_TWO),this.privateKey=t.privateKey,this.privateKey&&(this.privateKey=Qa.normalizePrivateKey(this.privateKey)),this.serviceName=this.conn.serviceName,this.remoteAddress=this.conn.remoteAddress,this.setAuthMode(t)}setAuthMode(e){this.newPassword||(this.authMode=K.TNS_AUTH_MODE_LOGON),e.privilege&K.SYSDBA&&(this.authMode|=K.TNS_AUTH_MODE_SYSDBA),e.privilege&K.SYSOPER&&(this.authMode|=K.TNS_AUTH_MODE_SYSOPER),e.privilege&K.SYSASM&&(this.authMode|=K.TNS_AUTH_MODE_SYSASM),e.privilege&K.SYSBKP&&(this.authMode|=K.TNS_AUTH_MODE_SYSBKP),e.privilege&K.SYSDG&&(this.authMode|=K.TNS_AUTH_MODE_SYSDGD),e.privilege&K.SYSKM&&(this.authMode|=K.TNS_AUTH_MODE_SYSKMT),e.privilege&K.SYSRAC&&(this.authMode|=K.TNS_AUTH_MODE_SYSRAC),this.privateKey&&(this.authMode|=K.TNS_AUTH_MODE_IAM_TOKEN),this.newPassword&&(this.authMode|=K.TNS_AUTH_MODE_CHANGE_PASSWORD),this.token||(this.authMode|=K.TNS_AUTH_MODE_WITH_PASSWORD)}getAlterTimezoneStatement(){let e,t;if(gS.env.ORA_SDTZ)t=gS.env.ORA_SDTZ;else{let r=new Date().getTimezoneOffset(),n=Math.trunc(r/60),o=Math.abs((r-n*60)%60);n<0?(e="+",n=-n):e="-",n=n.toLocaleString("en-US",{minimumIntegerDigits:2}),t=`${e}${n}:${o}`}return`ALTER SESSION SET TIME_ZONE ='${t}'\0`}encode(e){let t=!1;if(this.writeFunctionHeader(e),this.userByteLen>0?e.writeUInt8(1):e.writeUInt8(0),e.writeUB4(this.userByteLen),e.writeUB4(this.authMode),this.functionCode===K.TNS_FUNC_AUTH_PHASE_ONE)e.writeUInt8(1),e.writeUB4(5),e.writeUInt8(0),e.writeUInt8(1),this.userByteLen>0&&e.writeBytesWithLength(Xa.from(this.username)),e.writeKeyValue("AUTH_TERMINAL",or.terminal),e.writeKeyValue("AUTH_PROGRAM_NM",or.program),e.writeKeyValue("AUTH_MACHINE",or.hostName),e.writeKeyValue("AUTH_PID",or.pid),e.writeKeyValue("AUTH_SID",or.userName);else{let s=0;if(this.changePassword?(za.updatePasswordsWithComboKey(this.password,this.newPassword,this.conn.comboKey,this),s=2):(s=4,this.token?s+=1:(s+=2,this.verifierType===K.TNS_VERIFIER_TYPE_11G_1||this.verifierType===K.TNS_VERIFIER_TYPE_11G_2?t=!0:this.verifierType!==K.TNS_VERIFIER_TYPE_12C?OS.throwErr(OS.ERR_UNSUPPORTED_VERIFIER_TYPE,this.verifierType.toString(16)):s+=1,za.updateVerifierData(this.sessionData,this.password,this.newPassword,t,this),this.conn.comboKey=this.comboKey,this.newPassword&&(s+=1)),this.privateKey&&(s+=2),this.conn.connectionClass&&(s+=1),this.conn.purity&&(s+=1),this.conn.jdwpData&&(this.encryptedJDWPData=za.getEncryptedJSWPData(this.sessionKey,this.conn.jdwpData),s+=1),this.schemaUser.length!==0&&(s+=1)),e.writeUInt8(1),e.writeUB4(s),e.writeUInt8(1),e.writeUInt8(1),this.userByteLen>0&&e.writeBytesWithLength(Xa.from(this.username)),this.token?e.writeKeyValue("AUTH_TOKEN",this.token):this.changePassword||(e.writeKeyValue("AUTH_SESSKEY",this.sessionKey,1),t||e.writeKeyValue("AUTH_PBKDF2_SPEEDY_KEY",this.speedyKey)),this.changePassword||(e.writeKeyValue("SESSION_CLIENT_CHARSET","873"),e.writeKeyValue("SESSION_CLIENT_DRIVER_NAME",K.DRIVER_NAME),e.writeKeyValue("SESSION_CLIENT_VERSION",K.CLIENT_VERSION.toString()),e.writeKeyValue("AUTH_ALTER_SESSION",this.getAlterTimezoneStatement(),1)),this.encodedPassword&&e.writeKeyValue("AUTH_PASSWORD",this.encodedPassword),this.proxyStatus===0&&e.writeKeyValue("PROXY_CLIENT_NAME",this.schemaUser),this.encodedNewPassword&&e.writeKeyValue("AUTH_NEWPASSWORD",this.encodedNewPassword),this.conn.connectionClass&&e.writeKeyValue("AUTH_KPPL_CONN_CLASS",this.conn.connectionClass),this.conn.purity&&e.writeKeyValue("AUTH_KPPL_PURITY",""+this.conn.purity),this.privateKey){let o="date: "+new Date().toGMTString()+`
(request-target): `+this.serviceName+`
host: `+this.remoteAddress,a=Up.createSign("RSA-SHA256").update(o).sign(this.privateKey,"base64");e.writeKeyValue("AUTH_HEADER",o),e.writeKeyValue("AUTH_SIGNATURE",a)}this.conn.jdwpData&&e.writeKeyValue("AUTH_ORA_DEBUG_JDWP",this.encryptedJDWPData)}}processReturnParameter(e){let t=e.readUB2();for(let s=0;s<t;s++){e.skipUB4();let r=e.readStr(K.CSFRM_IMPLICIT),n="";e.readUB4()>0&&(n=e.readStr(K.CSFRM_IMPLICIT));let a=e.readUB4();r==="AUTH_VFR_DATA"&&(this.verifierType=a),this.sessionData[r]=n}if(this.functionCode===K.TNS_FUNC_AUTH_PHASE_ONE)this.functionCode=K.TNS_FUNC_AUTH_PHASE_TWO;else{let s,r,n,o;this.conn.dbDomain=this.sessionData.AUTH_SC_DB_DOMAIN,this.conn.dbName=this.sessionData.AUTH_SC_DBUNIQUE_NAME,this.conn.maxOpenCursors=Number(this.sessionData.AUTH_MAX_OPEN_CURSORS||0),this.conn.serviceName=this.sessionData.AUTH_SC_SERVICE_NAME,this.conn.instanceName=this.sessionData.AUTH_INSTANCENAME;let a=Number(this.sessionData.AUTH_VERSION_NO),c=a>>24&255;this.conn.warning=this.warning,e.caps.ttcFieldVersion>=K.TNS_CCAP_FIELD_VERSION_18_1_EXT_1?(s=a>>16&255,r=a>>12&15,n=a>>4&255,o=a&15):(s=a>>20&15,r=a>>12&255,n=a>>8&15,o=a&255),this.conn.serverVersionString=c+"."+s+"."+r+"."+n+"."+o,this.conn.serverVersion=c*1e8+s*1e6+r*1e4+n*100+o*1}}};T(ja,"AuthMessage");var Ja=ja;LS.exports=Ja});var wS=I((aO,BS)=>{"use strict";var Mp=je(),Vp=Ee(),$a=class $a extends Mp{constructor(e){super(e),this.functionCode=Vp.TNS_FUNC_COMMIT}encode(e){this.writeFunctionHeader(e)}};T($a,"CommitMessage");var Za=$a;BS.exports=Za});var US=I((cO,YS)=>{"use strict";var _=Ee(),Fp=je(),tT=class tT extends Fp{processMessage(e,t){if(t===_.TNS_MSG_TYPE_DATA_TYPES){for(;e.readUInt16BE()!==0;)e.readUInt16BE()!==0&&e.skipBytes(4);this.endOfResponse=!this.connection.nscon.endOfRequestSupport}else super.processMessage(e,t)}encode(e){e.writeUInt8(_.TNS_MSG_TYPE_DATA_TYPES),e.writeUInt16LE(_.TNS_CHARSET_UTF8),e.writeUInt16LE(_.TNS_CHARSET_UTF8),e.writeUInt8(_.TNS_ENCODING_MULTI_BYTE|_.TNS_ENCODING_CONV_LENGTH),e.writeBytesWithLength(e.caps.compileCaps),e.writeBytesWithLength(e.caps.runtimeCaps);for(let t of xp)e.writeUInt16BE(t[0]),e.writeUInt16BE(t[1]),e.writeUInt16BE(t[2]),e.writeUInt16BE(0);e.writeUInt16BE(0)}};T(tT,"DataTypeMessage");var eT=tT,xp=[[_.TNS_DATA_TYPE_VARCHAR,_.TNS_DATA_TYPE_VARCHAR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_NUMBER,_.TNS_DATA_TYPE_NUMBER,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_LONG,_.TNS_DATA_TYPE_LONG,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DATE,_.TNS_DATA_TYPE_DATE,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_RAW,_.TNS_DATA_TYPE_RAW,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_LONG_RAW,_.TNS_DATA_TYPE_LONG_RAW,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_UB2,_.TNS_DATA_TYPE_UB2,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_UB4,_.TNS_DATA_TYPE_UB4,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SB1,_.TNS_DATA_TYPE_SB1,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_SB2,_.TNS_DATA_TYPE_SB2,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SB4,_.TNS_DATA_TYPE_SB4,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SWORD,_.TNS_DATA_TYPE_SWORD,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_UWORD,_.TNS_DATA_TYPE_UWORD,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PTRB,_.TNS_DATA_TYPE_PTRB,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PTRW,_.TNS_DATA_TYPE_PTRW,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TIDDEF,_.TNS_DATA_TYPE_TIDDEF,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ROWID,_.TNS_DATA_TYPE_ROWID,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AMS,_.TNS_DATA_TYPE_AMS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_BRN,_.TNS_DATA_TYPE_BRN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_CWD,_.TNS_DATA_TYPE_CWD,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OAC122,_.TNS_DATA_TYPE_OAC122,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OER8,_.TNS_DATA_TYPE_OER8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_FUN,_.TNS_DATA_TYPE_FUN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AUA,_.TNS_DATA_TYPE_AUA,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RXH7,_.TNS_DATA_TYPE_RXH7,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_NA6,_.TNS_DATA_TYPE_NA6,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_BRP,_.TNS_DATA_TYPE_BRP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_BRV,_.TNS_DATA_TYPE_BRV,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KVA,_.TNS_DATA_TYPE_KVA,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_CLS,_.TNS_DATA_TYPE_CLS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_CUI,_.TNS_DATA_TYPE_CUI,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DFN,_.TNS_DATA_TYPE_DFN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DQR,_.TNS_DATA_TYPE_DQR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSC,_.TNS_DATA_TYPE_DSC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_EXE,_.TNS_DATA_TYPE_EXE,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_FCH,_.TNS_DATA_TYPE_FCH,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_GBV,_.TNS_DATA_TYPE_GBV,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_GEM,_.TNS_DATA_TYPE_GEM,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_GIV,_.TNS_DATA_TYPE_GIV,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OKG,_.TNS_DATA_TYPE_OKG,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_HMI,_.TNS_DATA_TYPE_HMI,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_INO,_.TNS_DATA_TYPE_INO,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_LNF,_.TNS_DATA_TYPE_LNF,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ONT,_.TNS_DATA_TYPE_ONT,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OPE,_.TNS_DATA_TYPE_OPE,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OSQ,_.TNS_DATA_TYPE_OSQ,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SFE,_.TNS_DATA_TYPE_SFE,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SPF,_.TNS_DATA_TYPE_SPF,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_VSN,_.TNS_DATA_TYPE_VSN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_UD7,_.TNS_DATA_TYPE_UD7,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSA,_.TNS_DATA_TYPE_DSA,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PIN,_.TNS_DATA_TYPE_PIN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PFN,_.TNS_DATA_TYPE_PFN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PPT,_.TNS_DATA_TYPE_PPT,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_STO,_.TNS_DATA_TYPE_STO,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ARC,_.TNS_DATA_TYPE_ARC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_MRS,_.TNS_DATA_TYPE_MRS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_MRT,_.TNS_DATA_TYPE_MRT,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_MRG,_.TNS_DATA_TYPE_MRG,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_MRR,_.TNS_DATA_TYPE_MRR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_MRC,_.TNS_DATA_TYPE_MRC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_VER,_.TNS_DATA_TYPE_VER,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_LON2,_.TNS_DATA_TYPE_LON2,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_INO2,_.TNS_DATA_TYPE_INO2,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ALL,_.TNS_DATA_TYPE_ALL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_UDB,_.TNS_DATA_TYPE_UDB,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AQI,_.TNS_DATA_TYPE_AQI,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ULB,_.TNS_DATA_TYPE_ULB,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ULD,_.TNS_DATA_TYPE_ULD,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SID,_.TNS_DATA_TYPE_SID,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_NA7,_.TNS_DATA_TYPE_NA7,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AL7,_.TNS_DATA_TYPE_AL7,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_K2RPC,_.TNS_DATA_TYPE_K2RPC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XDP,_.TNS_DATA_TYPE_XDP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OKO8,_.TNS_DATA_TYPE_OKO8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_UD12,_.TNS_DATA_TYPE_UD12,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AL8,_.TNS_DATA_TYPE_AL8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_LFOP,_.TNS_DATA_TYPE_LFOP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_FCRT,_.TNS_DATA_TYPE_FCRT,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DNY,_.TNS_DATA_TYPE_DNY,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OPR,_.TNS_DATA_TYPE_OPR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PLS,_.TNS_DATA_TYPE_PLS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XID,_.TNS_DATA_TYPE_XID,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TXN,_.TNS_DATA_TYPE_TXN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DCB,_.TNS_DATA_TYPE_DCB,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_CCA,_.TNS_DATA_TYPE_CCA,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_WRN,_.TNS_DATA_TYPE_WRN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TLH,_.TNS_DATA_TYPE_TLH,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TOH,_.TNS_DATA_TYPE_TOH,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_FOI,_.TNS_DATA_TYPE_FOI,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SID2,_.TNS_DATA_TYPE_SID2,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TCH,_.TNS_DATA_TYPE_TCH,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PII,_.TNS_DATA_TYPE_PII,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PFI,_.TNS_DATA_TYPE_PFI,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PPU,_.TNS_DATA_TYPE_PPU,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PTE,_.TNS_DATA_TYPE_PTE,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RXH8,_.TNS_DATA_TYPE_RXH8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_N12,_.TNS_DATA_TYPE_N12,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AUTH,_.TNS_DATA_TYPE_AUTH,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KVAL,_.TNS_DATA_TYPE_KVAL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_FGI,_.TNS_DATA_TYPE_FGI,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSY,_.TNS_DATA_TYPE_DSY,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYR8,_.TNS_DATA_TYPE_DSYR8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYH8,_.TNS_DATA_TYPE_DSYH8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYL,_.TNS_DATA_TYPE_DSYL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYT8,_.TNS_DATA_TYPE_DSYT8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYV8,_.TNS_DATA_TYPE_DSYV8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYP,_.TNS_DATA_TYPE_DSYP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYF,_.TNS_DATA_TYPE_DSYF,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYK,_.TNS_DATA_TYPE_DSYK,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYY,_.TNS_DATA_TYPE_DSYY,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYQ,_.TNS_DATA_TYPE_DSYQ,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYC,_.TNS_DATA_TYPE_DSYC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYA,_.TNS_DATA_TYPE_DSYA,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OT8,_.TNS_DATA_TYPE_OT8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYTY,_.TNS_DATA_TYPE_DSYTY,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AQE,_.TNS_DATA_TYPE_AQE,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KV,_.TNS_DATA_TYPE_KV,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AQD,_.TNS_DATA_TYPE_AQD,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AQ8,_.TNS_DATA_TYPE_AQ8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RFS,_.TNS_DATA_TYPE_RFS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RXH10,_.TNS_DATA_TYPE_RXH10,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPN,_.TNS_DATA_TYPE_KPN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPDNR,_.TNS_DATA_TYPE_KPDNR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYD,_.TNS_DATA_TYPE_DSYD,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYS,_.TNS_DATA_TYPE_DSYS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYR,_.TNS_DATA_TYPE_DSYR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYH,_.TNS_DATA_TYPE_DSYH,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYT,_.TNS_DATA_TYPE_DSYT,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DSYV,_.TNS_DATA_TYPE_DSYV,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AQM,_.TNS_DATA_TYPE_AQM,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OER11,_.TNS_DATA_TYPE_OER11,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AQL,_.TNS_DATA_TYPE_AQL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OTC,_.TNS_DATA_TYPE_OTC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KFNO,_.TNS_DATA_TYPE_KFNO,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KFNP,_.TNS_DATA_TYPE_KFNP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KGT8,_.TNS_DATA_TYPE_KGT8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RASB4,_.TNS_DATA_TYPE_RASB4,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RAUB2,_.TNS_DATA_TYPE_RAUB2,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RAUB1,_.TNS_DATA_TYPE_RAUB1,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RATXT,_.TNS_DATA_TYPE_RATXT,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RSSB4,_.TNS_DATA_TYPE_RSSB4,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RSUB2,_.TNS_DATA_TYPE_RSUB2,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RSUB1,_.TNS_DATA_TYPE_RSUB1,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RSTXT,_.TNS_DATA_TYPE_RSTXT,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RIDL,_.TNS_DATA_TYPE_RIDL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_GLRDD,_.TNS_DATA_TYPE_GLRDD,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_GLRDG,_.TNS_DATA_TYPE_GLRDG,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_GLRDC,_.TNS_DATA_TYPE_GLRDC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OKO,_.TNS_DATA_TYPE_OKO,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DPP,_.TNS_DATA_TYPE_DPP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DPLS,_.TNS_DATA_TYPE_DPLS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DPMOP,_.TNS_DATA_TYPE_DPMOP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_STAT,_.TNS_DATA_TYPE_STAT,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RFX,_.TNS_DATA_TYPE_RFX,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_FAL,_.TNS_DATA_TYPE_FAL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_CKV,_.TNS_DATA_TYPE_CKV,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DRCX,_.TNS_DATA_TYPE_DRCX,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KGH,_.TNS_DATA_TYPE_KGH,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AQO,_.TNS_DATA_TYPE_AQO,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OKGT,_.TNS_DATA_TYPE_OKGT,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPFC,_.TNS_DATA_TYPE_KPFC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_FE2,_.TNS_DATA_TYPE_FE2,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SPFP,_.TNS_DATA_TYPE_SPFP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DPULS,_.TNS_DATA_TYPE_DPULS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AQA,_.TNS_DATA_TYPE_AQA,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPBF,_.TNS_DATA_TYPE_KPBF,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TSM,_.TNS_DATA_TYPE_TSM,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_MSS,_.TNS_DATA_TYPE_MSS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPC,_.TNS_DATA_TYPE_KPC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_CRS,_.TNS_DATA_TYPE_CRS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KKS,_.TNS_DATA_TYPE_KKS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KSP,_.TNS_DATA_TYPE_KSP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KSPTOP,_.TNS_DATA_TYPE_KSPTOP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KSPVAL,_.TNS_DATA_TYPE_KSPVAL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PSS,_.TNS_DATA_TYPE_PSS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_NLS,_.TNS_DATA_TYPE_NLS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ALS,_.TNS_DATA_TYPE_ALS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KSDEVTVAL,_.TNS_DATA_TYPE_KSDEVTVAL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KSDEVTTOP,_.TNS_DATA_TYPE_KSDEVTTOP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPSPP,_.TNS_DATA_TYPE_KPSPP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KOL,_.TNS_DATA_TYPE_KOL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_LST,_.TNS_DATA_TYPE_LST,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ACX,_.TNS_DATA_TYPE_ACX,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SCS,_.TNS_DATA_TYPE_SCS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RXH,_.TNS_DATA_TYPE_RXH,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPDNS,_.TNS_DATA_TYPE_KPDNS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPDCN,_.TNS_DATA_TYPE_KPDCN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPNNS,_.TNS_DATA_TYPE_KPNNS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPNCN,_.TNS_DATA_TYPE_KPNCN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPS,_.TNS_DATA_TYPE_KPS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_APINF,_.TNS_DATA_TYPE_APINF,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TEN,_.TNS_DATA_TYPE_TEN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSSCS,_.TNS_DATA_TYPE_XSSCS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSSSO,_.TNS_DATA_TYPE_XSSSO,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSSAO,_.TNS_DATA_TYPE_XSSAO,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KSRPC,_.TNS_DATA_TYPE_KSRPC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KVL,_.TNS_DATA_TYPE_KVL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSSDEF,_.TNS_DATA_TYPE_XSSDEF,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PDQCINV,_.TNS_DATA_TYPE_PDQCINV,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PDQIDC,_.TNS_DATA_TYPE_PDQIDC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPDQCSTA,_.TNS_DATA_TYPE_KPDQCSTA,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPRS,_.TNS_DATA_TYPE_KPRS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPDQIDC,_.TNS_DATA_TYPE_KPDQIDC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RTSTRM,_.TNS_DATA_TYPE_RTSTRM,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SESSGET,_.TNS_DATA_TYPE_SESSGET,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SESSREL,_.TNS_DATA_TYPE_SESSREL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SESSRET,_.TNS_DATA_TYPE_SESSRET,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SCN6,_.TNS_DATA_TYPE_SCN6,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KECPA,_.TNS_DATA_TYPE_KECPA,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KECPP,_.TNS_DATA_TYPE_KECPP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SXA,_.TNS_DATA_TYPE_SXA,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KVARR,_.TNS_DATA_TYPE_KVARR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPNGN,_.TNS_DATA_TYPE_KPNGN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_BINARY_INTEGER,_.TNS_DATA_TYPE_NUMBER,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_FLOAT,_.TNS_DATA_TYPE_NUMBER,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_STR,_.TNS_DATA_TYPE_VARCHAR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_VNU,_.TNS_DATA_TYPE_NUMBER,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_PDN,_.TNS_DATA_TYPE_NUMBER,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_VCS,_.TNS_DATA_TYPE_VARCHAR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_VBI,_.TNS_DATA_TYPE_VARCHAR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OAC9,_.TNS_DATA_TYPE_OAC9,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_UIN,_.TNS_DATA_TYPE_NUMBER,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_SLS,_.TNS_DATA_TYPE_NUMBER,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_LVC,_.TNS_DATA_TYPE_VARCHAR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_LVB,_.TNS_DATA_TYPE_RAW,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_CHAR,_.TNS_DATA_TYPE_CHAR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AVC,_.TNS_DATA_TYPE_CHAR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_BINARY_FLOAT,_.TNS_DATA_TYPE_BINARY_FLOAT,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_BINARY_DOUBLE,_.TNS_DATA_TYPE_BINARY_DOUBLE,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_CURSOR,_.TNS_DATA_TYPE_CURSOR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RDD,_.TNS_DATA_TYPE_ROWID,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OSL,_.TNS_DATA_TYPE_OSL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_EXT_NAMED,_.TNS_DATA_TYPE_INT_NAMED,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_INT_NAMED,_.TNS_DATA_TYPE_INT_NAMED,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_EXT_REF,_.TNS_DATA_TYPE_INT_REF,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_INT_REF,_.TNS_DATA_TYPE_INT_REF,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_CLOB,_.TNS_DATA_TYPE_CLOB,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_BLOB,_.TNS_DATA_TYPE_BLOB,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_BFILE,_.TNS_DATA_TYPE_BFILE,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_CFILE,_.TNS_DATA_TYPE_CFILE,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_RSET,_.TNS_DATA_TYPE_CURSOR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_JSON,_.TNS_DATA_TYPE_JSON,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DJSON,_.TNS_DATA_TYPE_DJSON,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_CLV,_.TNS_DATA_TYPE_CLV,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DTR,_.TNS_DATA_TYPE_NUMBER,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_DUN,_.TNS_DATA_TYPE_NUMBER,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_DOP,_.TNS_DATA_TYPE_NUMBER,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_VST,_.TNS_DATA_TYPE_VARCHAR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ODT,_.TNS_DATA_TYPE_DATE,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_DOL,_.TNS_DATA_TYPE_NUMBER,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_TIME,_.TNS_DATA_TYPE_TIME,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TIME_TZ,_.TNS_DATA_TYPE_TIME_TZ,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TIMESTAMP,_.TNS_DATA_TYPE_TIMESTAMP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TIMESTAMP_TZ,_.TNS_DATA_TYPE_TIMESTAMP_TZ,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_INTERVAL_YM,_.TNS_DATA_TYPE_INTERVAL_YM,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_INTERVAL_DS,_.TNS_DATA_TYPE_INTERVAL_DS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_EDATE,_.TNS_DATA_TYPE_DATE,_.TNS_TYPE_REP_ORACLE],[_.TNS_DATA_TYPE_ETIME,_.TNS_DATA_TYPE_ETIME,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ETTZ,_.TNS_DATA_TYPE_ETTZ,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ESTAMP,_.TNS_DATA_TYPE_ESTAMP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ESTZ,_.TNS_DATA_TYPE_ESTZ,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_EIYM,_.TNS_DATA_TYPE_EIYM,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_EIDS,_.TNS_DATA_TYPE_EIDS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DCLOB,_.TNS_DATA_TYPE_CLOB,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DBLOB,_.TNS_DATA_TYPE_BLOB,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_DBFILE,_.TNS_DATA_TYPE_BFILE,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_UROWID,_.TNS_DATA_TYPE_UROWID,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TIMESTAMP_LTZ,_.TNS_DATA_TYPE_TIMESTAMP_LTZ,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_ESITZ,_.TNS_DATA_TYPE_TIMESTAMP_LTZ,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_UB8,_.TNS_DATA_TYPE_UB8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_PNTY,_.TNS_DATA_TYPE_INT_NAMED,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_BOOLEAN,_.TNS_DATA_TYPE_BOOLEAN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSNSOP,_.TNS_DATA_TYPE_XSNSOP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSATTR,_.TNS_DATA_TYPE_XSATTR,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSNS,_.TNS_DATA_TYPE_XSNS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_UB1ARRAY,_.TNS_DATA_TYPE_UB1ARRAY,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SESSSTATE,_.TNS_DATA_TYPE_SESSSTATE,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AC_REPLAY,_.TNS_DATA_TYPE_AC_REPLAY,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AC_CONT,_.TNS_DATA_TYPE_AC_CONT,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_IMPLRES,_.TNS_DATA_TYPE_IMPLRES,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OER19,_.TNS_DATA_TYPE_OER19,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TXT,_.TNS_DATA_TYPE_TXT,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSSESSNS,_.TNS_DATA_TYPE_XSSESSNS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSATTOP,_.TNS_DATA_TYPE_XSATTOP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSCREOP,_.TNS_DATA_TYPE_XSCREOP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSDETOP,_.TNS_DATA_TYPE_XSDETOP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSDESOP,_.TNS_DATA_TYPE_XSDESOP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSSETSP,_.TNS_DATA_TYPE_XSSETSP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSSIDP,_.TNS_DATA_TYPE_XSSIDP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSPRIN,_.TNS_DATA_TYPE_XSPRIN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSKVL,_.TNS_DATA_TYPE_XSKVL,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSSSDEF2,_.TNS_DATA_TYPE_XSSSDEF2,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSNSOP2,_.TNS_DATA_TYPE_XSNSOP2,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_XSNS2,_.TNS_DATA_TYPE_XSNS2,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPDNREQ,_.TNS_DATA_TYPE_KPDNREQ,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPDNRNF,_.TNS_DATA_TYPE_KPDNRNF,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPNGNC,_.TNS_DATA_TYPE_KPNGNC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPNRI,_.TNS_DATA_TYPE_KPNRI,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AQENQ,_.TNS_DATA_TYPE_AQENQ,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AQDEQ,_.TNS_DATA_TYPE_AQDEQ,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_AQJMS,_.TNS_DATA_TYPE_AQJMS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPDNRPAY,_.TNS_DATA_TYPE_KPDNRPAY,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPDNRACK,_.TNS_DATA_TYPE_KPDNRACK,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPDNRMP,_.TNS_DATA_TYPE_KPDNRMP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_KPDNRDQ,_.TNS_DATA_TYPE_KPDNRDQ,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SCN,_.TNS_DATA_TYPE_SCN,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_SCN8,_.TNS_DATA_TYPE_SCN8,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_CHUNKINFO,_.TNS_DATA_TYPE_CHUNKINFO,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_UD21,_.TNS_DATA_TYPE_UD21,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_UDS,_.TNS_DATA_TYPE_UDS,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_TNP,_.TNS_DATA_TYPE_TNP,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OER,_.TNS_DATA_TYPE_OER,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_OAC,_.TNS_DATA_TYPE_OAC,_.TNS_TYPE_REP_UNIVERSAL],[_.TNS_DATA_TYPE_VECTOR,_.TNS_DATA_TYPE_VECTOR,_.TNS_TYPE_REP_UNIVERSAL]];YS.exports=eT});var VS=I((lO,MS)=>{"use strict";var kp=je(),bp=Ee(),rT=class rT extends kp{constructor(e){super(e),this.functionCode=bp.TNS_FUNC_LOGOFF}encode(e){this.writePiggybacks(e),this.writeFunctionHeader(e)}};T(rT,"LogOffMessage");var sT=rT;MS.exports=sT});var xS=I((NO,FS)=>{"use strict";var Gp=je(),Hp=Ee(),nT=class nT extends Gp{constructor(e){super(e),this.functionCode=Hp.TNS_FUNC_PING}encode(e){this.writeFunctionHeader(e)}};T(nT,"PingMessage");var iT=nT;FS.exports=iT});var bS=I((uO,kS)=>{"use strict";var _T=Ee(),qp=je(),aT=class aT extends qp{encode(e){e.writeUInt8(_T.TNS_MSG_TYPE_PROTOCOL),e.writeUInt8(6),e.writeUInt8(0),e.writeStr("node-oracledb"),e.writeUInt8(0)}processMessage(e,t){t===_T.TNS_MSG_TYPE_PROTOCOL?(this.processProtocolInfo(e),this.endOfResponse=!this.connection.nscon.endOfRequestSupport):super.processMessage(e,t)}processProtocolInfo(e){this.serverVersion=e.readUInt8(),e.skipUB1(),this.serverBanner=e.readNullTerminatedBytes(48),e.caps.charSetID=e.readUInt16LE(),this.serverFlags=e.readUInt8();let t=e.readUInt16LE();t>0&&e.skipBytes(t*5);let s=e.readUInt16BE(),r=e.readBytes(s),n=6+r[5]+r[6];e.caps.nCharsetId=(r[n+3]<<8)+r[n+4];let o=e.readBytesWithLength();o&&(this.serverCompileCaps=Buffer.from(o),e.caps.adjustForServerCompileCaps(this.serverCompileCaps,this.connection.nscon),e.caps.ttcFieldVersion>=_T.TNS_CCAP_FIELD_VERSION_23_1?this.connection._osonMaxFieldNameSize=65535:this.connection._osonMaxFieldNameSize=255);let a=e.readBytesWithLength();a&&(this.serverRunTimeCaps=Buffer.from(a),e.caps.adjustForServerRuntimeCaps(this.serverRunTimeCaps))}};T(aT,"ProtocolMessage");var oT=aT;kS.exports=oT});var HS=I((fO,GS)=>{"use strict";var vp=je(),Kp=Ee(),cT=class cT extends vp{constructor(e){super(e),this.functionCode=Kp.TNS_FUNC_ROLLBACK}encode(e){this.writeFunctionHeader(e)}};T(cT,"RollbackMessage");var TT=cT;GS.exports=TT});var KS=I((PO,vS)=>{"use strict";var Wp=je(),qS=Ee(),lT=class lT extends Wp{constructor(e){super(e),this.functionCode=qS.TNS_FUNC_SESSION_RELEASE,this.messageType=qS.TNS_MSG_TYPE_ONEWAY_FN,this.sessReleaseMode=0}encode(e){this.writeFunctionHeader(e),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(this.sessReleaseMode)}decode(){}};T(lT,"SessionReleaseMessage");var ET=lT;vS.exports=ET});var XS=I((RO,WS)=>{"use strict";var ss=Ee(),Xp=je(),NT=class NT extends Xp{encode(e){e.writeUInt8(ss.TNS_MSG_TYPE_FAST_AUTH),e.writeUInt8(1),e.writeUInt8(ss.TNS_SERVER_CONVERTS_CHARS),e.writeUInt8(0),this.protocolMessage.encode(e),e.writeUInt16BE(0),e.writeUInt8(0),e.writeUInt16BE(0),e.caps.ttcFieldVersion=ss.TNS_CCAP_FIELD_VERSION_19_1_EXT_1,e.writeUInt8(e.caps.ttcFieldVersion),this.dataTypeMessage.encode(e),this.authMessage.encode(e),e.caps.ttcFieldVersion=ss.TNS_CCAP_FIELD_VERSION_MAX}processMessage(e,t){t===ss.TNS_MSG_TYPE_RENEGOTIATE?this.reNegotiate=!0:t===ss.TNS_MSG_TYPE_PROTOCOL?this.protocolMessage.processMessage(e,t):t===ss.TNS_MSG_TYPE_DATA_TYPES?this.dataTypeMessage.processMessage(e,t):(this.authMessage.processMessage(e,t),this.endOfResponse=this.authMessage.endOfResponse)}};T(NT,"FastAuthMessage");var hT=NT;WS.exports=hT});var QS=I((IO,zS)=>{"use strict";var zp=je(),Qp=Ee(),uT=class uT extends zp{constructor(e){super(e),this.functionCode=Qp.TNS_FUNC_TPC_TXN_CHANGE_STATE}processReturnParameter(e){this.state=e.readUB4()}encode(e){let t;this.xid&&(t=Buffer.alloc(128),this.xid.globalTransactionId.copy(t),this.xid.branchQualifier.copy(t,this.xid.globalTransactionId.length)),this.writeFunctionHeader(e),e.writeUB4(this.operation),this.context?(e.writeUInt8(1),e.writeUB4(this.context.length)):(e.writeUInt8(0),e.writeUB4(0)),this.xid?(e.writeUB4(this.xid.formatId),e.writeUB4(this.xid.globalTransactionId.length),e.writeUB4(this.xid.branchQualifier.length),e.writeUInt8(1),e.writeUB4(t.length)):(e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0)),e.writeUB4(0),e.writeUB4(this.state),e.writeUInt8(1),e.writeUB4(this.flags),this.context&&e.writeBytes(this.context),this.xid&&e.writeBytes(t)}};T(uT,"TransactionChangeStateMessage");var ST=uT;zS.exports=ST});var jS=I((CO,JS)=>{"use strict";var Jp=je(),jp=Ee(),fT=class fT extends Jp{constructor(e){super(e),this.functionCode=jp.TNS_FUNC_TPC_TXN_SWITCH,this.applicationValue=0,this.internalName=e.internalName,this.internalName&&(this.internalName=Buffer.from(this.internalName)),this.externalName=e.externalName,this.externalName&&(this.externalName=Buffer.from(this.externalName))}processReturnParameter(e){this.applicationValue=e.readUB4(),this.contextLen=e.readUB2(),this.contextLen>0&&(this.context=Buffer.from(e.readBytes(this.contextLen)))}encode(e){let t;this.xid&&(t=Buffer.alloc(128),this.xid.globalTransactionId.copy(t),this.xid.branchQualifier.copy(t,this.xid.globalTransactionId.length)),this.writeFunctionHeader(e),e.writeUB4(this.operation),this.context?(e.writeUInt8(1),e.writeUB4(this.context.length)):(e.writeUInt8(0),e.writeUB4(0)),this.xid?(e.writeUB4(this.xid.formatId),e.writeUB4(this.xid.globalTransactionId.length),e.writeUB4(this.xid.branchQualifier.length),e.writeUInt8(1),e.writeUB4(t.length)):(e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0)),e.writeUB4(this.flags),e.writeUB4(this.timeout),e.writeUInt8(1),e.writeUInt8(1),e.writeUInt8(1),this.internalName?(e.writeUInt8(1),e.writeUB4(this.internalName.length)):(e.writeUInt8(0),e.writeUB4(0)),this.externalName?(e.writeUInt8(1),e.writeUB4(this.externalName.length)):(e.writeUInt8(0),e.writeUB4(0)),this.context&&e.writeBytes(this.context),this.xid&&e.writeBytes(t),e.writeUB4(this.applicationValue),this.internalName&&e.writeBytes(this.internalName),this.externalName&&e.writeBytes(this.externalName)}};T(fT,"TransactionSwitchMessage");var AT=fT;JS.exports=AT});var $S=I((gO,ZS)=>{"use strict";var Zp=yS(),$p=wS(),eR=US(),tR=go(),sR=Bo(),rR=uo(),iR=VS(),nR=xS(),_R=bS(),oR=HS(),aR=KS(),TR=XS(),cR=QS(),ER=jS();ZS.exports={AuthMessage:Zp,CommitMessage:$p,FastAuthMessage:TR,DataTypeMessage:eR,ExecuteMessage:tR,FetchMessage:sR,LobOpMessage:rR,LogOffMessage:iR,PingMessage:nR,ProtocolMessage:_R,RollbackMessage:oR,SessionReleaseMessage:aR,TransactionChangeStateMessage:cR,TransactionSwitchMessage:ER}});var su=I((LO,tu)=>{var eu=U(),{Statement:lR}=va(),PT=class PT{constructor(e){this._cachedStatements=new Map,this._maxSize=e,this._cursorsToClose=new Set,this._openCursors=new Set}_addCursorToClose(e){if(this._cursorsToClose.has(e.cursorId)){let t=`attempt to close cursor ${e.cursorId} twice`;eu.throwErr(eu.ERR_INTERNAL,t)}e.cursorId!=0&&this._cursorsToClose.add(e.cursorId),this._openCursors.delete(e)}_adjustCache(){for(;this._cachedStatements.size>this._maxSize;){let e=this._cachedStatements.keys().next().value,t=this._cachedStatements.get(e);this._cachedStatements.delete(e),t.inUse?t.returnToCache=!1:t.cursorId!==0&&this._addCursorToClose(t)}}clearCursors(){let e=new Set;for(let t of this._openCursors)(t.inUse||t.returnToCache)&&(t.pendingClear=!0,e.add(t)),t._clearState();this._openCursors=e,this._cursorsToClose.clear()}clearPendingStatus(){for(let e of this._openCursors)e.pendingClear&&!e.inUse&&(e._clearAllState(),e.pendingClear=!1)}getStatement(e,t=!1,s=!1){let r=null;return e&&(r=this._cachedStatements.get(e)),r?s||r.inUse?(t||(this._addCursorToClose(r),this._cachedStatements.delete(e)),r=r._copy(),this._openCursors.add(r)):t?(this._cachedStatements.delete(e),this._cachedStatements.set(e,r)):(this._cachedStatements.delete(e),r.returnToCache=!1):(r=new lR,e&&r._prepare(e),t&&!r.isDdl&&this._maxSize>0&&(r.returnToCache=!0,this._cachedStatements.set(e,r),this._adjustCache()),this._openCursors.add(r)),this._openCursors.add(r),r.inUse=!0,r}clearCursor(e){this._addCursorToClose(e),e.cursorId=0}returnStatement(e){e.bindInfoList&&e.bindInfoList.forEach(t=>{t.bindVar=null}),e.queryVars&&e.queryVars.forEach(t=>{t.values.fill(null)}),e.returnToCache?e.inUse=!1:this._addCursorToClose(e),this.clearPendingStatus()}writeCursorsToClose(e){e.writeUB4(this._cursorsToClose.size);for(let t of this._cursorsToClose.keys())e.writeUB4(t);this._cursorsToClose.clear()}};T(PT,"StatementCache");var dT=PT;tu.exports=dT});var CT=I((BO,nu)=>{"use strict";var{Buffer:ru}=require("buffer"),hR=Yr(),NR=Uo(),pT=js(),SR=kN(),{BaseBuffer:uR}=Ss(),{NetworkSession:AR}=xa(),{Statement:fR}=va(),Pi=tr(),Us=Ls(),M=Ee(),iu=require("process"),k=Fe(),me=U(),Me=$S(),dR=su(),PR=new global.FinalizationRegistry(i=>{i.disconnect()}),IT=class IT extends uR{};T(IT,"TDSBuffer");var RT=IT,DT=class DT extends hR{async close(){try{if(this._protocol.txnInProgress){if(this.tpcContext){let e=this.createTpcRollbackMessage();await this._protocol._processMessage(e)}else await this.rollback();this.tpcContext=null}if(this._drcpEnabled&&(await this._sessRelease(),this._drcpEstablishSession=!0),this._pool&&!this._dropSess)await this._pool.release(this);else{if(!this._drcpEnabled){let e=new Me.LogOffMessage(this);await this._protocol._processMessage(e)}this.nscon.disconnect()}}catch{this.nscon.disconnect(Us.NSFIMM)}}async _sessRelease(){let e=new Me.SessionReleaseMessage(this);this.isPooled()||(e.sessReleaseMode=M.DRCP_DEAUTHENTICATE),await this._protocol._processMessage(e)}async _getElementTypeObj(e){let t=[{name:"owner",type:k.DB_TYPE_VARCHAR,dir:M.BIND_IN,maxSize:128,values:[e.schema]},{name:"name",type:k.DB_TYPE_VARCHAR,dir:M.BIND_IN,maxSize:128,values:[e.name]},{name:"package_name",type:k.DB_TYPE_VARCHAR,dir:M.BIND_IN,maxSize:128,values:[e.packageName]}],s;e.packageName?s=`
        select
            elem_type_owner,
            elem_type_name,
            elem_type_package
        from all_plsql_coll_types
        where owner = :owner
          and type_name = :name
          and package_name = :package_name`:(t.pop(),s=`
        select
            elem_type_owner,
            elem_type_name
        from all_coll_types
        where owner = :owner
          and type_name = :name`);let r={connection:{_impl:this},prefetchRows:2},n=await this.execute(s,1,t,r,!1),o=await n.resultSet.getRows(1,r);await n.resultSet.close();let a=o[0];e.elementTypeClass=this._getDbObjectType(a[0],a[1],a[2]),e.elementTypeClass.partial&&this._partialDbObjectTypes.push(e.elementTypeClass)}async _execute(e,t,s,r,n){let o=e.bindInfoList.length,a=s.length;o!==a&&(a===0||!s[0].name)&&me.throwErr(me.ERR_WRONG_NUMBER_OF_POSITIONAL_BINDS,o,a);for(let l=0;l<s.length;l++)await this._bind(e,s[l],l+1);e.isPlSql&&(r.batchErrors||r.dmlRowCounts)&&me.throwErr(me.ERR_EXEC_MODE_ONLY_FOR_DML);let c=new Me.ExecuteMessage(this,e,r);c.numExecs=t,c.arrayDmlRowCounts=r.dmlRowCounts,c.batchErrors=r.batchErrors,e.isPlSql&&(e.cursorId===0||e.requiresFullExecute)&&(c.numExecs=1,c.noImplicitRelease=!0,await this._protocol._processMessage(c),e.requiresFullExecute=!1,c.numExecs=t-1,c.offset=1,c.noImplicitRelease=!1),c.numExecs>0&&(await this._protocol._processMessage(c),e.requiresFullExecute=!1),e.requiresDefine&&e.sql&&(e.requiresFullExecute=!0,await this._protocol._processMessage(c),e.requiresFullExecute=!1,e.requiresDefine=!1);let E={};if(c.warning&&(E.warning=c.warning),e.numQueryVars>0)E.resultSet=c.resultSet;else{e.bufferRowIndex=0;let l=Pi.getOutBinds(e,t,n);l&&(E.outBinds=l),n?(e.isPlSql||(E.rowsAffected=e.rowCount,delete e.rowCount),r.dmlRowCounts&&(E.dmlRowCounts=r.dmlRowCounts),r.batchErrors&&(E.batchErrors=r.batchErrors)):(e.isPlSql&&r.implicitResultSet&&(E.implicitResults=r.implicitResultSet),e.lastRowid&&(E.lastRowid=e.lastRowid,delete e.lastRowid),e.isPlSql?e.rowCount&&(E.rowsAffected=e.rowCount):E.rowsAffected=e.rowCount||0,e.rowCount&&delete e.rowCount),this._returnStatement(e)}return E}_parseTDSAttr(e,t){let s,r,n;for(;;)if(n=e.readUInt8(),n===M.TNS_OBJ_TDS_TYPE_EMBED_ADT_INFO)e.skipBytes(1);else if(n!==M.TNS_OBJ_TDS_TYPE_SUBTYPE_MARKER)break;switch(n){case M.TNS_OBJ_TDS_TYPE_NUMBER:return t.precision=e.readInt8(),t.scale=e.readInt8(),k.DB_TYPE_NUMBER;case M.TNS_OBJ_TDS_TYPE_FLOAT:return t.precision=e.readInt8(),k.DB_TYPE_NUMBER;case M.TNS_OBJ_TDS_TYPE_VARCHAR:case M.TNS_OBJ_TDS_TYPE_CHAR:return t.maxSize=e.readUInt16BE(),s=n===M.TNS_OBJ_TDS_TYPE_VARCHAR?M.TNS_DATA_TYPE_VARCHAR:M.TNS_DATA_TYPE_CHAR,r=e.readUInt8(),r=r&127,e.skipBytes(2),k.getTypeByOraTypeNum(s,r);case M.TNS_OBJ_TDS_TYPE_RAW:return t.maxSize=e.readUInt16BE(),k.DB_TYPE_RAW;case M.TNS_OBJ_TDS_TYPE_BINARY_FLOAT:return k.DB_TYPE_BINARY_FLOAT;case M.TNS_OBJ_TDS_TYPE_BINARY_DOUBLE:return k.DB_TYPE_BINARY_DOUBLE;case M.TNS_OBJ_TDS_TYPE_DATE:return k.DB_TYPE_DATE;case M.TNS_OBJ_TDS_TYPE_TIMESTAMP:return e.skipBytes(1),k.DB_TYPE_TIMESTAMP;case M.TNS_OBJ_TDS_TYPE_TIMESTAMP_LTZ:return e.skipBytes(1),k.DB_TYPE_TIMESTAMP_LTZ;case M.TNS_OBJ_TDS_TYPE_TIMESTAMP_TZ:return e.skipBytes(1),k.DB_TYPE_TIMESTAMP_TZ;case M.TNS_OBJ_TDS_TYPE_BOOLEAN:return k.DB_TYPE_BOOLEAN;case M.TNS_OBJ_TDS_TYPE_CLOB:return k.DB_TYPE_CLOB;case M.TNS_OBJ_TDS_TYPE_BLOB:return k.DB_TYPE_BLOB;case M.TNS_OBJ_TDS_TYPE_OBJ:return e.skipBytes(5),k.DB_TYPE_OBJECT;case M.TNS_OBJ_TDS_TYPE_START_EMBED_ADT:for(;this._parseTDSAttr(e,{})!==0;);return k.DB_TYPE_OBJECT;case M.TNS_OBJ_TDS_TYPE_END_EMBED_ADT:return 0;default:me.throwErr(me.ERR_TDS_TYPE_NOT_SUPPORTED,n)}}async _parseTDS(e,t){let s=new RT(e);s.skipBytes(4),s.skipBytes(2),s.skipBytes(2);let r=s.readUInt16BE();if(s.skipBytes(1),s.skipBytes(1),s.skipBytes(2),s.skipBytes(4),t.isCollection=!1,r===1){let n=s.pos;s.readUInt8()===M.TNS_OBJ_TDS_TYPE_COLL?t.isCollection=!0:s.pos=n}if(t.isCollection){let n=s.readUInt32BE();t.maxNumElements=s.readUInt32BE(),t.collectionType=s.readUInt8(),t.collectionType===M.TNS_OBJ_PLSQL_INDEX_TABLE&&(t.collectionFlags=M.TNS_OBJ_HAS_INDEXES),s.pos=n,t.elementTypeInfo={},t.elementType=this._parseTDSAttr(s,t.elementTypeInfo),t.elementType===k.DB_TYPE_OBJECT&&(await this._getElementTypeObj(t),t.elementTypeClass.isXmlType&&(t.elementType=k.DB_TYPE_XMLTYPE))}else if(t.attributes)for(let n of t.attributes)this._parseTDSAttr(s,n)}async _populateDbObjectTypeInfo(e){let t=`
      declare
          t_Instantiable              varchar2(3);
          t_SuperTypeOwner            varchar2(128);
          t_SuperTypeName             varchar2(128);
          t_SubTypeRefCursor          sys_refcursor;
          t_Pos                       pls_integer;
      begin
          :ret_val := dbms_pickler.get_type_shape(:full_name, :oid,
              :version, :tds, t_Instantiable, t_SuperTypeOwner,
              t_SuperTypeName, :attrs_rc, t_SubTypeRefCursor);
          :package_name := null;
          if substr(:full_name, length(:full_name) - 7) = '%ROWTYPE' then
              t_Pos := instr(:full_name, '.');
              :schema := substr(:full_name, 1, t_Pos - 1);
              :name := substr(:full_name, t_Pos + 1);
          else
              begin
                  select owner, type_name
                  into :schema, :name
                  from all_types
                  where type_oid = :oid;
              exception
              when no_data_found then
                  begin
                      select owner, package_name, type_name
                      into :schema, :package_name, :name
                      from all_plsql_types
                      where type_oid = :oid;
                  exception
                  when no_data_found then
                      null;
                  end;
              end;
          end if;
      end;`,s=`
      SELECT
        column_name,
        data_type,
        data_type_owner,
        case
          when data_type in
            ('CHAR', 'NCHAR', 'VARCHAR2', 'NVARCHAR2', 'RAW')
          then data_length
          else 0
        end,
        nvl(data_precision, 0),
        nvl(data_scale, 0)
      from all_tab_cols
      where owner = :owner
        and table_name = :name
        and hidden_column != 'YES'
      order by column_id`,r=[{name:"full_name",type:k.DB_TYPE_VARCHAR,dir:M.BIND_INOUT,maxSize:500,values:[e]},{name:"ret_val",type:k.DB_TYPE_BINARY_INTEGER,dir:M.BIND_OUT,values:[]},{name:"oid",type:k.DB_TYPE_RAW,maxSize:16,dir:M.BIND_OUT,values:[]},{name:"version",type:k.DB_TYPE_BINARY_INTEGER,dir:M.BIND_OUT,values:[]},{name:"tds",type:k.DB_TYPE_RAW,maxSize:2e3,dir:M.BIND_OUT,values:[]},{name:"attrs_rc",type:k.DB_TYPE_CURSOR,dir:M.BIND_OUT,values:[]},{name:"package_name",type:k.DB_TYPE_VARCHAR,maxSize:128,dir:M.BIND_OUT,values:[]},{name:"schema",type:k.DB_TYPE_VARCHAR,maxSize:128,dir:M.BIND_OUT,values:[]},{name:"name",type:k.DB_TYPE_VARCHAR,maxSize:128,dir:M.BIND_OUT,values:[]}],n={connection:{_impl:this},nullifyInvalidCursor:!0},o=await this.execute(t,1,r,n,!1);o.outBinds.ret_val!==0&&me.throwErr(me.ERR_INVALID_OBJECT_TYPE_NAME,e);let a=this._getDbObjectType(o.outBinds.schema,o.outBinds.name,o.outBinds.package_name,o.outBinds.oid);if(!a.partial)return a;if(a.name.endsWith("%ROWTYPE")){let c=[{name:"owner",type:k.DB_TYPE_VARCHAR,maxSize:128,dir:M.BIND_IN,values:[o.outBinds.schema]},{name:"name",type:k.DB_TYPE_VARCHAR,maxSize:128,dir:M.BIND_IN,values:[a.name.substring(0,a.name.length-8)]}],l=await(await this.execute(s,1,c,n,!1)).resultSet._getAllRows();a.attributes=[];for(let u of l){let p={name:u[0],dataType:u[1],dataTypeOwner:u[2],maxSize:u[3],dataPrecision:u[4],dataScale:u[5]};if(!p.dataTypeOwner){let d=u[1].indexOf("("),N=u[1].indexOf(")");N>d&&(p.dataType=p.dataType.substring(0,d)+p.dataType.substring(N+1,p.dataType.length))}this._addAttr(a.attributes,p)}}else{a.version=o.outBinds.version;let c=await o.outBinds.attrs_rc._getAllRows();if(c.length>0){a.attributes=[];for(let E of c){let l={name:E[1],dataType:E[3],dataTypeOwner:E[4],packageName:E[5],oid:E[6]};this._addAttr(a.attributes,l)}}await this._parseTDS(o.outBinds.tds,a)}return a.partial=!1,a}_addAttr(e,t){let s={name:t.name};t.dataTypeOwner?(s.type=k.DB_TYPE_OBJECT,s.typeClass=this._getDbObjectType(t.dataTypeOwner,t.dataType,t.packageName,t.oid),s.typeClass.isXmlType&&(s.type=k.DB_TYPE_XMLTYPE),s.typeClass.partial&&this._partialDbObjectTypes.push(s.typeClass)):(s.type=k.getTypeByColumnTypeName(t.dataType),s.maxSize=t.maxSize,s.precision=t.dataPrecision,s.scale=t.dataScale),e.push(s)}async _populatePartialDbObjectTypes(){for(;this._partialDbObjectTypes.length>0;){let e=this._partialDbObjectTypes.pop(),t="%ROWTYPE",s=e.name;s.endsWith(t)?s=s.substring(0,s.length-t.length):t="";let r;e.packageName?r=`"${e.schema}"."${e.packageName}"."${s}"${t}`:r=`"${e.schema}"."${s}"${t}`,await this._populateDbObjectTypeInfo(r)}}async commit(){let e=new Me.CommitMessage(this);await this._protocol._processMessage(e)}async breakExecution(){await this._protocol.breakMessage()}isHealthy(){try{return this.nscon.recvInbandNotif()===0}catch{return!1}}isPooled(){return!!this._pool}async connect(e){e.connectString||me.throwErr(me.ERR_EMPTY_CONNECT_STRING),Pi.checkCredentials(e),this.sessionID=0,this.serialNum=0,this.autoCommit=!1,this.serverVersion="",this.statementCache=null,this.currentSchema="",this.invokeSessionCallback=!0,this.statementCacheSize=e.stmtCacheSize,this._currentSchemaModified=!1,this._tempLobsToClose=[],this._tempLobsTotalSize=0,this._drcpEstablishSession=!1,this._cclass=null,this._clientIdentifier="",this._clientIdentifierModified=!1,this._action="",this._actionModified=!1,this._dbOp="",this._dbOpModified=!1,this._clientInfo="",this._clientInfoModified=!1,this._module="",this._moduleModified=!1,this._drcpEnabled=!1,this.serviceName="",this.remoteAddress="",this.comboKey=null,this.tpcContext=null,this.nscon=new AR,PR.register(this,this.nscon),await this.nscon.connect(e);let t;this.isPooled()?(t=e._connInfo[0],this.serviceName=e._connInfo[2],this.purity=e._connInfo[3]|M.PURITY_DEFAULT,this.sid=e._connInfo[4]):(t=this.nscon.getOption(Us.SERVERTYPE),this.serviceName=this.nscon.getOption(Us.SVCNAME),this.sid=this.nscon.getOption(Us.SID),this.purity=this.nscon.getOption(Us.PURITY)|M.PURITY_DEFAULT),t&&(this._drcpEnabled=t.toLowerCase()==="pooled"),this.remoteAddress=this.nscon.getOption(Us.REMOTEADDR),this.connectionClass=e.connectionClass,this.purity===M.PURITY_DEFAULT&&this._drcpEnabled&&(this.isPooled()?this.purity=M.PURITY_SELF:this.purity=M.PURITY_NEW),this._protocol=new SR(this),this._protocol.caps.protocolVersion<M.TNS_VERSION_MIN_ACCEPTED&&me.throwErr(me.ERR_SERVER_VERSION_NOT_SUPPORTED);try{let s=new Me.ProtocolMessage(this),r=new Me.DataTypeMessage(this),n=new Me.AuthMessage(this,e);if(this.nscon.supportsFastAuth){let o=new Me.FastAuthMessage(this);o.protocolMessage=s,o.dataTypeMessage=r,o.authMessage=n,await this._protocol._processMessage(o),o.reNegotiate&&(await this._protocol._processMessage(r),await this._protocol._processMessage(n))}else await this._protocol._processMessage(s),await this._protocol._processMessage(r),await this._protocol._processMessage(n);e.token||await this._protocol._processMessage(n)}catch(s){throw this.nscon.disconnect(),s}this.statementCache=new dR(this.statementCacheSize),this._partialDbObjectTypes=[],e.debugJDWP?this.jdwpData=ru.from(e.debugJDWP):iu.env.ORA_DEBUG_JDWP&&(this.jdwpData=ru.from(iu.env.ORA_DEBUG_JDWP)),this._protocol.connInProgress=!1}_returnStatement(e){this.statementCache.returnStatement(e)}_prepare(e,t){let s=this._getStatement(e,t.keepInStmtCache);return s.bufferRowIndex=0,s.bufferRowCount=0,s.lastRowIndex=0,s.moreRowsToFetch=!0,s}async _bind(e,t,s=0){let r=e.bindInfoDict,n=e.bindInfoList;if(e.isPlSql&&t.maxSize>32767){t.type===k.DB_TYPE_RAW||t.type===k.DB_TYPE_LONG_RAW?t.type=k.DB_TYPE_BLOB:t.type._csfrm===M.CSFRM_NCHAR?t.type=k.DB_TYPE_NCLOB:t.type=k.DB_TYPE_CLOB;let o=t.maxSize;delete t.maxSize,t.outConverter=async function(a){if(a===null)return null;let c=await a.getData(),E=a._length;return c&&E>o&&me.throwErr(me.ERR_INSUFFICIENT_BUFFER_FOR_BINDS),c}}if(t.type===k.DB_TYPE_CLOB||t.type===k.DB_TYPE_NCLOB||t.type===k.DB_TYPE_BLOB){for(let[o,a]of t.values.entries())if(!(a instanceof pT))if(a&&a.length>0){let c=new pT;await c.create(this,t.type),await c.write(1,a),t.values[o]=c}else t.values[o]=null}if(t.name){let o;t.name.startsWith('"')&&t.name.endsWith('"')?o=t.name.substring(1,t.name.length-1):o=t.name.toUpperCase(),o.startsWith(":")&&(o=t.name.substring(1)),r.has(o)||me.throwErr(me.ERR_INVALID_BIND_NAME,o),r.get(o).forEach(a=>{e._setVariable(a,t)})}else{let o=n[s-1];e._setVariable(o,t)}}_createResultSet(e,t){let s=new NR;if(t||(t=new fR),s._resultSetNew(this,t,e),t.queryVars.length>0){let r=Pi.getMetadataMany(t.queryVars);s._setup(e,r)}return s}async getDbObjectClass(e){let t=await this._populateDbObjectTypeInfo(e);return await this._populatePartialDbObjectTypes(),t}async getStatementInfo(e){let t={},s={},r=this._prepare(e,t);t.connection=this;try{if(!r.isDdl){let n=new Me.ExecuteMessage(this,r,t);n.parseOnly=!0,await this._protocol._processMessage(n)}return r.numQueryVars>0&&(s.metaData=Pi.getMetadataMany(r.queryVars)),s.bindNames=Array.from(r.bindInfoDict.keys()),s.statementType=r.statementType,s}finally{this._returnStatement(r)}}async execute(e,t,s,r,n){let o=this._prepare(e,r);try{return await this._execute(o,t,s,r,n)}catch(a){throw this._returnStatement(o),a}}_getStatement(e,t=!1){return this.statementCache.getStatement(e,t,this._drcpEstablishSession)}async ping(){let e=new Me.PingMessage(this);await this._protocol._processMessage(e)}async rollback(){let e=new Me.RollbackMessage(this);await this._protocol._processMessage(e)}getOracleServerVersion(){return this.serverVersion}getOracleServerVersionString(){return this.serverVersionString}setCurrentSchema(e){this._currentSchemaModified=!0,this.currentSchema=e}getCurrentSchema(){return this.currentSchema}setClientId(e){this._clientIdentifierModified=!0,this._clientIdentifier=e}setDbOp(e){this._dbOpModified=!0,this._dbOp=e}setExternalName(e){this.externalName=e}setInternalName(e){this.internalName=e}setClientInfo(e){this._clientInfoModified=!0,this._clientInfo=e}setModule(e){this._moduleModified=!0,this._module=e,this._actionModified=!0}setAction(e){this._actionModified=!0,this._action=e}async changePassword(e,t,s){let r={user:e,newPassword:s,password:t,changePassword:!0},n=new Me.AuthMessage(this,r);await this._protocol._processMessage(n)}async createLob(e){let t=new pT;return await t.create(this,e),t}checkTpcCommitState(e,t){(t&&e!==M.TNS_TPC_TXN_STATE_READ_ONLY&&e!==M.TNS_TPC_TXN_STATE_COMMITTED||!t&&e!==M.TNS_TPC_TXN_STATE_FORGOTTEN)&&me.throwErr(me.ERR_UNKNOWN_TRANSACTION_STATE,e)}createTpcCommitMessage(e,t){let s=new Me.TransactionChangeStateMessage(this);return s.operation=M.TNS_TPC_TXN_COMMIT,s.state=t==0?M.TNS_TPC_TXN_STATE_COMMITTED:M.TNS_TPC_TXN_STATE_READ_ONLY,s.xid=e,s.context=this.tpcContext,s}createTpcRollbackMessage(e=null){let t=new Me.TransactionChangeStateMessage(this);return t.operation=M.TNS_TPC_TXN_ABORT,t.state=M.TNS_TPC_TXN_STATE_ABORTED,t.xid=e,t.context=this.tpcContext,t}async tpcBegin(e,t,s){let r=new Me.TransactionSwitchMessage(this);r.operation=M.TNS_TPC_TXN_START,r.xid=e,r.flags=t,r.timeout=s,await this._protocol._processMessage(r),this.tpcContext=r.context}async tpcCommit(e,t){let s=this.createTpcCommitMessage(e,t);await this._protocol._processMessage(s),this.checkTpcCommitState(s.state,t)}async tpcEnd(e,t){let s=new Me.TransactionSwitchMessage(this);s.operation=M.TNS_TPC_TXN_DETACH,s.xid=e,s.context=this.tpcContext,s.flags=t,await this._protocol._processMessage(s),this.tpcContext=null}async tpcPrepare(e){let t=new Me.TransactionChangeStateMessage(this);if(t.operation=M.TNS_TPC_TXN_PREPARE,t.xid=e,t.context=this.tpcContext,await this._protocol._processMessage(t),t.state===M.TNS_TPC_TXN_STATE_REQUIRES_COMMIT)return!0;if(t.state===M.TNS_TPC_TXN_STATE_READ_ONLY)return!1;me.throwErr(me.ERR_UNKNOWN_TRANSACTION_STATE,t.state)}async tpcRollback(e){let t=this.createTpcRollbackMessage(e);await this._protocol._processMessage(t),t.state!==M.TNS_TPC_TXN_STATE_ABORTED&&me.throwErr(me.ERR_UNKNOWN_TRANSACTION_STATE,t.state)}getStmtCacheSize(){return this.statementCache._maxSize}setCallTimeout(e){this._protocol.callTimeout=e}getCallTimeout(){return this._protocol.callTimeout}getTag(){return""}getExternalName(){return this.externalName}getInstanceName(){return this.instanceName}getInternalName(){return this.internalName}getDbDomain(){return this.dbDomain}getDbName(){return this.dbName}getMaxOpenCursors(){return this.maxOpenCursors}getServiceName(){return this.serviceName}getTransactionInProgress(){return this._protocol.txnInProgress}getWarning(){return this.warning}};T(DT,"ThinConnectionImpl");var mT=DT;nu.exports=mT});var ou=I((YO,_u)=>{"use strict";var pR=Wn(),RR=CT(),We=Qs(),Kt=U(),mR=nt(),OT=Le(),IR=tr(),{getConnectionInfo:DR}=xa(),CR=require("crypto"),OR=require("events"),gR=require("timers"),LT=class LT extends pR{_init(e){if(e.homogeneous||Kt.throwErr(Kt.ERR_NOT_IMPLEMENTED,"Heterogeneous Pooling"),IR.checkCredentials(e),this._availableObjects=[],this._name="node-thin",this._poolMin=e.poolMin,this._poolMax=e.poolMax,this._poolIncrement=e.poolIncrement,this._poolTimeout=e.poolTimeout,this._poolPingInterval=e.poolPingInterval,this._poolPingTimeout=e.poolPingTimeout,this._stmtCacheSize=e.stmtCacheSize,this._userConfig=e,this._freeConnectionList=[],this._usedConnectionList=new Set,this._password=e.password,this._walletPassword=e.walletPassword,this._walletContent=e.walletContent,this._obfuscatedPassword=[],this._obfuscatedWalletPassword=[],this._token=e.token,this._obfuscatedToken=[],this._privateKey=e.privateKey,this._obfuscatedPrivateKey=[],this._schedulerJob=null,this._poolCloseWaiter=null,this._pendingRequests=[],this._password!==void 0){let t=We.setObfuscatedValue(this._password);this._password=t.value,this._obfuscatedPassword=t.obfuscatedValue,this._userConfig.password=null}if(this._walletPassword!==void 0){let t=We.setObfuscatedValue(this._walletPassword);this._walletPassword=t.value,this._obfuscatedWalletPassword=t.obfuscatedValue,this._userConfig.walletPassword=null}if(this._walletContent!==void 0){let t=We.setObfuscatedValue(this._walletContent);this._walletContent=t.value,this._obfuscatedWalletContent=t.obfuscatedValue,this._userConfig.walletConent=null}if(this._token!==void 0){let t=We.setObfuscatedValue(this._token);this._token=t.value,this._obfuscatedToken=t.obfuscatedValue,this._userConfig.token=null}if(this._privateKey!==void 0){let t=We.setObfuscatedValue(this._privateKey);this._privateKey=t.value,this._obfuscatedPrivateKey=t.obfuscatedValue,this._userConfig.privateKey=null}this._accessTokenFn=e.accessTokenFn,this._accessTokenConfig=e.accessTokenConfig,this._isDRCPEnabled=!1,this._implicitPool=null,this.eventEmitter=new OR,this.eventEmitter.on("_removePoolConnection",async t=>{await this._destroy(t)})}async create(e){this._init(e),this._userConfig._connInfo=await DR(e),this._isDRCPEnabled=String(this._userConfig._connInfo[0]).toLowerCase()==="pooled",this._isDRCPEnabled&&mR.connectionClass===""&&this._generateConnectionClass(),this.bgThreadFunc()}setAccessToken(e){if(e.token){this._token=e.token;let t=We.setObfuscatedValue(this._token);this._token=t.value,this._obfuscatedToken=t.obfuscatedValue}if(e.privateKey){this._privateKey=e.privateKey;let t=We.setObfuscatedValue(this._privateKey);this._privateKey=t.value,this._obfuscatedPrivateKey=t.obfuscatedValue}}async _getConnAttrs(){let e,t=Object.assign({},this._userConfig);if(t.password===null&&(t.password=We.getDeobfuscatedValue(this._password,this._obfuscatedPassword)),t.walletPassword===null&&(t.walletPassword=We.getDeobfuscatedValue(this._walletPassword,this._obfuscatedWalletPassword)),t.walletContent===null&&(t.walletContent=We.getDeobfuscatedValue(this._walletContent,this._obfuscatedWalletContent)),t.token===null&&(t.token=We.getDeobfuscatedValue(this._token,this._obfuscatedToken),OT.isTokenExpired(t.token)))if(typeof this._accessTokenFn=="function"){if(e=await this._accessTokenFn(!0,this._accessTokenConfig),typeof e=="string")if(t.token=e,OT.isTokenExpired(t.token))Kt.throwErr(Kt.ERR_TOKEN_HAS_EXPIRED);else{let s=We.setObfuscatedValue(t.token);this._token=s.value,this._obfuscatedToken=s.obfuscatedValue}else if(typeof e=="object")if(t.token=e.token,t.privateKey=e.privateKey,OT.isTokenExpired(t.token))Kt.throwErr(Kt.ERR_TOKEN_HAS_EXPIRED);else{let s=We.setObfuscatedValue(t.token);this._token=s.value,this._obfuscatedToken=s.obfuscatedValue;let r=We.setObfuscatedValue(t.privateKey);this._privateKey=r.value,this._obfuscatedPrivateKey=r.obfuscatedValue}}else Kt.throwErr(Kt.ERR_TOKEN_HAS_EXPIRED);return t.privateKey===null&&(t.privateKey=We.getDeobfuscatedValue(this._privateKey,this._obfuscatedPrivateKey)),t}async getConnection(){return await this.acquire()}async _destroy(e){e.nscon.ntAdapter.connected&&(e._dropSess=!0,await e.close())}async close(){await new Promise(e=>{this._poolCloseWaiter=e,this.bgWaiter&&this.bgWaiter()}),this._schedulerJob&&(clearTimeout(this._schedulerJob),this._schedulerJob=null);for(let e of this._freeConnectionList)await this._destroy(e);for(let e of this._usedConnectionList)await this._destroy(e);this.eventEmitter.removeAllListeners()}getPoolMax(){return this._poolMax}getPoolMin(){return this._poolMin}getConnectionsInUse(){return this._usedConnectionList.size}getConnectionsOpen(){return this._freeConnectionList.length+this._usedConnectionList.size}getPoolIncrement(){return this._poolIncrement}getPoolMaxPerShard(){}getPoolPingInterval(){return this._poolPingInterval}getPoolPingTimeout(){return this._poolPingTimeout}getPoolTimeout(){return this._poolTimeout}getSodaMetaDataCache(){}getStmtCacheSize(){return this._stmtCacheSize}_setScheduler(){!this._schedulerJob&&this._poolTimeout>0&&this._freeConnectionList.length>0&&this._freeConnectionList.length+this._usedConnectionList.size>this._poolMin&&(this._schedulerJob=setTimeout(()=>{this._scanIdleConnection()},this._poolTimeout*1e3))}_scanIdleConnection(){for(;this._usedConnectionList.size+this._freeConnectionList.length>this._poolMin&&this._freeConnectionList.length>0;){let e=this._freeConnectionList[0];if(Date.now()-e._lastTimeUsed<this._poolTimeout*1e3)break;this.eventEmitter.emit("_removePoolConnection",e),this._freeConnectionList.shift()}this._schedulerJob=null,this._setScheduler()}_getNumConnsToCreate(){let e=this._freeConnectionList.length+this._usedConnectionList.size;return e<this._poolMin?this._poolMin-e:this._pendingRequests.length>0?Math.min(this._poolIncrement,this._poolMax-e):0}async bgThreadFunc(){for(;!this._poolCloseWaiter;){let e=this._poolMax-this.getConnectionsOpen();for(;e>0&&this._freeConnectionList.length>0;){let s=this._freeConnectionList.shift();this.eventEmitter.emit("_removePoolConnection",s),e--}let t=this._getNumConnsToCreate();for(let s=0;s<t;s++){try{let r=await this._getConnAttrs(),n=new RR;n._pool=this,await n.connect(r),n._newSession=!0,n._dropSess=!1,n._lastTimeUsed=Date.now(),this._freeConnectionList.push(n)}catch(r){this._bgErr=r}if(this._poolIncrement>1&&this._poolMax-this._usedConnectionList.size-this._freeConnectionList.length>1&&this._setScheduler(),this._pendingRequests.length>0&&this._pendingRequests.shift().resolve(),await new Promise(r=>gR.setImmediate(r)),this._poolCloseWaiter)break}if(this._poolCloseWaiter)break;(this._pendingRequests.length==0||this._bgErr)&&(await new Promise(s=>{this.bgWaiter=s}),this.bgWaiter=null)}this._poolCloseWaiter()}async acquire(){for(;this._freeConnectionList.length>0;){let t=this._freeConnectionList.pop();if(!t.isHealthy()){this.eventEmitter.emit("_removePoolConnection",t);continue}let s=!1;if((this._poolPingInterval===0||this._poolPingInterval>0&&Date.now()-t._lastTimeUsed>this._poolPingInterval*1e3)&&(s=!0),s){let r;try{this._poolPingTimeout&&(r=setTimeout(()=>{t.nscon.forceDisconnect()},this._poolPingTimeout)),await t.ping()}catch{t.nscon.forceDisconnect();continue}finally{clearTimeout(r)}}return this._usedConnectionList.add(t),t}if(await new Promise(t=>{this._pendingRequests.push({resolve:t}),this.bgWaiter&&this.bgWaiter()}),this._bgErr){let t=this._bgErr;throw this._bgErr=null,this._pendingRequests.length>0&&this.bgWaiter&&this.bgWaiter(),t}let e=this._freeConnectionList.pop();return this._usedConnectionList.add(e),e}release(e){e.warning=void 0,this._usedConnectionList.delete(e),e.nscon.connected&&(e._lastTimeUsed=Date.now(),e._newSession=!1,this._freeConnectionList.length+this._usedConnectionList.size<this._poolMax?this._freeConnectionList.push(e):this.eventEmitter.emit("_removePoolConnection",e)),this._setScheduler()}_generateConnectionClass(){this._userConfig.connectionClass=CR.randomBytes(16).toString("base64"),this._userConfig.connectionClass="NJS:"+this._userConfig.connectionClass}reconfigure(e){e.poolIncrement!==void 0&&(this._poolIncrement=e.poolIncrement),e.poolTimeout!==void 0&&this._poolTimeout!==e.poolTimeout&&(this._poolTimeout=e.poolTimeout,this._schedulerJob&&(clearTimeout(this._schedulerJob),this._schedulerJob=null)),e.poolPingInterval!==void 0&&(this._poolPingInterval=e.poolPingInterval),e.stmtCacheSize!==void 0&&(this._stmtCacheSize=e.stmtCacheSize),e.poolMax!==void 0&&(this._poolMax=e.poolMax),e.poolMin!==void 0&&(this._poolMin=e.poolMin),this.bgWaiter&&this.bgWaiter()}};T(LT,"ThinPoolImpl");var gT=LT;_u.exports=gT});var au=I(()=>{"use strict";var LR=CT(),yR=Uo(),BR=ou(),wR=js(),{ThinDbObjectImpl:YR}=Ro(),ar=ps();ar.ConnectionImpl=LR;ar.ResultSetImpl=yR;ar.PoolImpl=BR;ar.LobImpl=wR;ar.DbObjectImpl=YR});var Su=I((FO,Nu)=>{"use strict";gn();var D=Ye(),re=Le(),R=U(),H=Fe(),Tu=ps(),MR=require("process"),VR=require("util"),yT=MR.version.substring(1).split(".").map(Number);R.assert(yT[0]>14||yT[0]===14&&yT[1]>=6,R.ERR_NODE_TOO_OLD,re.PACKAGE_JSON_VERSION,"14.6");var FR=m_(),xR=O_(),kR=y_(),bR=H_(),GR=Qn(),HR=Rs(),cu=ro(),qR=Jt(),Eu=oN(),vR=_o(),KR=Hr(),B=nt(),WR=$_(),XR=J_(),zR=K_(),QR=Is(),JR=z_(),Ms={},pi={},Tr="default",rs;function jR(i){let e=typeof __non_webpack_require__=="function"?__non_webpack_require__:require,t=["../"+re.RELEASE_DIR+"/"+re.BINARY_FILE,"../"+re.RELEASE_DIR+"/"+re.BUILD_FILE,"../build/Debug/"+re.BUILD_FILE,"./node_modules/oracledb/"+re.RELEASE_DIR+"/"+re.BINARY_FILE,"./node_modules/oracledb/"+re.RELEASE_DIR+"/"+re.BUILD_FILE];i.binaryDir!==void 0&&t.splice(0,0,i.binaryDir+"/"+re.BINARY_FILE,i.binaryDir+"/"+re.BUILD_FILE);let s;for(let r=0;r<t.length;r++)try{s=e(t[r]);break}catch(n){if(n.code!=="MODULE_NOT_FOUND"||r==t.length-1){let o;n.code==="MODULE_NOT_FOUND"?o=`
  Looked for ${t.map(a=>require("path").resolve(__dirname,a)).join(", ")}
  ${re.getInstallURL()}
`:o=`
  Node.js require('oracledb') error was:
  ${n.message}
  ${re.getInstallHelp()}
`,R.throwErr(R.ERR_CANNOT_LOAD_BINARY,o)}}return s}T(jR,"_initCLib");function lu(){au()}T(lu,"_initializeThinDriver");async function hu(i,e){let t={};if(i=await rm(i),i.user!==void 0&&(R.assertParamPropValue(typeof i.user=="string",1,"user"),t.user=i.user),i.username!==void 0&&(R.assert(t.user===void 0,R.ERR_DBL_USER),R.assertParamPropValue(typeof i.username=="string",1,"username"),t.user=i.username),i.password!==void 0&&(R.assertParamPropValue(typeof i.password=="string",1,"password"),t.password=i.password),i.connectString!==void 0&&(R.assertParamPropValue(typeof i.connectString=="string",1,"connectString"),t.connectString=i.connectString),i.connectionString!==void 0&&(R.assert(t.connectString===void 0,R.ERR_DBL_CONNECT_STRING),R.assertParamPropValue(typeof i.connectionString=="string",1,"connectionString"),t.connectString=i.connectionString),i.walletPassword!==void 0&&(R.assertParamPropValue(typeof i.walletPassword=="string",1,"walletPassword"),t.walletPassword=i.walletPassword),i.walletLocation!==void 0&&(R.assertParamPropValue(typeof i.walletLocation=="string",1,"walletLocation"),t.walletLocation=i.walletLocation),i.walletContent!==void 0&&(R.assertParamPropValue(typeof i.walletContent=="string",1,"walletContent"),t.walletContent=i.walletContent),i.edition!==void 0&&(R.assertParamPropValue(typeof i.edition=="string",1,"edition"),t.edition=i.edition),i.stmtCacheSize!==void 0&&(R.assertParamPropValue(Number.isInteger(i.stmtCacheSize)&&i.stmtCacheSize>=0,1,"stmtCacheSize"),t.stmtCacheSize=i.stmtCacheSize),t.externalAuth=B.externalAuth,i.externalAuth!==void 0&&(R.assertParamPropValue(typeof i.externalAuth=="boolean",1,"externalAuth"),t.externalAuth=i.externalAuth),i.events!==void 0&&(R.assertParamPropValue(typeof i.events=="boolean",1,"events"),t.events=i.events),i.poolAlias!==void 0&&(R.assertParamPropValue(typeof i.poolAlias=="string"&&i.poolAlias.length>0,1,"poolAlias"),t.poolAlias=i.poolAlias),i.configDir!==void 0&&(R.assertParamPropValue(typeof i.configDir=="string",1,"configDir"),t.configDir=i.configDir),i.sslServerCertDN!==void 0&&(R.assertParamPropValue(typeof i.sslServerCertDN=="string",1,"sslServerCertDN"),t.sslServerCertDN=i.sslServerCertDN),i.sslServerDNMatch!==void 0&&(R.assertParamPropValue(typeof i.sslServerDNMatch=="boolean",1,"sslServerDNMatch"),t.sslServerDNMatch=i.sslServerDNMatch),i.sslAllowWeakDNMatch!==void 0&&(R.assertParamPropValue(typeof i.sslAllowWeakDNMatch=="boolean",1,"sslAllowWeakDNMatch"),t.sslAllowWeakDNMatch=i.sslAllowWeakDNMatch),i.httpsProxy!==void 0&&(R.assertParamPropValue(typeof i.httpsProxy=="string",1,"httpsProxy"),t.httpsProxy=i.httpsProxy),i.httpsProxyPort!==void 0&&(R.assertParamPropValue(Number.isInteger(i.httpsProxyPort)&&i.httpsProxyPort>=0,1,"httpsProxyPort"),t.httpsProxyPort=i.httpsProxyPort),i.retryCount!==void 0&&(R.assertParamPropValue(Number.isInteger(i.retryCount)&&i.retryCount>=0,1,"retryCount"),t.retryCount=i.retryCount),i.retryDelay!==void 0&&(R.assertParamPropValue(Number.isInteger(i.retryDelay)&&i.retryDelay>=0,1,"retryDelay"),t.retryDelay=i.retryDelay),i.connectTimeout!==void 0&&(R.assertParamPropValue(Number.isInteger(i.connectTimeout)&&i.connectTimeout>=0,1,"connectTimeout"),t.connectTimeout=i.connectTimeout),i.transportConnectTimeout!==void 0&&(R.assertParamPropValue(Number.isInteger(i.transportConnectTimeout)&&i.transportConnectTimeout>=0,1,"transportConnectTimeout"),t.transportConnectTimeout=i.transportConnectTimeout),i.expireTime!==void 0&&(R.assertParamPropValue(Number.isInteger(i.expireTime)&&i.expireTime>=0,1,"expireTime"),t.expireTime=i.expireTime),i.sdu!==void 0&&(R.assertParamPropValue(Number.isInteger(i.sdu)&&i.sdu>0,1,"sdu"),t.sdu=i.sdu),i.connectionIdPrefix!==void 0&&(R.assertParamPropValue(typeof i.connectionIdPrefix=="string",1,"connectionIdPrefix"),t.connectionIdPrefix=i.connectionIdPrefix),i.privilege!==void 0&&(R.assertParamPropValue(re.isPrivilege(i.privilege),1,"privilege"),t.privilege=i.privilege),e)i.poolMax!==void 0&&(R.assertParamPropValue(Number.isInteger(i.poolMax)&&i.poolMax>0,1,"poolMax"),t.poolMax=i.poolMax),i.poolMaxPerShard!==void 0&&(R.assertParamPropValue(Number.isInteger(i.poolMaxPerShard)&&i.poolMaxPerShard>=0,1,"poolMaxPerShard"),t.poolMaxPerShard=i.poolMaxPerShard),i.poolMin!==void 0&&(R.assertParamPropValue(Number.isInteger(i.poolMin)&&i.poolMin>=0,1,"poolMin"),t.poolMin=i.poolMin),i.poolIncrement!==void 0&&(R.assertParamPropValue(Number.isInteger(i.poolIncrement)&&i.poolIncrement>=0,1,"poolIncrement"),t.poolIncrement=i.poolIncrement),i.poolTimeout!==void 0&&(R.assertParamPropValue(Number.isInteger(i.poolTimeout)&&i.poolTimeout>=0,1,"poolTimeout"),t.poolTimeout=i.poolTimeout),i.poolPingInterval!==void 0&&(R.assertParamPropValue(Number.isInteger(i.poolPingInterval)&&i.poolPingInterval>=-2147483648&&i.poolPingInterval<=2147483647,1,"poolPingInterval"),t.poolPingInterval=i.poolPingInterval),i.poolPingTimeout!==void 0&&(R.assertParamPropValue(Number.isInteger(i.poolPingTimeout)&&i.poolPingTimeout>=0,1,"poolPingTimeout"),t.poolPingTimeout=i.poolPingTimeout),t.homogeneous=!0,i.homogeneous!==void 0&&(R.assertParamPropValue(typeof i.homogeneous=="boolean",1,"homogeneous"),t.homogeneous=i.homogeneous),i.queueTimeout!==void 0&&(R.assertParamPropValue(Number.isInteger(i.queueTimeout)&&i.queueTimeout>=0,1,"queueTimeout"),t.queueTimeout=i.queueTimeout),i.queueMax!==void 0&&(R.assertParamPropValue(Number.isInteger(i.queueMax),1,"queueMax"),t.queueMax=i.queueMax),t.sodaMetaDataCache=!1,i.sodaMetaDataCache!==void 0&&(R.assertParamPropValue(typeof i.sodaMetaDataCache=="boolean",1,"sodaMetaDataCache"),t.sodaMetaDataCache=i.sodaMetaDataCache),i.sessionCallback!==void 0&&(R.assertParamPropValue(typeof i.sessionCallback=="string"||typeof i.sessionCallback=="function",1,"sessionCallback"),t.sessionCallback=i.sessionCallback),t.enableStatistics=!1,i.enableStatistics!==void 0&&(R.assertParamPropValue(typeof i.enableStatistics=="boolean",1,"enableStatistics"),t.enableStatistics=i.enableStatistics),!t.enableStatistics&&i._enableStats!==void 0&&(R.assertParamPropValue(typeof i._enableStats=="boolean",1,"_enableStats"),t.enableStatistics=i._enableStats);else{if(i.newPassword!==void 0&&(R.assertParamPropValue(typeof i.newPassword=="string",1,"newPassword"),t.newPassword=i.newPassword),i.shardingKey!==void 0){let s=i.shardingKey;R.assertParamPropValue(re.isShardingKey(s),1,"shardingKey"),t.shardingKey=i.shardingKey}if(i.superShardingKey!==void 0){let s=i.superShardingKey;R.assertParamPropValue(re.isShardingKey(s),1,"superShardingKey"),t.superShardingKey=i.superShardingKey}}if(i.accessToken!==void 0){R.assert(t.user===void 0&&t.password===void 0,R.ERR_TOKEN_BASED_AUTH),e?R.assert(t.homogeneous&&t.externalAuth,R.ERR_POOL_TOKEN_BASED_AUTH):R.assert(t.externalAuth,R.ERR_CONN_TOKEN_BASED_AUTH);let s;typeof i.accessToken=="function"?(t.accessTokenFn=i.accessToken,t.accessTokenConfig=i.accessTokenConfig,s=await i.accessToken(!1,i.accessTokenConfig),re.isTokenValid(s)||(s=await i.accessToken(!0,i.accessTokenConfig))):s=i.accessToken,R.assert(re.isTokenValid(s),R.ERR_TOKEN_HAS_EXPIRED),s.privateKey!==void 0&&(R.assert(typeof s.privateKey=="string",R.ERR_TOKEN_BASED_AUTH),s.privateKey=re.denormalizePrivateKey(s.privateKey)),typeof s=="string"?t.token=s:(t.token=s.token,t.privateKey=s.privateKey)}return t.token===void 0&&t.externalAuth&&(t.password&&R.throwErr(R.ERR_WRONG_CRED_FOR_EXTAUTH),t.user&&(e?R.throwErr(R.ERR_WRONG_CRED_FOR_EXTAUTH):(t.user[0]!=="["||t.user.slice(-1)!=="]")&&R.throwErr(R.ERR_WRONG_USER_FORMAT_EXTAUTH_PROXY))),t}T(hu,"_verifyOptions");async function ZR(i){let e;R.assertArgCount(arguments,1,1),R.assertParamValue(re.isObject(i),1),i=await hu(i,!0);let t=i.sessionCallback;typeof t=="function"&&delete i.sessionCallback,i.poolAlias!==void 0?e=i.poolAlias:i.poolAlias===void 0&&!Ms[Tr]&&!pi[Tr]&&(e=Tr),(Ms[e]||pi[e])&&R.throwErr(R.ERR_POOL_WITH_ALIAS_ALREADY_EXISTS,e),B.addToOptions(i,"connectionClass","edition","events","externalAuth","stmtCacheSize","poolMax","poolMaxPerShard","poolMin","poolIncrement","poolTimeout","poolPingInterval","poolPingTimeout","queueMax","queueTimeout"),i.poolMin>i.poolMax&&R.throwErr(R.ERR_INVALID_NUMBER_OF_CONNECTIONS,i.poolMax,i.poolMin),rs===void 0&&!B.thinDriverInitialized&&lu(),e&&(pi[e]=!0);let s=new Eu;try{await s._impl.create(i)}finally{e&&delete pi[e]}return e&&(Ms[e]=s),s._setup(i,e),s._sessionCallback=t,s.on("_afterPoolClose",()=>{s.poolAlias&&delete Ms[s.poolAlias]}),rs===void 0&&(B.thinDriverInitialized=!0),s}T(ZR,"createPool");async function $R(i){let e={},t;if(R.assertArgCount(arguments,0,1),arguments.length==0?t=Tr:typeof i=="string"?t=i:(e=i,R.assertParamValue(re.isObject(e),1),t=e.poolAlias),t){let r=Ms[t];return R.assert(r,R.ERR_POOL_WITH_ALIAS_NOT_FOUND,t),await r.getConnection(e)}e=await hu(e,!1),B.addToOptions(e,"connectionClass","edition","events","externalAuth","stmtCacheSize"),rs===void 0&&!B.thinDriverInitialized&&lu();let s=new cu;return s._impl=new Tu.ConnectionImpl,await s._impl.connect(e),rs===void 0&&(B.thinDriverInitialized=!0),s}T($R,"getConnection");function em(i){R.assertArgCount(arguments,0,1),i&&R.assertParamValue(typeof i=="string"||typeof i=="number",1),i=i||Tr;let e=Ms[i];return e||R.throwErr(R.ERR_POOL_WITH_ALIAS_NOT_FOUND,i),e}T(em,"getPool");function tm(i){let e={};if(R.assertArgCount(arguments,0,1),i!==void 0&&(R.assertParamValue(re.isObject(i),1),e={...i},R.assertParamPropString(e,1,"libDir"),R.assertParamPropString(e,1,"configDir"),R.assertParamPropString(e,1,"errorUrl"),R.assertParamPropString(e,1,"driverName"),R.assertParamPropString(e,1,"binaryDir")),B.thinDriverInitialized&&R.throwErr(R.ERR_THIN_CONNECTION_ALREADY_CREATED),rs===void 0){let t=jR(e);e.driverName===void 0&&(e.driverName=D.DEFAULT_DRIVER_NAME+" thk"),e.errorUrl===void 0&&(e.errorUrl=D.DEFAULT_ERROR_URL);try{t.initOracleClient(e,Tu,B)}catch(s){let r=R.transformErr(s);throw r.code==="DPI-1047"&&(r.message+=`
`+re.getInstallHelp()),r}rs=i||{}}else VR.isDeepStrictEqual(rs,e)||R.throwErr(R.ERR_INIT_ORACLE_CLIENT_ARGS);B.thin=!1}T(tm,"initOracleClient");async function sm(i,e){let t={},s=D.SHUTDOWN_MODE_DEFAULT;R.assertArgCount(arguments,0,2),arguments.length==2?(R.assertParamValue(typeof i=="object",1),R.assertParamValue(typeof e=="number",2),t=i,s=e):arguments.length==1&&(R.assertParamValue(typeof i=="object",1),t=i);let r={user:t.user,password:t.password,connectString:t.connectString,connectionString:t.connectionString,externalAuth:t.externalAuth,privilege:D.SYSOPER},n=await this.getConnection(r);await n.shutdown(s),s!=this.SHUTDOWN_MODE_ABORT&&(await n.execute("ALTER DATABASE CLOSE"),await n.execute("ALTER DATABASE DISMOUNT"),await n.shutdown(this.SHUTDOWN_MODE_FINAL)),await n.close()}T(sm,"shutdown");async function rm(i){let e=i.connectString||i.connectionString;if(!e)return i;let t=e,s,r=new RegExp("^config-(?<provider>[A-Za-z0-9]+)(://)(?<provider_arg>[^?]+)");e.indexOf("?")!=-1&&(t=e.substring(0,e.indexOf("?")),s=e.substring(e.indexOf("?"),e.length));let n=t.match(r);if(n){let o=n.groups.provider,a=n.groups.provider_arg,c;try{c=UR("./configProviders/"+o)}catch{R.throwErr(R.ERR_CONFIG_PROVIDER_NOT_SUPPORTED,o)}let E=new c(a,s);try{E.init()}catch(u){R.throwErr(R.ERR_CONFIG_PROVIDER_LOAD_FAILED,u.message)}let l;try{l=await E.returnConfig()}catch(u){R.throwErr(R.ERR_CONFIG_PROVIDER_FAILED_TO_RETRIEVE_CONFIG,u.message)}i=E.modifyOptionsPrecedence(l,i)}return i}T(rm,"_checkConfigProvider");async function im(i,e){let t={},s={};R.assertArgCount(arguments,0,2),arguments.length==2?(R.assertParamValue(typeof i=="object",1),R.assertParamValue(typeof e=="object",2),t=i,s=e):arguments.length==1&&(R.assertParamValue(typeof i=="object",1),t=i);let r={user:t.user,password:t.password,connectString:t.connectString,connectionString:t.connectionString,externalAuth:t.externalAuth,privilege:this.SYSOPER|this.SYSPRELIM},n=await this.getConnection(r);await n.startup(s),await n.close(),r.privilege=this.SYSOPER,n=await this.getConnection(r),await n.execute("ALTER DATABASE MOUNT"),await n.execute("ALTER DATABASE OPEN"),await n.close()}T(im,"startup");Nu.exports={AqDeqOptions:FR,AqEnqOptions:xR,AqMessage:kR,AqQueue:bR,BaseDbObject:HR,Connection:cu,JsonId:H.JsonId,Lob:qR,Pool:Eu,PoolStatistics:vR,ResultSet:KR,SodaDatabase:WR,SodaCollection:XR,SodaDocCursor:zR,SodaDocument:QR,SodaOperation:JR,getConnection:re.callbackify($R),createPool:re.callbackify(ZR),getPool:em,initOracleClient:tm,shutdown:re.callbackify(sm),startup:re.callbackify(im),CQN_OPCODE_ALL_OPS:D.CQN_OPCODE_ALL_OPS,CQN_OPCODE_ALL_ROWS:D.CQN_OPCODE_ALL_ROWS,CQN_OPCODE_ALTER:D.CQN_OPCODE_ALTER,CQN_OPCODE_DELETE:D.CQN_OPCODE_DELETE,CQN_OPCODE_DROP:D.CQN_OPCODE_DROP,CQN_OPCODE_INSERT:D.CQN_OPCODE_INSERT,CQN_OPCODE_UPDATE:D.CQN_OPCODE_UPDATE,DB_TYPE_BFILE:H.DB_TYPE_BFILE,DB_TYPE_BINARY_DOUBLE:H.DB_TYPE_BINARY_DOUBLE,DB_TYPE_BINARY_FLOAT:H.DB_TYPE_BINARY_FLOAT,DB_TYPE_BINARY_INTEGER:H.DB_TYPE_BINARY_INTEGER,DB_TYPE_BLOB:H.DB_TYPE_BLOB,DB_TYPE_BOOLEAN:H.DB_TYPE_BOOLEAN,DB_TYPE_CHAR:H.DB_TYPE_CHAR,DB_TYPE_CLOB:H.DB_TYPE_CLOB,DB_TYPE_CURSOR:H.DB_TYPE_CURSOR,DB_TYPE_DATE:H.DB_TYPE_DATE,DB_TYPE_INTERVAL_DS:H.DB_TYPE_INTERVAL_DS,DB_TYPE_INTERVAL_YM:H.DB_TYPE_INTERVAL_YM,DB_TYPE_JSON:H.DB_TYPE_JSON,DB_TYPE_LONG:H.DB_TYPE_LONG,DB_TYPE_LONG_NVARCHAR:H.DB_TYPE_LONG_NVARCHAR,DB_TYPE_LONG_RAW:H.DB_TYPE_LONG_RAW,DB_TYPE_NCHAR:H.DB_TYPE_NCHAR,DB_TYPE_NCLOB:H.DB_TYPE_NCLOB,DB_TYPE_NUMBER:H.DB_TYPE_NUMBER,DB_TYPE_NVARCHAR:H.DB_TYPE_NVARCHAR,DB_TYPE_OBJECT:H.DB_TYPE_OBJECT,DB_TYPE_RAW:H.DB_TYPE_RAW,DB_TYPE_ROWID:H.DB_TYPE_ROWID,DB_TYPE_TIMESTAMP:H.DB_TYPE_TIMESTAMP,DB_TYPE_TIMESTAMP_LTZ:H.DB_TYPE_TIMESTAMP_LTZ,DB_TYPE_TIMESTAMP_TZ:H.DB_TYPE_TIMESTAMP_TZ,DB_TYPE_VARCHAR:H.DB_TYPE_VARCHAR,DB_TYPE_XMLTYPE:H.DB_TYPE_XMLTYPE,DB_TYPE_VECTOR:H.DB_TYPE_VECTOR,DEFAULT:D.DEFAULT,STMT_TYPE_UNKNOWN:D.STMT_TYPE_UNKNOWN,STMT_TYPE_SELECT:D.STMT_TYPE_SELECT,STMT_TYPE_UPDATE:D.STMT_TYPE_UPDATE,STMT_TYPE_DELETE:D.STMT_TYPE_DELETE,STMT_TYPE_INSERT:D.STMT_TYPE_INSERT,STMT_TYPE_CREATE:D.STMT_TYPE_CREATE,STMT_TYPE_DROP:D.STMT_TYPE_DROP,STMT_TYPE_ALTER:D.STMT_TYPE_ALTER,STMT_TYPE_BEGIN:D.STMT_TYPE_BEGIN,STMT_TYPE_DECLARE:D.STMT_TYPE_DECLARE,STMT_TYPE_CALL:D.STMT_TYPE_CALL,STMT_TYPE_EXPLAIN_PLAN:D.STMT_TYPE_EXPLAIN_PLAN,STMT_TYPE_MERGE:D.STMT_TYPE_MERGE,STMT_TYPE_ROLLBACK:D.STMT_TYPE_ROLLBACK,STMT_TYPE_COMMIT:D.STMT_TYPE_COMMIT,SHUTDOWN_MODE_DEFAULT:D.SHUTDOWN_MODE_DEFAULT,SHUTDOWN_MODE_TRANSACTIONAL:D.SHUTDOWN_MODE_TRANSACTIONAL,SHUTDOWN_MODE_TRANSACTIONAL_LOCAL:D.SHUTDOWN_MODE_TRANSACTIONAL_LOCAL,SHUTDOWN_MODE_IMMEDIATE:D.SHUTDOWN_MODE_IMMEDIATE,SHUTDOWN_MODE_ABORT:D.SHUTDOWN_MODE_ABORT,SHUTDOWN_MODE_FINAL:D.SHUTDOWN_MODE_FINAL,STARTUP_MODE_DEFAULT:D.STARTUP_MODE_DEFAULT,STARTUP_MODE_FORCE:D.STARTUP_MODE_FORCE,STARTUP_MODE_RESTRICT:D.STARTUP_MODE_RESTRICT,SUBSCR_EVENT_TYPE_SHUTDOWN:D.SUBSCR_EVENT_TYPE_SHUTDOWN,SUBSCR_EVENT_TYPE_SHUTDOWN_ANY:D.SUBSCR_EVENT_TYPE_SHUTDOWN_ANY,SUBSCR_EVENT_TYPE_STARTUP:D.SUBSCR_EVENT_TYPE_STARTUP,SUBSCR_EVENT_TYPE_DEREG:D.SUBSCR_EVENT_TYPE_DEREG,SUBSCR_EVENT_TYPE_OBJ_CHANGE:D.SUBSCR_EVENT_TYPE_OBJ_CHANGE,SUBSCR_EVENT_TYPE_QUERY_CHANGE:D.SUBSCR_EVENT_TYPE_QUERY_CHANGE,SUBSCR_EVENT_TYPE_AQ:D.SUBSCR_EVENT_TYPE_AQ,SUBSCR_GROUPING_CLASS_TIME:D.SUBSCR_GROUPING_CLASS_TIME,SUBSCR_GROUPING_TYPE_SUMMARY:D.SUBSCR_GROUPING_TYPE_SUMMARY,SUBSCR_GROUPING_TYPE_LAST:D.SUBSCR_GROUPING_TYPE_LAST,SUBSCR_NAMESPACE_AQ:D.SUBSCR_NAMESPACE_AQ,SUBSCR_NAMESPACE_DBCHANGE:D.SUBSCR_NAMESPACE_DBCHANGE,SUBSCR_QOS_BEST_EFFORT:D.SUBSCR_QOS_BEST_EFFORT,SUBSCR_QOS_DEREG_NFY:D.SUBSCR_QOS_DEREG_NFY,SUBSCR_QOS_QUERY:D.SUBSCR_QOS_QUERY,SUBSCR_QOS_RELIABLE:D.SUBSCR_QOS_RELIABLE,SUBSCR_QOS_ROWIDS:D.SUBSCR_QOS_ROWIDS,SYSASM:D.SYSASM,SYSBACKUP:D.SYSBACKUP,SYSDBA:D.SYSDBA,SYSDG:D.SYSDG,SYSKM:D.SYSKM,SYSOPER:D.SYSOPER,SYSPRELIM:D.SYSPRELIM,SYSRAC:D.SYSRAC,BIND_IN:D.BIND_IN,BIND_INOUT:D.BIND_INOUT,BIND_OUT:D.BIND_OUT,OUT_FORMAT_ARRAY:D.OUT_FORMAT_ARRAY,OUT_FORMAT_OBJECT:D.OUT_FORMAT_OBJECT,SODA_COLL_MAP_MODE:D.SODA_COLL_MAP_MODE,POOL_STATUS_OPEN:D.POOL_STATUS_OPEN,POOL_STATUS_DRAINING:D.POOL_STATUS_DRAINING,POOL_STATUS_CLOSED:D.POOL_STATUS_CLOSED,POOL_STATUS_RECONFIGURING:D.POOL_STATUS_RECONFIGURING,AQ_DEQ_NO_WAIT:D.AQ_DEQ_NO_WAIT,AQ_DEQ_WAIT_FOREVER:D.AQ_DEQ_WAIT_FOREVER,AQ_DEQ_MODE_BROWSE:D.AQ_DEQ_MODE_BROWSE,AQ_DEQ_MODE_LOCKED:D.AQ_DEQ_MODE_LOCKED,AQ_DEQ_MODE_REMOVE:D.AQ_DEQ_MODE_REMOVE,AQ_DEQ_MODE_REMOVE_NO_DATA:D.AQ_DEQ_MODE_REMOVE_NO_DATA,AQ_DEQ_NAV_FIRST_MSG:D.AQ_DEQ_NAV_FIRST_MSG,AQ_DEQ_NAV_NEXT_TRANSACTION:D.AQ_DEQ_NAV_NEXT_TRANSACTION,AQ_DEQ_NAV_NEXT_MSG:D.AQ_DEQ_NAV_NEXT_MSG,AQ_MSG_DELIV_MODE_PERSISTENT:D.AQ_MSG_DELIV_MODE_PERSISTENT,AQ_MSG_DELIV_MODE_BUFFERED:D.AQ_MSG_DELIV_MODE_BUFFERED,AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED:D.AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED,AQ_MSG_STATE_READY:D.AQ_MSG_STATE_READY,AQ_MSG_STATE_WAITING:D.AQ_MSG_STATE_WAITING,AQ_MSG_STATE_PROCESSED:D.AQ_MSG_STATE_PROCESSED,AQ_MSG_STATE_EXPIRED:D.AQ_MSG_STATE_EXPIRED,AQ_VISIBILITY_IMMEDIATE:D.AQ_VISIBILITY_IMMEDIATE,AQ_VISIBILITY_ON_COMMIT:D.AQ_VISIBILITY_ON_COMMIT,TPC_BEGIN_JOIN:D.TPC_BEGIN_JOIN,TPC_BEGIN_NEW:D.TPC_BEGIN_NEW,TPC_BEGIN_PROMOTE:D.TPC_BEGIN_PROMOTE,TPC_BEGIN_RESUME:D.TPC_BEGIN_RESUME,TPC_END_NORMAL:D.TPC_END_NORMAL,TPC_END_SUSPEND:D.TPC_END_SUSPEND,VECTOR_FORMAT_FLOAT32:D.VECTOR_FORMAT_FLOAT32,VECTOR_FORMAT_FLOAT64:D.VECTOR_FORMAT_FLOAT64,VECTOR_FORMAT_INT8:D.VECTOR_FORMAT_INT8,VECTOR_FORMAT_BINARY:D.VECTOR_FORMAT_BINARY,BLOB:H.DB_TYPE_BLOB,BUFFER:H.DB_TYPE_RAW,CLOB:H.DB_TYPE_CLOB,CURSOR:H.DB_TYPE_CURSOR,DATE:H.DB_TYPE_TIMESTAMP,NCLOB:H.DB_TYPE_NCLOB,NUMBER:H.DB_TYPE_NUMBER,STRING:H.DB_TYPE_VARCHAR,ARRAY:D.OUT_FORMAT_ARRAY,OBJECT:D.OUT_FORMAT_OBJECT,future:GR,get autoCommit(){return B.autoCommit},get connectionClass(){return B.connectionClass},get dbObjectAsPojo(){return B.dbObjectAsPojo},get edition(){return B.edition},get errorOnConcurrentExecute(){return B.errorOnConcurrentExecute},get events(){return B.events},get externalAuth(){return B.externalAuth},get fetchArraySize(){return B.fetchArraySize},get fetchAsBuffer(){return B.fetchAsBuffer},get fetchAsString(){return B.fetchAsString},get fetchTypeHandler(){return B.fetchTypeHandler},get lobPrefetchSize(){return B.lobPrefetchSize},get maxRows(){return B.maxRows},get oracleClientVersion(){return B.oracleClientVersion},get oracleClientVersionString(){return B.oracleClientVersionString},get outFormat(){return B.outFormat},get poolIncrement(){return B.poolIncrement},get poolMax(){return B.poolMax},get poolMaxPerShard(){return B.poolMaxPerShard},get poolMin(){return B.poolMin},get poolPingInterval(){return B.poolPingInterval},get poolPingTimeout(){return B.poolPingTimeout},get poolTimeout(){return B.poolTimeout},get prefetchRows(){return B.prefetchRows},get stmtCacheSize(){return B.stmtCacheSize},get thin(){return B.thin},get version(){return D.VERSION_MAJOR*1e4+D.VERSION_MINOR*100+D.VERSION_PATCH},get versionString(){return D.VERSION_STRING},get versionSuffix(){return D.VERSION_SUFFIX},set autoCommit(i){R.assertPropValue(typeof i=="boolean","autoCommit"),B.autoCommit=i},set connectionClass(i){R.assertPropValue(typeof i=="string","connectionClass"),B.connectionClass=i},set dbObjectAsPojo(i){R.assertPropValue(typeof i=="boolean","dbObjectAsPojo"),B.dbObjectAsPojo=i},set edition(i){R.assertPropValue(typeof i=="string","edition"),B.edition=i},set errorOnConcurrentExecute(i){R.assertPropValue(typeof i=="boolean","errorOnConcurrentExecute"),B.errorOnConcurrentExecute=i},set events(i){R.assertPropValue(typeof i=="boolean","events"),B.events=i},set externalAuth(i){R.assertPropValue(typeof i=="boolean","externalAuth"),B.externalAuth=i},set fetchArraySize(i){R.assertPropValue(Number.isInteger(i)&&i>0,"fetchArraySize"),B.fetchArraySize=i},set fetchAsBuffer(i){R.assertPropValue(Array.isArray(i),"fetchAsBuffer"),B.createFetchTypeMap(B.fetchAsString,i),B.fetchAsBuffer=i},set fetchAsString(i){R.assertPropValue(Array.isArray(i),"fetchAsString"),B.createFetchTypeMap(i,B.fetchAsBuffer),B.fetchAsString=i},set fetchTypeHandler(i){i!==void 0&&R.assertPropValue(typeof i=="function","fetchTypeHandler"),B.fetchTypeHandler=i},set lobPrefetchSize(i){R.assertPropValue(Number.isInteger(i)&&i>=0,"lobPrefetchSize"),B.lobPrefetchSize=i},set maxRows(i){R.assertPropValue(Number.isInteger(i)&&i>=0,"maxRows"),B.maxRows=i},set outFormat(i){i!==D.OUT_FORMAT_ARRAY&&i!==D.OUT_FORMAT_OBJECT&&R.throwErr(R.ERR_INVALID_PROPERTY_VALUE,"outFormat"),B.outFormat=i},set poolIncrement(i){R.assertPropValue(Number.isInteger(i)&&i>=0,"poolIncrement"),B.poolIncrement=i},set poolMax(i){R.assertPropValue(Number.isInteger(i)&&i>=0,"poolMax"),B.poolMax=i},set poolMaxPerShard(i){R.assertPropValue(Number.isInteger(i)&&i>=0,"poolMaxPerShard"),B.poolMaxPerShard=i},set poolMin(i){R.assertPropValue(Number.isInteger(i)&&i>=0,"poolMin"),B.poolMin=i},set poolPingInterval(i){R.assertPropValue(Number.isInteger(i)&&i<2**31&&i>=(-2)**31,"poolPingInterval"),B.poolPingInterval=i},set poolPingTimeout(i){R.assertPropValue(Number.isInteger(i)&&i>=0,"poolPingTimeout"),B.poolPingTimeout=i},set poolTimeout(i){R.assertPropValue(Number.isInteger(i)&&i>=0,"poolTimeout"),B.poolTimeout=i},set prefetchRows(i){R.assertPropValue(Number.isInteger(i)&&i>=0,"prefetchRows"),B.prefetchRows=i},set stmtCacheSize(i){R.assertPropValue(Number.isInteger(i)&&i>=0,"stmtCacheSize"),B.stmtCacheSize=i}}});var Au=I((bO,uu)=>{uu.exports=Su()});var BT=I(fu=>{fu.require=function(){if(typeof process=="object"&&process.versions&&process.versions.electron)try{let i=require("original-fs");if(Object.keys(i).length>0)return i}catch{}return require("fs")}});var wT=I((HO,du)=>{du.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var mu=I((qO,Ru)=>{var nm=BT().require(),Xe=require("path"),Pu=wT(),_m=typeof process=="object"&&process.platform==="win32",pu=T(i=>i&&typeof i=="object","is_Obj"),YT=new Uint32Array(256).map((i,e)=>{for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e>>>=1;return e>>>0});function Ve(i){this.sep=Xe.sep,this.fs=nm,pu(i)&&pu(i.fs)&&typeof i.fs.statSync=="function"&&(this.fs=i.fs)}T(Ve,"Utils");Ru.exports=Ve;Ve.prototype.makeDir=function(i){let e=this;function t(s){let r=s.split(e.sep)[0];s.split(e.sep).forEach(function(n){if(!(!n||n.substr(-1,1)===":")){r+=e.sep+n;var o;try{o=e.fs.statSync(r)}catch{e.fs.mkdirSync(r)}if(o&&o.isFile())throw Errors.FILE_IN_THE_WAY.replace("%s",r)}})}T(t,"mkdirSync"),t(i)};Ve.prototype.writeFileTo=function(i,e,t,s){let r=this;if(r.fs.existsSync(i)){if(!t)return!1;var n=r.fs.statSync(i);if(n.isDirectory())return!1}var o=Xe.dirname(i);r.fs.existsSync(o)||r.makeDir(o);var a;try{a=r.fs.openSync(i,"w",438)}catch{r.fs.chmodSync(i,438),a=r.fs.openSync(i,"w",438)}if(a)try{r.fs.writeSync(a,e,0,e.length,0)}finally{r.fs.closeSync(a)}return r.fs.chmodSync(i,s||438),!0};Ve.prototype.writeFileToAsync=function(i,e,t,s,r){typeof s=="function"&&(r=s,s=void 0);let n=this;n.fs.exists(i,function(o){if(o&&!t)return r(!1);n.fs.stat(i,function(a,c){if(o&&c.isDirectory())return r(!1);var E=Xe.dirname(i);n.fs.exists(E,function(l){l||n.makeDir(E),n.fs.open(i,"w",438,function(u,p){u?n.fs.chmod(i,438,function(){n.fs.open(i,"w",438,function(d,N){n.fs.write(N,e,0,e.length,0,function(){n.fs.close(N,function(){n.fs.chmod(i,s||438,function(){r(!0)})})})})}):p?n.fs.write(p,e,0,e.length,0,function(){n.fs.close(p,function(){n.fs.chmod(i,s||438,function(){r(!0)})})}):n.fs.chmod(i,s||438,function(){r(!0)})})})})})};Ve.prototype.findFiles=function(i){let e=this;function t(s,r,n){typeof r=="boolean"&&(n=r,r=void 0);let o=[];return e.fs.readdirSync(s).forEach(function(a){var c=Xe.join(s,a);e.fs.statSync(c).isDirectory()&&n&&(o=o.concat(t(c,r,n))),(!r||r.test(c))&&o.push(Xe.normalize(c)+(e.fs.statSync(c).isDirectory()?e.sep:""))}),o}return T(t,"findSync"),t(i,void 0,!0)};Ve.prototype.getAttributes=function(){};Ve.prototype.setAttributes=function(){};Ve.crc32update=function(i,e){return YT[(i^e)&255]^i>>>8};Ve.crc32=function(i){typeof i=="string"&&(i=Buffer.from(i,"utf8")),YT.length||genCRCTable();let e=i.length,t=-1;for(let s=0;s<e;)t=Ve.crc32update(t,i[s++]);return~t>>>0};Ve.methodToString=function(i){switch(i){case Pu.STORED:return"STORED ("+i+")";case Pu.DEFLATED:return"DEFLATED ("+i+")";default:return"UNSUPPORTED ("+i+")"}};Ve.canonical=function(i){if(!i)return"";var e=Xe.posix.normalize("/"+i.split("\\").join("/"));return Xe.join(".",e)};Ve.sanitize=function(i,e){i=Xe.resolve(Xe.normalize(i));for(var t=e.split("/"),s=0,r=t.length;s<r;s++){var n=Xe.normalize(Xe.join(i,t.slice(s,r).join(Xe.sep)));if(n.indexOf(i)===0)return n}return Xe.normalize(Xe.join(i,Xe.basename(e)))};Ve.toBuffer=T(function(e){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?Buffer.from(e,"utf8"):Buffer.alloc(0)},"toBuffer");Ve.readBigUInt64LE=function(i,e){var t=Buffer.from(i.slice(e,e+8));return t.swap64(),parseInt(`0x${t.toString("hex")}`)};Ve.isWin=_m;Ve.crcTable=YT});var Du=I((KO,Iu)=>{Iu.exports={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed",FILE_IN_THE_WAY:"There is a file in the way: %s",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:"File not found: %s",NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found"}});var gu=I((WO,Ou)=>{var Ri=BT().require(),Cu=require("path");Ri.existsSync=Ri.existsSync||Cu.existsSync;Ou.exports=function(i){var e=i||"",t=r(),s=null;function r(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return T(r,"newAttr"),e&&Ri.existsSync(e)?(s=Ri.statSync(e),t.directory=s.isDirectory(),t.mtime=s.mtime,t.atime=s.atime,t.executable=(73&s.mode)!==0,t.readonly=(128&s.mode)===0,t.hidden=Cu.basename(e)[0]==="."):console.warn("Invalid path: "+e),{get directory(){return t.directory},get readOnly(){return t.readonly},get hidden(){return t.hidden},get mtime(){return t.mtime},get atime(){return t.atime},get executable(){return t.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:e,isDirectory:t.directory,isReadOnly:t.readonly,isHidden:t.hidden,isExecutable:t.executable,mTime:t.mtime,aTime:t.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Vs=I((zO,cr)=>{cr.exports=mu();cr.exports.Constants=wT();cr.exports.Errors=Du();cr.exports.FileAttr=gu()});var yu=I((QO,Lu)=>{var Er=Vs(),w=Er.Constants;Lu.exports=function(){var i=20,e=10,t=0,s=0,r=0,n=0,o=0,a=0,c=0,E=0,l=0,u=0,p=0,d=0,N=0;i|=Er.isWin?2560:768,t|=w.FLG_EFS;var A={};function P(S){S=new Date(S),r=(S.getFullYear()-1980&127)<<25|S.getMonth()+1<<21|S.getDate()<<16|S.getHours()<<11|S.getMinutes()<<5|S.getSeconds()>>1}return T(P,"setTime"),P(+new Date),{get made(){return i},set made(S){i=S},get version(){return e},set version(S){e=S},get flags(){return t},set flags(S){t=S},get method(){return s},set method(S){switch(S){case w.STORED:this.version=10;case w.DEFLATED:default:this.version=20}s=S},get time(){return new Date((r>>25&127)+1980,(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(r&31)<<1)},set time(S){P(S)},get crc(){return n},set crc(S){n=Math.max(0,S)>>>0},get compressedSize(){return o},set compressedSize(S){o=Math.max(0,S)>>>0},get size(){return a},set size(S){a=Math.max(0,S)>>>0},get fileNameLength(){return c},set fileNameLength(S){c=S},get extraLength(){return E},set extraLength(S){E=S},get commentLength(){return l},set commentLength(S){l=S},get diskNumStart(){return u},set diskNumStart(S){u=Math.max(0,S)>>>0},get inAttr(){return p},set inAttr(S){p=Math.max(0,S)>>>0},get attr(){return d},set attr(S){d=Math.max(0,S)>>>0},get fileAttr(){return d?(d>>>0|0)>>16&4095:0},get offset(){return N},set offset(S){N=Math.max(0,S)>>>0},get encripted(){return(t&1)===1},get entryHeaderSize(){return w.CENHDR+c+E+l},get realDataOffset(){return N+w.LOCHDR+A.fnameLen+A.extraLen},get dataHeader(){return A},loadDataHeaderFromBinary:function(S){var C=S.slice(N,N+w.LOCHDR);if(C.readUInt32LE(0)!==w.LOCSIG)throw new Error(Er.Errors.INVALID_LOC);A={version:C.readUInt16LE(w.LOCVER),flags:C.readUInt16LE(w.LOCFLG),method:C.readUInt16LE(w.LOCHOW),time:C.readUInt32LE(w.LOCTIM),crc:C.readUInt32LE(w.LOCCRC),compressedSize:C.readUInt32LE(w.LOCSIZ),size:C.readUInt32LE(w.LOCLEN),fnameLen:C.readUInt16LE(w.LOCNAM),extraLen:C.readUInt16LE(w.LOCEXT)}},loadFromBinary:function(S){if(S.length!==w.CENHDR||S.readUInt32LE(0)!==w.CENSIG)throw new Error(Er.Errors.INVALID_CEN);i=S.readUInt16LE(w.CENVEM),e=S.readUInt16LE(w.CENVER),t=S.readUInt16LE(w.CENFLG),s=S.readUInt16LE(w.CENHOW),r=S.readUInt32LE(w.CENTIM),n=S.readUInt32LE(w.CENCRC),o=S.readUInt32LE(w.CENSIZ),a=S.readUInt32LE(w.CENLEN),c=S.readUInt16LE(w.CENNAM),E=S.readUInt16LE(w.CENEXT),l=S.readUInt16LE(w.CENCOM),u=S.readUInt16LE(w.CENDSK),p=S.readUInt16LE(w.CENATT),d=S.readUInt32LE(w.CENATX),N=S.readUInt32LE(w.CENOFF)},dataHeaderToBinary:function(){var S=Buffer.alloc(w.LOCHDR);return S.writeUInt32LE(w.LOCSIG,0),S.writeUInt16LE(e,w.LOCVER),S.writeUInt16LE(t,w.LOCFLG),S.writeUInt16LE(s,w.LOCHOW),S.writeUInt32LE(r,w.LOCTIM),S.writeUInt32LE(n,w.LOCCRC),S.writeUInt32LE(o,w.LOCSIZ),S.writeUInt32LE(a,w.LOCLEN),S.writeUInt16LE(c,w.LOCNAM),S.writeUInt16LE(E,w.LOCEXT),S},entryHeaderToBinary:function(){var S=Buffer.alloc(w.CENHDR+c+E+l);return S.writeUInt32LE(w.CENSIG,0),S.writeUInt16LE(i,w.CENVEM),S.writeUInt16LE(e,w.CENVER),S.writeUInt16LE(t,w.CENFLG),S.writeUInt16LE(s,w.CENHOW),S.writeUInt32LE(r,w.CENTIM),S.writeUInt32LE(n,w.CENCRC),S.writeUInt32LE(o,w.CENSIZ),S.writeUInt32LE(a,w.CENLEN),S.writeUInt16LE(c,w.CENNAM),S.writeUInt16LE(E,w.CENEXT),S.writeUInt16LE(l,w.CENCOM),S.writeUInt16LE(u,w.CENDSK),S.writeUInt16LE(p,w.CENATT),S.writeUInt32LE(d,w.CENATX),S.writeUInt32LE(N,w.CENOFF),S.fill(0,w.CENHDR),S},toJSON:function(){let S=T(function(C){return C+" bytes"},"bytes");return{made:i,version:e,flags:t,method:Er.methodToString(s),time:this.time,crc:"0x"+n.toString(16).toUpperCase(),compressedSize:S(o),size:S(a),fileNameLength:S(c),extraLength:S(E),commentLength:S(l),diskNumStart:u,inAttr:p,attr:d,offset:N,entryHeaderSize:S(w.CENHDR+c+E+l)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var wu=I((jO,Bu)=>{var Fs=Vs(),ue=Fs.Constants;Bu.exports=function(){var i=0,e=0,t=0,s=0,r=0;return{get diskEntries(){return i},set diskEntries(n){i=e=n},get totalEntries(){return e},set totalEntries(n){e=i=n},get size(){return t},set size(n){t=n},get offset(){return s},set offset(n){s=n},get commentLength(){return r},set commentLength(n){r=n},get mainHeaderSize(){return ue.ENDHDR+r},loadFromBinary:function(n){if((n.length!==ue.ENDHDR||n.readUInt32LE(0)!==ue.ENDSIG)&&(n.length<ue.ZIP64HDR||n.readUInt32LE(0)!==ue.ZIP64SIG))throw new Error(Fs.Errors.INVALID_END);n.readUInt32LE(0)===ue.ENDSIG?(i=n.readUInt16LE(ue.ENDSUB),e=n.readUInt16LE(ue.ENDTOT),t=n.readUInt32LE(ue.ENDSIZ),s=n.readUInt32LE(ue.ENDOFF),r=n.readUInt16LE(ue.ENDCOM)):(i=Fs.readBigUInt64LE(n,ue.ZIP64SUB),e=Fs.readBigUInt64LE(n,ue.ZIP64TOT),t=Fs.readBigUInt64LE(n,ue.ZIP64SIZ),s=Fs.readBigUInt64LE(n,ue.ZIP64OFF),r=0)},toBinary:function(){var n=Buffer.alloc(ue.ENDHDR+r);return n.writeUInt32LE(ue.ENDSIG,0),n.writeUInt32LE(0,4),n.writeUInt16LE(i,ue.ENDSUB),n.writeUInt16LE(e,ue.ENDTOT),n.writeUInt32LE(t,ue.ENDSIZ),n.writeUInt32LE(s,ue.ENDOFF),n.writeUInt16LE(r,ue.ENDCOM),n.fill(" ",ue.ENDHDR),n},toJSON:function(){let n=T(function(o,a){let c=o.toString(16).toUpperCase();for(;c.length<a;)c="0"+c;return"0x"+c},"offset");return{diskEntries:i,totalEntries:e,size:t+" bytes",offset:n(s,4),commentLength:r}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var MT=I(UT=>{UT.EntryHeader=yu();UT.MainHeader=wu()});var Uu=I((eg,Yu)=>{Yu.exports=function(i){var e=require("zlib"),t={chunkSize:(parseInt(i.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(i,t)},deflateAsync:function(s){var r=e.createDeflateRaw(t),n=[],o=0;r.on("data",function(a){n.push(a),o+=a.length}),r.on("end",function(){var a=Buffer.alloc(o),c=0;a.fill(0);for(var E=0;E<n.length;E++){var l=n[E];l.copy(a,c),c+=l.length}s&&s(a)}),r.end(i)}}}});var Vu=I((tg,Mu)=>{Mu.exports=function(i){var e=require("zlib");return{inflate:function(){return e.inflateRawSync(i)},inflateAsync:function(t){var s=e.createInflateRaw(),r=[],n=0;s.on("data",function(o){r.push(o),n+=o.length}),s.on("end",function(){var o=Buffer.alloc(n),a=0;o.fill(0);for(var c=0;c<r.length;c++){var E=r[c];E.copy(o,a),a+=E.length}t&&t(o)}),s.end(i)}}}});var Gu=I((sg,bu)=>{"use strict";var{randomFillSync:Fu}=require("crypto"),om=new Uint32Array(256).map((i,e)=>{for(let t=0;t<8;t++)e&1?e=e>>>1^3988292384:e>>>=1;return e>>>0}),ku=T((i,e)=>Math.imul(i,e)>>>0,"uMul"),xu=T((i,e)=>om[(i^e)&255]^i>>>8,"crc32update"),lr=T(()=>typeof Fu=="function"?Fu(Buffer.alloc(12)):lr.node(),"genSalt");lr.node=()=>{let i=Buffer.alloc(12),e=i.length;for(let t=0;t<e;t++)i[t]=Math.random()*256&255;return i};var mi={genSalt:lr};function Ii(i){let e=Buffer.isBuffer(i)?i:Buffer.from(i);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let t=0;t<e.length;t++)this.updateKeys(e[t])}T(Ii,"Initkeys");Ii.prototype.updateKeys=function(i){let e=this.keys;return e[0]=xu(e[0],i),e[1]+=e[0]&255,e[1]=ku(e[1],134775813)+1,e[2]=xu(e[2],e[1]>>>24),i};Ii.prototype.next=function(){let i=(this.keys[2]|2)>>>0;return ku(i,i^1)>>8&255};function am(i){let e=new Ii(i);return function(t){let s=Buffer.alloc(t.length),r=0;for(let n of t)s[r++]=e.updateKeys(n^e.next());return s}}T(am,"make_decrypter");function Tm(i){let e=new Ii(i);return function(t,s,r=0){s||(s=Buffer.alloc(t.length));for(let n of t){let o=e.next();s[r++]=n^o,e.updateKeys(n)}return s}}T(Tm,"make_encrypter");function cm(i,e,t){if(!i||!Buffer.isBuffer(i)||i.length<12)return Buffer.alloc(0);let s=am(t);if(s(i.slice(0,12))[11]!==e.crc>>>24)throw"ADM-ZIP: Wrong Password";return s(i.slice(12))}T(cm,"decrypt");function Em(i){Buffer.isBuffer(i)&&i.length>=12?mi.genSalt=function(){return i.slice(0,12)}:i==="node"?mi.genSalt=lr.node:mi.genSalt=lr}T(Em,"_salter");function lm(i,e,t,s=!1){i==null&&(i=Buffer.alloc(0)),Buffer.isBuffer(i)||(i=Buffer.from(i.toString()));let r=Tm(t),n=mi.genSalt();n[11]=e.crc>>>24&255,s&&(n[10]=e.crc>>>16&255);let o=Buffer.alloc(i.length+12);return r(n,o),r(i,o,12)}T(lm,"encrypt");bu.exports={decrypt:cm,encrypt:lm,_salter:Em}});var Hu=I(Di=>{Di.Deflater=Uu();Di.Inflater=Vu();Di.ZipCrypto=Gu()});var FT=I((ng,qu)=>{var Ce=Vs(),hm=MT(),et=Ce.Constants,VT=Hu();qu.exports=function(i){var e=new hm.EntryHeader,t=Buffer.alloc(0),s=Buffer.alloc(0),r=!1,n=null,o=Buffer.alloc(0);function a(){return!i||!Buffer.isBuffer(i)?Buffer.alloc(0):(e.loadDataHeaderFromBinary(i),i.slice(e.realDataOffset,e.realDataOffset+e.compressedSize))}T(a,"getCompressedDataFromZip");function c(N){return!((e.flags&8)!==8&&Ce.crc32(N)!==e.dataHeader.crc)}T(c,"crc32OK");function E(N,A,P){if(typeof A>"u"&&typeof N=="string"&&(P=N,N=void 0),r)return N&&A&&A(Buffer.alloc(0),Ce.Errors.DIRECTORY_CONTENT_ERROR),Buffer.alloc(0);var S=a();if(S.length===0)return N&&A&&A(S),S;if(e.encripted){if(typeof P!="string"&&!Buffer.isBuffer(P))throw new Error("ADM-ZIP: Incompatible password parameter");S=VT.ZipCrypto.decrypt(S,e,P)}var C=Buffer.alloc(e.size);switch(e.method){case Ce.Constants.STORED:if(S.copy(C),c(C))return N&&A&&A(C),C;throw N&&A&&A(C,Ce.Errors.BAD_CRC),new Error(Ce.Errors.BAD_CRC);case Ce.Constants.DEFLATED:var O=new VT.Inflater(S);if(N)O.inflateAsync(function(y){y.copy(y,0),A&&(c(y)?A(y):A(y,Ce.Errors.BAD_CRC))});else{if(O.inflate(C).copy(C,0),!c(C))throw new Error(Ce.Errors.BAD_CRC+" "+t.toString());return C}break;default:throw N&&A&&A(Buffer.alloc(0),Ce.Errors.UNKNOWN_METHOD),new Error(Ce.Errors.UNKNOWN_METHOD)}}T(E,"decompress");function l(N,A){if((!n||!n.length)&&Buffer.isBuffer(i))return N&&A&&A(a()),a();if(n.length&&!r){var P;switch(e.method){case Ce.Constants.STORED:return e.compressedSize=e.size,P=Buffer.alloc(n.length),n.copy(P),N&&A&&A(P),P;default:case Ce.Constants.DEFLATED:var S=new VT.Deflater(n);if(N)S.deflateAsync(function(O){P=Buffer.alloc(O.length),e.compressedSize=O.length,O.copy(P),A&&A(P)});else{var C=S.deflate();return e.compressedSize=C.length,C}S=null;break}}else if(N&&A)A(Buffer.alloc(0));else return Buffer.alloc(0)}T(l,"compress");function u(N,A){return(N.readUInt32LE(A+4)<<4)+N.readUInt32LE(A)}T(u,"readUInt64LE");function p(N){for(var A=0,P,S,C;A<N.length;)P=N.readUInt16LE(A),A+=2,S=N.readUInt16LE(A),A+=2,C=N.slice(A,A+S),A+=S,et.ID_ZIP64===P&&d(C)}T(p,"parseExtra");function d(N){var A,P,S,C;N.length>=et.EF_ZIP64_SCOMP&&(A=u(N,et.EF_ZIP64_SUNCOMP),e.size===et.EF_ZIP64_OR_32&&(e.size=A)),N.length>=et.EF_ZIP64_RHO&&(P=u(N,et.EF_ZIP64_SCOMP),e.compressedSize===et.EF_ZIP64_OR_32&&(e.compressedSize=P)),N.length>=et.EF_ZIP64_DSN&&(S=u(N,et.EF_ZIP64_RHO),e.offset===et.EF_ZIP64_OR_32&&(e.offset=S)),N.length>=et.EF_ZIP64_DSN+4&&(C=N.readUInt32LE(et.EF_ZIP64_DSN),e.diskNumStart===et.EF_ZIP64_OR_16&&(e.diskNumStart=C))}return T(d,"parseZip64ExtendedInformation"),{get entryName(){return t.toString()},get rawEntryName(){return t},set entryName(N){t=Ce.toBuffer(N);var A=t[t.length-1];r=A===47||A===92,e.fileNameLength=t.length},get extra(){return o},set extra(N){o=N,e.extraLength=N.length,p(N)},get comment(){return s.toString()},set comment(N){s=Ce.toBuffer(N),e.commentLength=s.length},get name(){var N=t.toString();return r?N.substr(N.length-1).split("/").pop():N.split("/").pop()},get isDirectory(){return r},getCompressedData:function(){return l(!1,null)},getCompressedDataAsync:function(N){l(!0,N)},setData:function(N){n=Ce.toBuffer(N),!r&&n.length?(e.size=n.length,e.method=Ce.Constants.DEFLATED,e.crc=Ce.crc32(N),e.changed=!0):e.method=Ce.Constants.STORED},getData:function(N){return e.changed?n:E(!1,null,N)},getDataAsync:function(N,A){e.changed?N(n):E(!0,N,A)},set attr(N){e.attr=N},get attr(){return e.attr},set header(N){e.loadFromBinary(N)},get header(){return e},packHeader:function(){var N=e.entryHeaderToBinary(),A=Ce.Constants.CENHDR;return t.copy(N,A),A+=t.length,e.extraLength&&(o.copy(N,A),A+=e.extraLength),e.commentLength&&s.copy(N,A),N},toJSON:function(){let N=T(function(A){return"<"+(A&&A.length+" bytes buffer"||"null")+">"},"bytes");return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:e.toJSON(),compressedData:N(i),data:N(n)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Wu=I((og,Ku)=>{var vu=FT(),Nm=MT(),Ge=Vs();Ku.exports=function(i,e){var t=[],s={},r=Buffer.alloc(0),n=new Nm.MainHeader,o=!1;let a=Object.assign(Object.create(null),e),{noSort:c}=a;i?u(a.readEntries):o=!0;function E(d){let N=n.diskEntries,A=n.offset;for(let P=0;P<N;P++){let S=A,C=new vu(i);C.header=i.slice(S,S+=Ge.Constants.CENHDR),C.entryName=i.slice(S,S+=C.header.fileNameLength),A+=C.header.entryHeaderSize,d(C)}}T(E,"iterateEntries");function l(){o=!0,s={},t=new Array(n.diskEntries);for(var d=n.offset,N=0;N<t.length;N++){var A=d,P=new vu(i);P.header=i.slice(A,A+=Ge.Constants.CENHDR),P.entryName=i.slice(A,A+=P.header.fileNameLength),P.header.extraLength&&(P.extra=i.slice(A,A+=P.header.extraLength)),P.header.commentLength&&(P.comment=i.slice(A,A+P.header.commentLength)),d+=P.header.entryHeaderSize,t[N]=P,s[P.entryName]=P}}T(l,"readEntries");function u(d){var N=i.length-Ge.Constants.ENDHDR,A=Math.max(0,N-65535),P=A,S=i.length,C=-1,O=0;for(N;N>=P;N--)if(i[N]===80){if(i.readUInt32LE(N)===Ge.Constants.ENDSIG){C=N,O=N,S=N+Ge.Constants.ENDHDR,P=N-Ge.Constants.END64HDR;continue}if(i.readUInt32LE(N)===Ge.Constants.END64SIG){P=A;continue}if(i.readUInt32LE(N)===Ge.Constants.ZIP64SIG){C=N,S=N+Ge.readBigUInt64LE(i,N+Ge.Constants.ZIP64SIZE)+Ge.Constants.ZIP64LEAD;break}}if(!~C)throw new Error(Ge.Errors.INVALID_FORMAT);n.loadFromBinary(i.slice(C,S)),n.commentLength&&(r=i.slice(O+Ge.Constants.ENDHDR)),d&&l()}T(u,"readMainHeader");function p(){t.length>1&&!c&&t.sort((d,N)=>d.entryName.toLowerCase().localeCompare(N.entryName.toLowerCase()))}return T(p,"sortEntries"),{get entries(){return o||l(),t},get comment(){return r.toString()},set comment(d){r=Ge.toBuffer(d),n.commentLength=r.length},getEntryCount:function(){return o?t.length:n.diskEntries},forEach:function(d){if(!o){E(d);return}t.forEach(d)},getEntry:function(d){return o||l(),s[d]||null},setEntry:function(d){o||l(),t.push(d),s[d.entryName]=d,n.totalEntries=t.length},deleteEntry:function(d){o||l();var N=s[d];if(N&&N.isDirectory){var A=this;this.getEntryChildren(N).forEach(function(P){P.entryName!==d&&A.deleteEntry(P.entryName)})}t.splice(t.indexOf(N),1),delete s[d],n.totalEntries=t.length},getEntryChildren:function(d){if(o||l(),d&&d.isDirectory){let N=[],A=d.entryName,P=A.length;return t.forEach(function(S){S.entryName.substr(0,P)===A&&N.push(S)}),N}return[]},compressToBuffer:function(){o||l(),p();let d=[],N=[],A=0,P=0;n.size=0,n.offset=0;for(let O of t){let y=O.getCompressedData();O.header.offset=P;let W=O.header.dataHeaderToBinary(),q=O.rawEntryName.length,J=Buffer.alloc(q+O.extra.length);O.rawEntryName.copy(J,0),J.copy(O.extra,q);let he=W.length+J.length+y.length;P+=he,d.push(W),d.push(J),d.push(y);let Ae=O.packHeader();N.push(Ae),n.size+=Ae.length,A+=he+Ae.length}A+=n.mainHeaderSize,n.offset=P,P=0;let S=Buffer.alloc(A);for(let O of d)O.copy(S,P),P+=O.length;for(let O of N)O.copy(S,P),P+=O.length;let C=n.toBinary();return r&&r.copy(C,Ge.Constants.ENDHDR),C.copy(S,P),S},toAsyncBuffer:function(d,N,A,P){try{o||l(),p();let S=[],C=[],O=0,y=0;n.size=0,n.offset=0;let W=T(function(q){if(q.length){let J=q.pop(),he=J.entryName+J.extra.toString();A&&A(he),J.getCompressedDataAsync(function(Ae){P&&P(he),J.header.offset=y;let _t=J.header.dataHeaderToBinary(),os=Buffer.alloc(he.length,he),as=_t.length+os.length+Ae.length;y+=as,S.push(_t),S.push(os),S.push(Ae);let ks=J.packHeader();C.push(ks),n.size+=ks.length,O+=as+ks.length,W(q)})}else{O+=n.mainHeaderSize,n.offset=y,y=0;let J=Buffer.alloc(O);S.forEach(function(Ae){Ae.copy(J,y),y+=Ae.length}),C.forEach(function(Ae){Ae.copy(J,y),y+=Ae.length});let he=n.toBinary();r&&r.copy(he,Ge.Constants.ENDHDR),he.copy(J,y),d(J)}},"compress2Buffer");W(t)}catch(S){N(S)}}}}});var zu=I((Tg,Xu)=>{var ge=Vs(),dt=require("path"),Sm=FT(),um=Wu(),is=T((i,e)=>typeof i=="boolean"?i:e,"get_Bool"),xT=T((i,e)=>typeof i=="string"?i:e,"get_Str"),Am={noSort:!1,readEntries:!1,method:ge.Constants.NONE,fs:null};Xu.exports=function(i,e){let t=null,s=Object.assign(Object.create(null),Am);i&&typeof i=="object"&&(i instanceof Uint8Array||(Object.assign(s,i),i=s.input?s.input:void 0,s.input&&delete s.input),Buffer.isBuffer(i)&&(t=i,s.method=ge.Constants.BUFFER,i=void 0)),Object.assign(s,e);let r=new ge(s);if(i&&typeof i=="string")if(r.fs.existsSync(i))s.method=ge.Constants.FILE,s.filename=i,t=r.fs.readFileSync(i);else throw new Error(ge.Errors.INVALID_FILENAME);let n=new um(t,s),{canonical:o,sanitize:a}=ge;function c(l){if(l&&n){var u;if(typeof l=="string"&&(u=n.getEntry(l)),typeof l=="object"&&typeof l.entryName<"u"&&typeof l.header<"u"&&(u=n.getEntry(l.entryName)),u)return u}return null}T(c,"getEntry");function E(l){let{join:u,normalize:p,sep:d}=dt.posix;return u(".",p(d+l.split("\\").join(d)+d))}return T(E,"fixPath"),{readFile:function(l,u){var p=c(l);return p&&p.getData(u)||null},readFileAsync:function(l,u){var p=c(l);p?p.getDataAsync(u):u(null,"getEntry failed for:"+l)},readAsText:function(l,u){var p=c(l);if(p){var d=p.getData();if(d&&d.length)return d.toString(u||"utf8")}return""},readAsTextAsync:function(l,u,p){var d=c(l);d?d.getDataAsync(function(N,A){if(A){u(N,A);return}N&&N.length?u(N.toString(p||"utf8")):u("")}):u("")},deleteFile:function(l){var u=c(l);u&&n.deleteEntry(u.entryName)},addZipComment:function(l){n.comment=l},getZipComment:function(){return n.comment||""},addZipEntryComment:function(l,u){var p=c(l);p&&(p.comment=u)},getZipEntryComment:function(l){var u=c(l);return u&&u.comment||""},updateFile:function(l,u){var p=c(l);p&&p.setData(u)},addLocalFile:function(l,u,p,d){if(r.fs.existsSync(l)){u=u?E(u):"";var N=l.split("\\").join("/").split("/").pop();u+=p||N;let A=r.fs.statSync(l);this.addFile(u,r.fs.readFileSync(l),d,A)}else throw new Error(ge.Errors.FILE_NOT_FOUND.replace("%s",l))},addLocalFolder:function(l,u,p){if(p instanceof RegExp?p=function(d){return function(N){return d.test(N)}}(p):typeof p!="function"&&(p=T(function(){return!0},"filter")),u=u?E(u):"",l=dt.normalize(l),r.fs.existsSync(l)){let d=r.findFiles(l),N=this;d.length&&d.forEach(function(A){var P=dt.relative(l,A).split("\\").join("/");if(p(P)){var S=r.fs.statSync(A);S.isFile()?N.addFile(u+P,r.fs.readFileSync(A),"",S):N.addFile(u+P+"/",Buffer.alloc(0),"",S)}})}else throw new Error(ge.Errors.FILE_NOT_FOUND.replace("%s",l))},addLocalFolderAsync:function(l,u,p,d){d instanceof RegExp?d=function(A){return function(P){return A.test(P)}}(d):typeof d!="function"&&(d=T(function(){return!0},"filter")),p=p?E(p):"",l=dt.normalize(l);var N=this;r.fs.open(l,"r",function(A){if(A&&A.code==="ENOENT")u(void 0,ge.Errors.FILE_NOT_FOUND.replace("%s",l));else if(A)u(void 0,A);else{var P=r.findFiles(l),S=-1,C=T(function(){if(S+=1,S<P.length){var O=P[S],y=dt.relative(l,O).split("\\").join("/");y=y.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),d(y)?r.fs.stat(O,function(W,q){W&&u(void 0,W),q.isFile()?r.fs.readFile(O,function(J,he){J?u(void 0,J):(N.addFile(p+y,he,"",q),C())}):(N.addFile(p+y+"/",Buffer.alloc(0),"",q),C())}):C()}else u(!0,void 0)},"next");C()}})},addLocalFolderPromise:function(l,u){return new Promise((p,d)=>{let{filter:N,zipPath:A}=Object.assign({},u);this.addLocalFolderAsync(l,(P,S)=>{S&&d(S),P&&p(this)},A,N)})},addFile:function(l,u,p,d){let N=c(l),A=N!=null;A||(N=new Sm,N.entryName=l),N.comment=p||"";let P=typeof d=="object"&&d instanceof r.fs.Stats;P&&(N.header.time=d.mtime);var S=N.isDirectory?16:0;if(!ge.isWin){let C=N.isDirectory?16384:32768;P?C|=4095&d.mode:typeof d=="number"?C|=4095&d:C|=N.isDirectory?493:420,S=(S|C<<16)>>>0}N.attr=S,N.setData(u),A||n.setEntry(N)},getEntries:function(){return n?n.entries:[]},getEntry:function(l){return c(l)},getEntryCount:function(){return n.getEntryCount()},forEach:function(l){return n.forEach(l)},extractEntryTo:function(l,u,p,d,N,A){d=is(d,!1),N=is(N,!1),p=is(p,!0),A=xT(A,xT(N,void 0));var P=c(l);if(!P)throw new Error(ge.Errors.NO_ENTRY);var S=o(P.entryName),C=a(u,A&&!P.isDirectory?A:p?S:dt.basename(S));if(P.isDirectory){var O=n.getEntryChildren(P);return O.forEach(function(q){if(q.isDirectory)return;var J=q.getData();if(!J)throw new Error(ge.Errors.CANT_EXTRACT_FILE);var he=o(q.entryName),Ae=a(u,p?he:dt.basename(he));let _t=N?q.header.fileAttr:void 0;r.writeFileTo(Ae,J,d,_t)}),!0}var y=P.getData();if(!y)throw new Error(ge.Errors.CANT_EXTRACT_FILE);if(r.fs.existsSync(C)&&!d)throw new Error(ge.Errors.CANT_OVERRIDE);let W=N?l.header.fileAttr:void 0;return r.writeFileTo(C,y,d,W),!0},test:function(l){if(!n)return!1;for(var u in n.entries)try{if(u.isDirectory)continue;var p=n.entries[u].getData(l);if(!p)return!1}catch{return!1}return!0},extractAllTo:function(l,u,p,d){if(u=is(u,!1),d=xT(p,d),p=is(p,!1),!n)throw new Error(ge.Errors.NO_ZIP);n.entries.forEach(function(N){var A=a(l,o(N.entryName.toString()));if(N.isDirectory){r.makeDir(A);return}var P=N.getData(d);if(!P)throw new Error(ge.Errors.CANT_EXTRACT_FILE);let S=p?N.header.fileAttr:void 0;r.writeFileTo(A,P,u,S);try{r.fs.utimesSync(A,N.header.time,N.header.time)}catch{throw new Error(ge.Errors.CANT_EXTRACT_FILE)}})},extractAllToAsync:function(l,u,p,d){if(d||(d=T(function(){},"callback")),u=is(u,!1),typeof p=="function"&&!d&&(d=p),p=is(p,!1),!n){d(new Error(ge.Errors.NO_ZIP));return}l=dt.resolve(l);let N=T(O=>a(l,dt.normalize(o(O.entryName.toString()))),"getPath"),A=T((O,y)=>new Error(O+': "'+y+'"'),"getError"),P=[],S=new Set;n.entries.forEach(O=>{O.isDirectory?P.push(O):S.add(O)});for(let O of P){let y=N(O),W=p?O.header.fileAttr:void 0;try{r.makeDir(y),W&&r.fs.chmodSync(y,W),r.fs.utimesSync(y,O.header.time,O.header.time)}catch{d(A("Unable to create folder",y))}}let C=T(()=>{S.size===0&&d()},"done");for(let O of S.values()){let y=dt.normalize(o(O.entryName.toString())),W=a(l,y);O.getDataAsync(function(q,J){if(J){d(new Error(J));return}if(!q)d(new Error(ge.Errors.CANT_EXTRACT_FILE));else{let he=p?O.header.fileAttr:void 0;r.writeFileToAsync(W,q,u,he,function(Ae){if(!Ae){d(A("Unable to write file",W));return}r.fs.utimes(W,O.header.time,O.header.time,function(_t){if(_t){d(A("Unable to set times",W));return}S.delete(O),C()})})}})}C()},writeZip:function(l,u){if(arguments.length===1&&typeof l=="function"&&(u=l,l=""),!l&&s.filename&&(l=s.filename),!!l){var p=n.compressToBuffer();if(p){var d=r.writeFileTo(l,p,!0);typeof u=="function"&&u(d?null:new Error("failed"),"")}}},writeZipPromise:function(l,u){let{overwrite:p,perm:d}=Object.assign({overwrite:!0},u);return new Promise((N,A)=>{!l&&s.filename&&(l=s.filename),l||A("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(P=>{let S=T(C=>C?N(C):A("ADM-ZIP: Wasn't able to write zip file"),"ret");r.writeFileToAsync(l,P,p,d,S)},A)})},toBufferPromise:function(){return new Promise((l,u)=>{n.toAsyncBuffer(l,u)})},toBuffer:function(l,u,p,d){return this.valueOf=2,typeof l=="function"?(n.toAsyncBuffer(l,u,p,d),null):n.compressToBuffer()}}}});var ju=I((Eg,Ju)=>{"use strict";var fm=require("crypto"),xs=require("fs"),Qu=require("path"),dm=zu(),Pm=T((i,e)=>new Promise((t,s)=>{try{let r=new dm(i);if(!r)return s(new Error("Link to zip file is broken or system has no permissions to "+i+" folder"));let n=r.getEntries();return Object.keys(n).length===0?s(new Error("Zip file is empty")):(r.extractAllTo(e,!0),t(e))}catch(r){s(r)}}),"extractZip"),pm=T((i,e)=>{if(!xs.existsSync(i))return;let t=/DIRECTORY\=\".+?\"/i,s=xs.readFileSync(i).toString();t.test(s)&&(s=s.replace(t,`DIRECTORY="${e}"`),xs.writeFileSync(i,s))},"replaceSqlNetOraDirectoryPath"),Rm=T(i=>new Promise((e,t)=>{let s=T(o=>fm.createHash("md5").update(o,"utf-8").digest("hex"),"getHash"),r=xs.createReadStream(i),n="";r.on("data",o=>{n+=o}),r.on("error",o=>{t(o)}),r.on("end",function(){e(s(n))})}),"getHashByFile"),mm=T(async({walletFile:i,tempFolder:e,name:t})=>{if(!xs.existsSync(i))return;let s=await Rm(i),r=Qu.join(e,t+"_"+s);if(xs.existsSync(r))return r;await Pm(i,r);let n=Qu.join(r,"sqlnet.ora");return pm(n,r),r},"extractWallet");Ju.exports=mm});var Zu=I(kT=>{"use strict";Object.defineProperty(kT,"__esModule",{value:!0});var Im=function(){function i(e,t){t===void 0&&(t=0),this.source=e,this.position=t}return T(i,"LexerState"),i.prototype.copy=function(){return new i(this.source,this.position)},i}();kT.default=Im});var tA=I(ns=>{"use strict";var Dm=ns&&ns.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(e,t){i(e,t);function s(){this.constructor=e}T(s,"__"),e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}();Object.defineProperty(ns,"__esModule",{value:!0});var $u=function(){function i(e,t,s,r,n,o){this.type=e,this.match=t,this.groups=s,this.start=r,this.end=n,this.lexer=o}return T(i,"Token"),i.prototype.strpos=function(){var e=this.lexer.strpos(this.start),t=this.lexer.strpos(this.end);return{start:e,end:t}},i.prototype.isEof=function(){return!1},i}();ns.default=$u;var eA=function(i){Dm(e,i);function e(t){var s=this,r=t.source.length;return s=i.call(this,null,"(eof)",[],r,r,t)||this,s}return T(e,"EOFToken"),e.prototype.isEof=function(){return!0},e}($u);ns.EOFToken=eA;ns.EOF=function(i){return new eA(i)}});var sA=I(bT=>{"use strict";Object.defineProperty(bT,"__esModule",{value:!0});function Cm(i){return new RegExp(i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))}T(Cm,"toRegExp");function Om(i){return typeof i=="string"&&(i=Cm(i)),i.source.startsWith("^")?i:new RegExp("^"+i.source,i.flags)}T(Om,"normalize");function gm(i,e){for(var t=0,s=0,r=i;s<r.length;s++){var n=r[s],o=e(n,t++);if(o)return{item:n,result:o}}}T(gm,"first");var Lm=function(){function i(){this.tokenTypes=[]}return T(i,"TokenTypes"),i.prototype.disable=function(e){return this.enable(e,!1)},i.prototype.enable=function(e,t){return t===void 0&&(t=!0),this.tokenTypes.filter(function(s){return s.type==e}).forEach(function(s){return s.enabled=t}),this},i.prototype.isEnabled=function(e){var t=this.tokenTypes.filter(function(s){return s.type==e});if(t.length==0)throw new Error("Token of type "+e+" does not exists");return t[0].enabled},i.prototype.peek=function(e,t){var s=e.substr(t);return gm(this.tokenTypes.filter(function(r){return r.enabled}),function(r){return r.regex.lastIndex=0,r.regex.exec(s)})},i.prototype.token=function(e,t,s){return s===void 0&&(s=!1),this.tokenTypes.push({type:e,regex:Om(t),enabled:!0,skip:s}),this},i}();bT.default=Lm});var iA=I(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});var GT=Zu();_s.LexerState=GT.default;var Ci=tA();_s.Token=Ci.default;_s.EOF=Ci.EOF;var rA=sA();_s.TokenTypes=rA.default;var ym=function(){function i(e){e===void 0&&(e=""),this._state=new GT.default(e),this._tokenTypes=new rA.default}return T(i,"Lexer"),Object.defineProperty(i.prototype,"position",{get:function(){return this._state.position},set:function(e){this._state.position=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"source",{get:function(){return this._state.source},set:function(e){this._state=new GT.default(e)},enumerable:!0,configurable:!0}),i.prototype.attachTo=function(e){this._state=e._state},i.prototype.disable=function(e){return this._tokenTypes.disable(e),this},i.prototype.enable=function(e,t){return this._tokenTypes.enable(e,t),this},i.prototype.expect=function(e){var t=this.next();if(t.type!=e){var s=t.strpos();throw new Error("Expected "+e+(t?", got "+t.type:"")+" at "+s.start.line+":"+s.start.column)}return t},i.prototype.isEnabled=function(e){return this._tokenTypes.isEnabled(e)},i.prototype.next=function(){try{var e=this.peek();return this._state.position=e.end,e}catch(t){throw this._state.position=t.end,t}},i.prototype.peek=function(e){var t=this;e===void 0&&(e=this._state.position);var s=T(function(l){if(l===void 0&&(l=e),l>=t._state.source.length)return Ci.EOF(t);var u=t._tokenTypes.peek(t._state.source,l);return u?u.item.skip?s(l+u.result[0].length):new Ci.default(u.item.type,u.result[0],u.result.map(function(p){return p}),l,l+u.result[0].length,t):null},"read"),r=s();if(r)return r;var n=this._state.source.substring(e,e+1);try{this.peek(e+1)}catch(l){n+=l.unexpected}var o=this.strpos(e),a=o.line,c=o.column,E=new Error("Unexpected input: "+n+" at ("+a+":"+c+")");throw E.unexpected=n,E.end=e+n.length,E},i.prototype.strpos=function(e){var t=this._state.source.substring(0,e).split(/\r?\n/);Array.isArray(t)||(t=[t]);var s=t.length,r=t[t.length-1].length+1;return{line:s,column:r}},i.prototype.toArray=function(){var e=this._state.copy();this._state.position=0;for(var t=[],s;!(s=this.next()).isEof();)t.push(s);return this._state=e,t},i.prototype.token=function(e,t,s){return this._tokenTypes.token(e,t,s),this},i.prototype.keyword=function(e){return this.token(e,new RegExp(e+"(?=\\W|$)"))},i.prototype.operator=function(e){var t=new String(e).valueOf();return this.token(e,t)},i}();_s.default=ym});var _A=I((pg,nA)=>{nA.exports=iA()});var TA=I((Rg,aA)=>{"use strict";var Bm=_A().default;function oA(i,e={}){i.expect("(");let t=i.expect("WORD").match;i.expect("=");let s;if(i.peek().type==="("){s={};do Object.assign(s,oA(i,e));while(i.peek().type==="(")}else s=i.expect("WORD").match;return i.expect(")"),{...e,[t]:s}}T(oA,"parseObject");var wm=T(i=>{let e=i.expect("WORD").match;return i.expect("="),{name:e,data:oA(i)}},"parseConnection"),Ym=T(i=>{let e=new Bm(i).token("$SKIP_COMMENT",/#[^\n]*/,!0).token("$SKIP_WS",/\s+/,!0).token("WORD",/([a-z0-9._-]+|["'][\s\S]*?["'])/i).token("(",/\(/).token(")",/\)/).token("=",/=/),t={};for(;e.peek().type!==null;){let s=wm(e);t[s.name]=s}return t},"parseTns");aA.exports=Ym});var EA=I((Ig,cA)=>{"use strict";var vT=class vT{cache;cacheValue;cycle;ifNotExist;increment;maxValue;minValue;sequenceName;start;sharing;order;keep;scale;scaleExtend;shard;shardExtend;type};T(vT,"Sequence");var HT=vT,KT=class KT{sharing;ddlScript;sequenceName;minValue;maxValue;increment;cycle;order;cacheValue;scale;extend;shard;type;keep};T(KT,"SequenceDto");var qT=KT;cA.exports={Sequence:HT,SequenceDto:qT}});var NA=I((gg,hA)=>{"use strict";var{Sequence:Cg,SequenceDto:Og}=EA(),Um=/(?<=START WITH)(\s+)([\w]+)(?=\s+)?/,Mm=/\s+LINK$/,He={true:"Y",false:"N"},ae={cache:"cache",cycle:"cycle",extend:"extend",global:"global",keep:"keep",noCache:"nocache",noCycle:"nocycle",noExtend:"noextend",noKeep:"nokeep",noOrder:"noorder",noScale:"noscale",noShard:"noshard",order:"order",scale:"scale",scaleExtend:"scaleExtend",session:"session",shard:"shard",sharing:"sharing",type:"type"},lA={[ae.cycle]:{[He.true]:ae.cycle,[He.false]:ae.noCycle},[ae.order]:{[He.true]:ae.order,[He.false]:ae.noOrder},[ae.shard]:{[He.true]:ae.shard,[He.false]:""},[ae.scale]:{[He.true]:ae.scale,[He.false]:ae.noScale},[ae.type]:{[He.true]:ae.session,[He.false]:ae.global},[ae.keep]:{[He.true]:ae.keep,[He.false]:ae.noKeep},[ae.extend]:{[He.true]:ae.extend,[He.false]:ae.noExtend}},Vm=T(async({schema:i,execute:e,logger:t})=>{try{let s=await e(`
      SELECT JSON_OBJECT(
          'sharing'      VALUE SHARING,
          'sequenceName' VALUE SEQUENCE_NAME,
          'minValue'     VALUE MIN_VALUE,
          'maxValue'     VALUE MAX_VALUE,
          'increment'    VALUE INCREMENT_BY,
          'cycle'        VALUE CYCLE_FLAG,
          'order'        VALUE ORDER_FLAG,
          'cacheValue'   VALUE CACHE_SIZE,
          'scale'        VALUE SCALE_FLAG,
          'extend'       VALUE EXTEND_FLAG,
          'shard'        VALUE SHARDED_FLAG,
          'type'         VALUE SESSION_FLAG,
          'keep'         VALUE KEEP_VALUE
      )
      FROM ALL_OBJECTS
      LEFT JOIN ALL_SEQUENCES
                ON ALL_SEQUENCES.SEQUENCE_OWNER = ALL_OBJECTS.OWNER
                AND ALL_SEQUENCES.SEQUENCE_NAME = ALL_OBJECTS.OBJECT_NAME
      WHERE OBJECT_TYPE = 'SEQUENCE'
      AND OWNER = '${i}'
      `);if(!(s!=null&&s.length))return[];let r=await Fm({schema:i,execute:e,logger:t});return s.map(([n])=>{let o=JSON.parse(n),a=r[o.sequenceName]||"";return{...o,ddlScript:a}})}catch(s){let{message:r,stack:n,...o}=s;return t.log("error",{message:"Cannot get sequences",error:{message:r,stack:n,err:o}},"Getting sequences"),[]}},"getSchemaSequenceDtos"),Fm=T(async({schema:i,execute:e,logger:t})=>{try{let s=await e(`
      SELECT JSON_OBJECT(
          'sequenceName' VALUE OBJECT_NAME,
          'ddlScript'    VALUE DBMS_METADATA.GET_DDL(OBJECT_TYPE, OBJECT_NAME, OWNER)
      )
      FROM ALL_OBJECTS
      WHERE OBJECT_TYPE = 'SEQUENCE'
      AND OWNER = '${i}'
      `);return s!=null&&s.length?s.reduce((r,[n])=>{let{sequenceName:o,ddlScript:a}=JSON.parse(n);return{...r,[o]:a}},{}):{}}catch(s){let{message:r,stack:n,...o}=s;return t.log("error",{message:"Cannot get sequences DDL",error:{message:r,stack:n,err:o}},"Getting sequences"),{}}},"getSchemaSequenceDdl"),xm=T(({execute:i})=>async({schema:e,logger:t})=>(await Vm({schema:e,execute:i,logger:t})).map(r=>{let n=km({sequenceDto:r}),o=Gm({sequenceDto:r}),a=Hm({sequenceDto:r}),c=bm({sequenceDto:r}),E=r.cacheValue?ae.cache:ae.noCache;return{sequenceName:r.sequenceName,minValue:r.minValue,maxValue:r.maxValue,increment:r.increment,cacheValue:r.cacheValue,cache:E,sharing:n,...o,...a,...c}}),"getSchemaSequences"),km=T(({sequenceDto:i})=>{var e,t;return(t=(e=i.sharing)==null?void 0:e.replace(Mm,""))==null?void 0:t.toLowerCase()},"getSequenceSharing"),bm=T(({sequenceDto:i})=>{let e=i[ae.scale],t=i[ae.shard],s=i[ae.extend],r=lA[ae.extend][s],n=e===He.true?r:"",o=t===He.true?r:"";return{scaleExtend:n,shardExtend:o}},"getExtendOptions"),Gm=T(({sequenceDto:i})=>Object.entries(lA).reduce((e,[t,s])=>({...e,[t]:s[i[t]]}),{}),"getBooleanOptions"),Hm=T(({sequenceDto:i})=>({start:qm({sequenceDto:i})}),"getOptionsFromDdl"),qm=T(({sequenceDto:i})=>{var s;let e=i.ddlScript;if(!e.includes("START WITH"))return i.minValue<i.maxValue?i.minValue:i.maxValue;let t=(s=e.match(Um))==null?void 0:s[2];return isNaN(Number(t))?t:Number(t)},"getStartOptionFromDdl");hA.exports={getSchemaSequences:xm}});var pA=I((yg,PA)=>{"use strict";var hr=Au(),vm=ju(),gi=require("path"),Li=require("fs"),Km=TA(),{getSchemaSequences:Wm}=NA(),ie=require("lodash"),uA={message:"Connection error"},Bt,WT,Xm=T((i="")=>{let e=i.match(/http:\/\/(?:.*?:.*?@)?(.*?):(\d+)/i);return e?{httpsProxy:e[1],httpsProxyPort:e[2]}:{}},"parseProxyOptions"),AA=T(i=>[i,process.env.TNS_ADMIN,gi.join(process.env.ORACLE_HOME||"","network","admin"),gi.join(process.env.LD_LIBRARY_PATH||"","network","admin")].reduce((t,s)=>{if(t)return t;let r=gi.join(s,"tnsnames.ora");return Li.existsSync(r)?r:t},""),"getTnsNamesOraFile"),fA=T(i=>{let e=Li.readFileSync(i).toString();return Km(e)},"parseTnsNamesOra"),zm=T((i,e,t,s)=>{var p,d,N,A,P,S,C,O;let r=AA(i);if(!Li.existsSync(r))return e;s({message:"Found tnsnames.ora file: "+r});let n=fA(r);s({message:"tnsnames.ora successfully parsed"});let o=Object.keys(n);if(!n[e]&&o.length===0)return s({message:`Cannot find '${e}' in tnsnames.ora and no fallback found`}),e;let[a]=o,c=n[e]||n[a];n[e]||s({message:`Connect using first TNS service ${a}' from ${gi.join(i,"tnsnames.ora")}.`});let E=(d=(p=c==null?void 0:c.data)==null?void 0:p.description)==null?void 0:d.address,l=(P=(A=(N=c==null?void 0:c.data)==null?void 0:N.description)==null?void 0:A.connect_data)==null?void 0:P.service_name,u=(O=(C=(S=c==null?void 0:c.data)==null?void 0:S.description)==null?void 0:C.connect_data)==null?void 0:O.sid;return s({message:"tnsnames.ora",address:E,service:l}),XT(ie.omitBy({...E,...t,protocol:(E==null?void 0:E.protocol)||"tcps",service:l||e,sid:u},ie.isUndefined),s)},"getConnectionStringByTnsNames"),Oi=T((i,e)=>i?e:"","combine"),XT=T(({protocol:i,host:e,port:t,sid:s,service:r,httpsProxy:n,httpsProxyPort:o},a)=>{let c=`(DESCRIPTION=
		(ADDRESS=
			(PROTOCOL=${i||"tcp"})
			(HOST=${e})
			(PORT=${t}))
			${Oi(n,`(HTTPS_PROXY=${n})`)}
			${Oi(o,`(HTTPS_PROXY_PORT=${o})`)}
		(CONNECT_DATA=
					${Oi(s,`(SID=${s})`)}
					${Oi(r,`(SERVICE_NAME=${r})`)}
		)
	)`;return a({message:"connectionString",connectionString:c}),c},"getConnectionDescription"),Qm=T(async(i,e,t)=>{var n,o,a,c,E,l,u,p,d,N,A;let s={protocol:"",host:"",port:"",service:""};if(["Wallet","TNS"].includes(i.connectionMethod)){let P=AA(i.configDir);if(!Li.existsSync(P))throw new Error("Cannot find tnsnames.ora file. Please, specify tnsnames folder or use Base connection method.");t({message:"Found tnsnames.ora file: "+P});let S=fA(P);if(!S[i.serviceName])throw new Error('Cannot find "'+i.serviceName+'" in tnsnames.ora');let C=(a=(o=(n=S[i.serviceName])==null?void 0:n.data)==null?void 0:o.description)==null?void 0:a.address,O=(u=(l=(E=(c=S[i.serviceName])==null?void 0:c.data)==null?void 0:E.description)==null?void 0:l.connect_data)==null?void 0:u.service_name,y=(A=(N=(d=(p=S[i.serviceName])==null?void 0:p.data)==null?void 0:d.description)==null?void 0:N.connect_data)==null?void 0:A.sid;t({message:"tnsnames.ora",address:C,service:O}),s.protocol=C==null?void 0:C.protocol,s.host=C==null?void 0:C.host,s.port=C==null?void 0:C.port,s.service=O||i.serviceName,s.sid=y}else s.host=i.host,s.port=i.port,s.service=i.serviceName,s.sid=i.sid;let{options:r}=await e.openTunnel({sshAuthMethod:i.sshConfig.ssh_method==="privateKey"?"IDENTITY_FILE":"USER_PASSWORD",sshTunnelHostname:i.sshConfig.ssh_host,sshTunnelPort:i.sshConfig.ssh_port,sshTunnelUsername:i.sshConfig.ssh_user,sshTunnelPassword:i.sshConfig.ssh_password,sshTunnelIdentityFile:i.sshConfig.ssh_key_file,sshTunnelPassphrase:i.sshConfig.ssh_key_passphrase,host:s.host,port:s.port});return XT({...s,host:r.host,port:r.port.toString()},t)},"getSshConnectionString"),Jm=T(async({walletFile:i,walletPassword:e,tempFolder:t,name:s,connectionMethod:r,TNSpath:n,host:o,port:a,userName:c,userPassword:E,serviceName:l,clientPath:u,clientType:p,queryRequestTimeout:d,authMethod:N,options:A,sid:P,ssh:S,ssh_user:C,ssh_host:O,ssh_port:y,ssh_method:W,ssh_key_file:q,ssh_key_passphrase:J,ssh_password:he,authRole:Ae,mode:_t},os,as)=>{if(Bt)return Bt;let ks={thin:"thin",thick:"thick"},Xt,QT,Ts={},JT="";r==="Wallet"&&(Xt=await vm({walletFile:i,tempFolder:t,name:s}),process.env.TNS_ADMIN=Xt),r==="TNS"&&(Xt=n),p==="InstantClient"&&(QT=u),A!=null&&A.proxy&&(JT=Xm(A==null?void 0:A.proxy)),_t!==ks.thin&&hr.initOracleClient({libDir:QT,configDir:Xt});let Nr="";return["Wallet","TNS"].includes(r)?Nr=zm(Xt,l,JT,as):Nr=XT({host:o,port:a,sid:P,service:l},as),S&&(WT=!0,Nr=await Qm({host:o,port:a,configDir:Xt,serviceName:l,sid:P,connectionMethod:r,sshConfig:{ssh_user:C,ssh_host:O,ssh_port:y,ssh_method:W,ssh_key_file:q,ssh_password:he,ssh_key_passphrase:J}},os,as)),N==="OS"?Ts.externalAuth=!0:N==="Kerberos"?(Ts.username=c,Ts.password=E,Ts.externalAuth=!0):(Ts.username=c,Ts.password=E),Zm({connectString:Nr,username:c,password:E,queryRequestTimeout:d,authRole:Ae,walletLocation:Xt,walletPassword:e})},"connect"),jm=T(async i=>Bt?(WT&&(WT=!1,await i.closeConsumer()),new Promise((e,t)=>{Bt.close(s=>{if(Bt=null,s)return t(s);e()})})):Promise.reject(uA),"disconnect"),Zm=T(({connectString:i,username:e,password:t,queryRequestTimeout:s,authRole:r,walletPassword:n,walletLocation:o})=>new Promise((a,c)=>{let E={username:e,password:t,connectString:i,privilege:r==="default"?void 0:hr[r],walletLocation:o,walletPassword:n};hr.getConnection(E,(l,u)=>{if(l)return Bt=null,c(l);try{u.callTimeout=Number(s||0),Bt=u,a()}catch(p){c(p)}})}),"authByCredentials"),$m=T(async({includeSystemCollection:i,schemaName:e},t)=>{let s="SELECT USERNAME FROM ALL_USERS",r,n="";return e&&(n=`USERNAME = '${e}'`),i?r=`${s}${n?` WHERE ${n}`:""}`:r=`${s} WHERE ORACLE_MAINTAINED = 'N'${n?` AND ${n}`:""}`,await qe(r).catch(o=>(t.info({message:"Cannot retrieve schema names"}),t.error(o),[]))},"getSchemaNames"),eI=T(i=>ie.reduce(i,(e,t)=>({...e,[t[0]]:[...e[t[0]]||[],t[1]]}),{}),"pairToObj"),yi=T((i,e,t)=>{let s="";return t&&(s=`T.OWNER = '${t}'`),qe(e?`${i}${s?` WHERE ${s}`:""}`:`${i} INNER JOIN ALL_USERS U ON T.OWNER = U.USERNAME WHERE U.ORACLE_MAINTAINED = 'N'${s?` AND ${s}`:""}`)},"selectEntities"),tI=T(({includeSystemCollection:i,schemaName:e})=>yi("SELECT T.OWNER, T.TABLE_NAME FROM ALL_TABLES T",i,e),"tableNamesByUser"),sI=T(({includeSystemCollection:i,schemaName:e})=>yi("SELECT T.OWNER, T.TABLE_NAME FROM ALL_EXTERNAL_TABLES T",i,e),"externalTableNamesByUser"),rI=T(({includeSystemCollection:i,schemaName:e})=>yi("SELECT T.OWNER, T.VIEW_NAME || ' (v)' FROM ALL_VIEWS T",i,e),"viewNamesByUser"),iI=T(({includeSystemCollection:i,schemaName:e})=>yi("SELECT T.OWNER, T.MVIEW_NAME || ' (v)' FROM ALL_MVIEWS T",i,e),"materializedViewNamesByUser"),nI=T(async(i,e)=>{let t=await iI(i).catch(c=>(e.info({message:"Cannot retrieve materialized views"}),e.error(c),[]));e.info({materializedViews:t});let s=t.map(c=>ie.join(c,".").slice(0,-4)),r=await tI(i).then(c=>ie.reject(c,E=>s.includes(ie.join(E,".")))).catch(c=>(e.info({message:"Cannot retrieve tables"}),e.error(c),[]));e.info({tables:r});let n=await sI(i).catch(c=>(e.info({message:"Cannot retrieve external tables"}),e.error(c),[]));e.info({externalTables:n});let o=await rI(i).catch(c=>(e.info({message:"Cannot retrieve views"}),e.error(c),[]));e.info({views:o});let a=eI([...r,...n,...o,...t]);return Object.keys(a).reduce((c,E)=>[...c,{dbName:E,dbCollections:a[E],isEmpty:!a[E].length}],[])},"getEntitiesNames"),qe=T((i,e={},t=[])=>Bt?new Promise((s,r)=>{Bt.execute(i,t,e,(n,o)=>{if(n)return r(n);s(o.rows)})}):Promise.reject(uA),"execute"),_I=T(async i=>{var s,r;let e=["12c","18c","19c","21c","23ai"],t="21c";try{let n=await qe("SELECT VERSION FROM PRODUCT_COMPONENT_VERSION WHERE product LIKE 'Oracle Database%'");i.log("info",n,"DB Version");let o=(r=(s=n==null?void 0:n[0])==null?void 0:s[0])==null?void 0:r.split(".").shift();return o&&e.find(c=>c.startsWith(o))||t}catch(n){return i.log("error",{message:n.message,stack:n.stack},"Error of getting DB Version"),t}},"getDbVersion"),oI=T(i=>i.slice(-4)===" (v)","isView"),aI=T(i=>{let e=ie.partition(i,oI);return{views:e[0].map(t=>t.slice(0,-4)),tables:e[1]}},"splitEntityNames"),zT=T(()=>qe(`BEGIN
		DBMS_METADATA.SET_TRANSFORM_PARAM(DBMS_METADATA.SESSION_TRANSFORM,'SQLTERMINATOR', TRUE);
	END;`),"setSQLTerminator"),TI=T(async(i,e,t)=>{var s;try{await zT();let r=await qe(`
			SELECT JSON_OBJECT(
			'tableDDL' VALUE DBMS_METADATA.GET_DDL('TABLE', T.TABLE_NAME, T.OWNER),
			'countOfRecords' VALUE (SELECT COUNT(*) FROM ALL_TABLES WHERE TABLE_NAME='${i}'),
			'indexDDLs' VALUE (
				SELECT JSON_ARRAYAGG(DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME, OWNER) RETURNING CLOB)
				FROM ALL_INDEXES
				WHERE TABLE_OWNER=T.OWNER
					AND TABLE_NAME=T.TABLE_NAME
					AND INDEX_NAME NOT IN (
						SELECT CONSTRAINT_NAME
						FROM ALL_CONSTRAINTS
						WHERE CONSTRAINT_TYPE='P'
						AND OWNER=T.OWNER
						AND TABLE_NAME=T.TABLE_NAME
					)
				),
			'jsonColumns' VALUE (
				SELECT JSON_ARRAYAGG(JSON_OBJECT('name' VALUE COLUMN_NAME, 'datatype' VALUE DATA_TYPE) RETURNING CLOB)
				FROM ALL_TAB_COLUMNS
				WHERE TABLE_NAME=T.TABLE_NAME
				AND OWNER=T.OWNER
				AND DATA_TYPE IN ('CLOB', 'BLOB', 'NVARCHAR2', 'JSON')
			),
			'tableComment' VALUE (
				SELECT COMMENTS
				FROM ALL_TAB_COMMENTS
				WHERE OWNER = T.OWNER AND TABLE_NAME = T.TABLE_NAME AND COMMENTS IS NOT NULL
			),
			'columnComments' VALUE (
				SELECT JSON_ARRAYAGG(JSON_OBJECT('name' VALUE COLUMN_NAME, 'comment' VALUE COMMENTS) RETURNING CLOB)
				FROM ALL_COL_COMMENTS
				WHERE OWNER = T.OWNER AND TABLE_NAME = T.TABLE_NAME  AND COMMENTS IS NOT NULL
			) RETURNING CLOB
			)
			FROM ALL_TABLES T
			WHERE T.OWNER='${e}' AND T.TABLE_NAME='${i}'
		`),n=await((s=ie.first(ie.first(r)))==null?void 0:s.getData());try{let o=JSON.parse(n);t.log("info",o,`Getting DDL from "${e}"."${i}"`);let a=o.tableComment?`COMMENT ON TABLE ${Wt(e)}.${Wt(i)} IS ${SA(o.tableComment)};`:"",c=ie.map(o.columnComments,l=>`COMMENT ON COLUMN ${Wt(e)}.${Wt(i)}.${Wt(l.name)}  IS ${SA(l.comment)};`);return{ddl:`${o.tableDDL}
				${ie.join(o.indexDDLs,`
`)}
				${a}

				${ie.join(c,`
`)}`,jsonColumns:o.jsonColumns,countOfRecords:o.countOfRecords}}catch(o){return t.log("error",{message:`Cannot parse query result: 

`+n,error:{message:o.message,stack:o.stack,err:ie.omit(o,["message","stack"])}},`Getting DDL from "${e}"."${i}"`),{ddl:"",jsonColumns:[],countOfRecords:0}}}catch(r){if((r==null?void 0:r.errorNum)===31603&&!await dA(t))throw r;return t.log("error",{message:"Cannot get DDL for table: "+i,error:{message:r.message,stack:r.stack,err:ie.omit(r,["message","stack"])}},`Getting DDL from "${e}"."${i}"`),{ddl:"",jsonColumns:[],countOfRecords:0}}},"getDDL"),cI=T(i=>Object.keys(i).reduce(async(e,t)=>{let s=await e,r=i[t];return r instanceof hr.Lob&&(r=await r.getData()),r instanceof Buffer&&(r=r.toString()),s[t]=r,s},Promise.resolve({})),"readLobs"),EI=T(async i=>await i.reduce(async(e,t)=>{let s=await e,r=await cI(t);return s.concat(r)},Promise.resolve([])),"readRecordsValues"),Wt=T(i=>/[\s\da-z]/.test(i)?`"${i}"`:i,"escapeName"),SA=T(i=>`'${i.replaceAll("'","''")}'`,"escapeComment"),lI=T((i,e)=>e.map(t=>i.reduce((s,r)=>(s[r]=t[r],s),{})),"replaceNames"),hI=T(async({tableName:i,limit:e,jsonColumns:t,schema:s})=>{let r=ie.map(t,a=>a.name),n=await qe(`SELECT ${r.map(a=>Wt(a)).join(", ")} FROM ${Wt(s)}.${Wt(i)} FETCH NEXT ${e} ROWS ONLY`,{outFormat:hr.OBJECT});return await EI(lI(r,n))},"selectRecords"),NI=T((i,e)=>{let t={number:"number",boolean:"boolean",string:"string"};return i.reduce((s,r)=>{if(s)return s;let n=r[e];return Array.isArray(n)?"array":typeof n=="object"?n?"object":"null":t[typeof n]??s},"")},"getJsonType"),SI=T(i=>`json${i.charAt(0).toUpperCase()}${i.slice(1)}`,"getJsonTypeName"),uI=T(async(i,e)=>{let t={CLOB:{type:"lobs",mode:"clob"},BLOB:{type:"lobs",mode:"blob"},NVARCHAR2:{type:"char",mode:"nvarchar2"},JSON:{type:"json"}};return{properties:i.reduce((r,n)=>{let o=n.name,a=n.datatype,c=t[a];if(!c)return r;let E=NI(e,o);if(!E)return r;let l=SI(E);return{...r,[o]:{...c,subtype:E,childType:"json",type:l}}},{})}},"getJsonSchema"),AI=T(async(i,e,t)=>{try{let s=await fI(i);if(await zT(),s){t.log("info",{viewName:i,schema:e},'Is materialized view"');let o=await qe(`SELECT JSON_OBJECT(
					'viewDDL' VALUE DBMS_METADATA.GET_DDL('MATERIALIZED_VIEW', MV.MVIEW_NAME, MV.OWNER),
					'indexDDLs' VALUE (
						SELECT JSON_ARRAYAGG(DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME, OWNER) RETURNING CLOB)
						FROM ALL_INDEXES
						WHERE TABLE_OWNER=MV.OWNER
							AND TABLE_NAME=MV.MVIEW_NAME
							AND INDEX_NAME NOT IN (
								SELECT CONSTRAINT_NAME
								FROM ALL_CONSTRAINTS
								WHERE CONSTRAINT_TYPE='P'
								AND OWNER=MV.OWNER
								AND TABLE_NAME=MV.MVIEW_NAME
							)
						)
					)
					FROM ALL_MVIEWS MV
					WHERE MV.OWNER='${e}' AND MV.MVIEW_NAME='${i}'`),a=ie.first(ie.first(o)),c=JSON.parse(a);return t.log("info",{viewName:i,schema:e},`Getting DDL from "${e}"."${i}"`),`${c.viewDDL}
${ie.join(c.indexDDLs,`
`)}`}let r=await qe(`SELECT DBMS_METADATA.GET_DDL('VIEW', VIEW_NAME, OWNER) FROM ALL_VIEWS WHERE VIEW_NAME='${i}'`);return await ie.first(ie.first(r)).getData()}catch(s){if((s==null?void 0:s.errorNum)===31603&&!await dA(t))throw s;return t.log("error",{message:"Cannot get DDL for view: "+i,error:{message:s.message,stack:s.stack,err:ie.omit(s,["message","stack"])}},"Getting DDL"),""}},"getViewDDL"),fI=T(async i=>{await zT();let e=await qe(`SELECT * FROM ALL_MVIEWS WHERE MVIEW_NAME = '${i}'`);return!ie.isEmpty(e)},"checkEntityMaterializedView"),dA=T(async i=>{var e;try{let t=await qe("SELECT sys_context('USERENV', 'CURRENT_USER') FROM dual"),s=ie.first(ie.first(t));return((e=await qe(`SELECT GRANTED_ROLE FROM USER_ROLE_PRIVS WHERE USERNAME = '${s}'`))==null?void 0:e.map(([n])=>n)).includes("SELECT_CATALOG_ROLE")}catch(t){return i.log("error",{message:"Checking user privileges error",error:{message:t.message,stack:t.stack,err:ie.omit(t,["message","stack"])}},"Getting DDL"),!1}},"checkUserHaveRequiredRole"),dI=T(i=>{i.log("info",{TNS_ADMIN:process.env.TNS_ADMIN??"",ORACLE_HOME:process.env.ORACLE_HOME??"",LD_LIBRARY_PATH:process.env.LD_LIBRARY_PATH??"",ORACLE_BASE:process.env.ORACLE_BASE??""},"Environment variables")},"logEnvironment"),PI=T(async i=>{try{let e=await qe("SELECT OWNER, SYNONYM_NAME, TABLE_OWNER, TABLE_NAME, DB_LINK FROM ALL_SYNONYMS WHERE ORIGIN_CON_ID > 1");if(ie.isEmpty(e))return[];let t=e.map(([o,a,c,E])=>({synonymSchemaName:c,synonymPublic:o==="PUBLIC",synonymName:a,synonymEntityId:E}));i.log("info",t,"Getting synonyms");let s=await pI(),r=t.map(o=>{var E;let a=s.find(({name:l})=>l===o.synonymName),c=!((E=a==null?void 0:a.ddl)!=null&&E.toUpperCase().includes("NONEDITIONABLE"));return{...o,synonymEditionable:c?"EDITIONABLE":"NONEDITIONABLE"}});return ie.groupBy(r,"synonymSchemaName")}catch(e){i.log("error",{message:"Cannot get synonyms",error:{message:e.message,stack:e.stack,err:ie.omit(e,["message","stack"])}},"Getting synonyms")}},"getDbSynonyms"),pI=T(async()=>{let i=await qe("SELECT SYNONYM_NAME, DBMS_METADATA.GET_DDL('SYNONYM', SYNONYM_NAME, OWNER) FROM ALL_SYNONYMS WHERE ORIGIN_CON_ID > 1");return await Promise.all(i.map(async([t,s])=>{let r=await s.getData();return{name:t,ddl:r}}))},"getSynonymsDDL");PA.exports={connect:Jm,disconnect:jm,getEntitiesNames:nI,getSchemaNames:$m,splitEntityNames:aI,getDDL:TI,getJsonSchema:uI,getViewDDL:AI,getDbVersion:_I,selectRecords:hI,logEnvironment:dI,execute:qe,getDbSynonyms:PI,getSchemaSequences:Wm({execute:qe})}});var Bi=require("lodash"),RA=ec(),tt=pA();module.exports={async connect(i,e,t,s){let r=s.require("@hackolade/ssh-service");RA("Connect to instance",i,e),tt.logEnvironment(e);try{await tt.connect(i,r,n=>{e.log("info",n,"Connection")}),t()}catch(n){throw mA(e,n,t),n}},async disconnect(i,e,t,s){try{let r=s.require("@hackolade/ssh-service");await tt.disconnect(r),t(null)}catch(r){mA(e,r,t)}},async testConnection(i,e,t,s){try{await this.connect(i,e,()=>{},s),t(null)}catch(r){e.log("error",{message:r.message,stack:r.stack,error:r},"Test connection"),t({message:r.message,stack:r.stack})}},async getSchemaNames(i,e,t,s){try{RA("Get schemas",i,e),await this.connect(i,e,()=>{},s);let r=await tt.getSchemaNames();return e.log("info",r,"All schemas list",i.hiddenKeys),t(null,r)}catch(r){return e.log("error",{message:r.message,stack:r.stack,error:r},"Get schemas"),t({message:r.message,stack:r.stack})}},async getDbCollectionsNames(i,e,t,s){try{await this.connect(i,e,()=>{},s);let r=await tt.getEntitiesNames(i,{info:n=>{e.log("info",n,"Retrieving table and view names")},error:n=>{e.log("error",{message:n.message,stack:n.stack,error:n},"Retrieving databases and tables information")}});t(null,r)}catch(r){e.log("error",{message:r.message,stack:r.stack,error:r},"Retrieving databases and tables information"),t({message:r.message,stack:r.stack})}},async getDbCollectionsData(i,e,t,s){try{let r=T(({message:u,containerName:p="",entityName:d=""})=>{e.log("info",{message:u,schema:p,table:d},"Retrieving schema"),e.progress({message:u,containerName:p,entityName:d})},"progress");e.log("info",i,"Retrieving schema",i.hiddenKeys),r({message:"Start reverse-engineering process",containerName:"",entityName:""});let n=i.collectionData,o=n.collections,a=n.dataBaseNames,c=await tt.getDbVersion(e),E=await tt.getDbSynonyms(e),l=await a.reduce(async(u,p)=>{let d=await u,N=tt.splitEntityNames(o[p]),A=await tt.getSchemaSequences({schema:p,logger:e}),P=await N.tables.reduce(async(O,y)=>{let W=await O;r({message:"Start getting data from table",containerName:p,entityName:y});let{ddl:q,countOfRecords:J,jsonColumns:he}=await tt.getDDL(y,p,e),Ae=[],_t={};if(!Bi.isEmpty(he)){let os=RI(J,i.recordSamplingSettings);r({message:`Fetching columns for JSON schema inference: ${JSON.stringify(he)}`,containerName:p,entityName:y}),Ae=await tt.selectRecords({tableName:y,limit:os,jsonColumns:he,schema:p}),_t=await tt.getJsonSchema(he,Ae)}return r({message:"Data retrieved successfully",containerName:p,entityName:y}),W.concat({dbName:p,collectionName:y,entityLevel:{},documents:Ae,views:[],ddl:{script:q,type:"oracle",takeAllDdlProperties:!0},emptyBucket:!1,validation:{jsonSchema:_t},bucketInfo:{database:p,synonyms:(E==null?void 0:E[p])||[],sequences:A}})},Promise.resolve([])),S=await N.views.reduce(async(O,y)=>{let W=await O;r({message:"Start getting data from view",containerName:p,entityName:y});let q=await tt.getViewDDL(y,p,e);return r({message:"Data retrieved successfully",containerName:p,entityName:y}),W.concat({name:y,data:{},ddl:{script:q,type:"oracle",takeAllDdlProperties:!0}})},Promise.resolve([]));if(Bi.isEmpty(S))return[...d,...P];let C={dbName:p,entityLevel:{},views:S,emptyBucket:!1,bucketInfo:{indexes:[],database:p,synonyms:(E==null?void 0:E[p])||[],sequences:A}};return[...d,...P,C]},Promise.resolve([]));r({message:"Start processing the retrieved data in the application ..."}),t(null,l.filter(Boolean),{version:c})}catch(r){if((r==null?void 0:r.errorNum)===31603)return e.log("error",{message:"Missing required role \u201CSELECT_CATALOG_ROLE\u201D to perform this operation",stack:r.stack,error:r},"Reverse-engineering process failed"),t({message:"Missing required role \u201CSELECT_CATALOG_ROLE\u201D to perform this operation",type:"simpleError"});e.log("error",{message:r.message,stack:r.stack,error:r},"Reverse-engineering process failed"),t({message:r.message,stack:r.stack})}}};var mA=T((i,e,t)=>{let s=Bi.isString(e)?e:Bi.get(e,"message","Reverse Engineering error");i.log("error",{error:e},"Reverse Engineering error"),t(s)},"handleError"),RI=T((i,e)=>{if(e.active==="absolute")return Number(e.absolute.value);let t=Math.ceil(i*e.relative.value/100);return Math.min(t,e.maxValue)},"getSampleDocSize");
