"use strict";var RU=Object.defineProperty;var a=(s,e)=>RU(s,"name",{value:e,configurable:!0});var U=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var Ct=U((ci,eo)=>{(function(){var s,e="4.17.21",t=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",_="Invalid `variable` option passed into `_.template`",T="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",A=1,N=2,P=4,R=1,g=2,p=1,m=2,y=4,I=8,M=16,L=32,v=64,H=128,te=256,se=512,Ae=30,V="...",Y=800,F=16,J=1,Te=2,Pe=3,ee=1/0,ye=9007199254740991,St=17976931348623157e292,j=NaN,ce=4294967295,Le=ce-1,je=ce>>>1,It=[["ary",H],["bind",p],["bindKey",m],["curry",I],["curryRight",M],["flip",se],["partial",L],["partialRight",v],["rearg",te]],et="[object Arguments]",$t="[object Array]",Qn="[object AsyncFunction]",kr="[object Boolean]",qr="[object Date]",Ui="[object DOMException]",x="[object Error]",z="[object Function]",ue="[object GeneratorFunction]",oe="[object Map]",ve="[object Number]",tt="[object Null]",He="[object Object]",Nt="[object Promise]",tr="[object Proxy]",rr="[object RegExp]",Lt="[object Set]",wt="[object String]",zt="[object Symbol]",nn="[object Undefined]",dr="[object WeakMap]",Cn="[object WeakSet]",yr="[object ArrayBuffer]",Lr="[object DataView]",Jn="[object Float32Array]",Ws="[object Float64Array]",Yi="[object Int8Array]",Mi="[object Int16Array]",jn="[object Int32Array]",Zn="[object Uint8Array]",$s="[object Uint8ClampedArray]",xi="[object Uint16Array]",Vi="[object Uint32Array]",F_=/\b__p \+= '';/g,v_=/\b(__p \+=) '' \+/g,wo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bi=/&(?:amp|lt|gt|quot|#39);/g,Bo=/[&<>"']/g,k_=RegExp(bi.source),q_=RegExp(Bo.source),Uo=/<%-([\s\S]+?)%>/g,zs=/<%([\s\S]+?)%>/g,Xs=/<%=([\s\S]+?)%>/g,Jg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jg=/^\w*$/,Zg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G_=/[\\^$.*+?()[\]{}|]/g,eC=RegExp(G_.source),H_=/^\s+/,tC=/\s/,rC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nC=/\{\n\/\* \[wrapped with (.+)\] \*/,sC=/,? & /,iC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oC=/[()=,{}\[\]\/\s]/,aC=/\\(\\)?/g,_C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,TN=/\w*$/,cC=/^[-+]0x[0-9a-f]+$/i,lC=/^0b[01]+$/i,TC=/^\[object .+?Constructor\]$/,uC=/^0o[0-7]+$/i,EC=/^(?:0|[1-9]\d*)$/,hC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yo=/($^)/,SC=/['\n\r\u2028\u2029\\]/g,Mo="\\ud800-\\udfff",NC="\\u0300-\\u036f",fC="\\ufe20-\\ufe2f",AC="\\u20d0-\\u20ff",uN=NC+fC+AC,EN="\\u2700-\\u27bf",hN="a-z\\xdf-\\xf6\\xf8-\\xff",dC="\\xac\\xb1\\xd7\\xf7",pC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",mC="\\u2000-\\u206f",PC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",SN="A-Z\\xc0-\\xd6\\xd8-\\xde",NN="\\ufe0e\\ufe0f",fN=dC+pC+mC+PC,K_="['\u2019]",RC="["+Mo+"]",AN="["+fN+"]",xo="["+uN+"]",dN="\\d+",IC="["+EN+"]",pN="["+hN+"]",mN="[^"+Mo+fN+dN+EN+hN+SN+"]",W_="\\ud83c[\\udffb-\\udfff]",DC="(?:"+xo+"|"+W_+")",PN="[^"+Mo+"]",$_="(?:\\ud83c[\\udde6-\\uddff]){2}",z_="[\\ud800-\\udbff][\\udc00-\\udfff]",Qs="["+SN+"]",RN="\\u200d",IN="(?:"+pN+"|"+mN+")",gC="(?:"+Qs+"|"+mN+")",DN="(?:"+K_+"(?:d|ll|m|re|s|t|ve))?",gN="(?:"+K_+"(?:D|LL|M|RE|S|T|VE))?",CN=DC+"?",ON="["+NN+"]?",CC="(?:"+RN+"(?:"+[PN,$_,z_].join("|")+")"+ON+CN+")*",OC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",yN=ON+CN+CC,LC="(?:"+[IC,$_,z_].join("|")+")"+yN,wC="(?:"+[PN+xo+"?",xo,$_,z_,RC].join("|")+")",BC=RegExp(K_,"g"),UC=RegExp(xo,"g"),X_=RegExp(W_+"(?="+W_+")|"+wC+yN,"g"),YC=RegExp([Qs+"?"+pN+"+"+DN+"(?="+[AN,Qs,"$"].join("|")+")",gC+"+"+gN+"(?="+[AN,Qs+IN,"$"].join("|")+")",Qs+"?"+IN+"+"+DN,Qs+"+"+gN,yC,OC,dN,LC].join("|"),"g"),MC=RegExp("["+RN+Mo+uN+NN+"]"),xC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,VC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bC=-1,at={};at[Jn]=at[Ws]=at[Yi]=at[Mi]=at[jn]=at[Zn]=at[$s]=at[xi]=at[Vi]=!0,at[et]=at[$t]=at[yr]=at[kr]=at[Lr]=at[qr]=at[x]=at[z]=at[oe]=at[ve]=at[He]=at[rr]=at[Lt]=at[wt]=at[dr]=!1;var rt={};rt[et]=rt[$t]=rt[yr]=rt[Lr]=rt[kr]=rt[qr]=rt[Jn]=rt[Ws]=rt[Yi]=rt[Mi]=rt[jn]=rt[oe]=rt[ve]=rt[He]=rt[rr]=rt[Lt]=rt[wt]=rt[zt]=rt[Zn]=rt[$s]=rt[xi]=rt[Vi]=!0,rt[x]=rt[z]=rt[dr]=!1;var FC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},vC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},GC=parseFloat,HC=parseInt,LN=typeof global=="object"&&global&&global.Object===Object&&global,KC=typeof self=="object"&&self&&self.Object===Object&&self,kt=LN||KC||Function("return this")(),Q_=typeof ci=="object"&&ci&&!ci.nodeType&&ci,Ds=Q_&&typeof eo=="object"&&eo&&!eo.nodeType&&eo,wN=Ds&&Ds.exports===Q_,J_=wN&&LN.process,Gr=function(){try{var w=Ds&&Ds.require&&Ds.require("util").types;return w||J_&&J_.binding&&J_.binding("util")}catch{}}(),BN=Gr&&Gr.isArrayBuffer,UN=Gr&&Gr.isDate,YN=Gr&&Gr.isMap,MN=Gr&&Gr.isRegExp,xN=Gr&&Gr.isSet,VN=Gr&&Gr.isTypedArray;function wr(w,q,b){switch(b.length){case 0:return w.call(q);case 1:return w.call(q,b[0]);case 2:return w.call(q,b[0],b[1]);case 3:return w.call(q,b[0],b[1],b[2])}return w.apply(q,b)}a(wr,"apply");function WC(w,q,b,ne){for(var Re=-1,ke=w==null?0:w.length;++Re<ke;){var xt=w[Re];q(ne,xt,b(xt),w)}return ne}a(WC,"arrayAggregator");function Hr(w,q){for(var b=-1,ne=w==null?0:w.length;++b<ne&&q(w[b],b,w)!==!1;);return w}a(Hr,"arrayEach");function $C(w,q){for(var b=w==null?0:w.length;b--&&q(w[b],b,w)!==!1;);return w}a($C,"arrayEachRight");function bN(w,q){for(var b=-1,ne=w==null?0:w.length;++b<ne;)if(!q(w[b],b,w))return!1;return!0}a(bN,"arrayEvery");function es(w,q){for(var b=-1,ne=w==null?0:w.length,Re=0,ke=[];++b<ne;){var xt=w[b];q(xt,b,w)&&(ke[Re++]=xt)}return ke}a(es,"arrayFilter");function Vo(w,q){var b=w==null?0:w.length;return!!b&&Js(w,q,0)>-1}a(Vo,"arrayIncludes");function j_(w,q,b){for(var ne=-1,Re=w==null?0:w.length;++ne<Re;)if(b(q,w[ne]))return!0;return!1}a(j_,"arrayIncludesWith");function ut(w,q){for(var b=-1,ne=w==null?0:w.length,Re=Array(ne);++b<ne;)Re[b]=q(w[b],b,w);return Re}a(ut,"arrayMap");function ts(w,q){for(var b=-1,ne=q.length,Re=w.length;++b<ne;)w[Re+b]=q[b];return w}a(ts,"arrayPush");function Z_(w,q,b,ne){var Re=-1,ke=w==null?0:w.length;for(ne&&ke&&(b=w[++Re]);++Re<ke;)b=q(b,w[Re],Re,w);return b}a(Z_,"arrayReduce");function zC(w,q,b,ne){var Re=w==null?0:w.length;for(ne&&Re&&(b=w[--Re]);Re--;)b=q(b,w[Re],Re,w);return b}a(zC,"arrayReduceRight");function ec(w,q){for(var b=-1,ne=w==null?0:w.length;++b<ne;)if(q(w[b],b,w))return!0;return!1}a(ec,"arraySome");var XC=tc("length");function QC(w){return w.split("")}a(QC,"asciiToArray");function JC(w){return w.match(iC)||[]}a(JC,"asciiWords");function FN(w,q,b){var ne;return b(w,function(Re,ke,xt){if(q(Re,ke,xt))return ne=ke,!1}),ne}a(FN,"baseFindKey");function bo(w,q,b,ne){for(var Re=w.length,ke=b+(ne?1:-1);ne?ke--:++ke<Re;)if(q(w[ke],ke,w))return ke;return-1}a(bo,"baseFindIndex");function Js(w,q,b){return q===q?cO(w,q,b):bo(w,vN,b)}a(Js,"baseIndexOf");function jC(w,q,b,ne){for(var Re=b-1,ke=w.length;++Re<ke;)if(ne(w[Re],q))return Re;return-1}a(jC,"baseIndexOfWith");function vN(w){return w!==w}a(vN,"baseIsNaN");function kN(w,q){var b=w==null?0:w.length;return b?nc(w,q)/b:j}a(kN,"baseMean");function tc(w){return function(q){return q==null?s:q[w]}}a(tc,"baseProperty");function rc(w){return function(q){return w==null?s:w[q]}}a(rc,"basePropertyOf");function qN(w,q,b,ne,Re){return Re(w,function(ke,xt,Ze){b=ne?(ne=!1,ke):q(b,ke,xt,Ze)}),b}a(qN,"baseReduce");function ZC(w,q){var b=w.length;for(w.sort(q);b--;)w[b]=w[b].value;return w}a(ZC,"baseSortBy");function nc(w,q){for(var b,ne=-1,Re=w.length;++ne<Re;){var ke=q(w[ne]);ke!==s&&(b=b===s?ke:b+ke)}return b}a(nc,"baseSum");function sc(w,q){for(var b=-1,ne=Array(w);++b<w;)ne[b]=q(b);return ne}a(sc,"baseTimes");function eO(w,q){return ut(q,function(b){return[b,w[b]]})}a(eO,"baseToPairs");function GN(w){return w&&w.slice(0,$N(w)+1).replace(H_,"")}a(GN,"baseTrim");function Br(w){return function(q){return w(q)}}a(Br,"baseUnary");function ic(w,q){return ut(q,function(b){return w[b]})}a(ic,"baseValues");function Fi(w,q){return w.has(q)}a(Fi,"cacheHas");function HN(w,q){for(var b=-1,ne=w.length;++b<ne&&Js(q,w[b],0)>-1;);return b}a(HN,"charsStartIndex");function KN(w,q){for(var b=w.length;b--&&Js(q,w[b],0)>-1;);return b}a(KN,"charsEndIndex");function tO(w,q){for(var b=w.length,ne=0;b--;)w[b]===q&&++ne;return ne}a(tO,"countHolders");var rO=rc(FC),nO=rc(vC);function sO(w){return"\\"+qC[w]}a(sO,"escapeStringChar");function iO(w,q){return w==null?s:w[q]}a(iO,"getValue");function js(w){return MC.test(w)}a(js,"hasUnicode");function oO(w){return xC.test(w)}a(oO,"hasUnicodeWord");function aO(w){for(var q,b=[];!(q=w.next()).done;)b.push(q.value);return b}a(aO,"iteratorToArray");function oc(w){var q=-1,b=Array(w.size);return w.forEach(function(ne,Re){b[++q]=[Re,ne]}),b}a(oc,"mapToArray");function WN(w,q){return function(b){return w(q(b))}}a(WN,"overArg");function rs(w,q){for(var b=-1,ne=w.length,Re=0,ke=[];++b<ne;){var xt=w[b];(xt===q||xt===h)&&(w[b]=h,ke[Re++]=b)}return ke}a(rs,"replaceHolders");function Fo(w){var q=-1,b=Array(w.size);return w.forEach(function(ne){b[++q]=ne}),b}a(Fo,"setToArray");function _O(w){var q=-1,b=Array(w.size);return w.forEach(function(ne){b[++q]=[ne,ne]}),b}a(_O,"setToPairs");function cO(w,q,b){for(var ne=b-1,Re=w.length;++ne<Re;)if(w[ne]===q)return ne;return-1}a(cO,"strictIndexOf");function lO(w,q,b){for(var ne=b+1;ne--;)if(w[ne]===q)return ne;return ne}a(lO,"strictLastIndexOf");function Zs(w){return js(w)?uO(w):XC(w)}a(Zs,"stringSize");function sn(w){return js(w)?EO(w):QC(w)}a(sn,"stringToArray");function $N(w){for(var q=w.length;q--&&tC.test(w.charAt(q)););return q}a($N,"trimmedEndIndex");var TO=rc(kC);function uO(w){for(var q=X_.lastIndex=0;X_.test(w);)++q;return q}a(uO,"unicodeSize");function EO(w){return w.match(X_)||[]}a(EO,"unicodeToArray");function hO(w){return w.match(YC)||[]}a(hO,"unicodeWords");var SO=a(function w(q){q=q==null?kt:ns.defaults(kt.Object(),q,ns.pick(kt,VC));var b=q.Array,ne=q.Date,Re=q.Error,ke=q.Function,xt=q.Math,Ze=q.Object,ac=q.RegExp,NO=q.String,Kr=q.TypeError,vo=b.prototype,fO=ke.prototype,ei=Ze.prototype,ko=q["__core-js_shared__"],qo=fO.toString,ze=ei.hasOwnProperty,AO=0,zN=function(){var r=/[^.]+$/.exec(ko&&ko.keys&&ko.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Go=ei.toString,dO=qo.call(Ze),pO=kt._,mO=ac("^"+qo.call(ze).replace(G_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ho=wN?q.Buffer:s,ss=q.Symbol,Ko=q.Uint8Array,XN=Ho?Ho.allocUnsafe:s,Wo=WN(Ze.getPrototypeOf,Ze),QN=Ze.create,JN=ei.propertyIsEnumerable,$o=vo.splice,jN=ss?ss.isConcatSpreadable:s,vi=ss?ss.iterator:s,gs=ss?ss.toStringTag:s,zo=function(){try{var r=ws(Ze,"defineProperty");return r({},"",{}),r}catch{}}(),PO=q.clearTimeout!==kt.clearTimeout&&q.clearTimeout,RO=ne&&ne.now!==kt.Date.now&&ne.now,IO=q.setTimeout!==kt.setTimeout&&q.setTimeout,Xo=xt.ceil,Qo=xt.floor,_c=Ze.getOwnPropertySymbols,DO=Ho?Ho.isBuffer:s,ZN=q.isFinite,gO=vo.join,CO=WN(Ze.keys,Ze),Vt=xt.max,nr=xt.min,OO=ne.now,yO=q.parseInt,ef=xt.random,LO=vo.reverse,cc=ws(q,"DataView"),ki=ws(q,"Map"),lc=ws(q,"Promise"),ti=ws(q,"Set"),qi=ws(q,"WeakMap"),Gi=ws(Ze,"create"),Jo=qi&&new qi,ri={},wO=Bs(cc),BO=Bs(ki),UO=Bs(lc),YO=Bs(ti),MO=Bs(qi),jo=ss?ss.prototype:s,Hi=jo?jo.valueOf:s,tf=jo?jo.toString:s;function f(r){if(pt(r)&&!Ie(r)&&!(r instanceof Be)){if(r instanceof Wr)return r;if(ze.call(r,"__wrapped__"))return nA(r)}return new Wr(r)}a(f,"lodash");var ni=function(){function r(){}return a(r,"object"),function(i){if(!ft(i))return{};if(QN)return QN(i);r.prototype=i;var l=new r;return r.prototype=s,l}}();function Zo(){}a(Zo,"baseLodash");function Wr(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=s}a(Wr,"LodashWrapper"),f.templateSettings={escape:Uo,evaluate:zs,interpolate:Xs,variable:"",imports:{_:f}},f.prototype=Zo.prototype,f.prototype.constructor=f,Wr.prototype=ni(Zo.prototype),Wr.prototype.constructor=Wr;function Be(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ce,this.__views__=[]}a(Be,"LazyWrapper");function xO(){var r=new Be(this.__wrapped__);return r.__actions__=pr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=pr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=pr(this.__views__),r}a(xO,"lazyClone");function VO(){if(this.__filtered__){var r=new Be(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}a(VO,"lazyReverse");function bO(){var r=this.__wrapped__.value(),i=this.__dir__,l=Ie(r),E=i<0,S=l?r.length:0,d=Qy(0,S,this.__views__),D=d.start,C=d.end,B=C-D,K=E?C:D-1,W=this.__iteratees__,X=W.length,re=0,ae=nr(B,this.__takeCount__);if(!l||!E&&S==B&&ae==B)return gf(r,this.__actions__);var Ne=[];e:for(;B--&&re<ae;){K+=i;for(var ge=-1,fe=r[K];++ge<X;){var we=W[ge],Ye=we.iteratee,Mr=we.type,Sr=Ye(fe);if(Mr==Te)fe=Sr;else if(!Sr){if(Mr==J)continue e;break e}}Ne[re++]=fe}return Ne}a(bO,"lazyValue"),Be.prototype=ni(Zo.prototype),Be.prototype.constructor=Be;function Cs(r){var i=-1,l=r==null?0:r.length;for(this.clear();++i<l;){var E=r[i];this.set(E[0],E[1])}}a(Cs,"Hash");function FO(){this.__data__=Gi?Gi(null):{},this.size=0}a(FO,"hashClear");function vO(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}a(vO,"hashDelete");function kO(r){var i=this.__data__;if(Gi){var l=i[r];return l===T?s:l}return ze.call(i,r)?i[r]:s}a(kO,"hashGet");function qO(r){var i=this.__data__;return Gi?i[r]!==s:ze.call(i,r)}a(qO,"hashHas");function GO(r,i){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=Gi&&i===s?T:i,this}a(GO,"hashSet"),Cs.prototype.clear=FO,Cs.prototype.delete=vO,Cs.prototype.get=kO,Cs.prototype.has=qO,Cs.prototype.set=GO;function On(r){var i=-1,l=r==null?0:r.length;for(this.clear();++i<l;){var E=r[i];this.set(E[0],E[1])}}a(On,"ListCache");function HO(){this.__data__=[],this.size=0}a(HO,"listCacheClear");function KO(r){var i=this.__data__,l=ea(i,r);if(l<0)return!1;var E=i.length-1;return l==E?i.pop():$o.call(i,l,1),--this.size,!0}a(KO,"listCacheDelete");function WO(r){var i=this.__data__,l=ea(i,r);return l<0?s:i[l][1]}a(WO,"listCacheGet");function $O(r){return ea(this.__data__,r)>-1}a($O,"listCacheHas");function zO(r,i){var l=this.__data__,E=ea(l,r);return E<0?(++this.size,l.push([r,i])):l[E][1]=i,this}a(zO,"listCacheSet"),On.prototype.clear=HO,On.prototype.delete=KO,On.prototype.get=WO,On.prototype.has=$O,On.prototype.set=zO;function yn(r){var i=-1,l=r==null?0:r.length;for(this.clear();++i<l;){var E=r[i];this.set(E[0],E[1])}}a(yn,"MapCache");function XO(){this.size=0,this.__data__={hash:new Cs,map:new(ki||On),string:new Cs}}a(XO,"mapCacheClear");function QO(r){var i=ua(this,r).delete(r);return this.size-=i?1:0,i}a(QO,"mapCacheDelete");function JO(r){return ua(this,r).get(r)}a(JO,"mapCacheGet");function jO(r){return ua(this,r).has(r)}a(jO,"mapCacheHas");function ZO(r,i){var l=ua(this,r),E=l.size;return l.set(r,i),this.size+=l.size==E?0:1,this}a(ZO,"mapCacheSet"),yn.prototype.clear=XO,yn.prototype.delete=QO,yn.prototype.get=JO,yn.prototype.has=jO,yn.prototype.set=ZO;function Os(r){var i=-1,l=r==null?0:r.length;for(this.__data__=new yn;++i<l;)this.add(r[i])}a(Os,"SetCache");function ey(r){return this.__data__.set(r,T),this}a(ey,"setCacheAdd");function ty(r){return this.__data__.has(r)}a(ty,"setCacheHas"),Os.prototype.add=Os.prototype.push=ey,Os.prototype.has=ty;function on(r){var i=this.__data__=new On(r);this.size=i.size}a(on,"Stack");function ry(){this.__data__=new On,this.size=0}a(ry,"stackClear");function ny(r){var i=this.__data__,l=i.delete(r);return this.size=i.size,l}a(ny,"stackDelete");function sy(r){return this.__data__.get(r)}a(sy,"stackGet");function iy(r){return this.__data__.has(r)}a(iy,"stackHas");function oy(r,i){var l=this.__data__;if(l instanceof On){var E=l.__data__;if(!ki||E.length<t-1)return E.push([r,i]),this.size=++l.size,this;l=this.__data__=new yn(E)}return l.set(r,i),this.size=l.size,this}a(oy,"stackSet"),on.prototype.clear=ry,on.prototype.delete=ny,on.prototype.get=sy,on.prototype.has=iy,on.prototype.set=oy;function rf(r,i){var l=Ie(r),E=!l&&Us(r),S=!l&&!E&&cs(r),d=!l&&!E&&!S&&ai(r),D=l||E||S||d,C=D?sc(r.length,NO):[],B=C.length;for(var K in r)(i||ze.call(r,K))&&!(D&&(K=="length"||S&&(K=="offset"||K=="parent")||d&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||Un(K,B)))&&C.push(K);return C}a(rf,"arrayLikeKeys");function nf(r){var i=r.length;return i?r[mc(0,i-1)]:s}a(nf,"arraySample");function ay(r,i){return Ea(pr(r),ys(i,0,r.length))}a(ay,"arraySampleSize");function _y(r){return Ea(pr(r))}a(_y,"arrayShuffle");function Tc(r,i,l){(l!==s&&!an(r[i],l)||l===s&&!(i in r))&&Ln(r,i,l)}a(Tc,"assignMergeValue");function Ki(r,i,l){var E=r[i];(!(ze.call(r,i)&&an(E,l))||l===s&&!(i in r))&&Ln(r,i,l)}a(Ki,"assignValue");function ea(r,i){for(var l=r.length;l--;)if(an(r[l][0],i))return l;return-1}a(ea,"assocIndexOf");function cy(r,i,l,E){return is(r,function(S,d,D){i(E,S,l(S),D)}),E}a(cy,"baseAggregator");function sf(r,i){return r&&fn(i,qt(i),r)}a(sf,"baseAssign");function ly(r,i){return r&&fn(i,Pr(i),r)}a(ly,"baseAssignIn");function Ln(r,i,l){i=="__proto__"&&zo?zo(r,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):r[i]=l}a(Ln,"baseAssignValue");function uc(r,i){for(var l=-1,E=i.length,S=b(E),d=r==null;++l<E;)S[l]=d?s:Wc(r,i[l]);return S}a(uc,"baseAt");function ys(r,i,l){return r===r&&(l!==s&&(r=r<=l?r:l),i!==s&&(r=r>=i?r:i)),r}a(ys,"baseClamp");function $r(r,i,l,E,S,d){var D,C=i&A,B=i&N,K=i&P;if(l&&(D=S?l(r,E,S,d):l(r)),D!==s)return D;if(!ft(r))return r;var W=Ie(r);if(W){if(D=jy(r),!C)return pr(r,D)}else{var X=sr(r),re=X==z||X==ue;if(cs(r))return yf(r,C);if(X==He||X==et||re&&!S){if(D=B||re?{}:zf(r),!C)return B?ky(r,ly(D,r)):vy(r,sf(D,r))}else{if(!rt[X])return S?r:{};D=Zy(r,X,C)}}d||(d=new on);var ae=d.get(r);if(ae)return ae;d.set(r,D),RA(r)?r.forEach(function(fe){D.add($r(fe,i,l,fe,r,d))}):mA(r)&&r.forEach(function(fe,we){D.set(we,$r(fe,i,l,we,r,d))});var Ne=K?B?Bc:wc:B?Pr:qt,ge=W?s:Ne(r);return Hr(ge||r,function(fe,we){ge&&(we=fe,fe=r[we]),Ki(D,we,$r(fe,i,l,we,r,d))}),D}a($r,"baseClone");function Ty(r){var i=qt(r);return function(l){return of(l,r,i)}}a(Ty,"baseConforms");function of(r,i,l){var E=l.length;if(r==null)return!E;for(r=Ze(r);E--;){var S=l[E],d=i[S],D=r[S];if(D===s&&!(S in r)||!d(D))return!1}return!0}a(of,"baseConformsTo");function af(r,i,l){if(typeof r!="function")throw new Kr(o);return ji(function(){r.apply(s,l)},i)}a(af,"baseDelay");function Wi(r,i,l,E){var S=-1,d=Vo,D=!0,C=r.length,B=[],K=i.length;if(!C)return B;l&&(i=ut(i,Br(l))),E?(d=j_,D=!1):i.length>=t&&(d=Fi,D=!1,i=new Os(i));e:for(;++S<C;){var W=r[S],X=l==null?W:l(W);if(W=E||W!==0?W:0,D&&X===X){for(var re=K;re--;)if(i[re]===X)continue e;B.push(W)}else d(i,X,E)||B.push(W)}return B}a(Wi,"baseDifference");var is=Yf(Nn),_f=Yf(hc,!0);function uy(r,i){var l=!0;return is(r,function(E,S,d){return l=!!i(E,S,d),l}),l}a(uy,"baseEvery");function ta(r,i,l){for(var E=-1,S=r.length;++E<S;){var d=r[E],D=i(d);if(D!=null&&(C===s?D===D&&!Yr(D):l(D,C)))var C=D,B=d}return B}a(ta,"baseExtremum");function Ey(r,i,l,E){var S=r.length;for(l=De(l),l<0&&(l=-l>S?0:S+l),E=E===s||E>S?S:De(E),E<0&&(E+=S),E=l>E?0:DA(E);l<E;)r[l++]=i;return r}a(Ey,"baseFill");function cf(r,i){var l=[];return is(r,function(E,S,d){i(E,S,d)&&l.push(E)}),l}a(cf,"baseFilter");function Xt(r,i,l,E,S){var d=-1,D=r.length;for(l||(l=t0),S||(S=[]);++d<D;){var C=r[d];i>0&&l(C)?i>1?Xt(C,i-1,l,E,S):ts(S,C):E||(S[S.length]=C)}return S}a(Xt,"baseFlatten");var Ec=Mf(),lf=Mf(!0);function Nn(r,i){return r&&Ec(r,i,qt)}a(Nn,"baseForOwn");function hc(r,i){return r&&lf(r,i,qt)}a(hc,"baseForOwnRight");function ra(r,i){return es(i,function(l){return Yn(r[l])})}a(ra,"baseFunctions");function Ls(r,i){i=as(i,r);for(var l=0,E=i.length;r!=null&&l<E;)r=r[An(i[l++])];return l&&l==E?r:s}a(Ls,"baseGet");function Tf(r,i,l){var E=i(r);return Ie(r)?E:ts(E,l(r))}a(Tf,"baseGetAllKeys");function Er(r){return r==null?r===s?nn:tt:gs&&gs in Ze(r)?Xy(r):_0(r)}a(Er,"baseGetTag");function Sc(r,i){return r>i}a(Sc,"baseGt");function hy(r,i){return r!=null&&ze.call(r,i)}a(hy,"baseHas");function Sy(r,i){return r!=null&&i in Ze(r)}a(Sy,"baseHasIn");function Ny(r,i,l){return r>=nr(i,l)&&r<Vt(i,l)}a(Ny,"baseInRange");function Nc(r,i,l){for(var E=l?j_:Vo,S=r[0].length,d=r.length,D=d,C=b(d),B=1/0,K=[];D--;){var W=r[D];D&&i&&(W=ut(W,Br(i))),B=nr(W.length,B),C[D]=!l&&(i||S>=120&&W.length>=120)?new Os(D&&W):s}W=r[0];var X=-1,re=C[0];e:for(;++X<S&&K.length<B;){var ae=W[X],Ne=i?i(ae):ae;if(ae=l||ae!==0?ae:0,!(re?Fi(re,Ne):E(K,Ne,l))){for(D=d;--D;){var ge=C[D];if(!(ge?Fi(ge,Ne):E(r[D],Ne,l)))continue e}re&&re.push(Ne),K.push(ae)}}return K}a(Nc,"baseIntersection");function fy(r,i,l,E){return Nn(r,function(S,d,D){i(E,l(S),d,D)}),E}a(fy,"baseInverter");function $i(r,i,l){i=as(i,r),r=jf(r,i);var E=r==null?r:r[An(Xr(i))];return E==null?s:wr(E,r,l)}a($i,"baseInvoke");function uf(r){return pt(r)&&Er(r)==et}a(uf,"baseIsArguments");function Ay(r){return pt(r)&&Er(r)==yr}a(Ay,"baseIsArrayBuffer");function dy(r){return pt(r)&&Er(r)==qr}a(dy,"baseIsDate");function zi(r,i,l,E,S){return r===i?!0:r==null||i==null||!pt(r)&&!pt(i)?r!==r&&i!==i:py(r,i,l,E,zi,S)}a(zi,"baseIsEqual");function py(r,i,l,E,S,d){var D=Ie(r),C=Ie(i),B=D?$t:sr(r),K=C?$t:sr(i);B=B==et?He:B,K=K==et?He:K;var W=B==He,X=K==He,re=B==K;if(re&&cs(r)){if(!cs(i))return!1;D=!0,W=!1}if(re&&!W)return d||(d=new on),D||ai(r)?Kf(r,i,l,E,S,d):$y(r,i,B,l,E,S,d);if(!(l&R)){var ae=W&&ze.call(r,"__wrapped__"),Ne=X&&ze.call(i,"__wrapped__");if(ae||Ne){var ge=ae?r.value():r,fe=Ne?i.value():i;return d||(d=new on),S(ge,fe,l,E,d)}}return re?(d||(d=new on),zy(r,i,l,E,S,d)):!1}a(py,"baseIsEqualDeep");function my(r){return pt(r)&&sr(r)==oe}a(my,"baseIsMap");function fc(r,i,l,E){var S=l.length,d=S,D=!E;if(r==null)return!d;for(r=Ze(r);S--;){var C=l[S];if(D&&C[2]?C[1]!==r[C[0]]:!(C[0]in r))return!1}for(;++S<d;){C=l[S];var B=C[0],K=r[B],W=C[1];if(D&&C[2]){if(K===s&&!(B in r))return!1}else{var X=new on;if(E)var re=E(K,W,B,r,i,X);if(!(re===s?zi(W,K,R|g,E,X):re))return!1}}return!0}a(fc,"baseIsMatch");function Ef(r){if(!ft(r)||n0(r))return!1;var i=Yn(r)?mO:TC;return i.test(Bs(r))}a(Ef,"baseIsNative");function Py(r){return pt(r)&&Er(r)==rr}a(Py,"baseIsRegExp");function Ry(r){return pt(r)&&sr(r)==Lt}a(Ry,"baseIsSet");function Iy(r){return pt(r)&&da(r.length)&&!!at[Er(r)]}a(Iy,"baseIsTypedArray");function hf(r){return typeof r=="function"?r:r==null?Rr:typeof r=="object"?Ie(r)?ff(r[0],r[1]):Nf(r):xA(r)}a(hf,"baseIteratee");function Ac(r){if(!Ji(r))return CO(r);var i=[];for(var l in Ze(r))ze.call(r,l)&&l!="constructor"&&i.push(l);return i}a(Ac,"baseKeys");function Dy(r){if(!ft(r))return a0(r);var i=Ji(r),l=[];for(var E in r)E=="constructor"&&(i||!ze.call(r,E))||l.push(E);return l}a(Dy,"baseKeysIn");function dc(r,i){return r<i}a(dc,"baseLt");function Sf(r,i){var l=-1,E=mr(r)?b(r.length):[];return is(r,function(S,d,D){E[++l]=i(S,d,D)}),E}a(Sf,"baseMap");function Nf(r){var i=Yc(r);return i.length==1&&i[0][2]?Qf(i[0][0],i[0][1]):function(l){return l===r||fc(l,r,i)}}a(Nf,"baseMatches");function ff(r,i){return xc(r)&&Xf(i)?Qf(An(r),i):function(l){var E=Wc(l,r);return E===s&&E===i?$c(l,r):zi(i,E,R|g)}}a(ff,"baseMatchesProperty");function na(r,i,l,E,S){r!==i&&Ec(i,function(d,D){if(S||(S=new on),ft(d))gy(r,i,D,l,na,E,S);else{var C=E?E(bc(r,D),d,D+"",r,i,S):s;C===s&&(C=d),Tc(r,D,C)}},Pr)}a(na,"baseMerge");function gy(r,i,l,E,S,d,D){var C=bc(r,l),B=bc(i,l),K=D.get(B);if(K){Tc(r,l,K);return}var W=d?d(C,B,l+"",r,i,D):s,X=W===s;if(X){var re=Ie(B),ae=!re&&cs(B),Ne=!re&&!ae&&ai(B);W=B,re||ae||Ne?Ie(C)?W=C:Dt(C)?W=pr(C):ae?(X=!1,W=yf(B,!0)):Ne?(X=!1,W=Lf(B,!0)):W=[]:Zi(B)||Us(B)?(W=C,Us(C)?W=gA(C):(!ft(C)||Yn(C))&&(W=zf(B))):X=!1}X&&(D.set(B,W),S(W,B,E,d,D),D.delete(B)),Tc(r,l,W)}a(gy,"baseMergeDeep");function Af(r,i){var l=r.length;if(l)return i+=i<0?l:0,Un(i,l)?r[i]:s}a(Af,"baseNth");function df(r,i,l){i.length?i=ut(i,function(d){return Ie(d)?function(D){return Ls(D,d.length===1?d[0]:d)}:d}):i=[Rr];var E=-1;i=ut(i,Br(Se()));var S=Sf(r,function(d,D,C){var B=ut(i,function(K){return K(d)});return{criteria:B,index:++E,value:d}});return ZC(S,function(d,D){return Fy(d,D,l)})}a(df,"baseOrderBy");function Cy(r,i){return pf(r,i,function(l,E){return $c(r,E)})}a(Cy,"basePick");function pf(r,i,l){for(var E=-1,S=i.length,d={};++E<S;){var D=i[E],C=Ls(r,D);l(C,D)&&Xi(d,as(D,r),C)}return d}a(pf,"basePickBy");function Oy(r){return function(i){return Ls(i,r)}}a(Oy,"basePropertyDeep");function pc(r,i,l,E){var S=E?jC:Js,d=-1,D=i.length,C=r;for(r===i&&(i=pr(i)),l&&(C=ut(r,Br(l)));++d<D;)for(var B=0,K=i[d],W=l?l(K):K;(B=S(C,W,B,E))>-1;)C!==r&&$o.call(C,B,1),$o.call(r,B,1);return r}a(pc,"basePullAll");function mf(r,i){for(var l=r?i.length:0,E=l-1;l--;){var S=i[l];if(l==E||S!==d){var d=S;Un(S)?$o.call(r,S,1):Ic(r,S)}}return r}a(mf,"basePullAt");function mc(r,i){return r+Qo(ef()*(i-r+1))}a(mc,"baseRandom");function yy(r,i,l,E){for(var S=-1,d=Vt(Xo((i-r)/(l||1)),0),D=b(d);d--;)D[E?d:++S]=r,r+=l;return D}a(yy,"baseRange");function Pc(r,i){var l="";if(!r||i<1||i>ye)return l;do i%2&&(l+=r),i=Qo(i/2),i&&(r+=r);while(i);return l}a(Pc,"baseRepeat");function Oe(r,i){return Fc(Jf(r,i,Rr),r+"")}a(Oe,"baseRest");function Ly(r){return nf(_i(r))}a(Ly,"baseSample");function wy(r,i){var l=_i(r);return Ea(l,ys(i,0,l.length))}a(wy,"baseSampleSize");function Xi(r,i,l,E){if(!ft(r))return r;i=as(i,r);for(var S=-1,d=i.length,D=d-1,C=r;C!=null&&++S<d;){var B=An(i[S]),K=l;if(B==="__proto__"||B==="constructor"||B==="prototype")return r;if(S!=D){var W=C[B];K=E?E(W,B,C):s,K===s&&(K=ft(W)?W:Un(i[S+1])?[]:{})}Ki(C,B,K),C=C[B]}return r}a(Xi,"baseSet");var Pf=Jo?function(r,i){return Jo.set(r,i),r}:Rr,By=zo?function(r,i){return zo(r,"toString",{configurable:!0,enumerable:!1,value:Xc(i),writable:!0})}:Rr;function Uy(r){return Ea(_i(r))}a(Uy,"baseShuffle");function zr(r,i,l){var E=-1,S=r.length;i<0&&(i=-i>S?0:S+i),l=l>S?S:l,l<0&&(l+=S),S=i>l?0:l-i>>>0,i>>>=0;for(var d=b(S);++E<S;)d[E]=r[E+i];return d}a(zr,"baseSlice");function Yy(r,i){var l;return is(r,function(E,S,d){return l=i(E,S,d),!l}),!!l}a(Yy,"baseSome");function sa(r,i,l){var E=0,S=r==null?E:r.length;if(typeof i=="number"&&i===i&&S<=je){for(;E<S;){var d=E+S>>>1,D=r[d];D!==null&&!Yr(D)&&(l?D<=i:D<i)?E=d+1:S=d}return S}return Rc(r,i,Rr,l)}a(sa,"baseSortedIndex");function Rc(r,i,l,E){var S=0,d=r==null?0:r.length;if(d===0)return 0;i=l(i);for(var D=i!==i,C=i===null,B=Yr(i),K=i===s;S<d;){var W=Qo((S+d)/2),X=l(r[W]),re=X!==s,ae=X===null,Ne=X===X,ge=Yr(X);if(D)var fe=E||Ne;else K?fe=Ne&&(E||re):C?fe=Ne&&re&&(E||!ae):B?fe=Ne&&re&&!ae&&(E||!ge):ae||ge?fe=!1:fe=E?X<=i:X<i;fe?S=W+1:d=W}return nr(d,Le)}a(Rc,"baseSortedIndexBy");function Rf(r,i){for(var l=-1,E=r.length,S=0,d=[];++l<E;){var D=r[l],C=i?i(D):D;if(!l||!an(C,B)){var B=C;d[S++]=D===0?0:D}}return d}a(Rf,"baseSortedUniq");function If(r){return typeof r=="number"?r:Yr(r)?j:+r}a(If,"baseToNumber");function Ur(r){if(typeof r=="string")return r;if(Ie(r))return ut(r,Ur)+"";if(Yr(r))return tf?tf.call(r):"";var i=r+"";return i=="0"&&1/r==-ee?"-0":i}a(Ur,"baseToString");function os(r,i,l){var E=-1,S=Vo,d=r.length,D=!0,C=[],B=C;if(l)D=!1,S=j_;else if(d>=t){var K=i?null:Ky(r);if(K)return Fo(K);D=!1,S=Fi,B=new Os}else B=i?[]:C;e:for(;++E<d;){var W=r[E],X=i?i(W):W;if(W=l||W!==0?W:0,D&&X===X){for(var re=B.length;re--;)if(B[re]===X)continue e;i&&B.push(X),C.push(W)}else S(B,X,l)||(B!==C&&B.push(X),C.push(W))}return C}a(os,"baseUniq");function Ic(r,i){return i=as(i,r),r=jf(r,i),r==null||delete r[An(Xr(i))]}a(Ic,"baseUnset");function Df(r,i,l,E){return Xi(r,i,l(Ls(r,i)),E)}a(Df,"baseUpdate");function ia(r,i,l,E){for(var S=r.length,d=E?S:-1;(E?d--:++d<S)&&i(r[d],d,r););return l?zr(r,E?0:d,E?d+1:S):zr(r,E?d+1:0,E?S:d)}a(ia,"baseWhile");function gf(r,i){var l=r;return l instanceof Be&&(l=l.value()),Z_(i,function(E,S){return S.func.apply(S.thisArg,ts([E],S.args))},l)}a(gf,"baseWrapperValue");function Dc(r,i,l){var E=r.length;if(E<2)return E?os(r[0]):[];for(var S=-1,d=b(E);++S<E;)for(var D=r[S],C=-1;++C<E;)C!=S&&(d[S]=Wi(d[S]||D,r[C],i,l));return os(Xt(d,1),i,l)}a(Dc,"baseXor");function Cf(r,i,l){for(var E=-1,S=r.length,d=i.length,D={};++E<S;){var C=E<d?i[E]:s;l(D,r[E],C)}return D}a(Cf,"baseZipObject");function gc(r){return Dt(r)?r:[]}a(gc,"castArrayLikeObject");function Cc(r){return typeof r=="function"?r:Rr}a(Cc,"castFunction");function as(r,i){return Ie(r)?r:xc(r,i)?[r]:rA(Ke(r))}a(as,"castPath");var My=Oe;function _s(r,i,l){var E=r.length;return l=l===s?E:l,!i&&l>=E?r:zr(r,i,l)}a(_s,"castSlice");var Of=PO||function(r){return kt.clearTimeout(r)};function yf(r,i){if(i)return r.slice();var l=r.length,E=XN?XN(l):new r.constructor(l);return r.copy(E),E}a(yf,"cloneBuffer");function Oc(r){var i=new r.constructor(r.byteLength);return new Ko(i).set(new Ko(r)),i}a(Oc,"cloneArrayBuffer");function xy(r,i){var l=i?Oc(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.byteLength)}a(xy,"cloneDataView");function Vy(r){var i=new r.constructor(r.source,TN.exec(r));return i.lastIndex=r.lastIndex,i}a(Vy,"cloneRegExp");function by(r){return Hi?Ze(Hi.call(r)):{}}a(by,"cloneSymbol");function Lf(r,i){var l=i?Oc(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.length)}a(Lf,"cloneTypedArray");function wf(r,i){if(r!==i){var l=r!==s,E=r===null,S=r===r,d=Yr(r),D=i!==s,C=i===null,B=i===i,K=Yr(i);if(!C&&!K&&!d&&r>i||d&&D&&B&&!C&&!K||E&&D&&B||!l&&B||!S)return 1;if(!E&&!d&&!K&&r<i||K&&l&&S&&!E&&!d||C&&l&&S||!D&&S||!B)return-1}return 0}a(wf,"compareAscending");function Fy(r,i,l){for(var E=-1,S=r.criteria,d=i.criteria,D=S.length,C=l.length;++E<D;){var B=wf(S[E],d[E]);if(B){if(E>=C)return B;var K=l[E];return B*(K=="desc"?-1:1)}}return r.index-i.index}a(Fy,"compareMultiple");function Bf(r,i,l,E){for(var S=-1,d=r.length,D=l.length,C=-1,B=i.length,K=Vt(d-D,0),W=b(B+K),X=!E;++C<B;)W[C]=i[C];for(;++S<D;)(X||S<d)&&(W[l[S]]=r[S]);for(;K--;)W[C++]=r[S++];return W}a(Bf,"composeArgs");function Uf(r,i,l,E){for(var S=-1,d=r.length,D=-1,C=l.length,B=-1,K=i.length,W=Vt(d-C,0),X=b(W+K),re=!E;++S<W;)X[S]=r[S];for(var ae=S;++B<K;)X[ae+B]=i[B];for(;++D<C;)(re||S<d)&&(X[ae+l[D]]=r[S++]);return X}a(Uf,"composeArgsRight");function pr(r,i){var l=-1,E=r.length;for(i||(i=b(E));++l<E;)i[l]=r[l];return i}a(pr,"copyArray");function fn(r,i,l,E){var S=!l;l||(l={});for(var d=-1,D=i.length;++d<D;){var C=i[d],B=E?E(l[C],r[C],C,l,r):s;B===s&&(B=r[C]),S?Ln(l,C,B):Ki(l,C,B)}return l}a(fn,"copyObject");function vy(r,i){return fn(r,Mc(r),i)}a(vy,"copySymbols");function ky(r,i){return fn(r,Wf(r),i)}a(ky,"copySymbolsIn");function oa(r,i){return function(l,E){var S=Ie(l)?WC:cy,d=i?i():{};return S(l,r,Se(E,2),d)}}a(oa,"createAggregator");function si(r){return Oe(function(i,l){var E=-1,S=l.length,d=S>1?l[S-1]:s,D=S>2?l[2]:s;for(d=r.length>3&&typeof d=="function"?(S--,d):s,D&&hr(l[0],l[1],D)&&(d=S<3?s:d,S=1),i=Ze(i);++E<S;){var C=l[E];C&&r(i,C,E,d)}return i})}a(si,"createAssigner");function Yf(r,i){return function(l,E){if(l==null)return l;if(!mr(l))return r(l,E);for(var S=l.length,d=i?S:-1,D=Ze(l);(i?d--:++d<S)&&E(D[d],d,D)!==!1;);return l}}a(Yf,"createBaseEach");function Mf(r){return function(i,l,E){for(var S=-1,d=Ze(i),D=E(i),C=D.length;C--;){var B=D[r?C:++S];if(l(d[B],B,d)===!1)break}return i}}a(Mf,"createBaseFor");function qy(r,i,l){var E=i&p,S=Qi(r);function d(){var D=this&&this!==kt&&this instanceof d?S:r;return D.apply(E?l:this,arguments)}return a(d,"wrapper"),d}a(qy,"createBind");function xf(r){return function(i){i=Ke(i);var l=js(i)?sn(i):s,E=l?l[0]:i.charAt(0),S=l?_s(l,1).join(""):i.slice(1);return E[r]()+S}}a(xf,"createCaseFirst");function ii(r){return function(i){return Z_(YA(UA(i).replace(BC,"")),r,"")}}a(ii,"createCompounder");function Qi(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var l=ni(r.prototype),E=r.apply(l,i);return ft(E)?E:l}}a(Qi,"createCtor");function Gy(r,i,l){var E=Qi(r);function S(){for(var d=arguments.length,D=b(d),C=d,B=oi(S);C--;)D[C]=arguments[C];var K=d<3&&D[0]!==B&&D[d-1]!==B?[]:rs(D,B);if(d-=K.length,d<l)return kf(r,i,aa,S.placeholder,s,D,K,s,s,l-d);var W=this&&this!==kt&&this instanceof S?E:r;return wr(W,this,D)}return a(S,"wrapper"),S}a(Gy,"createCurry");function Vf(r){return function(i,l,E){var S=Ze(i);if(!mr(i)){var d=Se(l,3);i=qt(i),l=a(function(C){return d(S[C],C,S)},"predicate")}var D=r(i,l,E);return D>-1?S[d?i[D]:D]:s}}a(Vf,"createFind");function bf(r){return Bn(function(i){var l=i.length,E=l,S=Wr.prototype.thru;for(r&&i.reverse();E--;){var d=i[E];if(typeof d!="function")throw new Kr(o);if(S&&!D&&Ta(d)=="wrapper")var D=new Wr([],!0)}for(E=D?E:l;++E<l;){d=i[E];var C=Ta(d),B=C=="wrapper"?Uc(d):s;B&&Vc(B[0])&&B[1]==(H|I|L|te)&&!B[4].length&&B[9]==1?D=D[Ta(B[0])].apply(D,B[3]):D=d.length==1&&Vc(d)?D[C]():D.thru(d)}return function(){var K=arguments,W=K[0];if(D&&K.length==1&&Ie(W))return D.plant(W).value();for(var X=0,re=l?i[X].apply(this,K):W;++X<l;)re=i[X].call(this,re);return re}})}a(bf,"createFlow");function aa(r,i,l,E,S,d,D,C,B,K){var W=i&H,X=i&p,re=i&m,ae=i&(I|M),Ne=i&se,ge=re?s:Qi(r);function fe(){for(var we=arguments.length,Ye=b(we),Mr=we;Mr--;)Ye[Mr]=arguments[Mr];if(ae)var Sr=oi(fe),xr=tO(Ye,Sr);if(E&&(Ye=Bf(Ye,E,S,ae)),d&&(Ye=Uf(Ye,d,D,ae)),we-=xr,ae&&we<K){var gt=rs(Ye,Sr);return kf(r,i,aa,fe.placeholder,l,Ye,gt,C,B,K-we)}var _n=X?l:this,xn=re?_n[r]:r;return we=Ye.length,C?Ye=c0(Ye,C):Ne&&we>1&&Ye.reverse(),W&&B<we&&(Ye.length=B),this&&this!==kt&&this instanceof fe&&(xn=ge||Qi(xn)),xn.apply(_n,Ye)}return a(fe,"wrapper"),fe}a(aa,"createHybrid");function Ff(r,i){return function(l,E){return fy(l,r,i(E),{})}}a(Ff,"createInverter");function _a(r,i){return function(l,E){var S;if(l===s&&E===s)return i;if(l!==s&&(S=l),E!==s){if(S===s)return E;typeof l=="string"||typeof E=="string"?(l=Ur(l),E=Ur(E)):(l=If(l),E=If(E)),S=r(l,E)}return S}}a(_a,"createMathOperation");function yc(r){return Bn(function(i){return i=ut(i,Br(Se())),Oe(function(l){var E=this;return r(i,function(S){return wr(S,E,l)})})})}a(yc,"createOver");function ca(r,i){i=i===s?" ":Ur(i);var l=i.length;if(l<2)return l?Pc(i,r):i;var E=Pc(i,Xo(r/Zs(i)));return js(i)?_s(sn(E),0,r).join(""):E.slice(0,r)}a(ca,"createPadding");function Hy(r,i,l,E){var S=i&p,d=Qi(r);function D(){for(var C=-1,B=arguments.length,K=-1,W=E.length,X=b(W+B),re=this&&this!==kt&&this instanceof D?d:r;++K<W;)X[K]=E[K];for(;B--;)X[K++]=arguments[++C];return wr(re,S?l:this,X)}return a(D,"wrapper"),D}a(Hy,"createPartial");function vf(r){return function(i,l,E){return E&&typeof E!="number"&&hr(i,l,E)&&(l=E=s),i=Mn(i),l===s?(l=i,i=0):l=Mn(l),E=E===s?i<l?1:-1:Mn(E),yy(i,l,E,r)}}a(vf,"createRange");function la(r){return function(i,l){return typeof i=="string"&&typeof l=="string"||(i=Qr(i),l=Qr(l)),r(i,l)}}a(la,"createRelationalOperation");function kf(r,i,l,E,S,d,D,C,B,K){var W=i&I,X=W?D:s,re=W?s:D,ae=W?d:s,Ne=W?s:d;i|=W?L:v,i&=~(W?v:L),i&y||(i&=~(p|m));var ge=[r,i,S,ae,X,Ne,re,C,B,K],fe=l.apply(s,ge);return Vc(r)&&Zf(fe,ge),fe.placeholder=E,eA(fe,r,i)}a(kf,"createRecurry");function Lc(r){var i=xt[r];return function(l,E){if(l=Qr(l),E=E==null?0:nr(De(E),292),E&&ZN(l)){var S=(Ke(l)+"e").split("e"),d=i(S[0]+"e"+(+S[1]+E));return S=(Ke(d)+"e").split("e"),+(S[0]+"e"+(+S[1]-E))}return i(l)}}a(Lc,"createRound");var Ky=ti&&1/Fo(new ti([,-0]))[1]==ee?function(r){return new ti(r)}:jc;function qf(r){return function(i){var l=sr(i);return l==oe?oc(i):l==Lt?_O(i):eO(i,r(i))}}a(qf,"createToPairs");function wn(r,i,l,E,S,d,D,C){var B=i&m;if(!B&&typeof r!="function")throw new Kr(o);var K=E?E.length:0;if(K||(i&=~(L|v),E=S=s),D=D===s?D:Vt(De(D),0),C=C===s?C:De(C),K-=S?S.length:0,i&v){var W=E,X=S;E=S=s}var re=B?s:Uc(r),ae=[r,i,l,E,S,W,X,d,D,C];if(re&&o0(ae,re),r=ae[0],i=ae[1],l=ae[2],E=ae[3],S=ae[4],C=ae[9]=ae[9]===s?B?0:r.length:Vt(ae[9]-K,0),!C&&i&(I|M)&&(i&=~(I|M)),!i||i==p)var Ne=qy(r,i,l);else i==I||i==M?Ne=Gy(r,i,C):(i==L||i==(p|L))&&!S.length?Ne=Hy(r,i,l,E):Ne=aa.apply(s,ae);var ge=re?Pf:Zf;return eA(ge(Ne,ae),r,i)}a(wn,"createWrap");function Gf(r,i,l,E){return r===s||an(r,ei[l])&&!ze.call(E,l)?i:r}a(Gf,"customDefaultsAssignIn");function Hf(r,i,l,E,S,d){return ft(r)&&ft(i)&&(d.set(i,r),na(r,i,s,Hf,d),d.delete(i)),r}a(Hf,"customDefaultsMerge");function Wy(r){return Zi(r)?s:r}a(Wy,"customOmitClone");function Kf(r,i,l,E,S,d){var D=l&R,C=r.length,B=i.length;if(C!=B&&!(D&&B>C))return!1;var K=d.get(r),W=d.get(i);if(K&&W)return K==i&&W==r;var X=-1,re=!0,ae=l&g?new Os:s;for(d.set(r,i),d.set(i,r);++X<C;){var Ne=r[X],ge=i[X];if(E)var fe=D?E(ge,Ne,X,i,r,d):E(Ne,ge,X,r,i,d);if(fe!==s){if(fe)continue;re=!1;break}if(ae){if(!ec(i,function(we,Ye){if(!Fi(ae,Ye)&&(Ne===we||S(Ne,we,l,E,d)))return ae.push(Ye)})){re=!1;break}}else if(!(Ne===ge||S(Ne,ge,l,E,d))){re=!1;break}}return d.delete(r),d.delete(i),re}a(Kf,"equalArrays");function $y(r,i,l,E,S,d,D){switch(l){case Lr:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)return!1;r=r.buffer,i=i.buffer;case yr:return!(r.byteLength!=i.byteLength||!d(new Ko(r),new Ko(i)));case kr:case qr:case ve:return an(+r,+i);case x:return r.name==i.name&&r.message==i.message;case rr:case wt:return r==i+"";case oe:var C=oc;case Lt:var B=E&R;if(C||(C=Fo),r.size!=i.size&&!B)return!1;var K=D.get(r);if(K)return K==i;E|=g,D.set(r,i);var W=Kf(C(r),C(i),E,S,d,D);return D.delete(r),W;case zt:if(Hi)return Hi.call(r)==Hi.call(i)}return!1}a($y,"equalByTag");function zy(r,i,l,E,S,d){var D=l&R,C=wc(r),B=C.length,K=wc(i),W=K.length;if(B!=W&&!D)return!1;for(var X=B;X--;){var re=C[X];if(!(D?re in i:ze.call(i,re)))return!1}var ae=d.get(r),Ne=d.get(i);if(ae&&Ne)return ae==i&&Ne==r;var ge=!0;d.set(r,i),d.set(i,r);for(var fe=D;++X<B;){re=C[X];var we=r[re],Ye=i[re];if(E)var Mr=D?E(Ye,we,re,i,r,d):E(we,Ye,re,r,i,d);if(!(Mr===s?we===Ye||S(we,Ye,l,E,d):Mr)){ge=!1;break}fe||(fe=re=="constructor")}if(ge&&!fe){var Sr=r.constructor,xr=i.constructor;Sr!=xr&&"constructor"in r&&"constructor"in i&&!(typeof Sr=="function"&&Sr instanceof Sr&&typeof xr=="function"&&xr instanceof xr)&&(ge=!1)}return d.delete(r),d.delete(i),ge}a(zy,"equalObjects");function Bn(r){return Fc(Jf(r,s,oA),r+"")}a(Bn,"flatRest");function wc(r){return Tf(r,qt,Mc)}a(wc,"getAllKeys");function Bc(r){return Tf(r,Pr,Wf)}a(Bc,"getAllKeysIn");var Uc=Jo?function(r){return Jo.get(r)}:jc;function Ta(r){for(var i=r.name+"",l=ri[i],E=ze.call(ri,i)?l.length:0;E--;){var S=l[E],d=S.func;if(d==null||d==r)return S.name}return i}a(Ta,"getFuncName");function oi(r){var i=ze.call(f,"placeholder")?f:r;return i.placeholder}a(oi,"getHolder");function Se(){var r=f.iteratee||Qc;return r=r===Qc?hf:r,arguments.length?r(arguments[0],arguments[1]):r}a(Se,"getIteratee");function ua(r,i){var l=r.__data__;return r0(i)?l[typeof i=="string"?"string":"hash"]:l.map}a(ua,"getMapData");function Yc(r){for(var i=qt(r),l=i.length;l--;){var E=i[l],S=r[E];i[l]=[E,S,Xf(S)]}return i}a(Yc,"getMatchData");function ws(r,i){var l=iO(r,i);return Ef(l)?l:s}a(ws,"getNative");function Xy(r){var i=ze.call(r,gs),l=r[gs];try{r[gs]=s;var E=!0}catch{}var S=Go.call(r);return E&&(i?r[gs]=l:delete r[gs]),S}a(Xy,"getRawTag");var Mc=_c?function(r){return r==null?[]:(r=Ze(r),es(_c(r),function(i){return JN.call(r,i)}))}:Zc,Wf=_c?function(r){for(var i=[];r;)ts(i,Mc(r)),r=Wo(r);return i}:Zc,sr=Er;(cc&&sr(new cc(new ArrayBuffer(1)))!=Lr||ki&&sr(new ki)!=oe||lc&&sr(lc.resolve())!=Nt||ti&&sr(new ti)!=Lt||qi&&sr(new qi)!=dr)&&(sr=a(function(r){var i=Er(r),l=i==He?r.constructor:s,E=l?Bs(l):"";if(E)switch(E){case wO:return Lr;case BO:return oe;case UO:return Nt;case YO:return Lt;case MO:return dr}return i},"getTag"));function Qy(r,i,l){for(var E=-1,S=l.length;++E<S;){var d=l[E],D=d.size;switch(d.type){case"drop":r+=D;break;case"dropRight":i-=D;break;case"take":i=nr(i,r+D);break;case"takeRight":r=Vt(r,i-D);break}}return{start:r,end:i}}a(Qy,"getView");function Jy(r){var i=r.match(nC);return i?i[1].split(sC):[]}a(Jy,"getWrapDetails");function $f(r,i,l){i=as(i,r);for(var E=-1,S=i.length,d=!1;++E<S;){var D=An(i[E]);if(!(d=r!=null&&l(r,D)))break;r=r[D]}return d||++E!=S?d:(S=r==null?0:r.length,!!S&&da(S)&&Un(D,S)&&(Ie(r)||Us(r)))}a($f,"hasPath");function jy(r){var i=r.length,l=new r.constructor(i);return i&&typeof r[0]=="string"&&ze.call(r,"index")&&(l.index=r.index,l.input=r.input),l}a(jy,"initCloneArray");function zf(r){return typeof r.constructor=="function"&&!Ji(r)?ni(Wo(r)):{}}a(zf,"initCloneObject");function Zy(r,i,l){var E=r.constructor;switch(i){case yr:return Oc(r);case kr:case qr:return new E(+r);case Lr:return xy(r,l);case Jn:case Ws:case Yi:case Mi:case jn:case Zn:case $s:case xi:case Vi:return Lf(r,l);case oe:return new E;case ve:case wt:return new E(r);case rr:return Vy(r);case Lt:return new E;case zt:return by(r)}}a(Zy,"initCloneByTag");function e0(r,i){var l=i.length;if(!l)return r;var E=l-1;return i[E]=(l>1?"& ":"")+i[E],i=i.join(l>2?", ":" "),r.replace(rC,`{
/* [wrapped with `+i+`] */
`)}a(e0,"insertWrapDetails");function t0(r){return Ie(r)||Us(r)||!!(jN&&r&&r[jN])}a(t0,"isFlattenable");function Un(r,i){var l=typeof r;return i=i??ye,!!i&&(l=="number"||l!="symbol"&&EC.test(r))&&r>-1&&r%1==0&&r<i}a(Un,"isIndex");function hr(r,i,l){if(!ft(l))return!1;var E=typeof i;return(E=="number"?mr(l)&&Un(i,l.length):E=="string"&&i in l)?an(l[i],r):!1}a(hr,"isIterateeCall");function xc(r,i){if(Ie(r))return!1;var l=typeof r;return l=="number"||l=="symbol"||l=="boolean"||r==null||Yr(r)?!0:jg.test(r)||!Jg.test(r)||i!=null&&r in Ze(i)}a(xc,"isKey");function r0(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}a(r0,"isKeyable");function Vc(r){var i=Ta(r),l=f[i];if(typeof l!="function"||!(i in Be.prototype))return!1;if(r===l)return!0;var E=Uc(l);return!!E&&r===E[0]}a(Vc,"isLaziable");function n0(r){return!!zN&&zN in r}a(n0,"isMasked");var s0=ko?Yn:el;function Ji(r){var i=r&&r.constructor,l=typeof i=="function"&&i.prototype||ei;return r===l}a(Ji,"isPrototype");function Xf(r){return r===r&&!ft(r)}a(Xf,"isStrictComparable");function Qf(r,i){return function(l){return l==null?!1:l[r]===i&&(i!==s||r in Ze(l))}}a(Qf,"matchesStrictComparable");function i0(r){var i=fa(r,function(E){return l.size===u&&l.clear(),E}),l=i.cache;return i}a(i0,"memoizeCapped");function o0(r,i){var l=r[1],E=i[1],S=l|E,d=S<(p|m|H),D=E==H&&l==I||E==H&&l==te&&r[7].length<=i[8]||E==(H|te)&&i[7].length<=i[8]&&l==I;if(!(d||D))return r;E&p&&(r[2]=i[2],S|=l&p?0:y);var C=i[3];if(C){var B=r[3];r[3]=B?Bf(B,C,i[4]):C,r[4]=B?rs(r[3],h):i[4]}return C=i[5],C&&(B=r[5],r[5]=B?Uf(B,C,i[6]):C,r[6]=B?rs(r[5],h):i[6]),C=i[7],C&&(r[7]=C),E&H&&(r[8]=r[8]==null?i[8]:nr(r[8],i[8])),r[9]==null&&(r[9]=i[9]),r[0]=i[0],r[1]=S,r}a(o0,"mergeData");function a0(r){var i=[];if(r!=null)for(var l in Ze(r))i.push(l);return i}a(a0,"nativeKeysIn");function _0(r){return Go.call(r)}a(_0,"objectToString");function Jf(r,i,l){return i=Vt(i===s?r.length-1:i,0),function(){for(var E=arguments,S=-1,d=Vt(E.length-i,0),D=b(d);++S<d;)D[S]=E[i+S];S=-1;for(var C=b(i+1);++S<i;)C[S]=E[S];return C[i]=l(D),wr(r,this,C)}}a(Jf,"overRest");function jf(r,i){return i.length<2?r:Ls(r,zr(i,0,-1))}a(jf,"parent");function c0(r,i){for(var l=r.length,E=nr(i.length,l),S=pr(r);E--;){var d=i[E];r[E]=Un(d,l)?S[d]:s}return r}a(c0,"reorder");function bc(r,i){if(!(i==="constructor"&&typeof r[i]=="function")&&i!="__proto__")return r[i]}a(bc,"safeGet");var Zf=tA(Pf),ji=IO||function(r,i){return kt.setTimeout(r,i)},Fc=tA(By);function eA(r,i,l){var E=i+"";return Fc(r,e0(E,l0(Jy(E),l)))}a(eA,"setWrapToString");function tA(r){var i=0,l=0;return function(){var E=OO(),S=F-(E-l);if(l=E,S>0){if(++i>=Y)return arguments[0]}else i=0;return r.apply(s,arguments)}}a(tA,"shortOut");function Ea(r,i){var l=-1,E=r.length,S=E-1;for(i=i===s?E:i;++l<i;){var d=mc(l,S),D=r[d];r[d]=r[l],r[l]=D}return r.length=i,r}a(Ea,"shuffleSelf");var rA=i0(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(Zg,function(l,E,S,d){i.push(S?d.replace(aC,"$1"):E||l)}),i});function An(r){if(typeof r=="string"||Yr(r))return r;var i=r+"";return i=="0"&&1/r==-ee?"-0":i}a(An,"toKey");function Bs(r){if(r!=null){try{return qo.call(r)}catch{}try{return r+""}catch{}}return""}a(Bs,"toSource");function l0(r,i){return Hr(It,function(l){var E="_."+l[0];i&l[1]&&!Vo(r,E)&&r.push(E)}),r.sort()}a(l0,"updateWrapDetails");function nA(r){if(r instanceof Be)return r.clone();var i=new Wr(r.__wrapped__,r.__chain__);return i.__actions__=pr(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}a(nA,"wrapperClone");function T0(r,i,l){(l?hr(r,i,l):i===s)?i=1:i=Vt(De(i),0);var E=r==null?0:r.length;if(!E||i<1)return[];for(var S=0,d=0,D=b(Xo(E/i));S<E;)D[d++]=zr(r,S,S+=i);return D}a(T0,"chunk");function u0(r){for(var i=-1,l=r==null?0:r.length,E=0,S=[];++i<l;){var d=r[i];d&&(S[E++]=d)}return S}a(u0,"compact");function E0(){var r=arguments.length;if(!r)return[];for(var i=b(r-1),l=arguments[0],E=r;E--;)i[E-1]=arguments[E];return ts(Ie(l)?pr(l):[l],Xt(i,1))}a(E0,"concat");var h0=Oe(function(r,i){return Dt(r)?Wi(r,Xt(i,1,Dt,!0)):[]}),S0=Oe(function(r,i){var l=Xr(i);return Dt(l)&&(l=s),Dt(r)?Wi(r,Xt(i,1,Dt,!0),Se(l,2)):[]}),N0=Oe(function(r,i){var l=Xr(i);return Dt(l)&&(l=s),Dt(r)?Wi(r,Xt(i,1,Dt,!0),s,l):[]});function f0(r,i,l){var E=r==null?0:r.length;return E?(i=l||i===s?1:De(i),zr(r,i<0?0:i,E)):[]}a(f0,"drop");function A0(r,i,l){var E=r==null?0:r.length;return E?(i=l||i===s?1:De(i),i=E-i,zr(r,0,i<0?0:i)):[]}a(A0,"dropRight");function d0(r,i){return r&&r.length?ia(r,Se(i,3),!0,!0):[]}a(d0,"dropRightWhile");function p0(r,i){return r&&r.length?ia(r,Se(i,3),!0):[]}a(p0,"dropWhile");function m0(r,i,l,E){var S=r==null?0:r.length;return S?(l&&typeof l!="number"&&hr(r,i,l)&&(l=0,E=S),Ey(r,i,l,E)):[]}a(m0,"fill");function sA(r,i,l){var E=r==null?0:r.length;if(!E)return-1;var S=l==null?0:De(l);return S<0&&(S=Vt(E+S,0)),bo(r,Se(i,3),S)}a(sA,"findIndex");function iA(r,i,l){var E=r==null?0:r.length;if(!E)return-1;var S=E-1;return l!==s&&(S=De(l),S=l<0?Vt(E+S,0):nr(S,E-1)),bo(r,Se(i,3),S,!0)}a(iA,"findLastIndex");function oA(r){var i=r==null?0:r.length;return i?Xt(r,1):[]}a(oA,"flatten");function P0(r){var i=r==null?0:r.length;return i?Xt(r,ee):[]}a(P0,"flattenDeep");function R0(r,i){var l=r==null?0:r.length;return l?(i=i===s?1:De(i),Xt(r,i)):[]}a(R0,"flattenDepth");function I0(r){for(var i=-1,l=r==null?0:r.length,E={};++i<l;){var S=r[i];E[S[0]]=S[1]}return E}a(I0,"fromPairs");function aA(r){return r&&r.length?r[0]:s}a(aA,"head");function D0(r,i,l){var E=r==null?0:r.length;if(!E)return-1;var S=l==null?0:De(l);return S<0&&(S=Vt(E+S,0)),Js(r,i,S)}a(D0,"indexOf");function g0(r){var i=r==null?0:r.length;return i?zr(r,0,-1):[]}a(g0,"initial");var C0=Oe(function(r){var i=ut(r,gc);return i.length&&i[0]===r[0]?Nc(i):[]}),O0=Oe(function(r){var i=Xr(r),l=ut(r,gc);return i===Xr(l)?i=s:l.pop(),l.length&&l[0]===r[0]?Nc(l,Se(i,2)):[]}),y0=Oe(function(r){var i=Xr(r),l=ut(r,gc);return i=typeof i=="function"?i:s,i&&l.pop(),l.length&&l[0]===r[0]?Nc(l,s,i):[]});function L0(r,i){return r==null?"":gO.call(r,i)}a(L0,"join");function Xr(r){var i=r==null?0:r.length;return i?r[i-1]:s}a(Xr,"last");function w0(r,i,l){var E=r==null?0:r.length;if(!E)return-1;var S=E;return l!==s&&(S=De(l),S=S<0?Vt(E+S,0):nr(S,E-1)),i===i?lO(r,i,S):bo(r,vN,S,!0)}a(w0,"lastIndexOf");function B0(r,i){return r&&r.length?Af(r,De(i)):s}a(B0,"nth");var U0=Oe(_A);function _A(r,i){return r&&r.length&&i&&i.length?pc(r,i):r}a(_A,"pullAll");function Y0(r,i,l){return r&&r.length&&i&&i.length?pc(r,i,Se(l,2)):r}a(Y0,"pullAllBy");function M0(r,i,l){return r&&r.length&&i&&i.length?pc(r,i,s,l):r}a(M0,"pullAllWith");var x0=Bn(function(r,i){var l=r==null?0:r.length,E=uc(r,i);return mf(r,ut(i,function(S){return Un(S,l)?+S:S}).sort(wf)),E});function V0(r,i){var l=[];if(!(r&&r.length))return l;var E=-1,S=[],d=r.length;for(i=Se(i,3);++E<d;){var D=r[E];i(D,E,r)&&(l.push(D),S.push(E))}return mf(r,S),l}a(V0,"remove");function vc(r){return r==null?r:LO.call(r)}a(vc,"reverse");function b0(r,i,l){var E=r==null?0:r.length;return E?(l&&typeof l!="number"&&hr(r,i,l)?(i=0,l=E):(i=i==null?0:De(i),l=l===s?E:De(l)),zr(r,i,l)):[]}a(b0,"slice");function F0(r,i){return sa(r,i)}a(F0,"sortedIndex");function v0(r,i,l){return Rc(r,i,Se(l,2))}a(v0,"sortedIndexBy");function k0(r,i){var l=r==null?0:r.length;if(l){var E=sa(r,i);if(E<l&&an(r[E],i))return E}return-1}a(k0,"sortedIndexOf");function q0(r,i){return sa(r,i,!0)}a(q0,"sortedLastIndex");function G0(r,i,l){return Rc(r,i,Se(l,2),!0)}a(G0,"sortedLastIndexBy");function H0(r,i){var l=r==null?0:r.length;if(l){var E=sa(r,i,!0)-1;if(an(r[E],i))return E}return-1}a(H0,"sortedLastIndexOf");function K0(r){return r&&r.length?Rf(r):[]}a(K0,"sortedUniq");function W0(r,i){return r&&r.length?Rf(r,Se(i,2)):[]}a(W0,"sortedUniqBy");function $0(r){var i=r==null?0:r.length;return i?zr(r,1,i):[]}a($0,"tail");function z0(r,i,l){return r&&r.length?(i=l||i===s?1:De(i),zr(r,0,i<0?0:i)):[]}a(z0,"take");function X0(r,i,l){var E=r==null?0:r.length;return E?(i=l||i===s?1:De(i),i=E-i,zr(r,i<0?0:i,E)):[]}a(X0,"takeRight");function Q0(r,i){return r&&r.length?ia(r,Se(i,3),!1,!0):[]}a(Q0,"takeRightWhile");function J0(r,i){return r&&r.length?ia(r,Se(i,3)):[]}a(J0,"takeWhile");var j0=Oe(function(r){return os(Xt(r,1,Dt,!0))}),Z0=Oe(function(r){var i=Xr(r);return Dt(i)&&(i=s),os(Xt(r,1,Dt,!0),Se(i,2))}),eL=Oe(function(r){var i=Xr(r);return i=typeof i=="function"?i:s,os(Xt(r,1,Dt,!0),s,i)});function tL(r){return r&&r.length?os(r):[]}a(tL,"uniq");function rL(r,i){return r&&r.length?os(r,Se(i,2)):[]}a(rL,"uniqBy");function nL(r,i){return i=typeof i=="function"?i:s,r&&r.length?os(r,s,i):[]}a(nL,"uniqWith");function kc(r){if(!(r&&r.length))return[];var i=0;return r=es(r,function(l){if(Dt(l))return i=Vt(l.length,i),!0}),sc(i,function(l){return ut(r,tc(l))})}a(kc,"unzip");function cA(r,i){if(!(r&&r.length))return[];var l=kc(r);return i==null?l:ut(l,function(E){return wr(i,s,E)})}a(cA,"unzipWith");var sL=Oe(function(r,i){return Dt(r)?Wi(r,i):[]}),iL=Oe(function(r){return Dc(es(r,Dt))}),oL=Oe(function(r){var i=Xr(r);return Dt(i)&&(i=s),Dc(es(r,Dt),Se(i,2))}),aL=Oe(function(r){var i=Xr(r);return i=typeof i=="function"?i:s,Dc(es(r,Dt),s,i)}),_L=Oe(kc);function cL(r,i){return Cf(r||[],i||[],Ki)}a(cL,"zipObject");function lL(r,i){return Cf(r||[],i||[],Xi)}a(lL,"zipObjectDeep");var TL=Oe(function(r){var i=r.length,l=i>1?r[i-1]:s;return l=typeof l=="function"?(r.pop(),l):s,cA(r,l)});function lA(r){var i=f(r);return i.__chain__=!0,i}a(lA,"chain");function uL(r,i){return i(r),r}a(uL,"tap");function ha(r,i){return i(r)}a(ha,"thru");var EL=Bn(function(r){var i=r.length,l=i?r[0]:0,E=this.__wrapped__,S=a(function(d){return uc(d,r)},"interceptor");return i>1||this.__actions__.length||!(E instanceof Be)||!Un(l)?this.thru(S):(E=E.slice(l,+l+(i?1:0)),E.__actions__.push({func:ha,args:[S],thisArg:s}),new Wr(E,this.__chain__).thru(function(d){return i&&!d.length&&d.push(s),d}))});function hL(){return lA(this)}a(hL,"wrapperChain");function SL(){return new Wr(this.value(),this.__chain__)}a(SL,"wrapperCommit");function NL(){this.__values__===s&&(this.__values__=IA(this.value()));var r=this.__index__>=this.__values__.length,i=r?s:this.__values__[this.__index__++];return{done:r,value:i}}a(NL,"wrapperNext");function fL(){return this}a(fL,"wrapperToIterator");function AL(r){for(var i,l=this;l instanceof Zo;){var E=nA(l);E.__index__=0,E.__values__=s,i?S.__wrapped__=E:i=E;var S=E;l=l.__wrapped__}return S.__wrapped__=r,i}a(AL,"wrapperPlant");function dL(){var r=this.__wrapped__;if(r instanceof Be){var i=r;return this.__actions__.length&&(i=new Be(this)),i=i.reverse(),i.__actions__.push({func:ha,args:[vc],thisArg:s}),new Wr(i,this.__chain__)}return this.thru(vc)}a(dL,"wrapperReverse");function pL(){return gf(this.__wrapped__,this.__actions__)}a(pL,"wrapperValue");var mL=oa(function(r,i,l){ze.call(r,l)?++r[l]:Ln(r,l,1)});function PL(r,i,l){var E=Ie(r)?bN:uy;return l&&hr(r,i,l)&&(i=s),E(r,Se(i,3))}a(PL,"every");function RL(r,i){var l=Ie(r)?es:cf;return l(r,Se(i,3))}a(RL,"filter");var IL=Vf(sA),DL=Vf(iA);function gL(r,i){return Xt(Sa(r,i),1)}a(gL,"flatMap");function CL(r,i){return Xt(Sa(r,i),ee)}a(CL,"flatMapDeep");function OL(r,i,l){return l=l===s?1:De(l),Xt(Sa(r,i),l)}a(OL,"flatMapDepth");function TA(r,i){var l=Ie(r)?Hr:is;return l(r,Se(i,3))}a(TA,"forEach");function uA(r,i){var l=Ie(r)?$C:_f;return l(r,Se(i,3))}a(uA,"forEachRight");var yL=oa(function(r,i,l){ze.call(r,l)?r[l].push(i):Ln(r,l,[i])});function LL(r,i,l,E){r=mr(r)?r:_i(r),l=l&&!E?De(l):0;var S=r.length;return l<0&&(l=Vt(S+l,0)),pa(r)?l<=S&&r.indexOf(i,l)>-1:!!S&&Js(r,i,l)>-1}a(LL,"includes");var wL=Oe(function(r,i,l){var E=-1,S=typeof i=="function",d=mr(r)?b(r.length):[];return is(r,function(D){d[++E]=S?wr(i,D,l):$i(D,i,l)}),d}),BL=oa(function(r,i,l){Ln(r,l,i)});function Sa(r,i){var l=Ie(r)?ut:Sf;return l(r,Se(i,3))}a(Sa,"map");function UL(r,i,l,E){return r==null?[]:(Ie(i)||(i=i==null?[]:[i]),l=E?s:l,Ie(l)||(l=l==null?[]:[l]),df(r,i,l))}a(UL,"orderBy");var YL=oa(function(r,i,l){r[l?0:1].push(i)},function(){return[[],[]]});function ML(r,i,l){var E=Ie(r)?Z_:qN,S=arguments.length<3;return E(r,Se(i,4),l,S,is)}a(ML,"reduce");function xL(r,i,l){var E=Ie(r)?zC:qN,S=arguments.length<3;return E(r,Se(i,4),l,S,_f)}a(xL,"reduceRight");function VL(r,i){var l=Ie(r)?es:cf;return l(r,Aa(Se(i,3)))}a(VL,"reject");function bL(r){var i=Ie(r)?nf:Ly;return i(r)}a(bL,"sample");function FL(r,i,l){(l?hr(r,i,l):i===s)?i=1:i=De(i);var E=Ie(r)?ay:wy;return E(r,i)}a(FL,"sampleSize");function vL(r){var i=Ie(r)?_y:Uy;return i(r)}a(vL,"shuffle");function kL(r){if(r==null)return 0;if(mr(r))return pa(r)?Zs(r):r.length;var i=sr(r);return i==oe||i==Lt?r.size:Ac(r).length}a(kL,"size");function qL(r,i,l){var E=Ie(r)?ec:Yy;return l&&hr(r,i,l)&&(i=s),E(r,Se(i,3))}a(qL,"some");var GL=Oe(function(r,i){if(r==null)return[];var l=i.length;return l>1&&hr(r,i[0],i[1])?i=[]:l>2&&hr(i[0],i[1],i[2])&&(i=[i[0]]),df(r,Xt(i,1),[])}),Na=RO||function(){return kt.Date.now()};function HL(r,i){if(typeof i!="function")throw new Kr(o);return r=De(r),function(){if(--r<1)return i.apply(this,arguments)}}a(HL,"after");function EA(r,i,l){return i=l?s:i,i=r&&i==null?r.length:i,wn(r,H,s,s,s,s,i)}a(EA,"ary");function hA(r,i){var l;if(typeof i!="function")throw new Kr(o);return r=De(r),function(){return--r>0&&(l=i.apply(this,arguments)),r<=1&&(i=s),l}}a(hA,"before");var qc=Oe(function(r,i,l){var E=p;if(l.length){var S=rs(l,oi(qc));E|=L}return wn(r,E,i,l,S)}),SA=Oe(function(r,i,l){var E=p|m;if(l.length){var S=rs(l,oi(SA));E|=L}return wn(i,E,r,l,S)});function NA(r,i,l){i=l?s:i;var E=wn(r,I,s,s,s,s,s,i);return E.placeholder=NA.placeholder,E}a(NA,"curry");function fA(r,i,l){i=l?s:i;var E=wn(r,M,s,s,s,s,s,i);return E.placeholder=fA.placeholder,E}a(fA,"curryRight");function AA(r,i,l){var E,S,d,D,C,B,K=0,W=!1,X=!1,re=!0;if(typeof r!="function")throw new Kr(o);i=Qr(i)||0,ft(l)&&(W=!!l.leading,X="maxWait"in l,d=X?Vt(Qr(l.maxWait)||0,i):d,re="trailing"in l?!!l.trailing:re);function ae(gt){var _n=E,xn=S;return E=S=s,K=gt,D=r.apply(xn,_n),D}a(ae,"invokeFunc");function Ne(gt){return K=gt,C=ji(we,i),W?ae(gt):D}a(Ne,"leadingEdge");function ge(gt){var _n=gt-B,xn=gt-K,VA=i-_n;return X?nr(VA,d-xn):VA}a(ge,"remainingWait");function fe(gt){var _n=gt-B,xn=gt-K;return B===s||_n>=i||_n<0||X&&xn>=d}a(fe,"shouldInvoke");function we(){var gt=Na();if(fe(gt))return Ye(gt);C=ji(we,ge(gt))}a(we,"timerExpired");function Ye(gt){return C=s,re&&E?ae(gt):(E=S=s,D)}a(Ye,"trailingEdge");function Mr(){C!==s&&Of(C),K=0,E=B=S=C=s}a(Mr,"cancel");function Sr(){return C===s?D:Ye(Na())}a(Sr,"flush");function xr(){var gt=Na(),_n=fe(gt);if(E=arguments,S=this,B=gt,_n){if(C===s)return Ne(B);if(X)return Of(C),C=ji(we,i),ae(B)}return C===s&&(C=ji(we,i)),D}return a(xr,"debounced"),xr.cancel=Mr,xr.flush=Sr,xr}a(AA,"debounce");var KL=Oe(function(r,i){return af(r,1,i)}),WL=Oe(function(r,i,l){return af(r,Qr(i)||0,l)});function $L(r){return wn(r,se)}a($L,"flip");function fa(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new Kr(o);var l=a(function(){var E=arguments,S=i?i.apply(this,E):E[0],d=l.cache;if(d.has(S))return d.get(S);var D=r.apply(this,E);return l.cache=d.set(S,D)||d,D},"memoized");return l.cache=new(fa.Cache||yn),l}a(fa,"memoize"),fa.Cache=yn;function Aa(r){if(typeof r!="function")throw new Kr(o);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}a(Aa,"negate");function zL(r){return hA(2,r)}a(zL,"once");var XL=My(function(r,i){i=i.length==1&&Ie(i[0])?ut(i[0],Br(Se())):ut(Xt(i,1),Br(Se()));var l=i.length;return Oe(function(E){for(var S=-1,d=nr(E.length,l);++S<d;)E[S]=i[S].call(this,E[S]);return wr(r,this,E)})}),Gc=Oe(function(r,i){var l=rs(i,oi(Gc));return wn(r,L,s,i,l)}),dA=Oe(function(r,i){var l=rs(i,oi(dA));return wn(r,v,s,i,l)}),QL=Bn(function(r,i){return wn(r,te,s,s,s,i)});function JL(r,i){if(typeof r!="function")throw new Kr(o);return i=i===s?i:De(i),Oe(r,i)}a(JL,"rest");function jL(r,i){if(typeof r!="function")throw new Kr(o);return i=i==null?0:Vt(De(i),0),Oe(function(l){var E=l[i],S=_s(l,0,i);return E&&ts(S,E),wr(r,this,S)})}a(jL,"spread");function ZL(r,i,l){var E=!0,S=!0;if(typeof r!="function")throw new Kr(o);return ft(l)&&(E="leading"in l?!!l.leading:E,S="trailing"in l?!!l.trailing:S),AA(r,i,{leading:E,maxWait:i,trailing:S})}a(ZL,"throttle");function ew(r){return EA(r,1)}a(ew,"unary");function tw(r,i){return Gc(Cc(i),r)}a(tw,"wrap");function rw(){if(!arguments.length)return[];var r=arguments[0];return Ie(r)?r:[r]}a(rw,"castArray");function nw(r){return $r(r,P)}a(nw,"clone");function sw(r,i){return i=typeof i=="function"?i:s,$r(r,P,i)}a(sw,"cloneWith");function iw(r){return $r(r,A|P)}a(iw,"cloneDeep");function ow(r,i){return i=typeof i=="function"?i:s,$r(r,A|P,i)}a(ow,"cloneDeepWith");function aw(r,i){return i==null||of(r,i,qt(i))}a(aw,"conformsTo");function an(r,i){return r===i||r!==r&&i!==i}a(an,"eq");var _w=la(Sc),cw=la(function(r,i){return r>=i}),Us=uf(function(){return arguments}())?uf:function(r){return pt(r)&&ze.call(r,"callee")&&!JN.call(r,"callee")},Ie=b.isArray,lw=BN?Br(BN):Ay;function mr(r){return r!=null&&da(r.length)&&!Yn(r)}a(mr,"isArrayLike");function Dt(r){return pt(r)&&mr(r)}a(Dt,"isArrayLikeObject");function Tw(r){return r===!0||r===!1||pt(r)&&Er(r)==kr}a(Tw,"isBoolean");var cs=DO||el,uw=UN?Br(UN):dy;function Ew(r){return pt(r)&&r.nodeType===1&&!Zi(r)}a(Ew,"isElement");function hw(r){if(r==null)return!0;if(mr(r)&&(Ie(r)||typeof r=="string"||typeof r.splice=="function"||cs(r)||ai(r)||Us(r)))return!r.length;var i=sr(r);if(i==oe||i==Lt)return!r.size;if(Ji(r))return!Ac(r).length;for(var l in r)if(ze.call(r,l))return!1;return!0}a(hw,"isEmpty");function Sw(r,i){return zi(r,i)}a(Sw,"isEqual");function Nw(r,i,l){l=typeof l=="function"?l:s;var E=l?l(r,i):s;return E===s?zi(r,i,s,l):!!E}a(Nw,"isEqualWith");function Hc(r){if(!pt(r))return!1;var i=Er(r);return i==x||i==Ui||typeof r.message=="string"&&typeof r.name=="string"&&!Zi(r)}a(Hc,"isError");function fw(r){return typeof r=="number"&&ZN(r)}a(fw,"isFinite");function Yn(r){if(!ft(r))return!1;var i=Er(r);return i==z||i==ue||i==Qn||i==tr}a(Yn,"isFunction");function pA(r){return typeof r=="number"&&r==De(r)}a(pA,"isInteger");function da(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=ye}a(da,"isLength");function ft(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}a(ft,"isObject");function pt(r){return r!=null&&typeof r=="object"}a(pt,"isObjectLike");var mA=YN?Br(YN):my;function Aw(r,i){return r===i||fc(r,i,Yc(i))}a(Aw,"isMatch");function dw(r,i,l){return l=typeof l=="function"?l:s,fc(r,i,Yc(i),l)}a(dw,"isMatchWith");function pw(r){return PA(r)&&r!=+r}a(pw,"isNaN");function mw(r){if(s0(r))throw new Re(n);return Ef(r)}a(mw,"isNative");function Pw(r){return r===null}a(Pw,"isNull");function Rw(r){return r==null}a(Rw,"isNil");function PA(r){return typeof r=="number"||pt(r)&&Er(r)==ve}a(PA,"isNumber");function Zi(r){if(!pt(r)||Er(r)!=He)return!1;var i=Wo(r);if(i===null)return!0;var l=ze.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&qo.call(l)==dO}a(Zi,"isPlainObject");var Kc=MN?Br(MN):Py;function Iw(r){return pA(r)&&r>=-ye&&r<=ye}a(Iw,"isSafeInteger");var RA=xN?Br(xN):Ry;function pa(r){return typeof r=="string"||!Ie(r)&&pt(r)&&Er(r)==wt}a(pa,"isString");function Yr(r){return typeof r=="symbol"||pt(r)&&Er(r)==zt}a(Yr,"isSymbol");var ai=VN?Br(VN):Iy;function Dw(r){return r===s}a(Dw,"isUndefined");function gw(r){return pt(r)&&sr(r)==dr}a(gw,"isWeakMap");function Cw(r){return pt(r)&&Er(r)==Cn}a(Cw,"isWeakSet");var Ow=la(dc),yw=la(function(r,i){return r<=i});function IA(r){if(!r)return[];if(mr(r))return pa(r)?sn(r):pr(r);if(vi&&r[vi])return aO(r[vi]());var i=sr(r),l=i==oe?oc:i==Lt?Fo:_i;return l(r)}a(IA,"toArray");function Mn(r){if(!r)return r===0?r:0;if(r=Qr(r),r===ee||r===-ee){var i=r<0?-1:1;return i*St}return r===r?r:0}a(Mn,"toFinite");function De(r){var i=Mn(r),l=i%1;return i===i?l?i-l:i:0}a(De,"toInteger");function DA(r){return r?ys(De(r),0,ce):0}a(DA,"toLength");function Qr(r){if(typeof r=="number")return r;if(Yr(r))return j;if(ft(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=ft(i)?i+"":i}if(typeof r!="string")return r===0?r:+r;r=GN(r);var l=lC.test(r);return l||uC.test(r)?HC(r.slice(2),l?2:8):cC.test(r)?j:+r}a(Qr,"toNumber");function gA(r){return fn(r,Pr(r))}a(gA,"toPlainObject");function Lw(r){return r?ys(De(r),-ye,ye):r===0?r:0}a(Lw,"toSafeInteger");function Ke(r){return r==null?"":Ur(r)}a(Ke,"toString");var ww=si(function(r,i){if(Ji(i)||mr(i)){fn(i,qt(i),r);return}for(var l in i)ze.call(i,l)&&Ki(r,l,i[l])}),CA=si(function(r,i){fn(i,Pr(i),r)}),ma=si(function(r,i,l,E){fn(i,Pr(i),r,E)}),Bw=si(function(r,i,l,E){fn(i,qt(i),r,E)}),Uw=Bn(uc);function Yw(r,i){var l=ni(r);return i==null?l:sf(l,i)}a(Yw,"create");var Mw=Oe(function(r,i){r=Ze(r);var l=-1,E=i.length,S=E>2?i[2]:s;for(S&&hr(i[0],i[1],S)&&(E=1);++l<E;)for(var d=i[l],D=Pr(d),C=-1,B=D.length;++C<B;){var K=D[C],W=r[K];(W===s||an(W,ei[K])&&!ze.call(r,K))&&(r[K]=d[K])}return r}),xw=Oe(function(r){return r.push(s,Hf),wr(OA,s,r)});function Vw(r,i){return FN(r,Se(i,3),Nn)}a(Vw,"findKey");function bw(r,i){return FN(r,Se(i,3),hc)}a(bw,"findLastKey");function Fw(r,i){return r==null?r:Ec(r,Se(i,3),Pr)}a(Fw,"forIn");function vw(r,i){return r==null?r:lf(r,Se(i,3),Pr)}a(vw,"forInRight");function kw(r,i){return r&&Nn(r,Se(i,3))}a(kw,"forOwn");function qw(r,i){return r&&hc(r,Se(i,3))}a(qw,"forOwnRight");function Gw(r){return r==null?[]:ra(r,qt(r))}a(Gw,"functions");function Hw(r){return r==null?[]:ra(r,Pr(r))}a(Hw,"functionsIn");function Wc(r,i,l){var E=r==null?s:Ls(r,i);return E===s?l:E}a(Wc,"get");function Kw(r,i){return r!=null&&$f(r,i,hy)}a(Kw,"has");function $c(r,i){return r!=null&&$f(r,i,Sy)}a($c,"hasIn");var Ww=Ff(function(r,i,l){i!=null&&typeof i.toString!="function"&&(i=Go.call(i)),r[i]=l},Xc(Rr)),$w=Ff(function(r,i,l){i!=null&&typeof i.toString!="function"&&(i=Go.call(i)),ze.call(r,i)?r[i].push(l):r[i]=[l]},Se),zw=Oe($i);function qt(r){return mr(r)?rf(r):Ac(r)}a(qt,"keys");function Pr(r){return mr(r)?rf(r,!0):Dy(r)}a(Pr,"keysIn");function Xw(r,i){var l={};return i=Se(i,3),Nn(r,function(E,S,d){Ln(l,i(E,S,d),E)}),l}a(Xw,"mapKeys");function Qw(r,i){var l={};return i=Se(i,3),Nn(r,function(E,S,d){Ln(l,S,i(E,S,d))}),l}a(Qw,"mapValues");var Jw=si(function(r,i,l){na(r,i,l)}),OA=si(function(r,i,l,E){na(r,i,l,E)}),jw=Bn(function(r,i){var l={};if(r==null)return l;var E=!1;i=ut(i,function(d){return d=as(d,r),E||(E=d.length>1),d}),fn(r,Bc(r),l),E&&(l=$r(l,A|N|P,Wy));for(var S=i.length;S--;)Ic(l,i[S]);return l});function Zw(r,i){return yA(r,Aa(Se(i)))}a(Zw,"omitBy");var eB=Bn(function(r,i){return r==null?{}:Cy(r,i)});function yA(r,i){if(r==null)return{};var l=ut(Bc(r),function(E){return[E]});return i=Se(i),pf(r,l,function(E,S){return i(E,S[0])})}a(yA,"pickBy");function tB(r,i,l){i=as(i,r);var E=-1,S=i.length;for(S||(S=1,r=s);++E<S;){var d=r==null?s:r[An(i[E])];d===s&&(E=S,d=l),r=Yn(d)?d.call(r):d}return r}a(tB,"result");function rB(r,i,l){return r==null?r:Xi(r,i,l)}a(rB,"set");function nB(r,i,l,E){return E=typeof E=="function"?E:s,r==null?r:Xi(r,i,l,E)}a(nB,"setWith");var LA=qf(qt),wA=qf(Pr);function sB(r,i,l){var E=Ie(r),S=E||cs(r)||ai(r);if(i=Se(i,4),l==null){var d=r&&r.constructor;S?l=E?new d:[]:ft(r)?l=Yn(d)?ni(Wo(r)):{}:l={}}return(S?Hr:Nn)(r,function(D,C,B){return i(l,D,C,B)}),l}a(sB,"transform");function iB(r,i){return r==null?!0:Ic(r,i)}a(iB,"unset");function oB(r,i,l){return r==null?r:Df(r,i,Cc(l))}a(oB,"update");function aB(r,i,l,E){return E=typeof E=="function"?E:s,r==null?r:Df(r,i,Cc(l),E)}a(aB,"updateWith");function _i(r){return r==null?[]:ic(r,qt(r))}a(_i,"values");function _B(r){return r==null?[]:ic(r,Pr(r))}a(_B,"valuesIn");function cB(r,i,l){return l===s&&(l=i,i=s),l!==s&&(l=Qr(l),l=l===l?l:0),i!==s&&(i=Qr(i),i=i===i?i:0),ys(Qr(r),i,l)}a(cB,"clamp");function lB(r,i,l){return i=Mn(i),l===s?(l=i,i=0):l=Mn(l),r=Qr(r),Ny(r,i,l)}a(lB,"inRange");function TB(r,i,l){if(l&&typeof l!="boolean"&&hr(r,i,l)&&(i=l=s),l===s&&(typeof i=="boolean"?(l=i,i=s):typeof r=="boolean"&&(l=r,r=s)),r===s&&i===s?(r=0,i=1):(r=Mn(r),i===s?(i=r,r=0):i=Mn(i)),r>i){var E=r;r=i,i=E}if(l||r%1||i%1){var S=ef();return nr(r+S*(i-r+GC("1e-"+((S+"").length-1))),i)}return mc(r,i)}a(TB,"random");var uB=ii(function(r,i,l){return i=i.toLowerCase(),r+(l?BA(i):i)});function BA(r){return zc(Ke(r).toLowerCase())}a(BA,"capitalize");function UA(r){return r=Ke(r),r&&r.replace(hC,rO).replace(UC,"")}a(UA,"deburr");function EB(r,i,l){r=Ke(r),i=Ur(i);var E=r.length;l=l===s?E:ys(De(l),0,E);var S=l;return l-=i.length,l>=0&&r.slice(l,S)==i}a(EB,"endsWith");function hB(r){return r=Ke(r),r&&q_.test(r)?r.replace(Bo,nO):r}a(hB,"escape");function SB(r){return r=Ke(r),r&&eC.test(r)?r.replace(G_,"\\$&"):r}a(SB,"escapeRegExp");var NB=ii(function(r,i,l){return r+(l?"-":"")+i.toLowerCase()}),fB=ii(function(r,i,l){return r+(l?" ":"")+i.toLowerCase()}),AB=xf("toLowerCase");function dB(r,i,l){r=Ke(r),i=De(i);var E=i?Zs(r):0;if(!i||E>=i)return r;var S=(i-E)/2;return ca(Qo(S),l)+r+ca(Xo(S),l)}a(dB,"pad");function pB(r,i,l){r=Ke(r),i=De(i);var E=i?Zs(r):0;return i&&E<i?r+ca(i-E,l):r}a(pB,"padEnd");function mB(r,i,l){r=Ke(r),i=De(i);var E=i?Zs(r):0;return i&&E<i?ca(i-E,l)+r:r}a(mB,"padStart");function PB(r,i,l){return l||i==null?i=0:i&&(i=+i),yO(Ke(r).replace(H_,""),i||0)}a(PB,"parseInt");function RB(r,i,l){return(l?hr(r,i,l):i===s)?i=1:i=De(i),Pc(Ke(r),i)}a(RB,"repeat");function IB(){var r=arguments,i=Ke(r[0]);return r.length<3?i:i.replace(r[1],r[2])}a(IB,"replace");var DB=ii(function(r,i,l){return r+(l?"_":"")+i.toLowerCase()});function gB(r,i,l){return l&&typeof l!="number"&&hr(r,i,l)&&(i=l=s),l=l===s?ce:l>>>0,l?(r=Ke(r),r&&(typeof i=="string"||i!=null&&!Kc(i))&&(i=Ur(i),!i&&js(r))?_s(sn(r),0,l):r.split(i,l)):[]}a(gB,"split");var CB=ii(function(r,i,l){return r+(l?" ":"")+zc(i)});function OB(r,i,l){return r=Ke(r),l=l==null?0:ys(De(l),0,r.length),i=Ur(i),r.slice(l,l+i.length)==i}a(OB,"startsWith");function yB(r,i,l){var E=f.templateSettings;l&&hr(r,i,l)&&(i=s),r=Ke(r),i=ma({},i,E,Gf);var S=ma({},i.imports,E.imports,Gf),d=qt(S),D=ic(S,d),C,B,K=0,W=i.interpolate||Yo,X="__p += '",re=ac((i.escape||Yo).source+"|"+W.source+"|"+(W===Xs?_C:Yo).source+"|"+(i.evaluate||Yo).source+"|$","g"),ae="//# sourceURL="+(ze.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++bC+"]")+`
`;r.replace(re,function(fe,we,Ye,Mr,Sr,xr){return Ye||(Ye=Mr),X+=r.slice(K,xr).replace(SC,sO),we&&(C=!0,X+=`' +
__e(`+we+`) +
'`),Sr&&(B=!0,X+=`';
`+Sr+`;
__p += '`),Ye&&(X+=`' +
((__t = (`+Ye+`)) == null ? '' : __t) +
'`),K=xr+fe.length,fe}),X+=`';
`;var Ne=ze.call(i,"variable")&&i.variable;if(!Ne)X=`with (obj) {
`+X+`
}
`;else if(oC.test(Ne))throw new Re(_);X=(B?X.replace(F_,""):X).replace(v_,"$1").replace(wo,"$1;"),X="function("+(Ne||"obj")+`) {
`+(Ne?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(C?", __e = _.escape":"")+(B?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+X+`return __p
}`;var ge=MA(function(){return ke(d,ae+"return "+X).apply(s,D)});if(ge.source=X,Hc(ge))throw ge;return ge}a(yB,"template");function LB(r){return Ke(r).toLowerCase()}a(LB,"toLower");function wB(r){return Ke(r).toUpperCase()}a(wB,"toUpper");function BB(r,i,l){if(r=Ke(r),r&&(l||i===s))return GN(r);if(!r||!(i=Ur(i)))return r;var E=sn(r),S=sn(i),d=HN(E,S),D=KN(E,S)+1;return _s(E,d,D).join("")}a(BB,"trim");function UB(r,i,l){if(r=Ke(r),r&&(l||i===s))return r.slice(0,$N(r)+1);if(!r||!(i=Ur(i)))return r;var E=sn(r),S=KN(E,sn(i))+1;return _s(E,0,S).join("")}a(UB,"trimEnd");function YB(r,i,l){if(r=Ke(r),r&&(l||i===s))return r.replace(H_,"");if(!r||!(i=Ur(i)))return r;var E=sn(r),S=HN(E,sn(i));return _s(E,S).join("")}a(YB,"trimStart");function MB(r,i){var l=Ae,E=V;if(ft(i)){var S="separator"in i?i.separator:S;l="length"in i?De(i.length):l,E="omission"in i?Ur(i.omission):E}r=Ke(r);var d=r.length;if(js(r)){var D=sn(r);d=D.length}if(l>=d)return r;var C=l-Zs(E);if(C<1)return E;var B=D?_s(D,0,C).join(""):r.slice(0,C);if(S===s)return B+E;if(D&&(C+=B.length-C),Kc(S)){if(r.slice(C).search(S)){var K,W=B;for(S.global||(S=ac(S.source,Ke(TN.exec(S))+"g")),S.lastIndex=0;K=S.exec(W);)var X=K.index;B=B.slice(0,X===s?C:X)}}else if(r.indexOf(Ur(S),C)!=C){var re=B.lastIndexOf(S);re>-1&&(B=B.slice(0,re))}return B+E}a(MB,"truncate");function xB(r){return r=Ke(r),r&&k_.test(r)?r.replace(bi,TO):r}a(xB,"unescape");var VB=ii(function(r,i,l){return r+(l?" ":"")+i.toUpperCase()}),zc=xf("toUpperCase");function YA(r,i,l){return r=Ke(r),i=l?s:i,i===s?oO(r)?hO(r):JC(r):r.match(i)||[]}a(YA,"words");var MA=Oe(function(r,i){try{return wr(r,s,i)}catch(l){return Hc(l)?l:new Re(l)}}),bB=Bn(function(r,i){return Hr(i,function(l){l=An(l),Ln(r,l,qc(r[l],r))}),r});function FB(r){var i=r==null?0:r.length,l=Se();return r=i?ut(r,function(E){if(typeof E[1]!="function")throw new Kr(o);return[l(E[0]),E[1]]}):[],Oe(function(E){for(var S=-1;++S<i;){var d=r[S];if(wr(d[0],this,E))return wr(d[1],this,E)}})}a(FB,"cond");function vB(r){return Ty($r(r,A))}a(vB,"conforms");function Xc(r){return function(){return r}}a(Xc,"constant");function kB(r,i){return r==null||r!==r?i:r}a(kB,"defaultTo");var qB=bf(),GB=bf(!0);function Rr(r){return r}a(Rr,"identity");function Qc(r){return hf(typeof r=="function"?r:$r(r,A))}a(Qc,"iteratee");function HB(r){return Nf($r(r,A))}a(HB,"matches");function KB(r,i){return ff(r,$r(i,A))}a(KB,"matchesProperty");var WB=Oe(function(r,i){return function(l){return $i(l,r,i)}}),$B=Oe(function(r,i){return function(l){return $i(r,l,i)}});function Jc(r,i,l){var E=qt(i),S=ra(i,E);l==null&&!(ft(i)&&(S.length||!E.length))&&(l=i,i=r,r=this,S=ra(i,qt(i)));var d=!(ft(l)&&"chain"in l)||!!l.chain,D=Yn(r);return Hr(S,function(C){var B=i[C];r[C]=B,D&&(r.prototype[C]=function(){var K=this.__chain__;if(d||K){var W=r(this.__wrapped__),X=W.__actions__=pr(this.__actions__);return X.push({func:B,args:arguments,thisArg:r}),W.__chain__=K,W}return B.apply(r,ts([this.value()],arguments))})}),r}a(Jc,"mixin");function zB(){return kt._===this&&(kt._=pO),this}a(zB,"noConflict");function jc(){}a(jc,"noop");function XB(r){return r=De(r),Oe(function(i){return Af(i,r)})}a(XB,"nthArg");var QB=yc(ut),JB=yc(bN),jB=yc(ec);function xA(r){return xc(r)?tc(An(r)):Oy(r)}a(xA,"property");function ZB(r){return function(i){return r==null?s:Ls(r,i)}}a(ZB,"propertyOf");var eU=vf(),tU=vf(!0);function Zc(){return[]}a(Zc,"stubArray");function el(){return!1}a(el,"stubFalse");function rU(){return{}}a(rU,"stubObject");function nU(){return""}a(nU,"stubString");function sU(){return!0}a(sU,"stubTrue");function iU(r,i){if(r=De(r),r<1||r>ye)return[];var l=ce,E=nr(r,ce);i=Se(i),r-=ce;for(var S=sc(E,i);++l<r;)i(l);return S}a(iU,"times");function oU(r){return Ie(r)?ut(r,An):Yr(r)?[r]:pr(rA(Ke(r)))}a(oU,"toPath");function aU(r){var i=++AO;return Ke(r)+i}a(aU,"uniqueId");var _U=_a(function(r,i){return r+i},0),cU=Lc("ceil"),lU=_a(function(r,i){return r/i},1),TU=Lc("floor");function uU(r){return r&&r.length?ta(r,Rr,Sc):s}a(uU,"max");function EU(r,i){return r&&r.length?ta(r,Se(i,2),Sc):s}a(EU,"maxBy");function hU(r){return kN(r,Rr)}a(hU,"mean");function SU(r,i){return kN(r,Se(i,2))}a(SU,"meanBy");function NU(r){return r&&r.length?ta(r,Rr,dc):s}a(NU,"min");function fU(r,i){return r&&r.length?ta(r,Se(i,2),dc):s}a(fU,"minBy");var AU=_a(function(r,i){return r*i},1),dU=Lc("round"),pU=_a(function(r,i){return r-i},0);function mU(r){return r&&r.length?nc(r,Rr):0}a(mU,"sum");function PU(r,i){return r&&r.length?nc(r,Se(i,2)):0}return a(PU,"sumBy"),f.after=HL,f.ary=EA,f.assign=ww,f.assignIn=CA,f.assignInWith=ma,f.assignWith=Bw,f.at=Uw,f.before=hA,f.bind=qc,f.bindAll=bB,f.bindKey=SA,f.castArray=rw,f.chain=lA,f.chunk=T0,f.compact=u0,f.concat=E0,f.cond=FB,f.conforms=vB,f.constant=Xc,f.countBy=mL,f.create=Yw,f.curry=NA,f.curryRight=fA,f.debounce=AA,f.defaults=Mw,f.defaultsDeep=xw,f.defer=KL,f.delay=WL,f.difference=h0,f.differenceBy=S0,f.differenceWith=N0,f.drop=f0,f.dropRight=A0,f.dropRightWhile=d0,f.dropWhile=p0,f.fill=m0,f.filter=RL,f.flatMap=gL,f.flatMapDeep=CL,f.flatMapDepth=OL,f.flatten=oA,f.flattenDeep=P0,f.flattenDepth=R0,f.flip=$L,f.flow=qB,f.flowRight=GB,f.fromPairs=I0,f.functions=Gw,f.functionsIn=Hw,f.groupBy=yL,f.initial=g0,f.intersection=C0,f.intersectionBy=O0,f.intersectionWith=y0,f.invert=Ww,f.invertBy=$w,f.invokeMap=wL,f.iteratee=Qc,f.keyBy=BL,f.keys=qt,f.keysIn=Pr,f.map=Sa,f.mapKeys=Xw,f.mapValues=Qw,f.matches=HB,f.matchesProperty=KB,f.memoize=fa,f.merge=Jw,f.mergeWith=OA,f.method=WB,f.methodOf=$B,f.mixin=Jc,f.negate=Aa,f.nthArg=XB,f.omit=jw,f.omitBy=Zw,f.once=zL,f.orderBy=UL,f.over=QB,f.overArgs=XL,f.overEvery=JB,f.overSome=jB,f.partial=Gc,f.partialRight=dA,f.partition=YL,f.pick=eB,f.pickBy=yA,f.property=xA,f.propertyOf=ZB,f.pull=U0,f.pullAll=_A,f.pullAllBy=Y0,f.pullAllWith=M0,f.pullAt=x0,f.range=eU,f.rangeRight=tU,f.rearg=QL,f.reject=VL,f.remove=V0,f.rest=JL,f.reverse=vc,f.sampleSize=FL,f.set=rB,f.setWith=nB,f.shuffle=vL,f.slice=b0,f.sortBy=GL,f.sortedUniq=K0,f.sortedUniqBy=W0,f.split=gB,f.spread=jL,f.tail=$0,f.take=z0,f.takeRight=X0,f.takeRightWhile=Q0,f.takeWhile=J0,f.tap=uL,f.throttle=ZL,f.thru=ha,f.toArray=IA,f.toPairs=LA,f.toPairsIn=wA,f.toPath=oU,f.toPlainObject=gA,f.transform=sB,f.unary=ew,f.union=j0,f.unionBy=Z0,f.unionWith=eL,f.uniq=tL,f.uniqBy=rL,f.uniqWith=nL,f.unset=iB,f.unzip=kc,f.unzipWith=cA,f.update=oB,f.updateWith=aB,f.values=_i,f.valuesIn=_B,f.without=sL,f.words=YA,f.wrap=tw,f.xor=iL,f.xorBy=oL,f.xorWith=aL,f.zip=_L,f.zipObject=cL,f.zipObjectDeep=lL,f.zipWith=TL,f.entries=LA,f.entriesIn=wA,f.extend=CA,f.extendWith=ma,Jc(f,f),f.add=_U,f.attempt=MA,f.camelCase=uB,f.capitalize=BA,f.ceil=cU,f.clamp=cB,f.clone=nw,f.cloneDeep=iw,f.cloneDeepWith=ow,f.cloneWith=sw,f.conformsTo=aw,f.deburr=UA,f.defaultTo=kB,f.divide=lU,f.endsWith=EB,f.eq=an,f.escape=hB,f.escapeRegExp=SB,f.every=PL,f.find=IL,f.findIndex=sA,f.findKey=Vw,f.findLast=DL,f.findLastIndex=iA,f.findLastKey=bw,f.floor=TU,f.forEach=TA,f.forEachRight=uA,f.forIn=Fw,f.forInRight=vw,f.forOwn=kw,f.forOwnRight=qw,f.get=Wc,f.gt=_w,f.gte=cw,f.has=Kw,f.hasIn=$c,f.head=aA,f.identity=Rr,f.includes=LL,f.indexOf=D0,f.inRange=lB,f.invoke=zw,f.isArguments=Us,f.isArray=Ie,f.isArrayBuffer=lw,f.isArrayLike=mr,f.isArrayLikeObject=Dt,f.isBoolean=Tw,f.isBuffer=cs,f.isDate=uw,f.isElement=Ew,f.isEmpty=hw,f.isEqual=Sw,f.isEqualWith=Nw,f.isError=Hc,f.isFinite=fw,f.isFunction=Yn,f.isInteger=pA,f.isLength=da,f.isMap=mA,f.isMatch=Aw,f.isMatchWith=dw,f.isNaN=pw,f.isNative=mw,f.isNil=Rw,f.isNull=Pw,f.isNumber=PA,f.isObject=ft,f.isObjectLike=pt,f.isPlainObject=Zi,f.isRegExp=Kc,f.isSafeInteger=Iw,f.isSet=RA,f.isString=pa,f.isSymbol=Yr,f.isTypedArray=ai,f.isUndefined=Dw,f.isWeakMap=gw,f.isWeakSet=Cw,f.join=L0,f.kebabCase=NB,f.last=Xr,f.lastIndexOf=w0,f.lowerCase=fB,f.lowerFirst=AB,f.lt=Ow,f.lte=yw,f.max=uU,f.maxBy=EU,f.mean=hU,f.meanBy=SU,f.min=NU,f.minBy=fU,f.stubArray=Zc,f.stubFalse=el,f.stubObject=rU,f.stubString=nU,f.stubTrue=sU,f.multiply=AU,f.nth=B0,f.noConflict=zB,f.noop=jc,f.now=Na,f.pad=dB,f.padEnd=pB,f.padStart=mB,f.parseInt=PB,f.random=TB,f.reduce=ML,f.reduceRight=xL,f.repeat=RB,f.replace=IB,f.result=tB,f.round=dU,f.runInContext=w,f.sample=bL,f.size=kL,f.snakeCase=DB,f.some=qL,f.sortedIndex=F0,f.sortedIndexBy=v0,f.sortedIndexOf=k0,f.sortedLastIndex=q0,f.sortedLastIndexBy=G0,f.sortedLastIndexOf=H0,f.startCase=CB,f.startsWith=OB,f.subtract=pU,f.sum=mU,f.sumBy=PU,f.template=yB,f.times=iU,f.toFinite=Mn,f.toInteger=De,f.toLength=DA,f.toLower=LB,f.toNumber=Qr,f.toSafeInteger=Lw,f.toString=Ke,f.toUpper=wB,f.trim=BB,f.trimEnd=UB,f.trimStart=YB,f.truncate=MB,f.unescape=xB,f.uniqueId=aU,f.upperCase=VB,f.upperFirst=zc,f.each=TA,f.eachRight=uA,f.first=aA,Jc(f,function(){var r={};return Nn(f,function(i,l){ze.call(f.prototype,l)||(r[l]=i)}),r}(),{chain:!1}),f.VERSION=e,Hr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){f[r].placeholder=f}),Hr(["drop","take"],function(r,i){Be.prototype[r]=function(l){l=l===s?1:Vt(De(l),0);var E=this.__filtered__&&!i?new Be(this):this.clone();return E.__filtered__?E.__takeCount__=nr(l,E.__takeCount__):E.__views__.push({size:nr(l,ce),type:r+(E.__dir__<0?"Right":"")}),E},Be.prototype[r+"Right"]=function(l){return this.reverse()[r](l).reverse()}}),Hr(["filter","map","takeWhile"],function(r,i){var l=i+1,E=l==J||l==Pe;Be.prototype[r]=function(S){var d=this.clone();return d.__iteratees__.push({iteratee:Se(S,3),type:l}),d.__filtered__=d.__filtered__||E,d}}),Hr(["head","last"],function(r,i){var l="take"+(i?"Right":"");Be.prototype[r]=function(){return this[l](1).value()[0]}}),Hr(["initial","tail"],function(r,i){var l="drop"+(i?"":"Right");Be.prototype[r]=function(){return this.__filtered__?new Be(this):this[l](1)}}),Be.prototype.compact=function(){return this.filter(Rr)},Be.prototype.find=function(r){return this.filter(r).head()},Be.prototype.findLast=function(r){return this.reverse().find(r)},Be.prototype.invokeMap=Oe(function(r,i){return typeof r=="function"?new Be(this):this.map(function(l){return $i(l,r,i)})}),Be.prototype.reject=function(r){return this.filter(Aa(Se(r)))},Be.prototype.slice=function(r,i){r=De(r);var l=this;return l.__filtered__&&(r>0||i<0)?new Be(l):(r<0?l=l.takeRight(-r):r&&(l=l.drop(r)),i!==s&&(i=De(i),l=i<0?l.dropRight(-i):l.take(i-r)),l)},Be.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Be.prototype.toArray=function(){return this.take(ce)},Nn(Be.prototype,function(r,i){var l=/^(?:filter|find|map|reject)|While$/.test(i),E=/^(?:head|last)$/.test(i),S=f[E?"take"+(i=="last"?"Right":""):i],d=E||/^find/.test(i);S&&(f.prototype[i]=function(){var D=this.__wrapped__,C=E?[1]:arguments,B=D instanceof Be,K=C[0],W=B||Ie(D),X=a(function(we){var Ye=S.apply(f,ts([we],C));return E&&re?Ye[0]:Ye},"interceptor");W&&l&&typeof K=="function"&&K.length!=1&&(B=W=!1);var re=this.__chain__,ae=!!this.__actions__.length,Ne=d&&!re,ge=B&&!ae;if(!d&&W){D=ge?D:new Be(this);var fe=r.apply(D,C);return fe.__actions__.push({func:ha,args:[X],thisArg:s}),new Wr(fe,re)}return Ne&&ge?r.apply(this,C):(fe=this.thru(X),Ne?E?fe.value()[0]:fe.value():fe)})}),Hr(["pop","push","shift","sort","splice","unshift"],function(r){var i=vo[r],l=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",E=/^(?:pop|shift)$/.test(r);f.prototype[r]=function(){var S=arguments;if(E&&!this.__chain__){var d=this.value();return i.apply(Ie(d)?d:[],S)}return this[l](function(D){return i.apply(Ie(D)?D:[],S)})}}),Nn(Be.prototype,function(r,i){var l=f[i];if(l){var E=l.name+"";ze.call(ri,E)||(ri[E]=[]),ri[E].push({name:i,func:l})}}),ri[aa(s,m).name]=[{name:"wrapper",func:s}],Be.prototype.clone=xO,Be.prototype.reverse=VO,Be.prototype.value=bO,f.prototype.at=EL,f.prototype.chain=hL,f.prototype.commit=SL,f.prototype.next=NL,f.prototype.plant=AL,f.prototype.reverse=dL,f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=pL,f.prototype.first=f.prototype.head,vi&&(f.prototype[vi]=fL),f},"runInContext"),ns=SO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(kt._=ns,define(function(){return ns})):Ds?((Ds.exports=ns)._=ns,Q_._=ns):kt._=ns}).call(ci)});var bA=U((X2,IU)=>{IU.exports={name:"Oracle",version:"0.2.5",author:"hackolade",engines:{hackolade:"6.11.1",hackoladePlugin:"1.2.0"},contributes:{target:{applicationTarget:"Oracle",title:"Oracle",versions:["12c","18c","19c","21c","23ai"]},features:{nestedCollections:!1,disablePatternField:!0,disableMultipleTypes:!0,enableForwardEngineering:!0,disableReverseEngineering:!1,disableChoices:!0,enableJsonType:!0,useJsonTypesWithComplexTypes:!0,reverseSchemaIntoOneColumn:!0,disableDenormalization:!0,enableComplexTypesNormalization:!0,restrictNestedFieldsAsPrimaryKey:!1,views:{enabled:!0,viewLevel:"model",disablePipelines:!0},relationships:{compositeRelationships:!0},enableFetchSystemEntitiesCheckbox:!0,discoverRelationships:!0}},description:"Hackolade plugin for Oracle and Autonomous databases",disabled:!1,dependencies:{"adm-zip":"0.5.9",lodash:"4.17.21",oracledb:"6.0.3",perplex:"0.11.0"},"lint-staged":{"*.{js,json}":"prettier --write"},"simple-git-hooks":{"pre-commit":"npx lint-staged","pre-push":"npx eslint ."},scripts:{lint:"eslint . --max-warnings=0",package:"node esbuild.package.js"},devDependencies:{"@hackolade/hck-esbuild-plugins-pack":"0.0.1","@typescript-eslint/parser":"7.11.0","@typescript-eslint/eslint-plugin":"7.11.0",esbuild:"0.20.2","esbuild-plugin-clean":"1.0.1",eslint:"8.57.0","eslint-config-prettier":"9.1.0","eslint-formatter-teamcity":"^1.0.0","eslint-plugin-import":"^2.26.0","eslint-plugin-prettier":"5.1.3","eslint-plugin-unused-imports":"3.2.0","lint-staged":"14.0.1",prettier:"3.2.5","simple-git-hooks":"2.11.1"}}});var vA=U((Q2,FA)=>{"use strict";var Vn=require("os"),DU=bA(),gU=a(s=>s<10?"0"+s:s,"prefixZero"),CU=a(s=>s.reduce((e,t)=>Math.max(e,t.speed),0),"maxClock"),OU=a(s=>Math.floor(s/3600)+":"+gU(parseInt((s/3600-Math.floor(s/3600))*60)),"toTime"),yU=a(()=>DU.version,"getPluginVersion"),LU=a(s=>`Date: ${new Date}
Application version: ${s}
Plugin version: ${yU()}

System information:
 Hostname:  ${Vn.hostname()}
 Platform:  ${Vn.platform()} ${Vn.arch()}
 Release:   ${Vn.release()}
 Uptime:    ${OU(Vn.uptime())}
 Total RAM: ${(Vn.totalmem()/1073741824).toFixed(2)} GB
 CPU Model: ${Vn.cpus()[0].model}
 CPU Clock: ${CU(Vn.cpus())} MHZ
 CPU Cores: ${Vn.cpus().length} cores

`,"getSystemInfo"),wU=a((s,e,t)=>{t.clear(),t.log("info",LU(e.appVersion),s),t.log("info",e,"connectionInfo",e.hiddenKeys)},"logInfo");FA.exports=wU});var qA=U((j2,kA)=>{kA.exports={VERSION_MAJOR:6,VERSION_MINOR:0,VERSION_PATCH:3,VERSION_SUFFIX:""}});var ir=U((Z2,HA)=>{"use strict";var ls=qA(),GA=ls.VERSION_MAJOR+"."+ls.VERSION_MINOR+"."+ls.VERSION_PATCH+ls.VERSION_SUFFIX;HA.exports={VERSION_MAJOR:ls.VERSION_MAJOR,VERSION_MINOR:ls.VERSION_MINOR,VERSION_PATCH:ls.VERSION_PATCH,VERSION_SUFFIX:ls.VERSION_SUFFIX,VERSION_STRING:GA,DEFAULT_DRIVER_NAME:"node-oracledb : "+GA,DEFAULT_ERROR_URL:"https://node-oracledb.readthedocs.io/en/latest/user_guide/installation.html",DEFAULT_MAX_SIZE_FOR_OUT_BINDS:200,CSFRM_IMPLICIT:1,CSFRM_NCHAR:2,CQN_OPCODE_ALL_OPS:0,CQN_OPCODE_ALL_ROWS:1,CQN_OPCODE_ALTER:16,CQN_OPCODE_DELETE:8,CQN_OPCODE_DROP:32,CQN_OPCODE_INSERT:2,CQN_OPCODE_UPDATE:4,DEFAULT:0,STMT_TYPE_UNKNOWN:0,STMT_TYPE_SELECT:1,STMT_TYPE_UPDATE:2,STMT_TYPE_DELETE:3,STMT_TYPE_INSERT:4,STMT_TYPE_CREATE:5,STMT_TYPE_DROP:6,STMT_TYPE_ALTER:7,STMT_TYPE_BEGIN:8,STMT_TYPE_DECLARE:9,STMT_TYPE_CALL:10,STMT_TYPE_EXPLAIN_PLAN:15,STMT_TYPE_MERGE:16,STMT_TYPE_ROLLBACK:17,STMT_TYPE_COMMIT:21,SHUTDOWN_MODE_DEFAULT:0,SHUTDOWN_MODE_TRANSACTIONAL:1,SHUTDOWN_MODE_TRANSACTIONAL_LOCAL:2,SHUTDOWN_MODE_IMMEDIATE:3,SHUTDOWN_MODE_ABORT:4,SHUTDOWN_MODE_FINAL:5,STARTUP_MODE_DEFAULT:0,STARTUP_MODE_FORCE:1,STARTUP_MODE_RESTRICT:2,SUBSCR_EVENT_TYPE_SHUTDOWN:2,SUBSCR_EVENT_TYPE_SHUTDOWN_ANY:3,SUBSCR_EVENT_TYPE_STARTUP:1,SUBSCR_EVENT_TYPE_DEREG:5,SUBSCR_EVENT_TYPE_OBJ_CHANGE:6,SUBSCR_EVENT_TYPE_QUERY_CHANGE:7,SUBSCR_EVENT_TYPE_AQ:100,SUBSCR_GROUPING_CLASS_TIME:1,SUBSCR_GROUPING_TYPE_SUMMARY:1,SUBSCR_GROUPING_TYPE_LAST:2,SUBSCR_NAMESPACE_AQ:1,SUBSCR_NAMESPACE_DBCHANGE:2,SUBSCR_QOS_BEST_EFFORT:16,SUBSCR_QOS_DEREG_NFY:2,SUBSCR_QOS_QUERY:8,SUBSCR_QOS_RELIABLE:1,SUBSCR_QOS_ROWIDS:4,SYSASM:32768,SYSBACKUP:131072,SYSDBA:2,SYSDG:262144,SYSKM:524288,SYSOPER:4,SYSPRELIM:8,SYSRAC:1048576,BIND_IN:3001,BIND_INOUT:3002,BIND_OUT:3003,OUT_FORMAT_ARRAY:4001,OUT_FORMAT_OBJECT:4002,SODA_COLL_MAP_MODE:5001,POOL_STATUS_OPEN:6e3,POOL_STATUS_DRAINING:6001,POOL_STATUS_CLOSED:6002,POOL_STATUS_RECONFIGURING:6003,PURITY_DEFAULT:0,PURITY_NEW:1,PURITY_SELF:2,AQ_DEQ_NO_WAIT:0,AQ_DEQ_WAIT_FOREVER:4294967295,AQ_DEQ_MODE_BROWSE:1,AQ_DEQ_MODE_LOCKED:2,AQ_DEQ_MODE_REMOVE:3,AQ_DEQ_MODE_REMOVE_NO_DATA:4,AQ_DEQ_NAV_FIRST_MSG:1,AQ_DEQ_NAV_NEXT_TRANSACTION:2,AQ_DEQ_NAV_NEXT_MSG:3,AQ_MSG_DELIV_MODE_PERSISTENT:1,AQ_MSG_DELIV_MODE_BUFFERED:2,AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED:3,AQ_MSG_STATE_READY:0,AQ_MSG_STATE_WAITING:1,AQ_MSG_STATE_PROCESSED:2,AQ_MSG_STATE_EXPIRED:3,AQ_VISIBILITY_IMMEDIATE:1,AQ_VISIBILITY_ON_COMMIT:2,TPC_BEGIN_JOIN:2,TPC_BEGIN_NEW:1,TPC_BEGIN_PROMOTE:8,TPC_BEGIN_RESUME:4,TPC_END_NORMAL:0,TPC_END_SUSPEND:1048576}});var Ee=U((ev,Kp)=>{"use strict";var BU=require("util"),KA="NJS",WA=2,$A=3,tl=4,rl=5,nl=7,sl=9,zA=10,XA=11,QA=12,JA=13,jA=15,ZA=16,ed=17,td=18,rd=19,nd=21,sd=22,id=23,od=24,ad=34,_d=35,cd=36,ld=37,Td=40,ud=41,Ed=42,hd=43,Sd=44,Nd=45,fd=46,Ad=47,dd=52,pd=55,md=56,Pd=57,Rd=58,Id=59,Dd=60,gd=61,Cd=62,Od=63,yd=64,Ld=65,wd=66,Bd=67,il=68,Ud=69,Yd=70,Md=75,xd=76,Vd=78,bd=80,Fd=81,vd=82,kd=83,qd=84,Gd=85,Hd=86,ol=87,al=89,Kd=90,Wd=91,$d=92,_l=95,zd=97,Xd=98,Qd=99,Jd=100,jd=101,Zd=102,ep=103,cl=104,ll=105,tp=106,Tl=107,ul=108,rp=109,np=110,sp=111,ip=112,op=113,ap=114,El=115,_p=116,cp=117,lp=118,Tp=119,up=120,Ep=121,hp=122,hl=123,Sp=125,Np=126,fp=127,Ap=128,Sl=129,dp=130,Nl=131,fl=132,Al=133,pp=134,mp=135,Pp=136,Rp=137,Ip=138,Ys=500,Dp=501,gp=503,Cp=504,Op=505,yp=506,Lp=507,wp=508,Bp=509,Up=510,Yp=511,Mp=512,xp=513,Vp=514,bp=515,Fp=516,vp=517,kp=518,qp=519,Gp=520,Hp=521,Gt=new Map;Gt.set("DPI-1010",Ys);Gt.set("DPI-1024",[fl,"at index ([0-9]+) does"]);Gt.set("DPI-1040",ul);Gt.set("DPI-1044",El);Gt.set("DPI-1055",ll);Gt.set("DPI-1063",_l);Gt.set("DPI-1067",[hl,"call timeout of ([0-9]+) ms"]);Gt.set("DPI-1080",Ys);Gt.set("OCI-22303",[Sl,'type "([^"]*"."[^"]*)"']);Gt.set("OCI-22164",Al);Gt.set("OCI-22165",[Nl,/index \[([0-9]+)\] must be in the range of \[([0-9]+)\] to \[([0-9]+)\]/]);Gt.set("ORA-00028",Ys);Gt.set("ORA-00600",Ys);Gt.set("ORA-24338",Tl);Gt.set("ORA-24422",cl);Gt.set("ORA-25708",ol);var k=new Map;k.set(WA,"invalid pool");k.set($A,"invalid connection");k.set(tl,'invalid value for property "%s"');k.set(rl,"invalid value for parameter %d");k.set(nl,'invalid value for "%s" in parameter %d');k.set(sl,"invalid number of parameters");k.set(zA,"unsupported data type %d in column %d");k.set(XA,"encountered bind value and type mismatch");k.set(QA,"encountered invalid bind data type in parameter %d");k.set(JA,"invalid bind direction");k.set(jA,"type was not specified for conversion");k.set(ZA,"buffer is too small for OUT binds");k.set(ed,"concurrent operations on ResultSet are not allowed");k.set(td,"invalid ResultSet");k.set(rd,"ResultSet cannot be returned for non-query statements");k.set(nd,"invalid type for conversion specified");k.set(sd,"invalid Lob");k.set(id,"concurrent operations on a Lob are not allowed");k.set(od,"memory allocation failed");k.set(ad,"data type is unsupported for array bind");k.set(_d,"maxArraySize is required for IN OUT array bind");k.set(cd,'length of given array is greater than "maxArraySize"');k.set(ld,'invalid data type at array index %d for bind ":%s"');k.set(Td,'connection request timeout. Request exceeded "queueTimeout" of %d');k.set(ud,"cannot convert ResultSet to QueryStream after invoking methods");k.set(Ed,"cannot invoke ResultSet methods after converting to QueryStream");k.set(hd,"ResultSet already converted to QueryStream");k.set(Sd,'bind object must contain one of the following attributes: "dir", "type", "maxSize", or "val"');k.set(Nd,"cannot load a node-oracledb Thick mode binary for Node.js. Please try using Thin mode. %s");k.set(fd,'pool alias "%s" already exists in the connection pool cache');k.set(Ad,'pool alias "%s" not found in connection pool cache');k.set(dd,"invalid data type at array index %d for bind position %d");k.set(pd,"binding by position and name cannot be mixed");k.set(md,"maxSize for bind position %d must be specified and be greater than zero");k.set(Pd,'maxSize for bind "%s" must be specified and greater than zero');k.set(Rd,"maxSize of %d is too small for value of length %d in row %d");k.set(Id,"type must be specified for bind position %d");k.set(Dd,'type must be specified for bind "%s"');k.set(gd,"invalid subscription");k.set(Cd,"subscription notification callback missing");k.set(Od,"subscription notification SQL missing");k.set(yd,"connection pool is closing");k.set(Ld,"connection pool was closed");k.set(wd,"invalid SODA document cursor");k.set(Bd,"a pre-built node-oracledb Thick mode binary was not found for %s");k.set(il,"invalid error number %d supplied");k.set(Ud,"node-oracledb %s requires Node.js %s or later");k.set(Yd,"message must be a string, buffer, database object or an object containing a payload property which itself is a string, buffer or database object");k.set(Md,'only one of "connectString" and "connectionString" can be used');k.set(xd,'connection request rejected. Pool queue length "queueMax" %d reached');k.set(Vd,"unsupported data type %d in JSON value");k.set(bd,'only one of "user" and "username" can be used');k.set(Fd,"concurrent operations on a connection are disabled");k.set(vd,"connection pool is being reconfigured");k.set(kd,"pool statistics are not enabled");k.set(qd,"invalid access token");k.set(Gd,'invalid connection pool configuration with token-based authentication. The "homogeneous" and "externalAuth" attributes must be set to true');k.set(Hd,'invalid standalone configuration with token-based authentication. The "externalAuth" attribute must be set to true');k.set(ol,"access token has expired");k.set(al,"%s is not supported by node-oracledb in Thin mode");k.set(Kd,"initOracleClient() was already called with different arguments");k.set(Wd,"file %s is missing");k.set($d,'"poolMax" %d must be greater than or equal to "poolMin" %d');k.set(_l,'setting "batchErrors" or "dmlRowCounts" to true is only permitted for DML statements');k.set(zd,'no bind placeholder named ":%s" was found in the statement text');k.set(Xd,"%s positional bind values are required but %s were provided");k.set(Qd,"internal error: buffer of length %s insufficient to hold %s bytes");k.set(Jd,"national character set id %d is not supported by node-oracledb in Thin mode");k.set(jd,"no credentials specified");k.set(Zd,"unexpected end of data: want %d bytes but only %d bytes are available");k.set(ep,"unexpected message type %d received at position %d of packet %d");k.set(cl,"connection pool cannot be closed because connections are busy");k.set(ll,"value is not a number (NaN) and cannot be used in Oracle Database numbers");k.set(tp,"internal error: %s");k.set(Tl,"invalid cursor");k.set(ul,"LOB was already closed");k.set(rp,"invalid type number %d");k.set(np,"invalid Oracle type number %d [csfrm: %d]");k.set(sp,"internal error: read a negative integer when expecting a positive integer at position %d of packet %d");k.set(ip,"internal error: read integer of length %d when expecting integer of no more than length %d at position %d of packet %d");k.set(op,"unexpected data received: %s");k.set(ap,"OSON field names may not exceed 255 UTF-8 encoded bytes");k.set(El,"value cannot be represented as an Oracle Database number");k.set(_p,"password verifier type 0x%s is not supported by node-oracledb in Thin mode");k.set(cp,"invalid private key. Headers and footers are not allowed");k.set(lp,"node-oracledb Thick mode cannot be enabled because a Thin mode connection has already been created");k.set(Tp,"conversion from type %s to type %s is not supported");k.set(up,"fetchTypeHandler return value must be an object");k.set(Ep,'fetchTypeHandler return value attribute "type" must be a valid database type');k.set(hp,'fetchTypeHandler return value attribute "converter" must be a function');k.set(hl,"call timeout of %d ms exceeded");k.set(Sp,'"connectString" cannot be empty or undefined. Bequeath connections are not supported in Thin mode');k.set(Np,"OSON version %s is not supported");k.set(fp,"internal error: unknown server side piggyback opcode %s");k.set(Ap,'internal error: unknown column type name "%s"');k.set(Sl,'invalid object type name: "%s"');k.set(dp,"Oracle TDS data type %d is not supported");k.set(Nl,"given index %d must be in the range of %d to %d");k.set(fl,"element at index %d does not exist");k.set(Al,"cannot delete elements of a VARRAY");k.set(pp,"value is of wrong type for attribute %s of object %s");k.set(mp,"value is of wrong type for an element of object %s");k.set(Pp,"user name and password cannot be set when using external authentication");k.set(Rp,'a bind variable replacement value for placeholder ":%s" was not provided');k.set(Ip,"connections to this database server version are not supported by node-oracledb in Thin mode");k.set(Ys,"connection to the Oracle Database was broken");k.set(Dp,`connection to host %s port %d terminated unexpectedly. (CONNECTION_ID=%s)
%s`);k.set(gp,`connection to host %s port %d could not be established. (CONNECTION_ID=%s)
%s`);k.set(Cp,`connection establishment through a web proxy at host %s port %d failed. (CONNECTION_ID=%s)
%s`);k.set(Op,"unable to initiate TLS connection. Please check if wallet credentials are valid");k.set(yp,`connection to host %s port %d encountered TLS handshake failure. (CONNECTION_ID=%s)
%s`);k.set(Lp,"TLS detected an invalid certificate. Server DN in certificate does not match the specified DN");k.set(wp,"TLS detected an invalid certificate. %s not present in certificate");k.set(Bp,"internal error: invalid packet type or malformed packet received");k.set(Up,'connection to host %s port %d timed out. Request exceeded "%s" of %d seconds. (CONNECTION_ID=%s)');k.set(Yp,`connection to listener at host %s port %d was refused. (CONNECTION_ID=%s)
Cause: %s`);k.set(Mp,`invalid connection string parameters.
%s`);k.set(xp,"error received through in-band notification: %s");k.set(Vp,"syntax error in connection string");k.set(bp,"error in Easy Connect connection string: %s: %s");k.set(Fp,"no configuration directory set or available to search for tnsnames.ora");k.set(vp,'cannot connect to Oracle Database. Unable to find "%s" in "%s"');k.set(kp,'cannot connect to Oracle Database. Service "%s" is not registered with the listener at host %s port %s. (CONNECTION_ID=%s)');k.set(qp,'cannot connect to Oracle Database. SID "%s" is not registered with the listener at host %s port %s. (CONNECTION_ID=%s)');k.set(Gp,"cannot connect to Oracle Database. File tnsnames.ora not found in %s");k.set(Hp,"connection to host %s port %d received end-of-file on communication channel. (CONNECTION_ID=%s)");function to(s){if(!s){let e=Array.prototype.slice.call(arguments,1);dl(...e)}}a(to,"assert");function UU(s,e,t){to(s.length>=e&&s.length<=t,sl)}a(UU,"assertArgCount");function YU(s,e,t){s[t]!==void 0&&li(typeof s[t]=="boolean",e,t)}a(YU,"assertParamPropBool");function MU(s,e,t){s[t]!==void 0&&li(typeof s[t]=="function",e,t)}a(MU,"assertParamPropFunction");function xU(s,e,t){s[t]!==void 0&&li(Number.isInteger(s[t]),e,t)}a(xU,"assertParamPropInt");function VU(s,e,t){s[t]!==void 0&&li(Number.isInteger(s[t])&&s[t]>=0,e,t)}a(VU,"assertParamPropUnsignedInt");function bU(s,e,t){s[t]!==void 0&&li(typeof s[t]=="string",e,t)}a(bU,"assertParamPropString");function li(s,e,t){to(s,nl,t,e)}a(li,"assertParamPropValue");function FU(s,e){to(s,rl,e)}a(FU,"assertParamValue");function vU(s,e){to(s,tl,e)}a(vU,"assertPropValue");function Pa(s){let e=k.get(s),t=[...arguments];e||(t=[void 0,s],s=il,e=k.get(s));let n=s.toString().padStart(3,"0"),o=`${KA}-${n}`;t[0]=`${o}: ${e}`;let _=new Error(BU.format(...t));return _.code=o,Error.captureStackTrace(_,Pa),_}a(Pa,"getErr");function dl(){throw Pa(...arguments)}a(dl,"throwErr");function kU(s){dl(al,s)}a(kU,"throwNotImplemented");function qU(s,e){if(!s.code){let t=s.message.indexOf(":");if(t>0&&(s.code=s.message.substr(0,t),Gt.has(s.code))){let n=[],o,_=Gt.get(s.code);if(typeof _=="number")o=_;else{o=_[0];let u=_[1],h=s.message.match(u);h&&(n=h.slice(1))}let T=Pa(o,...n);s.code=T.code,s.message=T.message+`
`+s.message}}return s.requiresStackCapture&&(delete s.requiresStackCapture,Error.captureStackTrace(s,e)),s}a(qU,"transformErr");Kp.exports={ERR_INVALID_POOL:WA,ERR_INVALID_CONNECTION:$A,ERR_INVALID_PROPERTY_VALUE:tl,ERR_INVALID_PARAMETER_VALUE:rl,ERR_INVALID_PROPERTY_VALUE_IN_PARAM:nl,ERR_INVALID_NUMBER_OF_PARAMETERS:sl,ERR_UNSUPPORTED_DATA_TYPE:zA,ERR_BIND_VALUE_AND_TYPE_MISMATCH:XA,ERR_INVALID_BIND_DATA_TYPE:QA,ERR_INVALID_BIND_DIRECTION:JA,ERR_NO_TYPE_FOR_CONVERSION:jA,ERR_INSUFFICIENT_BUFFER_FOR_BINDS:ZA,ERR_BUSY_RS:ed,ERR_INVALID_RS:td,ERR_NOT_A_QUERY:rd,ERR_INVALID_TYPE_FOR_CONVERSION:nd,ERR_INVALID_LOB:sd,ERR_BUSY_LOB:id,ERR_INSUFFICIENT_MEMORY:od,ERR_INVALID_TYPE_FOR_ARRAY_BIND:ad,ERR_REQUIRED_MAX_ARRAY_SIZE:_d,ERR_INVALID_ARRAY_SIZE:cd,ERR_INCOMPATIBLE_TYPE_ARRAY_BIND:ld,ERR_CONN_REQUEST_TIMEOUT:Td,ERR_CANNOT_CONVERT_RS_TO_STREAM:ud,ERR_CANNOT_INVOKE_RS_METHODS:Ed,ERR_RS_ALREADY_CONVERTED:hd,ERR_INVALID_BIND_UNIT:Sd,ERR_CANNOT_LOAD_BINARY:Nd,ERR_POOL_WITH_ALIAS_ALREADY_EXISTS:fd,ERR_POOL_WITH_ALIAS_NOT_FOUND:Ad,ERR_INCOMPATIBLE_TYPE_ARRAY_INDEX_BIND:dd,ERR_MIXED_BIND:pd,ERR_MISSING_MAX_SIZE_BY_POS:md,ERR_MISSING_MAX_SIZE_BY_NAME:Pd,ERR_MAX_SIZE_TOO_SMALL:Rd,ERR_MISSING_TYPE_BY_POS:Id,ERR_MISSING_TYPE_BY_NAME:Dd,ERR_INVALID_SUBSCR:gd,ERR_MISSING_SUBSCR_CALLBACK:Cd,ERR_MISSING_SUBSCR_SQL:Od,ERR_POOL_CLOSING:yd,ERR_POOL_CLOSED:Ld,ERR_INVALID_SODA_DOC_CURSOR:wd,ERR_NO_BINARY_AVAILABLE:Bd,ERR_INVALID_ERR_NUM:il,ERR_NODE_TOO_OLD:Ud,ERR_INVALID_AQ_MESSAGE:Yd,ERR_DBL_CONNECT_STRING:Md,ERR_QUEUE_MAX_EXCEEDED:xd,ERR_UNSUPPORTED_DATA_TYPE_IN_JSON:Vd,ERR_DBL_USER:bd,ERR_CONCURRENT_OPS:Fd,ERR_POOL_RECONFIGURING:vd,ERR_POOL_STATISTICS_DISABLED:kd,ERR_TOKEN_BASED_AUTH:qd,ERR_POOL_TOKEN_BASED_AUTH:Gd,ERR_CONN_TOKEN_BASED_AUTH:Hd,ERR_TOKEN_HAS_EXPIRED:ol,ERR_NOT_IMPLEMENTED:al,ERR_INIT_ORACLE_CLIENT_ARGS:Kd,ERR_MISSING_FILE:Wd,ERR_INVALID_NUMBER_OF_CONNECTIONS:$d,ERR_EXEC_MODE_ONLY_FOR_DML:_l,ERR_CONNECTION_CLOSED:Ys,ERR_CONNECTION_LOSTCONTACT:Dp,ERR_CONNECTION_INCOMPLETE:gp,ERR_PROXY_CONNECTION_FAILURE:Cp,ERR_TLS_INIT_FAILURE:Op,ERR_TLS_AUTH_FAILURE:yp,ERR_TLS_DNMATCH_FAILURE:Lp,ERR_TLS_HOSTMATCH_FAILURE:wp,ERR_INVALID_PACKET:Bp,ERR_CONNECTION_TIMEDOUT:Up,ERR_CONNECTION_REFUSED:Yp,ERR_INVALID_CONNECT_STRING_PARAMETERS:Mp,ERR_CONNECTION_INBAND:xp,ERR_INVALID_CONNECT_STRING_SYNTAX:Vp,ERR_INVALID_EZCONNECT_SYNTAX:bp,ERR_NO_CONFIG_DIR:Fp,ERR_TNS_ENTRY_NOT_FOUND:vp,ERR_CONNECTION_EOF:Hp,ERR_INVALID_BIND_NAME:zd,ERR_WRONG_NUMBER_OF_POSITIONAL_BINDS:Xd,ERR_BUFFER_LENGTH_INSUFFICIENT:Qd,ERR_NCHAR_CS_NOT_SUPPORTED:Jd,ERR_MISSING_CREDENTIALS:jd,ERR_UNEXPECTED_END_OF_DATA:Zd,ERR_UNEXPECTED_MESSAGE_TYPE:ep,ERR_POOL_HAS_BUSY_CONNECTIONS:cl,ERR_INTERNAL:tp,ERR_INVALID_REF_CURSOR:Tl,ERR_UNSUPPORTED_VERIFIER_TYPE:_p,ERR_NAN_VALUE:ll,ERR_LOB_CLOSED:ul,ERR_ORACLE_NUMBER_NO_REPR:El,ERR_INVALID_SERVICE_NAME:kp,ERR_INVALID_SID:qp,ERR_TNS_NAMES_FILE_MISSING:Gp,ERR_INVALID_TYPE_NUM:rp,ERR_INVALID_ORACLE_TYPE_NUM:np,ERR_UNEXPECTED_NEGATIVE_INTEGER:sp,ERR_INTEGER_TOO_LARGE:ip,ERR_UNEXPECTED_DATA:op,ERR_OSON_FIELD_NAME_LIMITATION:ap,ERR_OSON_VERSION_NOT_SUPPORTED:Np,ERR_INVALID_PRIVATE_KEY:cp,ERR_THIN_CONNECTION_ALREADY_CREATED:lp,ERR_UNSUPPORTED_CONVERSION:Tp,ERR_FETCH_TYPE_HANDLER_RETURN_VALUE:up,ERR_FETCH_TYPE_HANDLER_TYPE:Ep,ERR_FETCH_TYPE_HANDLER_CONVERTER:hp,ERR_CALL_TIMEOUT_EXCEEDED:hl,ERR_EMPTY_CONNECT_STRING:Sp,ERR_UNKOWN_SERVER_SIDE_PIGGYBACK:fp,ERR_UNKNOWN_COLUMN_TYPE_NAME:Ap,ERR_INVALID_OBJECT_TYPE_NAME:Sl,ERR_TDS_TYPE_NOT_SUPPORTED:dp,ERR_INVALID_COLL_INDEX_SET:Nl,ERR_INVALID_COLL_INDEX_GET:fl,ERR_DELETE_ELEMENTS_OF_VARRAY:Al,ERR_WRONG_VALUE_FOR_DBOBJECT_ATTR:pp,ERR_WRONG_VALUE_FOR_DBOBJECT_ELEM:mp,ERR_WRONG_CRED_FOR_EXTAUTH:Pp,ERR_MISSING_BIND_VALUE:Rp,ERR_SERVER_VERSION_NOT_SUPPORTED:Ip,ERR_CONNECTION_CLOSED_CODE:`${KA}-${Ys}`,assert:to,assertArgCount:UU,assertParamPropBool:YU,assertParamPropFunction:MU,assertParamPropInt:xU,assertParamPropString:bU,assertParamPropUnsignedInt:VU,assertParamPropValue:li,assertParamValue:FU,assertPropValue:vU,getErr:Pa,throwErr:dl,throwNotImplemented:kU,transformErr:qU}});var Ir=U((rv,zp)=>{"use strict";var Ss=ir(),hi=Ee(),GU=require("util"),Wp=new Map,$p=new Map,Jr=new Map,Dl=class Dl{constructor(e,t,n,o){this.num=e,this.name=t,this.columnTypeName=n,this._bufferSizeFactor=o.bufferSizeFactor||0,this._oraTypeNum=o.oraTypeNum||0,this._csfrm=o.csfrm||0,Wp.set(e,this);let _=(o.csfrm||0)*256+o.oraTypeNum;$p.set(_,this),Jr.set(n,this)}[Symbol.toPrimitive](e){switch(e){case"number":return this.num;default:return this.toString()}}[GU.inspect.custom](){return this.toString()}toString(){return`[DbType ${this.name}]`}};a(Dl,"DbType");var qe=Dl;function HU(s){let e=Jr.get(s);return e||hi.throwErr(hi.ERR_UNKNOWN_COLUMN_TYPE_NAME,s),e}a(HU,"getTypeByColumnTypeName");function KU(s){let e=Wp.get(s);return e||hi.throwErr(hi.ERR_INVALID_TYPE_NUM,s),e}a(KU,"getTypeByNum");function WU(s,e){let t=(e||0)*256+s,n=$p.get(t);return n||hi.throwErr(hi.ERR_INVALID_ORACLE_TYPE_NUM,s,e),n}a(WU,"getTypeByOraTypeNum");var pl=new qe(2020,"DB_TYPE_BFILE","BFILE",{oraTypeNum:114,bufferSizeFactor:112}),Ra=new qe(2008,"DB_TYPE_BINARY_DOUBLE","BINARY_DOUBLE",{oraTypeNum:101,bufferSizeFactor:8}),Ia=new qe(2007,"DB_TYPE_BINARY_FLOAT","BINARY_FLOAT",{oraTypeNum:100,bufferSizeFactor:4}),ro=new qe(2009,"DB_TYPE_BINARY_INTEGER","BINARY_INTEGER",{oraTypeNum:3,bufferSizeFactor:22}),Da=new qe(2019,"DB_TYPE_BLOB","BLOB",{oraTypeNum:113,bufferSizeFactor:112}),ga=new qe(2022,"DB_TYPE_BOOLEAN","BOOLEAN",{oraTypeNum:252,bufferSizeFactor:4}),Ti=new qe(2003,"DB_TYPE_CHAR","CHAR",{oraTypeNum:96,csfrm:Ss.CSFRM_IMPLICIT,bufferSizeFactor:4}),Ca=new qe(2017,"DB_TYPE_CLOB","CLOB",{oraTypeNum:112,csfrm:Ss.CSFRM_IMPLICIT,bufferSizeFactor:112}),ml=new qe(2021,"DB_TYPE_CURSOR","CURSOR",{oraTypeNum:102,bufferSizeFactor:4}),Oa=new qe(2011,"DB_TYPE_DATE","DATE",{oraTypeNum:12,bufferSizeFactor:7}),Pl=new qe(2015,"DB_TYPE_INTERVAL_DS","INTERVAL DAY TO SECOND",{oraTypeNum:183,bufferSizeFactor:11}),Rl=new qe(2016,"DB_TYPE_INTERVAL_YM","INTERVAL YEAR TO MONTH",{oraTypeNum:182}),ya=new qe(2027,"DB_TYPE_JSON","JSON",{oraTypeNum:119}),bn=new qe(2024,"DB_TYPE_LONG","LONG",{oraTypeNum:8,csfrm:Ss.CSFRM_IMPLICIT,bufferSizeFactor:2**31-1}),Ts=new qe(2031,"DB_TYPE_LONG_NVARCHAR","LONG",{oraTypeNum:8,csfrm:Ss.CSFRM_NCHAR,bufferSizeFactor:2**31-1}),us=new qe(2025,"DB_TYPE_LONG_RAW","LONG RAW",{oraTypeNum:24,bufferSizeFactor:2**31-1}),Es=new qe(2004,"DB_TYPE_NCHAR","NCHAR",{oraTypeNum:96,csfrm:Ss.CSFRM_NCHAR,bufferSizeFactor:4}),La=new qe(2018,"DB_TYPE_NCLOB","NCLOB",{oraTypeNum:112,csfrm:Ss.CSFRM_NCHAR,bufferSizeFactor:112}),vn=new qe(2010,"DB_TYPE_NUMBER","NUMBER",{oraTypeNum:2,bufferSizeFactor:22}),Fn=new qe(2002,"DB_TYPE_NVARCHAR","NVARCHAR2",{oraTypeNum:1,csfrm:Ss.CSFRM_NCHAR,bufferSizeFactor:4}),Il=new qe(2023,"DB_TYPE_OBJECT","OBJECT",{oraTypeNum:109}),ui=new qe(2006,"DB_TYPE_RAW","RAW",{oraTypeNum:23,bufferSizeFactor:1}),Ei=new qe(2005,"DB_TYPE_ROWID","ROWID",{oraTypeNum:11,bufferSizeFactor:18}),wa=new qe(2012,"DB_TYPE_TIMESTAMP","TIMESTAMP",{oraTypeNum:180,bufferSizeFactor:11}),dn=new qe(2014,"DB_TYPE_TIMESTAMP_LTZ","TIMESTAMP WITH LOCAL TIME ZONE",{oraTypeNum:231,bufferSizeFactor:11}),hs=new qe(2013,"DB_TYPE_TIMESTAMP_TZ","TIMESTAMP WITH TIME ZONE",{oraTypeNum:181,bufferSizeFactor:13}),Ba=new qe(2030,"DB_TYPE_UROWID","UROWID",{oraTypeNum:208}),We=new qe(2001,"DB_TYPE_VARCHAR","VARCHAR2",{oraTypeNum:1,csfrm:Ss.CSFRM_IMPLICIT,bufferSizeFactor:4}),$U=new Map([[Ra,new Map([[We,We]])],[Ia,new Map([[We,We]])],[Da,new Map([[ui,us],[us,us]])],[Ti,new Map([[We,We]])],[Ca,new Map([[We,bn],[bn,bn]])],[Oa,new Map([[We,We],[dn,dn]])],[ya,new Map([[We,We]])],[bn,new Map([[We,bn]])],[us,new Map([[ui,us]])],[Es,new Map([[Ti,Es],[We,Fn],[Fn,Fn]])],[La,new Map([[We,Ts],[Fn,Ts],[bn,Ts],[Ts,Ts]])],[vn,new Map([[We,We]])],[Fn,new Map([[Ti,Es],[Es,Es],[We,Fn]])],[ui,new Map([[We,We]])],[Ei,new Map([[We,Ei]])],[wa,new Map([[We,We],[dn,dn]])],[dn,new Map([[We,We],[hs,hs]])],[hs,new Map([[We,We],[dn,dn]])],[Ba,new Map([[We,Ei]])]]),zU=new Map([[pl,pl],[Ra,Ra],[Ia,Ia],[ro,ro],[Da,Da],[ga,ga],[Ti,Ti],[Ca,Ca],[ml,ml],[Oa,Oa],[Pl,Pl],[Rl,Rl],[ya,ya],[bn,bn],[Ts,Ts],[us,us],[Es,Es],[La,La],[vn,vn],[Fn,Fn],[Il,Il],[ui,ui],[Ei,Ei],[wa,wa],[dn,hs],[hs,hs],[Ba,Ba],[We,We]]);Jr.set("DOUBLE PRECISION",vn);Jr.set("FLOAT",vn);Jr.set("INTEGER",vn);Jr.set("PL/SQL BOOLEAN",ga);Jr.set("PL/SQL BINARY INTEGER",ro);Jr.set("PL/SQL PLS INTEGER",ro);Jr.set("REAL",vn);Jr.set("SMALLINT",vn);Jr.set("TIMESTAMP WITH LOCAL TZ",dn);Jr.set("TIMESTAMP WITH TZ",hs);zp.exports={DbType:qe,DB_TYPE_BFILE:pl,DB_TYPE_BINARY_DOUBLE:Ra,DB_TYPE_BINARY_FLOAT:Ia,DB_TYPE_BINARY_INTEGER:ro,DB_TYPE_BLOB:Da,DB_TYPE_BOOLEAN:ga,DB_TYPE_CHAR:Ti,DB_TYPE_CLOB:Ca,DB_TYPE_CURSOR:ml,DB_TYPE_DATE:Oa,DB_TYPE_INTERVAL_DS:Pl,DB_TYPE_INTERVAL_YM:Rl,DB_TYPE_JSON:ya,DB_TYPE_LONG:bn,DB_TYPE_LONG_NVARCHAR:Ts,DB_TYPE_LONG_RAW:us,DB_TYPE_NCHAR:Es,DB_TYPE_NCLOB:La,DB_TYPE_NUMBER:vn,DB_TYPE_NVARCHAR:Fn,DB_TYPE_OBJECT:Il,DB_TYPE_RAW:ui,DB_TYPE_ROWID:Ei,DB_TYPE_TIMESTAMP:wa,DB_TYPE_TIMESTAMP_LTZ:dn,DB_TYPE_TIMESTAMP_TZ:hs,DB_TYPE_UROWID:Ba,DB_TYPE_VARCHAR:We,DB_TYPE_CONVERSION_MAP:$U,DB_TYPE_FETCH_TYPE_MAP:zU,getTypeByColumnTypeName:HU,getTypeByNum:KU,getTypeByOraTypeNum:WU}});var Xp=U((sv,XU)=>{XU.exports={name:"oracledb",version:"6.0.3",description:"A Node.js module for Oracle Database access from JavaScript and TypeScript",license:"(Apache-2.0 OR UPL-1.0)",homepage:"http://oracle.github.io/node-oracledb/",keywords:["Oracle","Database","official","DB","SQL","JSON","PL/SQL","SODA","OCI","API","client","library","driver","add-on","extension","binding","interface","adapter","module"],repository:{type:"git",url:"git://github.com/oracle/node-oracledb.git"},scripts:{install:"node package/install.js",prune:"node package/prunebinaries.js"},engines:{node:">=14.6"},maintainers:[{name:"Oracle Corp."}],bugs:{url:"https://github.com/oracle/node-oracledb/issues"},main:"./index.js"}});var gr=U((iv,tm)=>{"use strict";var{Buffer:no}=require("buffer"),Bt=Ee(),Dr=require("process"),QU=require("util"),JU=Ir(),Qp;try{Qp=Xp()}catch{Bt.throwErr(Bt.ERR_MISSING_FILE,"package.json")}var Jp=Qp.version,jU="build/Release",ZU="oracledb-"+Jp+"-"+Dr.platform+"-"+Dr.arch+".node",eY="package/Staging";function jp(){return"Node-oracledb installation instructions: https://node-oracledb.readthedocs.io/en/latest/user_guide/installation.html"}a(jp,"getInstallURL");function tY(){let s,e,t=jp()+`
`;return Dr.platform==="linux"?(Dr.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html
`,s="64-bit"):Dr.arch==="x32"?(e=`https://www.oracle.com/database/technologies/instant-client/linux-x86-32-downloads.html
`,s="32-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,s=Dr.arch),t+="You must have Linux "+s+` Oracle Client libraries configured with ldconfig, or in LD_LIBRARY_PATH.
`,t+=`If you do not have Oracle Database on this computer, then install the Instant Client Basic or Basic Light package from 
`,t+=e):Dr.platform==="darwin"?(Dr.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/macos-intel-x86-downloads.html
`,s="64-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,s=Dr.arch),t+="You must have macOS "+s+` Oracle Instant Client Basic or Basic Light package libraries in
`,t+=`/usr/local/lib or set by calling oracledb.initOracleClient({libDir: "/my/instant_client_directory"}).
`,t+="Oracle Instant Client can be downloaded from "+e):Dr.platform==="win32"?(Dr.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html
`,s="64-bit"):Dr.arch==="x32"?(e=`https://www.oracle.com/database/technologies/instant-client/microsoft-windows-32-downloads.html
`,s="32-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,s=Dr.arch),t+="You must have Windows "+s+` Oracle Client libraries in your PATH environment variable.
`,t+=`If you do not have Oracle Database on this computer, then install the Instant Client Basic or Basic Light package from
`,t+=e,t+=`A Microsoft Visual Studio Redistributable suitable for your Oracle client library version must be available.
`):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,t+="You must have "+Dr.arch+` Oracle Client libraries in your operating system library search path.
`,t+=`If you do not have Oracle Database on this computer, then install an Instant Client Basic or Basic Light package from: 
`,t+=e),t}a(tY,"getInstallHelp");function gl(s){let e=a(function(){if(typeof arguments[arguments.length-1]!="function")return s.apply(this,arguments).catch(a(function o(_){throw Bt.transformErr(_,o)},"stackCapture"));let t=Array.prototype.slice.call(arguments,0,arguments.length-1),n=arguments[arguments.length-1];s.apply(this,t).then(function(o){n(null,o)},a(function o(_){n(Bt.transformErr(_,o))},"stackCapture"))},"wrapper");return s.name&&Object.defineProperty(e,"name",{value:s.name}),e}a(gl,"callbackify");function Cl(s){return async function(){let e;this._impl&&(e=this._impl._getConnImpl(),await e._acquireLock());try{return await s.apply(this,arguments)}finally{e&&e._releaseLock()}}}a(Cl,"serialize");function Zp(s,e){return async function(){this._isActive&&Bt.throwErr(e),this._isActive=!0;try{return await s.apply(this,arguments)}finally{this._isActive=!1}}}a(Zp,"preventConcurrent");function rY(s){let e=1,t;typeof arguments[1]=="number"&&(e=2,t=arguments[1]);for(let n=e;n<arguments.length;n++){let o=arguments[n],_=s[o];t?s[o]=gl(Zp(Cl(_),t)):s[o]=gl(Cl(_))}}a(rY,"wrapFns");function nY(s){if(!Array.isArray(s))return!1;for(let e=0;e<s.length;e++)if(typeof s[e]!="string")return!1;return!0}a(nY,"isArrayOfStrings");function yl(s){return s!==null&&typeof s=="object"}a(yl,"isObject");function sY(s){return s!==null&&typeof s=="object"||Array.isArray(s)}a(sY,"isObjectOrArray");function iY(s){if(!Array.isArray(s))return!1;for(let e=0;e<s.length;e++){let t=s[e];if(!(typeof t=="string"||typeof t=="number"||no.isBuffer(t)||QU.isDate(t)))return!1}return!0}a(iY,"isShardingKey");function em(s){return s!=null&&s._sodaDocumentMarker}a(em,"isSodaDocument");function oY(s){return yl(s)&&Number.isInteger(s.formatId)&&(no.isBuffer(s.globalTransactionId)||typeof s.globalTransactionId=="string")&&(no.isBuffer(s.branchQualifier)||typeof s.branchQualifier=="string")}a(oY,"isXid");function aY(s){return em(s)?s._impl:(Bt.assertParamValue(yl(s),1),no.from(JSON.stringify(s)))}a(aY,"verifySodaDoc");function Ol(s){Bt.assert(typeof s=="string",Bt.ERR_TOKEN_BASED_AUTH),s.split(".")[1]===void 0&&Bt.throwErr(Bt.ERR_TOKEN_BASED_AUTH);let t=s.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=no.from(t,"base64").toString("ascii"),_=JSON.parse(o).exp;return Bt.assert(_!=null,Bt.ERR_TOKEN_BASED_AUTH),_=_*1e3,new Date().getTime()>_}a(Ol,"isTokenExpired");function _Y(s){switch(typeof s){case"string":return s===""&&Bt.throwErr(Bt.ERR_TOKEN_BASED_AUTH),!Ol(s);case"object":return(s.token===void 0||s.token===""||s.privateKey===void 0||s.privateKey==="")&&Bt.throwErr(Bt.ERR_TOKEN_BASED_AUTH),!Ol(s.token);default:Bt.throwErr(Bt.ERR_TOKEN_BASED_AUTH)}}a(_Y,"isTokenValid");function cY(s){return Bt.assert(typeof s.privateKey=="string",Bt.ERR_TOKEN_BASED_AUTH),!(s.privateKey.startsWith("-----BEGIN PRIVATE KEY-----")||s.privateKey.endsWith("-----END PRIVATE KEY-----"))}a(cY,"isPrivateKeyValid");function lY(s,e){let t=e+"Class",n=e+"Name",o=s[t],_=s[e];typeof _=="number"&&(_=s[e]=JU.getTypeByNum(_)),o?s[n]=o.prototype.fqn:_&&(s[n]=_.columnTypeName)}a(lY,"addTypeProperties");tm.exports={BINARY_FILE:ZU,PACKAGE_JSON_VERSION:Jp,RELEASE_DIR:jU,STAGING_DIR:eY,addTypeProperties:lY,callbackify:gl,getInstallURL:jp,getInstallHelp:tY,isArrayOfStrings:nY,isObject:yl,isObjectOrArray:sY,isPrivateKeyValid:cY,isShardingKey:iY,isSodaDocument:em,isTokenExpired:Ol,isTokenValid:_Y,isXid:oY,preventConcurrent:Zp,serialize:Cl,verifySodaDoc:aY,wrapFns:rY}});var nm=U((av,rm)=>{"use strict";var Ht=Ee(),wl=class wl{getCondition(){Ht.throwNotImplemented("getting condition (dequeue options)")}getConsumerName(){Ht.throwNotImplemented("getting consumer name (dequeue options)")}getCorrelation(){Ht.throwNotImplemented("getting correlation (dequeue options)")}getMode(){Ht.throwNotImplemented("getting mode (dequeue options)")}getMsgId(){Ht.throwNotImplemented("getting message id (dequeue options)")}getNavigation(){Ht.throwNotImplemented("getting navigation (dequeue options)")}getTransformation(){Ht.throwNotImplemented("getting transformation (dequeue options)")}getVisibility(){Ht.throwNotImplemented("getting visibility (dequeue options)")}getWait(){Ht.throwNotImplemented("getting wait (dequeue options)")}setCondition(){Ht.throwNotImplemented("setting condition (dequeue options)")}setConsumerName(){Ht.throwNotImplemented("setting consumer name (dequeue options)")}setCorrelation(){Ht.throwNotImplemented("setting correlation (dequeue options)")}setMode(){Ht.throwNotImplemented("setting mode (dequeue options)")}setMsgId(){Ht.throwNotImplemented("setting message id (dequeue options)")}setNavigation(){Ht.throwNotImplemented("setting navigation (dequeue options)")}setTransformation(){Ht.throwNotImplemented("setting transformation (dequeue options)")}setVisibility(){Ht.throwNotImplemented("setting visibility (dequeue options)")}setWait(){Ht.throwNotImplemented("setting wait (dequeue options)")}};a(wl,"AqDeqOptionsImpl");var Ll=wl;rm.exports=Ll});var im=U((cv,sm)=>{"use strict";var Si=Ee(),Ul=class Ul{getDeliveryMode(){Si.throwNotImplemented("getting delivery mode (enqueue options)")}getTransformation(){Si.throwNotImplemented("getting transformation (enqueue options)")}getVisibility(){Si.throwNotImplemented("getting visibility (enqueue options)")}setDeliveryMode(){Si.throwNotImplemented("setting delivery mode (enqueue options)")}setTransformation(){Si.throwNotImplemented("setting transformation (enqueue options)")}setVisibility(){Si.throwNotImplemented("setting visibility (enqueue options)")}};a(Ul,"AqEnqOptionsImpl");var Bl=Ul;sm.exports=Bl});var am=U((Tv,om)=>{"use strict";var cn=Ee(),Ml=class Ml{getCorrelation(){cn.throwNotImplemented("getting correlation (message)")}getDelay(){cn.throwNotImplemented("getting delay (message)")}getDeliveryMode(){cn.throwNotImplemented("getting delivery mode (message)")}getExceptionQueue(){cn.throwNotImplemented("getting exception queue (message)")}getExpiration(){cn.throwNotImplemented("getting expiration (message)")}getMsgId(){cn.throwNotImplemented("getting message id (message)")}getNumAttempts(){cn.throwNotImplemented("getting number of attempts (message)")}getOriginalMsgId(){cn.throwNotImplemented("getting original message id (message)")}getPayload(){cn.throwNotImplemented("getting payload (message)")}getPriority(){cn.throwNotImplemented("getting priority (message)")}getState(){cn.throwNotImplemented("getting state (message)")}};a(Ml,"AqMessageImpl");var Yl=Ml;om.exports=Yl});var cm=U((Ev,_m)=>{"use strict";var Ua=Ee(),Vl=class Vl{_getConnImpl(){return this._connection}deqMany(){Ua.throwNotImplemented("dequeuing multiple items from a queue")}deqOne(){Ua.throwNotImplemented("dequeuing a single item from a queue")}enqMany(){Ua.throwNotImplemented("enqueuing multiple items from a queue")}enqOne(){Ua.throwNotImplemented("enqueuing a single item from a queue")}};a(Vl,"AqQueueImpl");var xl=Vl;_m.exports=xl});var Ya=U((Sv,lm)=>{"use strict";var Vr=Ee(),Fl=class Fl{constructor(e){this._objType=e}append(){Vr.throwNotImplemented("appending element to collection")}copy(){Vr.throwNotImplemented("copying an object")}deleteElement(){Vr.throwNotImplemented("deleting an element from a collection")}getElement(){Vr.throwNotImplemented("getting an element from a collection")}getFirstIndex(){Vr.throwNotImplemented("getting the first index in a collection")}getKeys(){Vr.throwNotImplemented("returning the keys of a collection")}getLastIndex(){Vr.throwNotImplemented("getting the last index in a collection")}getNextIndex(){Vr.throwNotImplemented("getting the next index in a collection")}getPrevIndex(){Vr.throwNotImplemented("getting the previous index in a collection")}getValues(){Vr.throwNotImplemented("getting the values in a collection")}hasElement(){Vr.throwNotImplemented("getting if value exists in a collection")}setElement(){Vr.throwNotImplemented("setting an element in a collection")}trim(){Vr.throwNotImplemented("trimming elements from a collection")}};a(Fl,"DbObjectImpl");var bl=Fl;lm.exports=bl});var jr=U((fv,Tm)=>{"use strict";var TY=ir(),Ma=Ee(),Ve=Ir(),kl=class kl{constructor(){this.autoCommit=!1,this.connectionClass="",this.dbObjectAsPojo=!1,this.edition="",this.errorOnConcurrentExecute=!1,this.events=!1,this.externalAuth=!1,this.fetchArraySize=100,this.fetchAsBuffer=[],this.fetchAsString=[],this.lobPrefetchSize=16384,this.maxRows=0,this.outFormat=TY.OUT_FORMAT_ARRAY,this.poolIncrement=1,this.poolMax=4,this.poolMaxPerShard=0,this.poolMin=0,this.poolPingInterval=60,this.poolTimeout=60,this.prefetchRows=2,this.queueTimeout=6e4,this.queueMax=500,this.stmtCacheSize=30,this.thin=!0,this.thinDriverInitialized=!1,this.createFetchTypeMap(this.fetchAsString,this.fetchAsBuffer),this.fetchTypeHandler=void 0}_getDateComponents(e,t){return e?[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()*1e3*1e3]:[t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()*1e3*1e3]}_makeDate(e,t,n,o,_,T,u,h,A){return e?new Date(t,n-1,o,_,T,u,h):new Date(Date.UTC(t,n-1,o,_,T,u,h)-A*6e4)}addToOptions(e){for(let t=1;t<arguments.length;t++){let n=arguments[t];e[n]===void 0&&(e[n]=this[n])}}createFetchTypeMap(e,t){let n=new Map(Ve.DB_TYPE_FETCH_TYPE_MAP);for(let o of e)switch(o){case Ve.DB_TYPE_NUMBER:n.set(Ve.DB_TYPE_BINARY_DOUBLE,Ve.DB_TYPE_VARCHAR),n.set(Ve.DB_TYPE_BINARY_FLOAT,Ve.DB_TYPE_VARCHAR),n.set(Ve.DB_TYPE_BINARY_INTEGER,Ve.DB_TYPE_VARCHAR),n.set(Ve.DB_TYPE_NUMBER,Ve.DB_TYPE_VARCHAR);break;case Ve.DB_TYPE_TIMESTAMP:n.set(Ve.DB_TYPE_DATE,Ve.DB_TYPE_VARCHAR),n.set(Ve.DB_TYPE_TIMESTAMP,Ve.DB_TYPE_VARCHAR),n.set(Ve.DB_TYPE_TIMESTAMP_TZ,Ve.DB_TYPE_VARCHAR),n.set(Ve.DB_TYPE_TIMESTAMP_LTZ,Ve.DB_TYPE_VARCHAR);break;case Ve.DB_TYPE_CLOB:case Ve.DB_TYPE_NCLOB:n.set(Ve.DB_TYPE_CLOB,Ve.DB_TYPE_LONG),n.set(Ve.DB_TYPE_NCLOB,Ve.DB_TYPE_LONG_NVARCHAR);break;case Ve.DB_TYPE_RAW:n.set(Ve.DB_TYPE_RAW,Ve.DB_TYPE_VARCHAR);break;case Ve.DB_TYPE_JSON:n.set(Ve.DB_TYPE_JSON,Ve.DB_TYPE_VARCHAR);break;default:Ma.throwErr(Ma.ERR_INVALID_TYPE_FOR_CONVERSION)}for(let o of t)switch(o){case Ve.DB_TYPE_BLOB:n.set(Ve.DB_TYPE_BLOB,Ve.DB_TYPE_LONG_RAW);break;default:Ma.throwErr(Ma.ERR_INVALID_TYPE_FOR_CONVERSION)}this.fetchTypeMap=n}};a(kl,"Settings");var vl=kl;Tm.exports=new vl});var xa=U((dv,um)=>{"use strict";var uY=jr(),pe=Ee(),EY=require("util"),Gl=class Gl{constructor(){this._inProgress=!1,this._dbObjectTypes=new Map,this._requestQueue=[]}async _acquireLock(){this._inProgress&&(uY.errorOnConcurrentExecute&&pe.throwErr(pe.ERR_CONCURRENT_OPS),await new Promise((e,t)=>{let n={resolve:e,reject:t};this._requestQueue.push(n)})),this._inProgress=!0}_getConnImpl(){return this}_getDbObjectType(e,t,n,o){let _;if(o&&(_=this._dbObjectTypes.get(o),_))return _;let T=n?`${e}.${n}.${t}`:`${e}.${t}`;return _=this._dbObjectTypes.get(T),_||(_={oid:o,fqn:T,schema:e,name:t,packageName:n,partial:!0,isXmlType:e==="SYS"&&t==="XMLTYPE"},this._dbObjectTypes.set(T,_)),o&&!_.oid&&(_.oid=o,this._dbObjectTypes.set(o,_)),_}_isDate(e){return EY.isDate(e)}_releaseLock(){this._requestQueue.length>0?this._requestQueue.shift().resolve():this._inProgress=!1}breakExecution(){pe.throwNotImplemented("getting Oracle Server version number")}changePassword(){pe.throwNotImplemented("changing the password")}close(){pe.throwNotImplemented("closing the connection")}commit(){pe.throwNotImplemented("committing the transaction")}createLob(){pe.throwNotImplemented("creating a temporary LOB")}execute(){pe.throwNotImplemented("executing a SQL statement")}executeMany(){pe.throwNotImplemented("executing a SQL statement multiple times")}getCallTimeout(){pe.throwNotImplemented("getting call timeout")}getCurrentSchema(){pe.throwNotImplemented("getting current schema")}getDbObjectClass(){pe.throwNotImplemented("getting a database object class")}getExternalName(){pe.throwNotImplemented("getting the external name")}getInternalName(){pe.throwNotImplemented("getting the internal name")}getOracleServerVersion(){pe.throwNotImplemented("getting Oracle Server version number")}getOracleServerVersionString(){pe.throwNotImplemented("getting Oracle Server version as a string")}getQueue(){pe.throwNotImplemented("getting a queue")}getSodaDatabase(){pe.throwNotImplemented("getting a SODA database")}getStatementInfo(){pe.throwNotImplemented("getting information about a statement")}getStmtCacheSize(){pe.throwNotImplemented("getting the statement cache size")}getTag(){pe.throwNotImplemented("getting the tag for the connection")}isHealthy(){pe.throwNotImplemented("getting the health of the connection")}ping(){pe.throwNotImplemented("sending a ping to the database")}rollback(){pe.throwNotImplemented("rolling back a transaction")}setAction(){pe.throwNotImplemented("setting end-to-end attribute 'action'")}setCallTimeout(){pe.throwNotImplemented("setting call timeout")}setClientId(){pe.throwNotImplemented("setting end-to-end attribute 'clientId'")}setClientInfo(){pe.throwNotImplemented("setting end-to-end attribute 'clientInfo'")}setCurrentSchema(){pe.throwNotImplemented("setting the current schema")}setDbOp(){pe.throwNotImplemented("setting end-to-end attribute 'dbOp'")}setECID(){pe.throwNotImplemented("setting end-to-end attribute 'ecid'")}setExternalName(){pe.throwNotImplemented("setting the external name")}setInternalName(){pe.throwNotImplemented("setting the internal name")}setStmtCacheSize(){pe.throwNotImplemented("setting the size of the statement cache")}setModule(){pe.throwNotImplemented("setting end-to-end attribute 'module'")}setTag(){pe.throwNotImplemented("setting the tag for the connection")}shutdown(){pe.throwNotImplemented("shutting down the database instance")}startup(){pe.throwNotImplemented("starting up the database instance")}subscribe(){pe.throwNotImplemented("subscribing to events in the database")}tpcBegin(){pe.throwNotImplemented("starting a two-phase transaction")}tpcCommit(){pe.throwNotImplemented("committing a two-phase transaction")}tpcEnd(){pe.throwNotImplemented("ending a two-phase transaction")}tpcForget(){pe.throwNotImplemented("forgetting a two-phase transaction")}tpcPrepare(){pe.throwNotImplemented("preparing a two-phase transaction")}tpcRollback(){pe.throwNotImplemented("rolling back a two-phase transaction")}unsubscribe(){pe.throwNotImplemented("unsubscribing from events")}};a(Gl,"ConnectionImpl");var ql=Gl;um.exports=ql});var Wl=U((mv,Em)=>{"use strict";var hY=xa(),Va=Ee(),Kl=class Kl{_getConnImpl(){let e=this._parentObj;for(;!(e instanceof hY);)e=e._parentObj;return e}close(){Va.throwNotImplemented("closing a LOB")}getData(){Va.throwNotImplemented("getting all of the data from a LOB")}read(){Va.throwNotImplemented("reading from a LOB")}write(){Va.throwNotImplemented("writing to a LOB")}};a(Kl,"LobImpl");var Hl=Kl;Em.exports=Hl});var Xl=U((Rv,hm)=>{"use strict";var Qt=Ee(),SY=gr(),zl=class zl{async _accessTokenHandler(e,t,n){let o;try{let _=e(n);_ instanceof Promise&&(_=await _),SY.isTokenValid(_)||Qt.throwErr(Qt.ERR_TOKEN_HAS_EXPIRED),o=_}finally{this.returnAccessToken(t,o)}}close(){Qt.throwNotImplemented("closing the pool")}create(){Qt.throwNotImplemented("creating the pool")}getConnection(){Qt.throwNotImplemented("getting a connection from the pool")}getConnectionsInUse(){Qt.throwNotImplemented("getting num connection in use")}getConnectionsOpen(){Qt.throwNotImplemented("getting num connection open")}getPoolIncrement(){Qt.throwNotImplemented("getting the pool increment")}getPoolMax(){Qt.throwNotImplemented("getting the pool max")}getPoolMaxPerShard(){Qt.throwNotImplemented("getting the pool max per shard")}getPoolMin(){Qt.throwNotImplemented("getting the pool min")}getPoolPingInterval(){Qt.throwNotImplemented("getting the pool ping interval")}getPoolTimeout(){Qt.throwNotImplemented("getting the pool timeout")}getStmtCacheSize(){Qt.throwNotImplemented("getting the pool statement cache size")}getSodaMetaDataCache(){Qt.throwNotImplemented("getting the SODA metadata cache flag")}reconfigure(){Qt.throwNotImplemented("reconfiguring the pool")}setAccessToken(){Qt.throwNotImplemented("sets the access token")}};a(zl,"PoolImpl");var $l=zl;hm.exports=$l});var jl=U((Dv,Nm)=>{"use strict";var NY=ir(),pn=Ee(),fY=gr(),Sm=jr(),Jt=Ir(),Jl=class Jl{_determineFetchType(e,t){if(delete e.fetchType,delete e.converter,t.fetchTypeHandler){let n=t.fetchTypeHandler(e);n!==void 0&&(pn.assert(typeof n=="object",pn.ERR_FETCH_TYPE_HANDLER_RETURN_VALUE),n.type!==void 0&&pn.assert(n.type instanceof Jt.DbType,pn.ERR_FETCH_TYPE_HANDLER_TYPE),n.converter!==void 0&&pn.assert(typeof n.converter=="function",pn.ERR_FETCH_TYPE_HANDLER_CONVERTER),e.fetchType=n.type,e.converter=n.converter)}if(e.fetchType||(t.fetchTypeMap&&t.fetchTypeMap.has(e.name)?(e.fetchType=t.fetchTypeMap.get(e.name),e.fetchType===NY.DEFAULT&&(e.fetchType=Jt.DB_TYPE_FETCH_TYPE_MAP.get(e.dbType))):e.fetchType=Sm.fetchTypeMap.get(e.dbType)),e.fetchType!==e.dbType){let n=Jt.DB_TYPE_CONVERSION_MAP.get(e.dbType),o=n&&n.get(e.fetchType);o||pn.throwErr(pn.ERR_UNSUPPORTED_CONVERSION,e.dbType.name,e.fetchType.name),e.fetchType=o}if(Sm.thin){let n,o=e.converter;if(e.dbType===Jt.DB_TYPE_NUMBER&&e.fetchType===Jt.DB_TYPE_NUMBER?n=a(_=>_===null?null:parseFloat(_),"converter"):e.fetchType===Jt.DB_TYPE_VARCHAR&&(e.dbType===Jt.DB_TYPE_BINARY_DOUBLE||e.dbType===Jt.DB_TYPE_BINARY_FLOAT||e.dbType===Jt.DB_TYPE_DATE||e.dbType===Jt.DB_TYPE_TIMESTAMP||e.dbType===Jt.DB_TYPE_TIMESTAMP_LTZ||e.dbType===Jt.DB_TYPE_TIMESTAMP_TZ)&&(n=a(_=>_===null?null:_.toString(),"converter")),o&&n){let _=n;n=a(T=>o(_(T)),"converter")}n&&(e.converter=n)}}_getConnImpl(){return this._parentObj}_setup(e,t){this._parentObj=e.connection._impl,this.metaData=t,this.lobIndices=[],this.dbObjectIndices=[],this.nestedCursorIndices=[],this.converterIndices=[],this.outFormat=e.outFormat,this.fetchArraySize=e.fetchArraySize,this.dbObjectAsPojo=e.dbObjectAsPojo,this.maxRows=e.maxRows;let n=new Map;for(let o=0;o<t.length;o++){let _=t[o].name;n.has(_)||n.set(_,o)}for(let o=0;o<t.length;o++){let _=t[o];if(_.dbTypeClass){let u=e.connection._getDbObjectClass(_.dbTypeClass);_.dbTypeClass=u}fY.addTypeProperties(_,"dbType"),this._determineFetchType(_,e),_.fetchType===Jt.DB_TYPE_CURSOR?this.nestedCursorIndices.push(o):_.fetchType===Jt.DB_TYPE_CLOB||_.fetchType===Jt.DB_TYPE_NCLOB||_.fetchType===Jt.DB_TYPE_BLOB?this.lobIndices.push(o):_.fetchType===Jt.DB_TYPE_OBJECT&&this.dbObjectIndices.push(o),_.converter&&this.converterIndices.push(o);let T=_.name;if(n.get(T)!==o){let u=0;for(;n.has(T);)u=u+1,T=`${_.name}_${u}`;n.set(T,o),_.name=T}}}close(){pn.throwNotImplemented("closing a result set")}getRows(){pn.throwNotImplemented("getting rows")}};a(Jl,"ResultSetImpl");var Ql=Jl;Nm.exports=Ql});var Am=U((Cv,fm)=>{"use strict";var Cr=Ee(),eT=class eT{_getConnImpl(){return this._database._connection}createIndex(){Cr.throwNotImplemented("creating an index on a SODA collection")}drop(){Cr.throwNotImplemented("dropping a SODA collection")}dropIndex(){Cr.throwNotImplemented("dropping an index on a SODA collection")}find(){Cr.throwNotImplemented("creating a SODA operation")}getDataGuide(){Cr.throwNotImplemented("getting the data guide for the collection")}getMetaData(){Cr.throwNotImplemented("getting the metadata for the collection")}getName(){Cr.throwNotImplemented("getting the name of the collection")}insertMany(){Cr.throwNotImplemented("inserting multiple docs into a collection")}insertManyAndGet(){Cr.throwNotImplemented("insert/return many docs in a collection")}insertOne(){Cr.throwNotImplemented("inserting a single doc into a collection")}insertOneAndGet(){Cr.throwNotImplemented("insert/return a single doc in a collection")}save(){Cr.throwNotImplemented("saving a single doc in a collection")}saveAndGet(){Cr.throwNotImplemented("saving a single doc in a collection")}truncate(){Cr.throwNotImplemented("removing all docs from a collection")}};a(eT,"SodaCollectionImpl");var Zl=eT;fm.exports=Zl});var pm=U((yv,dm)=>{"use strict";var ba=Ee(),rT=class rT{_getConnImpl(){return this._connection}createCollection(){ba.throwNotImplemented("creating a SODA collection")}createDocument(){ba.throwNotImplemented("creating a SODA document")}getCollectionNames(){ba.throwNotImplemented("getting a list of SODA collection names")}openCollection(){ba.throwNotImplemented("getting a list of SODA collection names")}};a(rT,"SodaDatabaseImpl");var tT=rT;dm.exports=tT});var Rm=U((wv,Pm)=>{"use strict";var mm=Ee(),sT=class sT{_getConnImpl(){return this._operation._getConnImpl()}close(){mm.throwNotImplemented("closing a SODA document cursor")}getNext(){mm.throwNotImplemented("getting a document from a SODA doc cursor")}};a(sT,"SodaDocCursorImpl");var nT=sT;Pm.exports=nT});var Dm=U((Uv,Im)=>{"use strict";var Ms=Ee(),oT=class oT{getContentAsBuffer(){Ms.throwNotImplemented("getting doc content as a buffer")}getContentAsString(){Ms.throwNotImplemented("getting doc content as a string")}getCreatedOn(){Ms.throwNotImplemented("getting the created date of a document")}getKey(){Ms.throwNotImplemented("getting the key of a document")}getLastModified(){Ms.throwNotImplemented("getting the last modified date of a doc")}getMediaType(){Ms.throwNotImplemented("getting the media type of a document")}getVersion(){Ms.throwNotImplemented("getting the version of a document")}};a(oT,"SodaDocumentImpl");var iT=oT;Im.exports=iT});var Cm=U((Mv,gm)=>{"use strict";var xs=Ee(),_T=class _T{_getConnImpl(){return this._collection._database._connection}count(){xs.throwNotImplemented("getting a count of documents")}getCursor(){xs.throwNotImplemented("getting a cursor for documents")}getDocuments(){xs.throwNotImplemented("getting a cursor for documents")}getOne(){xs.throwNotImplemented("getting a single document")}remove(){xs.throwNotImplemented("removing documents from a collection")}replaceOne(){xs.throwNotImplemented("replacing a single document")}replaceOneAndGet(){xs.throwNotImplemented("replacing/returning a single document")}};a(_T,"SodaOperationImpl");var aT=_T;gm.exports=aT});var Ni=U((Vv,Om)=>{"use strict";var AY=nm(),dY=im(),pY=am(),mY=cm(),PY=Ya(),RY=xa(),IY=Wl(),DY=Xl(),gY=jl(),CY=Am(),OY=pm(),yY=Rm(),LY=Dm(),wY=Cm();Om.exports={AqDeqOptionsImpl:AY,AqEnqOptionsImpl:dY,AqMessageImpl:pY,AqQueueImpl:mY,DbObjectImpl:PY,ConnectionImpl:RY,LobImpl:IY,PoolImpl:DY,ResultSetImpl:gY,SodaCollectionImpl:CY,SodaDatabaseImpl:OY,SodaDocCursorImpl:yY,SodaDocumentImpl:LY,SodaOperationImpl:wY}});var TT=U((bv,ym)=>{"use strict";var{Buffer:BY}=require("buffer"),kn=ir(),qn=Ee(),lT=class lT{get condition(){return this._impl.getCondition()}set condition(e){qn.assertPropValue(typeof e=="string","condition"),this._impl.setCondition(e)}get consumerName(){return this._impl.getConsumerName()}set consumerName(e){qn.assertPropValue(typeof e=="string","consumerName"),this._impl.setConsumerName(e)}get correlation(){return this._impl.getCorrelation()}set correlation(e){qn.assertPropValue(typeof e=="string","correlation"),this._impl.setCorrelation(e)}get mode(){return this._impl.getMode()}set mode(e){qn.assertPropValue(e===kn.AQ_DEQ_MODE_BROWSE||e===kn.AQ_DEQ_MODE_LOCKED||e===kn.AQ_DEQ_MODE_REMOVE||e===kn.AQ_DEQ_MODE_REMOVE_NO_DATA,"mode"),this._impl.setMode(e)}get msgId(){return this._impl.getMsgId()}set msgId(e){qn.assertPropValue(BY.isBuffer(e),"msgId"),this._impl.setMsgId(e)}get navigation(){return this._impl.getNavigation()}set navigation(e){qn.assertPropValue(e===kn.AQ_DEQ_NAV_FIRST_MSG||e===kn.AQ_DEQ_NAV_NEXT_TRANSACTION||e===kn.AQ_DEQ_NAV_NEXT_MSG,"navigation"),this._impl.setNavigation(e)}get transformation(){return this._impl.getTransformation()}set transformation(e){qn.assertPropValue(typeof e=="string","transformation"),this._impl.setTransformation(e)}get visibility(){return this._impl.getVisibility()}set visibility(e){qn.assertPropValue(e===kn.AQ_VISIBILITY_IMMEDIATE||e===kn.AQ_VISIBILITY_ON_COMMIT,"visibility"),this._impl.setVisibility(e)}get wait(){return this._impl.getWait()}set wait(e){qn.assertPropValue(Number.isInteger(e)&&e>=0,"wait"),this._impl.setWait(e)}};a(lT,"AqDeqOptions");var cT=lT;ym.exports=cT});var ST=U((vv,Lm)=>{"use strict";var so=ir(),uT=Ee(),hT=class hT{get deliveryMode(){return this._impl.getDeliveryMode()}set deliveryMode(e){uT.assertPropValue(e===so.AQ_MSG_DELIV_MODE_PERSISTENT||e===so.AQ_MSG_DELIV_MODE_BUFFERED||e===so.AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED,"deliveryMode"),this._impl.setDeliveryMode(e)}get transformation(){return this._impl.getTransformation()}set transformation(e){uT.assertPropValue(typeof e=="string","transformation"),this._impl.setTransformation(e)}get visibility(){return this._impl.getVisibility()}set visibility(e){uT.assertPropValue(e===so.AQ_VISIBILITY_IMMEDIATE||e===so.AQ_VISIBILITY_ON_COMMIT,"visibility"),this._impl.setVisibility(e)}};a(hT,"AqEnqOptions");var ET=hT;Lm.exports=ET});var AT=U((qv,wm)=>{"use strict";var UY=Ya(),fT=class fT{get correlation(){return this._impl.getCorrelation()}get delay(){return this._impl.getDelay()}get deliveryMode(){return this._impl.getDeliveryMode()}get exceptionQueue(){return this._impl.getExceptionQueue()}get expiration(){return this._impl.getExpiration()}get msgId(){return this._impl.getMsgId()}get numAttempts(){return this._impl.getNumAttempts()}get originalMsgId(){return this._impl.getOriginalMsgId()}get payload(){let e=this._impl.getPayload();if(e instanceof UY){let t=Object.create(this._payloadTypeClass.prototype);return t._impl=e,t}return e}get priority(){return this._impl.getPriority()}get state(){return this._impl.getState()}};a(fT,"AqMessage");var NT=fT;wm.exports=NT});var fi=U((Hv,Um)=>{"use strict";var{Buffer:dT}=require("buffer"),{Duplex:YY}=require("stream"),Bm=ir(),Or=Ee(),pT=gr(),MY=Ir(),mT=class mT extends YY{constructor(){super({decodeStrings:!1}),this.offset=1,this._isActive=!1,this.once("finish",function(){this._autoCloseLob&&this.destroy()})}async _destroy(e,t){if(e&&e.message.startsWith("NJS-108:")&&delete this._impl,this._impl){let n=this._impl;delete this._impl;try{await n.close()}catch(o){t(o);return}}t(e)}async _read(){try{let e=await this._serializedRead(this.offset);e?(this.offset+=e.length,this.push(e)):(this.push(null),this._autoCloseLob&&this.destroy())}catch(e){throw this._autoCloseLob&&this.destroy(e),e}}async _readData(e){Or.assert(this._impl,Or.ERR_INVALID_LOB);try{return await this._impl.read(e)}catch(t){throw Or.transformErr(t,this._readData)}}_setup(e,t){this._impl=e,this._chunkSize=e.getChunkSize(),this._pieceSize=e.getPieceSize(),this._length=e.getLength(),this._type=e.getType(),typeof this._type=="number"&&(this._type=MY.getTypeByNum(this._type)),this._autoCloseLob=t}async _write(e,t,n){this.type==Bm.DB_TYPE_BLOB&&!dT.isBuffer(e)?e=dT.from(e):this.type==Bm.DB_TYPE_CLOB&&dT.isBuffer(e)&&(e=e.toString());try{await this._serializedWrite(this.offset,e)}catch(o){this._autoCloseLob&&this.destroy(o),n(o);return}this.offset+=e.length,n(null)}async _writeData(e,t){Or.assert(this._impl,Or.ERR_INVALID_LOB);try{await this._impl.write(e,t)}catch(n){throw Or.transformErr(n,this._writeData)}}get chunkSize(){return this._chunkSize}async close(){if(Or.assertArgCount(arguments,0,0),this._impl){let e=this._impl;delete this._impl;try{await e.close(),this.emit("close")}catch(t){this.destroy(t)}}}async getData(){return Or.assertArgCount(arguments,0,0),Or.assert(this._impl,Or.ERR_INVALID_LOB),await this._impl.getData()}get length(){return this._length}get pieceSize(){return this._pieceSize}set pieceSize(e){Or.assertPropValue(Number.isInteger(e)&&e>=0,"pieceSize"),Or.assert(this._impl,Or.ERR_INVALID_LOB),this._impl.setPieceSize(e),this._pieceSize=e}get type(){return this._type}};a(mT,"Lob");var Ns=mT;pT.wrapFns(Ns.prototype,Or.ERR_BUSY_LOB,"close","getData");Ns.prototype._serializedRead=pT.serialize(Ns.prototype._readData);Ns.prototype._serializedWrite=pT.serialize(Ns.prototype._writeData);Um.exports=Ns});var IT=U((Wv,Ym)=>{"use strict";var xY=require("process"),{Readable:VY}=require("stream"),RT=class RT extends VY{constructor(e){super({objectMode:!0}),this._fetching=!1,this._numRows=0,e&&xY.nextTick(()=>{this._open(e)})}async _destroy(e,t){if(this._resultSet){let n=this._resultSet;this._resultSet=null,this._fetching&&await new Promise(o=>this.once("_doneFetching",o));try{await n._impl.close()}catch(o){t(o);return}}t(e)}_open(e){this._resultSet=e,this.emit("open"),this.emit("metadata",e.metaData)}async _read(){if(!this._resultSet){this.once("open",this._read);return}try{this._fetching=!0,this._resultSet._allowGetRowCall=!0;let e=await this._resultSet.getRow();e?this.push(e):this.push(null)}catch(e){this.destroy(e)}finally{this._fetching=!1,this._resultSet?this._resultSet._allowGetRowCall=!1:this.emit("_doneFetching")}}};a(RT,"QueryStream");var PT=RT;Ym.exports=PT});var ka=U((zv,Mm)=>{"use strict";var bY=IT(),FY=Ai(),vY=gr(),kY=ir(),qY=fi(),mt=Ee(),va=class va{constructor(){this._rowCache=[],this._processingStarted=!1,this._convertedToStream=!1,this._allowGetRowCall=!1,this._isActive=!1}async _getAllRows(){try{let e=this._impl.maxRows,t=this._impl.fetchArraySize,n=[];for(;;){e>0&&t>=e&&(t=e);let o=await this._getRows(t);if(o&&(await this._processRows(o,!0),n=n.concat(o)),o.length==e||o.length<t)break;e>0&&(e-=o.length)}return n}finally{await this._impl.close(),delete this._impl}}async _getRows(e){let t={};return this._impl.nestedCursorIndices.length>0&&(t={connection:this._connection,outFormat:this._impl.outFormat,fetchArraySize:this._impl.fetchArraySize,dbObjectAsPojo:this._impl.dbObjectAsPojo,maxRows:this._impl.maxRows,fetchTypeMap:this._impl.fetchTypeMap}),await this._impl.getRows(e,t)}async _processRows(e,t){for(let n of this._impl.nestedCursorIndices)for(let o=0;o<e.length;o++){let _=e[o][n];if(_){let T=new va;T._setup(this._connection,_),this._impl.metaData[n].metaData=_.metaData,t?e[o][n]=await T._getAllRows():e[o][n]=T}}for(let n of this._impl.lobIndices)for(let o=0;o<e.length;o++){let _=e[o][n];_&&(e[o][n]=new qY)._setup(_,!0)}for(let n of this._impl.dbObjectIndices){let o=this._impl.metaData[n].dbTypeClass;for(let _=0;_<e.length;_++){let T=e[_][n];if(T){let u=e[_][n]=Object.create(o.prototype);u._impl=T,this._impl.dbObjectAsPojo?e[_][n]=u._toPojo():u.isCollection&&(e[_][n]=new Proxy(u,FY._collectionProxyHandler))}}}for(let n of this._impl.converterIndices){let o=this._impl.metaData[n].converter;this._connection._impl._inProgress=!1;try{for(let _=0;_<e.length;_++){let T=o(e[_][n]);T instanceof Promise&&(T=await T),e[_][n]=T}}finally{this._connection._impl._inProgress=!0}}if(this._impl.outFormat===kY.OUT_FORMAT_OBJECT)for(let n=0;n<e.length;n++){let o=e[n],_=e[n]={},T=this._impl.metaData;for(let u=0;u<T.length;u++)_[T[u].name]=o[u]}}_setup(e,t){this._connection=e,this._impl=t}async close(){mt.assertArgCount(arguments,0,0),mt.assert(this._impl&&this._connection._impl,mt.ERR_INVALID_RS),this._convertedToStream&&mt.throwErr(mt.ERR_CANNOT_INVOKE_RS_METHODS),this._processingStarted=!0;let e=this._impl;delete this._impl,await e.close()}async getRow(){if(mt.assertArgCount(arguments,0,0),mt.assert(this._impl&&this._connection._impl,mt.ERR_INVALID_RS),this._convertedToStream&&!this._allowGetRowCall&&mt.throwErr(mt.ERR_CANNOT_INVOKE_RS_METHODS),this._allowGetRowCall=!1,this._processingStarted=!0,this._rowCache.length==0){let e=await this._getRows(this._impl.fetchArraySize);await this._processRows(e,!1),this._rowCache=e}return this._rowCache.shift()}async getRows(e){let t;mt.assertArgCount(arguments,0,1),mt.assert(this._impl&&this._connection._impl,mt.ERR_INVALID_RS),arguments.length==0?e=0:mt.assertParamValue(Number.isInteger(e)&&e>=0,1),this._convertedToStream&&mt.throwErr(mt.ERR_CANNOT_INVOKE_RS_METHODS),this._processingStarted=!0;let n;if(e==0){n=this._rowCache;let o=this._impl.fetchArraySize;for(;;){let _=await this._getRows(o);if(_&&(await this._processRows(_,!1),n=n.concat(_)),_.length<o)break}return n}if(this._rowCache.length===0)n=await this._getRows(e),await this._processRows(n,!1);else if(t=e-this._rowCache.length,t<=0)n=this._rowCache.splice(0,e);else{let o=await this._getRows(t);await this._processRows(o,!1),n=this._rowCache.concat(o),this._rowCache=[]}return n}get metaData(){if(this._impl)return this._impl.metaData}toQueryStream(){return mt.assertArgCount(arguments,0,0),this._processingStarted&&mt.throwErr(mt.ERR_CANNOT_CONVERT_RS_TO_STREAM),this._convertedToStream&&mt.throwErr(mt.ERR_RS_ALREADY_CONVERTED),this._convertedToStream=!0,new bY(this)}[Symbol.asyncIterator](){let e=this;return{async next(){let t=await e.getRow();return{value:t,done:t===void 0}},return(){return{done:!0}}}}};a(va,"ResultSet");var Fa=va;vY.wrapFns(Fa.prototype,mt.ERR_BUSY_RS,"close","getRow","getRows");Mm.exports=Fa});var OT=U((Qv,bm)=>{"use strict";var DT=Ai(),{Buffer:gT}=require("buffer"),GY=fi(),HY=ka(),KY=ir(),Pt=Ee(),xm=require("util"),_t=Ir();function Gn(s,e){if(s.type===void 0&&arguments.length>2)s.type=arguments[2];else{let t=!1;for(let n=2;n<arguments.length;n++)if(s.type===arguments[n]){t=!0;break}t||(s.attrName?Pt.throwErr(Pt.ERR_WRONG_VALUE_FOR_DBOBJECT_ATTR,s.attrName,s.fqn):s.fqn?Pt.throwErr(Pt.ERR_WRONG_VALUE_FOR_DBOBJECT_ELEM,s.fqn):s.isArray&&s.name?Pt.throwErr(Pt.ERR_INCOMPATIBLE_TYPE_ARRAY_BIND,e.pos,s.name):s.isArray?Pt.throwErr(Pt.ERR_INCOMPATIBLE_TYPE_ARRAY_INDEX_BIND,e.pos,s.pos):Pt.throwErr(Pt.ERR_BIND_VALUE_AND_TYPE_MISMATCH))}}a(Gn,"checkType");function CT(s){if(s==null||typeof s=="number"||typeof s=="string"||typeof s=="boolean"||gT.isBuffer(s)||xm.isDate(s))return s;if(Array.isArray(s)){let t=new Array(s.length);for(let n=0;n<s.length;n++)t[n]=CT(s[n]);return t}if(s instanceof DT)return{fields:[],values:[]};let e={};e.fields=Object.getOwnPropertyNames(s),e.values=new Array(e.fields.length);for(let t=0;t<e.fields.length;t++)e.values[t]=CT(s[e.fields[t]]);return e}a(CT,"transformJsonValue");function Vm(s,e,t){if(e!=null){if(s.type===_t.DB_TYPE_OBJECT){let n=e;return e instanceof DT||(n=new s.typeClass(e)),n._impl}else{if(s.type===_t.DB_TYPE_JSON)return CT(e);if(typeof e=="string"){if(Gn(s,t,_t.DB_TYPE_VARCHAR,_t.DB_TYPE_NVARCHAR,_t.DB_TYPE_CHAR,_t.DB_TYPE_NCHAR,_t.DB_TYPE_CLOB,_t.DB_TYPE_NCLOB),s.type!==_t.DB_TYPE_CLOB&&s.type!==_t.DB_TYPE_NCLOB){let n=gT.byteLength(e);(s.maxSize===void 0||n>s.maxSize)&&(s.checkSize&&Pt.throwErr(Pt.ERR_MAX_SIZE_TOO_SMALL,s.maxSize,n,t.pos),s.maxSize=n)}return e}else{if(typeof e=="number")return Gn(s,t,_t.DB_TYPE_NUMBER,_t.DB_TYPE_BINARY_INTEGER,_t.DB_TYPE_BINARY_FLOAT,_t.DB_TYPE_BINARY_DOUBLE),Number.isNaN(e)&&s.type===_t.DB_TYPE_NUMBER&&Pt.throwErr(Pt.ERR_NAN_VALUE),e;if(typeof e=="boolean")return Gn(s,t,_t.DB_TYPE_BOOLEAN),e;if(xm.isDate(e))return Gn(s,t,_t.DB_TYPE_TIMESTAMP,_t.DB_TYPE_TIMESTAMP_TZ,_t.DB_TYPE_TIMESTAMP_LTZ,_t.DB_TYPE_DATE),e;if(gT.isBuffer(e))return Gn(s,t,_t.DB_TYPE_RAW,_t.DB_TYPE_BLOB),s.type===_t.DB_TYPE_RAW&&(s.maxSize===void 0||e.length>s.maxSize)&&(s.checkSize&&Pt.throwErr(Pt.ERR_MAX_SIZE_TOO_SMALL,s.maxSize,e.length,t.pos),s.maxSize=e.length),e;if(e instanceof HY)return Gn(s,t,_t.DB_TYPE_CURSOR),e._impl;if(e instanceof GY)return Gn(s,t,e.type),e._impl;if(e instanceof DT)return Gn(s,t,_t.DB_TYPE_OBJECT),e._impl;if(t.allowArray&&Array.isArray(e)){s.isArray=!0,s.dir===KY.BIND_IN?s.maxArraySize=e.length||1:s.maxArraySize===void 0?Pt.throwErr(Pt.ERR_REQUIRED_MAX_ARRAY_SIZE):e.length>s.maxArraySize&&Pt.throwErr(Pt.ERR_INVALID_ARRAY_SIZE),t.allowArray=!1;let n=new Array(e.length);for(let o=0;o<e.length;o++)t.pos=o,n[o]=Vm(s,e[o],t);return n}}}s.type===void 0&&Pt.throwErr(Pt.ERR_INVALID_BIND_DATA_TYPE,2),Gn(s,t)}}a(Vm,"transformValueIn");bm.exports={transformValueIn:Vm}});var Ai=U((jv,vm)=>{"use strict";var WY=fi(),Fm=Ni(),Ot=Ee(),$Y=Ir(),yT=require("util"),io=class io{_getAttrValue(e){let t=this._impl.getAttrValue(e);return this._transformValueOut(t,e.typeClass)}_setAttrValue(e,t){let n={fqn:this._objType.fqn,attrName:e.name,type:e.type,typeClass:e.typeClass},o={allowArray:!1};t=LT.transformValueIn(n,t,o),this._impl.setAttrValue(e,t)}_toPojo(){if(this.isCollection){let t=this.getValues();if(this.elementType===$Y.DB_TYPE_OBJECT)for(let n=0;n<t.length;n++)t[n]=t[n]._toPojo();return t}let e={};for(let t in this.attributes){let n=this[t];n instanceof io&&(n=n._toPojo()),e[t]=n}return e}_transformValueOut(e,t){let n=e;return e instanceof Fm.LobImpl?(n=new WY,n._setup(e,!0)):e instanceof Fm.DbObjectImpl&&(n=Object.create(t.prototype),n._impl=e,n.isCollection&&(n=new Proxy(n,io._collectionProxyHandler))),n}append(e){Ot.assertArgCount(arguments,1,1);let t={fqn:this._objType.fqn,type:this._objType.elementType,typeClass:this._objType.elementTypeClass},n={allowArray:!1};e=LT.transformValueIn(t,e,n),this._impl.append(e)}get attributes(){if(!this._attributes){let e=this._objType.attributes||[],t={};for(let n=0;n<e.length;n++){let o=e[n],_={type:o.type,typeName:o.typeName};o.typeClass&&(_.typeClass=o.typeClass),t[o.name]=_}this._attributes=t}return this._attributes}deleteElement(e){return Ot.assertArgCount(arguments,1,1),Ot.assertParamValue(Number.isInteger(e),1),this._impl.deleteElement(e)}get elementType(){return this._objType.elementType}get elementTypeClass(){return this._objType.elementTypeClass}get elementTypeName(){return this._objType.elementTypeName}get fqn(){return this._objType.fqn}getElement(e){Ot.assertArgCount(arguments,1,1),Ot.assertParamValue(Number.isInteger(e),1);let t=this._impl.getElement(e);return this._transformValueOut(t,this.elementTypeClass)}getKeys(){return Ot.assertArgCount(arguments,0,0),this._impl.getKeys()}getFirstIndex(){return Ot.assertArgCount(arguments,0,0),this._impl.getFirstIndex()}getLastIndex(){return Ot.assertArgCount(arguments,0,0),this._impl.getLastIndex()}getNextIndex(e){return Ot.assertArgCount(arguments,1,1),Ot.assertParamValue(Number.isInteger(e),1),this._impl.getNextIndex(e)}getPrevIndex(e){return Ot.assertArgCount(arguments,1,1),Ot.assertParamValue(Number.isInteger(e),1),this._impl.getPrevIndex(e)}getValues(){Ot.assertArgCount(arguments,0,0);let e=this._impl.getValues();for(let t=0;t<e.length;t++)e[t]=this._transformValueOut(e[t],this.elementTypeClass);return e}hasElement(e){return Ot.assertArgCount(arguments,1,1),Ot.assertParamValue(Number.isInteger(e),1),this._impl.hasElement(e)}get isCollection(){return this._objType.isCollection}get name(){return this._objType.name}get schema(){return this._objType.schema}setElement(e,t){Ot.assertArgCount(arguments,2,2),Ot.assertParamValue(Number.isInteger(e),1);let n={fqn:this._objType.fqn,type:this._objType.elementType,typeClass:this._objType.elementTypeClass},o={allowArray:!1};t=LT.transformValueIn(n,t,o),this._impl.setElement(e,t)}trim(e){Ot.assertArgCount(arguments,1,1),Ot.assertParamValue(Number.isInteger(e)&&e>=0,1),this._impl.trim(e)}[yT.inspect.custom](e,t){return"["+this.fqn+"] "+yT.inspect(this._toPojo(),t)}[Symbol.iterator](){if(this.isCollection)return this.getValues()[Symbol.iterator]();throw TypeError("obj is not iterable")}[Symbol.toPrimitive](e){switch(e){case"number":return NaN;default:return"["+this.fqn+"] "+yT.inspect(this._toPojo(),{})}}get[Symbol.toStringTag](){return this.fqn}toJSON(){return this._toPojo()}};a(io,"BaseDbObject");var oo=io;function zY(s){return function(){try{return s.apply(this,arguments)}catch(e){throw Ot.transformErr(e,Ot.transformErr)}}}a(zY,"transformErr");function XY(s){for(let e=1;e<arguments.length;e++){let t=arguments[e];s[t]=zY(s[t])}}a(XY,"wrapFns");XY(oo.prototype,"_getAttrValue","_setAttrValue","append","deleteElement","getElement","getKeys","getFirstIndex","getLastIndex","getNextIndex","getPrevIndex","getValues","hasElement","setElement","trim");oo._collectionProxyHandler={deleteProperty(s,e){if(typeof e=="string"){let t=+e;if(!isNaN(t))return s.deleteElement(t)}return delete s[e]},get(s,e){if(typeof e=="string"){let n=+e;if(!isNaN(n))return s.getElement(n)}let t=s[e];return typeof t=="function"?t.bind(s):t},set(s,e,t){if(typeof e=="string"){let n=+e;if(!isNaN(n))return s.setElement(n,t),!0}return s[e]=t,!0}};vm.exports=oo;var LT=OT()});var YT=U((ek,Hm)=>{"use strict";var{Buffer:wT}=require("buffer"),km=ir(),Nr=Ee(),BT=gr(),QY=TT(),JY=ST(),qm=AT(),Gm=Ai(),UT=class UT{_isPayload(e){return typeof e=="string"||wT.isBuffer(e)||e instanceof Gm}_verifyMessage(e){let t;return this._isPayload(e)?(t=e,e={}):(e={...e},this._isPayload(e.payload)?t=e.payload:this._payloadTypeClass?t=new this._payloadTypeClass(e.payload):Nr.throwErr(Nr.ERR_INVALID_AQ_MESSAGE)),typeof t=="string"?e.payload=wT.from(t):wT.isBuffer(t)?e.payload=t:e.payload=t._impl,e.correlation!==void 0&&Nr.assertParamPropValue(typeof e.correlation=="string",1,"correlation"),e.delay!==void 0&&Nr.assertParamPropValue(Number.isInteger(e.delay),1,"delay"),e.exceptionQueue!==void 0&&Nr.assertParamPropValue(typeof e.exceptionQueue=="string",1,"exceptionQueue"),e.expiration!==void 0&&Nr.assertParamPropValue(Number.isInteger(e.expiration),1,"expiration"),e.priority!==void 0&&Nr.assertParamPropValue(Number.isInteger(e.priority),1,"priority"),e.recipients!==void 0&&Nr.assertParamPropValue(BT.isArrayOfStrings(e.recipients),1,"recipients"),e}async create(e,t,n){if(n.payloadType){if(typeof n.payloadType=="string"){let o=await e._getDbObjectClassForName(n.payloadType);this._payloadTypeClass=o,n.payloadType=o}else Nr.assertParamPropValue(BT.isObject(n.payloadType)&&n.payloadType.prototype instanceof Gm,2,"payloadType"),this._payloadTypeClass=n.payloadType;this._payloadType=km.DB_TYPE_OBJECT,this._payloadTypeName=this._payloadTypeClass.prototype.name}else this._payloadType=km.DB_TYPE_RAW,this._payloadTypeName="RAW";this._name=t,this._impl=await e._impl.getQueue(t,n)}async deqMany(e){Nr.assertArgCount(arguments,1,1),Nr.assertParamValue(Number.isInteger(e)&&e>0,1);let t=await this._impl.deqMany(e),n=new Array(t.length);for(let o=0;o<t.length;o++){let _=new qm;_._impl=t[o],_._payloadTypeClass=this._payloadTypeClass,n[o]=_}return n}async deqOne(){Nr.assertArgCount(arguments,0,0);let e=await this._impl.deqOne();if(e){let t=new qm;return t._impl=e,t._payloadTypeClass=this._payloadTypeClass,t}}get deqOptions(){if(!this._deqOptions){let e=new QY;e._impl=this._impl.deqOptions,this._deqOptions=e}return this._deqOptions}async enqMany(e){Nr.assertArgCount(arguments,1,1),Nr.assertParamValue(Array.isArray(e)&&e.length>0,1);let t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=this._verifyMessage(e[n]);return await this._impl.enqMany(t)}async enqOne(e){return Nr.assertArgCount(arguments,1,1),e=this._verifyMessage(e),await this._impl.enqOne(e)}get enqOptions(){if(!this._enqOptions){let e=new JY;e._impl=this._impl.enqOptions,this._enqOptions=e}return this._enqOptions}get name(){return this._name}get payloadType(){return this._payloadType}get payloadTypeName(){return this._payloadTypeName}get payloadTypeClass(){return this._payloadTypeClass}};a(UT,"AqQueue");var qa=UT;BT.wrapFns(qa.prototype,"deqOne","deqMany","enqOne","enqMany");Hm.exports=qa});var di=U((rk,Km)=>{"use strict";var MT=class MT{get createdOn(){return this._impl.getCreatedOn()}getContent(){return JSON.parse(this._impl.getContentAsString())}getContentAsBuffer(){return this._impl.getContentAsBuffer()}getContentAsString(){return this._impl.getContentAsString()}get key(){return this._impl.getKey()}get lastModified(){return this._impl.getLastModified()}get mediaType(){return this._impl.getMediaType()}get version(){return this._impl.getVersion()}};a(MT,"SodaDocument");var Ga=MT;Ga.prototype._sodaDocumentMarker=!0;Km.exports=Ga});var VT=U((sk,Wm)=>{"use strict";var pi=Ee(),jY=gr(),ZY=di(),xT=class xT{async close(){pi.assertArgCount(arguments,0,0),pi.assert(this._impl,pi.ERR_INVALID_SODA_DOC_CURSOR),await this._impl.close(),delete this._impl}async getNext(){pi.assertArgCount(arguments,0,0),pi.assert(this._impl,pi.ERR_INVALID_SODA_DOC_CURSOR);let e=await this._impl.getNext();if(e){let t=new ZY;return t._impl=e,t}}};a(xT,"SodaDocCursor");var Ha=xT;jY.wrapFns(Ha.prototype,"close","getNext");Wm.exports=Ha});var vT=U((ok,zm)=>{"use strict";var e1=VT(),bT=di(),Et=Ee(),Ka=gr(),$m=jr(),FT=class FT{constructor(){this._options={autoCommit:$m.autoCommit,fetchArraySize:$m.fetchArraySize}}async count(){return Et.assertArgCount(arguments,0,0),await this._impl.count(this._options)}async getCursor(){Et.assertArgCount(arguments,0,0);let e=new e1;return e._impl=await this._impl.getCursor(this._options),e}async getDocuments(){Et.assertArgCount(arguments,0,0);let e=await this._impl.getDocuments(this._options),t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=new bT,t[n]._impl=e[n];return t}async getOne(){Et.assertArgCount(arguments,0,0);let e=await this._impl.getOne(this._options);if(e){let t=new bT;return t._impl=e,t}}async replaceOne(e){return Et.assertArgCount(arguments,1,1),e=Ka.verifySodaDoc(e),await this._impl.replaceOne(this._options,e)}async replaceOneAndGet(e){Et.assertArgCount(arguments,1,1),e=Ka.verifySodaDoc(e);let t=await this._impl.replaceOneAndGet(this._options,e);if(t){let n=new bT;return n._impl=t,n}}async remove(){return Et.assertArgCount(arguments,0,0),await this._impl.remove(this._options)}fetchArraySize(e){return Et.assertArgCount(arguments,1,1),Et.assertParamValue(Number.isInteger(e)&&e>=0,1),this._options.fetchArraySize=e,this}filter(e){return Et.assertArgCount(arguments,1,1),Et.assertParamValue(Ka.isObject(e),1),this._options.filter=JSON.stringify(e),this}hint(e){return Et.assertArgCount(arguments,1,1),Et.assertParamValue(typeof e=="string",1),this._options.hint=e,this}key(e){return Et.assertArgCount(arguments,1,1),Et.assertParamValue(typeof e=="string",1),this._options.key=e,this._options.keys=void 0,this}keys(e){Et.assertArgCount(arguments,1,1),Et.assertParamValue(Array.isArray(e),1);for(let t=0;t<e.length;t++)Et.assertParamValue(typeof e[t]=="string",1);return this._options.keys=e,this._options.key=void 0,this}limit(e){return Et.assertArgCount(arguments,1,1),Et.assertParamValue(typeof e=="number",1),this._options.limit=e,this}skip(e){return Et.assertArgCount(arguments,1,1),Et.assertParamValue(typeof e=="number",1),this._options.skip=e,this}version(e){return Et.assertArgCount(arguments,1,1),Et.assertParamValue(typeof e=="string",1),this._options.version=e,this}};a(FT,"SodaOperation");var Wa=FT;Ka.wrapFns(Wa.prototype,"count","getCursor","getDocuments","getOne","remove","replaceOne","replaceOneAndGet");zm.exports=Wa});var qT=U((_k,Xm)=>{"use strict";var $a=di(),t1=vT(),ht=Ee(),ln=gr(),Hn=jr(),kT=class kT{async createIndex(e){ht.assertArgCount(arguments,1,1),ht.assertParamValue(ln.isObject(e),1);let t={autoCommit:Hn.autoCommit};return await this._impl.createIndex(JSON.stringify(e),t)}async drop(){ht.assertArgCount(arguments,0,0);let e={autoCommit:Hn.autoCommit};return await this._impl.drop(e)}async dropIndex(e,t){let n={autoCommit:Hn.autoCommit};return ht.assertArgCount(arguments,1,2),ht.assertParamValue(typeof e=="string",1),arguments.length==2&&(ht.assertParamValue(typeof t=="object",2),t.force!==void 0&&(ht.assertParamPropValue(typeof t.force=="boolean",2,"force"),n.force=t.force)),await this._impl.dropIndex(e,n)}find(){ht.assertArgCount(arguments,0,0);let e=new t1;return e._impl=this._impl.find(),e}async getDataGuide(){ht.assertArgCount(arguments,0,0);let e=new $a;return e._impl=await this._impl.getDataGuide(),e}async insertMany(e){ht.assertArgCount(arguments,1,1),ht.assertParamValue(Array.isArray(e)&&e.length>0,1);let t=Array(e.length);for(let o=0;o<e.length;o++)t[o]=ln.verifySodaDoc(e[o]);let n={autoCommit:Hn.autoCommit};await this._impl.insertMany(t,n)}async insertManyAndGet(e,t){let n={autoCommit:Hn.autoCommit};ht.assertArgCount(arguments,1,2),ht.assertParamValue(Array.isArray(e)&&e.length>0,1),arguments.length==2&&(ht.assertParamValue(ln.isObject(t),2),t.hint!==void 0&&(ht.assertParamPropValue(typeof t.hint=="string",2,"hint"),n.hint=t.hint));let o=Array(e.length);for(let T=0;T<e.length;T++)o[T]=ln.verifySodaDoc(e[T]);let _=await this._impl.insertManyAndGet(o,n);for(let T=0;T<e.length;T++){let u=o[T]=new $a;u._impl=_[T]}return o}async insertOne(e){ht.assertArgCount(arguments,1,1),e=ln.verifySodaDoc(e);let t={autoCommit:Hn.autoCommit};await this._impl.insertOne(e,t)}async insertOneAndGet(e,t){let n={autoCommit:Hn.autoCommit};ht.assertArgCount(arguments,1,2),e=ln.verifySodaDoc(e),arguments.length==2&&(ht.assertParamValue(ln.isObject(t),2),t.hint!==void 0&&(ht.assertParamPropValue(typeof t.hint=="string",2,"hint"),n.hint=t.hint));let o=new $a;return o._impl=await this._impl.insertOneAndGet(e,n),o}get metaData(){return JSON.parse(this._impl.getMetaData())}get name(){return this._impl.getName()}async save(e){ht.assertArgCount(arguments,1,1),e=ln.verifySodaDoc(e);let t={autoCommit:Hn.autoCommit};await this._impl.save(e,t)}async saveAndGet(e,t){ht.assertArgCount(arguments,1,2),e=ln.verifySodaDoc(e);let n={autoCommit:Hn.autoCommit};arguments.length==2&&(ht.assertParamValue(ln.isObject(t),2),t.hint!==void 0&&(ht.assertParamPropValue(typeof t.hint=="string",2,"hint"),n.hint=t.hint));let o=new $a;return o._impl=await this._impl.saveAndGet(e,n),o}async truncate(){ht.assertArgCount(arguments,0,0),await this._impl.truncate()}};a(kT,"SodaCollection");var za=kT;ln.wrapFns(za.prototype,"createIndex","drop","dropIndex","getDataGuide","insertMany","insertManyAndGet","insertOne","insertOneAndGet","save","saveAndGet","truncate");Xm.exports=za});var KT=U((lk,jm)=>{"use strict";var{Buffer:GT}=require("buffer"),Qm=qT(),r1=di(),or=Ee(),Vs=gr(),Jm=jr(),HT=class HT{_getConnection(){return this._connection}async createCollection(e,t){let n={autoCommit:Jm.autoCommit};or.assertArgCount(arguments,1,2),or.assertParamValue(typeof e=="string",1),arguments.length==2&&(or.assertParamValue(Vs.isObject(t),2),t.mode!==void 0&&(or.assertParamPropValue(Number.isInteger(t.mode)&&t.mode>0,2,"mode"),n.mode=t.mode),t.metaData!==void 0&&(or.assertParamPropValue(Vs.isObject(t.metaData),2,"metaData"),n.metaData=JSON.stringify(t.metaData)));let o=new Qm;return o._impl=await this._impl.createCollection(e,n),o}createDocument(e,t){let n={};or.assertArgCount(arguments,1,2),or.assertParamValue(GT.isBuffer(e)||typeof e=="string"||Vs.isObject(e),1),arguments.length>1&&(or.assertParamValue(Vs.isObject(t),2),n=t,or.assertParamPropString(n,2,"key"),or.assertParamPropString(n,2,"mediaType")),typeof e=="string"?e=GT.from(e):Vs.isObject(e)&&(e=GT.from(JSON.stringify(e)));let o=new r1;return o._impl=this._impl.createDocument(e,n),o}async getCollectionNames(e){let t={};return or.assertArgCount(arguments,0,1),arguments.length==1&&(or.assertParamValue(Vs.isObject(e),1),t=e,t.startsWith!==void 0&&or.assertParamPropValue(typeof t.startsWith=="string",1,"startsWith"),t.limit!==void 0&&or.assertParamPropValue(Number.isInteger(t.limit),1,"limit")),await this._impl.getCollectionNames(t)}async openCollection(e){or.assertArgCount(arguments,1,1),or.assertParamValue(typeof e=="string",1);let t={autoCommit:Jm.autoCommit},n=await this._impl.openCollection(e,t);if(n){let o=new Qm;return o._impl=n,o}}};a(HT,"SodaDatabase");var Xa=HT;Vs.wrapFns(Xa.prototype,"createCollection","getCollectionNames","openCollection");jm.exports=Xa});var XT=U((uk,Zm)=>{"use strict";var n1=YT(),mi=Ai(),{Buffer:s1}=require("buffer"),WT=fi(),Qa=ka(),i1=KT(),o1=require("events"),a1=IT(),O=Ee(),yt=gr(),Ja=Ni(),_1=require("process"),c1=require("util"),bt=ir(),$T=jr(),l1=OT(),nt=Ir(),ao=new Map,zT=class zT extends o1{constructor(){super(),this._dbObjectClasses=new Map,this._closing=!1}_addDefaultsToExecOpts(e){e.connection=this,e.keepInStmtCache===void 0&&(e.keepInStmtCache=!0),$T.addToOptions(e,"autoCommit","dbObjectAsPojo","fetchArraySize","fetchTypeHandler","maxRows","outFormat","prefetchRows")}_buildDbObjectClass(e){let t=a(function(n){if(this._impl=new Ja.DbObjectImpl(e),this.isCollection){let o=new Proxy(this,mi._collectionProxyHandler);if(n!==void 0)for(let _=0;_<n.length;_++)this.append(n[_]);return o}else n!==void 0&&Object.assign(this,n)},"DbObject");if(t.prototype=Object.create(mi.prototype),t.prototype.constructor=t,t.prototype._objType=e,e.elementTypeClass){let n=this._getDbObjectClass(e.elementTypeClass);e.elementTypeClass=n}if(yt.addTypeProperties(e,"elementType"),e.attributes){let n={};for(let o of e.attributes){o.typeClass&&(o.typeClass=this._getDbObjectClass(o.typeClass)),yt.addTypeProperties(o,"type");let _={get(){return this._getAttrValue(o)},set(T){this._setAttrValue(o,T)}};n[o.name]=_}Object.defineProperties(t.prototype,n)}return t.toString=function(){return"DbObjectClass ["+e.fqn+"]"},t}_getDbObjectClass(e){if(e.prototype instanceof mi)return e;let t=this._dbObjectClasses.get(e);return t||(t=this._buildDbObjectClass(e),t._connection=this,t._objType=e,e._connection=this._impl,this._dbObjectClasses.set(e,t)),t}async _getDbObjectClassForName(e){let t=this._dbObjectClasses.get(e);if(!t){let n=await this._impl.getDbObjectClass(e);t=this._getDbObjectClass(n),this._dbObjectClasses.set(e,t)}return t}_isBindDir(e){return e===bt.BIND_IN||e===bt.BIND_OUT||e===bt.BIND_INOUT}_isBindValue(e){return e==null||typeof e=="number"||typeof e=="string"||typeof e=="boolean"||Array.isArray(e)||s1.isBuffer(e)||c1.isDate(e)||e instanceof WT||e instanceof Qa||e instanceof mi}async _processBindUnit(e,t,n){let o=!1;if(t.dir===void 0?e.dir=bt.BIND_IN:(O.assert(this._isBindDir(t.dir),O.ERR_INVALID_BIND_DIRECTION),e.dir=t.dir,o=!0),t.type!==void 0?(typeof t.type=="string"?(e.type=nt.DB_TYPE_OBJECT,e.typeClass=await this._getDbObjectClassForName(t.type),e.objType=e.typeClass._objType):t.type.prototype instanceof mi?(e.type=nt.DB_TYPE_OBJECT,e.typeClass=t.type,e.objType=e.typeClass._objType):(O.assert(t.type instanceof nt.DbType,O.ERR_INVALID_BIND_DATA_TYPE,2),e.type=t.type),o=!0):n&&(e.name&&O.throwErr(O.ERR_MISSING_TYPE_BY_NAME,e.name),O.throwErr(O.ERR_MISSING_TYPE_BY_POS,e.pos)),(e.dir!==bt.BIND_IN||n)&&(t.maxSize!==void 0?(O.assertParamPropValue(Number.isInteger(t.maxSize)&&t.maxSize>0,2,"maxSize"),e.maxSize=t.maxSize,e.checkSize=!0,o=!0):n?(e.type===nt.DB_TYPE_VARCHAR||e.type===nt.DB_TYPE_RAW)&&(e.name&&O.throwErr(O.ERR_MISSING_MAX_SIZE_BY_NAME,e.name),O.throwErr(O.ERR_MISSING_MAX_SIZE_BY_POS,e.pos)):e.maxSize=bt.DEFAULT_MAX_SIZE_FOR_OUT_BINDS),e.isArray=!1,n||t.maxArraySize!==void 0&&(O.assertParamPropValue(Number.isInteger(t.maxArraySize)&&t.maxArraySize>0,2,"maxArraySize"),e.maxArraySize=t.maxArraySize,e.isArray=!0),!n&&t.val!==void 0)return t.val;o||O.throwErr(O.ERR_INVALID_BIND_UNIT)}async _processBindValue(e,t,n){let o=l1.transformValueIn(e,t,n);e.isArray?e.values=o.concat(e.values.slice(o.length)):e.values[n.pos]=o,e.type===nt.DB_TYPE_OBJECT&&e.typeClass===void 0&&(e.typeClass=await this._getDbObjectClass(t._objType),e.objType=e.typeClass._objType)}async _processExecuteBind(e,t){e.isArray=!1;let n;if(this._isBindValue(t)?(e.dir=bt.BIND_IN,n=t):n=await this._processBindUnit(e,t,!1),e.dir!==bt.BIND_OUT){let o={pos:0,allowArray:!0};await this._processBindValue(e,n,o)}e.type===void 0&&(e.type=nt.DB_TYPE_VARCHAR,e.maxSize===void 0&&(e.maxSize=1)),e.isArray&&e.type!==nt.DB_TYPE_VARCHAR&&e.type!==nt.DB_TYPE_NVARCHAR&&e.type!==nt.DB_TYPE_CHAR&&e.type!==nt.DB_TYPE_NCHAR&&e.type!==nt.DB_TYPE_NUMBER&&e.type!==nt.DB_TYPE_BINARY_FLOAT&&e.type!==nt.DB_TYPE_BINARY_DOUBLE&&e.type!==nt.DB_TYPE_DATE&&e.type!==nt.DB_TYPE_TIMESTAMP&&e.type!==nt.DB_TYPE_TIMESTAMP_LTZ&&e.type!==nt.DB_TYPE_TIMESTAMP_TZ&&e.type!==nt.DB_TYPE_RAW&&O.throwErr(O.ERR_INVALID_TYPE_FOR_ARRAY_BIND)}async _processExecuteBinds(e){let t=[];if(Array.isArray(e))for(let n=0;n<e.length;n++){let o=t[n]={pos:n+1,values:[]};await this._processExecuteBind(o,e[n])}else{O.assertParamValue(yt.isObject(e),2);let n=Object.getOwnPropertyNames(e);for(let o=0;o<n.length;o++){let _=t[o]={name:n[o],values:[]};await this._processExecuteBind(_,e[n[o]])}}return t}async _processExecuteManyBinds(e,t){let n=[],o;if(t!==void 0)if(Array.isArray(t)){o=!0;for(let _=0;_<t.length;_++){let T=n[_]={pos:_+1,values:[]};await this._processBindUnit(T,t[_],!0)}}else{o=!1;let _=Object.getOwnPropertyNames(t);for(let T=0;T<_.length;T++){let u=n[T]={name:_[T],values:[]};await this._processBindUnit(u,t[_[T]],!0)}}else{let _=e[0];if(O.assertParamValue(yt.isObjectOrArray(_),2),Array.isArray(_)){o=!0;for(let T=0;T<_.length;T++)n[T]={pos:T+1}}else{o=!1;let T=Object.getOwnPropertyNames(_);for(let u=0;u<T.length;u++)n[u]={name:T[u]}}for(let T=0;T<n.length;T++)n[T].dir=bt.BIND_IN,n[T].isArray=!1,n[T].values=[]}for(let _=0;_<e.length;_++){let T=e[_],u={pos:_,allowArray:!1};O.assert(o&&Array.isArray(T)||!o&&yt.isObject(T),O.ERR_MIXED_BIND);for(let h=0;h<n.length;h++){let A=n[h],N=o?T[h]:T[A.name];await this._processBindValue(A,N,u)}}for(let _=0;_<n.length;_++){let T=n[_];T.type===void 0&&(T.type=nt.DB_TYPE_VARCHAR,T.maxSize=1)}return n}_transformOutBind(e,t){let n=e;if(Array.isArray(e)){n=[];for(let o=0;o<e.length;o++)n.push(this._transformOutBind(e[o],t))}else if(e instanceof Ja.ResultSetImpl)n=new Qa,n._setup(this,e);else if(e instanceof Ja.LobImpl)n=new WT,n._setup(e,!0);else if(e instanceof Ja.DbObjectImpl){let o=this._dbObjectClasses.get(e._objType);n=Object.create(o.prototype),n._impl=e,t.dbObjectAsPojo?n=n._toPojo():n.isCollection&&(n=new Proxy(n,mi._collectionProxyHandler))}return n}_verifyExecOpts(e,t){let n={};if(O.assertParamValue(yt.isObject(e),3),e.autoCommit!==void 0&&(O.assertParamPropValue(typeof e.autoCommit=="boolean",3,"autoCommit"),n.autoCommit=e.autoCommit),e.dbObjectAsPojo!==void 0&&(O.assertParamPropValue(typeof e.dbObjectAsPojo=="boolean",3,"dbObjectAsPojo"),n.dbObjectAsPojo=e.dbObjectAsPojo),e.keepInStmtCache!==void 0&&(O.assertParamPropValue(typeof e.keepInStmtCache=="boolean",3,"keepInStmtCache"),n.keepInStmtCache=e.keepInStmtCache),t)e.bindDefs!==void 0&&(O.assertParamPropValue(yt.isObjectOrArray(e.bindDefs),3,"bindDefs"),n.bindDefs=e.bindDefs),e.batchErrors!==void 0&&(O.assertParamPropValue(typeof e.batchErrors=="boolean",3,"batchErrors"),n.batchErrors=e.batchErrors),e.dmlRowCounts!==void 0&&(O.assertParamPropValue(typeof e.dmlRowCounts=="boolean",3,"dmlRowCounts"),n.dmlRowCounts=e.dmlRowCounts);else{if(e.fetchArraySize!==void 0&&(O.assertParamPropValue(Number.isInteger(e.fetchArraySize)&&e.fetchArraySize>0,3,"fetchArraySize"),n.fetchArraySize=e.fetchArraySize),e.fetchInfo!==void 0){O.assertParamPropValue(yt.isObject(e.fetchInfo),3,"fetchInfo");let o=Object.getOwnPropertyNames(e.fetchInfo),_=new Map($T.fetchTypeMap);for(let T of o){let u=e.fetchInfo[T];u.type===void 0&&O.throwErr(O.ERR_NO_TYPE_FOR_CONVERSION),u.type!==bt.DEFAULT&&u.type!==nt.DB_TYPE_VARCHAR&&u.type!==nt.DB_TYPE_RAW&&O.throwErr(O.ERR_INVALID_TYPE_FOR_CONVERSION),_.set(T,u.type)}n.fetchTypeMap=_}if(e.fetchTypeHandler!==void 0){let o=typeof e.fetchTypeHandler;O.assertParamPropValue(o==="function",3,"fetchTypeHandler"),n.fetchTypeHandler=e.fetchTypeHandler}e.maxRows!==void 0&&(O.assertParamPropValue(Number.isInteger(e.maxRows)&&e.maxRows>=0,3,"maxRows"),n.maxRows=e.maxRows),e.outFormat!==void 0&&(O.assertParamPropValue(e.outFormat===bt.OUT_FORMAT_ARRAY||e.outFormat===bt.OUT_FORMAT_OBJECT,3,"outFormat"),n.outFormat=e.outFormat),e.prefetchRows!==void 0&&(O.assertParamPropValue(Number.isInteger(e.prefetchRows)&&e.prefetchRows>=0,3,"prefetchRows"),n.prefetchRows=e.prefetchRows),e.resultSet!==void 0&&(O.assertParamPropValue(typeof e.resultSet=="boolean",3,"resultSet"),n.resultSet=e.resultSet)}return n}get action(){return null}set action(e){O.assertPropValue(typeof e=="string","action"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setAction(e)}async breakExecution(){O.assertArgCount(arguments,0,0),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.breakExecution()}get callTimeout(){if(this._impl)return this._impl.getCallTimeout()}set callTimeout(e){O.assertPropValue(Number.isInteger(e)&&e>=0,"callTimeout"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setCallTimeout(e)}async changePassword(e,t,n){O.assertArgCount(arguments,3,3),O.assertParamValue(typeof e=="string",1),O.assertParamValue(typeof t=="string",2),O.assertParamValue(typeof n=="string",3),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.changePassword(e,t,n)}get clientId(){return null}set clientId(e){O.assertPropValue(typeof e=="string","clientId"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setClientId(e)}get clientInfo(){return null}set clientInfo(e){O.assertPropValue(typeof e=="string","clientInfo"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setClientInfo(e)}async close(e){let t={};O.assertArgCount(arguments,0,1),arguments.length==1&&(O.assertParamValue(yt.isObject(e),1),t=e,O.assertParamPropBool(t,1,"drop")),O.assert(this._impl&&!this._closing,O.ERR_INVALID_CONNECTION),this._closing=!0;try{await this._impl.close(t)}finally{this._closing=!1}delete this._impl,this._dbObjectClasses.clear(),this.emit("_afterConnClose")}async commit(){O.assertArgCount(arguments,0,0),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.commit()}async createLob(e){O.assertArgCount(arguments,1,1),O.assertParamValue(e===nt.DB_TYPE_CLOB||e===nt.DB_TYPE_BLOB||e===nt.DB_TYPE_NCLOB,1),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let t=new WT;return t._setup(await this._impl.createLob(e),!1),t}get currentSchema(){if(this._impl)return this._impl.getCurrentSchema()}set currentSchema(e){O.assertPropValue(typeof e=="string","currentSchema"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setCurrentSchema(e)}get dbOp(){return null}set dbOp(e){O.assertPropValue(typeof e=="string","dbOp"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setDbOp(e)}get thin(){return $T.thin}get ecid(){return null}set ecid(e){O.assertPropValue(typeof e=="string","ecid"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setECID(e)}async execute(e,t,n){let _=[],T={};O.assertArgCount(arguments,1,3),O.assertParamValue(typeof e=="string",1),arguments.length>=2&&(_=await this._processExecuteBinds(t)),arguments.length==3&&(T=this._verifyExecOpts(n,!1)),this._addDefaultsToExecOpts(T),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let u;try{u=await this._impl.execute(e,1,_,T,!1)}catch(h){throw h.errorNum===1406&&O.throwErr(O.ERR_INSUFFICIENT_BUFFER_FOR_BINDS),h}if(u.resultSet!==void 0){let h=new Qa;h._setup(this,u.resultSet),u.metaData=h._impl.metaData,T.resultSet?u.resultSet=h:(u.rows=await h._getAllRows(),delete u.resultSet)}if(u.outBinds!==void 0)for(let h in u.outBinds){let A=this._transformOutBind(u.outBinds[h],T);u.outBinds[h]=A}if(u.implicitResults)for(let h in u.implicitResults){let A=u.implicitResults[h],N=new Qa;N._setup(this,A),T.resultSet?u.implicitResults[h]=N:u.implicitResults[h]=await N._getAllRows()}return u}async executeMany(e,t,n){let o={},_=[],T;O.assertArgCount(arguments,2,3),O.assertParamValue(typeof e=="string",1),arguments.length==3&&(o=this._verifyExecOpts(n,!0)),this._addDefaultsToExecOpts(o),typeof t=="number"?(O.assertParamValue(Number.isInteger(t)&&t>0,2),T=t,o.bindDefs!==void 0&&(_=await this._processExecuteManyBinds([],o.bindDefs))):(O.assertParamValue(Array.isArray(t)&&t.length>0,2),T=t.length,_=await this._processExecuteManyBinds(t,o.bindDefs)),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let u=await this._impl.execute(e,T,_,o,!0);if(u.outBinds!==void 0)for(let h=0;h<u.outBinds.length;h++){let A=u.outBinds[h];for(let N in A)A[N]=this._transformOutBind(A[N],o)}return u}get externalName(){if(this._impl)return this._impl.getExternalName()}set externalName(e){O.assertPropValue(typeof e=="string","externalName"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setExternalName(e)}async getDbObjectClass(e){return O.assertArgCount(arguments,1,1),O.assertParamValue(typeof e=="string",1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._getDbObjectClassForName(e)}async getQueue(e,t){let n={};O.assertArgCount(arguments,1,2),O.assertParamValue(typeof e=="string",1),arguments.length==2&&(O.assertParamValue(yt.isObject(t),2),n={...t}),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let o=new n1;return await o.create(this,e,n),o}getSodaDatabase(){O.assertArgCount(arguments,0,0),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let e=new i1;return e._impl=this._impl.getSodaDatabase(),e}async getStatementInfo(e){O.assertArgCount(arguments,1,1),O.assertParamValue(typeof e=="string",1),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let t=await this._impl.getStatementInfo(e);if(t.metaData)for(let n=0;n<t.metaData.length;n++){let o=t.metaData[n];yt.addTypeProperties(o,"dbType"),o.fetchType=nt.DB_TYPE_FETCH_TYPE_MAP.get(o.dbType)}return t}get internalName(){if(this._impl)return this._impl.getInternalName()}set internalName(e){O.assertPropValue(typeof e=="string","internalName"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setInternalName(e)}isHealthy(){return this._impl!==void 0&&!this._closing&&this._impl.isHealthy()}get module(){return null}set module(e){O.assertPropValue(typeof e=="string","module"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setModule(e)}get oracleServerVersion(){if(this._impl)return this._impl.getOracleServerVersion()}get oracleServerVersionString(){if(this._impl)return this._impl.getOracleServerVersionString()}async ping(){O.assertArgCount(arguments,0,0),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.ping()}queryStream(e,t,n){O.assertArgCount(arguments,1,3),O.assertParamValue(typeof e=="string",1),arguments.length==3?(O.assertParamValue(yt.isObject(n),3),n={...n}):n={},n.resultSet=!0;let o=new a1;return _1.nextTick(async()=>{try{let _=await this.execute(e,t||[],n);_.resultSet||O.throwErr(O.ERR_NOT_A_QUERY),o._open(_.resultSet)}catch(_){o.destroy(_);return}}),o}async rollback(){O.assertArgCount(arguments,0,0),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.rollback()}async shutdown(e){let t=bt.SHUTDOWN_MODE_DEFAULT;O.assertArgCount(arguments,0,1),e!==void 0&&(O.assertParamValue(typeof t=="number",1),t=e),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.shutdown(t)}async startup(e){let t={};O.assertArgCount(arguments,0,1),arguments.length==1&&(O.assertParamValue(typeof t=="object",1),t=e,O.assertParamPropBool(t,1,"force"),O.assertParamPropBool(t,1,"restrict"),O.assertParamPropString(t,1,"pfile")),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.startup(t)}get stmtCacheSize(){if(this._impl)return this._impl.getStmtCacheSize()}set stmtCacheSize(e){O.assertPropValue(Number.isInteger(e)&&e>=0,"stmtCacheSize"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setStmtCacheSize(e)}async subscribe(e,t){O.assertArgCount(arguments,2,2),O.assertParamValue(typeof e=="string",1),O.assertParamValue(yt.isObject(t),2),t={...t},O.assertParamPropUnsignedInt(t,2,"namespace"),t.namespace===void 0&&(t.namespace=bt.SUBSCR_NAMESPACE_DBCHANGE),O.assertParamPropString(t,2,"ipAddress"),O.assertParamPropUnsignedInt(t,2,"port"),O.assertParamPropUnsignedInt(t,2,"timeout"),O.assertParamPropUnsignedInt(t,2,"operations"),O.assertParamPropUnsignedInt(t,2,"qos"),O.assertParamPropUnsignedInt(t,2,"groupingClass"),O.assertParamPropUnsignedInt(t,2,"groupingValue"),O.assertParamPropUnsignedInt(t,2,"groupingType"),O.assertParamPropBool(t,2,"clientInitiated"),O.assertParamPropFunction(t,2,"callback"),O.assert(t.callback,O.ERR_MISSING_SUBSCR_CALLBACK),t.namespace===bt.SUBSCR_NAMESPACE_DBCHANGE&&(O.assertParamPropString(t,2,"sql"),O.assert(t.sql&&t.sql.length>0,O.ERR_MISSING_SUBSCR_SQL),t.binds!==void 0&&(t.binds=await this._processExecuteBinds(t.binds))),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let n=ao.get(e),o=await this._impl.subscribe(n,t),_;return t.namespace===bt.SUBSCR_NAMESPACE_DBCHANGE?(_=o.subscription,delete o.subscription):(_=o,o=void 0),ao.set(e,_),o}get tag(){if(this._impl)return this._impl.getTag()}set tag(e){O.assertPropValue(typeof e=="string","tag"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setTag(e)}async tpcBegin(e,t,n){O.assertArgCount(arguments,1,3),O.assertParamValue(yt.isXid(e),1),arguments.length<3?n=60:O.assertParamValue(typeof n=="number",3),arguments.length<2?t=bt.TPC_BEGIN_NEW:O.assertParamValue(typeof t=="number",2),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.tpcBegin(e,t,n)}async tpcCommit(e,t){O.assertArgCount(arguments,0,2),arguments.length<2?t=!1:O.assertParamValue(typeof t=="boolean",2),arguments.length>=1&&O.assertParamValue(yt.isXid(e),1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.tpcCommit(e,t)}async tpcEnd(e,t){O.assertArgCount(arguments,0,2),arguments.length<2?t=bt.TPC_END_NORMAL:O.assertParamValue(typeof t=="number",2),arguments.length>=1&&O.assertParamValue(yt.isXid(e),1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.tpcEnd(e,t)}async tpcForget(e){O.assertArgCount(arguments,1,1),O.assertParamValue(yt.isXid(e),1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.tpcForget(e)}async tpcPrepare(e){return O.assertArgCount(arguments,0,1),arguments.length>=1&&O.assertParamValue(yt.isXid(e),1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.tpcPrepare(e)}async tpcRecover(e){O.assertArgCount(arguments,0,1),arguments.length==1?O.assertParamValue(typeof e=="boolean",1):e=!0;let t=`
      SELECT
          formatid as "formatId",
          UTL_RAW.CAST_TO_VARCHAR2(globalid) as "globalTransactionId",
          UTL_RAW.CAST_TO_VARCHAR2(branchid) as "branchQualifier"
      FROM DBA_PENDING_TRANSACTIONS`,n=`
      SELECT
          formatid as "formatId",
          globalid as "globalTransactionId",
          branchid as "branchQualifier"
      FROM DBA_PENDING_TRANSACTIONS`,o={outFormat:bt.OUT_FORMAT_OBJECT,resultSet:!1};return(await this.execute(e?t:n,{},o)).rows}async tpcRollback(e){O.assertArgCount(arguments,0,1),arguments.length==1&&O.assertParamValue(yt.isXid(e),1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.tpcRollback(e)}async unsubscribe(e){O.assertArgCount(arguments,1,1),O.assertParamValue(typeof e=="string",1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),O.assert(ao.has(e),O.ERR_INVALID_SUBSCR),await this._impl.unsubscribe(ao.get(e)),ao.delete(e)}};a(zT,"Connection");var fs=zT;fs.prototype.break=yt.callbackify(fs.prototype.breakExecution);yt.wrapFns(fs.prototype,"changePassword","close","commit","createLob","execute","executeMany","getDbObjectClass","getQueue","getStatementInfo","ping","rollback","shutdown","startup","subscribe","tpcBegin","tpcCommit","tpcEnd","tpcForget","tpcPrepare","tpcRecover","tpcRollback","unsubscribe");fs.prototype.release=fs.prototype.close;Zm.exports=fs});var jT=U((hk,eP)=>{"use strict";var T1=require("process"),u1=jr(),JT=class JT{constructor(e){let t=0;e._totalRequestsEnqueued!==0&&(t=Math.round(e._totalTimeInQueue/e._totalRequestsEnqueued)),this.gatheredDate=Date.now(),this.upTime=this.gatheredDate-e._createdDate,this.upTimeSinceReset=this.gatheredDate-e._timeOfReset,this.connectionRequests=e._totalConnectionRequests,this.requestsEnqueued=e._totalRequestsEnqueued,this.requestsDequeued=e._totalRequestsDequeued,this.failedRequests=e._totalFailedRequests,this.rejectedRequests=e._totalRequestsRejected,this.requestTimeouts=e._totalRequestTimeouts,this.maximumQueueLength=e._maximumQueueLength,this.currentQueueLength=e._connRequestQueue.length,this.timeInQueue=e._totalTimeInQueue,this.minimumTimeInQueue=e._minTimeInQueue,this.maximumTimeInQueue=e._maxTimeInQueue,this.averageTimeInQueue=t,this.connectionsInUse=e.connectionsInUse,this.connectionsOpen=e.connectionsOpen,this.connectString=e.connectString,this.edition=e.edition,this.events=e.events,this.externalAuth=e.externalAuth,this.homogeneous=e.homogeneous,this.poolAlias=e.poolAlias,this.poolIncrement=e.poolIncrement,this.poolMax=e.poolMax,this.poolMaxPerShard=e.poolMaxPerShard,this.poolMin=e.poolMin,this.poolPingInterval=e.poolPingInterval,this.poolTimeout=e.poolTimeout,this.queueMax=e.queueMax,this.queueTimeout=e.queueTimeout,this.sodaMetaDataCache=e.sodaMetaDataCache,this.stmtCacheSize=e.stmtCacheSize,this.user=e.user,this.threadPoolSize=T1.env.UV_THREADPOOL_SIZE,this.thin=u1.thin}logStatistics(){console.log(`
Driver:`),console.log("...thin mode:",this.thin),console.log("Pool statistics:"),console.log("...gathered at:",new Date(this.gatheredDate).toISOString()),console.log("...up time (milliseconds):",this.upTime),console.log("...up time from last reset (milliseconds)",this.upTimeSinceReset),console.log("...connection requests:",this.connectionRequests),console.log("...requests enqueued:",this.requestsEnqueued),console.log("...requests dequeued:",this.requestsDequeued),console.log("...requests failed:",this.failedRequests),console.log("...requests exceeding queueMax:",this.rejectedRequests),console.log("...requests exceeding queueTimeout:",this.requestTimeouts),console.log("...current queue length:",this.currentQueueLength),console.log("...maximum queue length:",this.maximumQueueLength),console.log("...sum of time in queue (milliseconds):",this.timeInQueue),console.log("...minimum time in queue (milliseconds):",this.minimumTimeInQueue),console.log("...maximum time in queue (milliseconds):",this.maximumTimeInQueue),console.log("...average time in queue (milliseconds):",this.averageTimeInQueue),console.log("...pool connections in use:",this.connectionsInUse),console.log("...pool connections open:",this.connectionsOpen),console.log("Pool attributes:"),console.log("...connectString:",this.connectString),console.log("...edition:",this.edition),console.log("...events:",this.events),console.log("...externalAuth:",this.externalAuth),console.log("...homogeneous:",this.homogeneous),console.log("...poolAlias:",this.poolAlias),console.log("...poolIncrement:",this.poolIncrement),console.log("...poolMax:",this.poolMax),console.log("...poolMaxPerShard:",this.poolMaxPerShard),console.log("...poolMin:",this.poolMin),console.log("...poolPingInterval (seconds):",this.poolPingInterval),console.log("...poolTimeout (seconds):",this.poolTimeout),console.log("...queueMax:",this.queueMax),console.log("...queueTimeout (milliseconds):",this.queueTimeout),console.log("...sessionCallback:",this.sessionCallback),console.log("...sodaMetaDataCache:",this.sodaMetaDataCache),console.log("...stmtCacheSize:",this.stmtCacheSize),console.log("...user:",this.user),console.log("Related environment variables:"),console.log("...UV_THREADPOOL_SIZE:",this.threadPoolSize)}};a(JT,"PoolStatistics");var QT=JT;eP.exports=QT});var nP=U((Nk,rP)=>{"use strict";var E1=XT(),h1=require("events"),Kn=ir(),me=Ee(),tP=jr(),Wn=gr(),S1=Ni(),N1=jT(),ZT=class ZT extends h1{constructor(){super(),this._impl=new S1.PoolImpl,this._queueMax=0,this._queueTimeout=0,this._enableStatistics=!1,this._timeOfReset=this._createdDate=Date.now(),this._sessionCallback=void 0,this._connRequestQueue=[],this._connectionClass=tP.connectionClass}_checkPoolOpen(e){this.status===Kn.POOL_STATUS_DRAINING?me.throwErr(me.ERR_POOL_CLOSING):this.status===Kn.POOL_STATUS_CLOSED?me.throwErr(me.ERR_POOL_CLOSED):e||this.status===Kn.POOL_STATUS_RECONFIGURING&&me.throwErr(me.ERR_POOL_RECONFIGURING)}_checkRequestQueue(){let e=this._connectionsOut;for(;this._connRequestQueue.length>0&&e<this.poolMax;){e+=1;let t=this._connRequestQueue.shift();this._enableStatistics&&(this._totalRequestsDequeued+=1,this._updateWaitStatistics(t)),t.timeoutHandle&&clearTimeout(t.timeoutHandle),t.resolve()}}get _enableStats(){return this._enableStatistics}_resetStatistics(){this._timeOfReset=Date.now(),this._totalConnectionRequests=0,this._totalRequestsEnqueued=0,this._totalRequestsDequeued=0,this._totalFailedRequests=0,this._totalRequestsRejected=0,this._totalRequestTimeouts=0,this._maximumQueueLength=this._connRequestQueue.length,this._totalTimeInQueue=0,this._minTimeInQueue=0,this._maxTimeInQueue=0}_setup(e,t){this._queueTimeout=e.queueTimeout,this._queueMax=e.queueMax,this._enableStatistics=e.enableStatistics,this._edition=e.edition,this._eventsFlag=e.events,this._externalAuth=e.externalAuth,this._homogeneous=e.homogeneous,this._user=e.user,this._connectString=e.connectString,this._status=Kn.POOL_STATUS_OPEN,this._connectionsOut=0,this._poolAlias=t,this.on("_checkRequestQueue",this._checkRequestQueue),this._resetStatistics()}_updateWaitStatistics(e){let t=Date.now()-e.enqueuedTime;this._totalTimeInQueue+=t,this._minTimeInQueue===0?this._minTimeInQueue=t:this._minTimeInQueue=Math.min(this._minTimeInQueue,t),this._maxTimeInQueue=Math.max(this._maxTimeInQueue,t)}_verifyGetConnectionOptions(e){let t={};if(e.user!==void 0&&(me.assertParamPropValue(typeof e.user=="string",1,"user"),t.user=e.user),e.username!==void 0&&(me.assert(t.user===void 0,me.ERR_DBL_USER),me.assertParamPropValue(typeof e.username=="string",1,"username"),t.user=e.username),e.password!==void 0&&(me.assertParamPropValue(typeof e.password=="string",1,"password"),t.password=e.password),e.tag!==void 0&&(me.assertParamPropValue(typeof e.tag=="string",1,"tag"),t.tag=e.tag),e.matchAnyTag!==void 0&&(me.assertParamPropValue(typeof e.matchAnyTag=="boolean",1,"matchAnyTag"),t.matchAnyTag=e.matchAnyTag),e.shardingKey!==void 0){let n=e.shardingKey;me.assertParamPropValue(Wn.isShardingKey(n),1,"shardingKey"),t.shardingKey=e.shardingKey}if(e.superShardingKey!==void 0){let n=e.superShardingKey;me.assertParamPropValue(Wn.isShardingKey(n),1,"superShardingKey"),t.superShardingKey=e.superShardingKey}return t}async close(e){let t=0,n=!1;me.assertArgCount(arguments,0,1),arguments.length==1&&(me.assertParamValue(typeof e=="number",1),(e<0||isNaN(e)||e>2**31)&&me.throwErr(me.ERR_INVALID_PARAMETER_VALUE,1),n=!0,this._connectionsOut>0&&(t=e*1e3)),this._checkPoolOpen(!1),t>0&&(this._status=Kn.POOL_STATUS_DRAINING,await new Promise(o=>{let _=setTimeout(()=>{this.removeAllListeners("_allCheckedIn"),o()},t);this.once("_allCheckedIn",()=>{clearTimeout(_),o()})})),await this._impl.close({forceClose:n}),this._status=Kn.POOL_STATUS_CLOSED,this.emit("_afterPoolClose")}get connectionsInUse(){return this._impl.getConnectionsInUse()}get connectionsOpen(){return this._impl.getConnectionsOpen()}get connectString(){return this._connectString}get thin(){return tP.thin}get edition(){return this._edition}get enableStatistics(){return this._enableStatistics}get events(){return this._eventsFlag}get externalAuth(){return this._externalAuth}async getConnection(e){let t,n={};me.assertArgCount(arguments,0,1),arguments.length==1&&(me.assertParamValue(Wn.isObject(e),1),n=this._verifyGetConnectionOptions(e)),n.connectionClass=this._connectionClass,this._checkPoolOpen(!0),this._enableStatistics&&(this._totalConnectionRequests+=1);try{t=this.poolMax}catch(o){throw this._enableStatistics&&(this._totalFailedRequests+=1),o}(this._connectionsOut>=t||this.status===Kn.POOL_STATUS_RECONFIGURING)&&(this._connRequestQueue.length>=this._queueMax&&this._queueMax>=0&&(this._enableStatistics&&(this._totalRequestsRejected+=1),me.throwErr(me.ERR_QUEUE_MAX_EXCEEDED,this._queueMax)),await new Promise((o,_)=>{let T={resolve:o,reject:_};this._queueTimeout!==0&&(T.timeoutHandle=setTimeout(()=>{let u=this._connRequestQueue.indexOf(T);u>=0&&this._connRequestQueue.splice(u,1),this._enableStatistics&&(this._totalRequestTimeouts+=1,this._updateWaitStatistics(T));try{me.throwErr(me.ERR_CONN_REQUEST_TIMEOUT,this._queueTimeout)}catch(h){_(h)}},this._queueTimeout)),this._connRequestQueue.push(T),this._enableStatistics&&(T.enqueuedTime=Date.now(),this._totalRequestsEnqueued+=1,this._maximumQueueLength=Math.max(this._maximumQueueLength,this._connRequestQueue.length))}),this._checkPoolOpen(!0)),this._connectionsOut+=1;try{let o=new E1;o._impl=await this._impl.getConnection(n),o._pool=this;let _=n.tag||"";if(typeof this.sessionCallback=="function"&&(o._impl._newSession||o.tag!=_))try{await new Promise((T,u)=>{this.sessionCallback(o,_,function(h){h?u(h):T()})})}catch(T){throw await o.close({drop:!0}),T}return o.on("_afterConnClose",()=>{this._connectionsOut-=1,this.emit("_checkRequestQueue"),this._connectionsOut==0&&this.emit("_allCheckedIn")}),o}catch(o){throw this._connectionsOut-=1,this._enableStatistics&&(this._totalFailedRequests+=1),this.emit("_checkRequestQueue"),o}}getStatistics(){return this._checkPoolOpen(!1),this._enableStatistics!==!0?null:new N1(this)}get homogeneous(){return this._homogeneous}logStatistics(){let e=this.getStatistics();e===null&&me.throwErr(me.ERR_POOL_STATISTICS_DISABLED),e.logStatistics()}get poolAlias(){return this._poolAlias}get poolIncrement(){return this._impl.getPoolIncrement()}get poolMax(){return this._impl.getPoolMax()}get poolMaxPerShard(){return this._impl.getPoolMaxPerShard()}get poolMin(){return this._impl.getPoolMin()}get poolPingInterval(){return this._impl.getPoolPingInterval()}get poolTimeout(){return this._impl.getPoolTimeout()}get queueMax(){return this._queueMax}get queueTimeout(){return this._queueTimeout}async reconfigure(e){me.assertArgCount(arguments,1,1),me.assertParamValue(Wn.isObject(e)),me.assertParamPropUnsignedInt(e,1,"queueMax"),me.assertParamPropUnsignedInt(e,1,"queueTimeout"),me.assertParamPropBool(e,1,"enableStatistics"),me.assertParamPropBool(e,1,"resetStatistics"),me.assertParamPropUnsignedInt(e,1,"poolMin"),me.assertParamPropUnsignedInt(e,1,"poolMax"),me.assertParamPropUnsignedInt(e,1,"poolMaxPerShard"),me.assertParamPropUnsignedInt(e,1,"poolIncrement"),me.assertParamPropInt(e,1,"poolPingInterval"),me.assertParamPropUnsignedInt(e,1,"poolTimeout"),me.assertParamPropUnsignedInt(e,1,"stmtCacheSize"),me.assertParamPropBool(e,1,"sodaMetaDataCache"),this._checkPoolOpen(!1),this._status=Kn.POOL_STATUS_RECONFIGURING;try{await this._impl.reconfigure(e),(e.resetStatistics==!0||e.enableStatistics==!0&&this._enableStatistics==!1)&&this._resetStatistics(),e.queueMax!==void 0&&(this._queueMax=e.queueMax),e.queueTimeout!==void 0&&(this._queueTimeout=e.queueTimeout),e.enableStatistics!==void 0&&(this._enableStatistics=e.enableStatistics)}finally{this._status=Kn.POOL_STATUS_OPEN}this.emit("_checkRequestQueue")}get sessionCallback(){return this._sessionCallback}async setAccessToken(e){me.assertArgCount(arguments,1,1),me.assertParamValue(Wn.isObject(e),1),me.assertParamPropString(e,1,"token"),me.assertParamPropString(e,1,"privateKey"),await this._impl.setAccessToken(e)}get sodaMetaDataCache(){return this._impl.getSodaMetaDataCache()}get status(){return this._status}get stmtCacheSize(){return this._impl.getStmtCacheSize()}get user(){return this._user}};a(ZT,"Pool");var fr=ZT;fr.prototype.close=Wn.callbackify(fr.prototype.close);fr.prototype.getConnection=Wn.callbackify(fr.prototype.getConnection);fr.prototype.reconfigure=Wn.callbackify(fr.prototype.reconfigure);fr.prototype.setAccessToken=Wn.callbackify(fr.prototype.setAccessToken);fr.prototype.terminate=fr.prototype.close;fr.prototype._logStats=fr.prototype.logStatistics;rP.exports=fr});var At=U((Ak,iP)=>{"use strict";var{Buffer:sP}=require("buffer"),Ft=ir();iP.exports={BIND_IN:Ft.BIND_IN,BIND_INOUT:Ft.BIND_INOUT,BIND_OUT:Ft.BIND_OUT,CLIENT_VERSION:Ft.VERSION_MAJOR<<24|Ft.VERSION_MINOR<<20|Ft.VERSION_PATCH<<12,CSFRM_IMPLICIT:Ft.CSFRM_IMPLICIT,CSFRM_NCHAR:Ft.CSFRM_NCHAR,DRIVER_NAME:Ft.DEFAULT_DRIVER_NAME+" thn",PURITY_DEFAULT:Ft.PURITY_DEFAULT,PURITY_NEW:Ft.PURITY_NEW,PURITY_SELF:Ft.PURITY_SELF,SYSASM:Ft.SYSASM,SYSBKP:Ft.SYSBKP,SYSDBA:Ft.SYSDBA,SYSDG:Ft.SYSDG,SYSKM:Ft.SYSKM,SYSOPER:Ft.SYSOPER,SYSRAC:Ft.SYSRAC,AUTH_MODE_DEFAULT:0,AUTH_MODE_PRELIM:8,AUTH_MODE_SYSASM:32768,AUTH_MODE_SYSBKP:131072,AUTH_MODE_SYSDBA:2,AUTH_MODE_SYSDGD:262144,AUTH_MODE_SYSKMT:524288,AUTH_MODE_SYSOPER:4,AUTH_MODE_SYSRAC:1048576,TNS_AUTH_MODE_LOGON:1,TNS_AUTH_MODE_CHANGE_PASSWORD:2,TNS_AUTH_MODE_SYSDBA:32,TNS_AUTH_MODE_SYSOPER:64,TNS_AUTH_MODE_PRELIM:128,TNS_AUTH_MODE_WITH_PASSWORD:256,TNS_AUTH_MODE_SYSASM:4194304,TNS_AUTH_MODE_SYSBKP:16777216,TNS_AUTH_MODE_SYSDGD:33554432,TNS_AUTH_MODE_SYSKMT:67108864,TNS_AUTH_MODE_SYSRAC:134217728,TNS_AUTH_MODE_IAM_TOKEN:536870912,TNS_PACKET_TYPE_CONNECT:1,TNS_PACKET_TYPE_ACCEPT:2,TNS_PACKET_TYPE_REFUSE:4,TNS_PACKET_TYPE_REDIRECT:5,TNS_PACKET_TYPE_DATA:6,TNS_PACKET_TYPE_RESEND:11,TNS_PACKET_TYPE_MARKER:12,TNS_PACKET_TYPE_CONTROL:14,TNS_MARKER_TYPE_BREAK:1,TNS_MARKER_TYPE_RESET:2,TNS_DATA_TYPE_DEFAULT:0,TNS_DATA_TYPE_VARCHAR:1,TNS_DATA_TYPE_NUMBER:2,TNS_DATA_TYPE_BINARY_INTEGER:3,TNS_DATA_TYPE_FLOAT:4,TNS_DATA_TYPE_STR:5,TNS_DATA_TYPE_VNU:6,TNS_DATA_TYPE_PDN:7,TNS_DATA_TYPE_LONG:8,TNS_DATA_TYPE_VCS:9,TNS_DATA_TYPE_TIDDEF:10,TNS_DATA_TYPE_ROWID:11,TNS_DATA_TYPE_DATE:12,TNS_DATA_TYPE_VBI:15,TNS_DATA_TYPE_RAW:23,TNS_DATA_TYPE_LONG_RAW:24,TNS_DATA_TYPE_UB2:25,TNS_DATA_TYPE_UB4:26,TNS_DATA_TYPE_SB1:27,TNS_DATA_TYPE_SB2:28,TNS_DATA_TYPE_SB4:29,TNS_DATA_TYPE_SWORD:30,TNS_DATA_TYPE_UWORD:31,TNS_DATA_TYPE_PTRB:32,TNS_DATA_TYPE_PTRW:33,TNS_DATA_TYPE_OER8:290,TNS_DATA_TYPE_FUN:291,TNS_DATA_TYPE_AUA:292,TNS_DATA_TYPE_RXH7:293,TNS_DATA_TYPE_NA6:294,TNS_DATA_TYPE_OAC:39,TNS_DATA_TYPE_AMS:40,TNS_DATA_TYPE_BRN:41,TNS_DATA_TYPE_BRP:298,TNS_DATA_TYPE_BRV:299,TNS_DATA_TYPE_KVA:300,TNS_DATA_TYPE_CLS:301,TNS_DATA_TYPE_CUI:302,TNS_DATA_TYPE_DFN:303,TNS_DATA_TYPE_DQR:304,TNS_DATA_TYPE_DSC:305,TNS_DATA_TYPE_EXE:306,TNS_DATA_TYPE_FCH:307,TNS_DATA_TYPE_GBV:308,TNS_DATA_TYPE_GEM:309,TNS_DATA_TYPE_GIV:310,TNS_DATA_TYPE_OKG:311,TNS_DATA_TYPE_HMI:312,TNS_DATA_TYPE_INO:313,TNS_DATA_TYPE_LNF:315,TNS_DATA_TYPE_ONT:316,TNS_DATA_TYPE_OPE:317,TNS_DATA_TYPE_OSQ:318,TNS_DATA_TYPE_SFE:319,TNS_DATA_TYPE_SPF:320,TNS_DATA_TYPE_VSN:321,TNS_DATA_TYPE_UD7:322,TNS_DATA_TYPE_DSA:323,TNS_DATA_TYPE_UIN:68,TNS_DATA_TYPE_PIN:327,TNS_DATA_TYPE_PFN:328,TNS_DATA_TYPE_PPT:329,TNS_DATA_TYPE_STO:331,TNS_DATA_TYPE_ARC:333,TNS_DATA_TYPE_MRS:334,TNS_DATA_TYPE_MRT:335,TNS_DATA_TYPE_MRG:336,TNS_DATA_TYPE_MRR:337,TNS_DATA_TYPE_MRC:338,TNS_DATA_TYPE_VER:339,TNS_DATA_TYPE_LON2:340,TNS_DATA_TYPE_INO2:341,TNS_DATA_TYPE_ALL:342,TNS_DATA_TYPE_UDB:343,TNS_DATA_TYPE_AQI:344,TNS_DATA_TYPE_ULB:345,TNS_DATA_TYPE_ULD:346,TNS_DATA_TYPE_SLS:91,TNS_DATA_TYPE_SID:348,TNS_DATA_TYPE_NA7:349,TNS_DATA_TYPE_LVC:94,TNS_DATA_TYPE_LVB:95,TNS_DATA_TYPE_CHAR:96,TNS_DATA_TYPE_AVC:97,TNS_DATA_TYPE_AL7:354,TNS_DATA_TYPE_K2RPC:355,TNS_DATA_TYPE_BINARY_FLOAT:100,TNS_DATA_TYPE_BINARY_DOUBLE:101,TNS_DATA_TYPE_CURSOR:102,TNS_DATA_TYPE_RDD:104,TNS_DATA_TYPE_XDP:359,TNS_DATA_TYPE_OSL:106,TNS_DATA_TYPE_OKO8:363,TNS_DATA_TYPE_EXT_NAMED:108,TNS_DATA_TYPE_INT_NAMED:109,TNS_DATA_TYPE_EXT_REF:110,TNS_DATA_TYPE_INT_REF:111,TNS_DATA_TYPE_CLOB:112,TNS_DATA_TYPE_BLOB:113,TNS_DATA_TYPE_BFILE:114,TNS_DATA_TYPE_CFILE:115,TNS_DATA_TYPE_RSET:116,TNS_DATA_TYPE_CWD:117,TNS_DATA_TYPE_JSON:119,TNS_DATA_TYPE_NEW_OAC:120,TNS_DATA_TYPE_UD12:380,TNS_DATA_TYPE_AL8:381,TNS_DATA_TYPE_LFOP:382,TNS_DATA_TYPE_FCRT:383,TNS_DATA_TYPE_DNY:384,TNS_DATA_TYPE_OPR:385,TNS_DATA_TYPE_PLS:386,TNS_DATA_TYPE_XID:387,TNS_DATA_TYPE_TXN:388,TNS_DATA_TYPE_DCB:389,TNS_DATA_TYPE_CCA:390,TNS_DATA_TYPE_WRN:391,TNS_DATA_TYPE_TLH:393,TNS_DATA_TYPE_TOH:394,TNS_DATA_TYPE_FOI:395,TNS_DATA_TYPE_SID2:396,TNS_DATA_TYPE_TCH:397,TNS_DATA_TYPE_PII:398,TNS_DATA_TYPE_PFI:399,TNS_DATA_TYPE_PPU:400,TNS_DATA_TYPE_PTE:401,TNS_DATA_TYPE_CLV:146,TNS_DATA_TYPE_RXH8:404,TNS_DATA_TYPE_N12:405,TNS_DATA_TYPE_AUTH:406,TNS_DATA_TYPE_KVAL:407,TNS_DATA_TYPE_DTR:152,TNS_DATA_TYPE_DUN:153,TNS_DATA_TYPE_DOP:154,TNS_DATA_TYPE_VST:155,TNS_DATA_TYPE_ODT:156,TNS_DATA_TYPE_FGI:413,TNS_DATA_TYPE_DSY:414,TNS_DATA_TYPE_DSYR8:415,TNS_DATA_TYPE_DSYH8:416,TNS_DATA_TYPE_DSYL:417,TNS_DATA_TYPE_DSYT8:418,TNS_DATA_TYPE_DSYV8:419,TNS_DATA_TYPE_DSYP:420,TNS_DATA_TYPE_DSYF:421,TNS_DATA_TYPE_DSYK:422,TNS_DATA_TYPE_DSYY:423,TNS_DATA_TYPE_DSYQ:424,TNS_DATA_TYPE_DSYC:425,TNS_DATA_TYPE_DSYA:426,TNS_DATA_TYPE_OT8:427,TNS_DATA_TYPE_DOL:172,TNS_DATA_TYPE_DSYTY:429,TNS_DATA_TYPE_AQE:430,TNS_DATA_TYPE_KV:431,TNS_DATA_TYPE_AQD:432,TNS_DATA_TYPE_AQ8:433,TNS_DATA_TYPE_TIME:178,TNS_DATA_TYPE_TIME_TZ:179,TNS_DATA_TYPE_TIMESTAMP:180,TNS_DATA_TYPE_TIMESTAMP_TZ:181,TNS_DATA_TYPE_INTERVAL_YM:182,TNS_DATA_TYPE_INTERVAL_DS:183,TNS_DATA_TYPE_EDATE:184,TNS_DATA_TYPE_ETIME:185,TNS_DATA_TYPE_ETTZ:186,TNS_DATA_TYPE_ESTAMP:187,TNS_DATA_TYPE_ESTZ:188,TNS_DATA_TYPE_EIYM:189,TNS_DATA_TYPE_EIDS:190,TNS_DATA_TYPE_RFS:449,TNS_DATA_TYPE_RXH10:450,TNS_DATA_TYPE_DCLOB:195,TNS_DATA_TYPE_DBLOB:196,TNS_DATA_TYPE_DBFILE:197,TNS_DATA_TYPE_DJSON:198,TNS_DATA_TYPE_KPN:454,TNS_DATA_TYPE_KPDNR:455,TNS_DATA_TYPE_DSYD:456,TNS_DATA_TYPE_DSYS:457,TNS_DATA_TYPE_DSYR:458,TNS_DATA_TYPE_DSYH:459,TNS_DATA_TYPE_DSYT:460,TNS_DATA_TYPE_DSYV:461,TNS_DATA_TYPE_AQM:462,TNS_DATA_TYPE_OER11:463,TNS_DATA_TYPE_UROWID:208,TNS_DATA_TYPE_AQL:466,TNS_DATA_TYPE_OTC:467,TNS_DATA_TYPE_KFNO:468,TNS_DATA_TYPE_KFNP:469,TNS_DATA_TYPE_KGT8:470,TNS_DATA_TYPE_RASB4:471,TNS_DATA_TYPE_RAUB2:472,TNS_DATA_TYPE_RAUB1:473,TNS_DATA_TYPE_RATXT:474,TNS_DATA_TYPE_RSSB4:475,TNS_DATA_TYPE_RSUB2:476,TNS_DATA_TYPE_RSUB1:477,TNS_DATA_TYPE_RSTXT:478,TNS_DATA_TYPE_RIDL:479,TNS_DATA_TYPE_GLRDD:480,TNS_DATA_TYPE_GLRDG:481,TNS_DATA_TYPE_GLRDC:482,TNS_DATA_TYPE_OKO:483,TNS_DATA_TYPE_DPP:484,TNS_DATA_TYPE_DPLS:485,TNS_DATA_TYPE_DPMOP:486,TNS_DATA_TYPE_TIMESTAMP_LTZ:231,TNS_DATA_TYPE_ESITZ:232,TNS_DATA_TYPE_UB8:233,TNS_DATA_TYPE_STAT:490,TNS_DATA_TYPE_RFX:491,TNS_DATA_TYPE_FAL:492,TNS_DATA_TYPE_CKV:493,TNS_DATA_TYPE_DRCX:494,TNS_DATA_TYPE_KGH:495,TNS_DATA_TYPE_AQO:496,TNS_DATA_TYPE_PNTY:241,TNS_DATA_TYPE_OKGT:498,TNS_DATA_TYPE_KPFC:499,TNS_DATA_TYPE_FE2:500,TNS_DATA_TYPE_SPFP:501,TNS_DATA_TYPE_DPULS:502,TNS_DATA_TYPE_BOOLEAN:252,TNS_DATA_TYPE_AQA:509,TNS_DATA_TYPE_KPBF:510,TNS_DATA_TYPE_TSM:513,TNS_DATA_TYPE_MSS:514,TNS_DATA_TYPE_KPC:516,TNS_DATA_TYPE_CRS:517,TNS_DATA_TYPE_KKS:518,TNS_DATA_TYPE_KSP:519,TNS_DATA_TYPE_KSPTOP:520,TNS_DATA_TYPE_KSPVAL:521,TNS_DATA_TYPE_PSS:522,TNS_DATA_TYPE_NLS:523,TNS_DATA_TYPE_ALS:524,TNS_DATA_TYPE_KSDEVTVAL:525,TNS_DATA_TYPE_KSDEVTTOP:526,TNS_DATA_TYPE_KPSPP:527,TNS_DATA_TYPE_KOL:528,TNS_DATA_TYPE_LST:529,TNS_DATA_TYPE_ACX:530,TNS_DATA_TYPE_SCS:531,TNS_DATA_TYPE_RXH:532,TNS_DATA_TYPE_KPDNS:533,TNS_DATA_TYPE_KPDCN:534,TNS_DATA_TYPE_KPNNS:535,TNS_DATA_TYPE_KPNCN:536,TNS_DATA_TYPE_KPS:537,TNS_DATA_TYPE_APINF:538,TNS_DATA_TYPE_TEN:539,TNS_DATA_TYPE_XSSCS:540,TNS_DATA_TYPE_XSSSO:541,TNS_DATA_TYPE_XSSAO:542,TNS_DATA_TYPE_KSRPC:543,TNS_DATA_TYPE_KVL:560,TNS_DATA_TYPE_SESSGET:563,TNS_DATA_TYPE_SESSREL:564,TNS_DATA_TYPE_XSSDEF:565,TNS_DATA_TYPE_PDQCINV:572,TNS_DATA_TYPE_PDQIDC:573,TNS_DATA_TYPE_KPDQCSTA:574,TNS_DATA_TYPE_KPRS:575,TNS_DATA_TYPE_KPDQIDC:576,TNS_DATA_TYPE_RTSTRM:578,TNS_DATA_TYPE_SESSRET:579,TNS_DATA_TYPE_SCN6:580,TNS_DATA_TYPE_KECPA:581,TNS_DATA_TYPE_KECPP:582,TNS_DATA_TYPE_SXA:583,TNS_DATA_TYPE_KVARR:584,TNS_DATA_TYPE_KPNGN:585,TNS_DATA_TYPE_XSNSOP:590,TNS_DATA_TYPE_XSATTR:591,TNS_DATA_TYPE_XSNS:592,TNS_DATA_TYPE_TXT:593,TNS_DATA_TYPE_XSSESSNS:594,TNS_DATA_TYPE_XSATTOP:595,TNS_DATA_TYPE_XSCREOP:596,TNS_DATA_TYPE_XSDETOP:597,TNS_DATA_TYPE_XSDESOP:598,TNS_DATA_TYPE_XSSETSP:599,TNS_DATA_TYPE_XSSIDP:600,TNS_DATA_TYPE_XSPRIN:601,TNS_DATA_TYPE_XSKVL:602,TNS_DATA_TYPE_XSSSDEF2:603,TNS_DATA_TYPE_XSNSOP2:604,TNS_DATA_TYPE_XSNS2:605,TNS_DATA_TYPE_IMPLRES:611,TNS_DATA_TYPE_OER:612,TNS_DATA_TYPE_UB1ARRAY:613,TNS_DATA_TYPE_SESSSTATE:614,TNS_DATA_TYPE_AC_REPLAY:615,TNS_DATA_TYPE_AC_CONT:616,TNS_DATA_TYPE_KPDNREQ:622,TNS_DATA_TYPE_KPDNRNF:623,TNS_DATA_TYPE_KPNGNC:624,TNS_DATA_TYPE_KPNRI:625,TNS_DATA_TYPE_AQENQ:626,TNS_DATA_TYPE_AQDEQ:627,TNS_DATA_TYPE_AQJMS:628,TNS_DATA_TYPE_KPDNRPAY:629,TNS_DATA_TYPE_KPDNRACK:630,TNS_DATA_TYPE_KPDNRMP:631,TNS_DATA_TYPE_KPDNRDQ:632,TNS_DATA_TYPE_CHUNKINFO:636,TNS_DATA_TYPE_SCN:637,TNS_DATA_TYPE_SCN8:638,TNS_DATA_TYPE_UDS:639,TNS_DATA_TYPE_TNP:640,TNS_TYPE_REP_NATIVE:0,TNS_TYPE_REP_UNIVERSAL:1,TNS_TYPE_REP_ORACLE:10,TNS_MSG_TYPE_PROTOCOL:1,TNS_MSG_TYPE_DATA_TYPES:2,TNS_MSG_TYPE_FUNCTION:3,TNS_MSG_TYPE_ERROR:4,TNS_MSG_TYPE_ROW_HEADER:6,TNS_MSG_TYPE_ROW_DATA:7,TNS_MSG_TYPE_PARAMETER:8,TNS_MSG_TYPE_STATUS:9,TNS_MSG_TYPE_IO_VECTOR:11,TNS_MSG_TYPE_LOB_DATA:14,TNS_MSG_TYPE_WARNING:15,TNS_MSG_TYPE_DESCRIBE_INFO:16,TNS_MSG_TYPE_PIGGYBACK:17,TNS_MSG_TYPE_FLUSH_OUT_BINDS:19,TNS_MSG_TYPE_BIT_VECTOR:21,TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK:23,TNS_MSG_TYPE_IMPLICIT_RESULTSET:27,TNS_MSG_TYPE_ONEWAY_FN:26,TNS_KEYWORD_NUM_CURRENT_SCHEMA:168,TNS_KEYWORD_NUM_EDITION:172,TNS_BIND_USE_INDICATORS:1,TNS_BIND_USE_LENGTH:2,TNS_BIND_ARRAY:64,TNS_BIND_DIR_OUTPUT:16,TNS_BIND_DIR_INPUT:32,TNS_BIND_DIR_INPUT_OUTPUT:48,TNS_EXEC_OPTION_PARSE:1,TNS_EXEC_OPTION_BIND:8,TNS_EXEC_OPTION_DEFINE:16,TNS_EXEC_OPTION_EXECUTE:32,TNS_EXEC_OPTION_FETCH:64,TNS_EXEC_OPTION_COMMIT:256,TNS_EXEC_OPTION_COMMIT_REEXECUTE:1,TNS_EXEC_OPTION_PLSQL_BIND:1024,TNS_EXEC_OPTION_DML_ROWCOUNTS:16384,TNS_EXEC_OPTION_NOT_PLSQL:32768,TNS_EXEC_OPTION_IMPLICIT_RESULTSET:32768,TNS_EXEC_OPTION_DESCRIBE:131072,TNS_EXEC_OPTION_NO_COMPRESSED_FETCH:262144,TNS_EXEC_OPTION_BATCH_ERRORS:524288,TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION:1,TNS_SERVER_PIGGYBACK_OS_PID_MTS:2,TNS_SERVER_PIGGYBACK_TRACE_EVENT:3,TNS_SERVER_PIGGYBACK_SESS_RET:4,TNS_SERVER_PIGGYBACK_SYNC:5,TNS_SERVER_PIGGYBACK_LTXID:7,TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT:8,TNS_SERVER_PIGGYBACK_EXT_SYNC:9,TNS_SESSGET_SESSION_CHANGED:4,TNS_LOB_OP_GET_LENGTH:1,TNS_LOB_OP_READ:2,TNS_LOB_OP_TRIM:32,TNS_LOB_OP_WRITE:64,TNS_LOB_OP_GET_CHUNK_SIZE:16384,TNS_LOB_OP_CREATE_TEMP:272,TNS_LOB_OP_FREE_TEMP:273,TNS_LOB_OP_OPEN:32768,TNS_LOB_OP_CLOSE:65536,TNS_LOB_OP_IS_OPEN:69632,TNS_LOB_OP_ARRAY:524288,TNS_LOB_LOC_OFFSET_FLAG_1:4,TNS_LOB_LOC_OFFSET_FLAG_3:6,TNS_LOB_LOC_OFFSET_FLAG_4:7,TNS_LOB_QLOCATOR_VERSION:4,TNS_LOB_LOC_FLAGS_BLOB:1,TNS_LOB_LOC_FLAGS_VALUE_BASED:32,TNS_LOB_LOC_FLAGS_ABSTRACT:64,TNS_LOB_LOC_FLAGS_INIT:8,TNS_LOB_LOC_FLAGS_TEMP:1,TNS_LOB_LOC_FLAGS_VAR_LENGTH_CHARSET:128,TNS_LOB_OPEN_READ_WRITE:2,TNS_LOB_PREFETCH_FLAG:33554432,TNS_JSON_MAX_LENGTH:32*1024*1024,TNS_JSON_MAGIC_BYTE_1:255,TNS_JSON_MAGIC_BYTE_2:74,TNS_JSON_MAGIC_BYTE_3:90,TNS_JSON_VERSION:1,TNS_JSON_FLAG_HASH_ID_UINT8:256,TNS_JSON_FLAG_HASH_ID_UINT16:512,TNS_JSON_FLAG_NUM_FNAMES_UINT16:1024,TNS_JSON_FLAG_FNAMES_SEG_UINT32:2048,TNS_JSON_FLAG_TINY_NODES_STAT:8192,TNS_JSON_FLAG_TREE_SEG_UINT32:4096,TNS_JSON_FLAG_REL_OFFSET_MODE:1,TNS_JSON_FLAG_INLINE_LEAF:2,TNS_JSON_FLAG_LEN_IN_PCODE:4,TNS_JSON_FLAG_NUM_FNAMES_UINT32:8,TNS_JSON_FLAG_IS_SCALAR:16,TNS_JSON_TYPE_NULL:48,TNS_JSON_TYPE_TRUE:49,TNS_JSON_TYPE_FALSE:50,TNS_JSON_TYPE_STRING_LENGTH_UINT8:51,TNS_JSON_TYPE_NUMBER_LENGTH_UINT8:52,TNS_JSON_TYPE_BINARY_DOUBLE:54,TNS_JSON_TYPE_STRING_LENGTH_UINT16:55,TNS_JSON_TYPE_STRING_LENGTH_UINT32:56,TNS_JSON_TYPE_TIMESTAMP:57,TNS_JSON_TYPE_BINARY_LENGTH_UINT16:58,TNS_JSON_TYPE_BINARY_LENGTH_UINT32:59,TNS_JSON_TYPE_DATE:60,TNS_JSON_TYPE_INTERVAL_YM:61,TNS_JSON_TYPE_INTERVAL_DS:62,TNS_JSON_TYPE_TIMESTAMP_TZ:124,TNS_JSON_TYPE_TIMESTAMP7:125,TNS_JSON_TYPE_BINARY_FLOAT:127,TNS_JSON_TYPE_OBJECT:132,TNS_JSON_TYPE_ARRAY:192,TNS_END_TO_END_ACTION:16,TNS_END_TO_END_CLIENT_IDENTIFIER:1,TNS_END_TO_END_CLIENT_INFO:256,TNS_END_TO_END_DBOP:512,TNS_END_TO_END_MODULE:8,TNS_VERSION_DESIRED:316,TNS_VERSION_MINIMUM:300,TNS_VERSION_MIN_ACCEPTED:315,TNS_VERSION_MIN_LARGE_SDU:315,TNS_SERVICE_OPTIONS:3073,TNS_PROTOCOL_CHARACTERISTICS:20376,TNS_CONNECT_FLAGS:32896,TNS_CAN_RECV_ATTENTION:1024,TNS_CHECK_OOB:1,TNS_FUNC_AUTH_PHASE_ONE:118,TNS_FUNC_AUTH_PHASE_TWO:115,TNS_FUNC_CLOSE_CURSORS:105,TNS_FUNC_COMMIT:14,TNS_FUNC_EXECUTE:94,TNS_FUNC_FETCH:5,TNS_FUNC_LOB_OP:96,TNS_FUNC_LOGOFF:9,TNS_FUNC_PING:147,TNS_FUNC_ROLLBACK:15,TNS_FUNC_SET_END_TO_END_ATTR:135,TNS_FUNC_REEXECUTE:4,TNS_FUNC_REEXECUTE_AND_FETCH:78,TNS_FUNC_SET_SCHEMA:152,TNS_FUNC_SESSION_GET:162,TNS_FUNC_SESSION_RELEASE:163,TNS_FUNC_SESSION_STATE:176,TNS_FUNC_CANCEL_ALL:120,TNS_CHARSET_UTF8:873,TNS_CHARSET_UTF16:2e3,TNS_ENCODING_UTF8:"UTF-8",TNS_ENCODING_UTF16:"UTF-16LE",TNS_ENCODING_MULTI_BYTE:1,TNS_ENCODING_CONV_LENGTH:2,TNS_CCAP_SQL_VERSION:0,TNS_CCAP_LOGON_TYPES:4,TNS_CCAP_FIELD_VERSION:7,TNS_CCAP_SERVER_DEFINE_CONV:8,TNS_CCAP_TTC1:15,TNS_CCAP_OCI1:16,TNS_CCAP_TDS_VERSION:17,TNS_CCAP_RPC_VERSION:18,TNS_CCAP_RPC_SIG:19,TNS_CCAP_DBF_VERSION:21,TNS_CCAP_LOB:23,TNS_CCAP_TTC2:26,TNS_CCAP_UB2_DTY:27,TNS_CCAP_OCI2:31,TNS_CCAP_CLIENT_FN:34,TNS_CCAP_TTC3:37,TNS_CCAP_TTC4:40,TNS_CCAP_LOB2:42,TNS_CCAP_MAX:45,TNS_CCAP_SQL_VERSION_MAX:6,TNS_CCAP_FIELD_VERSION_11_2:6,TNS_CCAP_FIELD_VERSION_12_1:7,TNS_CCAP_FIELD_VERSION_12_2:8,TNS_CCAP_FIELD_VERSION_12_2_EXT1:9,TNS_CCAP_FIELD_VERSION_18_1:10,TNS_CCAP_FIELD_VERSION_18_1_EXT_1:11,TNS_CCAP_FIELD_VERSION_19_1:12,TNS_CCAP_FIELD_VERSION_19_1_EXT_1:13,TNS_CCAP_FIELD_VERSION_20_1:14,TNS_CCAP_FIELD_VERSION_20_1_EXT_1:15,TNS_CCAP_FIELD_VERSION_21_1:16,TNS_CCAP_FIELD_VERSION_23_1:17,TNS_CCAP_FIELD_VERSION_23_1_EXT_1:18,TNS_CCAP_FIELD_VERSION_MAX:18,TNS_CCAP_O5LOGON:8,TNS_CCAP_O5LOGON_NP:2,TNS_CCAP_O7LOGON:32,TNS_CCAP_O8LOGON_LONG_IDENTIFIER:64,TNS_CCAP_O9LOGON_LONG_PASSWORD:128,TNS_CCAP_END_OF_CALL_STATUS:1,TNS_CCAP_IND_RCD:8,TNS_CCAP_FAST_BVEC:32,TNS_CCAP_FAST_SESSION_PROPAGATE:16,TNS_CCAP_APP_CTX_PIGGYBACK:128,TNS_CCAP_TDS_VERSION_MAX:3,TNS_CCAP_RPC_VERSION_MAX:7,TNS_CCAP_RPC_SIG_VALUE:3,TNS_CCAP_DBF_VERSION_MAX:1,TNS_CCAP_IMPLICIT_RESULTS:16,TNS_CCAP_BIG_CHUNK_CLR:32,TNS_CCAP_KEEP_OUT_ORDER:128,TNS_CCAP_LOB_UB8_SIZE:1,TNS_CCAP_LOB_ENCS:2,TNS_CCAP_LOB_PREFETCH:64,TNS_CCAP_DRCP:16,TNS_CCAP_ZLNP:4,TNS_CCAP_INBAND_NOTIFICATION:4,TNS_CCAP_CLIENT_FN_MAX:12,TNS_CCAP_LOB2_QUASI:1,TNS_CCAP_LOB2_2GB_PREFETCH:4,TNS_RCAP_COMPAT:0,TNS_RCAP_TTC:6,TNS_RCAP_MAX:7,TNS_RCAP_COMPAT_81:2,TNS_RCAP_TTC_ZERO_COPY:1,TNS_RCAP_TTC_32K:4,TNS_VERIFIER_TYPE_11G_1:45394,TNS_VERIFIER_TYPE_11G_2:6949,TNS_VERIFIER_TYPE_12C:18453,TNS_MAX_SHORT_LENGTH:252,TNS_ESCAPE_CHAR:253,TNS_LONG_LENGTH_INDICATOR:254,TNS_NULL_LENGTH_INDICATOR:255,TNS_MAX_ROWID_LENGTH:18,TNS_DURATION_MID:2147483648,TNS_DURATION_OFFSET:60,TNS_DURATION_SESSION:10,TNS_MAX_LONG_LENGTH:2147483647,TNS_SDU:8192,TNS_TDU:65535,TNS_TXN_IN_PROGRESS:2,TNS_MAX_CONNECT_DATA:230,TNS_CHUNK_SIZE:32767,TNS_MAX_UROWID_LENGTH:3950,TNS_HAS_REGION_ID:128,TZ_HOUR_OFFSET:20,TZ_MINUTE_OFFSET:60,DRCP_DEAUTHENTICATE:2,TNS_OBJ_IS_VERSION_81:128,TNS_OBJ_IS_DEGENERATE:16,TNS_OBJ_IS_COLLECTION:8,TNS_OBJ_NO_PREFIX_SEG:4,TNS_OBJ_IMAGE_VERSION:1,TNS_OBJ_MAX_SHORT_LENGTH:245,TNS_OBJ_ATOMIC_NULL:253,TNS_OBJ_NON_NULL_OID:2,TNS_OBJ_HAS_EXTENT_OID:8,TNS_OBJ_TOP_LEVEL:1,TNS_OBJ_HAS_INDEXES:16,TNS_OBJ_PLSQL_INDEX_TABLE:1,TNS_OBJ_NESTED_TABLE:2,TNS_OBJ_VARRAY:3,TNS_OBJ_TDS_TYPE_CHAR:1,TNS_OBJ_TDS_TYPE_DATE:2,TNS_OBJ_TDS_TYPE_FLOAT:5,TNS_OBJ_TDS_TYPE_NUMBER:6,TNS_OBJ_TDS_TYPE_VARCHAR:7,TNS_OBJ_TDS_TYPE_BOOLEAN:8,TNS_OBJ_TDS_TYPE_RAW:19,TNS_OBJ_TDS_TYPE_TIMESTAMP:21,TNS_OBJ_TDS_TYPE_TIMESTAMP_TZ:23,TNS_OBJ_TDS_TYPE_OBJ:27,TNS_OBJ_TDS_TYPE_COLL:28,TNS_OBJ_TDS_TYPE_CLOB:29,TNS_OBJ_TDS_TYPE_BLOB:30,TNS_OBJ_TDS_TYPE_TIMESTAMP_LTZ:33,TNS_OBJ_TDS_TYPE_BINARY_FLOAT:37,TNS_OBJ_TDS_TYPE_BINARY_DOUBLE:45,TNS_XML_TYPE_LOB:1,TNS_XML_TYPE_STRING:4,TNS_XML_TYPE_FLAG_SKIP_NEXT_4:1048576,TNS_ERR_VAR_NOT_IN_SELECT_LIST:1007,TNS_ERR_INBAND_MESSAGE:12573,TNS_ERR_INVALID_SERVICE_NAME:12514,TNS_ERR_INVALID_SID:12505,TNS_ERR_NO_DATA_FOUND:1403,TNS_ERR_SESSION_SHUTDOWN:12572,PACKET_HEADER_SIZE:8,NUMBER_AS_TEXT_CHARS:172,NUMBER_MAX_DIGITS:40,BUFFER_CHUNK_SIZE:65536,CHUNKED_BYTES_CHUNK_SIZE:65536,TNS_BASE64_ALPHABET_ARRAY:sP.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),TNS_EXTENT_OID:sP.from("00000000000000000000000000010001","hex")}});var co=U((dk,aP)=>{"use strict";var{Buffer:_o}=require("buffer"),oP=At(),f1=require("crypto"),tu=class tu extends Error{};a(tu,"OutOfPacketsError");var eu=tu;function ja(s,e,t,n){for(let o=0;o<t;o++)s[n+t-o-1]=oP.TNS_BASE64_ALPHABET_ARRAY[e&63],e=e>>6;return n+t}a(ja,"_convertBase64");function A1(s){let e=0;if(s.rba!==0||s.partitionID!==0||s.blockNum!==0||s.slotNum!=0){let t=_o.alloc(oP.TNS_MAX_ROWID_LENGTH);return e=ja(t,s.rba,6,e),e=ja(t,s.partitionID,3,e),e=ja(t,s.blockNum,6,e),ja(t,s.slotNum,3,e),t.toString("utf8")}}a(A1,"encodeRowID");function d1(s){let e=f1.randomBytes(_o.byteLength(s)),t=_o.from(s,"utf8"),n=_o.byteLength(s),o=[];for(let _=0;_<n;_++)o.push(e[_]^t[_]);return t.fill(0),{obfuscatedValue:e,value:o}}a(d1,"setObfuscatedValue");function p1(s,e){let t=[];for(let _=0;_<s.length;_++)t.push(s[_]^e[_]);let n=_o.from(t);t.fill(0);let o=n.toString();return n.fill(0),o}a(p1,"getDeobfuscatedValue");aP.exports={encodeRowID:A1,getDeobfuscatedValue:p1,OutOfPacketsError:eu,setObfuscatedValue:d1}});var Tn=U((mk,_P)=>{"use strict";var{Buffer:ru}=require("buffer"),Ue=At(),Za=Ee(),ou=class ou{constructor(){this.num=0,this.cursorId=0,this.pos=0,this.rowCount=0,this.message="",this.rowID=null,this.batchErrors}};a(ou,"OracleErrorInfo");var nu=ou,au=class au{constructor(e,t="",n="",o=!1,_=!1,T=0,u=0){this.num=e,this.message=t,this.context=n,this.isRecoverable=o,this.isWarning=_,this.code=T,this.offset=u}};a(au,"Error");var su=au,_u=class _u{constructor(e){this.errorInfo=new nu,this.connection=e,this.messageType=Ue.TNS_MSG_TYPE_FUNCTION,this.functionCode=0,this.callStatus=0,this.flushOutBinds=!1,this.endToEndSeqNum=0,this.errorOccurred=!1,this.isWarning=!1,this.flushOutBinds=!1,this.processedError=!1}preProcess(){}async postProcess(){}writeFunctionHeader(e){e.writeUInt8(this.messageType),e.writeUInt8(this.functionCode),e.writeSeqNum(),e.caps.ttcFieldVersion>=Ue.TNS_CCAP_FIELD_VERSION_23_1_EXT_1&&e.writeUB8(0)}processErrorInfo(e){this.callStatus=e.readUB4(),e.skipUB2(),e.skipUB4(),e.skipUB2(),e.skipUB2(),e.skipUB2(),this.errorInfo.cursorId=e.readUB2(),this.errorInfo.pos=e.readUB2(),e.skipUB1(),e.skipUB1(),e.skipUB2(),e.skipUB2(),e.skipUB1(),e.skipUB1(),this.errorInfo.rowID=e.readRowID(),e.skipUB4(),e.skipUB1(),e.skipUB1(),e.skipUB2(),e.skipUB4(),e.readUB4()>0&&e.skipBytesChunked();let n=e.readUB2();if(n>0){this.errorInfo.batchErrors=[];let o=e.readUInt8();for(let _=0;_<n;_++){o===Ue.TNS_LONG_LENGTH_INDICATOR&&e.skipUB4();let T=e.readUB2();this.errorInfo.batchErrors.push(new su(T))}o===Ue.TNS_LONG_LENGTH_INDICATOR&&e.skipBytes(1)}if(n=e.readUB2(),n>0){let o=e.readUInt8();for(let _=0;_<n;_++)o===Ue.TNS_LONG_LENGTH_INDICATOR&&e.skipUB4(),this.errorInfo.batchErrors[_].offset=e.readUB4();o===Ue.TNS_LONG_LENGTH_INDICATOR&&e.skipBytes(1)}if(n=e.readUB2(),n>0){e.skipBytes(1);for(let o=0;o<n;o++)e.skipUB2(),this.errorInfo.batchErrors[o].message=e.readStr(Ue.CSFRM_IMPLICIT),e.skipBytes(2)}this.errorInfo.num=e.readUB4(),this.errorInfo.rowCount=e.readUB8(),this.errorInfo.num!==0&&(this.errorOccurred=!0,this.errorInfo.message=e.readStr(Ue.CSFRM_IMPLICIT),this.errorInfo.message=this.errorInfo.message.replace(/\n+$/,"")),this.errorInfo.isWarning=!1,this.processedError=!0}processReturnParameter(){}processWarningInfo(e){this.errorInfo.num=e.readUB2();let t=e.readUB2();e.skipUB2(),this.errorInfo.num!=0&&t>0&&(this.errorInfo.message=e.readStr(Ue.CSFRM_IMPLICIT)),this.errorInfo.isWarning=!0}hasMoreData(e){return e.numBytesLeft()>0&&!this.flushOutBinds}decode(e){this.process(e)}process(e){this.flushOutBinds=!1,this.processedError=!1;do{this.savePoint(e);let t=e.readUInt8();this.processMessage(e,t)}while(this.hasMoreData(e))}savePoint(e){e.savePoint()}processMessage(e,t){t===Ue.TNS_MSG_TYPE_ERROR?this.processErrorInfo(e):t===Ue.TNS_MSG_TYPE_WARNING?this.processWarningInfo(e):t===Ue.TNS_MSG_TYPE_STATUS?(this.callStatus=e.readUB4(),this.endToEndSeqNum=e.readUB2()):t===Ue.TNS_MSG_TYPE_PARAMETER?this.processReturnParameter(e):t===Ue.TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK?this.processServerSidePiggyBack(e):Za.throwErr(Za.ERR_UNEXPECTED_MESSAGE_TYPE,t,e.pos,e.packetNum)}processServerSidePiggyBack(e){let t=e.readUInt8();if(t===Ue.TNS_SERVER_PIGGYBACK_LTXID){let n=e.readUB4();n>0&&e.skipBytes(n)}else if(!(t===Ue.TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION||t===Ue.TNS_SERVER_PIGGYBACK_TRACE_EVENT))if(t===Ue.TNS_SERVER_PIGGYBACK_OS_PID_MTS)e.skipUB2(),e.skipBytesChunked();else if(t===Ue.TNS_SERVER_PIGGYBACK_SYNC){e.skipUB2(),e.skipUB1();let n=e.readUB2();e.skipBytes(1);for(let o=0;o<n;o++){let _=e.readUB2();_>0&&e.skipBytesChunked(),_=e.readUB2(),_>0&&e.skipBytesChunked(),e.skipUB2(),e.skipUB4()}}else if(t===Ue.TNS_SERVER_PIGGYBACK_EXT_SYNC)e.skipUB2(),e.skipUB1();else if(t===Ue.TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT){e.skipUB2(),e.skipUB1(1),e.skipUB4(),e.skipUB4(),e.skipUB1();let n=e.readUB4();n>0&&e.skipBytes(n)}else if(t===Ue.TNS_SERVER_PIGGYBACK_SESS_RET){e.skipUB2(),e.skipUB1();let n=e.readUB2();if(n>0){e.skipUB1();for(let _=0;_<n;++_){let T=e.readUB2();T>0&&e.skipBytesChunked(),T=e.readUB2(),T>0&&e.skipBytesChunked(),e.skipUB2()}}e.readUB4()&Ue.TNS_SESSGET_SESSION_CHANGED&&this.connection._drcpEstablishSession&&this.connection.resetStatmentCache(),this.connection._drcpEstablishSession=!1,e.skipUB4(),e.skipUB2()}else Za.throwErr(Za.ERR_UNKOWN_SERVER_SIDE_PIGGYBACK,t)}writePiggybacks(e){this.connection._currentSchemaModified&&this._writeCurrentSchemaPiggyback(e),this.connection._cursorsToClose.size>0&&!this.connection._drcpEstablishSession&&this.writeCloseCursorsPiggyBack(e),(this.connection._actionModified||this.connection._clientIdentifierModified||this.connection._dbopModified||this.connection._clientInfoModified||this.connection._moduleModified)&&this._writeEndToEndPiggybacks(e),this.connection._tempLobsTotalSize>0&&this.writeCloseTempLobsPiggyback(e)}writePiggybackHeader(e,t){e.writeUInt8(Ue.TNS_MSG_TYPE_PIGGYBACK),e.writeUInt8(t),e.writeSeqNum(),e.caps.ttcFieldVersion>=Ue.TNS_CCAP_FIELD_VERSION_23_1_EXT_1&&e.writeUB8(0)}writeCloseCursorsPiggyBack(e){this.writePiggybackHeader(e,Ue.TNS_FUNC_CLOSE_CURSORS),e.writeUInt8(1),e.writeUB4(this.connection._cursorsToClose.size);for(let t of this.connection._cursorsToClose.keys())e.writeUB4(t);this.connection._cursorsToClose.clear()}writeCloseTempLobsPiggyback(e){let t=this.connection._tempLobsToClose,n=Ue.TNS_LOB_OP_FREE_TEMP|Ue.TNS_LOB_OP_ARRAY;this.writePiggybackHeader(e,Ue.TNS_FUNC_LOB_OP),e.writeUInt8(1),e.writeUB4(this.connection._tempLobsTotalSize),e.writeUInt8(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(n),e.writeUInt8(0),e.writeUB4(0),e.writeUB8(0),e.writeUB8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);for(let o of t)e.writeBytes(o);this.connection._tempLobsToClose=[],this.connection._tempLobsTotalSize=0}_writeCurrentSchemaPiggyback(e){this.writePiggybackHeader(e,Ue.TNS_FUNC_SET_SCHEMA),e.writeUInt8(1);let t=ru.byteLength(this.connection.currentSchema);e.writeUB4(t),e.writeBytesWithLength(ru.from(this.connection.currentSchema))}_writeEndToEndPiggybacks(e){let t=0;this.connection._actionModified&&(t|=Ue.TNS_END_TO_END_ACTION),this.connection._clientIdentifierModified&&(t|=Ue.TNS_END_TO_END_CLIENT_IDENTIFIER),this.connection._clientInfoModified&&(t|=Ue.TNS_END_TO_END_CLIENT_INFO),this.connection._moduleModified&&(t|=Ue.TNS_END_TO_END_MODULE),this.connection._dbOpModified&&(t|=Ue.TNS_END_TO_END_DBOP),this.writePiggybackHeader(e,Ue.TNS_FUNC_SET_END_TO_END_ATTR),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(t);let n=this.writeEndEndTraceValue(e,this.connection._clientIdentifier,this.connection._clientIdentifierModified),o=this.writeEndEndTraceValue(e,this.connection._module,this.connection._moduleModified),_=this.writeEndEndTraceValue(e,this.connection._action,this.connection._actionModified);e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);let T=this.writeEndEndTraceValue(e,this.connection._clientInfo,this.connection._clientInfoModified);e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);let u=this.writeEndEndTraceValue(e,this.connection._dbOp,this.connection._dbOpModified);this.connection._clientIdentifierModified&&this.connection._clientIdentifier&&e.writeBytesWithLength(n),this.connection._moduleModified&&this.connection._module&&e.writeBytesWithLength(o),this.connection._actionModified&&this.connection._action&&e.writeBytesWithLength(_),this.connection._clientInfoModified&&this.connection._clientInfo&&e.writeBytesWithLength(T),this.connection._dbOpModified&&this.connection._dbOp&&e.writeBytesWithLength(u),this.connection._actionModified=!1,this.connection._action="",this.connection._clientIdentifierModified=!1,this.connection._clientIdentifier="",this.connection._clientInfoModified=!1,this.connection._clientInfo="",this.connection._dbOpModified=!1,this.connection._dbOp="",this.connection._moduleModified=!1,this.connection._module=""}writeEndEndTraceValue(e,t,n){let o;return n?(e.writeUInt8(1),t?(o=ru.from(t),e.writeUB4(o.length)):e.writeUB4(0)):(e.writeUInt8(0),e.writeUB4(0)),o}};a(_u,"Message");var iu=_u;_P.exports=iu});var lo=U((Rk,lP)=>{"use strict";var{Buffer:mn}=require("buffer"),jt=At(),Zr=Ee(),m1=jr(),cP=Ir(),lu=class lu{constructor(e){typeof e=="number"?(this.buf=mn.alloc(e),this.size=0,this.maxSize=e):(this.buf=e,this.size=this.maxSize=e.length),this.pos=0}_grow(e){Zr.throwErr(Zr.ERR_BUFFER_LENGTH_INSUFFICIENT,this.numBytesLeft(),e)}_readBytesWithLength(e){return this.readBytes(e)}_readInteger(e,t,n){let o=!1,_=this.readUInt8();if(_===0)return 0;if(_&128&&(t||Zr.throwErr(Zr.ERR_UNEXPECTED_NEGATIVE_INTEGER,this.pos,this.packetNum),o=!0,_=_&127),_>e&&Zr.throwErr(Zr.ERR_INTEGER_TOO_LARGE,_,e,this.pos,this.packetNum),n)this.skipBytes(_);else{let u=this.readBytes(_).readUIntBE(0,_);return o?-u:u}}numBytesLeft(){return this.size-this.pos}parseBinaryDouble(e){return e=mn.from(e),e[0]&128?e[0]&=127:(e[0]^=255,e[1]^=255,e[2]^=255,e[3]^=255,e[4]^=255,e[5]^=255,e[6]^=255,e[7]^=255),e.readDoubleBE()}parseBinaryFloat(e){return e=mn.from(e),e[0]&128?e[0]&=127:(e[0]^=255,e[1]^=255,e[2]^=255,e[3]^=255),e.readFloatBE()}parseOracleDate(e,t=!0){let n=0;e.length>=11&&(n=Math.floor(e.readUInt32BE(7)/(1e3*1e3)));let o=(e[0]-100)*100+e[1]-100;return m1._makeDate(t,o,e[2],e[3],e[4]-1,e[5]-1,e[6]-1,n,0)}parseOracleNumber(e){let t=e[0],n=!!(t&128);n||(t=t^255),t-=193;let o=t*2+2;if(e.length===1)return n?"0":"-1e126";let _=e.length;!n&&e[e.length-1]===102&&(_-=1);let T,u=[];for(let A=1;A<_;A++){n?T=e[A]-1:T=101-e[A];let N=Math.floor(T/10);N===0&&A===1?o-=1:N===10?(u.push("1"),u.push("0"),o+=1):(N!==0||A>1)&&u.push(N.toString()),N=T%10,(N!==0||A<_-1)&&u.push(N.toString())}let h=[];n||h.push("-"),o<=0&&(h.push("."),o<0&&h.push("0".repeat(-o)));for(let A=0;A<u.length;A++)A>0&&A===o&&h.push("."),h.push(u[A]);if(o>u.length)for(let A=u.length;A<o;A++)h.push("0");return h.join("")}readBinaryDouble(){let e=this.readBytesWithLength();return e?this.parseBinaryDouble(e):null}readBinaryFloat(){let e=this.readBytesWithLength();return e?this.parseBinaryFloat(e):null}readBool(){let e=this.readBytesWithLength();return e?e[e.length-1]===1:null}readBytes(e){let t=this.numBytesLeft();e>t&&Zr.throwErr(Zr.ERR_UNEXPECTED_END_OF_DATA,e,t);let n=this.buf.subarray(this.pos,this.pos+e);return this.pos+=e,n}readBytesWithLength(){let e=this.readUInt8();return e===0||e===jt.TNS_NULL_LENGTH_INDICATOR?null:this._readBytesWithLength(e)}readDbObject(){let e={},t=this.readUB4();return t>0&&(e.toid=mn.from(this.readBytesWithLength())),t=this.readUB4(),t>0&&(e.oid=mn.from(this.readBytesWithLength())),t=this.readUB4(),t>0&&(e.snapshot=mn.from(this.readBytesWithLength())),this.skipUB2(),t=this.readUB4(),this.skipUB2(),t>0&&(e.packedData=mn.from(this.readBytesWithLength())),e}readInt8(){return this.readBytes(1).readInt8()}readOracleDate(e){let t=this.readBytesWithLength();return t?this.parseOracleDate(t,e):null}readOracleNumber(){let e=this.readBytesWithLength();return e?this.parseOracleNumber(e):null}readSB2(){return this._readInteger(2,!0,!1)}readSB4(){return this._readInteger(4,!0,!1)}readSB8(){return this._readInteger(8,!0,!1)}readStr(e){let t=this.readBytesWithLength();return t?e===jt.CSFRM_IMPLICIT?t.toString():mn.from(t).swap16().toString("utf16le"):null}readUB2(){return this._readInteger(2,!1,!1)}readUB4(){return this._readInteger(4,!1,!1)}readUB8(){return this._readInteger(8,!1,!1)}readUInt8(){return this.readBytes(1)[0]}readUInt16BE(){return this.readBytes(2).readUInt16BE()}readUInt16LE(){return this.readBytes(2).readUInt16LE()}readUInt32BE(){return this.readBytes(4).readUInt32BE()}reserveBytes(e){e>this.numBytesLeft()&&this._grow(this.pos+e);let t=this.buf.subarray(this.pos,this.pos+e);return this.pos+=e,t}skipBytes(e){e>this.numBytesLeft()&&Zr.throwErr(Zr.ERR_UNEXPECTED_END_OF_DATA),this.pos+=e}skipSB4(){return this._readInteger(4,!0,!0)}skipUB1(){this.skipBytes(1)}skipUB2(){return this._readInteger(2,!1,!0)}skipUB4(){return this._readInteger(4,!1,!0)}skipUB8(){return this._readInteger(8,!1,!0)}writeBinaryDouble(e){this.writeUInt8(8);let t=this.reserveBytes(8);t.writeDoubleBE(e),t[0]&128?(t[0]^=255,t[1]^=255,t[2]^=255,t[3]^=255,t[4]^=255,t[5]^=255,t[6]^=255,t[7]^=255):t[0]|=128}writeBinaryFloat(e){this.writeUInt8(4);let t=this.reserveBytes(4);t.writeFloatBE(e),t[0]&128?(t[0]^=255,t[1]^=255,t[2]^=255,t[3]^=255):t[0]|=128}writeBytes(e){let t=0,n=e.length;for(;n>0;){let o=this.numBytesLeft();o===0&&this._grow(this.pos+n);let _=Math.min(o,n);e.copy(this.buf,this.pos,t,t+_),this.pos+=_,t+=_,n-=_}}writeBytesWithLength(e){let t=e.length;if(t<=jt.TNS_MAX_SHORT_LENGTH)this.writeUInt8(t),t>0&&this.writeBytes(e);else{let n=0;for(this.writeUInt8(jt.TNS_LONG_LENGTH_INDICATOR);t>0;){let o=Math.min(t,jt.BUFFER_CHUNK_SIZE);this.writeUB4(o),this.writeBytes(e.subarray(n,n+o)),t-=o,n+=o}this.writeUB4(0)}}writeDbObject(e){this.writeUB4(e.toid.length),this.writeBytesWithLength(e.toid),e.oid?(this.writeUB4(e.oid.length),this.writeBytesWithLength(e.oid)):this.writeUB4(0),this.writeUB4(0),this.writeUB4(0);let t=e._getPackedData();this.writeUB4(t.length),this.writeUB4(e.flags),this.writeBytesWithLength(t)}writeOracleDate(e,t,n=!0){let o,_=t._bufferSizeFactor;_>7&&(o=e.getUTCMilliseconds()*1e3*1e3,o===0&&_<=11&&(_=7)),n&&this.writeUInt8(_);let T=this.reserveBytes(_);if(t===cP.DB_TYPE_DATE||t==cP.DB_TYPE_TIMESTAMP){let u=e.getFullYear();T[0]=Math.trunc(u/100)+100,T[1]=u%100+100,T[2]=e.getMonth()+1,T[3]=e.getDate(),T[4]=e.getHours()+1,T[5]=e.getMinutes()+1,T[6]=e.getSeconds()+1}else{let u=e.getUTCFullYear();T[0]=Math.trunc(u/100)+100,T[1]=u%100+100,T[2]=e.getUTCMonth()+1,T[3]=e.getUTCDate(),T[4]=e.getUTCHours()+1,T[5]=e.getUTCMinutes()+1,T[6]=e.getUTCSeconds()+1}_>7&&(T.writeInt32BE(o,7),_>11&&(T[11]=jt.TZ_HOUR_OFFSET,T[12]=jt.TZ_MINUTE_OFFSET))}writeOracleNumber(e){let t=!1;e[0]==="-"&&(t=!0,e=e.substring(1));let n=0,o=e.indexOf("e");o>0&&(n=Number(e.substring(o+1)),e=e.substring(0,o));let _=e.indexOf(".");if(_>0&&(n-=e.length-_-1,e=e.substring(0,_)+e.substring(_+1)),e[0]==="0"&&(e=e.replace(/^0+/,"")),e.length>0&&e[e.length-1]==="0"){let N=e.replace(/0+$/,"");n+=e.length-N.length,e=N}(e.length>jt.NUMBER_MAX_DIGITS||n>126||n<-129)&&Zr.throwErr(Zr.ERR_ORACLE_NUMBER_NO_REPR),(n>0&&n%2===1||n<0&&n%2===-1)&&(n--,e+="0"),e.length%2===1&&(e="0"+e);let T=t&&e.length<jt.NUMBER_MAX_DIGITS,u=e.length/2,h=(n+e.length)/2+192;t?h=h^255:e.length===0&&n===0&&(h=128);let A=this.reserveBytes(u+2+T);A[0]=u+1+T,A[1]=h;for(let N=0,P=2;N<e.length;N+=2,P++){let R=Number(e.substring(N,N+2));t?A[P]=101-R:A[P]=R+1}T&&(A[A.length-1]=102)}writeQLocator(e){this.writeUB4(40),this.writeUInt8(40),this.writeUInt16BE(38),this.writeUInt16BE(jt.TNS_LOB_QLOCATOR_VERSION),this.writeUInt8(jt.TNS_LOB_LOC_FLAGS_VALUE_BASED|jt.TNS_LOB_LOC_FLAGS_BLOB|jt.TNS_LOB_LOC_FLAGS_ABSTRACT),this.writeUInt8(jt.TNS_LOB_LOC_FLAGS_INIT),this.writeUInt16BE(0),this.writeUInt16BE(1),this.writeUInt64BE(e),this.writeUInt16BE(0),this.writeUInt16BE(0),this.writeUInt16BE(0),this.writeUInt64BE(0),this.writeUInt64BE(0)}writeStr(e){this.writeBytes(mn.from(e))}writeInt32BE(e){this.reserveBytes(4).writeInt32BE(e)}writeUB4(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):e<=65535?(this.writeUInt8(2),this.writeUInt16BE(e)):(this.writeUInt8(4),this.writeUInt32BE(e))}writeUB8(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):e<=65535?(this.writeUInt8(2),this.writeUInt16BE(e)):e<=4294967295?(this.writeUInt8(4),this.writeUInt32BE(e)):(this.writeUInt8(8),this.writeUInt64BE(e))}writeUInt8(e){let t=this.reserveBytes(1);t[0]=e}writeUInt16BE(e){this.reserveBytes(2).writeUInt16BE(e)}writeUInt32BE(e){this.reserveBytes(4).writeUInt32BE(e)}writeUInt64BE(e){let t=this.reserveBytes(8);t.writeUInt32BE(0),t.writeUInt32BE(e,4)}writeUInt16LE(e){this.reserveBytes(2).writeUInt16LE(e)}};a(lu,"BaseBuffer");var e_=lu,Tu=class Tu extends e_{constructor(e){e?super(e):(super(jt.BUFFER_CHUNK_SIZE),this.size=this.maxSize)}_grow(e){let t=e%jt.BUFFER_CHUNK_SIZE;t>0&&(e+=jt.BUFFER_CHUNK_SIZE-t);let n=mn.alloc(e);this.buf.copy(n),this.buf=n,this.maxSize=this.size=e}};a(Tu,"GrowableBuffer");var cu=Tu;lP.exports={BaseBuffer:e_,GrowableBuffer:cu}});var hu=U((Dk,TP)=>{"use strict";var{Buffer:Pi}=require("buffer"),st=At(),en=Ee(),$e=Ir(),P1=Ya(),{GrowableBuffer:R1}=lo(),Eu=class Eu extends R1{_readBytesWithLength(e){return e===st.TNS_LONG_LENGTH_INDICATOR&&(e=this.readUInt32BE()),this.readBytes(e)}getIsAtomicNull(){let e=this.readUInt8();return e===st.TNS_OBJ_ATOMIC_NULL||e===st.TNS_NULL_LENGTH_INDICATOR?!0:(this.pos-=1,!1)}readHeader(e){if(e.imageFlags=this.readUInt8(),e.imageVersion=this.readUInt8(),this.readLength(),!(e.imageFlags&st.TNS_OBJ_NO_PREFIX_SEG)){let t=this.readLength();this.skipBytes(t)}}readLength(){let e=this.readUInt8();return e!==st.TNS_LONG_LENGTH_INDICATOR?e:this.readUInt32BE()}writeHeader(e){this.writeUInt8(e.imageFlags),this.writeUInt8(e.imageVersion),this.writeUInt8(st.TNS_LONG_LENGTH_INDICATOR),this.writeUInt32BE(0),e._objType.isCollection&&(this.writeUInt8(1),this.writeUInt8(1))}writeLength(e){e<=st.TNS_OBJ_MAX_SHORT_LENGTH?this.writeUInt8(e):(this.writeUInt8(st.TNS_LONG_LENGTH_INDICATOR),this.writeUInt32BE(e))}};a(Eu,"DbObjectPickleBuffer");var t_=Eu,r_=class r_ extends P1{constructor(e,t){if(typeof e=="function"&&(e=e.prototype._objType),super(e),this.packedData=t,this.unpackedAttrs=new Map,t)this.unpackedAssocArray=new Map,this.unpackedAssocKeys=void 0;else if(e){let n=Pi.from([0,34,st.TNS_OBJ_NON_NULL_OID,st.TNS_OBJ_HAS_EXTENT_OID]);this.toid=Pi.concat([n,e.oid,st.TNS_EXTENT_OID]),this.flags=st.TNS_OBJ_TOP_LEVEL,this.imageFlags=st.TNS_OBJ_IS_VERSION_81,this.imageVersion=st.TNS_OBJ_IMAGE_VERSION,e.isCollection?(this.imageFlags|=st.TNS_OBJ_IS_COLLECTION,e.collectionType===st.TNS_OBJ_PLSQL_INDEX_TABLE?this.unpackedAssocArray=new Map:this.unpackedArray=[]):this.imageFlags|=st.TNS_OBJ_NO_PREFIX_SEG}}_ensureAssocKeys(){this.unpackedAssocKeys||(this.unpackedAssocKeys=[...this.unpackedAssocArray.keys()].sort())}_ensureUnpacked(){this.packedData&&this._unpackData()}_getPackedData(){if(this.packedData)return this.packedData;let e=new t_;e.writeHeader(this),this._packData(e);let t=e.pos;return e.pos=3,e.writeUInt32BE(t),e.buf.subarray(0,t)}_packData(e){let t=this._objType;if(t.isCollection)if(e.writeUInt8(t.collectionFlags),t.collectionType===st.TNS_OBJ_PLSQL_INDEX_TABLE){this._ensureAssocKeys(),e.writeLength(this.unpackedAssocKeys.length);for(let n of this.unpackedAssocKeys)e.writeInt32BE(n),this._packValue(e,t.elementType,t.elementTypeClass,this.unpackedAssocArray.get(n))}else{e.writeLength(this.unpackedArray.length);for(let n of this.unpackedArray)this._packValue(e,t.elementType,t.elementTypeClass,n)}else for(let n of t.attributes)this._packValue(e,n.type,n.typeClass,this.unpackedAttrs.get(n.name))}_packValue(e,t,n,o){if(o==null)n&&!n.prototype.isCollection?e.writeUInt8(st.TNS_OBJ_ATOMIC_NULL):e.writeUInt8(st.TNS_NULL_LENGTH_INDICATOR);else switch(t){case $e.DB_TYPE_CHAR:case $e.DB_TYPE_VARCHAR:e.writeBytesWithLength(Pi.from(o));break;case $e.DB_TYPE_NCHAR:case $e.DB_TYPE_NVARCHAR:e.writeBytesWithLength(Pi.from(o,"utf16le").swap16());break;case $e.DB_TYPE_NUMBER:e.writeOracleNumber(o.toString());break;case $e.DB_TYPE_BINARY_INTEGER:case $e.DB_TYPE_BOOLEAN:e.writeUInt8(4),e.writeUInt32BE(o);break;case $e.DB_TYPE_RAW:e.writeBytesWithLength(o);break;case $e.DB_TYPE_BINARY_DOUBLE:e.writeBinaryDouble(o);break;case $e.DB_TYPE_BINARY_FLOAT:e.writeBinaryFloat(o);break;case $e.DB_TYPE_DATE:case $e.DB_TYPE_TIMESTAMP:case $e.DB_TYPE_TIMESTAMP_LTZ:case $e.DB_TYPE_TIMESTAMP_TZ:e.writeOracleDate(o,t);break;case $e.DB_TYPE_OBJECT:this._objType.isCollection||o._objType.isCollection?e.writeBytesWithLength(o._getPackedData()):o._packData(e);break;default:en.throwErr(en.ERR_NOT_IMPLEMENTED,t)}}_unpackData(){let e=new t_(this.packedData);e.readHeader(this),this._unpackDataFromBuf(e),this.packedData=void 0}_unpackDataFromBuf(e){let t,n,o,_,T=this._objType;if(T.isCollection){T.collectionType===st.TNS_OBJ_PLSQL_INDEX_TABLE?n=new Map:t=[],this.collectionFlags=e.readUInt8();let u=e.readLength();for(let h=0;h<u;h++){T.collectionType===st.TNS_OBJ_PLSQL_INDEX_TABLE&&(o=e.readUInt32BE());let A=this._unpackValue(e,T.elementType,T.elementTypeClass);T.collectionType===st.TNS_OBJ_PLSQL_INDEX_TABLE?n.set(o,A):t.push(A)}}else{_=new Map;for(let u of T.attributes){let h=this._unpackValue(e,u.type,u.typeClass);_.set(u.name,h)}}this.unpackedAttrs=_,this.unpackedArray=t,this.unpackedAssocArray=n}_unpackValue(e,t,n){let o,_,T;switch(t){case $e.DB_TYPE_NUMBER:return T=e.readOracleNumber(),T!==null&&(T=parseFloat(T)),T;case $e.DB_TYPE_BINARY_INTEGER:return e.readBinaryInteger();case $e.DB_TYPE_VARCHAR:case $e.DB_TYPE_CHAR:return e.readStr(st.CSFRM_IMPLICIT);case $e.DB_TYPE_NVARCHAR:case $e.DB_TYPE_NCHAR:return e.readStr(st.CSFRM_NCHAR);case $e.DB_TYPE_RAW:return Pi.from(e.readBytesWithLength());case $e.DB_TYPE_BINARY_DOUBLE:return e.readBinaryDouble();case $e.DB_TYPE_BINARY_FLOAT:return e.readBinaryFloat();case $e.DB_TYPE_DATE:case $e.DB_TYPE_TIMESTAMP:return e.readOracleDate(!0);case $e.DB_TYPE_TIMESTAMP_LTZ:case $e.DB_TYPE_TIMESTAMP_TZ:return e.readOracleDate(!1);case $e.DB_TYPE_BOOLEAN:return e.readBool();case $e.DB_TYPE_OBJECT:return o=e.getIsAtomicNull(),o?null:(_=new r_(n),_._objType.isCollection||this._objType.isCollection?_.packedData=Pi.from(e.readBytesWithLength()):_._unpackDataFromBuf(e),_);default:en.throwErr(en.ERR_NOT_IMPLEMENTED,t)}}append(e){if(this._ensureUnpacked(),this.unpackedArray){let t=this._objType;t.maxNumElements>0&&this.unpackedArray.length>=t.maxNumElements&&en.throwErr(en.ERR_INVALID_COLL_INDEX_SET,this.unpackedArray.length,0,t.maxNumElements),this.unpackedArray.push(e)}else{this._ensureAssocKeys();let t;if(this.unpackedAssocKeys.length===0)t=0;else{let n=this.unpackedAssocKeys.length-1;t=this.unpackedAssocKeys[n]+1}this.unpackedAssocArray.set(t,e),this.unpackedAssocKeys.push(t)}}deleteElement(e){this._ensureUnpacked(),this.unpackedArray?(this._objType.collectionType==st.TNS_OBJ_VARRAY&&en.throwErr(en.ERR_DELETE_ELEMENTS_OF_VARRAY),this.unpackedArray.splice(e,1)):(this._unpackedAssocKeys=void 0,this.unpackedAssocArray.delete(e))}getAttrValue(e){this._ensureUnpacked();let t=this.unpackedAttrs.get(e.name);return t===void 0?null:t}getElement(e){let t;return this._ensureUnpacked(),this.unpackedArray?t=this.unpackedArray[e]:t=this.unpackedAssocArray.get(e),t===void 0&&en.throwErr(en.ERR_INVALID_COLL_INDEX_GET,e),t}getFirstIndex(){if(this._ensureUnpacked(),this.unpackedArray)return 0;if(this.unpackedAssocArray)return this._ensureAssocKeys(),this.unpackedAssocKeys[0]}getKeys(){return this._ensureUnpacked(),this.unpackedArray?Array.from(this.unpackedArray.keys()):this.unpackedAssocArray?(this._ensureAssocKeys(),Array.from(this.unpackedAssocKeys)):[]}getLastIndex(){if(this._ensureUnpacked(),this.unpackedArray){if(this.unpackedArray.length>0)return this.unpackedArray.length-1}else if(this.unpackedAssocArray)return this._ensureAssocKeys(),this.unpackedAssocKeys[this.unpackedAssocKeys.length-1]}getNextIndex(e){if(this._ensureUnpacked(),this.unpackedArray){if(e+1<this.unpackedArray.length)return e+1}else if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys)if(t>e)return t}}getPrevIndex(e){if(this._ensureUnpacked(),this.unpackedArray){if(e>0)return e-1}else if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys.reverse())if(t<e)return t}}getValues(){let e=[];if(this._ensureUnpacked(),this.unpackedArray)return Array.from(this.unpackedArray);if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys)e.push(this.unpackedAssocArray.get(t))}return e}hasElement(e){return this._ensureUnpacked(),this.unpackedArray?e>=0&&e<this.unpackedArray.length:this.unpackedAssocArray.has(e)}setAttrValue(e,t){this._ensureUnpacked(),this.unpackedAttrs.set(e.name,t)}setElement(e,t){if(this._ensureUnpacked(),this.unpackedArray){let n=Math.max(this.unpackedArray.length-1,0);e>n&&en.throwErr(en.ERR_INVALID_COLL_INDEX_SET,e,0,n),this.unpackedArray[e]=t}else this.unpackedAssocArray.has(e)||(this.unpackedAssocKeys=void 0),this.unpackedAssocArray.set(e,t)}trim(e){this._ensureUnpacked(),e>0&&(this.unpackedArray=this.unpackedArray.slice(0,this.unpackedArray.length-e))}};a(r_,"ThinDbObjectImpl");var uu=r_;TP.exports=uu});var fu=U((Ck,uP)=>{"use strict";var{Buffer:To}=require("buffer"),Kt=At(),I1=Tn(),Nu=class Nu extends I1{constructor(e,t){super(e),this.sourceLobImpl=t.sourceLobImpl||null,this.operation=t.operation,this.destLobImpl=t.destLobImpl||null,this.sourceOffset=t.sourceOffset||0,this.destOffset=t.destOffset||0,this.boolFlag=!1,t.data&&(this.data=t.data),this.functionCode=Kt.TNS_FUNC_LOB_OP,this.sendAmount=t.sendAmount,this.amount=t.amount||0}encode(e){this.writeFunctionHeader(e),this.sourceLobImpl===null?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(this.sourceLobImpl._locator.length)),this.destLobImpl===null?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(this.destLobImpl._locator.length)),e.writeUB4(0),e.writeUB4(0),this.operation===Kt.TNS_LOB_OP_CREATE_TEMP?e.writeUInt8(1):e.writeUInt8(0),e.writeUInt8(0),this.operation===Kt.TNS_LOB_OP_CREATE_TEMP||this.operation===Kt.TNS_LOB_OP_IS_OPEN?e.writeUInt8(1):e.writeUInt8(0),e.writeUB4(this.operation),e.writeUInt8(0),e.writeUInt8(0),e.writeUB8(this.sourceOffset),e.writeUB8(this.destOffset),this.sendAmount?e.writeUInt8(1):e.writeUInt8(0);for(let t=0;t<3;t++)e.writeUInt16BE(0);if(this.sourceLobImpl&&e.writeBytes(this.sourceLobImpl._locator),this.destLobImpl&&e.writeBytes(this.destLobImpl._locator),this.operation===Kt.TNS_LOB_OP_CREATE_TEMP&&(this.sourceLobImpl.dbType._csfrm===Kt.CSFRM_NCHAR?(e.caps.checkNCharsetId(),e.writeUB4(Kt.TNS_CHARSET_UTF16)):e.writeUB4(Kt.TNS_CHARSET_UTF8)),this.data){let t;e.writeUInt8(Kt.TNS_MSG_TYPE_LOB_DATA),this.sourceLobImpl.dbType._oraTypeNum===Kt.TNS_DATA_TYPE_BLOB?t=this.data:this.sourceLobImpl.getCsfrm()===Kt.CSFRM_NCHAR?(t=this.data,To.isBuffer(this.data)&&(t=t.toString()),t=To.from(t,Kt.TNS_ENCODING_UTF16).swap16()):t=To.from(this.data),e.writeBytesWithLength(t)}this.sendAmount&&e.writeUB8(this.amount)}processMessage(e,t){if(t===Kt.TNS_MSG_TYPE_LOB_DATA){let n=this.sourceLobImpl.dbType._oraTypeNum,o=e.readBytesWithLength();o!==null&&(n===Kt.TNS_DATA_TYPE_BLOB?o=To.from(o):this.sourceLobImpl.getCsfrm()===Kt.CSFRM_NCHAR?o=To.from(o).swap16().toString("utf16le"):o=o.toString()),this.data=o}else super.processMessage(e,t)}processReturnParameter(e){let t,n,o,_;this.sourceLobImpl!==null&&(_=this.sourceLobImpl._locator.length,t=e.readBytes(_),n=t.slice(0,_),n.copy(this.sourceLobImpl._locator)),this.destLobImpl!==null&&(_=this.destLobImpl._locator.length,t=e.readBytes(_),n=t.slice(0,_),n.copy(this.destLobImpl._locator)),this.operation===Kt.TNS_LOB_OP_CREATE_TEMP&&e.skipUB2(),this.sendAmount&&(this.amount=e.readSB8()),(this.operation===Kt.TNS_LOB_OP_CREATE_TEMP||this.operation===Kt.TNS_LOB_OP_IS_OPEN)&&(o=e.readUB2(),this.boolFlag=o>0)}};a(Nu,"LobOpMessage");var Su=Nu;uP.exports=Su});var s_=U((yk,EP)=>{"use strict";var{Buffer:D1}=require("buffer"),g1=Wl(),ar=At(),C1=fu(),n_=Ee(),du=class du extends g1{_getConnImpl(){return this.conn}async _sendMessage(e){let t=new C1(this.conn,e);return await this.conn._protocol._processMessage(t),e.operation===ar.TNS_LOB_OP_READ?t.data?t.data:null:t.amount}getChunkSize(){return this._chunkSize}async _getChunkSizeAsync(){this.checkConn();let e={operation:ar.TNS_LOB_OP_GET_CHUNK_SIZE,sourceLobImpl:this,sendAmount:!0};this._chunkSize=this._pieceSize=await this._sendMessage(e)}getLength(){return this._length}getPieceSize(){return this._pieceSize}setPieceSize(e){this._pieceSize=e}getType(){return this.dbType}async getData(){return this._length<0&&n_.throwErr(n_.ERR_INVALID_LOB),await this.read(1,this._length)}async read(e,t){this.checkConn();let n={operation:ar.TNS_LOB_OP_READ,sourceLobImpl:this,sourceOffset:e,sendAmount:!0,amount:t||this._pieceSize};return await this._sendMessage(n)}async write(e,t){this.checkConn();let n={operation:ar.TNS_LOB_OP_WRITE,sourceLobImpl:this,sourceOffset:e,data:t};await this._sendMessage(n),this._length+=t.length}getCsfrm(){return this.dbType._csfrm!==ar.CSFRM_NCHAR&&this._locator[ar.TNS_LOB_LOC_OFFSET_FLAG_3]&ar.TNS_LOB_LOC_FLAGS_VAR_LENGTH_CHARSET?ar.CSFRM_NCHAR:this.dbType._csfrm}async create(e,t){this.dirtyLength=!1,this.conn=e,this.dbType=t,this._locator=D1.alloc(40),this._isTempLob=!0,this._length=0;let n={operation:ar.TNS_LOB_OP_CREATE_TEMP,sourceLobImpl:this,amount:ar.TNS_DURATION_SESSION,destOffset:t._oraTypeNum,sourceOffset:t._csfrm,sendAmount:!0};await this._sendMessage(n),await this._getChunkSizeAsync()}checkConn(){this.conn.nscon.connected||n_.throwErr(n_.ERR_LOB_CLOSED)}close(){this.checkConn(),this._isTempLob&&(this.conn._tempLobsToClose.push(this._locator),this.conn._tempLobsTotalSize+=this._locator.length)}init(e,t,n,o,_){this.dirtyLength=!1,this.conn=e,this._locator=t,this._isTempLob=!1,(this._locator[ar.TNS_LOB_LOC_OFFSET_FLAG_4]&ar.TNS_LOB_LOC_FLAGS_TEMP===ar.TNS_LOB_LOC_FLAGS_TEMP||this._locator[ar.TNS_LOB_LOC_OFFSET_FLAG_1]&ar.TNS_LOB_LOC_FLAGS_ABSTRACT===ar.TNS_LOB_LOC_FLAGS_ABSTRACT)&&(this._isTempLob=!0),this.dbType=n,this._length=o,this._chunkSize=_,this._pieceSize=_}};a(du,"ThinLobImpl");var Au=du;EP.exports=Au});var Pu=U((wk,NP)=>{"use strict";var{Buffer:bs}=require("buffer"),hP=co(),Q=At(),O1=Tn(),y1=hu(),L1=s_(),As=Ee(),Ut=Ir(),mu=class mu extends O1{constructor(e,t=null,n=null){super(e),this.statement=t,this.options=n,this.offset=0,this.numExecs=1,this.arrayDmlRowCounts=!1,this.requiresDefine=!1,this.rowIndex=t.bufferRowCount||0,this.dmlRowCounts=[],this.batchErrors=!1,this.outVariables=[],this.inFetch=!1,this.parseOnly=!1,this.resultSetsToSetup=[]}processMessage(e,t){t===Q.TNS_MSG_TYPE_DESCRIBE_INFO?(e.skipBytesChunked(),this.statement.queryVars=[],this.statement.numQueryVars=0,this.statement.bufferRowCount=0,this.statement.bufferRowIndex=0,this.processDescribeInfo(e,this.resultSet),this.outVariables=this.statement.queryVars):t===Q.TNS_MSG_TYPE_ROW_HEADER?this.processRowHeader(e):t===Q.TNS_MSG_TYPE_ROW_DATA?this.processRowData(e):t===Q.TNS_MSG_TYPE_IMPLICIT_RESULTSET?this.processImplicitResultSet(e):t===Q.TNS_MSG_TYPE_BIT_VECTOR?this.processBitVector(e):t===Q.TNS_MSG_TYPE_IO_VECTOR?this.processIOVector(e):t===Q.TNS_MSG_TYPE_FLUSH_OUT_BINDS?this.flushOutBinds=!0:t===Q.TNS_MSG_TYPE_ERROR?this.processErrorInfo(e):super.processMessage(e,t)}hasMoreData(){return!this.processedError&&!this.flushOutBinds}processErrorInfo(e){super.processErrorInfo(e),this.errorInfo.cursorId!==0&&(this.statement.cursorId=this.errorInfo.cursorId),this.statement.isPlSql||(this.statement.rowCount=this.errorInfo.rowCount),this.errorInfo.rowCount>0&&(this.statement.lastRowid=hP.encodeRowID(this.errorInfo.rowID)),this.options.batchErrors=this.errorInfo.batchErrors,this.batchErrors&&this.options.batchErrors===null&&(this.options.batchErrors=[]),this.errorInfo.num===Q.TNS_ERR_NO_DATA_FOUND&&this.statement.isQuery?(this.errorInfo.num=0,this.errorOccurred=!1,this.statement.moreRowsToFetch=!1):this.errorInfo.num!==0&&this.errorInfo.cursorId!==0&&(this.connection._addCursorToClose(this.statement.cursorId),this.connection.statementCache.delete(this.statement.sql)),this.errorInfo.batchErrors&&(this.errorOccurred=!1)}processDescribeInfo(e,t){let n=t.statement;e.skipUB4(),n.numQueryVars=e.readUB4(),n.numQueryVars>0&&e.skipUB1(),t.metadata=[];for(let _=0;_<n.numQueryVars;_++){let T=this.processColumnInfo(e,_+1);n.queryVars.push(T),t.metadata.push(T.fetchInfo)}let o=e.readUB4();o>0&&e.skipBytesChunked(),e.skipUB4(),e.skipUB4(),e.skipUB4(),e.skipUB4(),o=e.readUB4(),o>0&&e.skipBytesChunked(),this.resultSetsToSetup.push(t)}processColumnInfo(e,t){let n=e.readUInt8();e.skipUB1();let o=e.readInt8(),_;n===Q.TNS_DATA_TYPE_NUMBER||n===Q.TNS_DATA_TYPE_INTERVAL_DS||n===Q.TNS_DATA_TYPE_TIMESTAMP||n===Q.TNS_DATA_TYPE_TIMESTAMP_LTZ||n===Q.TNS_DATA_TYPE_TIMESTAMP_TZ?_=e.readSB2():_=e.readInt8();let T=e.readUB4();e.skipUB4(),e.skipUB4();let u,h=e.readUB4();h>0&&(u=bs.from(e.readBytesWithLength())),e.skipUB2(),e.skipUB2();let A=e.readUInt8(),N=e.readUB4();n===Q.TNS_DATA_TYPE_RAW&&(N=T),e.caps.ttcFieldVersion>=Q.TNS_CCAP_FIELD_VERSION_12_2&&e.skipUB4();let P=!!e.readUInt8();e.skipUB1();let R;h=e.readUB4(),h>0&&(R=e.readStr(Q.CSFRM_IMPLICIT));let g;h=e.readUB4(),h>0&&(g=e.readStr(Q.CSFRM_IMPLICIT)),h=e.readUB4();let p;h>0&&(p=e.readStr(Q.CSFRM_IMPLICIT)),e.skipUB2(),e.skipUB4();let m={name:R,dbType:Ut.getTypeByOraTypeNum(n,A),nullable:P};switch(m.dbType){case Ut.DB_TYPE_VARCHAR:case Ut.DB_TYPE_NVARCHAR:case Ut.DB_TYPE_CHAR:case Ut.DB_TYPE_NCHAR:case Ut.DB_TYPE_RAW:m.byteSize=N;break;case Ut.DB_TYPE_NUMBER:m.precision=o;break;case Ut.DB_TYPE_TIMESTAMP:case Ut.DB_TYPE_TIMESTAMP_TZ:case Ut.DB_TYPE_TIMESTAMP_LTZ:m.precision=_;break;case Ut.DB_TYPE_OBJECT:m.dbTypeClass=this.connection._getDbObjectType(g,p,void 0,u),m.dbTypeClass.partial&&this.connection._partialDbObjectTypes.push(m.dbTypeClass);break;default:break}return m.dbType===Ut.DB_TYPE_NUMBER&&(m.scale=_),{fetchInfo:m,type:m.dbType,maxSize:T,columnNum:t,values:new Array(this.options.fetchArraySize)}}processRowHeader(e){e.skipUB1(),e.skipUB2(),e.skipUB4(),e.skipUB4(),e.skipUB2();let t=e.readUB4();t>0&&(e.skipUB1(),this.getBitVector(e,t)),t=e.readUB4(),t>0&&e.skipBytesChunked()}isDuplicateData(e){if(this.bitVector===null||this.bitVector===void 0)return!1;let t=Math.floor(e/8),n=e%8;return(this.bitVector[t]&1<<n)===0}processRowData(e){let t;for(let[n,o]of this.outVariables.entries())if(o.isArray){o.numElementsInArray=e.readUB4();let _=new Array(o.numElementsInArray).fill(null);for(let T=0;T<o.numElementsInArray;T++)t=this.processColumnData(e,o,T),_[T]=t;o.values[this.rowIndex]=_}else if(this.statement.isReturning){let _=e.readUB4(),T=Array(_).fill(null);for(let u=0;u<_;u++)T[u]=this.processColumnData(e,o,u);o.values[this.rowIndex]=T}else this.isDuplicateData(n)?(this.rowIndex===0&&o.outConverter?t=o.lastRawValue:t=o.values[this.statement.lastRowIndex],o.values[this.rowIndex]=t):(t=this.processColumnData(e,o,this.rowIndex),o.values[this.rowIndex]=t);this.rowIndex++,this.inFetch&&(this.statement.lastRowIndex=this.rowIndex-1,this.statement.bufferRowCount++,this.bitVector=null)}processIOVector(e){let t;e.skipUB1();let n=e.readUB2(),_=e.readUB4()*256+n;e.skipUB4(),e.skipUB2(),t=e.readUB2(),t>0&&e.skipBytes(t),t=e.readUB2(),t>0&&e.skipBytes(t),this.outVariables=[];for(let T=0;T<_;T++){let u=this.statement.bindInfoList[T];u.bindDir=e.readUInt8(),u.bindDir!==Q.TNS_BIND_DIR_INPUT&&this.outVariables.push(u.bindVar)}}processColumnData(e,t){let n=t.type,o=n._oraTypeNum,_=n._csfrm,T=t.maxSize,u=null;if(T===0&&o!==Q.TNS_DATA_TYPE_LONG&&o!==Q.TNS_DATA_TYPE_LONG_RAW&&o!==Q.TNS_DATA_TYPE_UROWID)u=null;else if(o===Q.TNS_DATA_TYPE_VARCHAR||o===Q.TNS_DATA_TYPE_CHAR||o===Q.TNS_DATA_TYPE_LONG)_===Q.CSFRM_NCHAR&&e.caps.checkNCharsetId(),u=e.readStr(_);else if(o===Q.TNS_DATA_TYPE_RAW||o===Q.TNS_DATA_TYPE_LONG_RAW)u=e.readBytesWithLength(),u!==null&&(u=bs.from(u));else if(o===Q.TNS_DATA_TYPE_NUMBER)u=e.readOracleNumber(),!this.inFetch&&u!==null&&(u=parseFloat(u));else if(o===Q.TNS_DATA_TYPE_DATE||o===Q.TNS_DATA_TYPE_TIMESTAMP||o===Q.TNS_DATA_TYPE_TIMESTAMP_LTZ||o===Q.TNS_DATA_TYPE_TIMESTAMP_TZ){let h=o===Q.TNS_DATA_TYPE_DATE||o===Q.TNS_DATA_TYPE_TIMESTAMP;u=e.readOracleDate(h)}else if(o===Q.TNS_DATA_TYPE_ROWID)if(!this.inFetch)u=e.readStr(Q.CSFRM_IMPLICIT);else{let h=e.readUInt8();if(SP(h))u=null;else{let A=e.readRowID();u=hP.encodeRowID(A)}}else if(o===Q.TNS_DATA_TYPE_UROWID)this.inFetch?u=e.readURowID():u=e.readStr(Q.CSFRM_IMPLICIT);else if(o===Q.TNS_DATA_TYPE_BINARY_DOUBLE)u=e.readBinaryDouble();else if(o===Q.TNS_DATA_TYPE_BINARY_FLOAT)u=e.readBinaryFloat();else if(o===Q.TNS_DATA_TYPE_BINARY_INTEGER)u=e.readOracleNumber(),u!==null&&(u=parseFloat(u));else if(o===Q.TNS_DATA_TYPE_CURSOR){let h=e.readUInt8();SP(h)?u=null:(u=this.createCursorFromDescribe(e),u.statement.cursorId=e.readUB2(),u.statement.cursorId===0&&t.dir!==Q.BIND_IN&&(this.options.nullifyInvalidCursor?u=null:As.throwErr(As.ERR_INVALID_REF_CURSOR)))}else if(o===Q.TNS_DATA_TYPE_BOOLEAN)u=e.readBool();else if(o===Q.TNS_DATA_TYPE_CLOB||o===Q.TNS_DATA_TYPE_BLOB){if(e.readUB4()>0){u=new L1;let A=e.readUB8(),N=e.readUB4(),P=bs.from(e.readBytesWithLength());u.init(this.connection,P,n,A,N)}}else if(o===Q.TNS_DATA_TYPE_JSON)u=e.readOson();else if(o===Q.TNS_DATA_TYPE_INT_NAMED){let h=e.readDbObject();if(h.packedData){let A=t.fetchInfo?t.fetchInfo.dbTypeClass:t.typeClass;u=new y1(A,h.packedData),u.toid=h.toid,u.oid=h.oid}}else As.throwErr(As.ERR_UNSUPPORTED_DATA_TYPE,n.num,t.columnNum);if(this.inFetch)(o===Q.TNS_DATA_TYPE_LONG||o===Q.TNS_DATA_TYPE_LONG_RAW||t.maxSize>e.caps.maxStringSize)&&(e.skipSB4(),e.skipUB4());else{let h=e.readSB4();h<0&&o===Q.TNS_DATA_TYPE_BOOLEAN?u=null:h!==0&&u!==null&&As.throwErr(As.ERR_INSUFFICIENT_BUFFER_FOR_BINDS)}return u}processReturnParameter(e){let t=0,n,o=e.readUB2();for(let T=0;T<o;T++)e.skipUB4();let _=e.readUB2();_>0&&e.skipBytes(_),o=e.readUB2();for(let T=0;T<o;T++)_=e.readUB2(),_>0&&(n=e.readStr(Q.CSFRM_IMPLICIT)),_=e.readUB2(),_>0&&e.skipBytesChunked(),t=e.readUB2(),t===Q.TNS_KEYWORD_NUM_CURRENT_SCHEMA?this.connection.currentSchema=n:t===Q.TNS_KEYWORD_NUM_EDITION&&(this.connection._edition=n);if(_=e.readUB2(),_>0&&e.skip(_),this.arrayDmlRowCounts){let T=e.readUB4(),u=this.options.dmlRowCounts=[];for(let h=0;h<T;h++){let A=e.readUB8();u.push(A)}}}process(e){this.bitVector=this.savedBitVector,super.process(e)}savePoint(e){this.savedBitVector=this.bitVector,super.savePoint(e)}async postProcess(){if(this.outVariables)for(let e of this.outVariables)if(e.isArray)for(let t=0;t<e.numElementsInArray;t++)e.outConverter&&(e.values[0][t]=await e.outConverter(e.values[0][t]));else e.outConverter&&(e.values[0]=await e.outConverter(e.values[0]));await this.connection._populatePartialDbObjectTypes();for(let e of this.resultSetsToSetup){e._setup(this.options,e.metadata);for(let t of e.statement.queryVars)(t.type===Ut.DB_TYPE_CLOB||t.type===Ut.DB_TYPE_NCLOB||t.type===Ut.DB_TYPE_BLOB||t.type===Ut.DB_TYPE_JSON)&&(t.type!==t.fetchInfo.fetchType&&(t.type=t.fetchInfo.fetchType,t.maxSize=Q.TNS_MAX_LONG_LENGTH),e.statement.requiresDefine=!0,e.statement.noPrefetch=!0)}}preProcess(){if(this.statement.isReturning&&!this.parseOnly){this.outVariables=[];for(let e of this.statement.bindInfoList)e.isReturnBind&&this.outVariables.push(e.bindVar)}if(this.statement.isQuery&&(this.inFetch=!0,this.statement.queryVars)){this.outVariables=[];for(let e=0;e<this.statement.queryVars.length;e++)this.outVariables.push(this.statement.queryVars[e])}}processBitVector(e){this.numColumnsSent=e.readUB2();let t=Math.floor(this.statement.numQueryVars/8);this.statement.numQueryVars%8>0&&(t+=1),this.getBitVector(e,t)}getBitVector(e,t){this.bitVector=bs.from(e.readBytes(t))}processBindParams(e,t){let n=[],o=[];for(let _ of t)_.isReturnBind||o.push(_),n.push(_.bindVar);return this.writeColumnMetadata(e,n),o}writeColumnMetadata(e,t){for(let n of t){let o=n.type._oraTypeNum,_=n.maxSize||n.type._bufferSizeFactor,T=0;n.type._csfrm===Q.CSFRM_NCHAR&&(_*=n.type._bufferSizeFactor),[Q.TNS_DATA_TYPE_ROWID,Q.TNS_DATA_TYPE_UROWID].includes(o)&&(o=Q.TNS_DATA_TYPE_VARCHAR,_=Q.TNS_MAX_UROWID_LENGTH);let u=Q.TNS_BIND_USE_INDICATORS;n.isArray&&(u|=Q.TNS_BIND_ARRAY);let h=0;if(n.type===Ut.DB_TYPE_BLOB||n.type===Ut.DB_TYPE_CLOB||n.type===Ut.DB_TYPE_NCLOB?h=Q.TNS_LOB_PREFETCH_FLAG:n.type===Ut.DB_TYPE_JSON&&(h=Q.TNS_LOB_PREFETCH_FLAG,_=T=Q.TNS_JSON_MAX_LENGTH),e.writeUInt8(o),e.writeUInt8(u),e.writeUInt8(0),e.writeUInt8(0),_>e.caps.maxStringSize?e.writeUB4(Q.TNS_MAX_LONG_LENGTH):e.writeUB4(_),n.isArray?e.writeUB4(n.maxArraySize):e.writeUB4(0),e.writeUB4(h),n.objType){let A=n.objType;e.writeUB4(A.oid.length),e.writeBytesWithLength(A.oid),e.writeUB4(A.version)}else e.writeUB4(0),e.writeUB4(0);n.type._csfrm!==0?e.writeUB4(Q.TNS_CHARSET_UTF8):e.writeUB4(0),e.writeUInt8(n.type._csfrm),e.writeUB4(T),e.caps.ttcFieldVersion>=Q.TNS_CCAP_FIELD_VERSION_12_2&&e.writeUB4(0)}}writeBindParamsRow(e,t,n){let o=this.offset,_=!1;for(let T of t){if(T.isReturnBind)continue;let u=T.bindVar;if(u.isArray){let h=u.values.length;e.writeUB4(h);for(let A=0;A<h;A++)this.writeBindParamsColumn(e,u,u.values[A])}else u.maxSize>e.caps.maxStringSize?_=!0:this.writeBindParamsColumn(e,u,u.values[n+o])}if(_)for(let T of t){if(T.isReturnBind)continue;let u=T.bindVar;u.maxSize>e.caps.maxStringSize&&this.writeBindParamsColumn(e,u,u.values[n+o])}}writeBindParamsColumn(e,t,n){let o=t.type._oraTypeNum,_;if(n==null&&o!==Q.TNS_DATA_TYPE_CURSOR&&o!==Q.TNS_DATA_TYPE_JSON)o===Q.TNS_DATA_TYPE_BOOLEAN?(e.writeUInt8(Q.TNS_ESCAPE_CHAR),e.writeUInt8(1)):o===Q.TNS_DATA_TYPE_INT_NAMED?(e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(Q.TNS_OBJ_TOP_LEVEL)):e.writeUInt8(0);else if(o===Q.TNS_DATA_TYPE_NUMBER||o===Q.TNS_DATA_TYPE_BINARY_INTEGER)typeof n=="boolean"?_=n?"1":"0":_=n.toString(),e.writeOracleNumber(_);else if(o===Q.TNS_DATA_TYPE_VARCHAR||o===Q.TNS_DATA_TYPE_CHAR||o===Q.TNS_DATA_TYPE_LONG||o===Q.TNS_DATA_TYPE_RAW||o===Q.TNS_DATA_TYPE_LONG_RAW)t.type._csfrm===Q.CSFRM_NCHAR?(e.caps.checkNCharsetId(),n=bs.from(n,Q.TNS_ENCODING_UTF16).swap16()):n=bs.from(n),e.writeBytesWithLength(n);else if(o===Q.TNS_DATA_TYPE_DATE||o===Q.TNS_DATA_TYPE_TIMESTAMP||o===Q.TNS_DATA_TYPE_TIMESTAMP_TZ||o===Q.TNS_DATA_TYPE_TIMESTAMP_LTZ)e.writeOracleDate(n,t.type);else if(o===Q.TNS_DATA_TYPE_BINARY_DOUBLE)e.writeBinaryDouble(n);else if(o===Q.TNS_DATA_TYPE_BINARY_FLOAT)e.writeBinaryFloat(n);else if(o===Q.TNS_DATA_TYPE_CURSOR){let T=n;n||(T=this.connection._createResultSet()),T.statement.cursorId===0?(e.writeUInt8(1),e.writeUInt8(0)):(e.writeUB4(1),e.writeUB4(T.statement.cursorId))}else if(o===Q.TNS_DATA_TYPE_BOOLEAN)n?(e.writeUInt8(2),e.writeUInt16BE(257)):e.writeUInt16BE(256);else if(o===Q.TNS_DATA_TYPE_CLOB||o===Q.TNS_DATA_TYPE_BLOB)e.writeUB4(n._locator.length),e.writeBytesWithLength(n._locator);else if([Q.TNS_DATA_TYPE_ROWID,Q.TNS_DATA_TYPE_UROWID].includes(o))e.writeBytesWithLength(bs.from(n));else if(o===Q.TNS_DATA_TYPE_JSON)e.writeOson(n);else if(o===Q.TNS_DATA_TYPE_INT_NAMED)e.writeDbObject(n);else{let T=`Binding data of type ${t.type}`;As.throwErr(As.ERR_NOT_IMPLEMENTED,T)}}createCursorFromDescribe(e){let t=this.connection._createResultSet(this.options);return t.options.moreRowsToFetch=!0,t.statement.isQuery=!0,t.statement.requiresFullExecute=!0,this.processDescribeInfo(e,t),t}processImplicitResultSet(e){this.options.implicitResultSet=[];let t=e.readUB4();for(let n=0;n<t;n++){let o=e.readUInt8();e.skipBytes(o);let _=this.createCursorFromDescribe(e);_.statement.cursorId=e.readUB2(),this.options.implicitResultSet.push(_)}}};a(mu,"MessageWithData");var pu=mu,SP=a(s=>s===0||s===Q.TNS_NULL_LENGTH_INDICATOR,"isNullLength");NP.exports=pu});var Du=U((Uk,AP)=>{"use strict";var w1=Pu(),ct=At(),fP=Ee(),Iu=class Iu extends w1{constructor(e,t,n,o){super(e,t,n),!o&&t.isQuery&&(o=e._createResultSet(n,t)),this.resultSet=o,this.functionCode=ct.TNS_FUNC_EXECUTE,this.bindParams=void 0,this.currentRow=0}writeExecuteMessage(e){let t=0,n=0,o=0,_=1,T=this.statement,u=T.bindInfoList;if(!T.requiresDefine&&!this.parseOnly&&u&&(o=u.length),T.requiresDefine?t|=ct.TNS_EXEC_OPTION_DEFINE:!this.parseOnly&&T.sql&&(n=ct.TNS_EXEC_OPTION_IMPLICIT_RESULTSET,t|=ct.TNS_EXEC_OPTION_EXECUTE),(T.cursorId===0||T.isDdl)&&(t|=ct.TNS_EXEC_OPTION_PARSE),T.isQuery&&(this.parseOnly?t|=ct.TNS_EXEC_OPTION_DESCRIBE:(T.cursorId===0||T.requiresDefine?_=this.options.prefetchRows:_=this.options.fetchArraySize,_>0&&!T.noPrefetch&&(t|=ct.TNS_EXEC_OPTION_FETCH))),!T.isPlSql&&!this.parseOnly?t|=ct.TNS_EXEC_OPTION_NOT_PLSQL:T.isPlSql&&o>0&&(t|=ct.TNS_EXEC_OPTION_PLSQL_BIND),o>0&&(t|=ct.TNS_EXEC_OPTION_BIND),this.batchErrors&&(t|=ct.TNS_EXEC_OPTION_BATCH_ERRORS),this.arrayDmlRowCounts&&(n=ct.TNS_EXEC_OPTION_DML_ROWCOUNTS),this.options.autoCommit&&(t|=ct.TNS_EXEC_OPTION_COMMIT),this.writePiggybacks(e),this.writeFunctionHeader(e),e.writeUB4(t),e.writeUB4(T.cursorId),T.cursorId===0||T.isDdl?(e.writeUInt8(1),e.writeUB4(T.sqlLength)):(e.writeUInt8(0),e.writeUB4(0)),e.writeUInt8(1),e.writeUB4(13),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(_),e.writeUB4(ct.TNS_MAX_LONG_LENGTH),o===0?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(o)),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),T.requiresDefine?(e.writeUInt8(1),e.writeUB4(this.statement.queryVars.length)):(e.writeUInt8(0),e.writeUB4(0)),e.writeUB4(0),e.writeUInt8(0),e.writeUInt8(1),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUB4(0),this.arrayDmlRowCounts?(e.writeUInt8(1),e.writeUB4(this.numExecs),e.writeUInt8(1)):(e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0)),e.caps.ttcFieldVersion>=ct.TNS_CCAP_FIELD_VERSION_12_2&&(e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.caps.ttcFieldVersion>=ct.TNS_CCAP_FIELD_VERSION_12_2_EXT1&&(e.writeUInt8(0),e.writeUB4(0))),T.cursorId===0||T.isDdl?T.sql?(e.writeBytesWithLength(T.sqlBytes),e.writeUB4(1)):fP.throwErr(fP.ERR_INVALID_REF_CURSOR):e.writeUB4(0),T.isQuery?T.cursorId===0?e.writeUB4(0):e.writeUB4(_):e.writeUB4(this.numExecs),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(T.isQuery?1:0),e.writeUB4(0),e.writeUB4(n),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),T.requiresDefine)this.writeColumnMetadata(e,this.statement.queryVars);else if(o>0)return this.processBindParams(e,u)}writeReExecuteMessage(e){let t=this.statement,n=t.bindInfoList,o=0,_=0,T;if(n!==void 0){t.isQuery||(this.outVariables=[],n.forEach(h=>{h.bindDir!==ct.TNS_BIND_DIR_INPUT&&this.outVariables.push(h.bindVar)}));let u=[];n.forEach(h=>{h.bindDir!==ct.TNS_BIND_DIR_OUTPUT&&!h.isReturnBind&&u.push(h)}),n=u}return this.functionCode===ct.TNS_FUNC_REEXECUTE_AND_FETCH?(o|=ct.TNS_EXEC_OPTION_EXECUTE,T=this.options.prefetchRows):(this.options.autoCommit&&(_|=ct.TNS_EXEC_OPTION_COMMIT_REEXECUTE),T=this.numExecs),this.writePiggybacks(e),this.writeFunctionHeader(e),e.writeUB4(t.cursorId),e.writeUB4(T),e.writeUB4(o),e.writeUB4(_),n}encode(e){if(this.currentRow===0){let t=this.statement;t.cursorId!==0&&!t.requiresFullExecute&&!this.parseOnly&&!t.requiresDefine&&!t.isDdl&&!this.batchErrors?(t.isQuery&&!t.requiresDefine&&!t.noPrefetch&&this.options.prefetchRows>0?this.functionCode=ct.TNS_FUNC_REEXECUTE_AND_FETCH:this.functionCode=ct.TNS_FUNC_REEXECUTE,this.bindParams=this.writeReExecuteMessage(e)):(this.functionCode=ct.TNS_FUNC_EXECUTE,this.bindParams=this.writeExecuteMessage(e))}if(this.bindParams&&this.bindParams.length>0){let t=e.nsi.ntAdapter;for(;this.currentRow<this.numExecs;)if(e.writeUInt8(ct.TNS_MSG_TYPE_ROW_DATA),this.writeBindParamsRow(e,this.bindParams,this.currentRow),this.currentRow++,this.currentRow<this.numExecs&&t.shouldPauseWrite())return!0}this.currentRow=0,this.bindParams=void 0}};a(Iu,"ExecuteMessage");var Ru=Iu;AP.exports=Ru});var Ou=U((Mk,dP)=>{"use strict";var B1=At(),U1=Pu(),Cu=class Cu extends U1{constructor(e,t,n,o){super(e,t,n),this.resultSet=o,this.functionCode=B1.TNS_FUNC_FETCH}encode(e){this.writeFunctionHeader(e),e.writeUB4(this.statement.cursorId),e.writeUB4(this.options.fetchArraySize)}};a(Cu,"FetchMessage");var gu=Cu;dP.exports=gu});var wu=U((Vk,pP)=>{"use strict";var Y1=jl(),M1=Du(),x1=Ou(),Lu=class Lu extends Y1{async _fetchMoreRows(e){let t=this.statement.requiresFullExecute?M1:x1,n=new t(this.connection,this.statement,e,this);await this.connection._protocol._processMessage(n),this.statement.requiresFullExecute=!1}_resultSetNew(e,t,n){this.connection=e,this.statement=t,this._nestedCursorIndices=[],this.options=n,this.prefetchRowsProcessed=!1,this.statement.bufferRowIndex=0}close(){this.connection._returnStatement(this.statement)}_processRows(e){let t=[],n=this.statement.bufferRowIndex;for(let o=n;o<n+e;o++){let _=[];for(let T=0;T<this.statement.numQueryVars;T++)_.push(this.statement.queryVars[T].values[o]);t.push(_)}return this.statement.bufferRowIndex+=e,this.statement.bufferRowIndex===this.statement.bufferRowCount&&(this.statement.bufferRowCount=0,this.statement.bufferRowIndex=0),t}async getRows(e,t){if(t.fetchArraySize=e||this.options.fetchArraySize,t.prefetchRows=this.options.prefetchRows,this.statement.bufferRowCount-this.statement.bufferRowIndex>=t.fetchArraySize)return this._processRows(t.fetchArraySize);{t.fetchArraySize=t.fetchArraySize-(this.statement.bufferRowCount-this.statement.bufferRowIndex);let o=this.statement.bufferRowCount;if(this.statement.moreRowsToFetch&&t.fetchArraySize>0&&await this._fetchMoreRows(t),t.fetchArraySize=e||this.options.fetchArraySize,o===this.statement.bufferRowCount){let _=this.statement.bufferRowCount-this.statement.bufferRowIndex;return this.statement.bufferRowCount=0,_>0?this._processRows(_):[]}}let n=this.statement.bufferRowCount-this.statement.bufferRowIndex;return this._processRows(n)}};a(Lu,"ThinResultSetImpl");var yu=Lu;pP.exports=yu});var IP=U((Fk,RP)=>{"use strict";var{Buffer:mP}=require("buffer"),_e=At(),PP=Ee(),Uu=class Uu{constructor(e){this.protocolVersion=e,this.ttcFieldVersion=_e.TNS_CCAP_FIELD_VERSION_MAX,this.supports12cLogon=!0,this.supportsOob=!1,this.nCharsetId=_e.TNS_CHARSET_UTF16,this.compileCaps=mP.alloc(_e.TNS_CCAP_MAX),this.runtimeCaps=mP.alloc(_e.TNS_RCAP_MAX),this.initCompileCaps(),this.initRuntimeCaps(),this.maxStringSize=0}adjustForServerCompileCaps(e){e[_e.TNS_CCAP_FIELD_VERSION]<this.ttcFieldVersion&&(this.ttcFieldVersion=e[_e.TNS_CCAP_FIELD_VERSION],this.compileCaps[_e.TNS_CCAP_FIELD_VERSION]=this.ttcFieldVersion)}adjustForServerRuntimeCaps(e){e[_e.TNS_RCAP_TTC]&_e.TNS_RCAP_TTC_32K?this.maxStringSize=32767:this.maxStringSize=4e3}initCompileCaps(){this.compileCaps[_e.TNS_CCAP_SQL_VERSION]=_e.TNS_CCAP_SQL_VERSION_MAX,this.compileCaps[_e.TNS_CCAP_LOGON_TYPES]=_e.TNS_CCAP_O5LOGON|_e.TNS_CCAP_O5LOGON_NP|_e.TNS_CCAP_O7LOGON|_e.TNS_CCAP_O8LOGON_LONG_IDENTIFIER|_e.TNS_CCAP_O9LOGON_LONG_PASSWORD,this.compileCaps[_e.TNS_CCAP_FIELD_VERSION]=this.ttcFieldVersion,this.compileCaps[_e.TNS_CCAP_SERVER_DEFINE_CONV]=1,this.compileCaps[_e.TNS_CCAP_TTC1]=_e.TNS_CCAP_FAST_BVEC|_e.TNS_CCAP_END_OF_CALL_STATUS|_e.TNS_CCAP_IND_RCD,this.compileCaps[_e.TNS_CCAP_OCI1]=_e.TNS_CCAP_FAST_SESSION_PROPAGATE|_e.TNS_CCAP_APP_CTX_PIGGYBACK,this.compileCaps[_e.TNS_CCAP_TDS_VERSION]=_e.TNS_CCAP_TDS_VERSION_MAX,this.compileCaps[_e.TNS_CCAP_RPC_VERSION]=_e.TNS_CCAP_RPC_VERSION_MAX,this.compileCaps[_e.TNS_CCAP_RPC_SIG]=_e.TNS_CCAP_RPC_SIG_VALUE,this.compileCaps[_e.TNS_CCAP_DBF_VERSION]=_e.TNS_CCAP_DBF_VERSION_MAX,this.compileCaps[_e.TNS_CCAP_LOB]=_e.TNS_CCAP_LOB_UB8_SIZE|_e.TNS_CCAP_LOB_ENCS|_e.TNS_CCAP_LOB_PREFETCH,this.compileCaps[_e.TNS_CCAP_UB2_DTY]=1,this.compileCaps[_e.TNS_CCAP_LOB2]=_e.TNS_CCAP_LOB2_QUASI|_e.TNS_CCAP_LOB2_2GB_PREFETCH,this.compileCaps[_e.TNS_CCAP_TTC3]=_e.TNS_CCAP_IMPLICIT_RESULTS|_e.TNS_CCAP_BIG_CHUNK_CLR|_e.TNS_CCAP_KEEP_OUT_ORDER,this.compileCaps[_e.TNS_CCAP_TTC2]=_e.TNS_CCAP_ZLNP,this.compileCaps[_e.TNS_CCAP_OCI2]=_e.TNS_CCAP_DRCP,this.compileCaps[_e.TNS_CCAP_CLIENT_FN]=_e.TNS_CCAP_CLIENT_FN_MAX,this.compileCaps[_e.TNS_CCAP_TTC4]=_e.TNS_CCAP_INBAND_NOTIFICATION}initRuntimeCaps(){this.runtimeCaps[_e.TNS_RCAP_COMPAT]=_e.TNS_RCAP_COMPAT_81,this.runtimeCaps[_e.TNS_RCAP_TTC]=_e.TNS_RCAP_TTC_ZERO_COPY|_e.TNS_RCAP_TTC_32K}checkNCharsetId(){this.nCharsetId!==_e.TNS_CHARSET_UTF16&&PP.throwErr(PP.ERR_NCHAR_CS_NOT_SUPPORTED,this.nCharsetId)}};a(Uu,"Capabilities");var Bu=Uu;RP.exports=Bu});var CP=U((kk,gP)=>{"use strict";var{BaseBuffer:V1,GrowableBuffer:Fu}=lo(),{Buffer:uo}=require("buffer"),he=At(),ds=Ee(),DP=Ir(),b1=require("util"),vu=class vu extends V1{_decodeContainerNode(e){let t,n,o,_=this._getNumChildren(e),T=(e&64)===0;if(_===void 0){let u=this._getOffset(e);n=this.pos,this.pos=this.treeSegPos+u;let h=this.readUInt8();_=this._getNumChildren(h),t=T?{}:new Array(_),o=this.pos}else T?(t={},o=this.pos,n=this.pos+this.fieldIdLength*_):(t=new Array(_),n=this.pos);for(let u=0;u<_;u++){let h;if(T){let N;this.fieldIdLength===1?N=this.buf[o]:this.fieldIdLength==2?N=this.buf.readUInt16BE(o):N=this.buf.readUInt32BE(o),h=this.fieldNames[N-1],o+=this.fieldIdLength}this.pos=n;let A=this._getOffset(e);n=this.pos,this.pos=this.treeSegPos+A,T?t[h]=this._decodeNode():t[u]=this._decodeNode()}return t}_decodeNode(){let e=this.readUInt8();if(e&128)return this._decodeContainerNode(e);if(e===he.TNS_JSON_TYPE_NULL)return null;if(e===he.TNS_JSON_TYPE_TRUE)return!0;if(e===he.TNS_JSON_TYPE_FALSE)return!1;if(e===he.TNS_JSON_TYPE_DATE||e===he.TNS_JSON_TYPE_TIMESTAMP7)return this.parseOracleDate(this.readBytes(7));if(e===he.TNS_JSON_TYPE_TIMESTAMP)return this.parseOracleDate(this.readBytes(11));if(e===he.TNS_JSON_TYPE_TIMESTAMP_TZ)return this.parseOracleDate(this.readBytes(13));if(e===he.TNS_JSON_TYPE_BINARY_FLOAT)return this.parseBinaryFloat(this.readBytes(4));if(e===he.TNS_JSON_TYPE_BINARY_DOUBLE)return this.parseBinaryDouble(this.readBytes(8));if(e===he.TNS_JSON_TYPE_STRING_LENGTH_UINT8)return this.readBytes(this.readUInt8()).toString();if(e===he.TNS_JSON_TYPE_STRING_LENGTH_UINT16)return this.readBytes(this.readUInt16BE()).toString();if(e===he.TNS_JSON_TYPE_STRING_LENGTH_UINT32)return this.readBytes(this.readUInt32BE()).toString();if(e===he.TNS_JSON_TYPE_NUMBER_LENGTH_UINT8)return parseFloat(this.readOracleNumber());if(e===he.TNS_JSON_TYPE_BINARY_LENGTH_UINT16)return uo.from(this.readBytes(this.readUInt16BE()));if(e===he.TNS_JSON_TYPE_BINARY_LENGTH_UINT32)return uo.from(this.readBytes(this.readUInt32BE()));let t=e&240;if(t===32||t===96){let n=e&15;return parseFloat(this.parseOracleNumber(this.readBytes(n+1)))}else if(t===64||t===80){let n=e&15;return parseFloat(this.parseOracleNumber(this.readBytes(n)))}else if(!(e&224))return e===0?"":this.readBytes(e).toString();ds.throwErr(ds.ERR_UNSUPPORTED_DATA_TYPE_IN_JSON,e)}_getNumChildren(e){let t=e&24;if(t===0)return this.readUInt8();if(t===8)return this.readUInt16BE();if(t===16)return this.readUInt32BE()}_getOffset(e){return e&32?this.readUInt32BE():this.readUInt16BE()}decode(){let e=this.readBytes(3);(e[0]!==he.TNS_JSON_MAGIC_BYTE_1||e[1]!==he.TNS_JSON_MAGIC_BYTE_2||e[2]!==he.TNS_JSON_MAGIC_BYTE_3)&&ds.throwErr(ds.ERR_UNEXPECTED_DATA,e.toString("hex"));let t=this.readUInt8();t!==he.TNS_JSON_VERSION&&ds.throwErr(ds.ERR_OSON_VERSION_NOT_SUPPORTED,t);let n=this.readUInt16BE();if(n&he.TNS_JSON_FLAG_IS_SCALAR)return n&he.TNS_JSON_FLAG_TREE_SEG_UINT32?this.skipBytes(4):this.skipBytes(2),this._decodeNode();let o;n&he.TNS_JSON_FLAG_NUM_FNAMES_UINT32?(o=this.readUInt32BE(),this.fieldIdLength=4):n&he.TNS_JSON_FLAG_NUM_FNAMES_UINT16?(o=this.readUInt16BE(),this.fieldIdLength=2):(o=this.readUInt8(),this.fieldIdLength=1);let _,T;n&he.TNS_JSON_FLAG_FNAMES_SEG_UINT32?(_=4,T=this.readUInt32BE()):(_=2,T=this.readUInt16BE()),n&he.TNS_JSON_FLAG_TREE_SEG_UINT32?this.skipBytes(4):this.skipBytes(2),this.skipBytes(2);let u;n&he.TNS_JSON_FLAG_HASH_ID_UINT8?u=1:n&he.TNS_JSON_FLAG_HASH_ID_UINT16?u=2:u=4,this.skipBytes(o*u);let h=this.pos;this.skipBytes(o*_);let A=this.pos;this.skipBytes(T),this.fieldNames=new Array(o);for(let N=0;N<o;N++){let P=A;n&he.TNS_JSON_FLAG_FNAMES_SEG_UINT32?(P+=this.buf.readUInt32BE(h),h+=4):(P+=this.buf.readUInt16BE(h),h+=2);let R=this.buf[P],g=this.buf.subarray(P+1,P+R+1).toString();this.fieldNames[N]=g}return this.treeSegPos=this.pos,this._decodeNode()}};a(vu,"OsonDecoder");var Yu=vu,ku=class ku{constructor(e){this.name=e,this.nameBytes=uo.from(e),this.nameBytes.length>255&&ds.throwErr(ds.ERR_OSON_FIELD_NAME_LIMITATION),this.hashId=BigInt(2166136261);let t=BigInt(16777619),n=BigInt(4294967295);for(let o=0;o<this.nameBytes.length;o++){let _=BigInt(this.nameBytes[o]);this.hashId=(this.hashId^_)*t&n}this.hashId=Number(this.hashId)&255}};a(ku,"OsonFieldName");var Mu=ku,qu=class qu extends Fu{constructor(e){super(),this.fieldNamesMap=new Map,this.fieldNames=[],this._examineNode(e),this._processFieldNames()}_examineNode(e){if(Array.isArray(e))for(let t of e)this._examineNode(t);else if(e&&Array.isArray(e.fields))for(let t=0;t<e.fields.length;t++){let n=e.fields[t],o=e.values[t];if(!this.fieldNamesMap.has(n)){let _=new Mu(n);this.fieldNamesMap.set(n,_),this.fieldNames.push(_),_.offset=this.pos,this.writeUInt8(_.nameBytes.length),this.writeBytes(_.nameBytes)}this._examineNode(o)}}_processFieldNames(){this.fieldNames.sort((e,t)=>e.hashId<t.hashId?-1:e.hashId>t.hashId?1:e.nameBytes.length<t.nameBytes.length?-1:e.nameBytes.length>t.nameBytes.length?1:e.name<t.name?-1:e.name>t.name?1:0);for(let e=0;e<this.fieldNames.length;e++)this.fieldNames[e].fieldId=e+1;this.fieldNames.length<256?this.fieldIdSize=1:this.fieldNames.length<65536?this.fieldIdSize=2:this.fieldIdSize=4}};a(qu,"OsonFieldNamesSegment");var xu=qu,Gu=class Gu extends Fu{_encodeArray(e,t){this._encodeContainer(he.TNS_JSON_TYPE_ARRAY,e.length);let n=0,o=this.reserveBytes(e.length*4);for(let _ of e)o.writeUInt32BE(this.pos,n),n+=4,this.encodeNode(_,t)}_encodeContainer(e,t){e|=32,t>65535?e|=16:t>255&&(e|=8),this.writeUInt8(e),t<256?this.writeUInt8(t):t<65536?this.writeUInt16BE(t):this.writeUInt32BE(t)}_encodeObject(e,t){let n=e.values.length;this._encodeContainer(he.TNS_JSON_TYPE_OBJECT,n);let o=0,_=n*t.fieldIdSize,T=this.reserveBytes(n*(t.fieldIdSize+4));for(let u=0;u<e.fields.length;u++){let h=t.fieldNamesMap.get(e.fields[u]);t.fieldIdSize==1?T[o]=h.fieldId:t.fieldIdSize==2?T.writeUInt16BE(h.fieldId,o):T.writeUInt32BE(h.fieldId,o),T.writeUInt32BE(this.pos,_),o+=t.fieldIdSize,_+=4,this.encodeNode(e.values[u],t)}}encodeNode(e,t){if(e==null)this.writeUInt8(he.TNS_JSON_TYPE_NULL);else if(typeof e=="boolean")e?this.writeUInt8(he.TNS_JSON_TYPE_TRUE):this.writeUInt8(he.TNS_JSON_TYPE_FALSE);else if(typeof e=="number")this.writeUInt8(he.TNS_JSON_TYPE_NUMBER_LENGTH_UINT8),this.writeOracleNumber(e.toString());else if(typeof e=="string"){let n=uo.from(e);n.length<256?(this.writeUInt8(he.TNS_JSON_TYPE_STRING_LENGTH_UINT8),this.writeUInt8(n.length)):n.length<65536?(this.writeUInt8(he.TNS_JSON_TYPE_STRING_LENGTH_UINT16),this.writeUInt16BE(n.length)):(this.writeUInt8(he.TNS_JSON_TYPE_STRING_LENGTH_UINT32),this.writeUInt32BE(n.length)),n.length>0&&this.writeBytes(n)}else b1.isDate(e)?e.getUTCMilliseconds()===0?(this.writeUInt8(he.TNS_JSON_TYPE_TIMESTAMP7),this.writeOracleDate(e,DP.DB_TYPE_DATE,!1)):(this.writeUInt8(he.TNS_JSON_TYPE_TIMESTAMP),this.writeOracleDate(e,DP.DB_TYPE_TIMESTAMP,!1)):uo.isBuffer(e)?(e.length<65536?(this.writeUInt8(he.TNS_JSON_TYPE_BINARY_LENGTH_UINT16),this.writeUInt16BE(e.length)):(this.writeUInt8(he.TNS_JSON_TYPE_BINARY_LENGTH_UINT32),this.writeUInt32BE(e.length)),this.writeBytes(e)):Array.isArray(e)?this._encodeArray(e,t):this._encodeObject(e,t)}};a(Gu,"OsonTreeSegment");var Vu=Gu,Hu=class Hu extends Fu{encode(e){let t,n=he.TNS_JSON_FLAG_INLINE_LEAF;Array.isArray(e)||e&&Array.isArray(e.fields)?(n|=he.TNS_JSON_FLAG_HASH_ID_UINT8|he.TNS_JSON_FLAG_TINY_NODES_STAT,t=new xu(e),t.fieldNames.length>65535?n|=he.TNS_JSON_FLAG_NUM_FNAMES_UINT32:t.fieldNames.length>255&&(n|=he.TNS_JSON_FLAG_NUM_FNAMES_UINT16),t.pos>65535&&(n|=he.TNS_JSON_FLAG_FNAMES_SEG_UINT32)):n|=he.TNS_JSON_FLAG_IS_SCALAR;let o=new Vu;if(o.encodeNode(e,t),o.pos>65535&&(n|=he.TNS_JSON_FLAG_TREE_SEG_UINT32),this.writeUInt8(he.TNS_JSON_MAGIC_BYTE_1),this.writeUInt8(he.TNS_JSON_MAGIC_BYTE_2),this.writeUInt8(he.TNS_JSON_MAGIC_BYTE_3),this.writeUInt8(he.TNS_JSON_VERSION),this.writeUInt16BE(n),t&&(t.fieldNames.length<256?this.writeUInt8(t.fieldNames.length):t.fieldNames.length<65536?this.writeUInt16BE(t.fieldNames.length):this.writeUInt32BE(t.fieldNames.length),t.pos<65536?this.writeUInt16BE(t.pos):this.writeUInt32BE(t.pos)),o.pos<65536?this.writeUInt16BE(o.pos):this.writeUInt32BE(o.pos),t){this.writeUInt16BE(0);for(let _ of t.fieldNames)this.writeUInt8(_.hashId);for(let _ of t.fieldNames)t.pos<65536?this.writeUInt16BE(_.offset):this.writeUInt32BE(_.offset);t.pos>0&&this.writeBytes(t.buf.subarray(0,t.pos))}return this.writeBytes(o.buf.subarray(0,o.pos)),this.buf.subarray(0,this.pos)}};a(Hu,"OsonEncoder");var bu=Hu;gP.exports={OsonDecoder:Yu,OsonEncoder:bu}});var BP=U((Gk,wP)=>{"use strict";var{BaseBuffer:yP}=lo(),{Buffer:$n}=require("buffer"),zn=At(),LP=CP(),OP=co(),Ri=$n.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/","utf8"),zu=class zu{constructor(e){this.allocLen=e;let t=e%zn.CHUNKED_BYTES_CHUNK_SIZE;t>0&&(this.allocLen+=zn.CHUNKED_BYTES_CHUNK_SIZE-t),this.buf=$n.alloc(this.allocLen),this.actualLen=0}};a(zu,"BytesChunk");var i_=zu,Xu=class Xu{constructor(){this.chunks=[]}endChunkedRead(){if(this.chunks.length>1){let t=0;for(let _ of this.chunks)t+=_.actualLen;let n=0,o=new i_(t);for(let _ of this.chunks)_.buf.copy(o.buf,n,0,_.actualLen),n+=_.actualLen;o.actualLen=t,this.chunks=[o]}let e=this.chunks[0];return e.buf.subarray(0,e.actualLen)}getBuf(e){let t;this.chunks.length>0&&(t=this.chunks[this.chunks.length-1],t.allocLen-t.actualLen<e&&(t=void 0)),t||(t=new i_(e),this.chunks.push(t));let n=t.buf.subarray(t.actualLen,t.actualLen+e);return t.actualLen+=e,n}startChunkedRead(){this.chunks.length>0&&(this.chunks=this.chunks.splice(0,1),this.chunks[0].actualLen=0)}};a(Xu,"ChunkedBytesBuffer");var Ku=Xu,Qu=class Qu extends yP{constructor(e,t){super(e.sAtts.sdu),this.nsi=e,this.caps=t,this.chunkedBytesBuf=new Ku}_readBytesWithLength(e){if(e!==zn.TNS_LONG_LENGTH_INDICATOR)return this.readBytes(e);for(this.chunkedBytesBuf.startChunkedRead();;){let t=this.readUB4();if(t===0)break;this.readBytes(t,!0)}return this.chunkedBytesBuf.endChunkedRead()}skipBytes(e){this.pos===this.size&&this.receivePacket();let t=this.numBytesLeft();if(e<=t){this.pos+=e;return}for(e-=t;e>0;){this.receivePacket();let n=Math.min(e,this.size-this.pos);this.pos+=n,e-=n}}readBytes(e,t=!1){this.pos===this.size&&this.receivePacket();let n=this.numBytesLeft();if(e<=n){let T;return t?(T=this.chunkedBytesBuf.getBuf(e),this.buf.copy(T,0,this.pos,this.pos+e)):T=this.buf.subarray(this.pos,this.pos+e),this.pos+=e,T}let o;t?o=this.chunkedBytesBuf.getBuf(e):o=$n.alloc(e);let _=0;for(this.buf.copy(o,_,this.pos,this.pos+n),_+=n,e-=n;e>0;){this.receivePacket();let T=Math.min(e,this.size-this.pos);this.buf.copy(o,_,this.pos,this.pos+T),this.pos+=T,_+=T,e-=T}return o}receivePacket(){if(this.savedPacketPos===this.savedPackets.length){let e=this.nsi.syncRecvPacket();if(!e||this.nsi.isBreak)throw new OP.OutOfPacketsError;this.savedPackets.push(e)}this.startPacket(this.savedPackets[this.savedPacketPos++])}restorePoint(){this.savedPacketPos=0,this.startPacket(this.savedPackets[this.savedPacketPos++]),this.pos=this.savedPos}savePoint(){this.savedPackets?this.savedPackets=this.savedPackets.splice(this.savedPacketPos-1):this.savedPackets=[this.packet],this.savedPacketPos=1,this.savedPos=this.pos}startPacket(e){this.packet=e,this.buf=e.buf,this.pos=10,this.size=e.buf.length,this.packetNum=e.num}async waitForPackets(){let e=await this.nsi.recvPacket();this.savedPackets?this.savedPackets.push(e):(this.savedPackets=[e],this.savedPacketPos=0),this.startPacket(this.savedPackets[this.savedPacketPos++])}readOson(){if(this.readUB4()===0)return null;this.skipUB8(),this.skipUB4();let t=new LP.OsonDecoder(this.readBytesWithLength());return this.skipBytesChunked(),t.decode()}readURowID(){let e=0,t=1,n=this.readBytesWithLength();if(n===null)return null;n=this.readBytesWithLength();let o=n.length;if(n&&n[0]===1){let h=n.readUInt32BE(1),A=n.readUInt16BE(5),N=n.readUInt32BE(7),P=n.readUInt16BE(11);return OP.encodeRowID({rba:h,partitionID:A,blockNum:N,slotNum:P})}let _=Math.floor(o/3)*4,T=o%3;T===1?_+=1:T===2&&(_+=3);let u=$n.alloc(_);for(o-=1,u[0]=42,e+=1;o>0;){let h=n[t]>>2;if(u[e]=Ri[h],e+=1,h=(n[t]&3)<<4,o==1){u[e]=Ri[h];break}if(t+=1,h|=(n[t]&240)>>4,u[e]=Ri[h],e+=1,h=(n[t]&15)<<2,o==2){u[e]=Ri[h];break}t+=1,h|=(n[t]&192)>>6,u[e]=Ri[h],e+=1,h=n[t]&63,u[e]=Ri[h],e+=1,t+=1,o-=3}return u.toString("utf-8")}readRowID(){let e=this.readUB4(),t=this.readUB2();this.skipUB1();let n=this.readUB4(),o=this.readUB2();return{rba:e,partitionID:t,blockNum:n,slotNum:o}}skipBytesChunked(){let e=this.readUInt8();if(e!==zn.TNS_LONG_LENGTH_INDICATOR)this.skipBytes(e);else for(;;){let t=this.readUB4();if(t===0)break;this.skipBytes(t)}}};a(Qu,"ReadPacket");var Wu=Qu,Ju=class Ju extends yP{constructor(e,t,n){super(e.sAtts.sdu),this.size=this.maxSize,this.isLargeSDU=e.sAtts.version>=zn.TNS_VERSION_MIN_LARGE_SDU,this.protocol=n,this.packetType=zn.TNS_PACKET_TYPE_DATA,this.caps=t,this.nsi=e}_grow(){this._sendPacket()}_sendPacket(e=!1){let t=this.pos;this.pos=0,this.isLargeSDU?this.writeUInt32BE(t):(this.writeUInt16BE(t),this.writeUInt16BE(0)),this.writeUInt8(this.packetType),this.writeUInt8(0),this.writeUInt16BE(0);let n=this.buf.subarray(0,t);e||(n=$n.from(n),this.startPacket()),this.nsi.ntAdapter.send(n)}startPacket(e=0){this.pos=zn.PACKET_HEADER_SIZE,this.packetType===zn.TNS_PACKET_TYPE_DATA&&this.writeUInt16BE(e)}startRequest(e,t=0){this.packetType=e,this.startPacket(t)}endRequest(){this.pos>zn.PACKET_HEADER_SIZE&&this._sendPacket(!0)}writeKeyValue(e,t,n=0){let o=$n.byteLength(e),_=$n.byteLength(t);this.writeUB4(o),this.writeBytesWithLength($n.from(e)),this.writeUB4(_),_>0&&this.writeBytesWithLength($n.from(t)),this.writeUB4(n)}writeOson(e){let n=new LP.OsonEncoder().encode(e);this.writeQLocator(n.length),this.writeBytesWithLength(n)}writeSeqNum(){this.writeUInt8(this.protocol.sequenceId),this.protocol.sequenceId=(this.protocol.sequenceId+1)%256}};a(Ju,"WritePacket");var $u=Ju;wP.exports={ReadPacket:Wu,WritePacket:$u}});var YP=U((Kk,UP)=>{"use strict";var Eo=At(),F1=IP(),{WritePacket:v1,ReadPacket:k1}=BP(),Fs=Ee(),q1=co(),Zu=class Zu{constructor(e){this._breakInProgress=!1,this.txnInProgress=!1,this.connInProgress=!0,this.nsi=e.nscon,this.sequenceId=1,this.caps=new F1(e.nscon.sAtts.version),this.writeBuf=new v1(e.nscon,this.caps,this),this.readBuf=new k1(e.nscon,this.caps),this.callTimeout=0}async _decodeMessage(e){for(e.preProcess(),await this.readBuf.waitForPackets();;){this.nsi.isBreak&&(await this.resetMessage(),delete this.readBuf.savedBuffers,await this.readBuf.waitForPackets());try{e.decode(this.readBuf);break}catch(t){if(t instanceof q1.OutOfPacketsError){this.nsi.isBreak||(await this.readBuf.waitForPackets(),this.readBuf.restorePoint());continue}throw t}}await e.postProcess()}async _encodeMessage(e){let t=this.nsi.ntAdapter;for(this.writeBuf.startRequest(Eo.TNS_PACKET_TYPE_DATA);e.encode(this.writeBuf);)await t.pauseWrite();this.writeBuf.endRequest()}async _recoverFromError(e,t){try{this.breakMessage(),this._breakInProgress=!1,await this.resetMessage(),await this.readBuf.waitForPackets(),t.decode(this.readBuf)}catch(n){this.nsi.disconnect();let o=Fs.getErr(Fs.ERR_CONNECTION_CLOSED);throw e.message=o.message+`
Error recovery failed: `+n.message+`
Original error: `+e.message,e}}async _processMessage(e){let t,n=!1;try{this.callTimeout>0&&(t=setTimeout(()=>{n=!0,this.breakMessage()},this.callTimeout)),await this._encodeMessage(e),e.messageType!==Eo.TNS_MSG_TYPE_ONEWAY_FN&&await this._decodeMessage(e)}catch(o){throw!this.connInProgress&&o.code!==Fs.ERR_CONNECTION_CLOSED_CODE&&await this._recoverFromError(o,e),o}finally{clearTimeout(t)}if(e.flushOutBinds&&await this.flushOutBindMessage(e),this.txnInProgress=e.callStatus&Eo.TNS_TXN_IN_PROGRESS,e.errorOccurred){n&&Fs.throwErr(Fs.ERR_CALL_TIMEOUT_EXCEEDED,this.callTimeout);let o=new Error(e.errorInfo.message);throw o.offset=e.errorInfo.pos,o.errorNum=e.errorInfo.num,o=Fs.transformErr(o),o.code===Fs.ERR_CONNECTION_CLOSED_CODE&&this.nsi.disconnect(),o}}async flushOutBindMessage(e){this.writeBuf.startRequest(Eo.TNS_PACKET_TYPE_DATA),this.writeBuf.writeUInt8(Eo.TNS_MSG_TYPE_FLUSH_OUT_BINDS),this.writeBuf.endRequest(),await this._decodeMessage(e)}breakMessage(){this._breakInProgress=!0,this.nsi.sendBreak()}async resetMessage(){await this.nsi.reset()}};a(Zu,"Protocol");var ju=Zu;UP.exports=ju});var Ii=U(($k,MP)=>{MP.exports={NSPTCN:1,NSPTAC:2,NSPTAK:3,NSPTRF:4,NSPTRD:5,NSPTDA:6,NSPTNL:7,NSPTAB:9,NSPTRS:11,NSPTMK:12,NSPTAT:13,NSPTCNL:14,NSPTDD:15,NSPTHI:19,NSPHDLEN:0,NSPHDPSM:2,NSPHDTYP:4,NSPHDFLGS:5,NSPHDHSM:6,NSPSIZHD:8,NSPFSID:1,NSPFRDS:2,NSPFRDR:4,NSPFLSD:32,NO_HEADER_FLAGS:0,NSPFSRN:8,NSPCNVSN:8,NSPCNLOV:10,NSPCNOPT:12,NSPCNSDU:14,NSPCNTDU:16,NSPCNNTC:18,NSPCNTNA:20,NSPCNONE:22,NSPCNLEN:24,NSPCNOFF:26,NSPCNMXC:28,NSPCNFL0:32,NSPCNFL1:33,NSPCNTMO:50,NSPCNTCK:52,NSPCNADL:54,NSPCNAOF:56,NSPCNLSD:58,NSPCNLTD:62,NSPCNCFL:66,NSPCNCFL2:70,NSPCNDAT:74,NSPMXCDATA:230,NSINAWANTED:1,NSINAINTCHG:2,NSINADISABLEDFORCONNECTION:4,NSINANOSERVICES:8,NSINAREQUIRED:16,NSINAAUTHWANTED:32,NSISUPSECRENEG:128,NSGDONTCARE:1,NSGHDX:2,NSGFDX:4,NSGHDRCHKSUM:8,NSGPAKCHKSUM:16,NSGBROKEN:32,NSGUSEVIO:64,NSGOSAUTHOK:128,NSGSENDATTN:512,NSGRECVATTN:1024,NSGNOATTNPR:2048,NSGRAW:4096,TNS_VERSION_DESIRED:319,TNS_VERSION_MINIMUM:300,NSPACVSN:8,NSPACOPT:10,NSPACSDU:12,NSPACTDU:14,NSPACONE:16,NSPACLEN:18,NSPACOFF:20,NSPACFL0:22,NSPACFL1:23,NSPACTMO:24,NSPACTCK:26,NSPACADL:28,NSPACAOF:30,NSPACLSD:32,NSPACLTD:36,NSPACCFL:40,NSPACFL2:41,NSPACV310DAT:32,NSPACV315DAT:41,NSPRFURS:8,NSPRFSRS:9,NSPRFLEN:10,NSPRFDAT:12,NSPACCFON:128,NSPACCFAT:64,NSPACCFNT:2,NSPACOOB:1,NSGPCHKSCMD:16777216,NSPRDLEN:8,NSPRDDAT:10,NSPDAFLG:8,NSPDADAT:10,NSPDAFEOF:64,NSPMKTYP:8,NSPMKODT:9,NSPMKDAT:10,NSPMKTD0:0,NSPMKTD1:1,NSPMKTAT:2,NIQBMARK:1,NIQRMARK:2,NIQIMARK:3,NSPCTLCMD:8,NSPCTLDAT:10,NSPCTL_SERR:8,NSPCTL_CLRATTN:9,NSPDFSDULN:8192,NSPABSSDULN:2097152,NSPMXSDULN:65535,NSPMNSDULN:512,NSPDFTDULN:2097152,NSPMXTDULN:2097152,NSPMNTDULN:255,NSFIMM:64,DISABLE_OOB_STR:"DISABLE_OOB",EXPIRE_TIME:"EXPIRE_TIME",PEM_WALLET_FILE_NAME:"ewallet.pem",NT_MOREDATA:1,NS_MOREDATA:2,SVCNAME:3,SERVERTYPE:4,REMOTEADDR:5,HEALTHCHECK:6,CONNCLASS:7,PURITY:8,SID:9,NSNOBLOCK:1}});var bP=U((zk,VP)=>{"use strict";var o_=require("buffer").Buffer,Z=Ii(),ps=Ee(),G1=230,xP=74;function H1(s,e,t=0){this.connectData=s,this.connectDataLen=s.length,this.overflow=!1;let n,o;this.connectDataLen<=G1?n=xP+this.connectDataLen:(n=xP,this.overflow=!0),this.buf=o_.allocUnsafe(n).fill(0),this.buf.writeUInt16BE(n,Z.NSPHDLEN),this.buf.writeUInt8(t,Z.NSPHDFLGS),this.buf.writeUInt8(Z.NSPTCN,Z.NSPHDTYP),this.buf.writeUInt16BE(Z.TNS_VERSION_DESIRED,Z.NSPCNVSN),this.buf.writeUInt16BE(Z.TNS_VERSION_MINIMUM,Z.NSPCNLOV),o=Z.NSGDONTCARE,this.buf.writeUInt16BE(o,Z.NSPCNOPT),e.sdu>Z.NSPMXSDULN?this.buf.writeUInt16BE(Z.NSPMXSDULN,Z.NSPCNSDU):this.buf.writeUInt16BE(e.sdu,Z.NSPCNSDU),e.tdu>Z.NSPMXSDULN?this.buf.writeUInt16BE(Z.NSPMXSDULN,Z.NSPCNTDU):this.buf.writeUInt16BE(e.tdu,Z.NSPCNTDU),this.buf.writeUInt16BE(e.ntCha,Z.NSPCNNTC),this.buf.writeUInt16BE(1,Z.NSPCNONE),this.buf.writeUInt16BE(this.connectDataLen,Z.NSPCNLEN),this.buf.writeUInt16BE(Z.NSPCNDAT,Z.NSPCNOFF),this.buf.writeUInt8(Z.NSISUPSECRENEG|Z.NSINADISABLEDFORCONNECTION,Z.NSPCNFL0),this.buf.writeUInt8(Z.NSISUPSECRENEG|Z.NSINADISABLEDFORCONNECTION,Z.NSPCNFL1),this.buf.writeUInt16BE(0,Z.NSPCNTMO),this.buf.writeUInt16BE(0,Z.NSPCNTCK),this.buf.writeUInt16BE(0,Z.NSPCNADL),this.buf.writeUInt16BE(0,Z.NSPCNAOF),this.buf.writeUInt32BE(e.sdu,Z.NSPCNLSD),this.buf.writeUInt32BE(e.tdu,Z.NSPCNLTD),this.buf.writeUInt32BE(0,Z.NSPCNCFL),this.buf.writeUInt32BE(0,Z.NSPCNCFL2),!this.overflow&&this.connectDataLen&&this.buf.write(s.toString("ascii"),Z.NSPCNDAT,this.connectDataLen,"ascii")}a(H1,"ConnectPacket");function K1(s){this.dataPtr=0,this.dataLen=0,this.offset=0,this.len=0,this.bufLen=0,this.createPacket=function(e){this.dataPtr=Z.NSPDADAT,this.dataLen=Z.NSPDADAT,this.buf=o_.allocUnsafe(e).fill(0),this.buf.writeUInt8(0,Z.NSPHDFLGS),this.buf.writeUInt8(Z.NSPTDA,Z.NSPHDTYP),this.bufLen=e},this.fillBuf=function(e,t,n,o=0){let _;return this.buf||this.createPacket(n+Z.NSPDADAT),n>this.bufLen-this.dataLen?_=this.bufLen-this.dataLen:_=n,_&&e.copy(this.buf,this.dataLen,t,t+_),this.dataLen+=_,this.prepare2Send(o),_},this.prepare2Send=function(e=0){s?this.buf.writeUInt32BE(this.dataLen,Z.NSPHDLEN):this.buf.writeUInt16BE(this.dataLen,Z.NSPHDLEN),this.buf.writeUInt16BE(e,Z.NSPDAFLG),this.dataBuf=this.buf.subarray(0,this.dataLen)},this.fromPacket=function(e){this.buf=e.buf,this.dataLen=e.buf.length,this.dataPtr=Z.NSPDADAT,this.offset=this.dataPtr,this.len=this.dataLen,e.dataOffset=this.dataPtr}}a(K1,"DataPacket");function W1(s,e){this.buf=s.buf,this.len=s.buf.length,e.version=s.buf.readUInt16BE(Z.NSPACVSN),e.options=s.buf.readUInt16BE(Z.NSPACOPT),e.sdu=s.buf.readUInt16BE(Z.NSPACSDU),e.tdu=s.buf.readUInt16BE(Z.NSPACTDU),e.version>=315&&(e.sdu=s.buf.readUInt32BE(Z.NSPACLSD),e.tdu=s.buf.readUInt32BE(Z.NSPACLTD),e.largeSDU=!0),this.flag0=s.buf.readUInt8(Z.NSPACFL0),this.flag1=s.buf.readUInt8(Z.NSPACFL1)}a(W1,"AcceptPacket");function $1(s){this.buf=s.buf,this.len=s.buf.length,this.userReason=s.buf.readUInt8(Z.NSPRFURS),this.systemReason=s.buf.readUInt8(Z.NSPRFURS),this.dataLen=s.buf.readUInt16BE(Z.NSPRFLEN),this.dataOff=Z.NSPRFDAT,this.len>this.dataOff?(this.dataBuf=this.buf.toString("ascii",this.dataOff,this.len),this.overflow=!1):this.overflow=!0}a($1,"RefusePacket");function z1(s){this.buf=s.buf,this.len=s.buf.length,this.flags=s.flags,this.dataLen=s.buf.readUInt16BE(Z.NSPRDLEN),this.dataOff=Z.NSPRDDAT,this.len>this.dataOff?(this.dataBuf=this.buf.subarray(this.dataOff,this.len),this.overflow=!1):this.overflow=!0}a(z1,"RedirectPacket");function X1(s){this.len=Z.NSPMKDAT+1,this.buf=o_.alloc(Z.NSPMKDAT+1),s?this.buf.writeUInt32BE(this.len,Z.NSPHDLEN):this.buf.writeUInt16BE(this.len,Z.NSPHDLEN),this.buf.writeUInt8(0,Z.NSPHDFLGS),this.buf.writeUInt8(Z.NSPTMK,Z.NSPHDTYP),this.prepare=function(e,t){this.buf.writeUInt8(e,Z.NSPMKTYP),this.buf.writeUInt8(t,Z.NSPMKDAT)},this.fromPacket=function(e,t){switch(this.type=e.buf.readUInt8(Z.NSPMKTYP),this.type){case Z.NSPMKTD0:t.isBreak=!0;break;case Z.NSPMKTD1:this.data=e.buf.readUInt8(Z.NSPMKDAT),t.isBreak=!0,this.data==Z.NIQRMARK&&(t.isReset=!0,t.isBreak=!0);break;default:ps.throwErr(ps.ERR_INVALID_PACKET)}}}a(X1,"MarkerPacket");function Q1(){this.clear=function(){this.errno=0,this.notif=null,this.notifLen=0,this.cmd=0},this.fromPacket=function(s){let o,_,T;switch(this.cmd=s.buf.readUInt16BE(Z.NSPCTLCMD),this.cmd){case Z.NSPCTL_SERR:o=s.buf.readUInt32BE(Z.NSPCTLDAT),_=s.buf.readUInt32BE(Z.NSPCTLDAT+4),T=s.buf.readUInt32BE(Z.NSPCTLDAT+8),_==12572?this.errno=_:_==12573?(this.errno=_,this.notifLen=T,this.notif=o_.allocUnsafe(T+1).fill(0),this.buf.copy(this.notif,0,Z.NSPCTLDAT+12,Z.NSPCTLDAT+12+T)):(this.errno=_,o==22?ps.throwErr(ps.ERR_CONNECTION_INBAND,"ORA-"+_):ps.throwErr(ps.ERR_CONNECTION_INBAND,"TNS-"+_));break;default:ps.throwErr(ps.ERR_INVALID_PACKET)}}}a(Q1,"ControlPacket");VP.exports={ConnectPacket:H1,DataPacket:K1,AcceptPacket:W1,RefusePacket:$1,RedirectPacket:z1,MarkerPacket:X1,ControlPacket:Q1}});var kP=U((Qk,vP)=>{"use strict";var{Buffer:J1}=require("buffer"),j1=require("net"),FP=require("process"),ho=require("tls"),Z1=require("http"),eM=require("timers"),eE=Ii(),Yt=Ee(),tM=8,rM=1521,nM=80,sM=4878,iM=1,rE=class rE{constructor(e){this.atts=e,this.cha=sM,this.connected=!1,this.err=!1,this.needsDrain=!1,this.numPacketsSinceLastWait=0,this.secure=!1,this.largeSDU=!1,this.streamNum=iM++,this.packetNum=1}dnMatch(e,t){if(this.atts.sslServerDNMatch){let n=a(o=>o.split(",").map(_=>_.split("=").map(T=>T.trim())).reduce((_,T)=>(_[T[0]]=T[1],_),{}),"toObject");if(this.atts.sslServerCertDN){let o=n(this.atts.sslServerCertDN);for(let _ in o)if(o[_]!=t.subject[_])return Yt.getErr(Yt.ERR_TLS_DNMATCH_FAILURE)}else if(ho.checkServerIdentity(this.hostName,t)&&(!this.originHost||ho.checkServerIdentity(this.originHost,t))){let o=this.hostName+" "+(this.originHost?"or "+this.originHost:"");return Yt.getErr(Yt.ERR_TLS_HOSTMATCH_FAILURE,o)}}}async tlsConnect(e,t){this.stream.removeAllListeners();let n,o={host:this.host,socket:t,rejectUnauthorized:!0,secureContext:e,enableTrace:!1,checkServerIdentity:this.dnMatch.bind(this)};await new Promise(_=>{this.stream=ho.connect(o,()=>{this.stream.authorized||(n="server certificate unauthorized"),_()}).on("error",T=>{n=T.message,_()})}),n&&Yt.throwErr(Yt.ERR_TLS_AUTH_FAILURE,this.host,this.port,this.atts.connectionId,n),this.connStream=t}async ntConnect(e){e.port||(e.port=rM);let t,n,o,_=e.httpsProxy||this.atts.httpsProxy,T=e.httpsProxyPort||this.atts.httpsProxyPort;await new Promise(u=>{_?(T||(T=nM),o=Z1.request({host:_,port:T,method:"CONNECT",path:e.host+":"+e.port}),o.once("connect",(h,A)=>{h.statusCode==200?(this.connected=!0,this.stream=A):n=h.statusCode,u()}),o.once("error",h=>{n=h.message,u()}),o.end()):(this.stream=j1.connect(e.port,e.host,()=>{this.connected=!0,u()}),this.stream.once("error",h=>{t=h.message,u()}))}),o&&o.removeAllListeners(),this.connected||(n?Yt.throwErr(Yt.ERR_PROXY_CONNECTION_FAILURE,_,T,this.atts.connectionId,n):Yt.throwErr(Yt.ERR_CONNECTION_INCOMPLETE,this.host,this.port,this.atts.connectionId,t))}async connect(e){this.originHost=e.originHost,this.host=e.host,this.hostName=e.hostname,this.port=e.port;try{if(await this.ntConnect(e),(this.atts.expireTime||this.atts.enableDCD)&&(this.atts.expireTime?this.stream.setKeepAlive(!0,this.atts.expireTime):this.stream.setKeepAlive(!0)),this.atts.tcpNoDelay&&this.stream.setNoDelay(!0),e.protocol.toUpperCase()=="TCPS"){let t;this.secure=!0;try{t=ho.createSecureContext({cert:this.atts.wallet,key:this.atts.wallet,passphrase:this.atts.walletPassword,ca:this.atts.wallet})}catch{Yt.throwErr(Yt.ERR_TLS_INIT_FAILURE)}await this.tlsConnect(t,this.stream)}}finally{this.stream&&this.setupEventHandlers()}}disconnect(e){this.connected&&!this.err&&(e==eE.NSFIMM?this.stream.destroy():this.stream.end()),this.stream=null,this.connected=!1,this.drainWaiter=null,this.readWaiter=null}getPacketDump(e){let t=[];for(let n=0;n<e.length;n+=8){let o=n.toString().padStart(4,"0"),_=e.slice(n,n+8),T=[],u=[];for(let N of _)T.push(N.toString(16).toUpperCase().padStart(2,"0")),N>32&&N<127?u.push(String.fromCharCode(N)):u.push(".");for(;T.length<8;)T.push("  "),u.push(" ");let h=T.join(" "),A=u.join("");t.push(`${o} : ${h} |${A}|`)}return t.join(`
`)}printPacket(e,t){let n=new Date,o=`${n.getFullYear()}-${n.getMonth().toString().padStart(2,"0")}-${n.getDay().toString().padStart(2,"0")} ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}:${n.getSeconds().toString().padStart(2,"0")}.${n.getMilliseconds().toString().padStart(3,"0")}`,_=this.getPacketDump(t);console.log(`${o} ${e}:
${_}
`)}checkErr(){if(!this.connected||this.err){let e,t;throw this.savedErr?e=Yt.getErr(Yt.ERR_CONNECTION_LOSTCONTACT,this.host,this.port,this.atts.connectionId,this.savedErr.message):e=Yt.getErr(Yt.ERR_CONNECTION_EOF,this.host,this.port,this.atts.connectionId),t=Yt.getErr(Yt.ERR_CONNECTION_CLOSED),t.message=t.message+`
`+e.message,t}}send(e){this.checkErr(),FP.env.NODE_ORACLEDB_DEBUG_PACKETS&&this.printPacket(`Sending packet ${this.packetNum} on stream ${this.streamNum}`,e),this.stream.write(e,n=>{n&&(this.savedErr=n,this.err=!0,this._notifyWaiters())})||(this.needsDrain=!0),this.numPacketsSinceLastWait++,this.packetNum++}shouldPauseWrite(){return this.needsDrain||this.numPacketsSinceLastWait>=100}async pauseWrite(){this.checkErr(),this.needsDrain?(await new Promise(e=>{this.drainWaiter=e}),this.checkErr()):await new Promise(e=>eM.setImmediate(e)),this.numPacketsSinceLastWait=0}startRead(){let e;this.packets=[],this.stream.on("data",t=>{for(e?e=J1.concat([e,t]):e=t;e.length>=tM;){let n;if(this.largeSDU?n=e.readUInt32BE():n=e.readUInt16BE(),n>e.length)break;let o={buf:e.subarray(0,n),type:e[4],flags:e[5],num:this.packetNum++};if(this.packets.push(o),this.readWaiter&&(this.readWaiter(),this.readWaiter=null),FP.env.NODE_ORACLEDB_DEBUG_PACKETS&&this.printPacket(`Receiving packet ${o.num} on stream ${this.streamNum}`,o.buf),n===e.length){e=null;break}else e=e.subarray(n)}})}syncReceive(){return this.packets.shift()}async receive(){return this.packets.length===0&&(this.checkErr(),await new Promise(e=>{this.readWaiter=e,this.numPacketsSinceLastWait=0}),this.checkErr()),this.packets.shift()}async renegTLS(){try{this.checkErr();let e=ho.createSecureContext({cert:this.atts.wallet,key:this.atts.wallet,passphrase:this.atts.walletPassword,ca:this.atts.wallet});await this.tlsConnect(e,this.connStream)}finally{this.setupEventHandlers()}}setupEventHandlers(){this.stream.removeAllListeners(),this.stream.on("error",e=>{this.savedErr=e,this.err=!0,this._notifyWaiters()}),this.stream.on("end",()=>{this.err=!0,this._notifyWaiters()}),this.stream.on("close",()=>{this.connected=!1,this._notifyWaiters()}),this.stream.on("drain",()=>{this.needsDrain=!1,this.drainWaiter&&(this.drainWaiter(),this.drainWaiter=null)})}getOption(e){switch(this.checkErr(),e){case eE.NT_MOREDATA:return this.packets.length>0;case eE.REMOTEADDR:{let t=this.secure?this.connStream:this.stream;return t.remoteAddress+":"+t.remotePort}default:Yt.throwErr(Yt.ERR_INTERNAL,"getOption not supported for opcode "+e)}}_notifyWaiters(){this.drainWaiter&&(this.drainWaiter(),this.drainWaiter=null),this.readWaiter&&(this.readWaiter(),this.readWaiter=null)}};a(rE,"NTTCP");var tE=rE;vP.exports=tE});var HP=U((jk,GP)=>{"use strict";var oM=require("crypto"),aM=require("path"),qP=Ii(),_M=require("fs");async function cM(){return await new Promise((s,e)=>{oM.randomBytes(16,(t,n)=>{t?e(t):s(n)})})}a(cM,"genuuid");var sE=class sE{constructor(e){this.largeSDU=!1,this.tdu=qP.NSPDFTDULN,this.nt={},this.nt.tcpNoDelay=!0,this.uuid=e,this.nt.sslServerDNMatch=!0}setFrom(e){e&&(e.sdu>0&&(this.sdu=parseInt(e.sdu)),typeof e.walletLocation=="string"&&(this.nt.walletFile=aM.join(e.walletLocation,qP.PEM_WALLET_FILE_NAME)),typeof e.walletPassword=="string"&&(this.nt.walletPassword=e.walletPassword),e.expireTime>0&&(this.nt.expireTime=e.expireTime*1e3*60),e.connectTimeout>0&&(this.connectTimeout=e.connectTimeout*1e3),e.transportConnectTimeout>0&&(this.transportConnectTimeout=e.transportConnectTimeout*1e3),e.recvTimeout>0&&(this.recvTimeout=e.recvTimeout*1e3),e.sendTimeout>0&&(this.sendTimeout=e.sendTimeout*1e3),typeof e.connectionIdPrefix=="string"&&(this.connectionIdPrefix=e.connectionIdPrefix),typeof e.tcpNoDelay=="boolean"&&(this.nt.tcpNoDelay=e.tcpNoDelay),typeof e.sslServerDNMatch=="boolean"&&(this.nt.sslServerDNMatch=e.sslServerDNMatch),typeof e.sslServerCertDN=="string"&&(this.nt.sslServerCertDN=e.sslServerCertDN),typeof e.enable=="string"&&e.enable.toUpperCase()=="BROKEN"&&(this.nt.enabledDCD=!0),typeof e.httpsProxy=="string"&&(this.nt.httpsProxy=e.httpsProxy),e.httpsProxyPort>=0&&(this.nt.httpsProxyPort=parseInt(e.httpsProxyPort)))}readWalletFile(){return new Promise((e,t)=>{_M.readFile(this.nt.walletFile,(n,o)=>{n?t(n):e(o)})})}async prepare(e){this.uuid||(this.uuid=await cM(),this.uuid=this.uuid.toString("base64")),this.connectionIdPrefix?this.connectionId=this.connectionIdPrefix+this.uuid:this.connectionId=this.uuid,this.nt.connectionId=this.connectionId,e&&e.toUpperCase()=="TCPS"&&this.nt.walletFile&&(this.nt.wallet=await this.readWalletFile()),!this.connectTimeout&&!this.transportConnectTimeout&&(this.transportConnectTimeout=60*1e3)}};a(sE,"SessionAtts");var nE=sE;GP.exports=nE});var No=U((eq,JP)=>{"use strict";var Qe=Ee(),KP=0,So=1,iE=2,oE=3,a_=4,SE=class SE{constructor(e){this.name=e,this.listType=oE,this.rhsType=KP}set setAtom(e){this._containsComment(e)&&Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX),this.rhsType=So,this.list=null,this.atom=e}_containsComment(e){for(let t=0;t<e.length;t++)if(e.charAt(t)=="#")if(t!=0){if(e.charAt(t-1)=="\\")continue;return!0}else return!0;return!1}getListSize(){return this.list==null?0:this.list.length}getListElement(e){return this.list==null?null:this.list[e]}addListElement(e){this.list==null&&(this.rhsType=iE,this.list=new Array,this.atom=null),this.list.push(e),e.parent=this}removeListElement(e){this.list!=null&&(this.list.splice(e,1),this.getListSize==0&&(this.list=null,this.rhsType=KP))}_space(e){var t="";for(let n=0;n<e;n++)t+=" ";return t}valueToString(){let e="";if(this.rhsType==So)e=e+this.atom;else if(this.rhsType==iE){if(this.listType==oE)for(let t=0;t<this.getListSize();t++)e=e+this.getListElement(t).toString();else if(this.listType==a_)for(let t=0;t<this.getListSize();t++){let n=this.getListElement(t);e=e+n.name,t!=this.getListSize()-1&&(e=e+", ")}}return e}toString(){let e="("+this.name+"=";if(this.rhsType==So)e=e+this.atom;else if(this.rhsType==iE){if(this.listType==oE)for(let t=0;t<this.getListSize();t++)e=e+this.getListElement(t).toString();else if(this.listType==a_){e=e+" (";for(let t=0;t<this.getListSize();t++){let n=this.getListElement(t);e=e+n.name,t!=this.getListSize()-1&&(e=e+", ")}e=e+")"}}return e=e+")",e}};a(SE,"NVPair");var __=SE,lM=0,c_=1,TE=2,ms=3,$P=4,l_=8,TM=9,aE="(",_E=")",cE=",",lE="=",uM="\\",WP='"',EM="'",hM="%",SM=" ",NM="	",fM=`
`,AM="\r",NE=class NE{constructor(){this.tkType=null,this.tkValue=null,this.numTokens=0,this.tkPos=0}_isWhiteSpace(e){return e==SM||e==NM||e==fM||e==AM}_trimWhiteSpace(e){let t=e.length,n=0,o=t;for(;n<t&&this._isWhiteSpace(e.charAt(n));)n++;for(;n<o&&this._isWhiteSpace(e.charAt(o-1));)o--;return e.substring(n,o)}parseTokens(e){this.numTokens=0,this.tkPos=0,this.tkType=new Array,this.tkValue=new Array;let t=e.length,n=!1,o=new Array;o=Array.from(e);let _=0;for(;_<t;){for(;_<t&&this._isWhiteSpace(o[_]);)_++;if(_<t)switch(o[_]){case aE:n=!1,this._addToken(c_,aE),_++;break;case lE:n=!0,this._addToken($P,lE),_++;break;case _E:n=!1,this._addToken(TE,_E),_++;break;case cE:n=!1,this._addToken(ms,cE),_++;break;default:{let T=_,u=-1,h=!1,A=WP;for((o[_]==EM||o[_]==WP)&&(h=!0,A=o[_],_++,T=_);_<t;){if(o[_]==uM){_+=2;continue}if(h){if(o[_]==A){_++,u=_-1;break}}else if(o[_]==aE||o[_]==_E||o[_]==cE&&!n||o[_]==lE&&!n){u=_;break}_++}u==-1&&(u=_),this._addToken(l_,e.substring(T,u).trim());break}}}return this._addToken(TM,hM),!0}getToken(){if(this.tkType==null&&Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens)return Number(this.tkType[this.tkPos]);Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX)}popToken(){let e=lM;return this.tkType==null&&Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=Number(this.tkType[this.tkPos++]):Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX),e}getLiteral(){let e=null;return this.tkValue==null&&Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=String(this.tkValue[this.tkPos]):Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX),e}popLiteral(){let e=null;return this.tkValue==null&&Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=String(this.tkValue[this.tkPos++]):Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX),e}eatToken(){this.tkPos<this.numTokens&&this.tkPos++}toString(){if(this.tkType==null)return"*NO TOKENS*";let e="Tokens";for(let t=0;t<this.numTokens;t++)e=e+" : "+this.tkValue[t];return e}_addToken(e,t){this.tkType.push(Number(e)),this.tkValue.push(String(t)),this.numTokens++}};a(NE,"NVTokens");var uE=NE;function dM(s){let e=new uE;return e.parseTokens(s),pM(e)}a(dM,"createNVPair");function pM(s){let e=s.getToken();s.eatToken(),e!=c_&&Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=hE(s),n=new __(t);if((e=s.getToken())==ms){for(;e==l_||e==ms;)t+=s.popLiteral(),e=s.getToken();return n.name=t,EE(n,s)}return EE(n,s)}a(pM,"readTopLevelNVPair");function mM(s){let e=s.getToken();s.eatToken(),e==c_||e==ms||Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=hE(s),n=new __(t);return EE(n,s)}a(mM,"readNVPair");function EE(s,e){let t=e.getToken();switch(t){case $P:if(e.eatToken(),t=e.getToken(),t==l_){let n=hE(e);s.setAtom=n}else zP(e,s);break;case ms:case TE:s.setAtom=s.name;break;default:Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX)}return t=e.getToken(),t==TE?e.eatToken():t!=ms&&Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX),s}a(EE,"readRightHandSide");function hE(s){return s.getToken()!=l_&&Qe.throwErr(Qe.ERR_INVALID_CONNECT_STRING_SYNTAX),s.popLiteral()}a(hE,"readNVLiteral");function zP(s,e){let t=s.getToken();if(!(t==c_||t==ms))return;let n=mM(s);e.addListElement(n),(t==ms||n.name==n.atom)&&e.getListType!=a_&&(e.setListType=a_),zP(s,e)}a(zP,"readNVList");function XP(s,e){if(!s)return null;if(e.toUpperCase()==s.name.toUpperCase())return s;if(s.getRHSType==So)return null;for(let t=0;t<s.getListSize();t++){let n=XP(s.getListElement(t),e);if(n!==null)return n}return null}a(XP,"findNVPairRecurse");function QP(s,e){if(!s||s.getRHSType==So)return null;for(let t=0;t<s.getListSize();t++){let n=s.getListElement(t);if(e.toUpperCase()==n.name.toUpperCase())return n}return null}a(QP,"findNVPair");function PM(s,e){if(!s||e[0].toUpperCase()!=s.name.toUpperCase())return null;let t=s,n=e.length;for(let o=1;o<n;o++)if(t=QP(t,e[o]),!t)return null;return t.atom==null?t.list==null?null:t.list.toString():t.atom.toString()}a(PM,"findValue");JP.exports={findNVPairRecurse:XP,createNVPair:dM,findNVPair:QP,findValue:PM}});var Di=U((rq,tR)=>{"use strict";var ZP=ir(),T_=Ee(),jP=require("os");function RM(){this.program=process.argv0,this.terminal="unknown",this.pid=process.pid.toString();try{this.userName=jP.userInfo().username}catch{this.userName="unknown"}this.hostName=jP.hostname()}a(RM,"populateClientInfo");var IM=new RM;function DM(s){let e=[];for(let t of s)e.push(t.fetchInfo);return e}a(DM,"getMetadataMany");function fE(s,e){let t=s[0].name===void 0,n;t?n=[]:n={};for(let o=0;o<s.length;o++)s[o].dir!==ZP.BIND_IN&&(t?n.push(s[o].values[e]):n[s[o].name]=s[o].values[e]);return n}a(fE,"getOutBinds");function gM(s,e){if(eR(s)===0)return;let n=new Array(e).fill(null);for(let o=0;o<e;o++)n[o]=fE(s,o);return n}a(gM,"getExecuteManyOutBinds");function eR(s){let e=0;for(let t=0;t<s.length;t++)s[t].dir!==ZP.BIND_IN&&e++;return e}a(eR,"getNumOutBinds");function CM(s){if(eR(s)!==0)return fE(s,0)}a(CM,"getExecuteOutBinds");function OM(s){return s=s.trim(),s=s.replace(/\--.*(\n|$)/g,""),s=s.replace(/\/\\*[\S\n ]+\\*\//g,""),s=s.replace(/\s+/g," "),s}a(OM,"cleanSql");function yM(s){let e=[];for(let t of s.bindInfoList)e.push(t.bindVar);return e}a(yM,"getBindVars");function LM(s){let e="",t="",n=!1,o=!1,_=0,T,u={status:-1,proxyUser:"",schemaUser:""},h=s.length,A=0,N,P;for(;A<h;){if(s.charAt(A)==='"'&&(n=!n,_=A),s.charAt(A)==="["&&!n){if(o=!0,_!=0){for(N=_+1;N<A;N++)if(s.charAt(N)!==" ")return u;for(N=0;N<=_;N++)t+=s.charAt(N)}else for(N=0;N<A&&s.charAt(N)!==" ";N++)t+=s.charAt(N);break}A++}if(t.length===0)return u;for(u.proxyUser=t,A=A+1,n=!1,T=A,_=0;A<h;){if(s.charAt(A)==='"'&&(n=!n,_=A),s.charAt(A)==="["&&!n&&o)return u;if(s.charAt(A)==="]"&&!n){if(_!=T&&_!=0){for(N=T;N<=_;N++)e+=s.charAt(N);for(N=_+1;N<A;N++)if(s.charAt(N)!=" ")return u}else{for(N=T;N<A&&s.charAt(N)==" ";N++);if(N==A)return u;for(P=N;P<A;P++)e+=s[P]}for(N=A+1;N<h;N++)if(s[N]!=" ")return u}A++}return e.length===0||(u.schemaUser=e,u.status=0),u}a(LM,"checkProxyUserValidity");function wM(s){s.token===void 0&&(s.externalAuth===!0&&T_.throwErr(T_.ERR_NOT_IMPLEMENTED,"External Authentication"),s.password===void 0&&T_.throwErr(T_.ERR_MISSING_CREDENTIALS))}a(wM,"checkCredentials");tR.exports={getMetadataMany:DM,cleanSql:OM,CLIENT_INFO:IM,getExecuteOutBinds:CM,getExecuteManyOutBinds:gM,getOutBinds:fE,getBindVars:yM,checkProxyUserValidity:LM,checkCredentials:wM}});var iR=U((sq,sR)=>{"use strict";var{findNVPairRecurse:fo,createNVPair:S_}=No(),_r=Ee(),BM=require("os"),UM=require("net"),YM=require("dns"),rR=YM.promises,AE=Di().CLIENT_INFO,N_={ADDR:0,ADDR_LIST:1,DESC:2,DESC_LIST:3},RE=class RE{isS(){return N_.ADDR}initFromString(e){let t=S_(e);this.initFromNVPair(t)}initFromNVPair(e){(e==null||e.name.toUpperCase()!="ADDRESS")&&_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=fo(e,"protocol"),n=fo(e,"port"),o=fo(e,"host"),_=fo(e,"https_proxy"),T=fo(e,"https_proxy_port");n&&(this.port=n.atom),o&&(this.host=o.atom),t&&(this.prot=t.atom),_&&(this.httpsProxy=_.atom),T&&(this.httpsProxyPort=T.atom),this.addr=e.toString()}toString(){return this.addr}};a(RE,"Address");var dE=RE,IE=class IE{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!1,this.failover=!0}isS(){return N_.ADDR_LIST}initFromString(e){let t=S_(e);this.initFromNVPair(t)}initFromNVPair(e){this.children=[];let t,n,o=e.getListSize();o==0&&_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let _=0;_<o;_++)t=e.getListElement(_),t.name.toUpperCase()=="SOURCE_ROUTE"?this.sourceRoute=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="LOAD_BALANCE"?this.loadBalance=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="FAILOVER"?this.failover=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="ADDRESS"?(n=new Ao,n.initFromNVPair(t),this.children.push(n)):t.name.toUpperCase()=="ADDRESS_LIST"?(n=new po,n.initFromNVPair(t),this.children.push(n)):_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX);this.children.length==0&&_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX)}toString(){let e=new String("");if(this.children.size()<1)return e;e+="(ADDRESS_LIST=";for(let t=0;t<this.children.size();t++)e+=this.children[t].toString();return this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"+gi.HC),this.loadBalance&&(e+="(LOAD_BALANCE=yes)"),this.failover||(e+="(FAILOVER=false)"),e+=")",e}};a(IE,"AddressList");var pE=IE,DE=class DE{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!1,this.failover=!0,this.delayInMillis=-1,this.params={}}isS(){return N_.DESC}initFromString(e){let t=S_(e);this.initFromNVPair(t)}initFromNVPair(e){let t=e.getListSize(),n,o;t==0&&_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let _=0;_<t;_++)if(n=e.getListElement(_),n.name.toUpperCase()=="SOURCE_ROUTE")this.sourceRoute=n.atom.toLowerCase()=="yes"||n.atom.toLowerCase()=="on"||n.atom.toLowerCase()=="true";else if(n.name.toUpperCase()=="LOAD_BALANCE")this.loadBalance=n.atom.toLowerCase()=="yes"||n.atom.toLowerCase()=="on"||n.atom.toLowerCase()=="true";else if(n.name.toUpperCase()=="FAILOVER")this.failover=n.atom.toLowerCase()=="yes"||n.atom.toLowerCase()=="on"||n.atom.toLowerCase()=="true";else if(n.name.toUpperCase()=="ADDRESS_LIST")o=new po,o.initFromNVPair(n),this.children.push(o);else if(n.name.toUpperCase()=="ADDRESS")o=new Ao,o.initFromNVPair(n),this.children.push(o);else if(n.name.toUpperCase()=="CONNECT_DATA"){let T,u=n.getListSize();for(let h=0;h<u;h++)if(T=n.getListElement(h),T.name.toUpperCase()=="CONNECTION_ID_PREFIX"){this.params.connectionIdPrefix=T.atom,n.removeListElement(h);break}this.connectData=n.valueToString()}else if(n.name.toUpperCase()=="RETRY_DELAY")n.atom>0&&(this.delayInMillis=n.atom*1e3);else if(n.name.toUpperCase()=="RETRY_COUNT")this.retryCount=n.atom;else if(n.name.toUpperCase()=="CONNECTION_ID_PREFIX")this.conidPrefix=n.atom;else if(n.name.toUpperCase()=="CONNECT_TIMEOUT")n.atom>0&&(this.params.connectTimeout=n.atom);else if(n.name.toUpperCase()=="TRANSPORT_CONNECT_TIMEOUT")n.atom>0&&(this.params.transportConnectTimeout=n.atom);else if(n.name.toUpperCase()=="ENABLE")this.params.enable=n.atom;else if(n.name.toUpperCase()=="RECV_TIMEOUT")n.atom>0&&(this.params.recvTimeout=n.atom);else if(n.name.toUpperCase()=="SDU")this.params.sdu=n.atom;else if(n.name.toUpperCase()=="EXPIRE_TIME")n.atom>0&&(this.params.expireTime=n.atom);else if(n.name.toUpperCase()=="SECURITY"){let T=n.getListSize(),u;for(let h=0;h<T;h++)u=n.getListElement(h),u.name.toUpperCase()=="SSL_SERVER_CERT_DN"?this.params.sslServerCertDN=u.valueToString():u.name.toUpperCase()=="SSL_SERVER_DN_MATCH"?this.params.sslServerDNMatch=u.atom.toLowerCase()=="yes"||u.atom.toLowerCase()=="on"||u.atom.toLowerCase()=="true":(u.name.toUpperCase()=="WALLET_LOCATION"||u.name.toUpperCase()=="MY_WALLET_DIRECTORY")&&(this.params.walletLocation=u.atom)}}toString(){let e=new String(""),t;t=new String("");for(let n=0;n<this.children.size();n++)t=this.children[n].toString(),!t==""&&(e+=t);return!e==""&&this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"),!e==""&&this.loadBalance&&(e+="(LOAD_BALANCE=yes)"),!e==""&&!this.failover&&(e+="(FAILOVER=false)"),e.equals("")||(e="(DESCRIPTION="+e+")"),e}};a(DE,"Description");var mE=DE,gE=class gE{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!0,this.failover=!0}isS(){return N_.ADDR_LIST}initFromString(e){let t=S_(e);this.initFromNVPair(t)}initFromNVPair(e){let t=e.getListSize(),n,o;t==0&&_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let _=0;_<t;_++)o=e.getListElement(_),o.name.toUpperCase()=="SOURCE_ROUTE"?this.sourceRoute=o.atom.toLowerCase()=="yes"||o.atom.toLowerCase()=="on"||o.atom.toLowerCase=="true":o.name.toUpperCase()=="LOAD_BALANCE"?this.loadBalance=o.atom.toLowerCase()=="yes"||o.atom.toLowerCase()=="on"||o.atom.toLowerCase()=="true":o.name.toUpperCase()=="FAILOVER"?this.failover=o.atom.toLowerCase()=="yes"||o.atom.toLowerCase()=="on"||o.atom.toLowerCase()=="true":o.name.toUpperCase()=="DESCRIPTION"?(n=new E_,n.initFromNVPair(o),this.children.push(n)):_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX);this.children.length==0&&_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX)}toString(){let e=new String("");if(this.children.size()<1)return e;let t=new String("");for(let n=0;n<this.children.size();n++)t=this.children[n].toString(),t.equals("")||(e+=t);return e.equals("")&&this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"),e.equals("")&&!this.loadBalance&&(e+="(LOAD_BALANCE=no)"),e.equals("")&&!this.failover&&(e+="(FAILOVER=false)"),e.equals("")||(e="(DESCRIPTION_LIST="+e+")"),e}};a(gE,"DescriptionList");var PE=gE,CE=class CE{constructor(){this.CNdata=new Array}};a(CE,"ConnOption");var u_=CE,gi={DEBUG:!1,SR:"(SOURCE_ROUTE=yes)",HC:"(HOP_COUNT=0)",LB:"(LOAD_BALANCE=yes)",NFO:"(FAILOVER=false)",CD:"(CONNECT_DATA=",CONID:"(CONNECTION_ID="},nR={all:!0},OE=class OE extends dE{constructor(){super()}async navigate(e){let t,n=0,o=!1;if(!this.host){n=1,this.host=BM.hostname();try{await rR.lookup(this.host,nR)}catch{this.host="localhost"}}if(e.getcurrentDescription()==null&&(e.newConnectionDescription(),o=!0),UM.isIP(this.host)){let _=new u_;_.hostname=this.host,_.port=this.port,_.protocol=this.prot,_.httpsProxy=this.httpsProxy,_.httpsProxyPort=this.httpsProxyPort,_.desc=e.getcurrentDescription(),_.CNdata.push(e.sBuf.join("")),_.CNdata.push(this.toString()),_.host=this.host,_.addr=this.addr,e.getcurrentDescription().addConnectOption(_)}else try{t=await rR.lookup(this.host,nR);for(let _ in t){let T=new u_;T.hostname=this.host,T.port=this.port,T.protocol=this.prot,T.httpsProxy=this.httpsProxy,T.httpsProxyPort=this.httpsProxyPort,T.desc=e.getcurrentDescription(),T.CNdata.push(e.sBuf.join("")),n==1?T.CNdata.push("(address=(protocol="+this.prot+")(host="+this.host+")(port="+this.port+"))"):T.CNdata.push(this.toString()),T.host=t[_].address,T.addr=this.addr,e.getcurrentDescription().addConnectOption(T)}}catch{}o&&e.closeDescription()}addToString(e){let t=this.toString(),n=new Array;n=e.getcurrentDescription().getConnectOptions();for(let o=0;o<n.length;o++)n[o].done||n[o].CNdata.push(t)}};a(OE,"NavAddress");var Ao=OE,yE=class yE extends pE{constructor(){super(),this.activeChildren=new Array,this.sBuflength=0}async navigate(e){await this.navigate2(e,0)}async navigate2(e,t){if(t++,this.sBuflength=e.sBuf.length,e.sBuf.push("(ADDRESS_LIST="),this.sourceRoute){this.activeChildren=this.children,await this.activeChildren[0].navigate(e);for(let n=1;n<this.activeChildren.length;n++)this.activeChildren[n].addToString(e)}else{this.activeChildren=mo.setActiveChildren(this.children,this.failover,this.loadBalance);for(let n=0;n<this.activeChildren.length;n++)this.getChildrenType(n)==1?await this.activeChildren[n].navigate2(e,t):await this.activeChildren[n].navigate(e)}this.closeNVPair(e),e.sBuf.length=this.sBuflength}addToString(e){let t=this.toString(),n=new Array;n=e.getcurrentDescription().getConnectOptions();for(let o=0;o<n.length;o++)n[o].done||n[o].CNdata.push(t)}getChildrenSize(){let e=0;for(let t=0;t<this.activeChildren.length;t++)if(this.getChildrenType(t)==1?e+=this.activeChildren[t].getChildrenSize():e++,this.sourceRoute)return e;return e}getChildrenType(e){return this.activeChildren[e].isS()}getChild(e){return this.children[e]}closeNVPair(e){let t=new Array,n=this.getChildrenSize();if(e.getcurrentDescription()!=null){t=e.getcurrentDescription().getConnectOptions();let o=0,_=null,T=null;for(let u=t.length-1;u>=0&&!t[u].done&&((t[u].hostname!=_||t[u].port!=T)&&o++,_=t[u].hostname,T=t[u].port,!(o>n));u--)this.sourceRoute&&(t[u].CNdata.push(gi.SR),t[u].CNdata.push(gi.HC),t[u].done=!0),t[u].CNdata.push(")")}}};a(yE,"NavAddressList");var po=yE,LE=class LE extends mE{constructor(){super(),this.activeChildren=new Array,this.descProcessed=0}async navigate(e){e.sBuf.length=0,e.sBuf.push("(DESCRIPTION=");let t=e.newConnectionDescription();if(this.retryCount!=null&&(e.retryCount=this.getIntValue(this.retryCount,e.retryCount),t.retryCount=e.retryCount),this.delayInMillis!=-1&&(t.delayInMillis=this.delayInMillis),t.params=this.params,"connectTimeout"in this.params&&e.sBuf.push("(CONNECT_TIMEOUT="+this.params.connectTimeout+")"),"transportConnectTimeout"in this.params&&e.sBuf.push("(TRANSPORT_CONNECT_TIMEOUT="+this.params.transportConnectTimeout+")"),"recvTimeout"in this.params&&e.sBuf.push("(RECV_TIMEOUT="+this.params.recvTimeout+")"),"sdu"in this.params&&e.sBuf.push("(SDU="+this.params.sdu+")"),"expireTime"in this.params&&e.sBuf.push("(EXPIRE_TIME="+this.params.expireTime+")"),"enable"in this.params&&e.sBuf.push("(ENABLE="+this.params.enable+")"),("sslServerCertDN"in this.params||"sslServerDNMatch"in this.params||"walletLocation"in this.params)&&(e.sBuf.push("(SECURITY="),"sslServerCertDN"in this.params&&e.sBuf.push("(SSL_SERVER_CERT_DN="+this.params.sslServerCertDN+")"),"sslServerDNMatch"in this.params&&e.sBuf.push("(SSL_SERVER_DN_MATCH="+this.params.sslServerDNMatch+")"),"walletLocation"in this.params&&e.sBuf.push("(WALLET_LOCATION="+this.params.walletLocation+")"),e.sBuf.push(")")),"httpsProxyPort"in this.params&&e.sBuf.push("(HTTPS_PROXY_PORT="+this.params.httpsProxyPort+")"),"httpsProxy"in this.params&&e.sBuf.push("(HTTPS_PROXY="+this.params.httpsProxy+")"),this.failover||e.sBuf.push(gi.NFO),this.sourceRoute){this.activeChildren=this.children,await this.activeChildren[0].navigate(e);for(let n=1;n<this.activeChildren.length;n++)this.activeChildren[n].addToString(e);this.closeNVPair(e)}else{this.activeChildren=mo.setActiveChildren(this.children,this.failover,this.loadBalance);for(let n=0;n<this.activeChildren.length;n++)await this.activeChildren[n].navigate(e);this.closeNVPair(e)}e.closeDescription()}closeNVPair(e){if(e.getcurrentDescription()==null)return;let t=new Array;t=e.getcurrentDescription().getConnectOptions();for(let n=0;n<t.length;++n){this.sourceRoute&&t[n].CNdata.push(gi.SR),this.connectData==null&&(this.connectData="(SERVICE_NAME=)");let o=`(CID=(PROGRAM=${AE.program})(HOST=${AE.hostName})(USER=${AE.userName}))`;t[n].CNdata.push(gi.CD),t[n].CNdata.push(this.connectData),t[n].CNdata.push(o),t[n].CNdata.push(")"),this.SID!=null&&(t[n].sid=this.SID),this.serviceName!=null&&(t[n].service_name=this.serviceName),this.instanceName!=null&&(t[n].instance_name=this.instanceName),t[n].CNdata.push(")"),t[n].done=!0}}getIntValue(e,t){try{return parseInt(e)}catch{return t}}};a(LE,"NavDescription");var E_=LE,h_=class h_ extends PE{constructor(e=new Array,t=0,n=0){super(),this.activeChildren=e,this.descProcessed=t,this.done=n}async navigate(e){for(e.sBuf.push("(DESCRIPTION_LIST="),this.activeChildren=h_.setActiveChildren(this.children,this.failover,this.loadBalance);this.descProcessed<this.activeChildren.length;)await this.activeChildren[this.descProcessed].navigate(e),this.descProcessed++}static setActiveChildren(e,t,n){let o,_=e.length,T=new Array,u=Math.floor(Math.random()*10),h=new Array(_).fill(!1);if(t)if(n)for(let A=0;A<_;A++){do o=Math.abs(Math.floor(Math.random()*10))%_;while(h[o]);h[o]=!0,T.push(e[o])}else T=e;else n?(o=Math.abs(u)%_,T.push(e[o])):T.push(e[0]);return T}};a(h_,"NavDescriptionList");var mo=h_;sR.exports={NavAddress:Ao,NavAddressList:po,NavDescription:E_,NavDescriptionList:mo}});var _R=U((oq,aR)=>{"use strict";var{NavAddress:MM,NavAddressList:xM,NavDescription:VM,NavDescriptionList:bM}=iR(),{createNVPair:FM}=No(),oR=Ee(),UE=class UE{constructor(){this.cOpts=new Array}addConnectOption(e){this.cOpts.push(e)}getConnectOptions(){return this.cOpts}};a(UE,"ConnectDescription");var wE=UE,YE=class YE{constructor(){this.nextOptToTry=0,this.retryCount=0,this.lastRetryCounter=0,this.lastRetryConnectDescription=0,this.currentDescription=null,this.descriptionList=new Array,this.sBuf=new Array}hasMoreOptions(){let e=0;for(let t=0;t<this.descriptionList.length;++t)e+=this.descriptionList[t].getConnectOptions().length;return this.nextOptToTry<e}newConnectionDescription(){return this.currentDescription=new wE,this.currentDescription}getcurrentDescription(){return this.currentDescription}closeDescription(){this.descriptionList.push(this.currentDescription),this.currentDescription=null}async execute(e){e!=null&&this.retryCount==0&&e.retryCount>0&&(this.retryCount=e.retryCount);for(let t=this.lastRetryConnectDescription;t<this.descriptionList.length;t++){let n=this.descriptionList[t],o=new Array;o=n.getConnectOptions();let _=n.delayInMillis;e!=null&&(_==0||_==null)&&e.retryDelay>0&&(_=e.retryDelay*1e3);for(let T=this.lastRetryCounter;T<=this.retryCount;++T){for(;this.nextOptToTry<o.length;){let u=o[this.nextOptToTry];return this.lastRetryCounter=T,this.lastRetryConnectDescription=t,this.nextOptToTry++,u}this.nextOptToTry=0,_>0&&T<this.retryCount&&await vM(_)}this.lastRetryCounter=0}throw this.nextOptToTry=1e3,this.lastRetryCounter=1e3,new Error("All options tried")}};a(YE,"ConnStrategy");var BE=YE;function vM(s){return new Promise(e=>setTimeout(e,s))}a(vM,"sleep");async function kM(s){let e;typeof s=="string"?e=FM(s):e=s;let t=e.name.toUpperCase(),n=null;switch(t){case"ADDRESS":n=new MM;break;case"ADDRESS_LIST":n=new xM;break;case"DESCRIPTION":n=new VM;break;case"DESCRIPTION_LIST":n=new bM;break;default:oR.throwErr(oR.ERR_INVALID_CONNECT_STRING_PARAMETERS,`unknown top element ${t}`)}n.initFromNVPair(e);let o=new BE;return await n.navigate(o),o}a(kM,"createNode");aR.exports={createNode:kM}});var uR=U((_q,TR)=>{"use strict";var{lookup:qM}=require("dns").promises,Pn=Ee(),lR=new RegExp("((?=(?<hostnames>(((\\[[A-z0-9:]+\\])|([A-z0-9][A-z0-9._-]+))[,]?)+)))\\k<hostnames>(:(?<port>\\d+)?)?","g"),GM=new RegExp("^(((?<protocol>[A-z0-9]+):)?//)?(?<hostinfo>("+lR.source+"(?=([,]|[;]|[/]|[:]|$))([,]|[;])?)+)(/(?<servicename>[A-z0-9][A-z0-9,-.]+)?)?(:(?<servermode>dedicated|shared|pooled))?(/(?<instance>[A-z0-9][A-z0-9]+))?$","ig"),cR='"',HM="=",KM="&",WM=["ENABLE","FAILOVER","LOAD_BALANCE","RECV_BUF_SIZE","SEND_BUF_SIZE","SDU","SOURCE_ROUTE","RETRY_COUNT","RETRY_DELAY","CONNECT_TIMEOUT","TRANSPORT_CONNECT_TIMEOUT","RECV_TIMEOUT"],xE=class xE{constructor(e){this.URL_PROPS_ALIAS=this.initializeUrlAlias();let t=e.indexOf("@");t!=-1?(this.url=e.substring(t+1),this.urlPrefix=e.substring(0,t+1)):(this.url=e,this.urlPrefix=""),this.resolvedUrl="",this.connectionProps=new Map,this.urlProps=new Map,this.lb=!1}async getResolvedUrl(){return await this.parse(),this.resolvedUrl}async parse(){let e=this.parseExtendedSettings(this.url);this.connectionProps.size===0&&this.urlProps.size===0&&(e=this.url),e.startsWith("(")?this.resolvedUrl=this.urlPrefix+e:this.resolvedUrl=this.urlPrefix+await this.resolveToLongURLFormat(e)}async resolveToLongURLFormat(e){let t=e.replace(/\s/g,""),n=0,o=null,_=null,T=null,u=null,h=null;for(let p of t.matchAll(GM))n=1,o=p.groups.protocol,_=p.groups.hostinfo,T=p.groups.servicename,u=p.groups.servermode,h=p.groups.instance;n||Pn.throwErr(Pn.ERR_INVALID_EZCONNECT_SYNTAX,"input string not in easy connect format",t),o==null?e.includes("//")||(o="TCP"):o.toLowerCase()!="tcp"&&o.toLowerCase()!="tcps"&&Pn.throwErr(Pn.ERR_INVALID_EZCONNECT_SYNTAX,"Unsupported protocol in thin mode",o);let A=this.urlProps.get("HTTPS_PROXY"),N=this.urlProps.get("HTTPS_PROXY_PORT"),P=await this.buildAddressList(_,o,A,N),R=this.urlProps.get("CONNECTION_ID_PREFIX"),g=[];return this.lb&&g.push("(LOAD_BALANCE=ON)"),g.push(this.buildDescriptionParams()),g.push(P),g.push(this.buildConnectData(T,u,h,R)),g.push(this.buildSecurityInfo(o)),`(DESCRIPTION=${g.join("")})`}buildConnectData(e,t,n,o){let _=this.urlProps.get("POOL_CONNECTION_CLASS"),T=this.urlProps.get("POOL_PURITY"),u=this.urlProps.get("SERVICE_TAG"),h=[];return e?h.push(`(SERVICE_NAME=${e})`):h.push("(SERVICE_NAME=)"),t&&h.push(`(SERVER=${t})`),n&&h.push(`(INSTANCE_NAME=${n})`),_&&h.push(`(POOL_CONNECTION_CLASS=${_})`),T&&h.push(`(POOL_PURITY=${T})`),u&&h.push(`(SERVICE_TAG=${u})`),o&&h.push(`(CONNECTION_ID_PREFIX=${o})`),`(CONNECT_DATA=${h.join("")})`}async buildAddressList(e,t,n,o){let _="",T=0,u=new Array,h="";n!=null&&(o!=null?h=`(HTTPS_PROXY=${n})(HTTPS_PROXY_PORT=${o})`:h=`(HTTPS_PROXY=${n})`),t==null&&(t="TCP");let A=0,N=e.split(";");for(let P in N){let R=0,g=new Array;for(let m of N[P].matchAll(lR)){let y=m.groups.hostnames.split(","),I=m.groups.port;I==null&&(I="1521");for(let M in y)g.push(this.getAddrStr(y[M],I,t,h)),_=y[M],R++}A+=R;let p=[];N.length>1&&R>1&&p.push("(LOAD_BALANCE=ON)"),p.push(g.join("")),N.length>1?u.push(`(ADDRESS_LIST=${p.join("")})`):u.push(p.join(""))}if(A==1){_=_.trim(),_.startsWith("[")&&_.endsWith("]")&&(_=_.substring(1,_.length-1));try{await qM(_),T++}catch{}T==0&&Pn.throwErr(Pn.ERR_INVALID_EZCONNECT_SYNTAX,"could not resolve hostname",_)}return N.length<2&&A>1&&(this.lb=!0),u.join("")}getAddrStr(e,t,n,o){let _=e.trim();return _.startsWith("[")&&_.endsWith("]")&&(_=_.substring(1,_.length-1)),`(ADDRESS=(PROTOCOL=${n})(HOST=${_})(PORT=${t})${o})`}buildDescriptionParams(){if(this.urlProps.size===0)return"";let e=new Array;return this.urlProps.forEach(function(t,n){WM.includes(n)&&e.push(`(${n}=${t})`)}),e.join("")}buildSecurityInfo(e){let t=new Array;if(e!=null&&e.toLowerCase()=="tcps"){let n=this.urlProps.get("SSL_SERVER_DN_MATCH")||"TRUE",o=this.urlProps.get("SSL_SERVER_CERT_DN"),_=this.urlProps.get("MY_WALLET_DIRECTORY");t.push(`(SSL_SERVER_DN_MATCH=${n})`),o!=null&&t.push(`(SSL_SERVER_CERT_DN=${o}})`),_!=null&&t.push(`(MY_WALLET_DIRECTORY=${_})`)}return t.length===0?"":`(SECURITY=${t.join("")})`}parseExtendedSettings(e){let t=Array.from(e.trim()),n=this.findExtendedSettingPosition(t);return n==-1?e:(this.parseExtendedProperties(t,n+1),e.substring(0,n))}parseExtendedProperties(e,t){let n=null,o=null,_=new Array(e.length),T=0,u="";for(let h=t;h<e.length;h++)if(e[h].trim()!="")switch(e[h]){case cR:u=this.parseQuotedString(h,e,T,_),T=u[1],h=u[0];break;case HM:n!=null&&Pn.throwErr(Pn.ERR_INVALID_EZCONNECT_SYNTAX,"unable to parse, invalid syntax",this.url),n=_.join("").substring(0,T).trim(),T=0;break;case KM:n==null&&Pn.throwErr(Pn.ERR_INVALID_EZCONNECT_SYNTAX,"unable to parse, invalid syntax",this.url),o=_.join("").substring(0,T).trim(),this.addParam(n,o),n=null,o=null,T=0;break;default:_[T++]=e[h]}n!=null&&(o=_.join("").substring(0,T).trim(),this.addParam(n,o))}parseQuotedString(e,t,n,o){let _=e+1;for(;_<t.length;){let T=t[_];if(T==cR)return[_,n];o[n++]=T,_++}}addParam(e,t){let n=e.toLowerCase(),o=this.URL_PROPS_ALIAS.get(n);o!=null?this.urlProps.set(o,t):this.connectionProps.set(o,t)}findExtendedSettingPosition(e){let t=0;for(let n=0;n<e.length;n++)if(e[n]=="(")t++;else if(e[n]==")")t--;else if(e[n]=="?"&&t==0)return n;return-1}initializeUrlAlias(){let e=new Map;return e.set("enable","ENABLE"),e.set("failover","FAILOVER"),e.set("load_balance","LOAD_BALANCE"),e.set("recv_buf_size","RECV_BUF_SIZE"),e.set("send_buf_size","SEND_BUF_SIZE"),e.set("sdu","SDU"),e.set("source_route","SOURCE_ROUTE"),e.set("retry_count","RETRY_COUNT"),e.set("retry_delay","RETRY_DELAY"),e.set("https_proxy","HTTPS_PROXY"),e.set("https_proxy_port","HTTPS_PROXY_PORT"),e.set("connect_timeout","CONNECT_TIMEOUT"),e.set("transport_connect_timeout","TRANSPORT_CONNECT_TIMEOUT"),e.set("recv_timeout","RECV_TIMEOUT"),e.set("ssl_server_cert_dn","SSL_SERVER_CERT_DN"),e.set("ssl_server_dn_match","SSL_SERVER_DN_MATCH"),e.set("wallet_location","MY_WALLET_DIRECTORY"),e.set("pool_connection_class","POOL_CONNECTION_CLASS"),e.set("pool_purity","POOL_PURITY"),e.set("service_tag","SERVICE_TAG"),e.set("connection_id_prefix","CONNECTION_ID_PREFIX"),e}};a(xE,"EZConnectResolver");var ME=xE;TR.exports=ME});var NR=U((lq,SR)=>{"use strict";var{createNVPair:$M,findValue:zM}=No(),f_=require("fs"),hR=require("process"),XM=require("readline"),Ci=Ee();function QM(s){let e=null,t=hR.env.TNS_ADMIN;if(s){if(e=s+"/tnsnames.ora",f_.existsSync(e))return e;Ci.throwErr(Ci.ERR_TNS_NAMES_FILE_MISSING,s)}else return t?(e=t,e+="/tnsnames.ora",f_.existsSync(e)||Ci.throwErr(Ci.ERR_TNS_NAMES_FILE_MISSING,t)):Ci.throwErr(Ci.ERR_NO_CONFIG_DIR),e}a(QM,"tnsnamesFilePath");var ER=0,bE=class bE{async initializeNlpa(e){let t=f_.statSync(e);if(!(t.mtime-ER))return this.ht;let n=XM.createInterface({input:f_.createReadStream(e),output:hR.stdout,terminal:!1});return this.ht=new Map,await a(async()=>{let _="";for await(let T of n)if(T.length!=0){if(T[0]=="#")continue;if(T[0]==" "||T[0]=="	"||T[0]==")"||T[0]=="("){if(T=T.replace(/\s+/g,""),T=this.checkNLPforComments(T),T.length==0)continue;_=_+T}else _.length==0?(T=this.checkNLPforComments(T),_=_+T):_.length!=0&&(this.addNLPListElement(_),_="",T=this.checkNLPforComments(T),_=_+T)}return _.length!=0&&(this.addNLPListElement(_),_=""),ER=t.mtime,this.ht},"start")()}checkNLPforComments(e){let t=new Array(e.length);for(let n=0;n<e.length;n++){let o=e[n];if(o=="#"){if(n!=0)break;return""}else t.push(o)}return t.join("")}addNLPListElement(e){let t=e.split(/\r?\n/).filter(n=>n);for(let n=0;n<t.length;n++){t[n].charAt(0)!="("&&(t[n]="("+t[n]+")");let o=$M(t[n]),T=o.name.toUpperCase();o.name=T;let u=T.split(",");for(let h=0;h<u.length;h++)this.ht.set(u[h],o)}}toString(){let e="";return this.ht.forEach(t=>{e=e+t.toString()+`
`}),e}findValueOf(e){let t=e.split("/");return zM(this.ht.get(t[0].toUpperCase()),t)}};a(bE,"NLParamParser");var VE=bE;SR.exports={NLParamParser:VE,tnsnamesFilePath:QM}});var GE=U((uq,dR)=>{"use strict";var un=bP(),JM=kP(),jM=HP(),de=Ii(),{createNode:ZM}=_R(),lt=Ee(),{findNVPairRecurse:ex,createNVPair:A_,findValue:Rn}=No(),{Buffer:fR}=require("buffer"),tx=uR(),{NLParamParser:rx,tnsnamesFilePath:nx}=NR(),sx=require("process");async function ix(s){let e=await AR(s.connectString,s.configDir),t;typeof e=="string"?t=A_(e):t=e;let n=Rn(t,["DESCRIPTION","CONNECT_DATA","SERVER"]),o=Rn(t,["DESCRIPTION","CONNECT_DATA","POOL_CONNECTION_CLASS"]),_=Rn(t,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"]),T=Rn(t,["DESCRIPTION","CONNECT_DATA","POOL_PURITY"]);return[n,o,_,T]}a(ix,"getConnectionInfo");var ox=new rx;async function AR(s,e){let t=s.trim(),n=t;if(t.indexOf(")")==-1||t.indexOf("(")!=0)try{n=await new tx(t).getResolvedUrl()}catch(o){try{let _=nx(e);n=(await ox.initializeNlpa(_)).get(t.toUpperCase()),n||lt.throwErr(lt.ERR_TNS_ENTRY_NOT_FOUND,t,e?e+"/tnsnames.ora":sx.env.TNS_ADMIN+"/tnsnames.ora"),n=n.getListElement(0)}catch(_){throw t.indexOf(":")!=-1||t.indexOf("/")!=-1?o:_}}return n}a(AR,"resolveConnectStr");async function vE(s,e){let t=await AR(s,e);return ZM(t)}a(vE,"resolveAddress");function FE(s,e,t,n,o){let _,T=new Promise((u,h)=>{e>2147483647&&(e=2147483647),_=setTimeout(()=>h(lt.getErr(lt.ERR_CONNECTION_TIMEDOUT,n.host,n.port,t,e/1e3,o)),e)});return Promise.race([s,T]).then(u=>(clearTimeout(_),u)).catch(u=>{throw clearTimeout(_),u})}a(FE,"timeout");var qE=class qE{constructor(){this.connected=!1,this.isBreak=!1,this.isReset=!1,this.breakPosted=!1}async getAddress(e,t){let n=await e.execute(t),o=this.sAtts?this.sAtts.uuid:null;this.sAtts=new jM(o),this.sAtts.setFrom(t),this.sAtts.setFrom(n.desc.params),await this.sAtts.prepare(n.protocol);let _=A_(n.CNdata.join("")),T=ex(_,"CONNECT_DATA"),u=`(CONNECTION_ID=${this.sAtts.connectionId})`,h=A_(u);return T.addListElement(h),this.cData=fR.from(_.toString(),"ascii"),this.cDataNVPair=_,n}async transportConnect(e){e.protocol.toUpperCase()=="TCP"&&e.httpsProxy&&lt.throwErr(lt.ERR_INVALID_CONNECT_STRING_PARAMETERS,"https proxy requires protocol as","tcps "),e.protocol&&(e.protocol.toUpperCase()=="TCP"||e.protocol.toUpperCase()=="TCPS")?this.ntAdapter=new JM(this.sAtts.nt):lt.throwErr(lt.ERR_INVALID_CONNECT_STRING_PARAMETERS,e.protocol+" protocol not supported"),await this.ntAdapter.connect(e),this.ntAdapter.startRead(),this.sAtts.ntCha=this.ntAdapter.cha,this.sndDatapkt=new un.DataPacket(this.sAtts.largeSDU),this.rcvDatapkt=new un.DataPacket(this.sAtts.largeSDU)}_sendConnect(e){this._sendPacket(e.buf),e.overflow&&(this._send(e.connectData,0,e.connectDataLen),this.flush())}async connect2(e){if(this.sAtts.sdu?this.sAtts.sdu>de.NSPABSSDULN?this.sAtts.sdu=de.NSPABSSDULN:this.sAtts.sdu<de.NSPMNSDULN&&(this.sAtts.sdu=de.NSPMNSDULN):this.sAtts.sdu=de.NSPDFSDULN,this.sAtts.transportConnectTimeout){let n=this.transportConnect(e);await FE(n,this.sAtts.transportConnectTimeout,"transportConnectTimeout",e,this.sAtts.connectionId)}else await this.transportConnect(e);let t=new un.ConnectPacket(this.cData,this.sAtts);for(this._sendConnect(t);;){let n=await this._recvPacket();if(n.type===de.NSPTAC)break;if(n.type===de.NSPTRF){this.refusePkt.overflow&&(await this._recvPacket(),this.refusePkt.dataBuf=this.rcvDatapkt.buf.subarray(this.rcvDatapkt.offset,this.rcvDatapkt.len).toString());let o=A_(this.refusePkt.dataBuf);this.refusePkt=null;let _=Rn(o,["DESCRIPTION","ERR"]);_=="12514"?lt.throwErr(lt.ERR_INVALID_SERVICE_NAME,this.getOption(de.SVCNAME),e.host,e.port,this.sAtts.connectionId):_=="12505"?lt.throwErr(lt.ERR_INVALID_SID,this.getOption(de.SID),e.host,e.port,this.sAtts.connectionId):_?lt.throwErr(lt.ERR_CONNECTION_REFUSED,e.host,e.port,this.sAtts.connectionId,"ORA-"+_):lt.throwErr(lt.ERR_CONNECTION_REFUSED,e.host,e.port,this.sAtts.connectionId,"refused")}else if(n.type===de.NSPTRS)(n.flags&de.NSPFSRN)==de.NSPFSRN&&(await this.ntAdapter.renegTLS(),this.ntAdapter.startRead()),this._sendConnect(t);else if(n.type===de.NSPTRD){let o,_,T,u;this.redirectPkt.overflow&&(await this._recvPacket(),this.redirectPkt.dataBuf=this.rcvDatapkt.buf.subarray(this.rcvDatapkt.offset,this.rcvDatapkt.len)),this.redirectPkt.flags&de.NSPFRDS?(o=this.redirectPkt.dataBuf.indexOf("\0",0,"ascii"),_=this.redirectPkt.dataBuf.toString("ascii",0,o),u=this.redirectPkt.dataBuf.subarray(o+1,this.redirectPkt.dataLen)):(_=this.redirectPkt.dataBuf.toString("ascii"),u=this.cData),T=await vE(_);let h=e.host;if(e=await T.execute(),e.desc&&this.sAtts.setFrom(e.desc.params),e.originHost=h,this.redirectPkt=null,this.ntAdapter.disconnect(de.NSFIMM),this.sAtts.transportConnectTimeout){let A=this.transportConnect(e);await FE(A,this.sAtts.transportConnectTimeout,"transportConnectTimeout",e,this.sAtts.connectionId)}else await this.transportConnect(e);t=new un.ConnectPacket(u,this.sAtts,de.NSPFRDR),this.sndDatapkt=new un.DataPacket(this.sAtts.largeSDU),this._sendConnect(t)}}return this.connected=!0,this.cData=null,this.sndDatapkt=new un.DataPacket(this.sAtts.largeSDU),this.sndDatapkt.createPacket(de.NSPDADAT),this.sndDatapkt.offset=this.sndDatapkt.dataPtr,this.sndDatapkt.len=this.sndDatapkt.bufLen,this.markerPkt=new un.MarkerPacket(this.sAtts.largeSDU),this.controlPkt=new un.ControlPacket,this.ntAdapter.largeSDU=this.sAtts.largeSDU,this.sAtts.nt.wallet=null,this.sAtts.nt.walletPassword=null,!0}async connect1(e,t,n){let o,_;do try{if(this.sAtts.connectTimeout){let T=this.connect2(e);o=await FE(T,this.sAtts.connectTimeout,"connectTimeout",e,this.sAtts.connectionId)}else o=await this.connect2(e)}catch(T){T.message.startsWith("NJS-510")&&(this.ntAdapter.connected=!0),this.ntAdapter&&(this.ntAdapter.disconnect(de.NSFIMM),this.ntAdapter=null),o=!1,_=T;try{e=await this.getAddress(t,n)}catch{break}}while(!o);if(!o)throw _}_processPacket(e){switch(e.type){case de.NSPTDA:this.rcvDatapkt.fromPacket(e);break;case de.NSPTMK:this.markerPkt.fromPacket(e,this);break;case de.NSPTCNL:this.controlPkt.fromPacket(e);break;case de.NSPTAC:un.AcceptPacket(e,this.sAtts);break;case de.NSPTRF:this.refusePkt=new un.RefusePacket(e);break;case de.NSPTRS:break;case de.NSPTRD:this.redirectPkt=new un.RedirectPacket(e);break;default:lt.throwErr(lt.ERR_CONNECTION_INVALID_PACKET)}}async _recvPacket(){for(;;){let e=await this.ntAdapter.receive();if(!e)break;if(this._processPacket(e),e.type!==de.NSPTCNL)return e}}_sendPacket(e){this.ntAdapter.send(e)}sendBreak(){if(!this.isBreak){if(!this.connected){this.isBreak=!0,this.breakPosted=!0;return}this.isBreak=!0,this.markerPkt.prepare(de.NSPMKTD1,de.NIQIMARK),this._sendPacket(this.markerPkt.buf)}}async reset(){for(this.breakPosted&&(this.markerPkt.prepare(de.NSPMKTD1,de.NIQBMARK),this._sendPacket(this.markerPkt.buf),this.breakPosted=!1),this.markerPkt.prepare(de.NSPMKTD1,de.NIQRMARK),this._sendPacket(this.markerPkt.buf);!this.isReset;)await this._recvPacket();this.sndDatapkt.dataPtr=this.sndDatapkt.dataLen=de.NSPDADAT,this.sndDatapkt.offset=this.sndDatapkt.dataPtr,this.sndDatapkt.len=this.sndDatapkt.bufLen,this.isBreak=this.isReset=!1}async recvPacket(){return await this._recvPacket()}syncRecvPacket(){for(;this.ntAdapter.packets.length>0;){let e=this.ntAdapter.syncReceive();if(!e)break;if(this._processPacket(e),e.type!==de.NSPTCNL)return e}}_send(e,t,n){if(this.isBreak)return;let o=0;for(this.sndDatapkt.dataLen=this.sndDatapkt.offset,(this.sndDatapkt.dataLen<this.sndDatapkt.bufLen||!this.sndDatapkt.bufLen)&&(o=this.sndDatapkt.fillBuf(e,t,n),n-=o,t+=o,this.sndDatapkt.offset=this.sndDatapkt.dataLen);n;){if(this._sendPacket(this.sndDatapkt.dataBuf),this.isBreak)return;this.sndDatapkt.dataLen=this.sndDatapkt.dataPtr,this.sndDatapkt.offset=this.sndDatapkt.dataPtr,o=this.sndDatapkt.fillBuf(e,t,n),n-=o,t+=o,this.sndDatapkt.offset=this.sndDatapkt.dataLen}}flush(){this.isBreak||(this.sndDatapkt.dataLen=this.sndDatapkt.offset,this.sndDatapkt.prepare2Send(),this._sendPacket(fR.from(this.sndDatapkt.dataBuf)),this.sndDatapkt.dataLen=this.sndDatapkt.dataPtr,this.sndDatapkt.offset=this.sndDatapkt.dataPtr)}async connect(e){let t=e.connectString?e.connectString:e.connectionString,n=await vE(t,e.configDir),o;try{o=await this.getAddress(n,e)}catch(_){_.message=="All options tried"?lt.throwErr(lt.ERR_INVALID_CONNECT_STRING_PARAMETERS,"Ensure the ADDRESS parameters have been entered correctly, the most likely incorrect parameter is the host name"):lt.throwErr(lt.ERR_INVALID_CONNECT_STRING_PARAMETERS,_.message)}await this.connect1(o,n,e)}disconnect(e){this.connected&&(e!=de.NSFIMM&&!this.ntAdapter.err&&(this.sndDatapkt.dataLen=this.sndDatapkt.offset,this.sndDatapkt.prepare2Send(de.NSPDAFEOF),this._sendPacket(this.sndDatapkt.dataBuf)),this.ntAdapter.disconnect(e),this.ntAdapter=null,this.connected=!1)}getOption(e){switch(e){case de.NS_MOREDATA:return this.ntAdapter.packets.length>0;case de.SVCNAME:return Rn(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"]);case de.SID:return Rn(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SID"]);case de.SERVERTYPE:return Rn(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVER"]);case de.REMOTEADDR:return this.ntAdapter?this.ntAdapter.getOption(e):null;case de.CONNCLASS:return Rn(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","POOL_CONNECTION_CLASS"]);case de.PURITY:return Rn(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","POOL_PURITY"]);case de.HEALTHCHECK:return this.connected&&this.ntAdapter.connected&&!this.ntAdapter.err;default:lt.throwErr(lt.ERR_INTERNAL,"getOption not supported for opcode "+e)}}recvInbandNotif(){let e=0;if(this.controlPkt.errno)return e=this.controlPkt.errno,e;if(this.getOption(de.HEALTHCHECK))if(this.getOption(de.NS_MOREDATA)){let t=this.ntAdapter.syncReceive();return t.type==de.NSPTCNL?(this.controlPkt.fromPacket(t),e=this.controlPkt.errno,e):(this.ntAdapter.packets.unshift(t),0)}else return 0;else return lt.ERR_CONNECTION_CLOSED}};a(qE,"NetworkSession");var kE=qE;dR.exports={NetworkSession:kE,resolveAddress:vE,getConnectionInfo:ix}});var pR=U((hq,KE)=>{"use strict";var{Buffer:ax}=require("buffer"),Zt=ir(),_x=Di(),cx=new RegExp('(?<=:)\\s*((?:".*?")|(?:[\\p{L}][\\p{L}\\p{Nd}_\\$#]*)|\\p{Nd}+)',"gu"),lx=/(?<=\bRETURN(?:ING)?\b)/si,Tx=/(?<=\bINTO\b)/gsi,ux=/--.*/g,Ex=/\/\*.*?\*\//sg,hx=/'.*?'/sg,WE=class WE{constructor(e,t=!1){this.bindName=e,this.isReturnBind=t,this.maxSize=0,this.numElements=0,this.maxArraySize=0,this.type=null,this.isArray=!1,this.dir=Zt.BIND_IN,this.bindVar=null}};a(WE,"BindInfo");var Po=WE;KE.exports.BindInfo=Po;var d_=class d_{constructor(){this.sql="",this.sqlBytes=[],this.sqlLength=0,this.cursorId=0,this.requiresDefine=!1,this.isQuery=!1,this.isPlSql=!1,this.isDml=!1,this.isDdl=!1,this.isReturning=!1,this.bindInfoList=[],this.queryVars=[],this.bindInfoDict=new Map,this.requiresFullExecute=!1,this.noPrefetch=!1,this.returnToCache=!1,this.numColumns=0,this.lastRowIndex,this.lastRowid,this.moreRowsToFetch=!0,this.inUse=!1,this.bufferRowIndex=0,this.bufferRowCount=0,this.statementType=Zt.STMT_TYPE_UNKNOWN}_copy(){let e=new d_;e.sql=this.sql,e.sqlBytes=this.sqlBytes,e.sqlLength=this.sqlLength,e.isQuery=this.isQuery,e.isPlSql=this.isPlSql,e.isDml=this.isDml,e.isDdl=this.isDdl,e.isReturning=this.isReturning,e.bindInfoList=[];for(let n of this.bindInfoList){let o=new Po(n.bindName,n.isReturnBind);e.bindInfoList.push(o)}let t=e.bindInfoDict=new Map;for(let n of e.bindInfoList)t.has(n.bindName)?t.get(n.bindName).push(n):t.set(n.bindName,[n]);return e.returnToCache=!1,e}_determineStatementType(e){e=_x.cleanSql(e);let t=e.trim().trimStart("(").substring(0,10).split(" ");if(t.length>0){let n=t[0].toUpperCase();["DECLARE","BEGIN","CALL"].includes(n)?(this.isPlSql=!0,n==="DECLARE"?this.statementType=Zt.STMT_TYPE_DECLARE:n==="BEGIN"?this.statementType=Zt.STMT_TYPE_BEGIN:n==="CALL"&&(this.statementType=Zt.STMT_TYPE_CALL)):["SELECT","WITH"].includes(n)?(this.isQuery=!0,n==="SELECT"&&(this.statementType=Zt.STMT_TYPE_SELECT)):["INSERT","UPDATE","DELETE","MERGE"].includes(n)?(this.isDml=!0,n==="INSERT"?this.statementType=Zt.STMT_TYPE_INSERT:n==="UPDATE"?this.statementType=Zt.STMT_TYPE_UPDATE:n==="DELETE"?this.statementType=Zt.STMT_TYPE_DELETE:n==="MERGE"&&(this.statementType=Zt.STMT_TYPE_MERGE)):["CREATE","ALTER","DROP","TRUNCATE"].includes(n)?(this.isDdl=!0,n==="CREATE"?this.statementType=Zt.STMT_TYPE_CREATE:n==="ALTER"?this.statementType=Zt.STMT_TYPE_ALTER:n==="DROP"&&(this.statementType=Zt.STMT_TYPE_DROP)):n==="COMMIT"?this.statementType=Zt.STMT_TYPE_COMMIT:n==="ROLLBACK"?this.statementType=Zt.STMT_TYPE_ROLLBACK:n==="MERGE"?this.statementType=Zt.STMT_TYPE_MERGE:this.statementType=Zt.STMT_TYPE_UNKNOWN}}_prepare(e){this.sql=e,this.sqlBytes=ax.from(this.sql,"utf8"),this.sqlLength=this.sqlBytes.length,e=e.replace(hx,"'S'"),e=e.replace(ux,""),e=e.replace(Ex,""),this._determineStatementType(e);let t;if(this.isQuery||this.isDml||this.isPlSql){let n=e;if(this.isDml){let o,_=-1,T=e.search(lx),u=Tx;for(;(o=u.exec(e.slice(T)))!=null;)_=o.index,u.lastIndex=o.index+1;T>-1&&_>-1&&(_=T+_,n=e.slice(0,_),t=e.slice(_))}this._addBinds(n,!1),t&&(this.isReturning=!0,this._addBinds(t,!0))}}_addBinds(e,t){let n=[...e.matchAll(cx)],o;n.forEach(_=>{if(_[0].startsWith('"')&&_[0].endsWith('"')?o=_[0].substring(1,_[0].length-1):o=_[0].trim().toUpperCase(),this.isPlSql&&this.bindInfoDict.has(o))return;let T=new Po(o,t);this.bindInfoList.push(T),this.bindInfoDict.has(T.bindName)?this.bindInfoDict.get(T.bindName).push(T):this.bindInfoDict.set(T.bindName,[T])})}_setVariable(e,t){(t.maxSize!==e.maxSize||t.dir!==e.dir||t.isArray!==e.isArray||t.values.length>e.numElements||t.type!=e.type||t.maxArraySize!=e.maxArraySize)&&(e.isArray=t.isArray,e.numElements=t.values.length,e.maxSize=t.maxSize,e.type=t.type,e.dir=t.dir,e.maxArraySize=t.maxArraySize,this.requiresFullExecute=!0),e.bindVar=t}};a(d_,"Statement");var HE=d_;KE.exports.Statement=HE});var PR=U((Nq,mR)=>{"use strict";var{Buffer:Xe}=require("buffer"),En=require("crypto"),p_="aes-256-cbc",Sx=Xe.from([0,1]),zE=class zE{_decrypt(e,t){let n=Xe.alloc(16,0),o=En.createDecipheriv(p_,e,n);o.setAutoPadding(!1);let _=o.update(t);return _=Xe.concat([_,o.final()]),_}_encrypt(e,t,n){let o=16,_=Xe.alloc(o,0),T=o-t.length%o,u=Xe.alloc(T,T);T>0&&(n?t+=Xe.alloc(T):t=Xe.concat([t,u]));let h=En.createCipheriv(p_,e,_),A=h.update(t);return A=Xe.concat([A,h.final()]),n||(A=A.slice(0,t.length)),t.fill(0),A}_setEncryptedPasswordBuffers(e,t,n,o){let _=Xe.alloc(16);En.randomFillSync(_,0,16);let T=Xe.concat([_,e]);if(o.encodedPassword=this._encrypt(n,T),T.fill(0),o.encodedPassword=o.encodedPassword.slice().toString("hex").toUpperCase(),t){let u=Xe.concat([_,t]);o.encodedNewPassword=this._encrypt(n,u),u.fill(0),o.encodedNewPassword=o.encodedNewPassword.slice().toString("hex").toUpperCase()}e.fill(0),t&&t.fill(0)}updateVerifierData(e,t,n,o,_){let T=32,u="sha512",h=Xe.from(e.AUTH_VFR_DATA,"hex"),A=Xe.from(e.AUTH_SESSKEY,"hex"),N=Number(e.AUTH_PBKDF2_VGEN_COUNT),P=Xe.from(t,"utf8"),R,g;if(o){p_="aes-192-cbc",T=24,u="sha1";let L=En.createHash(u);L.update(P),L.update(h);let v=L.digest();R=Xe.alloc(v.length+4),v.copy(R,0,0,v.length)}else{p_="aes-256-cbc";let L=Xe.from("AUTH_PBKDF2_SPEEDY_KEY","utf8"),v=Xe.concat([h,L]);g=En.pbkdf2Sync(P,v,N,64,"sha512");let H=En.createHash(u);H.update(g),H.update(h),R=H.digest().slice(0,T)}let p;n&&(p=Xe.from(n,"utf8"));let m=this._decrypt(R,A),y=Xe.alloc(m.length);En.randomFillSync(y);let I=this._encrypt(R,y);if(m.length===48){_.sessionKey=I.slice().toString("hex").toUpperCase().slice(0,96);let L=Xe.alloc(24);for(let te=16;te<=40;te++)L[te-16]=m[te]^y[te];let v=En.createHash("md5").update(L.subarray(0,16)).digest(),H=En.createHash("md5").update(L.subarray(16)).digest();_.comboKey=Xe.concat([v,H]).slice(0,T)}else{_.sessionKey=I.slice().toString("hex").toUpperCase().slice(0,64);let L=Xe.from(e.AUTH_PBKDF2_CSK_SALT,"hex");N=Number(e.AUTH_PBKDF2_SDER_COUNT);let H=Xe.concat([y.slice(0,T),m.slice(0,T)]).toString("hex").toUpperCase(),te=Xe.from(H,"utf8");_.comboKey=En.pbkdf2Sync(te,L,N,T,"sha512")}let M=Xe.alloc(16);if(!o){En.randomFillSync(M,0,16);let L=Xe.concat([M,g]);_.speedyKey=this._encrypt(_.comboKey,L),_.speedyKey=_.speedyKey.slice(0,80).toString("hex").toUpperCase()}this._setEncryptedPasswordBuffers(P,p,_.comboKey,_)}getEncryptedJSWPData(e,t){let n=this._encrypt(e,t,!0);return n=n.slice().toString("hex").toUpperCase(),n=Xe.concat([n,Sx]),n}updatePasswordsWithComboKey(e,t,n,o){let _=Xe.from(e,"utf8"),T;t&&(T=Xe.from(t,"utf8")),this._setEncryptedPasswordBuffers(_,T,n,o)}};a(zE,"EncryptDecrypt");var $E=zE,Nx=new $E;mR.exports=Nx});var CR=U((Aq,gR)=>{"use strict";var{Buffer:XE}=require("buffer"),Fe=At(),RR=Ee(),IR=require("process"),QE=PR(),fx=Tn(),DR=Di(),m_=DR.CLIENT_INFO,Ax=require("crypto"),jE=class jE extends fx{constructor(e,t){super(e),this.functionCode=Fe.TNS_FUNC_AUTH_PHASE_ONE,this.messageType=Fe.TNS_MSG_TYPE_FUNCTION,this.sessionData={},this.conn=e,this.sessionKey="",this.encodedPassword="",this.changePassword=!1,Object.defineProperty(this,"password",{enumerable:!1,value:t.password}),this.username=t.user,this.username===void 0?this.username="":this.username=this.username.trim(),this.schemaUser="",this.proxyUser="",this.proxyStatus=-1,this.username.length!==0&&(this.proxyStatusObj=DR.checkProxyUserValidity(this.username),this.proxyStatusObj.status===0&&(this.proxyStatus=0,this.proxyUser=this.proxyStatusObj.proxyUser,this.schemaUser=this.proxyStatusObj.schemaUser,this.username=this.proxyUser)),this.newPassword=t.newPassword,t.changePassword&&(this.changePassword=!0,this.functionCode=Fe.TNS_FUNC_AUTH_PHASE_TWO),this.username?this.userByteLen=XE.byteLength(this.username):this.userByteLen=0,this.token=t.token,this.token&&(this.functionCode=Fe.TNS_FUNC_AUTH_PHASE_TWO),this.privateKey=t.privateKey,this.privateKey&&(this.privateKey=`-----BEGIN PRIVATE KEY-----
`+this.privateKey,this.privateKey=this.privateKey+`
-----END PRIVATE KEY-----`),this.serviceName=this.conn.serviceName,this.remoteAddress=this.conn.remoteAddress,this.setAuthMode()}setAuthMode(){this.newPassword||(this.authMode=Fe.TNS_AUTH_MODE_LOGON),this.conn.privilege&Fe.SYSDBA&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSDBA),this.conn.privilege&Fe.SYSOPER&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSOPER),this.conn.privilege&Fe.SYSASM&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSASM),this.conn.privilege&Fe.SYSBKP&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSBKP),this.conn.privilege&Fe.SYSDG&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSDGD),this.conn.privilege&Fe.SYSKM&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSKMT),this.conn.privilege&Fe.SYSRAC&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSRAC),this.privateKey&&(this.authMode|=Fe.TNS_AUTH_MODE_IAM_TOKEN),this.newPassword&&(this.authMode|=Fe.TNS_AUTH_MODE_CHANGE_PASSWORD),this.token||(this.authMode|=Fe.TNS_AUTH_MODE_WITH_PASSWORD)}getAlterTimezoneStatement(){let e,t;if(IR.env.ORA_SDTZ)t=IR.env.ORA_SDTZ;else{let o=new Date().getTimezoneOffset(),_=Math.trunc(o/60),T=Math.abs((o-_*60)%60);_<0?(e="+",_=-_):e="-",_=_.toLocaleString("en-US",{minimumIntegerDigits:2}),t=`${e}${_}:${T}`}return`ALTER SESSION SET TIME_ZONE ='${t}'\0`}encode(e){let t=!1;if(this.writeFunctionHeader(e),this.userByteLen>0?e.writeUInt8(1):e.writeUInt8(0),e.writeUB4(this.userByteLen),e.writeUB4(this.authMode),this.functionCode===Fe.TNS_FUNC_AUTH_PHASE_ONE)e.writeUInt8(1),e.writeUB4(5),e.writeUInt8(0),e.writeUInt8(1),this.userByteLen>0&&e.writeBytesWithLength(XE.from(this.username)),e.writeKeyValue("AUTH_TERMINAL","unknown"),e.writeKeyValue("AUTH_PROGRAM_NM",m_.program),e.writeKeyValue("AUTH_MACHINE",m_.hostName),e.writeKeyValue("AUTH_PID",m_.pid),e.writeKeyValue("AUTH_SID",m_.userName);else{let n=0;if(this.changePassword?(QE.updatePasswordsWithComboKey(this.password,this.newPassword,this.conn.comboKey,this),n=2):(n=4,this.token?n+=1:(n+=2,this.verifierType===Fe.TNS_VERIFIER_TYPE_11G_1||this.verifierType===Fe.TNS_VERIFIER_TYPE_11G_2?t=!0:this.verifierType!==Fe.TNS_VERIFIER_TYPE_12C?RR.throwErr(RR.ERR_UNSUPPORTED_VERIFIER_TYPE,this.verifierType.toString(16)):n+=1,QE.updateVerifierData(this.sessionData,this.password,this.newPassword,t,this),this.conn.comboKey=this.comboKey,this.newPassword&&(n+=1)),this.privateKey&&(n+=2),this.conn.connClass&&(n+=1),this.conn.purity&&(n+=1),this.conn.jdwpData&&(this.encryptedJDWPData=QE.getEncryptedJSWPData(this.sessionKey,this.conn.jdwpData),n+=1),this.schemaUser.length!==0&&(n+=1)),e.writeUInt8(1),e.writeUB4(n),e.writeUInt8(1),e.writeUInt8(1),this.userByteLen>0&&e.writeBytesWithLength(XE.from(this.username)),this.token?e.writeKeyValue("AUTH_TOKEN",this.token):this.changePassword||(e.writeKeyValue("AUTH_SESSKEY",this.sessionKey,1),t||e.writeKeyValue("AUTH_PBKDF2_SPEEDY_KEY",this.speedyKey)),this.changePassword||(e.writeKeyValue("SESSION_CLIENT_CHARSET","873"),e.writeKeyValue("SESSION_CLIENT_DRIVER_NAME",Fe.DRIVER_NAME),e.writeKeyValue("SESSION_CLIENT_VERSION",Fe.CLIENT_VERSION.toString()),e.writeKeyValue("AUTH_ALTER_SESSION",this.getAlterTimezoneStatement(),1)),this.encodedPassword&&e.writeKeyValue("AUTH_PASSWORD",this.encodedPassword),this.proxyStatus===0&&e.writeKeyValue("PROXY_CLIENT_NAME",this.schemaUser),this.encodedNewPassword&&e.writeKeyValue("AUTH_NEWPASSWORD",this.encodedNewPassword),this.conn.connClass&&e.writeKeyValue("AUTH_KPPL_CONN_CLASS",this.conn.connClass),this.conn.purity&&e.writeKeyValue("AUTH_KPPL_PURITY",""+this.conn.purity),this.privateKey){let T="date: "+new Date().toGMTString()+`
(request-target): `+this.serviceName+`
host: `+this.remoteAddress,u=Ax.createSign("RSA-SHA256").update(T).sign(this.privateKey,"base64");e.writeKeyValue("AUTH_HEADER",T),e.writeKeyValue("AUTH_SIGNATURE",u)}this.conn.jdwpData&&e.writeKeyValue("AUTH_ORA_DEBUG_JDWP",this.encryptedJDWPData)}}processReturnParameter(e){let t=e.readUB2();for(let n=0;n<t;n++){e.skipUB4();let o=e.readStr(Fe.CSFRM_IMPLICIT),_="";e.readUB4()>0&&(_=e.readStr(Fe.CSFRM_IMPLICIT));let u=e.readUB4();o==="AUTH_VFR_DATA"&&(this.verifierType=u),this.sessionData[o]=_}if(this.functionCode===Fe.TNS_FUNC_AUTH_PHASE_ONE)this.functionCode=Fe.TNS_FUNC_AUTH_PHASE_TWO;else{let n,o,_,T,u;this.conn.sessionID=this.sessionData.AUTH_SESSION_ID,this.conn.serialNum=this.sessionData.AUTH_SERIAL_NUM;let h=Number(this.sessionData.AUTH_VERSION_NO);n=h>>24&255,e.caps.ttcFieldVersion>=Fe.TNS_CCAP_FIELD_VERSION_18_1_EXT_1?(o=h>>16&255,_=h>>12&15,T=h>>4&255,u=h&15):(o=h>>20&15,_=h>>12&255,T=h>>8&15,u=h&255),this.conn.serverVersionString=n+"."+o+"."+_+"."+T+"."+u,this.conn.serverVersion=n*1e8+o*1e6+_*1e4+T*100+u*1}}};a(jE,"AuthMessage");var JE=jE;gR.exports=JE});var yR=U((pq,OR)=>{"use strict";var dx=Tn(),px=At(),eh=class eh extends dx{constructor(e){super(e),this.functionCode=px.TNS_FUNC_COMMIT}encode(e){this.writeFunctionHeader(e)}};a(eh,"CommitMessage");var ZE=eh;OR.exports=ZE});var wR=U((Pq,LR)=>{"use strict";var c=At(),mx=Tn(),rh=class rh extends mx{processMessage(e){for(;e.readUInt16BE()!==0;)e.readUInt16BE()!==0&&e.skipBytes(4)}encode(e){e.writeUInt8(c.TNS_MSG_TYPE_DATA_TYPES),e.writeUInt16LE(c.TNS_CHARSET_UTF8),e.writeUInt16LE(c.TNS_CHARSET_UTF8),e.writeUInt8(c.TNS_ENCODING_MULTI_BYTE|c.TNS_ENCODING_CONV_LENGTH),e.writeBytesWithLength(e.caps.compileCaps),e.writeBytesWithLength(e.caps.runtimeCaps);for(let t of Px)e.writeUInt16BE(t[0]),e.writeUInt16BE(t[1]),e.writeUInt16BE(t[2]),e.writeUInt16BE(0);e.writeUInt16BE(0)}};a(rh,"DataTypeMessage");var th=rh,Px=[[c.TNS_DATA_TYPE_VARCHAR,c.TNS_DATA_TYPE_VARCHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_NUMBER,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_LONG,c.TNS_DATA_TYPE_LONG,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DATE,c.TNS_DATA_TYPE_DATE,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_RAW,c.TNS_DATA_TYPE_RAW,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_LONG_RAW,c.TNS_DATA_TYPE_LONG_RAW,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UB2,c.TNS_DATA_TYPE_UB2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UB4,c.TNS_DATA_TYPE_UB4,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SB1,c.TNS_DATA_TYPE_SB1,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SB2,c.TNS_DATA_TYPE_SB2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SB4,c.TNS_DATA_TYPE_SB4,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SWORD,c.TNS_DATA_TYPE_SWORD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UWORD,c.TNS_DATA_TYPE_UWORD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PTRB,c.TNS_DATA_TYPE_PTRB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PTRW,c.TNS_DATA_TYPE_PTRW,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TIDDEF,c.TNS_DATA_TYPE_TIDDEF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ROWID,c.TNS_DATA_TYPE_ROWID,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AMS,c.TNS_DATA_TYPE_AMS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BRN,c.TNS_DATA_TYPE_BRN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CWD,c.TNS_DATA_TYPE_CWD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_NEW_OAC,c.TNS_DATA_TYPE_NEW_OAC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OER8,c.TNS_DATA_TYPE_OER8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FUN,c.TNS_DATA_TYPE_FUN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AUA,c.TNS_DATA_TYPE_AUA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RXH7,c.TNS_DATA_TYPE_RXH7,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_NA6,c.TNS_DATA_TYPE_NA6,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BRP,c.TNS_DATA_TYPE_BRP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BRV,c.TNS_DATA_TYPE_BRV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KVA,c.TNS_DATA_TYPE_KVA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CLS,c.TNS_DATA_TYPE_CLS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CUI,c.TNS_DATA_TYPE_CUI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DFN,c.TNS_DATA_TYPE_DFN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DQR,c.TNS_DATA_TYPE_DQR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSC,c.TNS_DATA_TYPE_DSC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_EXE,c.TNS_DATA_TYPE_EXE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FCH,c.TNS_DATA_TYPE_FCH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_GBV,c.TNS_DATA_TYPE_GBV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_GEM,c.TNS_DATA_TYPE_GEM,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_GIV,c.TNS_DATA_TYPE_GIV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OKG,c.TNS_DATA_TYPE_OKG,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_HMI,c.TNS_DATA_TYPE_HMI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_INO,c.TNS_DATA_TYPE_INO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_LNF,c.TNS_DATA_TYPE_LNF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ONT,c.TNS_DATA_TYPE_ONT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OPE,c.TNS_DATA_TYPE_OPE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OSQ,c.TNS_DATA_TYPE_OSQ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SFE,c.TNS_DATA_TYPE_SFE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SPF,c.TNS_DATA_TYPE_SPF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_VSN,c.TNS_DATA_TYPE_VSN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UD7,c.TNS_DATA_TYPE_UD7,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSA,c.TNS_DATA_TYPE_DSA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PIN,c.TNS_DATA_TYPE_PIN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PFN,c.TNS_DATA_TYPE_PFN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PPT,c.TNS_DATA_TYPE_PPT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_STO,c.TNS_DATA_TYPE_STO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ARC,c.TNS_DATA_TYPE_ARC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_MRS,c.TNS_DATA_TYPE_MRS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_MRT,c.TNS_DATA_TYPE_MRT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_MRG,c.TNS_DATA_TYPE_MRG,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_MRR,c.TNS_DATA_TYPE_MRR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_MRC,c.TNS_DATA_TYPE_MRC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_VER,c.TNS_DATA_TYPE_VER,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_LON2,c.TNS_DATA_TYPE_LON2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_INO2,c.TNS_DATA_TYPE_INO2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ALL,c.TNS_DATA_TYPE_ALL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UDB,c.TNS_DATA_TYPE_UDB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQI,c.TNS_DATA_TYPE_AQI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ULB,c.TNS_DATA_TYPE_ULB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ULD,c.TNS_DATA_TYPE_ULD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SID,c.TNS_DATA_TYPE_SID,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_NA7,c.TNS_DATA_TYPE_NA7,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AL7,c.TNS_DATA_TYPE_AL7,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_K2RPC,c.TNS_DATA_TYPE_K2RPC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XDP,c.TNS_DATA_TYPE_XDP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OKO8,c.TNS_DATA_TYPE_OKO8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UD12,c.TNS_DATA_TYPE_UD12,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AL8,c.TNS_DATA_TYPE_AL8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_LFOP,c.TNS_DATA_TYPE_LFOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FCRT,c.TNS_DATA_TYPE_FCRT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DNY,c.TNS_DATA_TYPE_DNY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OPR,c.TNS_DATA_TYPE_OPR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PLS,c.TNS_DATA_TYPE_PLS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XID,c.TNS_DATA_TYPE_XID,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TXN,c.TNS_DATA_TYPE_TXN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DCB,c.TNS_DATA_TYPE_DCB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CCA,c.TNS_DATA_TYPE_CCA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_WRN,c.TNS_DATA_TYPE_WRN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TLH,c.TNS_DATA_TYPE_TLH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TOH,c.TNS_DATA_TYPE_TOH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FOI,c.TNS_DATA_TYPE_FOI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SID2,c.TNS_DATA_TYPE_SID2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TCH,c.TNS_DATA_TYPE_TCH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PII,c.TNS_DATA_TYPE_PII,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PFI,c.TNS_DATA_TYPE_PFI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PPU,c.TNS_DATA_TYPE_PPU,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PTE,c.TNS_DATA_TYPE_PTE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RXH8,c.TNS_DATA_TYPE_RXH8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_N12,c.TNS_DATA_TYPE_N12,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AUTH,c.TNS_DATA_TYPE_AUTH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KVAL,c.TNS_DATA_TYPE_KVAL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FGI,c.TNS_DATA_TYPE_FGI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSY,c.TNS_DATA_TYPE_DSY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYR8,c.TNS_DATA_TYPE_DSYR8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYH8,c.TNS_DATA_TYPE_DSYH8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYL,c.TNS_DATA_TYPE_DSYL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYT8,c.TNS_DATA_TYPE_DSYT8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYV8,c.TNS_DATA_TYPE_DSYV8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYP,c.TNS_DATA_TYPE_DSYP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYF,c.TNS_DATA_TYPE_DSYF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYK,c.TNS_DATA_TYPE_DSYK,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYY,c.TNS_DATA_TYPE_DSYY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYQ,c.TNS_DATA_TYPE_DSYQ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYC,c.TNS_DATA_TYPE_DSYC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYA,c.TNS_DATA_TYPE_DSYA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OT8,c.TNS_DATA_TYPE_OT8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYTY,c.TNS_DATA_TYPE_DSYTY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQE,c.TNS_DATA_TYPE_AQE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KV,c.TNS_DATA_TYPE_KV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQD,c.TNS_DATA_TYPE_AQD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQ8,c.TNS_DATA_TYPE_AQ8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RFS,c.TNS_DATA_TYPE_RFS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RXH10,c.TNS_DATA_TYPE_RXH10,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPN,c.TNS_DATA_TYPE_KPN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNR,c.TNS_DATA_TYPE_KPDNR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYD,c.TNS_DATA_TYPE_DSYD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYS,c.TNS_DATA_TYPE_DSYS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYR,c.TNS_DATA_TYPE_DSYR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYH,c.TNS_DATA_TYPE_DSYH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYT,c.TNS_DATA_TYPE_DSYT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYV,c.TNS_DATA_TYPE_DSYV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQM,c.TNS_DATA_TYPE_AQM,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OER11,c.TNS_DATA_TYPE_OER11,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQL,c.TNS_DATA_TYPE_AQL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OTC,c.TNS_DATA_TYPE_OTC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KFNO,c.TNS_DATA_TYPE_KFNO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KFNP,c.TNS_DATA_TYPE_KFNP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KGT8,c.TNS_DATA_TYPE_KGT8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RASB4,c.TNS_DATA_TYPE_RASB4,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RAUB2,c.TNS_DATA_TYPE_RAUB2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RAUB1,c.TNS_DATA_TYPE_RAUB1,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RATXT,c.TNS_DATA_TYPE_RATXT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RSSB4,c.TNS_DATA_TYPE_RSSB4,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RSUB2,c.TNS_DATA_TYPE_RSUB2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RSUB1,c.TNS_DATA_TYPE_RSUB1,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RSTXT,c.TNS_DATA_TYPE_RSTXT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RIDL,c.TNS_DATA_TYPE_RIDL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_GLRDD,c.TNS_DATA_TYPE_GLRDD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_GLRDG,c.TNS_DATA_TYPE_GLRDG,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_GLRDC,c.TNS_DATA_TYPE_GLRDC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OKO,c.TNS_DATA_TYPE_OKO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DPP,c.TNS_DATA_TYPE_DPP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DPLS,c.TNS_DATA_TYPE_DPLS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DPMOP,c.TNS_DATA_TYPE_DPMOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_STAT,c.TNS_DATA_TYPE_STAT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RFX,c.TNS_DATA_TYPE_RFX,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FAL,c.TNS_DATA_TYPE_FAL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CKV,c.TNS_DATA_TYPE_CKV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DRCX,c.TNS_DATA_TYPE_DRCX,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KGH,c.TNS_DATA_TYPE_KGH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQO,c.TNS_DATA_TYPE_AQO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OKGT,c.TNS_DATA_TYPE_OKGT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPFC,c.TNS_DATA_TYPE_KPFC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FE2,c.TNS_DATA_TYPE_FE2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SPFP,c.TNS_DATA_TYPE_SPFP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DPULS,c.TNS_DATA_TYPE_DPULS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQA,c.TNS_DATA_TYPE_AQA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPBF,c.TNS_DATA_TYPE_KPBF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TSM,c.TNS_DATA_TYPE_TSM,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_MSS,c.TNS_DATA_TYPE_MSS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPC,c.TNS_DATA_TYPE_KPC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CRS,c.TNS_DATA_TYPE_CRS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KKS,c.TNS_DATA_TYPE_KKS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KSP,c.TNS_DATA_TYPE_KSP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KSPTOP,c.TNS_DATA_TYPE_KSPTOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KSPVAL,c.TNS_DATA_TYPE_KSPVAL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PSS,c.TNS_DATA_TYPE_PSS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_NLS,c.TNS_DATA_TYPE_NLS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ALS,c.TNS_DATA_TYPE_ALS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KSDEVTVAL,c.TNS_DATA_TYPE_KSDEVTVAL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KSDEVTTOP,c.TNS_DATA_TYPE_KSDEVTTOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPSPP,c.TNS_DATA_TYPE_KPSPP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KOL,c.TNS_DATA_TYPE_KOL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_LST,c.TNS_DATA_TYPE_LST,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ACX,c.TNS_DATA_TYPE_ACX,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SCS,c.TNS_DATA_TYPE_SCS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RXH,c.TNS_DATA_TYPE_RXH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNS,c.TNS_DATA_TYPE_KPDNS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDCN,c.TNS_DATA_TYPE_KPDCN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPNNS,c.TNS_DATA_TYPE_KPNNS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPNCN,c.TNS_DATA_TYPE_KPNCN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPS,c.TNS_DATA_TYPE_KPS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_APINF,c.TNS_DATA_TYPE_APINF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TEN,c.TNS_DATA_TYPE_TEN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSCS,c.TNS_DATA_TYPE_XSSCS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSSO,c.TNS_DATA_TYPE_XSSSO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSAO,c.TNS_DATA_TYPE_XSSAO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KSRPC,c.TNS_DATA_TYPE_KSRPC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KVL,c.TNS_DATA_TYPE_KVL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSDEF,c.TNS_DATA_TYPE_XSSDEF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PDQCINV,c.TNS_DATA_TYPE_PDQCINV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PDQIDC,c.TNS_DATA_TYPE_PDQIDC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDQCSTA,c.TNS_DATA_TYPE_KPDQCSTA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPRS,c.TNS_DATA_TYPE_KPRS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDQIDC,c.TNS_DATA_TYPE_KPDQIDC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RTSTRM,c.TNS_DATA_TYPE_RTSTRM,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SESSGET,c.TNS_DATA_TYPE_SESSGET,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SESSREL,c.TNS_DATA_TYPE_SESSREL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SESSRET,c.TNS_DATA_TYPE_SESSRET,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SCN6,c.TNS_DATA_TYPE_SCN6,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KECPA,c.TNS_DATA_TYPE_KECPA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KECPP,c.TNS_DATA_TYPE_KECPP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SXA,c.TNS_DATA_TYPE_SXA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KVARR,c.TNS_DATA_TYPE_KVARR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPNGN,c.TNS_DATA_TYPE_KPNGN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BINARY_INTEGER,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_FLOAT,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_STR,c.TNS_DATA_TYPE_VARCHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_VNU,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_PDN,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_VCS,c.TNS_DATA_TYPE_VARCHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_VBI,c.TNS_DATA_TYPE_VARCHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OAC,c.TNS_DATA_TYPE_NEW_OAC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UIN,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_SLS,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_LVC,c.TNS_DATA_TYPE_VARCHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_LVB,c.TNS_DATA_TYPE_RAW,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CHAR,c.TNS_DATA_TYPE_CHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AVC,c.TNS_DATA_TYPE_CHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BINARY_FLOAT,c.TNS_DATA_TYPE_BINARY_FLOAT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BINARY_DOUBLE,c.TNS_DATA_TYPE_BINARY_DOUBLE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CURSOR,c.TNS_DATA_TYPE_CURSOR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RDD,c.TNS_DATA_TYPE_ROWID,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OSL,c.TNS_DATA_TYPE_OSL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_EXT_NAMED,c.TNS_DATA_TYPE_INT_NAMED,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_INT_NAMED,c.TNS_DATA_TYPE_INT_NAMED,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_EXT_REF,c.TNS_DATA_TYPE_INT_REF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_INT_REF,c.TNS_DATA_TYPE_INT_REF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CLOB,c.TNS_DATA_TYPE_CLOB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BLOB,c.TNS_DATA_TYPE_BLOB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BFILE,c.TNS_DATA_TYPE_BFILE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CFILE,c.TNS_DATA_TYPE_CFILE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RSET,c.TNS_DATA_TYPE_CURSOR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_JSON,c.TNS_DATA_TYPE_JSON,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DJSON,c.TNS_DATA_TYPE_DJSON,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CLV,c.TNS_DATA_TYPE_CLV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DTR,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_DUN,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_DOP,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_VST,c.TNS_DATA_TYPE_VARCHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ODT,c.TNS_DATA_TYPE_DATE,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_DOL,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_TIME,c.TNS_DATA_TYPE_TIME,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TIME_TZ,c.TNS_DATA_TYPE_TIME_TZ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TIMESTAMP,c.TNS_DATA_TYPE_TIMESTAMP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TIMESTAMP_TZ,c.TNS_DATA_TYPE_TIMESTAMP_TZ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_INTERVAL_YM,c.TNS_DATA_TYPE_INTERVAL_YM,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_INTERVAL_DS,c.TNS_DATA_TYPE_INTERVAL_DS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_EDATE,c.TNS_DATA_TYPE_DATE,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_ETIME,c.TNS_DATA_TYPE_ETIME,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ETTZ,c.TNS_DATA_TYPE_ETTZ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ESTAMP,c.TNS_DATA_TYPE_ESTAMP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ESTZ,c.TNS_DATA_TYPE_ESTZ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_EIYM,c.TNS_DATA_TYPE_EIYM,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_EIDS,c.TNS_DATA_TYPE_EIDS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DCLOB,c.TNS_DATA_TYPE_CLOB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DBLOB,c.TNS_DATA_TYPE_BLOB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DBFILE,c.TNS_DATA_TYPE_BFILE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UROWID,c.TNS_DATA_TYPE_UROWID,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TIMESTAMP_LTZ,c.TNS_DATA_TYPE_TIMESTAMP_LTZ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ESITZ,c.TNS_DATA_TYPE_TIMESTAMP_LTZ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UB8,c.TNS_DATA_TYPE_UB8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PNTY,c.TNS_DATA_TYPE_INT_NAMED,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BOOLEAN,c.TNS_DATA_TYPE_BOOLEAN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSNSOP,c.TNS_DATA_TYPE_XSNSOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSATTR,c.TNS_DATA_TYPE_XSATTR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSNS,c.TNS_DATA_TYPE_XSNS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UB1ARRAY,c.TNS_DATA_TYPE_UB1ARRAY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SESSSTATE,c.TNS_DATA_TYPE_SESSSTATE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AC_REPLAY,c.TNS_DATA_TYPE_AC_REPLAY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AC_CONT,c.TNS_DATA_TYPE_AC_CONT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_IMPLRES,c.TNS_DATA_TYPE_IMPLRES,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OER,c.TNS_DATA_TYPE_OER,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TXT,c.TNS_DATA_TYPE_TXT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSESSNS,c.TNS_DATA_TYPE_XSSESSNS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSATTOP,c.TNS_DATA_TYPE_XSATTOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSCREOP,c.TNS_DATA_TYPE_XSCREOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSDETOP,c.TNS_DATA_TYPE_XSDETOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSDESOP,c.TNS_DATA_TYPE_XSDESOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSETSP,c.TNS_DATA_TYPE_XSSETSP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSIDP,c.TNS_DATA_TYPE_XSSIDP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSPRIN,c.TNS_DATA_TYPE_XSPRIN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSKVL,c.TNS_DATA_TYPE_XSKVL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSSDEF2,c.TNS_DATA_TYPE_XSSSDEF2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSNSOP2,c.TNS_DATA_TYPE_XSNSOP2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSNS2,c.TNS_DATA_TYPE_XSNS2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNREQ,c.TNS_DATA_TYPE_KPDNREQ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNRNF,c.TNS_DATA_TYPE_KPDNRNF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPNGNC,c.TNS_DATA_TYPE_KPNGNC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPNRI,c.TNS_DATA_TYPE_KPNRI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQENQ,c.TNS_DATA_TYPE_AQENQ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQDEQ,c.TNS_DATA_TYPE_AQDEQ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQJMS,c.TNS_DATA_TYPE_AQJMS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNRPAY,c.TNS_DATA_TYPE_KPDNRPAY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNRACK,c.TNS_DATA_TYPE_KPDNRACK,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNRMP,c.TNS_DATA_TYPE_KPDNRMP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNRDQ,c.TNS_DATA_TYPE_KPDNRDQ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SCN,c.TNS_DATA_TYPE_SCN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SCN8,c.TNS_DATA_TYPE_SCN8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CHUNKINFO,c.TNS_DATA_TYPE_CHUNKINFO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UDS,c.TNS_DATA_TYPE_UDS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TNP,c.TNS_DATA_TYPE_TNP,c.TNS_TYPE_REP_UNIVERSAL]];LR.exports=th});var UR=U((Iq,BR)=>{"use strict";var Rx=Tn(),Ix=At(),sh=class sh extends Rx{constructor(e){super(e),this.functionCode=Ix.TNS_FUNC_LOGOFF}encode(e){this.writePiggybacks(e),this.writeFunctionHeader(e)}};a(sh,"LogOffMessage");var nh=sh;BR.exports=nh});var MR=U((gq,YR)=>{"use strict";var Dx=Tn(),gx=At(),oh=class oh extends Dx{constructor(e){super(e),this.functionCode=gx.TNS_FUNC_PING}encode(e){this.writeFunctionHeader(e)}};a(oh,"PingMessage");var ih=oh;YR.exports=ih});var bR=U((Oq,VR)=>{"use strict";var xR=At(),Cx=Tn(),_h=class _h extends Cx{encode(e){e.writeUInt8(xR.TNS_MSG_TYPE_PROTOCOL),e.writeUInt8(6),e.writeUInt8(0),e.writeStr("node-oracledb"),e.writeUInt8(0)}decode(e){if(e.readUInt8()===xR.TNS_MSG_TYPE_PROTOCOL){e.skipBytes(2);let n=e.readUInt8();for(;n!==0;)n=e.readUInt8();e.skipBytes(2),e.skipUB1(1);let o=e.readUInt16LE();o>0&&e.skipBytes(o*5);let _=e.readUInt16BE(),T=e.readBytes(_),u=6+T[5]+T[6];e.caps.nCharsetId=(T[u+3]<<8)+T[u+4],e.caps.adjustForServerCompileCaps(e.readBytesWithLength()),e.caps.adjustForServerRuntimeCaps(e.readBytesWithLength())}}};a(_h,"ProtocolMessage");var ah=_h;VR.exports=ah});var vR=U((Lq,FR)=>{"use strict";var Ox=Tn(),yx=At(),lh=class lh extends Ox{constructor(e){super(e),this.functionCode=yx.TNS_FUNC_ROLLBACK}encode(e){this.writeFunctionHeader(e)}};a(lh,"RollbackMessage");var ch=lh;FR.exports=ch});var GR=U((Bq,qR)=>{"use strict";var Lx=Tn(),kR=At(),uh=class uh extends Lx{constructor(e){super(e),this.functionCode=kR.TNS_FUNC_SESSION_RELEASE,this.messageType=kR.TNS_MSG_TYPE_ONEWAY_FN,this.sessReleaseMode=0}encode(e){this.writeFunctionHeader(e),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(this.sessReleaseMode)}decode(){}};a(uh,"SessionReleaseMessage");var Th=uh;qR.exports=Th});var KR=U((Yq,HR)=>{"use strict";var wx=CR(),Bx=yR(),Ux=wR(),Yx=Du(),Mx=Ou(),xx=fu(),Vx=UR(),bx=MR(),Fx=bR(),vx=vR(),kx=GR();HR.exports={AuthMessage:wx,CommitMessage:Bx,DataTypeMessage:Ux,ExecuteMessage:Yx,FetchMessage:Mx,LobOpMessage:xx,LogOffMessage:Vx,PingMessage:bx,ProtocolMessage:Fx,RollbackMessage:vx,SessionReleaseMessage:kx}});var Ah=U((Mq,XR)=>{"use strict";var{Buffer:WR}=require("buffer"),qx=xa(),Gx=wu(),Eh=s_(),Hx=YP(),{BaseBuffer:Kx}=lo(),{NetworkSession:Wx,getConnectionInfo:$x}=GE(),{Statement:$R}=pR(),vs=Di(),zx=Ii(),Ce=At(),zR=require("process"),be=Ir(),Wt=Ee(),tn=KR(),Xx=new global.FinalizationRegistry(s=>{s.disconnect()}),Nh=class Nh extends Kx{};a(Nh,"TDSBuffer");var hh=Nh,fh=class fh extends qx{async close(){if(this._protocol.txnInProgress&&await this.rollback(),this._protocol.callTimeout=0,this._drcpEnabled&&(await this._sessRelease(),this._drcpEstablishSession=!0),this._pool&&!this._dropSess)await this._pool.release(this);else{if(!this._drcpEnabled){let e=new tn.LogOffMessage(this);await this._protocol._processMessage(e)}this.nscon.disconnect()}}async _sessRelease(){let e=new tn.SessionReleaseMessage(this);this.isPooled()||(e.sessReleaseMode=Ce.DRCP_DEAUTHENTICATE),await this._protocol._processMessage(e)}async _determineElementObjType(e){let t=[{name:"owner",type:be.DB_TYPE_VARCHAR,dir:Ce.BIND_IN,maxSize:128,values:[e.schema]},{name:"name",type:be.DB_TYPE_VARCHAR,dir:Ce.BIND_IN,maxSize:128,values:[e.name]},{name:"package_name",type:be.DB_TYPE_VARCHAR,dir:Ce.BIND_IN,maxSize:128,values:[e.packageName]}],n;e.packageName?n=`
        select
            elem_type_owner,
            elem_type_name,
            elem_type_package
        from all_plsql_coll_types
        where owner = :owner
          and type_name = :name
          and package_name = :package_name`:(t.pop(),n=`
        select
            elem_type_owner,
            elem_type_name
        from all_coll_types
        where owner = :owner
          and type_name = :name`);let o={connection:{_impl:this},prefetchRows:2},_=await this.execute(n,1,t,o,!1),T=await _.resultSet.getRows(1,o);await _.resultSet.close();let u=T[0];e.elementTypeClass=this._getDbObjectType(u[0],u[1],u[2]),e.elementTypeClass.partial&&this._partialDbObjectTypes.push(e.elementTypeClass)}async _parseElementType(e,t){let n,o,_=e.readUInt8();switch(_){case Ce.TNS_OBJ_TDS_TYPE_NUMBER:case Ce.TNS_OBJ_TDS_TYPE_FLOAT:t.elementType=be.DB_TYPE_NUMBER;break;case Ce.TNS_OBJ_TDS_TYPE_VARCHAR:case Ce.TNS_OBJ_TDS_TYPE_CHAR:t.maxSize=e.readUInt16BE(),n=_===Ce.TNS_OBJ_TDS_TYPE_VARCHAR?Ce.TNS_DATA_TYPE_VARCHAR:Ce.TNS_DATA_TYPE_CHAR,o=e.readUInt8(),t.elementType=be.getTypeByOraTypeNum(n,o);break;case Ce.TNS_OBJ_TDS_TYPE_RAW:t.elementType=be.DB_TYPE_RAW;break;case Ce.TNS_OBJ_TDS_TYPE_BINARY_FLOAT:t.elementType=be.DB_TYPE_BINARY_FLOAT;break;case Ce.TNS_OBJ_TDS_TYPE_BINARY_DOUBLE:t.elementType=be.DB_TYPE_BINARY_DOUBLE;break;case Ce.TNS_OBJ_TDS_TYPE_DATE:t.elementType=be.DB_TYPE_DATE;break;case Ce.TNS_OBJ_TDS_TYPE_TIMESTAMP:t.elementType=be.DB_TYPE_TIMESTAMP;break;case Ce.TNS_OBJ_TDS_TYPE_TIMESTAMP_LTZ:t.elementType=be.DB_TYPE_TIMESTAMP_LTZ;break;case Ce.TNS_OBJ_TDS_TYPE_TIMESTAMP_TZ:t.elementType=be.DB_TYPE_TIMESTAMP_TZ;break;case Ce.TNS_OBJ_TDS_TYPE_BOOLEAN:t.elementType=be.DB_TYPE_BOOLEAN;break;case Ce.TNS_OBJ_TDS_TYPE_CLOB:this._determineElementTypeCharsetForm(t);break;case Ce.TNS_OBJ_TDS_TYPE_BLOB:t.elementType=be.DB_TYPE_BLOB;break;case Ce.TNS_OBJ_TDS_TYPE_OBJ:t.elementType=be.DB_TYPE_OBJECT,await this._determineElementObjType(t);break;default:Wt.throwErr(Wt.ERR_TDS_TYPE_NOT_SUPPORTED,_)}}async _parseTDS(e,t){let n=new hh(e);if(n.skipBytes(4),n.skipBytes(2),n.skipBytes(2),n.readUInt16BE()>1){t.isCollection=!1;return}n.skipBytes(1),n.skipBytes(1),n.skipBytes(2),n.skipBytes(4);let _=n.readUInt8();if(t.isCollection=_===Ce.TNS_OBJ_TDS_TYPE_COLL,!t.isCollection)return;let T=n.readUInt32BE();t.maxNumElements=n.readUInt32BE(),t.collectionType=n.readUInt8(),t.collectionType===Ce.TNS_OBJ_PLSQL_INDEX_TABLE&&(t.collectionFlags=Ce.TNS_OBJ_HAS_INDEXES),n.pos=T,await this._parseElementType(n,t)}async _populateDbObjectTypeInfo(e){let t=`
      declare
          t_Instantiable              varchar2(3);
          t_SuperTypeOwner            varchar2(128);
          t_SuperTypeName             varchar2(128);
          t_SubTypeRefCursor          sys_refcursor;
          t_Pos                       pls_integer;
      begin
          :ret_val := dbms_pickler.get_type_shape(:full_name, :oid,
              :version, :tds, t_Instantiable, t_SuperTypeOwner,
              t_SuperTypeName, :attrs_rc, t_SubTypeRefCursor);
          :package_name := null;
          if substr(:full_name, length(:full_name) - 7) = '%ROWTYPE' then
              t_Pos := instr(:full_name, '.');
              :schema := substr(:full_name, 1, t_Pos - 1);
              :name := substr(:full_name, t_Pos + 1);
          else
              begin
                  select owner, type_name
                  into :schema, :name
                  from all_types
                  where type_oid = :oid;
              exception
              when no_data_found then
                  begin
                      select owner, package_name, type_name
                      into :schema, :package_name, :name
                      from all_plsql_types
                      where type_oid = :oid;
                  exception
                  when no_data_found then
                      null;
                  end;
              end;
          end if;
      end;`,n=[{name:"full_name",type:be.DB_TYPE_VARCHAR,dir:Ce.BIND_INOUT,maxSize:500,values:[e]},{name:"ret_val",type:be.DB_TYPE_BINARY_INTEGER,dir:Ce.BIND_OUT,values:[]},{name:"oid",type:be.DB_TYPE_RAW,maxSize:16,dir:Ce.BIND_OUT,values:[]},{name:"version",type:be.DB_TYPE_BINARY_INTEGER,dir:Ce.BIND_OUT,values:[]},{name:"tds",type:be.DB_TYPE_RAW,maxSize:2e3,dir:Ce.BIND_OUT,values:[]},{name:"attrs_rc",type:be.DB_TYPE_CURSOR,dir:Ce.BIND_OUT,values:[]},{name:"package_name",type:be.DB_TYPE_VARCHAR,maxSize:128,dir:Ce.BIND_OUT,values:[]},{name:"schema",type:be.DB_TYPE_VARCHAR,maxSize:128,dir:Ce.BIND_OUT,values:[]},{name:"name",type:be.DB_TYPE_VARCHAR,maxSize:128,dir:Ce.BIND_OUT,values:[]}],o={connection:{_impl:this},nullifyInvalidCursor:!0},_=await this.execute(t,1,n,o,!1);_.outBinds.ret_val!==0&&Wt.throwErr(Wt.ERR_INVALID_OBJECT_TYPE_NAME,e);let T=this._getDbObjectType(_.outBinds.schema,_.outBinds.name,_.outBinds.package_name,_.outBinds.oid);if(!T.partial)return T;T.version=_.outBinds.version,await this._parseTDS(_.outBinds.tds,T);let u=await _.outBinds.attrs_rc.getRows(1e3,{});if(u.length>0){T.attributes=[];for(let h of u){let A={name:h[1]};h[4]?(A.type=be.DB_TYPE_OBJECT,A.typeClass=this._getDbObjectType(h[4],h[3],h[5],h[6]),A.typeClass.partial&&this._partialDbObjectTypes.push(A.typeClass)):A.type=be.getTypeByColumnTypeName(h[3]),T.attributes.push(A)}}return T.partial=!1,T}async _populatePartialDbObjectTypes(){for(;this._partialDbObjectTypes.length>0;){let e=this._partialDbObjectTypes.pop(),t="%ROWTYPE",n=e.name;n.endsWith(t)?n=n.substring(0,n.length-t.length):t="";let o;e.packageName?o=`"${e.schema}"."${e.packageName}"."${n}"${t}`:o=`"${e.schema}"."${n}"${t}`,await this._populateDbObjectTypeInfo(o)}}async commit(){let e=new tn.CommitMessage(this);await this._protocol._processMessage(e)}async breakExecution(){await this._protocol.breakMessage()}_healthStatus(){return this.nscon.recvInbandNotif()}isHealthy(){try{return this.nscon.recvInbandNotif()===0}catch{return!1}}isPooled(){return!!this._pool}async connect(e){e.connectString||Wt.throwErr(Wt.ERR_EMPTY_CONNECT_STRING),vs.checkCredentials(e),this.sessionID=0,this.serialNum=0,this.autoCommit=!1,this.serverVersion="",this.statementCache=null,this.currentSchema="",this.invokeSessionCallback=!0,this.statementCache=new Map,this.statementCacheSize=e.stmtCacheSize,this._numCursorsToClose=0,this._currentSchemaModified=!1,this._cursorsToClose=new Set,this._tempLobsToClose=[],this._tempLobsTotalSize=0,this._drcpEstablishSession=!1,this._cclass=null,this._clientIdentifier="",this._clientIdentifierModified=!1,this._action="",this._actionModified=!1,this._dbOp="",this._dbOpModified=!1,this._clientInfo="",this._clientInfoModified=!1,this._module="",this._moduleModified=!1,this.serviceName="",this.remoteAddress="",this.privilege=e.privilege,this.comboKey=null,this.nscon=new Wx,Xx.register(this,this.nscon),await this.nscon.connect(e),this._connInfo=this.isPooled()?e._connInfo.map(t=>t):await $x(e),this._drcpEnabled=String(this._connInfo[0]).toLowerCase()==="pooled",this.serviceName=this._connInfo[2],this.purity=this._connInfo[3]|Ce.PURITY_DEFAULT,this.remoteAddress=this.nscon.getOption(zx.REMOTEADDR),this.connClass=e.connectionClass,this.purity===Ce.PURITY_DEFAULT&&this._drcpEnabled&&(this.isPooled()?this.purity=Ce.PURITY_SELF:this.purity=Ce.PURITY_NEW),this._protocol=new Hx(this),this._protocol.caps.protocolVersion<Ce.TNS_VERSION_MIN_ACCEPTED&&Wt.throwErr(Wt.ERR_SERVER_VERSION_NOT_SUPPORTED);try{let t=new tn.ProtocolMessage(this);await this._protocol._processMessage(t),t=new tn.DataTypeMessage(this),await this._protocol._processMessage(t),t=new tn.AuthMessage(this,e),await this._protocol._processMessage(t),await this._protocol._processMessage(t)}catch(t){throw this.nscon.disconnect(),t}this._partialDbObjectTypes=[],e.debugJDWP?this.jdwpData=WR.from(e.debugJDWP):zR.env.ORA_DEBUG_JDWP&&(this.jdwpData=WR.from(zR.env.ORA_DEBUG_JDWP)),this._protocol.connInProgress=!1}_returnStatement(e){e.bindInfoList&&e.bindInfoList.forEach(t=>{t.bindVar=null}),e.queryVars&&e.queryVars.forEach(t=>{t.values.fill(null)}),e.returnToCache?e.inUse=!1:e.cursorId!==0&&this._addCursorToClose(e.cursorId)}_addCursorToClose(e){if(this._cursorsToClose.has(e)){let t=`attempt to close cursor ${e} twice`;Wt.throwErr(Wt.ERR_INTERNAL,t)}this._cursorsToClose.add(e)}_adjustStatementCache(){for(;this.statementCache.size>this.statementCacheSize;){let e=this.statementCache.keys().next().value,t=this.statementCache.get(e);this.statementCache.delete(e),t.inUse?t.returnToCache=!1:t.cursorId!==0&&this._addCursorToClose(t.cursorId)}}_prepare(e,t){let n=this._getStatement(e,t.keepInStmtCache);return n.bufferRowIndex=0,n.bufferRowCount=0,n.lastRowIndex=0,n.moreRowsToFetch=!0,n}async _bind(e,t,n=0){let o=e.bindInfoDict,_=e.bindInfoList;if(e.isPlSql&&t.maxSize>32767){t.type===be.DB_TYPE_RAW||t.type===be.DB_TYPE_LONG_RAW?t.type=be.DB_TYPE_BLOB:t.type._csfrm===Ce.CSFRM_NCHAR?t.type=be.DB_TYPE_NCLOB:t.type=be.DB_TYPE_CLOB;let T=t.maxSize;delete t.maxSize,t.outConverter=async function(u){if(u===null)return null;let h=await u.getData(),A=u._length;return h&&A>T&&Wt.throwErr(Wt.ERR_INSUFFICIENT_BUFFER_FOR_BINDS),h}}if(t.type===be.DB_TYPE_CLOB||t.type===be.DB_TYPE_NCLOB||t.type===be.DB_TYPE_BLOB){for(let[T,u]of t.values.entries())if(!(u instanceof Eh))if(u&&u.length>0){let h=new Eh;await h.create(this,t.type),await h.write(1,u),t.values[T]=h}else t.values[T]=null}if(t.name){let T;t.name.startsWith('"')&&t.name.endsWith('"')?T=t.name.substring(1,t.name.length-1):T=t.name.toUpperCase(),T.startsWith(":")&&(T=t.name.substring(1)),o.has(T)||Wt.throwErr(Wt.ERR_INVALID_BIND_NAME,T),o.get(T).forEach(u=>{e._setVariable(u,t)})}else{let T=_[n-1];e._setVariable(T,t)}}_createResultSet(e,t){let n=new Gx;if(t||(t=new $R),n._resultSetNew(this,t,e),t.queryVars.length>0){let o=vs.getMetadataMany(t.queryVars);n._setup(e,o)}return n}async _prepareAndBind(e,t,n,o=!1){let _=this._prepare(e,n),T=0;if(!o){let u=_.bindInfoList.length,h=t.length;u!==h&&(h===0||!t[0].name)&&Wt.throwErr(Wt.ERR_WRONG_NUMBER_OF_POSITIONAL_BINDS,u,h);for(let A of t)await this._bind(_,A,T+1),T+=1}return _}resetStatmentCache(){this.statementCache.clear(),this._cursorsToClose.clear()}async getDbObjectClass(e){let t=await this._populateDbObjectTypeInfo(e);return await this._populatePartialDbObjectTypes(),t}async getStatementInfo(e){let t={},n={},o=await this._prepareAndBind(e,null,t,!0);if(t.connection=this,!o.isDdl){let _=new tn.ExecuteMessage(this,o,t);_.parseOnly=!0,await this._protocol._processMessage(_)}return o.numQueryVars>0&&(n.metaData=vs.getMetadataMany(o.queryVars)),n.bindNames=Array.from(o.bindInfoDict.keys()),n.statementType=o.statementType,n}async execute(e,t,n,o,_){let T={};if(_)return await this.executeMany(e,t,n,o);let u=await this._prepareAndBind(e,n,o),h=new tn.ExecuteMessage(this,u,o);if(h.numExecs=1,await this._protocol._processMessage(h),u.requiresFullExecute=!1,u.requiresDefine&&u.sql&&(u.requiresFullExecute=!0,await this._protocol._processMessage(h),u.requiresFullExecute=!1,u.requiresDefine=!1),u.numQueryVars>0)T.resultSet=h.resultSet;else{u.bufferRowIndex=0;let A=vs.getBindVars(u),N=vs.getExecuteOutBinds(A);N&&(T.outBinds=N),u.isPlSql&&o.implicitResultSet&&(T.implicitResults=o.implicitResultSet),u.lastRowid&&(T.lastRowid=u.lastRowid,delete u.lastRowid),u.isPlSql?u.rowCount&&(T.rowsAffected=u.rowCount):T.rowsAffected=u.rowCount||0,u.rowCount&&delete u.rowCount,this._returnStatement(u)}return T}async executeMany(e,t,n,o){let _=await this._prepareAndBind(e,n,o);_.isPlSql&&(o.batchErrors||o.dmlRowCounts)&&Wt.throwErr(Wt.ERR_EXEC_MODE_ONLY_FOR_DML);let T=new tn.ExecuteMessage(this,_,o);T.numExecs=t,T.arrayDmlRowCounts=o.dmlRowCounts,T.batchErrors=o.batchErrors,_.isPlSql&&_.requiresFullExecute&&(T.numExecs=1,await this._protocol._processMessage(T),_.requiresFullExecute=!1,T.numExecs=t-1,T.offset=1),T.numExecs>0&&await this._protocol._processMessage(T);let u={};_.bufferRowIndex=0;let h=vs.getBindVars(_),A=vs.getExecuteManyOutBinds(h,t);A&&(u.outBinds=A);let N=_.isPlSql?void 0:_.rowCount;return N&&(u.rowsAffected=N,delete _.rowCount),o.dmlRowCounts&&(u.dmlRowCounts=o.dmlRowCounts),o.batchErrors&&(u.batchErrors=o.batchErrors),this._returnStatement(_),u}_getStatement(e,t=!1){let n=this.statementCache.get(e);return n?n.inUse||!t||this._drcpEstablishSession?(t||(this.statementCache.delete(e),n.returnToCache=!1),(n.inUse||this._drcpEstablishSession)&&(n=n._copy())):(this.statementCache.delete(e),this.statementCache.set(e,n)):(n=new $R,n._prepare(e),t&&!this._drcpEstablishSession&&!n.isDdl&&this.statementCacheSize>0&&(n.returnToCache=!0,this.statementCache.set(e,n),this._adjustStatementCache())),n.inUse=!0,n}async ping(){let e=new tn.PingMessage(this);await this._protocol._processMessage(e)}async rollback(){let e=new tn.RollbackMessage(this);await this._protocol._processMessage(e)}getOracleServerVersion(){return this.serverVersion}getOracleServerVersionString(){return this.serverVersionString}setCurrentSchema(e){this._currentSchemaModified=!0,this.currentSchema=e}getCurrentSchema(){return this.currentSchema}setClientId(e){this._clientIdentifierModified=!0,this._clientIdentifier=e}setDbOp(e){this._dbOpModified=!0,this._dbOp=e}setClientInfo(e){this._clientInfoModified=!0,this._clientInfo=e}setModule(e){this._moduleModified=!0,this._module=e,this._actionModified=!0}setAction(e){this._actionModified=!0,this._action=e}async changePassword(e,t,n){let o={user:e,newPassword:n,password:t,changePassword:!0},_=new tn.AuthMessage(this,o);await this._protocol._processMessage(_)}async createLob(e){let t=new Eh;return await t.create(this,e),t}getStmtCacheSize(){return this.statementCacheSize}setCallTimeout(e){this._protocol.callTimeout=e}getCallTimeout(){return this._protocol.callTimeout}getTag(){return""}};a(fh,"ThinConnectionImpl");var Sh=fh;XR.exports=Sh});var JR=U((Vq,QR)=>{"use strict";var Qx=Xl(),Jx=Ah(),br=co(),In=Ee(),jx=jr(),dh=gr(),Zx=Di(),{getConnectionInfo:eV}=GE(),tV=require("crypto"),rV=require("events"),mh=class mh extends Qx{_init(e){if(e.homogeneous||In.throwErr(In.ERR_NOT_IMPLEMENTED,"Heterogeneous Pooling"),Zx.checkCredentials(e),this._availableObjects=[],this._name="node-thin",this._poolMin=e.poolMin,this._poolMax=e.poolMax,this._poolIncrement=e.poolIncrement,this._poolTimeout=e.poolTimeout,this._poolPingInterval=e.poolPingInterval,this._stmtCacheSize=e.stmtCacheSize,this._userConfig=e,this._freeConnectionList=[],this._usedConnectionList=new Set,this._password=e.password,this._walletPassword=e.walletPassword,this._obfuscatedPassword=[],this._obfuscatedWalletPassword=[],this._token=e.token,this._obfuscatedToken=[],this._privateKey=e.privateKey,this._obfuscatedPrivateKey=[],this._schedulerJob=null,this._password!==void 0){let t=br.setObfuscatedValue(this._password);this._password=t.value,this._obfuscatedPassword=t.obfuscatedValue,this._userConfig.password=null}if(this._walletPassword!==void 0){let t=br.setObfuscatedValue(this._walletPassword);this._walletPassword=t.value,this._obfuscatedWalletPassword=t.obfuscatedValue,this._userConfig.walletPassword=null}if(this._token!==void 0){let t=br.setObfuscatedValue(this._token);this._token=t.value,this._obfuscatedToken=t.obfuscatedValue,this._userConfig.token=null}if(this._privateKey!==void 0){let t=br.setObfuscatedValue(this._privateKey);this._privateKey=t.value,this._obfuscatedPrivateKey=t.obfuscatedValue,this._userConfig.privateKey=null}this._accessTokenFn=e.accessTokenFn,this._isDRCPEnabled=!1,this.eventEmitter=new rV,this.eventEmitter.on("_removePoolConnection",async t=>{await this._destroy(t)})}async create(e){this._init(e),this._userConfig._connInfo=await eV(e),this._isDRCPEnabled=String(this._userConfig._connInfo[0]).toLowerCase()==="pooled",this._isDRCPEnabled&&jx.connectionClass===""&&this._generateConnectionClass(),await this._growPool(this._poolMin)}setAccessToken(e){if(e.token){this._token=e.token;let t=br.setObfuscatedValue(this._token);this._token=t.value,this._obfuscatedToken=t.obfuscatedValue}if(e.privateKey){this._privateKey=e.privateKey;let t=br.setObfuscatedValue(this._privateKey);this._privateKey=t.value,this._obfuscatedPrivateKey=t.obfuscatedValue}}async _getConnAttrs(){let e,t=Object.assign({},this._userConfig);if(t.password===null&&(t.password=br.getDeobfuscatedValue(this._password,this._obfuscatedPassword)),t.walletPassword===null&&(t.walletPassword=br.getDeobfuscatedValue(this._walletPassword,this._obfuscatedWalletPassword)),t.token===null&&(t.token=br.getDeobfuscatedValue(this._token,this._obfuscatedToken),dh.isTokenExpired(t.token)))if(typeof this._accessTokenFn=="function"){if(e=await this._accessTokenFn(!0),typeof e=="string")if(t.token=e,dh.isTokenExpired(t.token))In.throwErr(In.ERR_TOKEN_HAS_EXPIRED);else{let n=br.setObfuscatedValue(t.token);this._token=n.value,this._obfuscatedToken=n.obfuscatedValue}else if(typeof e=="object")if(t.token=e.token,t.privateKey=e.privateKey,dh.isTokenExpired(t.token))In.throwErr(In.ERR_TOKEN_HAS_EXPIRED);else{let n=br.setObfuscatedValue(t.token);this._token=n.value,this._obfuscatedToken=n.obfuscatedValue;let o=br.setObfuscatedValue(t.privateKey);this._privateKey=o.value,this._obfuscatedPrivateKey=o.obfuscatedValue}}else In.throwErr(In.ERR_TOKEN_HAS_EXPIRED);return t.privateKey===null&&(t.privateKey=br.getDeobfuscatedValue(this._privateKey,this._obfuscatedPrivateKey)),t}async getConnection(){return await this.acquire()}async _destroy(e){e.nscon.ntAdapter.connected&&(e._dropSess=!0,await e.close())}async close(e){return this._schedulerJob&&(clearTimeout(this._schedulerJob),this._schedulerJob=null),await this.destroyAllNow(e)}getPoolMax(){return this._poolMax}getPoolMin(){return this._poolMin}getConnectionsInUse(){return this._usedConnectionList.size}getConnectionsOpen(){return this._freeConnectionList.length+this._usedConnectionList.size}getPoolIncrement(){return this._poolIncrement}getPoolMaxPerShard(){}getPoolPingInterval(){return this._poolPingInterval}getPoolTimeout(){return this._poolTimeout}getSodaMetaDataCache(){}getStmtCacheSize(){return this._stmtCacheSize}async _growPool(e){let t=await this._getConnAttrs();for(;e>0;){let n=new Jx;n._pool=this,await n.connect(t),n._newSession=!0,n._dropSess=!1,n._lastTimeUsed=Date.now(),this._freeConnectionList.push(n),e--}}_setScheduler(){!this._schedulerJob&&this._poolTimeout>0&&this._freeConnectionList.length>0&&this._freeConnectionList.length+this._usedConnectionList.size>this._poolMin&&(this._schedulerJob=setTimeout(()=>{this._scanIdleConnection()},this._poolTimeout*1e3))}_scanIdleConnection(){for(;this._usedConnectionList.size+this._freeConnectionList.length>this._poolMin&&this._freeConnectionList.length>0;){let e=this._freeConnectionList[this._freeConnectionList.length-1];if(Date.now()-e._lastTimeUsed<this._poolTimeout*1e3)break;this.eventEmitter.emit("_removePoolConnection",e),this._freeConnectionList.pop()}this._schedulerJob=null,this._setScheduler()}async acquire(){for(;this._freeConnectionList.length>0;){let t=this._freeConnectionList.pop();if(!t.isHealthy()){this.eventEmitter.emit("_removePoolConnection",t);continue}let n=!1;if((this._poolPingInterval===0||this._poolPingInterval>0&&Date.now()-t._lastTimeUsed>this._poolPingInterval*1e3)&&(n=!0),n)try{await t.ping()}catch{this.eventEmitter.emit("_removePoolConnection",t);continue}return this._usedConnectionList.add(t),t}if(this._usedConnectionList.size<this._poolMin)await this._growPool(this._poolMin-this._usedConnectionList.size);else{let t=this._poolMax-this._usedConnectionList.size;await this._growPool(Math.min(this._poolIncrement,t)),this._poolIncrement>1&&t>1&&this._setScheduler()}let e=this._freeConnectionList.pop();return this._usedConnectionList.add(e),e}release(e){this._usedConnectionList.delete(e),e.nscon.connected&&(e._lastTimeUsed=Date.now(),e._newSession=!1,this._freeConnectionList.push(e)),this._setScheduler()}async destroyAllNow(e){let t;for(;this._freeConnectionList.length!==0;)t=this._freeConnectionList.pop(),await this._destroy(t);if(e.forceClose)for(let n of this._usedConnectionList)await this._destroy(n),this._usedConnectionList.delete(n);this._usedConnectionList.size!==0&&In.throwErr(In.ERR_POOL_HAS_BUSY_CONNECTIONS),this.eventEmitter.removeAllListeners()}_generateConnectionClass(){this._userConfig.connectionClass=tV.randomBytes(16).toString("base64"),this._userConfig.connectionClass="NJS:"+this._userConfig.connectionClass}};a(mh,"ThinPoolImpl");var ph=mh;QR.exports=ph});var jR=U(()=>{"use strict";var nV=Ah(),sV=wu(),iV=JR(),oV=s_(),aV=hu(),Ro=Ni();Ro.ConnectionImpl=nV;Ro.ResultSetImpl=sV;Ro.PoolImpl=iV;Ro.LobImpl=oV;Ro.DbObjectImpl=aV});var iI=U((kq,sI)=>{"use strict";var $=ir(),Rt=gr(),G=Ee(),Me=Ir(),ZR=Ni(),_V=require("process"),cV=require("util"),Ph=_V.version.substring(1).split(".").map(Number);G.assert(Ph[0]>14||Ph[0]===14&&Ph[1]>=6,G.ERR_NODE_TOO_OLD,Rt.PACKAGE_JSON_VERSION,"14.6");var lV=TT(),TV=ST(),uV=AT(),EV=YT(),hV=Ai(),eI=XT(),SV=fi(),tI=nP(),NV=jT(),fV=ka(),le=jr(),AV=KT(),dV=qT(),pV=VT(),mV=di(),PV=vT(),Oi={},P_={},Io="default",Ps,RV=!1;function IV(){let s=typeof __non_webpack_require__=="function"?__non_webpack_require__:require,e=["../"+Rt.RELEASE_DIR+"/"+Rt.BINARY_FILE,"../"+Rt.RELEASE_DIR+"/oracledb.node","../build/Debug/oracledb.node","./node_modules/oracledb/"+Rt.RELEASE_DIR+"/"+Rt.BINARY_FILE,"./node_modules/oracledb/"+Rt.RELEASE_DIR+"/oracledb.node"],t;for(let n=0;n<e.length;n++)try{t=s(e[n]);break}catch(o){if(o.code!=="MODULE_NOT_FOUND"||n==e.length-1){let _;o.code==="MODULE_NOT_FOUND"?_=`
  Looked for ${e.map(T=>require("path").resolve(__dirname,T)).join(", ")}
  ${Rt.getInstallURL()}
`:_=`
  Node.js require('oracledb') error was:
  ${o.message}
  ${Rt.getInstallHelp()}
`,G.throwErr(G.ERR_CANNOT_LOAD_BINARY,_)}}return t}a(IV,"_initCLib");function rI(){jR()}a(rI,"_initializeThinDriver");function DV(s){return s===$.SYSASM||s===$.SYSBACKUP||s===$.SYSDBA||s===$.SYSDG||s===$.SYSKM||s===$.SYSOPER||s===$.SYSPRELIM||s===$.SYSRAC}a(DV,"_isPrivilege");async function nI(s,e){let t={};if(s.user!==void 0&&(G.assertParamPropValue(typeof s.user=="string",1,"user"),t.user=s.user),s.username!==void 0&&(G.assert(t.user===void 0,G.ERR_DBL_USER),G.assertParamPropValue(typeof s.username=="string",1,"username"),t.user=s.username),s.password!==void 0&&(G.assertParamPropValue(typeof s.password=="string",1,"password"),t.password=s.password),s.connectString!==void 0&&(G.assertParamPropValue(typeof s.connectString=="string",1,"connectString"),t.connectString=s.connectString),s.connectionString!==void 0&&(G.assert(t.connectString===void 0,G.ERR_DBL_CONNECT_STRING),G.assertParamPropValue(typeof s.connectionString=="string",1,"connectionString"),t.connectString=s.connectionString),s.walletPassword!==void 0&&(G.assertParamPropValue(typeof s.walletPassword=="string",1,"walletPassword"),t.walletPassword=s.walletPassword),s.walletLocation!==void 0&&(G.assertParamPropValue(typeof s.walletLocation=="string",1,"walletLocation"),t.walletLocation=s.walletLocation),s.edition!==void 0&&(G.assertParamPropValue(typeof s.edition=="string",1,"edition"),t.edition=s.edition),s.stmtCacheSize!==void 0&&(G.assertParamPropValue(Number.isInteger(s.stmtCacheSize)&&s.stmtCacheSize>=0,1,"stmtCacheSize"),t.stmtCacheSize=s.stmtCacheSize),t.externalAuth=le.externalAuth,s.externalAuth!==void 0&&(G.assertParamPropValue(typeof s.externalAuth=="boolean",1,"externalAuth"),t.externalAuth=s.externalAuth),s.events!==void 0&&(G.assertParamPropValue(typeof s.events=="boolean",1,"events"),t.events=s.events),s.poolAlias!==void 0&&(G.assertParamPropValue(typeof s.poolAlias=="string"&&s.poolAlias.length>0,1,"poolAlias"),t.poolAlias=s.poolAlias),s.configDir!==void 0&&(G.assertParamPropValue(typeof s.configDir=="string",1,"configDir"),t.configDir=s.configDir),s.sslServerCertDN!==void 0&&(G.assertParamPropValue(typeof s.sslServerCertDN=="string",1,"sslServerCertDN"),t.sslServerCertDN=s.sslServerCertDN),s.sslServerDNMatch!==void 0&&(G.assertParamPropValue(typeof s.sslServerDNMatch=="boolean",1,"sslServerDNMatch"),t.sslServerDNMatch=s.sslServerDNMatch),s.httpsProxy!==void 0&&(G.assertParamPropValue(typeof s.httpsProxy=="string",1,"httpsProxy"),t.httpsProxy=s.httpsProxy),s.httpsProxyPort!==void 0&&(G.assertParamPropValue(Number.isInteger(s.httpsProxyPort)&&s.httpsProxyPort>=0,1,"httpsProxyPort"),t.httpsProxyPort=s.httpsProxyPort),s.retryCount!==void 0&&(G.assertParamPropValue(Number.isInteger(s.retryCount)&&s.retryCount>=0,1,"retryCount"),t.retryCount=s.retryCount),s.retryDelay!==void 0&&(G.assertParamPropValue(Number.isInteger(s.retryDelay)&&s.retryDelay>=0,1,"retryDelay"),t.retryDelay=s.retryDelay),s.connectTimeout!==void 0&&(G.assertParamPropValue(Number.isInteger(s.connectTimeout)&&s.connectTimeout>=0,1,"connectTimeout"),t.connectTimeout=s.connectTimeout),s.transportConnectTimeout!==void 0&&(G.assertParamPropValue(Number.isInteger(s.transportConnectTimeout)&&s.transportConnectTimeout>=0,1,"transportConnectTimeout"),t.transportConnectTimeout=s.transportConnectTimeout),s.expireTime!==void 0&&(G.assertParamPropValue(Number.isInteger(s.expireTime)&&s.expireTime>=0,1,"expireTime"),t.expireTime=s.expireTime),s.sdu!==void 0&&(G.assertParamPropValue(Number.isInteger(s.sdu)&&s.sdu>0,1,"sdu"),t.sdu=s.sdu),s.connectionIdPrefix!==void 0&&(G.assertParamPropValue(typeof s.connectionIdPrefix=="string",1,"connectionIdPrefix"),t.connectionIdPrefix=s.connectionIdPrefix),e)s.poolMax!==void 0&&(G.assertParamPropValue(Number.isInteger(s.poolMax)&&s.poolMax>0,1,"poolMax"),t.poolMax=s.poolMax),s.poolMaxPerShard!==void 0&&(G.assertParamPropValue(Number.isInteger(s.poolMaxPerShard)&&s.poolMaxPerShard>=0,1,"poolMaxPerShard"),t.poolMaxPerShard=s.poolMaxPerShard),s.poolMin!==void 0&&(G.assertParamPropValue(Number.isInteger(s.poolMin)&&s.poolMin>=0,1,"poolMin"),t.poolMin=s.poolMin),s.poolIncrement!==void 0&&(G.assertParamPropValue(Number.isInteger(s.poolIncrement)&&s.poolIncrement>=0,1,"poolIncrement"),t.poolIncrement=s.poolIncrement),s.poolTimeout!==void 0&&(G.assertParamPropValue(Number.isInteger(s.poolTimeout)&&s.poolTimeout>=0,1,"poolTimeout"),t.poolTimeout=s.poolTimeout),s.poolPingInterval!==void 0&&(G.assertParamPropValue(Number.isInteger(s.poolPingInterval)&&s.poolPingInterval>=-2147483648&&s.poolPingInterval<=2147483647,1,"poolPingInterval"),t.poolPingInterval=s.poolPingInterval),t.homogeneous=!0,s.homogeneous!==void 0&&(G.assertParamPropValue(typeof s.homogeneous=="boolean",1,"homogeneous"),t.homogeneous=s.homogeneous),s.queueTimeout!==void 0&&(G.assertParamPropValue(Number.isInteger(s.queueTimeout)&&s.queueTimeout>=0,1,"queueTimeout"),t.queueTimeout=s.queueTimeout),s.queueMax!==void 0&&(G.assertParamPropValue(Number.isInteger(s.queueMax),1,"queueMax"),t.queueMax=s.queueMax),t.sodaMetaDataCache=!1,s.sodaMetaDataCache!==void 0&&(G.assertParamPropValue(typeof s.sodaMetaDataCache=="boolean",1,"sodaMetaDataCache"),t.sodaMetaDataCache=s.sodaMetaDataCache),s.sessionCallback!==void 0&&(G.assertParamPropValue(typeof s.sessionCallback=="string"||typeof s.sessionCallback=="function",1,"sessionCallback"),t.sessionCallback=s.sessionCallback),t.enableStatistics=!1,s.enableStatistics!==void 0&&(G.assertParamPropValue(typeof s.enableStatistics=="boolean",1,"enableStatistics"),t.enableStatistics=s.enableStatistics),!t.enableStatistics&&s._enableStats!==void 0&&(G.assertParamPropValue(typeof s._enableStats=="boolean",1,"_enableStats"),t.enableStatistics=s._enableStats);else{if(s.newPassword!==void 0&&(G.assertParamPropValue(typeof s.newPassword=="string",1,"newPassword"),t.newPassword=s.newPassword),s.privilege!==void 0&&(G.assertParamPropValue(DV(s.privilege),1,"privilege"),t.privilege=s.privilege),s.shardingKey!==void 0){let n=s.shardingKey;G.assertParamPropValue(Rt.isShardingKey(n),1,"shardingKey"),t.shardingKey=s.shardingKey}if(s.superShardingKey!==void 0){let n=s.superShardingKey;G.assertParamPropValue(Rt.isShardingKey(n),1,"superShardingKey"),t.superShardingKey=s.superShardingKey}}if(s.accessToken!==void 0){G.assert(t.user===void 0&&t.password===void 0,G.ERR_TOKEN_BASED_AUTH),e?G.assert(t.homogeneous&&t.externalAuth,G.ERR_POOL_TOKEN_BASED_AUTH):G.assert(t.externalAuth,G.ERR_CONN_TOKEN_BASED_AUTH);let n;typeof s.accessToken=="function"?(t.accessTokenFn=s.accessToken,n=await s.accessToken(!1),Rt.isTokenValid(n)||(n=await s.accessToken(!0))):n=s.accessToken,G.assert(Rt.isTokenValid(n),G.ERR_TOKEN_HAS_EXPIRED),n.privateKey!==void 0&&G.assert(Rt.isPrivateKeyValid(n),G.ERR_INVALID_PRIVATE_KEY),typeof n=="string"?t.token=n:(t.token=n.token,t.privateKey=n.privateKey)}return t.token===void 0&&t.externalAuth&&(t.user||t.password)&&G.throwErr(G.ERR_WRONG_CRED_FOR_EXTAUTH),t}a(nI,"_verifyOptions");async function gV(s){let e;G.assertArgCount(arguments,1,1),G.assertParamValue(Rt.isObject(s),1),s=await nI(s,!0);let t=s.sessionCallback;typeof t=="function"&&delete s.sessionCallback,s.poolAlias!==void 0?e=s.poolAlias:s.poolAlias===void 0&&!Oi[Io]&&!P_[Io]&&(e=Io),(Oi[e]||P_[e])&&G.throwErr(G.ERR_POOL_WITH_ALIAS_ALREADY_EXISTS,e),le.addToOptions(s,"connectionClass","edition","events","externalAuth","stmtCacheSize","poolMax","poolMaxPerShard","poolMin","poolIncrement","poolTimeout","poolPingInterval","queueMax","queueTimeout"),s.poolMin>s.poolMax&&G.throwErr(G.ERR_INVALID_NUMBER_OF_CONNECTIONS,s.poolMax,s.poolMin),Ps===void 0&&!RV&&rI(),e&&(P_[e]=!0);let n=new tI;try{await n._impl.create(s)}finally{e&&delete P_[e]}return e&&(Oi[e]=n),n._setup(s,e),n._sessionCallback=t,n.on("_afterPoolClose",()=>{n.poolAlias&&delete Oi[n.poolAlias]}),n}a(gV,"createPool");async function CV(s){let e={},t;if(G.assertArgCount(arguments,0,1),arguments.length==0?t=Io:typeof s=="string"?t=s:(e=s,G.assertParamValue(Rt.isObject(e),1),t=e.poolAlias),t){let o=Oi[t];return G.assert(o,G.ERR_POOL_WITH_ALIAS_NOT_FOUND,t),await o.getConnection(e)}e=await nI(e,!1),le.addToOptions(e,"connectionClass","edition","events","externalAuth","stmtCacheSize"),Ps===void 0&&!le.thinDriverInitialized&&rI();let n=new eI;return n._impl=new ZR.ConnectionImpl,await n._impl.connect(e),Ps===void 0&&(le.thinDriverInitialized=!0),n}a(CV,"getConnection");function OV(s){let e;return G.assertArgCount(arguments,0,1),s&&G.assertParamValue(typeof s=="string"||typeof s=="number",1),s=s||Io,e=Oi[s],e||G.throwErr(G.ERR_POOL_WITH_ALIAS_NOT_FOUND,s),e}a(OV,"getPool");function yV(s){let e={};if(G.assertArgCount(arguments,0,1),s!==void 0&&(G.assertParamValue(Rt.isObject(s),1),e={...s},G.assertParamPropString(e,1,"libDir"),G.assertParamPropString(e,1,"configDir"),G.assertParamPropString(e,1,"errorUrl"),G.assertParamPropString(e,1,"driverName")),le.thinDriverInitialized&&G.throwErr(G.ERR_THIN_CONNECTION_ALREADY_CREATED),Ps===void 0){let t=IV();e.driverName===void 0&&(e.driverName=$.DEFAULT_DRIVER_NAME+" thk"),e.errorUrl===void 0&&(e.errorUrl=$.DEFAULT_ERROR_URL);try{t.initOracleClient(e,ZR,le)}catch(n){let o=G.transformErr(n);throw o.code==="DPI-1047"&&(o.message+=`
`+Rt.getInstallHelp()),o}Ps=s||{}}else cV.isDeepStrictEqual(Ps,e)||G.throwErr(G.ERR_INIT_ORACLE_CLIENT_ARGS);le.thin=!1}a(yV,"initOracleClient");async function LV(s,e){let t={},n=$.SHUTDOWN_MODE_DEFAULT;G.assertArgCount(arguments,0,2),arguments.length==2?(G.assertParamValue(typeof s=="object",1),G.assertParamValue(typeof e=="number",2),t=s,n=e):arguments.length==1&&(G.assertParamValue(typeof s=="object",1),t=s);let o={user:t.user,password:t.password,connectString:t.connectString,connectionString:t.connectionString,externalAuth:t.externalAuth,privilege:$.SYSOPER},_=await this.getConnection(o);await _.shutdown(n),n!=this.SHUTDOWN_MODE_ABORT&&(await _.execute("ALTER DATABASE CLOSE"),await _.execute("ALTER DATABASE DISMOUNT"),await _.shutdown(this.SHUTDOWN_MODE_FINAL)),await _.close()}a(LV,"shutdown");async function wV(s,e){let t={},n={};G.assertArgCount(arguments,0,2),arguments.length==2?(G.assertParamValue(typeof s=="object",1),G.assertParamValue(typeof e=="object",2),t=s,n=e):arguments.length==1&&(G.assertParamValue(typeof s=="object",1),t=s);let o={user:t.user,password:t.password,connectString:t.connectString,connectionString:t.connectionString,externalAuth:t.externalAuth,privilege:this.SYSOPER|this.SYSPRELIM},_=await this.getConnection(o);await _.startup(n),await _.close(),o.privilege=this.SYSOPER,_=await this.getConnection(o),await _.execute("ALTER DATABASE MOUNT"),await _.execute("ALTER DATABASE OPEN"),await _.close()}a(wV,"startup");sI.exports={AqDeqOptions:lV,AqEnqOptions:TV,AqMessage:uV,AqQueue:EV,BaseDbObject:hV,Connection:eI,Lob:SV,Pool:tI,PoolStatistics:NV,ResultSet:fV,SodaDatabase:AV,SodaCollection:dV,SodaDocCursor:pV,SodaDocument:mV,SodaOperation:PV,getConnection:Rt.callbackify(CV),createPool:Rt.callbackify(gV),getPool:OV,initOracleClient:yV,shutdown:Rt.callbackify(LV),startup:Rt.callbackify(wV),CQN_OPCODE_ALL_OPS:$.CQN_OPCODE_ALL_OPS,CQN_OPCODE_ALL_ROWS:$.CQN_OPCODE_ALL_ROWS,CQN_OPCODE_ALTER:$.CQN_OPCODE_ALTER,CQN_OPCODE_DELETE:$.CQN_OPCODE_DELETE,CQN_OPCODE_DROP:$.CQN_OPCODE_DROP,CQN_OPCODE_INSERT:$.CQN_OPCODE_INSERT,CQN_OPCODE_UPDATE:$.CQN_OPCODE_UPDATE,DB_TYPE_BFILE:Me.DB_TYPE_BFILE,DB_TYPE_BINARY_DOUBLE:Me.DB_TYPE_BINARY_DOUBLE,DB_TYPE_BINARY_FLOAT:Me.DB_TYPE_BINARY_FLOAT,DB_TYPE_BINARY_INTEGER:Me.DB_TYPE_BINARY_INTEGER,DB_TYPE_BLOB:Me.DB_TYPE_BLOB,DB_TYPE_BOOLEAN:Me.DB_TYPE_BOOLEAN,DB_TYPE_CHAR:Me.DB_TYPE_CHAR,DB_TYPE_CLOB:Me.DB_TYPE_CLOB,DB_TYPE_CURSOR:Me.DB_TYPE_CURSOR,DB_TYPE_DATE:Me.DB_TYPE_DATE,DB_TYPE_INTERVAL_DS:Me.DB_TYPE_INTERVAL_DS,DB_TYPE_INTERVAL_YM:Me.DB_TYPE_INTERVAL_YM,DB_TYPE_JSON:Me.DB_TYPE_JSON,DB_TYPE_LONG:Me.DB_TYPE_LONG,DB_TYPE_LONG_NVARCHAR:Me.DB_TYPE_LONG_NVARCHAR,DB_TYPE_LONG_RAW:Me.DB_TYPE_LONG_RAW,DB_TYPE_NCHAR:Me.DB_TYPE_NCHAR,DB_TYPE_NCLOB:Me.DB_TYPE_NCLOB,DB_TYPE_NUMBER:Me.DB_TYPE_NUMBER,DB_TYPE_NVARCHAR:Me.DB_TYPE_NVARCHAR,DB_TYPE_OBJECT:Me.DB_TYPE_OBJECT,DB_TYPE_RAW:Me.DB_TYPE_RAW,DB_TYPE_ROWID:Me.DB_TYPE_ROWID,DB_TYPE_TIMESTAMP:Me.DB_TYPE_TIMESTAMP,DB_TYPE_TIMESTAMP_LTZ:Me.DB_TYPE_TIMESTAMP_LTZ,DB_TYPE_TIMESTAMP_TZ:Me.DB_TYPE_TIMESTAMP_TZ,DB_TYPE_VARCHAR:Me.DB_TYPE_VARCHAR,DEFAULT:$.DEFAULT,STMT_TYPE_UNKNOWN:$.STMT_TYPE_UNKNOWN,STMT_TYPE_SELECT:$.STMT_TYPE_SELECT,STMT_TYPE_UPDATE:$.STMT_TYPE_UPDATE,STMT_TYPE_DELETE:$.STMT_TYPE_DELETE,STMT_TYPE_INSERT:$.STMT_TYPE_INSERT,STMT_TYPE_CREATE:$.STMT_TYPE_CREATE,STMT_TYPE_DROP:$.STMT_TYPE_DROP,STMT_TYPE_ALTER:$.STMT_TYPE_ALTER,STMT_TYPE_BEGIN:$.STMT_TYPE_BEGIN,STMT_TYPE_DECLARE:$.STMT_TYPE_DECLARE,STMT_TYPE_CALL:$.STMT_TYPE_CALL,STMT_TYPE_EXPLAIN_PLAN:$.STMT_TYPE_EXPLAIN_PLAN,STMT_TYPE_MERGE:$.STMT_TYPE_MERGE,STMT_TYPE_ROLLBACK:$.STMT_TYPE_ROLLBACK,STMT_TYPE_COMMIT:$.STMT_TYPE_COMMIT,SHUTDOWN_MODE_DEFAULT:$.SHUTDOWN_MODE_DEFAULT,SHUTDOWN_MODE_TRANSACTIONAL:$.SHUTDOWN_MODE_TRANSACTIONAL,SHUTDOWN_MODE_TRANSACTIONAL_LOCAL:$.SHUTDOWN_MODE_TRANSACTIONAL_LOCAL,SHUTDOWN_MODE_IMMEDIATE:$.SHUTDOWN_MODE_IMMEDIATE,SHUTDOWN_MODE_ABORT:$.SHUTDOWN_MODE_ABORT,SHUTDOWN_MODE_FINAL:$.SHUTDOWN_MODE_FINAL,STARTUP_MODE_DEFAULT:$.STARTUP_MODE_DEFAULT,STARTUP_MODE_FORCE:$.STARTUP_MODE_FORCE,STARTUP_MODE_RESTRICT:$.STARTUP_MODE_RESTRICT,SUBSCR_EVENT_TYPE_SHUTDOWN:$.SUBSCR_EVENT_TYPE_SHUTDOWN,SUBSCR_EVENT_TYPE_SHUTDOWN_ANY:$.SUBSCR_EVENT_TYPE_SHUTDOWN_ANY,SUBSCR_EVENT_TYPE_STARTUP:$.SUBSCR_EVENT_TYPE_STARTUP,SUBSCR_EVENT_TYPE_DEREG:$.SUBSCR_EVENT_TYPE_DEREG,SUBSCR_EVENT_TYPE_OBJ_CHANGE:$.SUBSCR_EVENT_TYPE_OBJ_CHANGE,SUBSCR_EVENT_TYPE_QUERY_CHANGE:$.SUBSCR_EVENT_TYPE_QUERY_CHANGE,SUBSCR_EVENT_TYPE_AQ:$.SUBSCR_EVENT_TYPE_AQ,SUBSCR_GROUPING_CLASS_TIME:$.SUBSCR_GROUPING_CLASS_TIME,SUBSCR_GROUPING_TYPE_SUMMARY:$.SUBSCR_GROUPING_TYPE_SUMMARY,SUBSCR_GROUPING_TYPE_LAST:$.SUBSCR_GROUPING_TYPE_LAST,SUBSCR_NAMESPACE_AQ:$.SUBSCR_NAMESPACE_AQ,SUBSCR_NAMESPACE_DBCHANGE:$.SUBSCR_NAMESPACE_DBCHANGE,SUBSCR_QOS_BEST_EFFORT:$.SUBSCR_QOS_BEST_EFFORT,SUBSCR_QOS_DEREG_NFY:$.SUBSCR_QOS_DEREG_NFY,SUBSCR_QOS_QUERY:$.SUBSCR_QOS_QUERY,SUBSCR_QOS_RELIABLE:$.SUBSCR_QOS_RELIABLE,SUBSCR_QOS_ROWIDS:$.SUBSCR_QOS_ROWIDS,SYSASM:$.SYSASM,SYSBACKUP:$.SYSBACKUP,SYSDBA:$.SYSDBA,SYSDG:$.SYSDG,SYSKM:$.SYSKM,SYSOPER:$.SYSOPER,SYSPRELIM:$.SYSPRELIM,SYSRAC:$.SYSRAC,BIND_IN:$.BIND_IN,BIND_INOUT:$.BIND_INOUT,BIND_OUT:$.BIND_OUT,OUT_FORMAT_ARRAY:$.OUT_FORMAT_ARRAY,OUT_FORMAT_OBJECT:$.OUT_FORMAT_OBJECT,SODA_COLL_MAP_MODE:$.SODA_COLL_MAP_MODE,POOL_STATUS_OPEN:$.POOL_STATUS_OPEN,POOL_STATUS_DRAINING:$.POOL_STATUS_DRAINING,POOL_STATUS_CLOSED:$.POOL_STATUS_CLOSED,POOL_STATUS_RECONFIGURING:$.POOL_STATUS_RECONFIGURING,AQ_DEQ_NO_WAIT:$.AQ_DEQ_NO_WAIT,AQ_DEQ_WAIT_FOREVER:$.AQ_DEQ_WAIT_FOREVER,AQ_DEQ_MODE_BROWSE:$.AQ_DEQ_MODE_BROWSE,AQ_DEQ_MODE_LOCKED:$.AQ_DEQ_MODE_LOCKED,AQ_DEQ_MODE_REMOVE:$.AQ_DEQ_MODE_REMOVE,AQ_DEQ_MODE_REMOVE_NO_DATA:$.AQ_DEQ_MODE_REMOVE_NO_DATA,AQ_DEQ_NAV_FIRST_MSG:$.AQ_DEQ_NAV_FIRST_MSG,AQ_DEQ_NAV_NEXT_TRANSACTION:$.AQ_DEQ_NAV_NEXT_TRANSACTION,AQ_DEQ_NAV_NEXT_MSG:$.AQ_DEQ_NAV_NEXT_MSG,AQ_MSG_DELIV_MODE_PERSISTENT:$.AQ_MSG_DELIV_MODE_PERSISTENT,AQ_MSG_DELIV_MODE_BUFFERED:$.AQ_MSG_DELIV_MODE_BUFFERED,AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED:$.AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED,AQ_MSG_STATE_READY:$.AQ_MSG_STATE_READY,AQ_MSG_STATE_WAITING:$.AQ_MSG_STATE_WAITING,AQ_MSG_STATE_PROCESSED:$.AQ_MSG_STATE_PROCESSED,AQ_MSG_STATE_EXPIRED:$.AQ_MSG_STATE_EXPIRED,AQ_VISIBILITY_IMMEDIATE:$.AQ_VISIBILITY_IMMEDIATE,AQ_VISIBILITY_ON_COMMIT:$.AQ_VISIBILITY_ON_COMMIT,TPC_BEGIN_JOIN:$.TPC_BEGIN_JOIN,TPC_BEGIN_NEW:$.TPC_BEGIN_NEW,TPC_BEGIN_PROMOTE:$.TPC_BEGIN_PROMOTE,TPC_BEGIN_RESUME:$.TPC_BEGIN_RESUME,TPC_END_NORMAL:$.TPC_END_NORMAL,TPC_END_SUSPEND:$.TPC_END_SUSPEND,BLOB:Me.DB_TYPE_BLOB,BUFFER:Me.DB_TYPE_RAW,CLOB:Me.DB_TYPE_CLOB,CURSOR:Me.DB_TYPE_CURSOR,DATE:Me.DB_TYPE_TIMESTAMP,NCLOB:Me.DB_TYPE_NCLOB,NUMBER:Me.DB_TYPE_NUMBER,STRING:Me.DB_TYPE_VARCHAR,ARRAY:$.OUT_FORMAT_ARRAY,OBJECT:$.OUT_FORMAT_OBJECT,get autoCommit(){return le.autoCommit},get connectionClass(){return le.connectionClass},get dbObjectAsPojo(){return le.dbObjectAsPojo},get edition(){return le.edition},get errorOnConcurrentExecute(){return le.errorOnConcurrentExecute},get events(){return le.events},get externalAuth(){return le.externalAuth},get fetchArraySize(){return le.fetchArraySize},get fetchAsBuffer(){return le.fetchAsBuffer},get fetchAsString(){return le.fetchAsString},get fetchTypeHandler(){return le.fetchTypeHandler},get lobPrefetchSize(){return le.lobPrefetchSize},get maxRows(){return le.maxRows},get oracleClientVersion(){return Ps===void 0&&G.throwNotImplemented("getting the Oracle Client version"),le.oracleClientVersion},get oracleClientVersionString(){return Ps===void 0&&G.throwNotImplemented("getting the Oracle Client version"),le.oracleClientVersionString},get outFormat(){return le.outFormat},get poolIncrement(){return le.poolIncrement},get poolMax(){return le.poolMax},get poolMaxPerShard(){return le.poolMaxPerShard},get poolMin(){return le.poolMin},get poolPingInterval(){return le.poolPingInterval},get poolTimeout(){return le.poolTimeout},get prefetchRows(){return le.prefetchRows},get stmtCacheSize(){return le.stmtCacheSize},get thin(){return le.thin},get version(){return $.VERSION_MAJOR*1e4+$.VERSION_MINOR*100+$.VERSION_PATCH},get versionString(){return $.VERSION_STRING},get versionSuffix(){return $.VERSION_SUFFIX},set autoCommit(s){G.assertPropValue(typeof s=="boolean","autoCommit"),le.autoCommit=s},set connectionClass(s){G.assertPropValue(typeof s=="string","connectionClass"),le.connectionClass=s},set dbObjectAsPojo(s){G.assertPropValue(typeof s=="boolean","dbObjectAsPojo"),le.dbObjectAsPojo=s},set edition(s){G.assertPropValue(typeof s=="string","edition"),le.edition=s},set errorOnConcurrentExecute(s){G.assertPropValue(typeof s=="boolean","errorOnConcurrentExecute"),le.errorOnConcurrentExecute=s},set events(s){G.assertPropValue(typeof s=="boolean","events"),le.events=s},set externalAuth(s){G.assertPropValue(typeof s=="boolean","externalAuth"),le.externalAuth=s},set fetchArraySize(s){G.assertPropValue(Number.isInteger(s)&&s>0,"fetchArraySize"),le.fetchArraySize=s},set fetchAsBuffer(s){G.assertPropValue(Array.isArray(s),"fetchAsBuffer"),le.createFetchTypeMap(le.fetchAsString,s),le.fetchAsBuffer=s},set fetchAsString(s){G.assertPropValue(Array.isArray(s),"fetchAsString"),le.createFetchTypeMap(s,le.fetchAsBuffer),le.fetchAsString=s},set fetchTypeHandler(s){s!==void 0&&G.assertPropValue(typeof s=="function","fetchTypeHandler"),le.fetchTypeHandler=s},set lobPrefetchSize(s){G.assertPropValue(Number.isInteger(s)&&s>=0,"lobPrefetchSize"),le.lobPrefetchSize=s},set maxRows(s){G.assertPropValue(Number.isInteger(s)&&s>=0,"maxRows"),le.maxRows=s},set outFormat(s){s!==$.OUT_FORMAT_ARRAY&&s!==$.OUT_FORMAT_OBJECT&&G.throwErr(G.ERR_INVALID_PROPERTY_VALUE,"outFormat"),le.outFormat=s},set poolIncrement(s){G.assertPropValue(Number.isInteger(s)&&s>=0,"poolIncrement"),le.poolIncrement=s},set poolMax(s){G.assertPropValue(Number.isInteger(s)&&s>=0,"poolMax"),le.poolMax=s},set poolMaxPerShard(s){G.assertPropValue(Number.isInteger(s)&&s>=0,"poolMaxPerShard"),le.poolMaxPerShard=s},set poolMin(s){G.assertPropValue(Number.isInteger(s)&&s>=0,"poolMin"),le.poolMin=s},set poolPingInterval(s){G.assertPropValue(Number.isInteger(s)&&s<2**31&&s>=(-2)**31,"poolPingInterval"),le.poolPingInterval=s},set poolTimeout(s){G.assertPropValue(Number.isInteger(s)&&s>=0,"poolTimeout"),le.poolTimeout=s},set prefetchRows(s){G.assertPropValue(Number.isInteger(s)&&s>=0,"prefetchRows"),le.prefetchRows=s},set stmtCacheSize(s){G.assertPropValue(Number.isInteger(s)&&s>=0,"stmtCacheSize"),le.stmtCacheSize=s}}});var aI=U((Gq,oI)=>{oI.exports=iI()});var Rh=U(_I=>{_I.require=function(){if(typeof process=="object"&&process.versions&&process.versions.electron)try{let s=require("original-fs");if(Object.keys(s).length>0)return s}catch{}return require("fs")}});var Ih=U((Kq,cI)=>{cI.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var EI=U((Wq,uI)=>{var BV=Rh().require(),Ar=require("path"),lI=Ih(),UV=typeof process=="object"&&process.platform==="win32",TI=a(s=>s&&typeof s=="object","is_Obj"),Dh=new Uint32Array(256).map((s,e)=>{for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e>>>=1;return e>>>0});function er(s){this.sep=Ar.sep,this.fs=BV,TI(s)&&TI(s.fs)&&typeof s.fs.statSync=="function"&&(this.fs=s.fs)}a(er,"Utils");uI.exports=er;er.prototype.makeDir=function(s){let e=this;function t(n){let o=n.split(e.sep)[0];n.split(e.sep).forEach(function(_){if(!(!_||_.substr(-1,1)===":")){o+=e.sep+_;var T;try{T=e.fs.statSync(o)}catch{e.fs.mkdirSync(o)}if(T&&T.isFile())throw Errors.FILE_IN_THE_WAY.replace("%s",o)}})}a(t,"mkdirSync"),t(s)};er.prototype.writeFileTo=function(s,e,t,n){let o=this;if(o.fs.existsSync(s)){if(!t)return!1;var _=o.fs.statSync(s);if(_.isDirectory())return!1}var T=Ar.dirname(s);o.fs.existsSync(T)||o.makeDir(T);var u;try{u=o.fs.openSync(s,"w",438)}catch{o.fs.chmodSync(s,438),u=o.fs.openSync(s,"w",438)}if(u)try{o.fs.writeSync(u,e,0,e.length,0)}finally{o.fs.closeSync(u)}return o.fs.chmodSync(s,n||438),!0};er.prototype.writeFileToAsync=function(s,e,t,n,o){typeof n=="function"&&(o=n,n=void 0);let _=this;_.fs.exists(s,function(T){if(T&&!t)return o(!1);_.fs.stat(s,function(u,h){if(T&&h.isDirectory())return o(!1);var A=Ar.dirname(s);_.fs.exists(A,function(N){N||_.makeDir(A),_.fs.open(s,"w",438,function(P,R){P?_.fs.chmod(s,438,function(){_.fs.open(s,"w",438,function(g,p){_.fs.write(p,e,0,e.length,0,function(){_.fs.close(p,function(){_.fs.chmod(s,n||438,function(){o(!0)})})})})}):R?_.fs.write(R,e,0,e.length,0,function(){_.fs.close(R,function(){_.fs.chmod(s,n||438,function(){o(!0)})})}):_.fs.chmod(s,n||438,function(){o(!0)})})})})})};er.prototype.findFiles=function(s){let e=this;function t(n,o,_){typeof o=="boolean"&&(_=o,o=void 0);let T=[];return e.fs.readdirSync(n).forEach(function(u){var h=Ar.join(n,u);e.fs.statSync(h).isDirectory()&&_&&(T=T.concat(t(h,o,_))),(!o||o.test(h))&&T.push(Ar.normalize(h)+(e.fs.statSync(h).isDirectory()?e.sep:""))}),T}return a(t,"findSync"),t(s,void 0,!0)};er.prototype.getAttributes=function(){};er.prototype.setAttributes=function(){};er.crc32update=function(s,e){return Dh[(s^e)&255]^s>>>8};er.crc32=function(s){typeof s=="string"&&(s=Buffer.from(s,"utf8")),Dh.length||genCRCTable();let e=s.length,t=-1;for(let n=0;n<e;)t=er.crc32update(t,s[n++]);return~t>>>0};er.methodToString=function(s){switch(s){case lI.STORED:return"STORED ("+s+")";case lI.DEFLATED:return"DEFLATED ("+s+")";default:return"UNSUPPORTED ("+s+")"}};er.canonical=function(s){if(!s)return"";var e=Ar.posix.normalize("/"+s.split("\\").join("/"));return Ar.join(".",e)};er.sanitize=function(s,e){s=Ar.resolve(Ar.normalize(s));for(var t=e.split("/"),n=0,o=t.length;n<o;n++){var _=Ar.normalize(Ar.join(s,t.slice(n,o).join(Ar.sep)));if(_.indexOf(s)===0)return _}return Ar.normalize(Ar.join(s,Ar.basename(e)))};er.toBuffer=a(function(e){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?Buffer.from(e,"utf8"):Buffer.alloc(0)},"toBuffer");er.readBigUInt64LE=function(s,e){var t=Buffer.from(s.slice(e,e+8));return t.swap64(),parseInt(`0x${t.toString("hex")}`)};er.isWin=UV;er.crcTable=Dh});var SI=U((zq,hI)=>{hI.exports={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed",FILE_IN_THE_WAY:"There is a file in the way: %s",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:"File not found: %s",NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found"}});var AI=U((Xq,fI)=>{var R_=Rh().require(),NI=require("path");R_.existsSync=R_.existsSync||NI.existsSync;fI.exports=function(s){var e=s||"",t=o(),n=null;function o(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return a(o,"newAttr"),e&&R_.existsSync(e)?(n=R_.statSync(e),t.directory=n.isDirectory(),t.mtime=n.mtime,t.atime=n.atime,t.executable=(73&n.mode)!==0,t.readonly=(128&n.mode)===0,t.hidden=NI.basename(e)[0]==="."):console.warn("Invalid path: "+e),{get directory(){return t.directory},get readOnly(){return t.readonly},get hidden(){return t.hidden},get mtime(){return t.mtime},get atime(){return t.atime},get executable(){return t.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:e,isDirectory:t.directory,isReadOnly:t.readonly,isHidden:t.hidden,isExecutable:t.executable,mTime:t.mtime,aTime:t.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var yi=U((Jq,Do)=>{Do.exports=EI();Do.exports.Constants=Ih();Do.exports.Errors=SI();Do.exports.FileAttr=AI()});var pI=U((jq,dI)=>{var go=yi(),ie=go.Constants;dI.exports=function(){var s=20,e=10,t=0,n=0,o=0,_=0,T=0,u=0,h=0,A=0,N=0,P=0,R=0,g=0,p=0;s|=go.isWin?2560:768,t|=ie.FLG_EFS;var m={};function y(I){I=new Date(I),o=(I.getFullYear()-1980&127)<<25|I.getMonth()+1<<21|I.getDate()<<16|I.getHours()<<11|I.getMinutes()<<5|I.getSeconds()>>1}return a(y,"setTime"),y(+new Date),{get made(){return s},set made(I){s=I},get version(){return e},set version(I){e=I},get flags(){return t},set flags(I){t=I},get method(){return n},set method(I){switch(I){case ie.STORED:this.version=10;case ie.DEFLATED:default:this.version=20}n=I},get time(){return new Date((o>>25&127)+1980,(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(o&31)<<1)},set time(I){y(I)},get crc(){return _},set crc(I){_=Math.max(0,I)>>>0},get compressedSize(){return T},set compressedSize(I){T=Math.max(0,I)>>>0},get size(){return u},set size(I){u=Math.max(0,I)>>>0},get fileNameLength(){return h},set fileNameLength(I){h=I},get extraLength(){return A},set extraLength(I){A=I},get commentLength(){return N},set commentLength(I){N=I},get diskNumStart(){return P},set diskNumStart(I){P=Math.max(0,I)>>>0},get inAttr(){return R},set inAttr(I){R=Math.max(0,I)>>>0},get attr(){return g},set attr(I){g=Math.max(0,I)>>>0},get fileAttr(){return g?(g>>>0|0)>>16&4095:0},get offset(){return p},set offset(I){p=Math.max(0,I)>>>0},get encripted(){return(t&1)===1},get entryHeaderSize(){return ie.CENHDR+h+A+N},get realDataOffset(){return p+ie.LOCHDR+m.fnameLen+m.extraLen},get dataHeader(){return m},loadDataHeaderFromBinary:function(I){var M=I.slice(p,p+ie.LOCHDR);if(M.readUInt32LE(0)!==ie.LOCSIG)throw new Error(go.Errors.INVALID_LOC);m={version:M.readUInt16LE(ie.LOCVER),flags:M.readUInt16LE(ie.LOCFLG),method:M.readUInt16LE(ie.LOCHOW),time:M.readUInt32LE(ie.LOCTIM),crc:M.readUInt32LE(ie.LOCCRC),compressedSize:M.readUInt32LE(ie.LOCSIZ),size:M.readUInt32LE(ie.LOCLEN),fnameLen:M.readUInt16LE(ie.LOCNAM),extraLen:M.readUInt16LE(ie.LOCEXT)}},loadFromBinary:function(I){if(I.length!==ie.CENHDR||I.readUInt32LE(0)!==ie.CENSIG)throw new Error(go.Errors.INVALID_CEN);s=I.readUInt16LE(ie.CENVEM),e=I.readUInt16LE(ie.CENVER),t=I.readUInt16LE(ie.CENFLG),n=I.readUInt16LE(ie.CENHOW),o=I.readUInt32LE(ie.CENTIM),_=I.readUInt32LE(ie.CENCRC),T=I.readUInt32LE(ie.CENSIZ),u=I.readUInt32LE(ie.CENLEN),h=I.readUInt16LE(ie.CENNAM),A=I.readUInt16LE(ie.CENEXT),N=I.readUInt16LE(ie.CENCOM),P=I.readUInt16LE(ie.CENDSK),R=I.readUInt16LE(ie.CENATT),g=I.readUInt32LE(ie.CENATX),p=I.readUInt32LE(ie.CENOFF)},dataHeaderToBinary:function(){var I=Buffer.alloc(ie.LOCHDR);return I.writeUInt32LE(ie.LOCSIG,0),I.writeUInt16LE(e,ie.LOCVER),I.writeUInt16LE(t,ie.LOCFLG),I.writeUInt16LE(n,ie.LOCHOW),I.writeUInt32LE(o,ie.LOCTIM),I.writeUInt32LE(_,ie.LOCCRC),I.writeUInt32LE(T,ie.LOCSIZ),I.writeUInt32LE(u,ie.LOCLEN),I.writeUInt16LE(h,ie.LOCNAM),I.writeUInt16LE(A,ie.LOCEXT),I},entryHeaderToBinary:function(){var I=Buffer.alloc(ie.CENHDR+h+A+N);return I.writeUInt32LE(ie.CENSIG,0),I.writeUInt16LE(s,ie.CENVEM),I.writeUInt16LE(e,ie.CENVER),I.writeUInt16LE(t,ie.CENFLG),I.writeUInt16LE(n,ie.CENHOW),I.writeUInt32LE(o,ie.CENTIM),I.writeUInt32LE(_,ie.CENCRC),I.writeUInt32LE(T,ie.CENSIZ),I.writeUInt32LE(u,ie.CENLEN),I.writeUInt16LE(h,ie.CENNAM),I.writeUInt16LE(A,ie.CENEXT),I.writeUInt16LE(N,ie.CENCOM),I.writeUInt16LE(P,ie.CENDSK),I.writeUInt16LE(R,ie.CENATT),I.writeUInt32LE(g,ie.CENATX),I.writeUInt32LE(p,ie.CENOFF),I.fill(0,ie.CENHDR),I},toJSON:function(){let I=a(function(M){return M+" bytes"},"bytes");return{made:s,version:e,flags:t,method:go.methodToString(n),time:this.time,crc:"0x"+_.toString(16).toUpperCase(),compressedSize:I(T),size:I(u),fileNameLength:I(h),extraLength:I(A),commentLength:I(N),diskNumStart:P,inAttr:R,attr:g,offset:p,entryHeaderSize:I(ie.CENHDR+h+A+N)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var PI=U((eG,mI)=>{var Li=yi(),dt=Li.Constants;mI.exports=function(){var s=0,e=0,t=0,n=0,o=0;return{get diskEntries(){return s},set diskEntries(_){s=e=_},get totalEntries(){return e},set totalEntries(_){e=s=_},get size(){return t},set size(_){t=_},get offset(){return n},set offset(_){n=_},get commentLength(){return o},set commentLength(_){o=_},get mainHeaderSize(){return dt.ENDHDR+o},loadFromBinary:function(_){if((_.length!==dt.ENDHDR||_.readUInt32LE(0)!==dt.ENDSIG)&&(_.length<dt.ZIP64HDR||_.readUInt32LE(0)!==dt.ZIP64SIG))throw new Error(Li.Errors.INVALID_END);_.readUInt32LE(0)===dt.ENDSIG?(s=_.readUInt16LE(dt.ENDSUB),e=_.readUInt16LE(dt.ENDTOT),t=_.readUInt32LE(dt.ENDSIZ),n=_.readUInt32LE(dt.ENDOFF),o=_.readUInt16LE(dt.ENDCOM)):(s=Li.readBigUInt64LE(_,dt.ZIP64SUB),e=Li.readBigUInt64LE(_,dt.ZIP64TOT),t=Li.readBigUInt64LE(_,dt.ZIP64SIZ),n=Li.readBigUInt64LE(_,dt.ZIP64OFF),o=0)},toBinary:function(){var _=Buffer.alloc(dt.ENDHDR+o);return _.writeUInt32LE(dt.ENDSIG,0),_.writeUInt32LE(0,4),_.writeUInt16LE(s,dt.ENDSUB),_.writeUInt16LE(e,dt.ENDTOT),_.writeUInt32LE(t,dt.ENDSIZ),_.writeUInt32LE(n,dt.ENDOFF),_.writeUInt16LE(o,dt.ENDCOM),_.fill(" ",dt.ENDHDR),_},toJSON:function(){let _=a(function(T,u){let h=T.toString(16).toUpperCase();for(;h.length<u;)h="0"+h;return"0x"+h},"offset");return{diskEntries:s,totalEntries:e,size:t+" bytes",offset:_(n,4),commentLength:o}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Ch=U(gh=>{gh.EntryHeader=pI();gh.MainHeader=PI()});var II=U((nG,RI)=>{RI.exports=function(s){var e=require("zlib"),t={chunkSize:(parseInt(s.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(s,t)},deflateAsync:function(n){var o=e.createDeflateRaw(t),_=[],T=0;o.on("data",function(u){_.push(u),T+=u.length}),o.on("end",function(){var u=Buffer.alloc(T),h=0;u.fill(0);for(var A=0;A<_.length;A++){var N=_[A];N.copy(u,h),h+=N.length}n&&n(u)}),o.end(s)}}}});var gI=U((sG,DI)=>{DI.exports=function(s){var e=require("zlib");return{inflate:function(){return e.inflateRawSync(s)},inflateAsync:function(t){var n=e.createInflateRaw(),o=[],_=0;n.on("data",function(T){o.push(T),_+=T.length}),n.on("end",function(){var T=Buffer.alloc(_),u=0;T.fill(0);for(var h=0;h<o.length;h++){var A=o[h];A.copy(T,u),u+=A.length}t&&t(T)}),n.end(s)}}}});var wI=U((iG,LI)=>{"use strict";var{randomFillSync:CI}=require("crypto"),YV=new Uint32Array(256).map((s,e)=>{for(let t=0;t<8;t++)e&1?e=e>>>1^3988292384:e>>>=1;return e>>>0}),yI=a((s,e)=>Math.imul(s,e)>>>0,"uMul"),OI=a((s,e)=>YV[(s^e)&255]^s>>>8,"crc32update"),Co=a(()=>typeof CI=="function"?CI(Buffer.alloc(12)):Co.node(),"genSalt");Co.node=()=>{let s=Buffer.alloc(12),e=s.length;for(let t=0;t<e;t++)s[t]=Math.random()*256&255;return s};var I_={genSalt:Co};function D_(s){let e=Buffer.isBuffer(s)?s:Buffer.from(s);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let t=0;t<e.length;t++)this.updateKeys(e[t])}a(D_,"Initkeys");D_.prototype.updateKeys=function(s){let e=this.keys;return e[0]=OI(e[0],s),e[1]+=e[0]&255,e[1]=yI(e[1],134775813)+1,e[2]=OI(e[2],e[1]>>>24),s};D_.prototype.next=function(){let s=(this.keys[2]|2)>>>0;return yI(s,s^1)>>8&255};function MV(s){let e=new D_(s);return function(t){let n=Buffer.alloc(t.length),o=0;for(let _ of t)n[o++]=e.updateKeys(_^e.next());return n}}a(MV,"make_decrypter");function xV(s){let e=new D_(s);return function(t,n,o=0){n||(n=Buffer.alloc(t.length));for(let _ of t){let T=e.next();n[o++]=_^T,e.updateKeys(_)}return n}}a(xV,"make_encrypter");function VV(s,e,t){if(!s||!Buffer.isBuffer(s)||s.length<12)return Buffer.alloc(0);let n=MV(t);if(n(s.slice(0,12))[11]!==e.crc>>>24)throw"ADM-ZIP: Wrong Password";return n(s.slice(12))}a(VV,"decrypt");function bV(s){Buffer.isBuffer(s)&&s.length>=12?I_.genSalt=function(){return s.slice(0,12)}:s==="node"?I_.genSalt=Co.node:I_.genSalt=Co}a(bV,"_salter");function FV(s,e,t,n=!1){s==null&&(s=Buffer.alloc(0)),Buffer.isBuffer(s)||(s=Buffer.from(s.toString()));let o=xV(t),_=I_.genSalt();_[11]=e.crc>>>24&255,n&&(_[10]=e.crc>>>16&255);let T=Buffer.alloc(s.length+12);return o(_,T),o(s,T,12)}a(FV,"encrypt");LI.exports={decrypt:VV,encrypt:FV,_salter:bV}});var BI=U(g_=>{g_.Deflater=II();g_.Inflater=gI();g_.ZipCrypto=wI()});var yh=U((_G,UI)=>{var Mt=yi(),vV=Ch(),Fr=Mt.Constants,Oh=BI();UI.exports=function(s){var e=new vV.EntryHeader,t=Buffer.alloc(0),n=Buffer.alloc(0),o=!1,_=null,T=Buffer.alloc(0);function u(){return!s||!Buffer.isBuffer(s)?Buffer.alloc(0):(e.loadDataHeaderFromBinary(s),s.slice(e.realDataOffset,e.realDataOffset+e.compressedSize))}a(u,"getCompressedDataFromZip");function h(p){return!((e.flags&8)!==8&&Mt.crc32(p)!==e.dataHeader.crc)}a(h,"crc32OK");function A(p,m,y){if(typeof m>"u"&&typeof p=="string"&&(y=p,p=void 0),o)return p&&m&&m(Buffer.alloc(0),Mt.Errors.DIRECTORY_CONTENT_ERROR),Buffer.alloc(0);var I=u();if(I.length===0)return p&&m&&m(I),I;if(e.encripted){if(typeof y!="string"&&!Buffer.isBuffer(y))throw new Error("ADM-ZIP: Incompatible password parameter");I=Oh.ZipCrypto.decrypt(I,e,y)}var M=Buffer.alloc(e.size);switch(e.method){case Mt.Constants.STORED:if(I.copy(M),h(M))return p&&m&&m(M),M;throw p&&m&&m(M,Mt.Errors.BAD_CRC),new Error(Mt.Errors.BAD_CRC);case Mt.Constants.DEFLATED:var L=new Oh.Inflater(I);if(p)L.inflateAsync(function(v){v.copy(v,0),m&&(h(v)?m(v):m(v,Mt.Errors.BAD_CRC))});else{if(L.inflate(M).copy(M,0),!h(M))throw new Error(Mt.Errors.BAD_CRC+" "+t.toString());return M}break;default:throw p&&m&&m(Buffer.alloc(0),Mt.Errors.UNKNOWN_METHOD),new Error(Mt.Errors.UNKNOWN_METHOD)}}a(A,"decompress");function N(p,m){if((!_||!_.length)&&Buffer.isBuffer(s))return p&&m&&m(u()),u();if(_.length&&!o){var y;switch(e.method){case Mt.Constants.STORED:return e.compressedSize=e.size,y=Buffer.alloc(_.length),_.copy(y),p&&m&&m(y),y;default:case Mt.Constants.DEFLATED:var I=new Oh.Deflater(_);if(p)I.deflateAsync(function(L){y=Buffer.alloc(L.length),e.compressedSize=L.length,L.copy(y),m&&m(y)});else{var M=I.deflate();return e.compressedSize=M.length,M}I=null;break}}else if(p&&m)m(Buffer.alloc(0));else return Buffer.alloc(0)}a(N,"compress");function P(p,m){return(p.readUInt32LE(m+4)<<4)+p.readUInt32LE(m)}a(P,"readUInt64LE");function R(p){for(var m=0,y,I,M;m<p.length;)y=p.readUInt16LE(m),m+=2,I=p.readUInt16LE(m),m+=2,M=p.slice(m,m+I),m+=I,Fr.ID_ZIP64===y&&g(M)}a(R,"parseExtra");function g(p){var m,y,I,M;p.length>=Fr.EF_ZIP64_SCOMP&&(m=P(p,Fr.EF_ZIP64_SUNCOMP),e.size===Fr.EF_ZIP64_OR_32&&(e.size=m)),p.length>=Fr.EF_ZIP64_RHO&&(y=P(p,Fr.EF_ZIP64_SCOMP),e.compressedSize===Fr.EF_ZIP64_OR_32&&(e.compressedSize=y)),p.length>=Fr.EF_ZIP64_DSN&&(I=P(p,Fr.EF_ZIP64_RHO),e.offset===Fr.EF_ZIP64_OR_32&&(e.offset=I)),p.length>=Fr.EF_ZIP64_DSN+4&&(M=p.readUInt32LE(Fr.EF_ZIP64_DSN),e.diskNumStart===Fr.EF_ZIP64_OR_16&&(e.diskNumStart=M))}return a(g,"parseZip64ExtendedInformation"),{get entryName(){return t.toString()},get rawEntryName(){return t},set entryName(p){t=Mt.toBuffer(p);var m=t[t.length-1];o=m===47||m===92,e.fileNameLength=t.length},get extra(){return T},set extra(p){T=p,e.extraLength=p.length,R(p)},get comment(){return n.toString()},set comment(p){n=Mt.toBuffer(p),e.commentLength=n.length},get name(){var p=t.toString();return o?p.substr(p.length-1).split("/").pop():p.split("/").pop()},get isDirectory(){return o},getCompressedData:function(){return N(!1,null)},getCompressedDataAsync:function(p){N(!0,p)},setData:function(p){_=Mt.toBuffer(p),!o&&_.length?(e.size=_.length,e.method=Mt.Constants.DEFLATED,e.crc=Mt.crc32(p),e.changed=!0):e.method=Mt.Constants.STORED},getData:function(p){return e.changed?_:A(!1,null,p)},getDataAsync:function(p,m){e.changed?p(_):A(!0,p,m)},set attr(p){e.attr=p},get attr(){return e.attr},set header(p){e.loadFromBinary(p)},get header(){return e},packHeader:function(){var p=e.entryHeaderToBinary(),m=Mt.Constants.CENHDR;return t.copy(p,m),m+=t.length,e.extraLength&&(T.copy(p,m),m+=e.extraLength),e.commentLength&&n.copy(p,m),p},toJSON:function(){let p=a(function(m){return"<"+(m&&m.length+" bytes buffer"||"null")+">"},"bytes");return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:e.toJSON(),compressedData:p(s),data:p(_)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var xI=U((lG,MI)=>{var YI=yh(),kV=Ch(),cr=yi();MI.exports=function(s,e){var t=[],n={},o=Buffer.alloc(0),_=new kV.MainHeader,T=!1;let u=Object.assign(Object.create(null),e),{noSort:h}=u;s?P(u.readEntries):T=!0;function A(g){let p=_.diskEntries,m=_.offset;for(let y=0;y<p;y++){let I=m,M=new YI(s);M.header=s.slice(I,I+=cr.Constants.CENHDR),M.entryName=s.slice(I,I+=M.header.fileNameLength),m+=M.header.entryHeaderSize,g(M)}}a(A,"iterateEntries");function N(){T=!0,n={},t=new Array(_.diskEntries);for(var g=_.offset,p=0;p<t.length;p++){var m=g,y=new YI(s);y.header=s.slice(m,m+=cr.Constants.CENHDR),y.entryName=s.slice(m,m+=y.header.fileNameLength),y.header.extraLength&&(y.extra=s.slice(m,m+=y.header.extraLength)),y.header.commentLength&&(y.comment=s.slice(m,m+y.header.commentLength)),g+=y.header.entryHeaderSize,t[p]=y,n[y.entryName]=y}}a(N,"readEntries");function P(g){var p=s.length-cr.Constants.ENDHDR,m=Math.max(0,p-65535),y=m,I=s.length,M=-1,L=0;for(p;p>=y;p--)if(s[p]===80){if(s.readUInt32LE(p)===cr.Constants.ENDSIG){M=p,L=p,I=p+cr.Constants.ENDHDR,y=p-cr.Constants.END64HDR;continue}if(s.readUInt32LE(p)===cr.Constants.END64SIG){y=m;continue}if(s.readUInt32LE(p)===cr.Constants.ZIP64SIG){M=p,I=p+cr.readBigUInt64LE(s,p+cr.Constants.ZIP64SIZE)+cr.Constants.ZIP64LEAD;break}}if(!~M)throw new Error(cr.Errors.INVALID_FORMAT);_.loadFromBinary(s.slice(M,I)),_.commentLength&&(o=s.slice(L+cr.Constants.ENDHDR)),g&&N()}a(P,"readMainHeader");function R(){t.length>1&&!h&&t.sort((g,p)=>g.entryName.toLowerCase().localeCompare(p.entryName.toLowerCase()))}return a(R,"sortEntries"),{get entries(){return T||N(),t},get comment(){return o.toString()},set comment(g){o=cr.toBuffer(g),_.commentLength=o.length},getEntryCount:function(){return T?t.length:_.diskEntries},forEach:function(g){if(!T){A(g);return}t.forEach(g)},getEntry:function(g){return T||N(),n[g]||null},setEntry:function(g){T||N(),t.push(g),n[g.entryName]=g,_.totalEntries=t.length},deleteEntry:function(g){T||N();var p=n[g];if(p&&p.isDirectory){var m=this;this.getEntryChildren(p).forEach(function(y){y.entryName!==g&&m.deleteEntry(y.entryName)})}t.splice(t.indexOf(p),1),delete n[g],_.totalEntries=t.length},getEntryChildren:function(g){if(T||N(),g&&g.isDirectory){let p=[],m=g.entryName,y=m.length;return t.forEach(function(I){I.entryName.substr(0,y)===m&&p.push(I)}),p}return[]},compressToBuffer:function(){T||N(),R();let g=[],p=[],m=0,y=0;_.size=0,_.offset=0;for(let L of t){let v=L.getCompressedData();L.header.offset=y;let H=L.header.dataHeaderToBinary(),te=L.rawEntryName.length,se=Buffer.alloc(te+L.extra.length);L.rawEntryName.copy(se,0),se.copy(L.extra,te);let Ae=H.length+se.length+v.length;y+=Ae,g.push(H),g.push(se),g.push(v);let V=L.packHeader();p.push(V),_.size+=V.length,m+=Ae+V.length}m+=_.mainHeaderSize,_.offset=y,y=0;let I=Buffer.alloc(m);for(let L of g)L.copy(I,y),y+=L.length;for(let L of p)L.copy(I,y),y+=L.length;let M=_.toBinary();return o&&o.copy(M,cr.Constants.ENDHDR),M.copy(I,y),I},toAsyncBuffer:function(g,p,m,y){try{T||N(),R();let I=[],M=[],L=0,v=0;_.size=0,_.offset=0;let H=a(function(te){if(te.length){let se=te.pop(),Ae=se.entryName+se.extra.toString();m&&m(Ae),se.getCompressedDataAsync(function(V){y&&y(Ae),se.header.offset=v;let Y=se.header.dataHeaderToBinary(),F=Buffer.alloc(Ae.length,Ae),J=Y.length+F.length+V.length;v+=J,I.push(Y),I.push(F),I.push(V);let Te=se.packHeader();M.push(Te),_.size+=Te.length,L+=J+Te.length,H(te)})}else{L+=_.mainHeaderSize,_.offset=v,v=0;let se=Buffer.alloc(L);I.forEach(function(V){V.copy(se,v),v+=V.length}),M.forEach(function(V){V.copy(se,v),v+=V.length});let Ae=_.toBinary();o&&o.copy(Ae,cr.Constants.ENDHDR),Ae.copy(se,v),g(se)}},"compress2Buffer");H(t)}catch(I){p(I)}}}}});var bI=U((uG,VI)=>{var vt=yi(),Dn=require("path"),qV=yh(),GV=xI(),ks=a((s,e)=>typeof s=="boolean"?s:e,"get_Bool"),Lh=a((s,e)=>typeof s=="string"?s:e,"get_Str"),HV={noSort:!1,readEntries:!1,method:vt.Constants.NONE,fs:null};VI.exports=function(s,e){let t=null,n=Object.assign(Object.create(null),HV);s&&typeof s=="object"&&(s instanceof Uint8Array||(Object.assign(n,s),s=n.input?n.input:void 0,n.input&&delete n.input),Buffer.isBuffer(s)&&(t=s,n.method=vt.Constants.BUFFER,s=void 0)),Object.assign(n,e);let o=new vt(n);if(s&&typeof s=="string")if(o.fs.existsSync(s))n.method=vt.Constants.FILE,n.filename=s,t=o.fs.readFileSync(s);else throw new Error(vt.Errors.INVALID_FILENAME);let _=new GV(t,n),{canonical:T,sanitize:u}=vt;function h(N){if(N&&_){var P;if(typeof N=="string"&&(P=_.getEntry(N)),typeof N=="object"&&typeof N.entryName<"u"&&typeof N.header<"u"&&(P=_.getEntry(N.entryName)),P)return P}return null}a(h,"getEntry");function A(N){let{join:P,normalize:R,sep:g}=Dn.posix;return P(".",R(g+N.split("\\").join(g)+g))}return a(A,"fixPath"),{readFile:function(N,P){var R=h(N);return R&&R.getData(P)||null},readFileAsync:function(N,P){var R=h(N);R?R.getDataAsync(P):P(null,"getEntry failed for:"+N)},readAsText:function(N,P){var R=h(N);if(R){var g=R.getData();if(g&&g.length)return g.toString(P||"utf8")}return""},readAsTextAsync:function(N,P,R){var g=h(N);g?g.getDataAsync(function(p,m){if(m){P(p,m);return}p&&p.length?P(p.toString(R||"utf8")):P("")}):P("")},deleteFile:function(N){var P=h(N);P&&_.deleteEntry(P.entryName)},addZipComment:function(N){_.comment=N},getZipComment:function(){return _.comment||""},addZipEntryComment:function(N,P){var R=h(N);R&&(R.comment=P)},getZipEntryComment:function(N){var P=h(N);return P&&P.comment||""},updateFile:function(N,P){var R=h(N);R&&R.setData(P)},addLocalFile:function(N,P,R,g){if(o.fs.existsSync(N)){P=P?A(P):"";var p=N.split("\\").join("/").split("/").pop();P+=R||p;let m=o.fs.statSync(N);this.addFile(P,o.fs.readFileSync(N),g,m)}else throw new Error(vt.Errors.FILE_NOT_FOUND.replace("%s",N))},addLocalFolder:function(N,P,R){if(R instanceof RegExp?R=function(g){return function(p){return g.test(p)}}(R):typeof R!="function"&&(R=a(function(){return!0},"filter")),P=P?A(P):"",N=Dn.normalize(N),o.fs.existsSync(N)){let g=o.findFiles(N),p=this;g.length&&g.forEach(function(m){var y=Dn.relative(N,m).split("\\").join("/");if(R(y)){var I=o.fs.statSync(m);I.isFile()?p.addFile(P+y,o.fs.readFileSync(m),"",I):p.addFile(P+y+"/",Buffer.alloc(0),"",I)}})}else throw new Error(vt.Errors.FILE_NOT_FOUND.replace("%s",N))},addLocalFolderAsync:function(N,P,R,g){g instanceof RegExp?g=function(m){return function(y){return m.test(y)}}(g):typeof g!="function"&&(g=a(function(){return!0},"filter")),R=R?A(R):"",N=Dn.normalize(N);var p=this;o.fs.open(N,"r",function(m){if(m&&m.code==="ENOENT")P(void 0,vt.Errors.FILE_NOT_FOUND.replace("%s",N));else if(m)P(void 0,m);else{var y=o.findFiles(N),I=-1,M=a(function(){if(I+=1,I<y.length){var L=y[I],v=Dn.relative(N,L).split("\\").join("/");v=v.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),g(v)?o.fs.stat(L,function(H,te){H&&P(void 0,H),te.isFile()?o.fs.readFile(L,function(se,Ae){se?P(void 0,se):(p.addFile(R+v,Ae,"",te),M())}):(p.addFile(R+v+"/",Buffer.alloc(0),"",te),M())}):M()}else P(!0,void 0)},"next");M()}})},addLocalFolderPromise:function(N,P){return new Promise((R,g)=>{let{filter:p,zipPath:m}=Object.assign({},P);this.addLocalFolderAsync(N,(y,I)=>{I&&g(I),y&&R(this)},m,p)})},addFile:function(N,P,R,g){let p=h(N),m=p!=null;m||(p=new qV,p.entryName=N),p.comment=R||"";let y=typeof g=="object"&&g instanceof o.fs.Stats;y&&(p.header.time=g.mtime);var I=p.isDirectory?16:0;if(!vt.isWin){let M=p.isDirectory?16384:32768;y?M|=4095&g.mode:typeof g=="number"?M|=4095&g:M|=p.isDirectory?493:420,I=(I|M<<16)>>>0}p.attr=I,p.setData(P),m||_.setEntry(p)},getEntries:function(){return _?_.entries:[]},getEntry:function(N){return h(N)},getEntryCount:function(){return _.getEntryCount()},forEach:function(N){return _.forEach(N)},extractEntryTo:function(N,P,R,g,p,m){g=ks(g,!1),p=ks(p,!1),R=ks(R,!0),m=Lh(m,Lh(p,void 0));var y=h(N);if(!y)throw new Error(vt.Errors.NO_ENTRY);var I=T(y.entryName),M=u(P,m&&!y.isDirectory?m:R?I:Dn.basename(I));if(y.isDirectory){var L=_.getEntryChildren(y);return L.forEach(function(te){if(te.isDirectory)return;var se=te.getData();if(!se)throw new Error(vt.Errors.CANT_EXTRACT_FILE);var Ae=T(te.entryName),V=u(P,R?Ae:Dn.basename(Ae));let Y=p?te.header.fileAttr:void 0;o.writeFileTo(V,se,g,Y)}),!0}var v=y.getData();if(!v)throw new Error(vt.Errors.CANT_EXTRACT_FILE);if(o.fs.existsSync(M)&&!g)throw new Error(vt.Errors.CANT_OVERRIDE);let H=p?N.header.fileAttr:void 0;return o.writeFileTo(M,v,g,H),!0},test:function(N){if(!_)return!1;for(var P in _.entries)try{if(P.isDirectory)continue;var R=_.entries[P].getData(N);if(!R)return!1}catch{return!1}return!0},extractAllTo:function(N,P,R,g){if(P=ks(P,!1),g=Lh(R,g),R=ks(R,!1),!_)throw new Error(vt.Errors.NO_ZIP);_.entries.forEach(function(p){var m=u(N,T(p.entryName.toString()));if(p.isDirectory){o.makeDir(m);return}var y=p.getData(g);if(!y)throw new Error(vt.Errors.CANT_EXTRACT_FILE);let I=R?p.header.fileAttr:void 0;o.writeFileTo(m,y,P,I);try{o.fs.utimesSync(m,p.header.time,p.header.time)}catch{throw new Error(vt.Errors.CANT_EXTRACT_FILE)}})},extractAllToAsync:function(N,P,R,g){if(g||(g=a(function(){},"callback")),P=ks(P,!1),typeof R=="function"&&!g&&(g=R),R=ks(R,!1),!_){g(new Error(vt.Errors.NO_ZIP));return}N=Dn.resolve(N);let p=a(L=>u(N,Dn.normalize(T(L.entryName.toString()))),"getPath"),m=a((L,v)=>new Error(L+': "'+v+'"'),"getError"),y=[],I=new Set;_.entries.forEach(L=>{L.isDirectory?y.push(L):I.add(L)});for(let L of y){let v=p(L),H=R?L.header.fileAttr:void 0;try{o.makeDir(v),H&&o.fs.chmodSync(v,H),o.fs.utimesSync(v,L.header.time,L.header.time)}catch{g(m("Unable to create folder",v))}}let M=a(()=>{I.size===0&&g()},"done");for(let L of I.values()){let v=Dn.normalize(T(L.entryName.toString())),H=u(N,v);L.getDataAsync(function(te,se){if(se){g(new Error(se));return}if(!te)g(new Error(vt.Errors.CANT_EXTRACT_FILE));else{let Ae=R?L.header.fileAttr:void 0;o.writeFileToAsync(H,te,P,Ae,function(V){if(!V){g(m("Unable to write file",H));return}o.fs.utimes(H,L.header.time,L.header.time,function(Y){if(Y){g(m("Unable to set times",H));return}I.delete(L),M()})})}})}M()},writeZip:function(N,P){if(arguments.length===1&&typeof N=="function"&&(P=N,N=""),!N&&n.filename&&(N=n.filename),!!N){var R=_.compressToBuffer();if(R){var g=o.writeFileTo(N,R,!0);typeof P=="function"&&P(g?null:new Error("failed"),"")}}},writeZipPromise:function(N,P){let{overwrite:R,perm:g}=Object.assign({overwrite:!0},P);return new Promise((p,m)=>{!N&&n.filename&&(N=n.filename),N||m("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(y=>{let I=a(M=>M?p(M):m("ADM-ZIP: Wasn't able to write zip file"),"ret");o.writeFileToAsync(N,y,R,g,I)},m)})},toBufferPromise:function(){return new Promise((N,P)=>{_.toAsyncBuffer(N,P)})},toBuffer:function(N,P,R,g){return this.valueOf=2,typeof N=="function"?(_.toAsyncBuffer(N,P,R,g),null):_.compressToBuffer()}}}});var kI=U((hG,vI)=>{"use strict";var KV=require("crypto"),wi=require("fs"),FI=require("path"),WV=bI(),$V=a((s,e)=>new Promise((t,n)=>{try{let o=new WV(s);if(!o)return n(new Error("Link to zip file is broken or system has no permissions to "+s+" folder"));let _=o.getEntries();return Object.keys(_).length===0?n(new Error("Zip file is empty")):(o.extractAllTo(e,!0),t(e))}catch(o){n(o)}}),"extractZip"),zV=a((s,e)=>{if(!wi.existsSync(s))return;let t=/DIRECTORY\=\".+?\"/i,n=wi.readFileSync(s).toString();t.test(n)&&(n=n.replace(t,`DIRECTORY="${e}"`),wi.writeFileSync(s,n))},"replaceSqlNetOraDirectoryPath"),XV=a(s=>new Promise((e,t)=>{let n=a(T=>KV.createHash("md5").update(T,"utf-8").digest("hex"),"getHash"),o=wi.createReadStream(s),_="";o.on("data",T=>{_+=T}),o.on("error",T=>{t(T)}),o.on("end",function(){e(n(_))})}),"getHashByFile"),QV=a(async({walletFile:s,tempFolder:e,name:t})=>{if(!wi.existsSync(s))return;let n=await XV(s),o=FI.join(e,t+"_"+n);if(wi.existsSync(o))return o;await $V(s,o);let _=FI.join(o,"sqlnet.ora");return zV(_,o),o},"extractWallet");vI.exports=QV});var qI=U(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});var JV=function(){function s(e,t){t===void 0&&(t=0),this.source=e,this.position=t}return a(s,"LexerState"),s.prototype.copy=function(){return new s(this.source,this.position)},s}();wh.default=JV});var KI=U(qs=>{"use strict";var jV=qs&&qs.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){s(e,t);function n(){this.constructor=e}a(n,"__"),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qs,"__esModule",{value:!0});var GI=function(){function s(e,t,n,o,_,T){this.type=e,this.match=t,this.groups=n,this.start=o,this.end=_,this.lexer=T}return a(s,"Token"),s.prototype.strpos=function(){var e=this.lexer.strpos(this.start),t=this.lexer.strpos(this.end);return{start:e,end:t}},s.prototype.isEof=function(){return!1},s}();qs.default=GI;var HI=function(s){jV(e,s);function e(t){var n=this,o=t.source.length;return n=s.call(this,null,"(eof)",[],o,o,t)||this,n}return a(e,"EOFToken"),e.prototype.isEof=function(){return!0},e}(GI);qs.EOFToken=HI;qs.EOF=function(s){return new HI(s)}});var WI=U(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});function ZV(s){return new RegExp(s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))}a(ZV,"toRegExp");function eb(s){return typeof s=="string"&&(s=ZV(s)),s.source.startsWith("^")?s:new RegExp("^"+s.source,s.flags)}a(eb,"normalize");function tb(s,e){for(var t=0,n=0,o=s;n<o.length;n++){var _=o[n],T=e(_,t++);if(T)return{item:_,result:T}}}a(tb,"first");var rb=function(){function s(){this.tokenTypes=[]}return a(s,"TokenTypes"),s.prototype.disable=function(e){return this.enable(e,!1)},s.prototype.enable=function(e,t){return t===void 0&&(t=!0),this.tokenTypes.filter(function(n){return n.type==e}).forEach(function(n){return n.enabled=t}),this},s.prototype.isEnabled=function(e){var t=this.tokenTypes.filter(function(n){return n.type==e});if(t.length==0)throw new Error("Token of type "+e+" does not exists");return t[0].enabled},s.prototype.peek=function(e,t){var n=e.substr(t);return tb(this.tokenTypes.filter(function(o){return o.enabled}),function(o){return o.regex.lastIndex=0,o.regex.exec(n)})},s.prototype.token=function(e,t,n){return n===void 0&&(n=!1),this.tokenTypes.push({type:e,regex:eb(t),enabled:!0,skip:n}),this},s}();Bh.default=rb});var zI=U(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});var Uh=qI();Gs.LexerState=Uh.default;var C_=KI();Gs.Token=C_.default;Gs.EOF=C_.EOF;var $I=WI();Gs.TokenTypes=$I.default;var nb=function(){function s(e){e===void 0&&(e=""),this._state=new Uh.default(e),this._tokenTypes=new $I.default}return a(s,"Lexer"),Object.defineProperty(s.prototype,"position",{get:function(){return this._state.position},set:function(e){this._state.position=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"source",{get:function(){return this._state.source},set:function(e){this._state=new Uh.default(e)},enumerable:!0,configurable:!0}),s.prototype.attachTo=function(e){this._state=e._state},s.prototype.disable=function(e){return this._tokenTypes.disable(e),this},s.prototype.enable=function(e,t){return this._tokenTypes.enable(e,t),this},s.prototype.expect=function(e){var t=this.next();if(t.type!=e){var n=t.strpos();throw new Error("Expected "+e+(t?", got "+t.type:"")+" at "+n.start.line+":"+n.start.column)}return t},s.prototype.isEnabled=function(e){return this._tokenTypes.isEnabled(e)},s.prototype.next=function(){try{var e=this.peek();return this._state.position=e.end,e}catch(t){throw this._state.position=t.end,t}},s.prototype.peek=function(e){var t=this;e===void 0&&(e=this._state.position);var n=a(function(N){if(N===void 0&&(N=e),N>=t._state.source.length)return C_.EOF(t);var P=t._tokenTypes.peek(t._state.source,N);return P?P.item.skip?n(N+P.result[0].length):new C_.default(P.item.type,P.result[0],P.result.map(function(R){return R}),N,N+P.result[0].length,t):null},"read"),o=n();if(o)return o;var _=this._state.source.substring(e,e+1);try{this.peek(e+1)}catch(N){_+=N.unexpected}var T=this.strpos(e),u=T.line,h=T.column,A=new Error("Unexpected input: "+_+" at ("+u+":"+h+")");throw A.unexpected=_,A.end=e+_.length,A},s.prototype.strpos=function(e){var t=this._state.source.substring(0,e).split(/\r?\n/);Array.isArray(t)||(t=[t]);var n=t.length,o=t[t.length-1].length+1;return{line:n,column:o}},s.prototype.toArray=function(){var e=this._state.copy();this._state.position=0;for(var t=[],n;!(n=this.next()).isEof();)t.push(n);return this._state=e,t},s.prototype.token=function(e,t,n){return this._tokenTypes.token(e,t,n),this},s.prototype.keyword=function(e){return this.token(e,new RegExp(e+"(?=\\W|$)"))},s.prototype.operator=function(e){var t=new String(e).valueOf();return this.token(e,t)},s}();Gs.default=nb});var QI=U((IG,XI)=>{XI.exports=zI()});var ZI=U((DG,jI)=>{"use strict";var sb=QI().default;function JI(s,e={}){s.expect("(");let t=s.expect("WORD").match;s.expect("=");let n;if(s.peek().type==="("){n={};do Object.assign(n,JI(s,e));while(s.peek().type==="(")}else n=s.expect("WORD").match;return s.expect(")"),{...e,[t]:n}}a(JI,"parseObject");var ib=a(s=>{let e=s.expect("WORD").match;return s.expect("="),{name:e,data:JI(s)}},"parseConnection"),ob=a(s=>{let e=new sb(s).token("$SKIP_COMMENT",/#[^\n]*/,!0).token("$SKIP_WS",/\s+/,!0).token("WORD",/([a-z0-9._-]+|["'][\s\S]*?["'])/i).token("(",/\(/).token(")",/\)/).token("=",/=/),t={};for(;e.peek().type!==null;){let n=ib(e);t[n.name]=n}return t},"parseTns");jI.exports=ob});var O_=U((CG,eD)=>{"use strict";var xh=class xh{cache;cacheValue;cycle;ifNotExist;increment;maxValue;minValue;sequenceName;start;sharing;order;keep;scale;scaleExtend;shard;shardExtend;type};a(xh,"Sequence");var Yh=xh,Vh=class Vh{sharing;ddlScript;sequenceName;minValue;maxValue;increment;cycle;order;cacheValue;scale;extend;shard;type;keep};a(Vh,"SequenceDto");var Mh=Vh;eD.exports={Sequence:Yh,SequenceDto:Mh}});var nD=U((wG,rD)=>{"use strict";var{Sequence:yG,SequenceDto:LG}=O_(),ab=/(?<=START WITH)(\s+)([\w]+)(?=\s+)?/,_b=/\s+LINK$/,lr={true:"Y",false:"N"},it={cache:"cache",cycle:"cycle",extend:"extend",global:"global",keep:"keep",noCache:"nocache",noCycle:"nocycle",noExtend:"noextend",noKeep:"nokeep",noOrder:"noorder",noScale:"noscale",noShard:"noshard",order:"order",scale:"scale",scaleExtend:"scaleExtend",session:"session",shard:"shard",sharing:"sharing",type:"type"},tD={[it.cycle]:{[lr.true]:it.cycle,[lr.false]:it.noCycle},[it.order]:{[lr.true]:it.order,[lr.false]:it.noOrder},[it.shard]:{[lr.true]:it.shard,[lr.false]:""},[it.scale]:{[lr.true]:it.scale,[lr.false]:it.noScale},[it.type]:{[lr.true]:it.session,[lr.false]:it.global},[it.keep]:{[lr.true]:it.keep,[lr.false]:it.noKeep},[it.extend]:{[lr.true]:it.extend,[lr.false]:it.noExtend}},cb=a(async({schema:s,execute:e,logger:t})=>{try{let n=await e(`
      SELECT JSON_OBJECT(
          'sharing'      VALUE SHARING,
          'sequenceName' VALUE SEQUENCE_NAME,
          'minValue'     VALUE MIN_VALUE,
          'maxValue'     VALUE MAX_VALUE,
          'increment'    VALUE INCREMENT_BY,
          'cycle'        VALUE CYCLE_FLAG,
          'order'        VALUE ORDER_FLAG,
          'cacheValue'   VALUE CACHE_SIZE,
          'scale'        VALUE SCALE_FLAG,
          'extend'       VALUE EXTEND_FLAG,
          'shard'        VALUE SHARDED_FLAG,
          'type'         VALUE SESSION_FLAG,
          'keep'         VALUE KEEP_VALUE
      )
      FROM ALL_OBJECTS
      LEFT JOIN ALL_SEQUENCES
                ON ALL_SEQUENCES.SEQUENCE_OWNER = ALL_OBJECTS.OWNER
                AND ALL_SEQUENCES.SEQUENCE_NAME = ALL_OBJECTS.OBJECT_NAME
      WHERE OBJECT_TYPE = 'SEQUENCE'
      AND OWNER = '${s}'
      `);if(!(n!=null&&n.length))return[];let o=await lb({schema:s,execute:e,logger:t});return n.map(([_])=>{let T=JSON.parse(_),u=o[T.sequenceName]||"";return{...T,ddlScript:u}})}catch(n){let{message:o,stack:_,...T}=n;return t.log("error",{message:"Cannot get sequences",error:{message:o,stack:_,err:T}},"Getting sequences"),[]}},"getSchemaSequenceDtos"),lb=a(async({schema:s,execute:e,logger:t})=>{try{let n=await e(`
      SELECT JSON_OBJECT(
          'sequenceName' VALUE OBJECT_NAME,
          'ddlScript'    VALUE DBMS_METADATA.GET_DDL(OBJECT_TYPE, OBJECT_NAME, OWNER)
      )
      FROM ALL_OBJECTS
      WHERE OBJECT_TYPE = 'SEQUENCE'
      AND OWNER = '${s}'
      `);return n!=null&&n.length?n.reduce((o,[_])=>{let{sequenceName:T,ddlScript:u}=JSON.parse(_);return{...o,[T]:u}},{}):{}}catch(n){let{message:o,stack:_,...T}=n;return t.log("error",{message:"Cannot get sequences DDL",error:{message:o,stack:_,err:T}},"Getting sequences"),{}}},"getSchemaSequenceDdl"),Tb=a(({execute:s})=>async({schema:e,logger:t})=>(await cb({schema:e,execute:s,logger:t})).map(o=>{let _=ub({sequenceDto:o}),T=hb({sequenceDto:o}),u=Sb({sequenceDto:o}),h=Eb({sequenceDto:o}),A=o.cacheValue?it.cache:it.noCache;return{sequenceName:o.sequenceName,minValue:o.minValue,maxValue:o.maxValue,increment:o.increment,cacheValue:o.cacheValue,cache:A,sharing:_,...T,...u,...h}}),"getSchemaSequences"),ub=a(({sequenceDto:s})=>{var e,t;return(t=(e=s.sharing)==null?void 0:e.replace(_b,""))==null?void 0:t.toLowerCase()},"getSequenceSharing"),Eb=a(({sequenceDto:s})=>{let e=s[it.scale],t=s[it.shard],n=s[it.extend],o=tD[it.extend][n],_=e===lr.true?o:"",T=t===lr.true?o:"";return{scaleExtend:_,shardExtend:T}},"getExtendOptions"),hb=a(({sequenceDto:s})=>Object.entries(tD).reduce((e,[t,n])=>({...e,[t]:n[s[t]]}),{}),"getBooleanOptions"),Sb=a(({sequenceDto:s})=>({start:Nb({sequenceDto:s})}),"getOptionsFromDdl"),Nb=a(({sequenceDto:s})=>{var n;let e=s.ddlScript;if(!e.includes("START WITH"))return s.minValue<s.maxValue?s.minValue:s.maxValue;let t=(n=e.match(ab))==null?void 0:n[2];return isNaN(Number(t))?t:Number(t)},"getStartOptionFromDdl");rD.exports={getSchemaSequences:Tb}});var qh=U((UG,cD)=>{"use strict";var Oo=aI(),fb=kI(),bh=require("path"),L_=require("fs"),Ab=ZI(),{getSchemaSequences:db}=nD(),Je=Ct(),iD={message:"Connection error"},Xn,Fh,pb=a((s="")=>{let e=s.match(/http:\/\/(?:.*?:.*?@)?(.*?):(\d+)/i);return e?{httpsProxy:e[1],httpsProxyPort:e[2]}:{}},"parseProxyOptions"),oD=a(s=>[s,process.env.TNS_ADMIN,bh.join(process.env.ORACLE_HOME||"","network","admin"),bh.join(process.env.LD_LIBRARY_PATH||"","network","admin")].reduce((e,t)=>{if(e)return e;let n=bh.join(t,"tnsnames.ora");return L_.existsSync(n)?n:e},""),"getTnsNamesOraFile"),aD=a(s=>{let e=L_.readFileSync(s).toString();return Ab(e)},"parseTnsNamesOra"),mb=a((s,e,t,n)=>{var A,N,P,R,g,p,m,y,I,M,L;let o=oD(s);if(!L_.existsSync(o))return e;n({message:"Found tnsnames.ora file: "+o});let _=aD(o);if(n({message:"tnsnames.ora successfully parsed"}),!_[e])return n({message:'Cannot find "'+e+'" in tnsnames.ora'}),e;let T=(P=(N=(A=_[e])==null?void 0:A.data)==null?void 0:N.description)==null?void 0:P.address,u=(m=(p=(g=(R=_[e])==null?void 0:R.data)==null?void 0:g.description)==null?void 0:p.connect_data)==null?void 0:m.service_name,h=(L=(M=(I=(y=_[e])==null?void 0:y.data)==null?void 0:I.description)==null?void 0:M.connect_data)==null?void 0:L.sid;return n({message:"tnsnames.ora",address:T,service:u}),vh(Je.omitBy({...T,...t,protocol:(T==null?void 0:T.protocol)||"tcps",service:u||e,sid:h},Je.isUndefined),n)},"getConnectionStringByTnsNames"),y_=a((s,e)=>s?e:"","combine"),vh=a(({protocol:s,host:e,port:t,sid:n,service:o,httpsProxy:_,httpsProxyPort:T},u)=>{let h=`(DESCRIPTION=
		(ADDRESS=
			(PROTOCOL=${s||"tcp"})
			(HOST=${e})
			(PORT=${t}))
			${y_(_,`(HTTPS_PROXY=${_})`)}
			${y_(T,`(HTTPS_PROXY_PORT=${T})`)}
		(CONNECT_DATA=
					${y_(n,`(SID=${n})`)}
					${y_(o,`(SERVICE_NAME=${o})`)}
		)
	)`;return u({message:"connectionString",connectionString:h}),h},"getConnectionDescription"),Pb=a(async(s,e,t)=>{var _,T,u,h,A,N,P,R,g,p,m;let n={protocol:"",host:"",port:"",service:""};if(["Wallet","TNS"].includes(s.connectionMethod)){let y=oD(s.configDir);if(!L_.existsSync(y))throw new Error("Cannot find tnsnames.ora file. Please, specify tnsnames folder or use Base connection method.");t({message:"Found tnsnames.ora file: "+y});let I=aD(y);if(!I[s.serviceName])throw new Error('Cannot find "'+s.serviceName+'" in tnsnames.ora');let M=(u=(T=(_=I[s.serviceName])==null?void 0:_.data)==null?void 0:T.description)==null?void 0:u.address,L=(P=(N=(A=(h=I[s.serviceName])==null?void 0:h.data)==null?void 0:A.description)==null?void 0:N.connect_data)==null?void 0:P.service_name,v=(m=(p=(g=(R=I[s.serviceName])==null?void 0:R.data)==null?void 0:g.description)==null?void 0:p.connect_data)==null?void 0:m.sid;t({message:"tnsnames.ora",address:M,service:L}),n.protocol=M==null?void 0:M.protocol,n.host=M==null?void 0:M.host,n.port=M==null?void 0:M.port,n.service=L||s.serviceName,n.sid=v}else n.host=s.host,n.port=s.port,n.service=s.serviceName,n.sid=s.sid;let{options:o}=await e.openTunnel({sshAuthMethod:s.sshConfig.ssh_method==="privateKey"?"IDENTITY_FILE":"USER_PASSWORD",sshTunnelHostname:s.sshConfig.ssh_host,sshTunnelPort:s.sshConfig.ssh_port,sshTunnelUsername:s.sshConfig.ssh_user,sshTunnelPassword:s.sshConfig.ssh_password,sshTunnelIdentityFile:s.sshConfig.ssh_key_file,sshTunnelPassphrase:s.sshConfig.ssh_key_passphrase,host:n.host,port:n.port});return vh({...n,host:o.host,port:o.port.toString()},t)},"getSshConnectionString"),Rb=a(async({walletFile:s,tempFolder:e,name:t,connectionMethod:n,TNSpath:o,host:_,port:T,userName:u,userPassword:h,serviceName:A,clientPath:N,clientType:P,queryRequestTimeout:R,authMethod:g,options:p,sid:m,ssh:y,ssh_user:I,ssh_host:M,ssh_port:L,ssh_method:v,ssh_key_file:H,ssh_key_passphrase:te,ssh_password:se,authRole:Ae,mode:V},Y,F)=>{if(Xn)return Xn;let J={thin:"thin",thick:"thick"},Te,Pe,ee={},ye="";n==="Wallet"&&(Te=await fb({walletFile:s,tempFolder:e,name:t})),n==="TNS"&&(Te=o),P==="InstantClient"&&(Pe=N),p!=null&&p.proxy&&(ye=pb(p==null?void 0:p.proxy)),V!==J.thin&&Oo.initOracleClient({libDir:Pe,configDir:Te});let St="";return["Wallet","TNS"].includes(n)?ye?St=mb(Te,A,ye,F):St=A:St=vh({host:_,port:T,sid:m,service:A},F),y&&(Fh=!0,St=await Pb({host:_,port:T,configDir:Te,serviceName:A,sid:m,connectionMethod:n,sshConfig:{ssh_user:I,ssh_host:M,ssh_port:L,ssh_method:v,ssh_key_file:H,ssh_password:se,ssh_key_passphrase:te}},Y,F)),g==="OS"?ee.externalAuth=!0:g==="Kerberos"?(ee.username=u,ee.password=h,ee.externalAuth=!0):(ee.username=u,ee.password=h),Db({connectString:St,username:u,password:h,queryRequestTimeout:R,authRole:Ae})},"connect"),Ib=a(async s=>Xn?(Fh&&(Fh=!1,await s.closeConsumer()),new Promise((e,t)=>{Xn.close(n=>{if(Xn=null,n)return t(n);e()})})):Promise.reject(iD),"disconnect"),Db=a(({connectString:s,username:e,password:t,queryRequestTimeout:n,authRole:o})=>new Promise((_,T)=>{Oo.getConnection({username:e,password:t,connectString:s,privilege:o==="default"?void 0:Oo[o]},(u,h)=>{if(u)return Xn=null,T(u);try{h.callTimeout=Number(n||0),Xn=h,_()}catch(A){T(A)}})}),"authByCredentials"),gb=a(async({includeSystemCollection:s,schemaName:e},t)=>{let n="SELECT USERNAME FROM ALL_USERS",o,_="";return e&&(_=`USERNAME = '${e}'`),s?o=`${n}${_?` WHERE ${_}`:""}`:o=`${n} WHERE ORACLE_MAINTAINED = 'N'${_?` AND ${_}`:""}`,await Tr(o).catch(T=>(t.info({message:"Cannot retrieve schema names"}),t.error(T),[]))},"getSchemaNames"),Cb=a(s=>Je.reduce(s,(e,t)=>({...e,[t[0]]:[...e[t[0]]||[],t[1]]}),{}),"pairToObj"),w_=a((s,e,t)=>{let n="";return t&&(n=`T.OWNER = '${t}'`),Tr(e?`${s}${n?` WHERE ${n}`:""}`:`${s} INNER JOIN ALL_USERS U ON T.OWNER = U.USERNAME WHERE U.ORACLE_MAINTAINED = 'N'${n?` AND ${n}`:""}`)},"selectEntities"),Ob=a(({includeSystemCollection:s,schemaName:e})=>w_("SELECT T.OWNER, T.TABLE_NAME FROM ALL_TABLES T",s,e),"tableNamesByUser"),yb=a(({includeSystemCollection:s,schemaName:e})=>w_("SELECT T.OWNER, T.TABLE_NAME FROM ALL_EXTERNAL_TABLES T",s,e),"externalTableNamesByUser"),Lb=a(({includeSystemCollection:s,schemaName:e})=>w_("SELECT T.OWNER, T.VIEW_NAME || ' (v)' FROM ALL_VIEWS T",s,e),"viewNamesByUser"),wb=a(({includeSystemCollection:s,schemaName:e})=>w_("SELECT T.OWNER, T.MVIEW_NAME || ' (v)' FROM ALL_MVIEWS T",s,e),"materializedViewNamesByUser"),Bb=a(async(s,e)=>{let t=await wb(s).catch(h=>(e.info({message:"Cannot retrieve materialized views"}),e.error(h),[]));e.info({materializedViews:t});let n=t.map(h=>Je.join(h,".").slice(0,-4)),o=await Ob(s).then(h=>Je.reject(h,A=>n.includes(Je.join(A,".")))).catch(h=>(e.info({message:"Cannot retrieve tables"}),e.error(h),[]));e.info({tables:o});let _=await yb(s).catch(h=>(e.info({message:"Cannot retrieve external tables"}),e.error(h),[]));e.info({externalTables:_});let T=await Lb(s).catch(h=>(e.info({message:"Cannot retrieve views"}),e.error(h),[]));e.info({views:T});let u=Cb([...o,..._,...T,...t]);return Object.keys(u).reduce((h,A)=>[...h,{dbName:A,dbCollections:u[A],isEmpty:!u[A].length}],[])},"getEntitiesNames"),Tr=a((s,e={},t=[])=>Xn?new Promise((n,o)=>{Xn.execute(s,t,e,(_,T)=>{if(_)return o(_);n(T.rows)})}):Promise.reject(iD),"execute"),Ub=a(async s=>{var n,o;let e=["12c","18c","19c","21c","23ai"],t="21c";try{let _=await Tr("SELECT VERSION FROM PRODUCT_COMPONENT_VERSION WHERE product LIKE 'Oracle Database%'");s.log("info",_,"DB Version");let T=(o=(n=_==null?void 0:_[0])==null?void 0:n[0])==null?void 0:o.split(".").shift();return T&&e.find(h=>h.startsWith(T))||t}catch(_){return s.log("error",{message:_.message,stack:_.stack},"Error of getting DB Version"),t}},"getDbVersion"),Yb=a(s=>s.slice(-4)===" (v)","isView"),Mb=a(s=>{let e=Je.partition(s,Yb);return{views:e[0].map(t=>t.slice(0,-4)),tables:e[1]}},"splitEntityNames"),kh=a(()=>Tr(`BEGIN
		DBMS_METADATA.SET_TRANSFORM_PARAM(DBMS_METADATA.SESSION_TRANSFORM,'SQLTERMINATOR', TRUE);
	END;`),"setSQLTerminator"),xb=a(async(s,e,t)=>{var n;try{await kh();let o=await Tr(`
			SELECT JSON_OBJECT(
			'tableDDL' VALUE DBMS_METADATA.GET_DDL('TABLE', T.TABLE_NAME, T.OWNER),
			'countOfRecords' VALUE (SELECT COUNT(*) FROM ALL_TABLES WHERE TABLE_NAME='${s}'),
			'indexDDLs' VALUE (
				SELECT JSON_ARRAYAGG(DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME, OWNER) RETURNING CLOB)
				FROM ALL_INDEXES
				WHERE TABLE_OWNER=T.OWNER
					AND TABLE_NAME=T.TABLE_NAME
					AND INDEX_NAME NOT IN (
						SELECT CONSTRAINT_NAME
						FROM ALL_CONSTRAINTS
						WHERE CONSTRAINT_TYPE='P'
						AND OWNER=T.OWNER
						AND TABLE_NAME=T.TABLE_NAME
					)
				),
			'jsonColumns' VALUE (
				SELECT JSON_ARRAYAGG(JSON_OBJECT('name' VALUE COLUMN_NAME, 'datatype' VALUE DATA_TYPE) RETURNING CLOB)
				FROM ALL_TAB_COLUMNS
				WHERE TABLE_NAME=T.TABLE_NAME
				AND OWNER=T.OWNER
				AND DATA_TYPE IN ('CLOB', 'BLOB', 'NVARCHAR2', 'JSON')
			),
			'tableComment' VALUE (
				SELECT COMMENTS
				FROM ALL_TAB_COMMENTS
				WHERE OWNER = T.OWNER AND TABLE_NAME = T.TABLE_NAME AND COMMENTS IS NOT NULL
			),
			'columnComments' VALUE (
				SELECT JSON_ARRAYAGG(JSON_OBJECT('name' VALUE COLUMN_NAME, 'comment' VALUE COMMENTS) RETURNING CLOB)
				FROM ALL_COL_COMMENTS
				WHERE OWNER = T.OWNER AND TABLE_NAME = T.TABLE_NAME  AND COMMENTS IS NOT NULL
			) RETURNING CLOB
			)
			FROM ALL_TABLES T
			WHERE T.OWNER='${e}' AND T.TABLE_NAME='${s}'
		`),_=await((n=Je.first(Je.first(o)))==null?void 0:n.getData());try{let T=JSON.parse(_);t.log("info",T,`Getting DDL from "${e}"."${s}"`);let u=T.tableComment?`COMMENT ON TABLE ${Rs(e)}.${Rs(s)} IS ${sD(T.tableComment)};`:"",h=Je.map(T.columnComments,N=>`COMMENT ON COLUMN ${Rs(e)}.${Rs(s)}.${Rs(N.name)}  IS ${sD(N.comment)};`);return{ddl:`${T.tableDDL}
				${Je.join(T.indexDDLs,`
`)}
				${u}

				${Je.join(h,`
`)}`,jsonColumns:T.jsonColumns,countOfRecords:T.countOfRecords}}catch(T){return t.log("error",{message:`Cannot parse query result: 

`+_,error:{message:T.message,stack:T.stack,err:Je.omit(T,["message","stack"])}},`Getting DDL from "${e}"."${s}"`),{ddl:"",jsonColumns:[],countOfRecords:0}}}catch(o){if((o==null?void 0:o.errorNum)===31603&&!await _D(t))throw o;return t.log("error",{message:"Cannot get DDL for table: "+s,error:{message:o.message,stack:o.stack,err:Je.omit(o,["message","stack"])}},`Getting DDL from "${e}"."${s}"`),{ddl:"",jsonColumns:[],countOfRecords:0}}},"getDDL"),Vb=a(s=>Object.keys(s).reduce(async(e,t)=>{let n=await e,o=s[t];return o instanceof Oo.Lob&&(o=await o.getData()),o instanceof Buffer&&(o=o.toString()),n[t]=o,n},Promise.resolve({})),"readLobs"),bb=a(async s=>await s.reduce(async(e,t)=>{let n=await e,o=await Vb(t);return n.concat(o)},Promise.resolve([])),"readRecordsValues"),Rs=a(s=>/[\s\da-z]/.test(s)?`"${s}"`:s,"escapeName"),sD=a(s=>`'${s.replaceAll("'","''")}'`,"escapeComment"),Fb=a((s,e)=>e.map(t=>s.reduce((n,o)=>(n[o]=t[o],n),{})),"replaceNames"),vb=a(async({tableName:s,limit:e,jsonColumns:t,schema:n})=>{let o=Je.map(t,u=>u.name),_=await Tr(`SELECT ${o.map(u=>Rs(u)).join(", ")} FROM ${Rs(n)}.${Rs(s)} FETCH NEXT ${e} ROWS ONLY`,{outFormat:Oo.OBJECT});return await bb(Fb(o,_))},"selectRecords"),kb=a((s,e)=>{let t={number:"number",boolean:"boolean",string:"string"};return s.reduce((n,o)=>{if(n)return n;let _=o[e];return Array.isArray(_)?"array":typeof _=="object"?_?"object":"null":t[typeof _]??n},"")},"getJsonType"),qb=a(s=>`json${s.charAt(0).toUpperCase()}${s.slice(1)}`,"getJsonTypeName"),Gb=a(async(s,e)=>{let t={CLOB:{type:"lobs",mode:"clob"},BLOB:{type:"lobs",mode:"blob"},NVARCHAR2:{type:"char",mode:"nvarchar2"},JSON:{type:"json"}};return{properties:s.reduce((o,_)=>{let T=_.name,u=_.datatype,h=t[u];if(!h)return o;let A=kb(e,T);if(!A)return o;let N=qb(A);return{...o,[T]:{...h,subtype:A,childType:"json",type:N}}},{})}},"getJsonSchema"),Hb=a(async(s,e,t)=>{try{let n=await Kb(s);if(await kh(),n){t.log("info",{viewName:s,schema:e},'Is materialized view"');let T=await Tr(`SELECT JSON_OBJECT(
					'viewDDL' VALUE DBMS_METADATA.GET_DDL('MATERIALIZED_VIEW', MV.MVIEW_NAME, MV.OWNER),
					'indexDDLs' VALUE (
						SELECT JSON_ARRAYAGG(DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME, OWNER) RETURNING CLOB)
						FROM ALL_INDEXES
						WHERE TABLE_OWNER=MV.OWNER
							AND TABLE_NAME=MV.MVIEW_NAME
							AND INDEX_NAME NOT IN (
								SELECT CONSTRAINT_NAME
								FROM ALL_CONSTRAINTS
								WHERE CONSTRAINT_TYPE='P'
								AND OWNER=MV.OWNER
								AND TABLE_NAME=MV.MVIEW_NAME
							)
						)
					)
					FROM ALL_MVIEWS MV
					WHERE MV.OWNER='${e}' AND MV.MVIEW_NAME='${s}'`),u=Je.first(Je.first(T)),h=JSON.parse(u);return t.log("info",{viewName:s,schema:e},`Getting DDL from "${e}"."${s}"`),`${h.viewDDL}
${Je.join(h.indexDDLs,`
`)}`}let o=await Tr(`SELECT DBMS_METADATA.GET_DDL('VIEW', VIEW_NAME, OWNER) FROM ALL_VIEWS WHERE VIEW_NAME='${s}'`);return await Je.first(Je.first(o)).getData()}catch(n){if((n==null?void 0:n.errorNum)===31603&&!await _D(t))throw n;return t.log("error",{message:"Cannot get DDL for view: "+s,error:{message:n.message,stack:n.stack,err:Je.omit(n,["message","stack"])}},"Getting DDL"),""}},"getViewDDL"),Kb=a(async s=>{await kh();let e=await Tr(`SELECT * FROM ALL_MVIEWS WHERE MVIEW_NAME = '${s}'`);return!Je.isEmpty(e)},"checkEntityMaterializedView"),_D=a(async s=>{var e;try{let t=await Tr("SELECT sys_context('USERENV', 'CURRENT_USER') FROM dual"),n=Je.first(Je.first(t));return((e=await Tr(`SELECT GRANTED_ROLE FROM USER_ROLE_PRIVS WHERE USERNAME = '${n}'`))==null?void 0:e.map(([_])=>_)).includes("SELECT_CATALOG_ROLE")}catch(t){return s.log("error",{message:"Checking user privileges error",error:{message:t.message,stack:t.stack,err:Je.omit(t,["message","stack"])}},"Getting DDL"),!1}},"checkUserHaveRequiredRole"),Wb=a(s=>{s.log("info",{TNS_ADMIN:process.env.TNS_ADMIN??"",ORACLE_HOME:process.env.ORACLE_HOME??"",LD_LIBRARY_PATH:process.env.LD_LIBRARY_PATH??"",ORACLE_BASE:process.env.ORACLE_BASE??""},"Environment variables")},"logEnvironment"),$b=a(async s=>{try{let e=await Tr("SELECT OWNER, SYNONYM_NAME, TABLE_OWNER, TABLE_NAME, DB_LINK FROM ALL_SYNONYMS WHERE ORIGIN_CON_ID > 1");if(Je.isEmpty(e))return[];let t=e.map(([T,u,h,A])=>({synonymSchemaName:h,synonymPublic:T==="PUBLIC",synonymName:u,synonymEntityId:A}));s.log("info",t,"Getting synonyms");let n=await zb(),o=t.map(T=>{var A;let u=n.find(({name:N})=>N===T.synonymName),h=!((A=u==null?void 0:u.ddl)!=null&&A.toUpperCase().includes("NONEDITIONABLE"));return{...T,synonymEditionable:h?"EDITIONABLE":"NONEDITIONABLE"}});return Je.groupBy(o,"synonymSchemaName")}catch(e){s.log("error",{message:"Cannot get synonyms",error:{message:e.message,stack:e.stack,err:Je.omit(e,["message","stack"])}},"Getting synonyms")}},"getDbSynonyms"),zb=a(async()=>{let s=await Tr("SELECT SYNONYM_NAME, DBMS_METADATA.GET_DDL('SYNONYM', SYNONYM_NAME, OWNER) FROM ALL_SYNONYMS WHERE ORIGIN_CON_ID > 1");return await Promise.all(s.map(async([t,n])=>{let o=await n.getData();return{name:t,ddl:o}}))},"getSynonymsDDL");cD.exports={connect:Rb,disconnect:Ib,getEntitiesNames:Bb,getSchemaNames:gb,splitEntityNames:Mb,getDDL:xb,getJsonSchema:Gb,getViewDDL:Hb,getDbVersion:Ub,selectRecords:vb,logEnvironment:Wb,execute:Tr,getDbSynonyms:$b,getSchemaSequences:db({execute:Tr})}});var ED=U((MG,uD)=>{"use strict";var B_=Ct(),lD=vA(),vr=qh();uD.exports={async connect(s,e,t,n){let o=n.require("@hackolade/ssh-service");lD("Connect to instance",s,e),vr.logEnvironment(e);try{await vr.connect(s,o,_=>{e.log("info",_,"Connection")}),t()}catch(_){throw TD(e,_,t),_}},async disconnect(s,e,t,n){try{let o=n.require("@hackolade/ssh-service");await vr.disconnect(o),t(null)}catch(o){TD(e,o,t)}},async testConnection(s,e,t,n){try{await this.connect(s,e,()=>{},n),t(null)}catch(o){e.log("error",{message:o.message,stack:o.stack,error:o},"Test connection"),t({message:o.message,stack:o.stack})}},async getSchemaNames(s,e,t,n){try{lD("Get schemas",s,e),await this.connect(s,e,()=>{},n);let o=await vr.getSchemaNames();return e.log("info",o,"All schemas list",s.hiddenKeys),t(null,o)}catch(o){return e.log("error",{message:o.message,stack:o.stack,error:o},"Get schemas"),t({message:o.message,stack:o.stack})}},async getDbCollectionsNames(s,e,t,n){try{await this.connect(s,e,()=>{},n);let o=await vr.getEntitiesNames(s,{info:_=>{e.log("info",_,"Retrieving table and view names")},error:_=>{e.log("error",{message:_.message,stack:_.stack,error:_},"Retrieving databases and tables information")}});t(null,o)}catch(o){e.log("error",{message:o.message,stack:o.stack,error:o},"Retrieving databases and tables information"),t({message:o.message,stack:o.stack})}},async getDbCollectionsData(s,e,t,n){try{let o=a(({message:P,containerName:R="",entityName:g=""})=>{e.log("info",{message:P,schema:R,table:g},"Retrieving schema"),e.progress({message:P,containerName:R,entityName:g})},"progress");e.log("info",s,"Retrieving schema",s.hiddenKeys),o({message:"Start reverse-engineering process",containerName:"",entityName:""});let _=s.collectionData,T=_.collections,u=_.dataBaseNames,h=await vr.getDbVersion(e),A=await vr.getDbSynonyms(e),N=await u.reduce(async(P,R)=>{let g=await P,p=vr.splitEntityNames(T[R]),m=await vr.getSchemaSequences({schema:R,logger:e}),y=await p.tables.reduce(async(L,v)=>{let H=await L;o({message:"Start getting data from table",containerName:R,entityName:v});let{ddl:te,countOfRecords:se,jsonColumns:Ae}=await vr.getDDL(v,R,e),V=[],Y={};if(!B_.isEmpty(Ae)){let F=Xb(se,s.recordSamplingSettings);o({message:`Fetching columns for JSON schema inference: ${JSON.stringify(Ae)}`,containerName:R,entityName:v}),V=await vr.selectRecords({tableName:v,limit:F,jsonColumns:Ae,schema:R}),Y=await vr.getJsonSchema(Ae,V)}return o({message:"Data retrieved successfully",containerName:R,entityName:v}),H.concat({dbName:R,collectionName:v,entityLevel:{},documents:V,views:[],ddl:{script:te,type:"oracle",takeAllDdlProperties:!0},emptyBucket:!1,validation:{jsonSchema:Y},bucketInfo:{database:R,synonyms:(A==null?void 0:A[R])||[],sequences:m}})},Promise.resolve([])),I=await p.views.reduce(async(L,v)=>{let H=await L;o({message:"Start getting data from view",containerName:R,entityName:v});let te=await vr.getViewDDL(v,R,e);return o({message:"Data retrieved successfully",containerName:R,entityName:v}),H.concat({name:v,data:{},ddl:{script:te,type:"oracle",takeAllDdlProperties:!0}})},Promise.resolve([]));if(B_.isEmpty(I))return[...g,...y];let M={dbName:R,entityLevel:{},views:I,emptyBucket:!1,bucketInfo:{indexes:[],database:R,synonyms:(A==null?void 0:A[R])||[],sequences:m}};return[...g,...y,M]},Promise.resolve([]));o({message:"Start processing the retrieved data in the application ..."}),t(null,N.filter(Boolean),{version:h})}catch(o){if((o==null?void 0:o.errorNum)===31603)return e.log("error",{message:"Missing required role \u201CSELECT_CATALOG_ROLE\u201D to perform this operation",stack:o.stack,error:o},"Reverse-engineering process failed"),t({message:"Missing required role \u201CSELECT_CATALOG_ROLE\u201D to perform this operation",type:"simpleError"});e.log("error",{message:o.message,stack:o.stack,error:o},"Reverse-engineering process failed"),t({message:o.message,stack:o.stack})}}};var TD=a((s,e,t)=>{let n=B_.isString(e)?e:B_.get(e,"message","Reverse Engineering error");s.log("error",{error:e},"Reverse Engineering error"),t(n)},"handleError"),Xb=a((s,e)=>{if(e.active==="absolute")return Number(e.absolute.value);let t=Math.ceil(s*e.relative.value/100);return Math.min(t,e.maxValue)},"getSampleDocSize")});var SD=U((VG,hD)=>{"use strict";var Gh=qh(),Hh=Ct(),Qb=a(async(s,e,t)=>{let n=t.require("async"),o=t.require("@hackolade/ssh-service");Gh.logEnvironment(e),await Gh.connect(s,o,u=>{e.log("info",u,"Connection")});let _=s.script.split(`

`).filter(Boolean).map(u=>Hh.trim(Hh.trim(Hh.trim(u),"/"),";")),T;if(await n.mapSeries(_,async u=>{try{u.endsWith("END")&&(u+=";");let h="Query: "+u.split(`
`).shift().substr(0,150);e.progress({message:h}),e.log("info",{message:h},"Apply to instance"),await Gh.execute(u)}catch(h){let A=h.errorNum===955,N=h.errorNum===1920;if(A||N)return;T=h,e.progress({message:"[color:red]Not executed..."}),e.log("error",{message:h.message,stack:h.stack,query:u},"Error applying to instance")}}),T)throw new Error(`Not all statements executed successfully.
Please, see HackoladeFE.log for more details.`)},"applyToInstance");hD.exports={applyToInstance:Qb}});var rn=U((FG,ND)=>{"use strict";var $h=class $h{script;isDropScript};a($h,"ModificationScript");var Kh=$h,zh=class zh{isActivated;scripts;static getInstances(e,t,n){return(e||[]).filter(Boolean).map(o=>({isActivated:t,scripts:[{isDropScript:n,script:o}]}))}static getInstance(e,t,n){var o;if((o=e==null?void 0:e.filter(Boolean))!=null&&o.length)return{isActivated:t,scripts:e.filter(Boolean).map(_=>({isDropScript:n,script:_}))}}static getDropAndRecreateInstance(e,t,n){let o=[];if(e&&o.push({isDropScript:!0,script:e}),t&&o.push({isDropScript:!1,script:t}),!!(o!=null&&o.length))return{isActivated:n,scripts:o}}};a(zh,"AlterScriptDto");var Wh=zh;ND.exports={ModificationScript:Kh,AlterScriptDto:Wh}});var xe=U((qG,fD)=>{"use strict";var kG=Ct();fD.exports=s=>{let e=a(Y=>s.get(Y,"[0].code")||s.get(Y,"[0].name",""),"getDbName"),t=a(Y=>Y&&(Y.code||Y.collectionName)||"","getEntityName"),n=a(Y=>Y&&(Y.code||Y.name)||"","getViewName"),o=a(Y=>Y&&(Y.code||Y.name)||"","getBucketName"),_=a(Y=>({...s.get(Y,"[0]",{}),name:e(Y)}),"getDbData"),T=a(Y=>s.get(Y,"[0].viewOn"),"getViewOn"),u=a(Y=>F=>F.primaryTableId===Y&&F.primaryTableId!==F.foreignTableId,"isRecursiveRelationship"),h=a(Y=>Object.keys(Y).reduce((F,J)=>{let Te=Y[J].filter(Pe=>{let ee=Y[Pe.primaryTableId];return Array.isArray(ee)?!ee.some(u(J)):!0});return s.isEmpty(Te)?F:{...F,[J]:Te}},{}),"rejectRecursiveRelationships"),A=a(Y=>Object.keys(Y).reduce((F,J)=>{let Te=Y[J].filter(Pe=>{let ee=Y[Pe.primaryTableId];return Array.isArray(ee)?ee.some(u(J)):!1});return F.concat(Te)},[]),"filterRecursiveRelationships"),N=a((Y,F="	")=>Y.split(`
`).map(J=>F+J).join(`
`),"tab"),P=a((Y,F)=>Object.keys(Y).map(s.toLower).includes(s.toLower(F)),"hasType"),R=a(Y=>Object.entries(Y).filter(([F,J])=>!s.isNil(J)).reduce((F,[J,Te])=>({...F,[J]:Te}),{}),"clean"),g=a(Y=>Y.every(F=>s.get(F,"isActivated",!0)),"checkAllKeysActivated"),p=a(Y=>Y.length?Y.every(F=>!s.get(F,"isActivated",!0)):!1,"checkAllKeysDeactivated"),m=a((Y,F)=>{let J=Y.filter(Pe=>s.get(Pe,"isActivated",!0)).map(F),Te=Y.filter(Pe=>!s.get(Pe,"isActivated",!0)).map(F);return{activatedItems:J,deactivatedItems:Te}},"divideIntoActivatedAndDeactivated"),y=a((Y,{isActivated:F,isPartOfLine:J,inlineComment:Te="--"})=>F!==!1?Y:J?"/* "+Y+" */":Y.includes(`
`)?`/*
`+Y+` */
`:Te+" "+Y,"commentIfDeactivated"),I=a((Y,F="'",J="'")=>{let Te=Y[0];return Y[Y.length-1]===F&&Te===J?Y:`${F}${Y}${J}`},"wrap"),M=a(Y=>`"${Y}"`,"wrapInQuotes"),L=a(Y=>`'${Y}'`,"wrapComment"),v=a((Y,F)=>F?`${M(F)}.${M(Y)}`:M(Y),"getNamePrefixedWithSchemaName"),H=a((Y,F)=>F.some(J=>(Y==null?void 0:Y.oldField[J])!==(Y==null?void 0:Y.newField[J])),"checkFieldPropertiesChanged"),te=a(({name:Y})=>M(Y),"columnMapToString");return{getDbName:e,getBucketName:o,getDbData:_,getEntityName:t,getViewName:n,getViewOn:T,rejectRecursiveRelationships:h,filterRecursiveRelationships:A,tab:N,hasType:P,clean:R,checkAllKeysActivated:g,checkAllKeysDeactivated:p,divideIntoActivatedAndDeactivated:m,commentIfDeactivated:y,wrap:I,wrapComment:L,wrapInQuotes:M,getNamePrefixedWithSchemaName:v,checkFieldPropertiesChanged:H,getColumnsList:a((Y,F,J,Te=te)=>{var ye;let Pe=m(Y,Te),ee=(ye=Pe==null?void 0:Pe.deactivatedItems)!=null&&ye.length?y(Pe.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"";return!F&&J?" ("+Pe.activatedItems.join(", ")+ee+")":" ("+Y.map(Te).join(", ")+")"},"getColumnsList"),escapeSingleQuote:a(Y=>Y.replaceAll("'","''"),"escapeSingleQuote"),getGroupItemsByCompMode:a(({newItems:Y=[],oldItems:F=[]})=>{let J=Y.filter(ee=>!F.some(ye=>ye.id===ee.id)),Te=[],Pe=[];return F.forEach(ee=>{let ye=Y.find(St=>St.id===ee.id);ye?s.isEqual(ye,ee)||Pe.push(ye):Te.push(ee)}),{added:J,removed:Te,modified:Pe}},"getGroupItemsByCompMode")}}});var mD=U((HG,pD)=>{"use strict";var{AlterScriptDto:AD}=rn(),dD=Ct(),Jb=a(s=>e=>{let{wrapInQuotes:t}=xe()(dD),o=`CREATE USER ${t(e)} NO AUTHENTICATION;`;return AD.getInstance([o],!0,!1)},"getAddContainerScriptDto"),jb=a(s=>e=>{let{wrapInQuotes:t}=xe()(dD),o=`DROP USER ${t(e)};`;return AD.getInstance([o],!0,!0)},"getDeleteContainerScriptDto");pD.exports={getAddContainerScriptDto:Jb,getDeleteContainerScriptDto:jb}});var RD=U((WG,PD)=>{"use strict";var{AlterScriptDto:Zb}=rn(),eF=a((s,e)=>t=>{var P;let{checkFieldPropertiesChanged:n,wrapInQuotes:o,getNamePrefixedWithSchemaName:_,getEntityName:T}=xe()(s),u={...t,...s.omit(t==null?void 0:t.role,"properties")||{}},h=T(u),A=(P=u.compMod)==null?void 0:P.keyspaceName,N=_(h,A);return s.toPairs(t.properties).filter(([R,g])=>n(g.compMod,["type","mode"])).map(([R,g])=>`ALTER TABLE ${N} MODIFY (${o(R)} ${s.toUpper(g.compMod.newField.mode||g.compMod.newField.type)});`).map(R=>Zb.getInstance([R],!0,!1))},"getUpdateTypesScriptDtos");PD.exports={getUpdateTypesScriptDtos:eF}});var DD=U((zG,ID)=>{"use strict";var{AlterScriptDto:tF}=rn(),rF=a((s,e)=>t=>{var P;let{checkFieldPropertiesChanged:n,getEntityName:o,getNamePrefixedWithSchemaName:_,wrapInQuotes:T}=xe()(s),u={...t,...s.omit(t==null?void 0:t.role,"properties")||{}},h=o(u),A=(P=u.compMod)==null?void 0:P.keyspaceName,N=_(h,A);return s.values(t.properties).filter(R=>n(R.compMod,["name"])).map(R=>{let g=T(R.compMod.oldField.name),p=T(R.compMod.newField.name);return e.renameColumn(N,g,p)}).map(R=>tF.getInstance([R],!0,!1))},"getRenameColumnScriptDtos");ID.exports={getRenameColumnScriptDtos:rF}});var U_=U((QG,gD)=>{"use strict";var Jh=class Jh{type;keyId};a(Jh,"AlterIndexKeyDto");var Xh=Jh,jh=class jh{id;indxName;isActivated;ifNotExist;indxType;indxKey;column_expression;tablespace;index_properties;index_attributes;index_compression;logging_clause;indxComments};a(jh,"AlterIndexDto");var Qh=jh;gD.exports={AlterIndexDto:Qh,AlterIndexKeyDto:Xh}});var OD=U((ZG,CD)=>{"use strict";var{AlterIndexDto:jG}=U_(),iS=class iS{id;constraintName;indexStorageParameters;indexTablespace;indexInclude};a(iS,"AlterCollectionColumnPrimaryKeyOptionDto");var Zh=iS,oS=class oS{type;isActivated;primaryKey;unique;mode;length;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;primaryKeyOptions;triggerUpdateColumns;compMod;GUID};a(oS,"AlterCollectionColumnDto");var eS=oS,aS=class aS extends Zh{compositePrimaryKey};a(aS,"AlterCollectionRoleCompModPKDto");var tS=aS,_S=class _S{new;old};a(_S,"AlterCollectionRoleCompModPrimaryKey");var rS=_S,cS=class cS{id;type;collectionName;properties;definitions;isActivated;additionalProperties;memory_optimized;collectionUsers;ifNotExist;on_commit;table_tablespace_name;bucketId;compMod;name;roleType;patternProperties};a(cS,"AlterCollectionRoleDto");var nS=cS,lS=class lS{type;isActivated;unique;subtype;properties;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;triggerUpdateColumns;role;GUID};a(lS,"AlterCollectionDto");var sS=lS;CD.exports={AlterCollectionDto:sS,AlterCollectionRoleDto:nS,AlterCollectionColumnDto:eS,AlterCollectionRoleCompModPrimaryKey:rS,AlterCollectionRoleCompModPKDto:tS}});var BD=U((nH,wD)=>{"use strict";var{AlterScriptDto:Bi}=rn(),{AlterCollectionDto:tH}=OD(),{AlterIndexDto:rH}=U_(),{wrapInQuotes:TS}=xe()(),nF=["index_compression","tablespace","logging_clause"],sF=["indxType","indxKey","column_expression","index_properties","index_attributes"],iF=a(({_:s})=>({oldIndex:e,newIndex:t})=>sF.some(n=>!s.isEqual(e[n],t[n])),"shouldDropAndRecreateIndex"),oF=a(({oldIndex:s,newIndex:e})=>nF.some(t=>s[t]!==e[t]),"shouldAlterIndexRebuild"),uS=a(({oldIndex:s,newIndex:e})=>s.id===e.id||s.indxName===e.indxName,"areOldIndexDtoAndNewIndexDtoDescribingSameDatabaseIndex"),yD=a(({index:s,collection:e})=>{var t;return(t=s==null?void 0:s.indxKey)!=null&&t.length?{...s,indxKey:s.indxKey.map(n=>{var h,A,N,P,R,g;if(!(n!=null&&n.keyId))return n;let o=Object.entries(((h=e==null?void 0:e.role)==null?void 0:h.properties)||(e==null?void 0:e.properties)||{}).map(([p,m])=>({...m,name:p})),_=(((N=(A=e==null?void 0:e.role)==null?void 0:A.compMod)==null?void 0:N.oldProperties)||[]).map(p=>({...p,GUID:p.id})),u=(o.length>0?o:_).find(p=>(p==null?void 0:p.GUID)===(n==null?void 0:n.keyId));return u?(P=u==null?void 0:u.compMod)!=null&&P.newField?{...n,name:((g=(R=u==null?void 0:u.compMod)==null?void 0:R.newField)==null?void 0:g.name)||null}:{...n,name:u.name}:n})}:s},"addNameToIndexKey"),aF=a(({_:s,ddlProvider:e})=>({collection:t})=>{var T,u,h,A,N,P;let n=((h=(u=(T=t==null?void 0:t.role)==null?void 0:T.compMod)==null?void 0:u.Indxs)==null?void 0:h.new)||[];return(((P=(N=(A=t==null?void 0:t.role)==null?void 0:A.compMod)==null?void 0:N.Indxs)==null?void 0:P.old)||[]).filter(R=>!n.find(p=>uS({oldIndex:R,newIndex:p}))).map(R=>_F({ddlProvider:e})({index:R,collection:t}))},"getDeletedIndexesScriptDtos"),_F=a(({ddlProvider:s})=>({index:e})=>{let t=TS(e.indxName),n=s.dropIndex({name:t});return Bi.getInstance([n],e.isActivated,!0)},"getDeleteIndexScriptDto"),LD=a(({_:s,ddlProvider:e})=>({collection:t})=>{var T,u,h,A;let n=((T=t==null?void 0:t.role)==null?void 0:T.Indxs)||[],o=((A=(h=(u=t==null?void 0:t.role)==null?void 0:u.compMod)==null?void 0:h.Indxs)==null?void 0:A.old)||[];return n.filter(N=>!o.find(R=>uS({oldIndex:R,newIndex:N}))).map(N=>cF({ddlProvider:e})({index:N,collection:t}))},"getAddedIndexesScriptDtos"),cF=a(({ddlProvider:s})=>({index:e,collection:t})=>{var T,u,h,A,N,P,R;let n=yD({index:e,collection:t}),o=((h=(u=(T=t==null?void 0:t.role)==null?void 0:T.compMod)==null?void 0:u.collectionName)==null?void 0:h.new)||((A=t==null?void 0:t.role)==null?void 0:A.name),_=s.createIndex(o,{...n,schemaName:(R=(P=(N=t==null?void 0:t.role)==null?void 0:N.compMod)==null?void 0:P.bucketProperties)==null?void 0:R.name});return Bi.getInstance([_],e.isActivated,!1)},"getAddIndexScriptDto"),lF=a(({_:s,ddlProvider:e})=>({collection:t})=>{var T,u,h,A,N,P;let n=((h=(u=(T=t==null?void 0:t.role)==null?void 0:T.compMod)==null?void 0:u.Indxs)==null?void 0:h.new)||[],o=((P=(N=(A=t==null?void 0:t.role)==null?void 0:A.compMod)==null?void 0:N.Indxs)==null?void 0:P.old)||[];return n.map(R=>{let g=o.find(p=>uS({oldIndex:p,newIndex:R}));if(g)return{newIndex:R,oldIndex:g}}).filter(Boolean).flatMap(R=>TF({_:s,ddlProvider:e})({modifiedIndex:R,collection:t}))},"getModifiedIndexesScriptDtos"),TF=a(({_:s,ddlProvider:e})=>({modifiedIndex:{oldIndex:t,newIndex:n},collection:o})=>{var A,N,P,R,g,p;let _=TS(t.indxName),T=TS(n.indxName),u=[];if(iF({_:s})({oldIndex:t,newIndex:n})){let m=Bi.getInstance([e.dropIndex({name:_})],n.isActivated,!0),y=yD({index:n,collection:o}),I=Bi.getInstance([e.createIndex((P=(N=(A=o==null?void 0:o.role)==null?void 0:A.compMod)==null?void 0:N.collectionName)==null?void 0:P.new,{...y,schemaName:(p=(g=(R=o==null?void 0:o.role)==null?void 0:R.compMod)==null?void 0:g.bucketProperties)==null?void 0:p.name})],n.isActivated,!1);return u.push(m,I),u}if(t.indxName!==n.indxName){let m=Bi.getInstance([e.alterIndexRename({oldName:_,newName:T})],n.isActivated,!1);u.push(m)}if(oF({oldIndex:t,newIndex:n})){let m=Bi.getInstance([e.alterIndexRebuild({name:T,indexData:n})],n.isActivated,!1);u.push(m)}return u},"getModifyIndexScriptDto"),uF=a(({_:s,ddlProvider:e})=>({collection:t})=>{let n=aF({_:s,ddlProvider:e})({collection:t}),o=LD({_:s,ddlProvider:e})({collection:t}),_=lF({_:s,ddlProvider:e})({collection:t});return[...n,...o,..._].filter(Boolean)},"getModifyIndexesScriptDtos");wD.exports={getModifyIndexesScriptDtos:uF,getAddedIndexesScriptDtos:LD}});var yo=U((iH,UD)=>{"use strict";UD.exports=s=>{let e=Ct(),{createColumnDefinition:t}=s.require("@hackolade/ddl-fe-utils"),n=a(_=>_.$ref?_.$ref.split("/").pop():e.toUpper(_.mode||_.childType||_.type),"getType");return{createColumnDefinitionBySchema:a(({name:_,jsonSchema:T,parentJsonSchema:u,ddlProvider:h,schemaData:A,definitionJsonSchema:N})=>t({name:_,jsonSchema:T,parentJsonSchema:u,ddlProvider:h,schemaData:A,definitionJsonSchema:N,getType:n}),"createColumnDefinitionBySchema")}}});var MD=U((aH,YD)=>{"use strict";YD.exports={number:"numeric",string:"nvarchar2",date:"date",timestamp:"timestamp",binary:"raw",boolean:"numeric",document:"bfile",array:"json",objectId:"char",default:"nvarchar2"}});var VD=U((_H,xD)=>{"use strict";xD.exports={character:{type:"char"},"character varying":{type:"varchar"},"char varying":{type:"varchar"},"national char":{type:"nchar"},"national character":{type:"nchar"},"national char varying":{type:"nvarchar2"},"national character varying":{type:"nvarchar2"},"nchar varying":{type:"nvarchar2"},tinyint:{type:"number",precision:5},"small int":{type:"number",precision:5},shortinteger:{type:"number",precision:5},shortint:{type:"number",precision:5},smallint:{type:"number",precision:5},int:{type:"number",precision:10},integer:{type:"number",precision:10},shortdecimal:{type:"number",precision:5,scale:0},decimal:{type:"number",precision:5,scale:0},longinteger:{type:"number",precision:20},bigint:{type:"number",precision:20},int8:{type:"number",precision:20},bit:{type:"number",precision:1},real:{type:"float",length:23},"double precision":{type:"number"},"small money":{type:"float",precision:16,scale:2},money:{type:"float",precision:16,scale:2},"long varchar":{type:"long"},text:{type:"long"},ntext:{type:"long"},uniqueidentifier:{type:"char",length:36},uuid:{type:"char",length:36},datetime:{type:"date"},"small datetime":{type:"date"},image:{type:"long raw"},binary:{type:"raw"},varbinary:{type:"raw"},string:{type:"nvarchar2"}}});var ES=U((cH,bD)=>{"use strict";bD.exports={createSchema:"CREATE USER${ifNotExists} ${schemaName} NO AUTHENTICATION",comment:"\nCOMMENT ON ${object} ${objectName} IS ${comment};\n",createTable:"CREATE${tableType} TABLE${ifNotExists} ${name}        ${tableProps}        \n${options}",createTableProps:"${columnDefinitions}${keyConstraints}${checkConstraints}${foreignKeyConstraints}",columnDefinition:"${name}${type}${default}${encrypt}${constraints}",createKeyConstraint:"${constraintName}${keyType}${columns}${options}",createForeignKeyConstraint:"${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${onDelete}",checkConstraint:"${name}CHECK (${expression})",createForeignKey:"ALTER TABLE ${foreignTable} ADD CONSTRAINT ${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${onDelete};",dropForeignKey:"ALTER TABLE ${tableName} DROP CONSTRAINT ${fkConstraintName};",createIndex:"CREATE${indexType} INDEX${ifNotExists}${name} ON ${tableName}${keys}${options};\n",dropIndex:"DROP INDEX ${name};",alterIndexRename:"ALTER INDEX ${oldName} RENAME TO ${newName};",alterIndexRebuild:"ALTER INDEX ${name} REBUILD ${options};",createView:"CREATE${orReplace}${force}${viewType}${materialized} VIEW${ifNotExists} ${name} ${sharing}${viewProperties}\n	AS ${selectStatement}",viewSelectStatement:"SELECT ${keys}\n	FROM ${tableName}",createObjectType:`CREATE OR REPLACE TYPE \${name} AS OBJECT 
(
	\${properties}
);
`,objectTypeColumnDefinition:"${name} ${type}",createCollectionType:"CREATE OR REPLACE TYPE ${name} IS ${collectionType}${size} OF (${datatype})${notPersistable};\n",ifNotExists:`DECLARE
BEGIN
	EXECUTE IMMEDIATE '\${statement}';
	EXCEPTION WHEN OTHERS THEN
		IF SQLCODE = -\${errorCode} THEN NULL; ELSE RAISE; END IF;
END;
/
`,createSynonym:"CREATE${orReplace}${editionable}${public} SYNONYM ${name}\n	FOR ${objectName};\n",renameColumn:"ALTER TABLE ${tableName} RENAME COLUMN ${oldColumnName} TO ${newColumnName};",createSequence:"CREATE SEQUENCE${ifNotExists} ${name}${sharing}${options}",dropSequence:"DROP SEQUENCE${ifExists} ${name};\n",renameSequence:"RENAME ${name} TO ${newName};\n",alterSequence:"ALTER SEQUENCE${ifExists} ${name}${options};\n",dualityView:{createJsonRelationalDualityViewHeading:"CREATE${orReplaceStatement}${forceStatement}${editionableStatement} JSON RELATIONAL DUALITY VIEW ${viewName} AS",sql:{tableTagsStatement:"WITH${checkStatement}${etagStatement}${insertStatement}${updateStatement}${deleteStatement}",columnTagsStatement:"WITH${checkStatement}${etagStatement}${updateStatement}",fromTableStatement:"FROM ${tableName}${tableAlias}${tableTagsStatement}"}}}});var hS=U((lH,FD)=>{"use strict";var EF=Object.freeze({SQL:"SQL",GRAPHQL:"GRAPHQL"});FD.exports={DualityViewSyntaxType:EF}});var SS=U((TH,vD)=>{"use strict";var hF=Object.freeze({JOIN_SUBQUERY_TYPE:"joinSubquery",COLLECTION_REFERENCE:"collectionReference"});vD.exports={DualityViewPropertiesType:hF}});var GD=U((uH,qD)=>{"use strict";var{DualityViewPropertiesType:kD}=SS(),hn=class hn{constructor(e,t,n){if(this.constructor===hn)throw new Error("Abstract classes can't be instantiated.");this._ddlTemplates=e,this._assignTemplates=t,this._lodash=n}static padInFront(e){return` ${e}`}static padInFrontAndUppercaseIfExists(e){return e?hn.padInFront(e).toUpperCase():""}static isDualityView(e={}){return e.viewOn&&e.duality}static isJoinSubquery(e={}){return(e==null?void 0:e.type)===kD.JOIN_SUBQUERY_TYPE}static isFlexColumn(e={}){return e.flexColumn}static isRegularDualityViewFieldOnRootLevelOrInObjectSubquery(e={}){let{ref:t,refIdPath:n,refType:o}=e;return t&&(n||[]).length===2&&o===kD.COLLECTION_REFERENCE}static isRegularDualityViewFieldInArraySubquery(e={}){let{ref:t,refId:n}=e;return t&&n}static isRegularDualityViewField(e={}){return hn.isRegularDualityViewFieldOnRootLevelOrInObjectSubquery(e)||hn.isRegularDualityViewFieldInArraySubquery(e)}static getPathToReferencedColumn(e,t){let n=[];return hn.isRegularDualityViewFieldOnRootLevelOrInObjectSubquery(e)?n=e.refIdPath:hn.isRegularDualityViewFieldInArraySubquery(e)&&(n=[...t.joinedCollectionRefIdPath||[],e.ref]),n}static getRegularFieldNameFromCollection(e,t){if(e.length<2)throw new Error("Cannot extract referenced column name");let n=e[0],o=e[1],_=t[n],T=(_==null?void 0:_.properties)||{};for(let u of Object.keys(T))if(T[u].GUID===o)return u;return""}static getKeyValueFrontPadding(e){return"	".repeat(e)}_getForceStatement(e){return hn.padInFrontAndUppercaseIfExists(e.force)}_getOrReplaceStatement(e){return e.orReplace?" OR REPLACE":""}_getEditionableStatement(e){return hn.padInFrontAndUppercaseIfExists(e.editionable)}static getRegularFieldName(e,t){return t.code||e||t.referencedColumnName}getCreateJsonRelationalDualityViewHeadingDdl(e){var g,p;let{jsonSchema:t,view:n}=e,{getViewName:o,getNamePrefixedWithSchemaName:_}=xe()(this._lodash),T=((p=(g=this._ddlTemplates)==null?void 0:g.dualityView)==null?void 0:p.createJsonRelationalDualityViewHeading)||"",u=this._getOrReplaceStatement(n),h=this._getForceStatement(t),A=this._getEditionableStatement(t),N=o(n),P=_(N,n.schemaName),R={orReplaceStatement:u,forceStatement:h,editionableStatement:A,viewName:P};return this._assignTemplates(T,R)}getDualityViewBodyDdl(e){throw new Error("Not implemented")}convertDualityViewToDdl(e){let t=this.getCreateJsonRelationalDualityViewHeadingDdl(e),n=this.getDualityViewBodyDdl(e);return t+`
`+n+`
`}};a(hn,"AbstractDualityViewFeDdlCreator");var NS=hn;qD.exports={AbstractDualityViewFeDdlCreator:NS}});var KD=U((hH,HD)=>{"use strict";var{AbstractDualityViewFeDdlCreator:ot}=GD(),AS=class AS extends ot{constructor(e,t,n){super(e,t,n)}_getFromRootTableAliasStatement(e){let{wrapInQuotes:t}=xe()(this._lodash);if(e.rootTableAlias){let n=t(e.rootTableAlias);return ot.padInFront(n)}return""}_getFromChildTableAliasStatement(e){let{wrapInQuotes:t}=xe()(this._lodash);if(e.childTableAlias){let n=t(e.childTableAlias);return ot.padInFront(n)}return""}_getCheckStatement(e){return ot.padInFrontAndUppercaseIfExists(e.check)}_getEtagStatement(e){let t=e.etag?"etag":"";return ot.padInFrontAndUppercaseIfExists(t)}_getDeleteStatement(e){return ot.padInFrontAndUppercaseIfExists(e.delete)}_getInsertStatement(e){return ot.padInFrontAndUppercaseIfExists(e.insert)}_getUpdateStatement(e){return ot.padInFrontAndUppercaseIfExists(e.update)}_getTableTagsStatement(e){let t=e.tableTagsClause||{},n=this._getCheckStatement(t),o="";n&&(o=this._getEtagStatement(t));let _=this._getInsertStatement(t),T=this._getUpdateStatement(t),u=this._getDeleteStatement(t),h={checkStatement:n,etagStatement:o,insertStatement:_,updateStatement:T,deleteStatement:u};if(Object.values(h).some(N=>N==null?void 0:N.length)){let N=this._ddlTemplates.dualityView.sql.tableTagsStatement,P=this._assignTemplates(N,h);return ot.padInFront(P)}return""}_getColumnTagsStatement(e){let t=e.columnTagsClause||{},n=this._getCheckStatement(t),o="";n&&(o=this._getEtagStatement(t));let _=this._getUpdateStatement(t),T={checkStatement:n,etagStatement:o,updateStatement:_};if(Object.values(T).some(h=>h==null?void 0:h.length)){let h=this._ddlTemplates.dualityView.sql.columnTagsStatement,A=this._assignTemplates(h,T);return ot.padInFront(A)}return""}_getFromRootTableStatement(e){let{getNamePrefixedWithSchemaName:t}=xe()(this._lodash),n=t(e.tableName,e.schemaName),o=this._getFromRootTableAliasStatement(e),_=this._getTableTagsStatement(e),T=this._ddlTemplates.dualityView.sql.fromTableStatement;return this._assignTemplates(T,{tableName:n,tableAlias:o,tableTagsStatement:_})}_getFromChildTableStatement({joinSubqueryJsonSchema:e,relatedSchemas:t,bodyPadding:n}){let o=this._lodash.first(e.joinedCollectionRefIdPath);if(!o)throw new Error("Specify child table for all join subqueries");let _=t[o],{getEntityName:T,getNamePrefixedWithSchemaName:u}=xe()(this._lodash),h=T(_),A=_.bucketName,N=u(h,A),P=this._getFromChildTableAliasStatement(e),R=this._getTableTagsStatement(e),g=this._ddlTemplates.dualityView.sql.fromTableStatement,m=[this._assignTemplates(g,{tableName:N,tableAlias:P,tableTagsStatement:R})];return e.whereClause&&m.push(`WHERE ${e.whereClause}`),m.map(y=>`${n}${y}`).join(`
`)}_getNameOfReferencedColumnForDdl(e,t,n){let{getEntityName:o,getNamePrefixedWithSchemaName:_}=xe()(this._lodash);if(ot.isDualityView(e)){let T=e.rootTableAlias||e.tableName;return _(t,T)}if(ot.isJoinSubquery(e)){if(e.childTableAlias){let u=e.childTableAlias;return _(t,u)}let T=this._lodash.first(e.joinedCollectionRefIdPath);if(T){let u=n[T],h=o(u);return _(t,h)}}return""}_getRegularFieldKeyValueStatement({propertyName:e,propertyJsonSchema:t,parent:n,paddingFactor:o,relatedSchemas:_}){let{wrap:T}=xe()(this._lodash),u=ot.getKeyValueFrontPadding(o),h=ot.getRegularFieldName(e,t),A=T(h,"'","'"),N=ot.getPathToReferencedColumn(t,n),P=ot.getRegularFieldNameFromCollection(N,_),R=this._getNameOfReferencedColumnForDdl(n,P,_),g=this._getColumnTagsStatement(t);return`${u}${A}: ${R}${g}`}_getJoinSubqueryValueStatement({propertyJsonSchema:e,paddingFactor:t,relatedSchemas:n}){let o=t+1,_=t+2,T=this._getObjectGenStatement({paddingFactor:_,relatedSchemas:n,jsonSchema:e}),u=ot.getKeyValueFrontPadding(o),A=[`${u}SELECT${T}`],N=this._getFromChildTableStatement({joinSubqueryJsonSchema:e,relatedSchemas:n,bodyPadding:u});return A.push(N),A.join(`
`)}_shouldUnnestJoinSubquery(e){let t=this._lodash.toUpper(e.sqlJsonFunction),n=this._lodash.toLower(e.subtype);return t==="JSON_OBJECT"||n==="object"?!!e.unnestSubquery:!1}_getJoinSubqueryKeyValueStatement({propertyName:e,propertyJsonSchema:t,paddingFactor:n,relatedSchemas:o}){let{wrap:_}=xe()(this._lodash),T=this._getJoinSubqueryValueStatement({relatedSchemas:o,paddingFactor:n,propertyJsonSchema:t}),u=ot.getKeyValueFrontPadding(n),h=this._getObjectGenStatementJsonKeywordConfig(t),A=h.surroundingBrackets[0],N=h.surroundingBrackets[1];if(this._shouldUnnestJoinSubquery(t))return`${u}UNNEST ${A}
${T}
${u}${N}`;let R=this._getJoinSubqueryName(e,t),g=_(R,"'","'");return`${u}${g} : ${A}
${T}
${u}${N}`}_getJoinSubqueryName(e,t){return t.name||e}_buildKeyValueStatement({propertyName:e,propertyJsonSchema:t,parent:n,paddingFactor:o,relatedSchemas:_}){return ot.isFlexColumn(t)?this._getFlexColumnStatement({propertyName:e,propertyJsonSchema:t,paddingFactor:o}):ot.isRegularDualityViewField(t)?this._getRegularFieldKeyValueStatement({propertyName:e,propertyJsonSchema:t,parent:n,paddingFactor:o,relatedSchemas:_}):ot.isJoinSubquery(t)?this._getJoinSubqueryKeyValueStatement({propertyName:e,propertyJsonSchema:t,paddingFactor:o,relatedSchemas:_}):""}_getKeyValueStatement({jsonSchema:e,relatedSchemas:t,paddingFactor:n}){var h;let o=[],_=e.properties||((h=e.items)==null?void 0:h.properties)||{},T=this._lodash.toPairs(_);for(let[A,N]of T){let P=this._buildKeyValueStatement({propertyName:A,propertyJsonSchema:N,parent:e,paddingFactor:n,relatedSchemas:t});o.push(P)}return`
${o.join(`,
`)}
`}_getObjectGenStatementJsonKeywordConfig(e){if(!ot.isJoinSubquery(e))return{jsonKeyword:"JSON",surroundingBrackets:["",""],jsonKeywordBrackets:["{","}"]};let t=this._lodash.toUpper(e.sqlJsonFunction);return t==="JSON_OBJECT"?{jsonKeyword:t,surroundingBrackets:["(",")"],jsonKeywordBrackets:["(",")"]}:t==="JSON_ARRAYAGG"?{jsonKeyword:t,surroundingBrackets:["(",")"],jsonKeywordBrackets:["( JSON {","})"]}:this._lodash.toLower(e.subtype)==="array"?{jsonKeyword:"JSON",surroundingBrackets:["[","]"],jsonKeywordBrackets:["{","}"]}:{jsonKeyword:"JSON",surroundingBrackets:["(",")"],jsonKeywordBrackets:["{","}"]}}_getObjectGenStatement({relatedSchemas:e,paddingFactor:t,jsonSchema:n}){let o=this._getKeyValueStatement({relatedSchemas:e,paddingFactor:t,jsonSchema:n}),_=ot.getKeyValueFrontPadding(t-1),T=this._getObjectGenStatementJsonKeywordConfig(n),u=T.jsonKeywordBrackets[0],h=T.jsonKeywordBrackets[1],A=`${T.jsonKeyword} ${u}\${keyValueStatement}${_}${h}`,N=this._assignTemplates(A,{keyValueStatement:o});return ot.padInFront(N)}getDualityViewBodyDdl(e){let{view:t,jsonSchema:n,relatedSchemas:o}=e,u=[`SELECT${this._getObjectGenStatement({jsonSchema:n,paddingFactor:1,relatedSchemas:o})}`],h=this._getFromRootTableStatement(t);return u.push(h+";"),u.join(`
`)}_getFlexColumnStatement({propertyName:e,propertyJsonSchema:t,paddingFactor:n}){let{wrap:o}=xe()(this._lodash),_=ot.getKeyValueFrontPadding(n),T=ot.getRegularFieldName(e,t),u=o(T,'"','"');return`${_}${u} AS FLEX COLUMN`}};a(AS,"SqlDualityViewDdlCreator");var fS=AS;HD.exports={SqlDualityViewDdlCreator:fS}});var $D=U((NH,WD)=>{"use strict";var{DualityViewSyntaxType:SF}=hS(),{SqlDualityViewDdlCreator:NF}=KD(),pS=class pS{static getCreatorInstance(e,{ddlTemplates:t,assignTemplates:n,lodash:o}){switch(e==null?void 0:e.toUpperCase()){case SF.SQL:return new NF(t,n,o);default:throw new Error(`Unknown syntax config: ${e}`)}}};a(pS,"DualityViewDdlCreatorFactory");var dS=pS;WD.exports={DualityViewDdlCreatorFactory:dS}});var mS=U((AH,zD)=>{"use strict";var fF=Object.freeze({IF_NOT_EXISTS_SINCE:23,JSON_TYPE_SINCE:21});zD.exports={DbVersion:fF}});var JD=U((dH,QD)=>{"use strict";var XD=a((s="")=>new RegExp("\\$\\{(.*?)\\}",s),"template"),AF=a(s=>s.match(XD("gi"))||[],"getAllTemplates"),dF=a(s=>(s.match(XD("i"))||[])[1],"parseTemplate");QD.exports=({_:s})=>({assignTemplates:a((t,n)=>AF(t).reduce((o,_)=>{let T=dF(_);return o.replace(_,()=>n[T]||n[T]===0?n[T]:"")},t),"assignTemplates")})});var ZD=U((PH,jD)=>{"use strict";var mH=Ct();jD.exports=(s,e)=>{let t=a((m,y)=>Object.entries(m.properties).map(y),"mapProperties"),n=a(m=>m.compositeUniqueKey?!1:!!m.unique,"isUniqueKey"),o=a(m=>{var y;return n(m)&&!((y=m.uniqueKeyOptions)!=null&&y.constraintName)},"isInlineUnique"),_=a(m=>m.compositeUniqueKey||m.compositePrimaryKey?!1:!!m.primaryKey,"isPrimaryKey"),T=a(m=>{var y;return _(m)&&!((y=m.primaryKeyOptions)!=null&&y.constraintName)},"isInlinePrimaryKey"),u=a((m,y,I)=>e({keyType:"UNIQUE",columns:[{name:y,isActivated:I}],...m}),"hydrateUniqueOptions"),h=a((m,y,I)=>e({keyType:"PRIMARY KEY",columns:[{name:y,isActivated:I}],...m}),"hydratePrimaryKeyOptions"),A=a((m,y)=>Object.keys(y).find(I=>y[I].GUID===m),"findName"),N=a((m,y)=>s.get(Object.values(y).find(I=>I.GUID===m),"isActivated",!0),"checkIfActivated"),P=a((m,y)=>s.map(m,I=>({name:A(I.keyId,y.properties),isActivated:N(I.keyId,y.properties)})),"getKeys"),R=a(m=>Array.isArray(m.primaryKey)?m.primaryKey.filter(y=>!s.isEmpty(y.compositePrimaryKey)).map(y=>({...h(y,null,null),columns:P(y.compositePrimaryKey,m)})):[],"getCompositePrimaryKeys"),g=a(m=>Array.isArray(m.uniqueKey)?m.uniqueKey.filter(y=>!s.isEmpty(y.compositeUniqueKey)).map(y=>({...u(y,null,null),columns:P(y.compositeUniqueKey,m)})):[],"getCompositeUniqueKeys");return{getTableKeyConstraints:a(m=>{if(!m.properties)return[];let y=t(m,([M,L])=>{if(!(!n(L)||o(L)))return u(L.uniqueKeyOptions,M,L.isActivated)}).filter(Boolean);return[...t(m,([M,L])=>{if(!(!_(L)||T(L)))return h(L.primaryKeyOptions,M,L.isActivated)}).filter(Boolean),...R(m),...y,...g(m)]},"getTableKeyConstraints"),isInlineUnique:o,isInlinePrimaryKey:T,getKeys:P}}});var PS=U((DH,eg)=>{"use strict";var IH=Ct();eg.exports=({wrapInQuotes:s,_:e})=>({getOptionsString:a(({constraintName:n,deferClause:o,rely:_,validate:T,indexClause:u,exceptionClause:h})=>{let A=n?` CONSTRAINT ${s(e.trim(n))}`:"",N=[o,_,u,T,h].filter(Boolean).join(" ");return{constraintString:A,statement:N&&` ${N}`}},"getOptionsString")})});var rg=U((OH,tg)=>{"use strict";var CH=Ct(),{DbVersion:pF}=mS(),mF=a(s=>Number.parseInt(s,10)<pF.JSON_TYPE_SINCE,"shouldUseClobForJsonColumns");tg.exports=({_:s,wrap:e,assignTemplates:t,templates:n,commentIfDeactivated:o,wrapComment:_,wrapInQuotes:T})=>{let{getOptionsString:u}=PS()({_:s,wrapInQuotes:T}),h=a((j,ce)=>s.chain(ce).filter("comment").map(Le=>{let je=t(n.comment,{object:"COLUMN",objectName:`${j}.${T(Le.name)}`,comment:_(Le.comment)});return o(je,Le)}).join(`
`).value(),"getColumnComments"),A=a(({nullable:j,unique:ce,primaryKey:Le,primaryKeyOptions:je,uniqueKeyOptions:It})=>{let{constraintString:et,statement:$t}=u(N({primaryKey:Le,unique:ce,primaryKeyOptions:je,uniqueKeyOptions:It}));return`${j?"":" NOT NULL"}${et}${Le?" PRIMARY KEY":""}${ce?" UNIQUE":""}${$t}`},"getColumnConstraints"),N=a(({primaryKey:j,unique:ce,primaryKeyOptions:Le,uniqueKeyOptions:je})=>j?Le||{}:ce?je||{}:{},"getOptions"),P=a((j,ce)=>j==="JSON"&&mF(ce)?"CLOB":j,"replaceTypeByVersion"),R=a(({default:j,identity:ce})=>{if(!s.isEmpty(ce)&&ce.generated){let Le=a(({generated:It,generatedOnNull:et})=>It==="BY DEFAULT"?` ${It} ${et?" ON NULL":""}`:" ALWAYS","getGenerated"),je=a(({identityStart:It,identityIncrement:et,numberToCache:$t})=>{let Qn=It?` START WITH ${It}`:"",kr=et?` INCREMENT BY ${et}`:"",qr=$t?` CACHE ${$t}`:" NOCACHE";return`${Qn}${kr}${qr}`},"getOptions");return` GENERATED${Le(ce)} AS IDENTITY (${s.trim(je(ce))})`}else if(j)return` DEFAULT ${j}`;return""},"getColumnDefault"),g=a(({encryption:j})=>{if(s.isPlainObject(j)&&!s.isEmpty(s.omit(j,"id"))){let{ENCRYPTION_ALGORITHM:ce,INTEGRITY_ALGORITHM:Le,noSalt:je}=j,It=ce?` USING '${ce}'`:"",et=Le?` '${Le}'`:"";return` ENCRYPT${It}${et}${je?" NO SALT":""}`}return""},"getColumnEncrypt"),p=a((j,ce,Le)=>` ${j}(${ce} ${s.toUpper(Le)})`,"addByteLength"),m=a((j,ce)=>` ${j}(${ce})`,"addLength"),y=a((j,ce,Le)=>s.isNumber(Le)?` ${j}(${ce||"*"},${Le})`:s.isNumber(ce)?` ${j}(${ce})`:` ${j}`,"addScalePrecision"),I=a((j,ce)=>s.isNumber(ce)?` ${j}(${ce})`:` ${j}`,"addPrecision"),M=a((j,ce,Le)=>` TIMESTAMP${s.isNumber(j)?`(${j})`:""}${ce?` WITH${Le?" LOCAL":""} TIME ZONE`:""}`,"timestamp"),L=a(j=>` INTERVAL YEAR${s.isNumber(j)?`(${j})`:""} TO MONTH`,"intervalYear"),v=a((j,ce)=>{let Le=s.isNumber(j)?`(${j})`:"",je=s.isNumber(ce)?`(${ce})`:"";return` INTERVAL DAY${Le} TO SECOND${je}`},"intervalDay"),H=a((j,ce,Le)=>{let je={"vector<int8>":"int8","vector<float32>":"float32","vector<float64>":"float64"}[Le],It=ce||"*",et=s.toUpper(je||"*");return` ${j}(${It}, ${et})`},"decorateVector"),te=a((j,ce)=>["object","array"].includes(ce)?" "+j+"("+s.toUpper(ce)+")":" "+j,"decorateJson"),se=a(j=>["CHAR","VARCHAR2"].includes(j),"canHaveByte"),Ae=a(j=>["CHAR","VARCHAR2","NCHAR","NVARCHAR2","RAW","UROWID"].includes(j),"canHaveLength"),V=a(j=>["NUMBER","FLOAT"].includes(j),"canHavePrecision"),Y=a(j=>j==="NUMBER","canHaveScale"),F=a(j=>j==="INTERVAL YEAR","isIntervalYear"),J=a(j=>j==="INTERVAL DAY","isIntervalDay"),Te=a(j=>j==="TIMESTAMP","isTimezone"),Pe=a((j,ce,Le)=>j==="VECTOR"&&(ce||Le),"canDecorateVector"),ee=a(j=>j==="JSON","isJson");return{getColumnComments:h,getColumnConstraints:A,replaceTypeByVersion:P,getColumnDefault:R,getColumnEncrypt:g,decorateType:a((j,ce)=>{let{lengthSemantics:Le,length:je,precision:It,scale:et,fractSecPrecision:$t,withTimeZone:Qn,localTimeZone:kr,yearPrecision:qr,dayPrecision:Ui,isUDTRef:x,schemaName:z,dimension:ue,subtype:oe}=ce;return Le&&se(j)&&Ae(j)&&s.isNumber(je)?p(j,je,Le):Ae(j)&&s.isNumber(je)?m(j,je):V(j)&&Y(j)?y(j,It,et):V(j)&&s.isNumber(It)?I(j,It):Te(j)?M($t,Qn,kr):F(j)?L(qr):J(j)?v(Ui,$t):x&&z?` "${z}"."${j}"`:Pe(j,ue,oe)?H(j,ue,oe):ee(j)?te(j,oe):` ${j}`},"decorateType"),canHaveIdentity:a(j=>["number"].includes(j),"canHaveIdentity")}}});var sg=U((wH,ng)=>{"use strict";var LH=Ct();ng.exports=({_:s,getColumnsList:e,checkAllKeysDeactivated:t,commentIfDeactivated:n,wrapInQuotes:o,assignTemplates:_})=>{let{getOptionsString:T}=PS()({_:s,wrapInQuotes:o}),u=a(({duplicated:V,external:Y,immutable:F,sharded:J,temporary:Te,temporaryType:Pe,blockchain_table_clauses:ee})=>{let ye=!s.isEmpty(ee);switch(!0){case Te:return` ${s.toUpper(Pe)} TEMPORARY`;case J:return" SHARDED";case V:return" DUPLICATED";case F:return" IMMUTABLE";case ye:return`${ee.immutable?" IMMUTABLE":""} BLOCKCHAIN`;default:return""}},"getTableType"),h=a(V=>{let Y=a(J=>J?`${J}
`:"","wrap"),F=[{key:"blockchain_table_clauses",getValue:A(V==null?void 0:V.tableProperties)},{key:"storage",getValue:N(V==null?void 0:V.tableProperties)},{key:"external_table_clause",getValue:P},{key:"partitioning",getValue:R},{key:"selectStatement",getValue:L("AS")},{key:"tableProperties",getValue:J=>J}].map(J=>V[J.key]?Y(J.getValue(V[J.key],V)):"").filter(Boolean).join("");return s.trim(F)?` ${s.trim(F)}`:""},"getTableOptions"),A=a(V=>({blockchain_table_retention_clause:Y,blockchain_row_retention_clause:F,blockchain_hash_and_data_format_clause:J})=>s.includes(V,Y)||s.includes(V,F)||s.includes(V,J)?"":s.trim(` ${Y||""} ${F||""} ${J||""}`),"getBlockChainClause"),N=a(V=>({organization:Y,tablespace:F,logging:J})=>s.includes(V,"TABLESPACE")?"":Y==="external"?"ORGANIZATION EXTERNAL":`ORGANIZATION ${s.toUpper(Y)||"HEAP"}${F?` TABLESPACE ${o(F)}`:""} ${J?"LOGGING":"NOLOGGING"}`,"getStorage"),P=a(V=>{if(!(V!=null&&V.access_driver_type))return"";let{access_driver_type:Y,default_directory:F,access_parameter_type:J,opaque_format_spec:Te,clob_subquery:Pe,reject_limit:ee,location:ye}=V,St=`(${s.map(ye,({location_directory:Le,location_specifier:je})=>`${Le?`${Le}:`:""}'${je}'`).join(", ")})`,j=J==="NONE"?"":`ACCESS PARAMETERS ${Pe?`USING CLOB ${Pe}`:Te}`,ce=`${F&&!s.isEmpty(F)?` DEFAULT DIRECTORY ${F}`:""}`+j+`${ye&&!s.isEmpty(ye)?` LOCATION ${St}`:""}`;return` (TYPE ${s.toUpper(Y)} ${ce}) REJECT LIMIT ${ee||"UNLIMITED"} `},"getExternalTableClause"),R=a((V,{isActivated:Y})=>{if(V!=null&&V.partitionBy){let F=g(V,Y),J=p(V,Y);return`PARTITION BY ${s.toUpper(s.startsWith(V.partitionBy,"composite")?s.last(V.partitionBy.split(" ")):V.partitionBy)} ${F}${J}`}return""},"getPartitioning"),g=a((V,Y)=>{let F=t(V.partitionKey);return s.isEmpty(V.partitionKey)?"":e(V.partitionKey,F,Y)},"getPartitionKeys"),p=a((V,Y)=>{switch(V.partitionBy){case"range":return`${V.interval?`
INTERVAL (${V.interval})`:""}`+I(V.store_in_tablespaces)+m(V.range_partitions,"range_partition_clause");case"list":return`${V.automatic?" AUTOMATIC":""}`+I(V.store_in_tablespaces)+m(V.list_partitions,"list_partition_clause");case"hash":return M(V);case"reference":return`${V.constraint?` (${V.constraint})`:""}`+m(V.reference_partition_descs,"reference_partition_desc");case"system":return V.system_partitioning_quantity?` PARTITIONS ${V.system_partitioning_quantity}`:m(V.system_partition_descs,"system_partition_desc");case"composite range":{let F=y(V,Y);return`${V.interval?` INTERVAL (${V.interval})`:""}`+I(V.store_in_tablespaces)+F+m(V.range_subpartition_descs,"range_subpartition_desc")}case"composite list":{let F=y(V,Y);return I(V.store_in_tablespaces,"AUTOMATIC")+F+m(V.list_subpartition_descs,"list_subpartition_description")}case"composite hash":{let F=y(V,Y),J=M(V);return`${F}${J}`}default:return""}},"getPartitionClause"),m=a((V,Y)=>V&&s.isArray(V)&&!s.isEmpty(V)?`
(
	${(Y?s.map(V,F=>F[Y]):V).join(`,
	`)}
)
`:"","partitionsToString"),y=a(({subpartitionType:V,subpartitionDescription:Y,compositePartitionKey:F},J)=>{if(V){let Te=t(F),Pe=Y?`
${Y}`:"";return` SUBPARTITION BY ${s.toUpper(V)} ${e(F,Te,J)} ${Pe}`}return""},"getSubpartition"),I=a((V,Y,F="store_in_tablespace")=>s.isEmpty(V)?"":`${Y?` ${Y}`:""} STORE IN (${s.map(V,J=>J[F]).join(", ")})`,"getTablespaceList"),M=a(({hash_partition_quantity:V,store_in_tablespaces:Y,overflow_store_in_tablespaces:F,individual_hash_partitions:J})=>V?` PARTITIONS ${V}`+I(Y)+I(F,"OVERFLOW","overflow_store_in_tablespace"):m(J,"individual_hash_partition"),"getHashPartition"),L=a(V=>Y=>{if(Y)return`${V} ${Y}`},"getBasicValue");return{getTableOptions:h,getTableType:u,generateConstraintsString:a((V,Y)=>{var Pe,ee;let F=n(((V==null?void 0:V.deactivatedItems)||[]).join(`,
	`),{isActivated:!Y,isPartOfLine:!0}),J=(Pe=V==null?void 0:V.activatedItems)!=null&&Pe.length?`,
	`+V.activatedItems.join(`,
	`):"",Te=(ee=V==null?void 0:V.deactivatedItems)!=null&&ee.length?`
	`+F:"";return J+Te},"generateConstraintsString"),foreignKeysToString:a(V=>{if(Array.isArray(V)){let Y=V.filter(Te=>s.get(Te,"isActivated",!0)).map(Te=>o(s.trim(Te.name))),F=V.filter(Te=>!s.get(Te,"isActivated",!0)).map(Te=>o(s.trim(Te.name))),J=F.length?n(F,{isActivated:!1,isPartOfLine:!0}):"";return Y.join(", ")+J}return V},"foreignKeysToString"),foreignActiveKeysToString:a(V=>V.map(Y=>s.trim(Y.name)).join(", "),"foreignActiveKeysToString"),createKeyConstraint:a((V,Y)=>F=>{let J=t(F.columns),Te=e(F.columns,J,Y),Pe=T(F).statement;return{statement:_(V.createKeyConstraint,{constraintName:F.constraintName?`CONSTRAINT ${o(F.constraintName)} `:"",keyType:F.keyType,columns:Te,options:Pe}),isActivated:!J}},"createKeyConstraint"),customPropertiesForForeignKey:a(V=>({foreignOnDelete:s.get(V,"relationshipOnDelete","")}),"customPropertiesForForeignKey")}}});var og=U((YH,ig)=>{"use strict";var UH=Ct();ig.exports=({_:s,assignTemplates:e,templates:t,getNamePrefixedWithSchemaName:n})=>{let o=["OBJECT_UDT","VARRAY","TABLE","COLLECTION_UDT"],_=a((h,A)=>{let N=n(h.name,h.schemaName);switch(h.type){case"OBJECT_UDT":return e(t.createObjectType,{name:N,properties:s.map(h.properties,P=>A(P,t.objectTypeColumnDefinition)).join(`,
	`)});case"VARRAY":case"TABLE":{let P=h.type==="VARRAY"?"(64)":"";return e(t.createCollectionType,{name:N,collectionType:h.type,size:s.isNumber(h.size)?`(${h.size})`:P,datatype:`${h.ofType}${h.nullable?"":" NOT NULL"}`,notPersistable:`${h.notPersistable?" NOT PERSISTABLE":""}`})}default:return""}},"getPlainUdt");return{getUserDefinedType:a((h,A)=>_(h,A),"getUserDefinedType"),isNotPlainType:a(h=>{let A=s.toUpper(h.mode||h.type);return o.includes(A)},"isNotPlainType")}}});var _g=U((xH,ag)=>{"use strict";ag.exports=({_:s,wrapInQuotes:e})=>{let t=a(({editioning:_,editionable:T})=>`${T?" EDITIONABLE":""}${_?" EDITIONING":""}`,"getViewType"),n=a(_=>_?_.alias?`${e(_.name)} as ${e(_.alias)}`:e(_.name):"","getKeyWithAlias");return{getViewType:t,getViewData:a(_=>Array.isArray(_)?_.reduce((T,u)=>{if(!u.tableName)return T.columns.push(n(u)),T;let h=`${e(u.dbName)}.${e(u.tableName)}`;return T.tables.includes(h)||T.tables.push(h),T.columns.push({statement:`${h}.${n(u)}`,isActivated:u.isActivated}),T},{tables:[],columns:[]}):{tables:[],columns:[]},"getViewData")}}});var lg=U((FH,cg)=>{"use strict";var bH=Ct();cg.exports=({_:s,wrapInQuotes:e})=>({getIndexType:a(T=>T?` ${s.toUpper(T)}`:"","getIndexType"),getIndexKeys:a(({indxKey:T,column_expression:u})=>{let{escapeSingleQuote:h}=xe()();return u?`
(
	${h(u)}
)
	`:s.isArray(T)&&!s.isEmpty(T)?`
(
	${s.map(T,({name:N,type:P})=>`${e(N)} ${s.toUpper(P)}`).join(`,
	`)}
)
	`:""},"getIndexKeys"),getIndexOptions:a(({indxDescription:T,comments:u,tablespace:h,index_properties:A,index_attributes:N,index_compression:P,logging_clause:R,indxKey:g,column_expression:p})=>{let m=R?` ${s.toUpper(R)}`:"",y=h?` TABLESPACE ${h}`:"",I=P?` ${P}`:"",M=`${m}${y}${I}`;return A?M=` ${A}`:N&&(M=` ${N}`),s.isEmpty(g)&&s.isEmpty(p)?M:s.trim(M)},"getIndexOptions"),getIndexName:a(T=>T?` ${e(T)}`:"","getIndexName")})});var ug=U((kH,Tg)=>{"use strict";Tg.exports=({wrapInQuotes:s,templates:e,assignTemplates:t,getNamePrefixedWithSchemaName:n})=>{let o=a(T=>{let u=n(T.synonymName,T.schemaName);return t(e.createSynonym,{name:T.synonymPublic?s(T.synonymName):u,orReplace:T.synonymOrReplace?" OR REPLACE":"",editionable:T.synonymEditionable?" "+T.synonymEditionable:"",public:T.synonymPublic?" PUBLIC":"",objectName:T.synonymEntityName})},"generateSynonymCreateStatement");return{generateSynonymStatements:a((T,u,h)=>T!=null&&T.length?`
`+T.map(A=>o({...A,synonymEntityName:u,schemaName:h})).join(`
`):"","generateSynonymStatements")}}});var hg=U((KH,Eg)=>{"use strict";var GH=Ct(),{Sequence:HH}=O_();Eg.exports=({_:s,templates:e,assignTemplates:t,getNamePrefixedWithSchemaName:n,wrapIfNotExists:o})=>{let _=a(({schemaName:L,sequences:v,usingTryCatchWrapper:H})=>s.map(v,te=>T({schemaName:L,sequence:te,usingTryCatchWrapper:H})).join(`

`),"getSequencesScript"),T=a(({schemaName:L,sequence:v,usingTryCatchWrapper:H})=>{let te=M({schemaName:L,sequence:v}),se=n(v.sequenceName,te),Ae=H?"":p({sequence:v}),V=A({sequence:v,schemaName:L}),Y=y({sequence:v}),F=t(e.createSequence,{name:se,ifNotExists:Ae,sharing:Y,options:V});return H?o(F,v.ifNotExist):F+";"},"createSequenceScript"),u=a(({schemaName:L,sequence:v,oldSequence:H,usingTryCatchWrapper:te})=>{let se=H.sequenceName||v.sequenceName,Ae=M({schemaName:L,sequence:v}),V=n(se),Y=n(se,Ae),F=I({sequence:v,oldSequence:H}),J=A({schemaName:L,sequence:F}),Te=F.sequenceName?n(F.sequenceName):"",Pe=m({usingTryCatchWrapper:te});if(F.hasOwnProperty("sharing")){let St=h({schemaName:L,sequence:H,usingTryCatchWrapper:te}),j=T({schemaName:L,sequence:v,usingTryCatchWrapper:te});return St+`
`+j+`
`}return[{key:"options",value:J,name:Y,template:e.alterSequence},{key:"newName",value:Te,name:V,template:e.renameSequence}].filter(St=>St.value).map(St=>t(St.template,{[St.key]:St.value,name:St.name,ifExists:Pe})).join(`
`)},"alterSequenceScript"),h=a(({schemaName:L,sequence:v,usingTryCatchWrapper:H})=>{let te=M({schemaName:L,sequence:v}),se=n(v.sequenceName,te),Ae=m({usingTryCatchWrapper:H});return t(e.dropSequence,{name:se,ifExists:Ae})},"dropSequenceScript"),A=a(({schemaName:L,sequence:v})=>{let te=[{getOption:N,key:"increment",clause:"INCREMENT BY"},{getOption:N,key:"start",clause:"START WITH"},{getOption:N,key:"restart",clause:"RESTART WITH"},{getOption:N,key:"minValue",clause:"MINVALUE"},{getOption:N,key:"maxValue",clause:"MAXVALUE"},{getOption:P,key:"cache",extendedKey:"cacheValue"},{getOption:P,key:"cycle",extendedKey:""},{getOption:P,key:"order",extendedKey:""},{getOption:P,key:"keep",extendedKey:""},{getOption:P,key:"scale",extendedKey:"scaleExtend"},{getOption:P,key:"shard",extendedKey:"shardExtend"},{getOption:P,key:"type",extendedKey:""}].map(se=>{let Ae=se.getOption({sequence:v,schemaName:L,config:se});return R({option:Ae})}).filter(Boolean).join("");return te&&g({options:te})},"getSequenceOptions"),N=a(({sequence:L,config:v})=>{let H=Number(L[v.key]);return isNaN(H)?"":`${v.clause} ${H}`},"getNumberOption"),P=a(({sequence:L,config:v})=>{let H=s.toUpper(L[v.key]);return H?H.startsWith("NO")||!L[v.extendedKey]?H:H+" "+P({sequence:L,config:{key:v.extendedKey}}):""},"getLiteralOption"),R=a(({option:L})=>L?`	${L}
`:"","wrapOption"),g=a(({options:L})=>`
`+L.replace(/\n$/,""),"wrapOptionsBlock"),p=a(({sequence:L})=>L.ifNotExist?" IF NOT EXISTS":"","getIfNotExists"),m=a(({usingTryCatchWrapper:L})=>L?"":" IF EXISTS","getIfExists"),y=a(({sequence:L})=>L.sharing?" SHARING="+s.toUpper(L.sharing):"","getSharing"),I=a(({sequence:L,oldSequence:v})=>{let H=s.omitBy(L,(te,se)=>s.isEqual(te,v[se]));return L.minValue>v.minValue?{...H,restart:L.start}:H},"getModifiedSequence"),M=a(({schemaName:L,sequence:v})=>v.type==="session"?"":L,"getSequenceSchemaName");return{getSequencesScript:_,createSequenceScript:T,alterSequenceScript:u,dropSequenceScript:h}}});var Sn=U((XH,Ng)=>{"use strict";var PF=MD(),Sg=VD(),Tt=ES(),{DualityViewDdlCreatorFactory:RF}=$D(),{DualityViewSyntaxType:IF}=hS(),{DbVersion:DF}=mS(),{AlterIndexDto:$H}=U_(),{Sequence:zH}=O_(),Ge=Ct(),Hs=a(s=>Number.parseInt(s,10)<DF.IF_NOT_EXISTS_SINCE,"shouldUseTryCatchIfNotExistsWrapper");Ng.exports=(s,e,t)=>{let n=a(x=>Ge.isArray(x)?x:[x],"toArray"),{tab:o,commentIfDeactivated:_,checkAllKeysDeactivated:T,divideIntoActivatedAndDeactivated:u,hasType:h,wrap:A,clean:N,wrapInQuotes:P,getNamePrefixedWithSchemaName:R,wrapComment:g,getColumnsList:p}=xe()(Ge),{assignTemplates:m}=JD()({_:Ge}),y=ZD()(Ge,N),{getColumnComments:I,getColumnConstraints:M,replaceTypeByVersion:L,getColumnDefault:v,getColumnEncrypt:H,decorateType:te,canHaveIdentity:se}=rg()({_:Ge,wrap:A,assignTemplates:m,templates:Tt,commentIfDeactivated:_,wrapInQuotes:P,wrapComment:g}),{getTableType:Ae,getTableOptions:V,generateConstraintsString:Y,foreignKeysToString:F,foreignActiveKeysToString:J,createKeyConstraint:Te,customPropertiesForForeignKey:Pe}=sg()({_:Ge,checkAllKeysDeactivated:T,getColumnsList:p,commentIfDeactivated:_,wrapInQuotes:P,assignTemplates:m}),{getUserDefinedType:ee,isNotPlainType:ye}=og()({_:Ge,commentIfDeactivated:_,assignTemplates:m,templates:Tt,getNamePrefixedWithSchemaName:R,wrapInQuotes:P}),{getViewType:St,getViewData:j}=_g()({_:Ge,wrapInQuotes:P}),{getIndexType:ce,getIndexKeys:Le,getIndexOptions:je,getIndexName:It}=lg()({_:Ge,wrapInQuotes:P}),et=a((x,z,ue=955)=>{if(z){let oe=o(o(x)),tt=Ge.trim(oe).replace(/;$/,"");return m(Tt.ifNotExists,{statement:tt,errorCode:ue})}return x+";"},"wrapIfNotExists"),{generateSynonymStatements:$t}=ug()({wrapInQuotes:P,templates:Tt,assignTemplates:m,getNamePrefixedWithSchemaName:R}),{getSequencesScript:Qn,createSequenceScript:kr,dropSequenceScript:qr,alterSequenceScript:Ui}=hg()({_:Ge,templates:Tt,assignTemplates:m,getNamePrefixedWithSchemaName:R,wrapInQuotes:P,wrapIfNotExists:et});return{getDefaultType(x){return PF[x]},getTypesDescriptors(){return Sg},hasType(x){return h(Sg,x)},hydrateSchema(x,z){let ue=Ge.get(z,"modelData.0.dbVersion");return{schemaName:x.name,ifNotExist:x.ifNotExist,dbVersion:ue,synonyms:z.synonyms,sequences:z.sequences}},createSchema({schemaName:x,ifNotExist:z,dbVersion:ue,sequences:oe}){let ve=Hs(ue),tt=m(Tt.createSchema,{schemaName:P(x),ifNotExists:!ve&&z?" IF NOT EXISTS":""}),He=Qn({schemaName:x,sequences:oe,usingTryCatchWrapper:ve}),Nt=He?`

`+He:"";return ve?et(tt,z,1920)+Nt:tt+";"+Nt},hydrateColumn({columnDefinition:x,jsonSchema:z,schemaData:ue,definitionJsonSchema:oe={}}){var Nt;let ve=ue.dbVersion,tt=!!z.$ref,He=tt?x.type:Ge.toUpper(z.mode||z.type);return{name:x.name,type:He,ofType:z.ofType,notPersistable:z.notPersistable,size:z.size,primaryKey:y.isInlinePrimaryKey(z),primaryKeyOptions:z.primaryKeyOptions,unique:y.isInlineUnique(z),uniqueKeyOptions:z.uniqueKeyOptions,nullable:x.nullable,default:x.default,comment:z.refDescription||z.description||oe.description,isActivated:x.isActivated,scale:x.scale,precision:x.precision,length:x.length,schemaName:ue.schemaName,checkConstraints:z.checkConstraints,dbVersion:ve,fractSecPrecision:z.fractSecPrecision,withTimeZone:z.withTimeZone,localTimeZone:z.localTimeZone,yearPrecision:z.yearPrecision,dayPrecision:z.dayPrecision,lengthSemantics:z.lengthSemantics,encryption:z.encryption,synonyms:((Nt=ue==null?void 0:ue.synonyms)==null?void 0:Nt.filter(tr=>tr.synonymEntityId===z.GUID))||[],isUDTRef:tt,dimension:z.dimension,subtype:z.subtype,...se(z.mode)&&{identity:z.identity}}},hydrateJsonSchemaColumn(x,z){return!x.$ref||Ge.isEmpty(z)||ye(z)?x:(x=Ge.omit(x,"$ref"),{...z,...x})},convertColumnDefinition(x,z=Tt.columnDefinition){let ue=L(x.type,x.dbVersion);return _(m(z,{name:P(x.name),type:te(ue,x),default:v(x),encrypt:H(x),constraints:M(x)}),{isActivated:x.isActivated})},hydrateCheckConstraint(x){return{name:x.chkConstrName,expression:x.constrExpression,comments:x.constrComments,description:x.constrDescription}},createCheckConstraint({name:x,expression:z,comments:ue,description:oe}){return m(Tt.checkConstraint,{name:x?`CONSTRAINT ${P(x)} `:"",expression:Ge.trim(z).replace(/^\(([\s\S]*)\)$/,"$1")})},createForeignKeyConstraint({name:x,foreignKey:z,primaryTable:ue,primaryKey:oe,primaryTableActivated:ve,foreignTableActivated:tt,foreignSchemaName:He,primarySchemaName:Nt,customProperties:tr},rr,Lt){let wt=T(oe),zt=T(z),nn=!wt&&!zt&&ve&&tt,dr=n(z),Cn=n(oe),{foreignOnDelete:yr}=Pe(tr),Lr=m(Tt.createForeignKeyConstraint,{primaryTable:R(ue,Nt||Lt.schemaName),name:x?`CONSTRAINT ${P(x)}`:"",foreignKey:nn?F(dr):J(dr),primaryKey:nn?F(Cn):J(Cn),onDelete:yr?` ON DELETE ${yr}`:""});return{statement:Ge.trim(Lr),isActivated:nn}},createForeignKey({name:x,foreignTable:z,foreignKey:ue,primaryTable:oe,primaryKey:ve,primaryTableActivated:tt,foreignTableActivated:He,foreignSchemaName:Nt,primarySchemaName:tr,customProperties:rr},Lt,wt){let zt=T(ve),nn=T(ue),dr=!zt&&!nn&&tt&&He,Cn=n(ue),yr=n(ve),{foreignOnDelete:Lr}=Pe(rr),Jn=m(Tt.createForeignKey,{primaryTable:R(oe,tr||wt.schemaName),foreignTable:R(z,Nt||wt.schemaName),name:x?P(x):"",foreignKey:dr?F(Cn):J(Cn),primaryKey:dr?F(yr):J(yr),onDelete:Lr?` ON DELETE ${Lr}`:""});return{statement:Ge.trim(Jn)+`
`,isActivated:dr}},dropForeignKey(x,z){let ue={tableName:x,fkConstraintName:z};return m(Tt.dropForeignKey,ue)},hydrateTable({tableData:x,entityData:z,jsonSchema:ue}){var He,Nt;let oe=z[0],ve=Ge.first(oe.partitioning)||{},tt=y.getKeys(ve.compositePartitionKey,ue);return{...x,keyConstraints:y.getTableKeyConstraints(ue),selectStatement:Ge.trim(oe.selectStatement),partitioning:Ge.assign({},ve,{compositePartitionKey:tt}),...Ge.pick(oe,"blockchain_table_clauses","duplicated","external","external_table_clause","immutable","sharded","storage","temporary","temporaryType","description","ifNotExist","tableProperties"),synonyms:((Nt=(He=x==null?void 0:x.schemaData)==null?void 0:He.synonyms)==null?void 0:Nt.filter(tr=>tr.synonymEntityId===ue.GUID))||[]}},createTable({blockchain_table_clauses:x,checkConstraints:z,columnDefinitions:ue,columns:oe,duplicated:ve,external:tt,external_table_clause:He,foreignKeyConstraints:Nt,keyConstraints:tr,immutable:rr,name:Lt,partitioning:wt,schemaData:zt,selectStatement:nn,sharded:dr,storage:Cn,temporary:yr,temporaryType:Lr,description:Jn,ifNotExist:Ws,tableProperties:Yi,synonyms:Mi},jn){let Zn=R(Lt,zt.schemaName),$s=Jn?m(Tt.comment,{object:"TABLE",objectName:Zn,comment:g(Jn)}):"",xi=u(tr.map(Te(Tt,jn)),Xs=>Xs.statement),Vi=Y(xi,jn),F_=u(Nt,Xs=>Xs.statement),v_=Y(F_,jn),wo=I(Zn,ue),bi=m(Tt.createTableProps,{columnDefinitions:Ge.join(oe,`,
	`),foreignKeyConstraints:v_,keyConstraints:Vi,checkConstraints:Ge.isEmpty(z)?"":`,
	`+Ge.join(z,`,
	`)}),Bo=$t(Mi,Zn,zt.schemaName),k_=$s||wo?`
`+$s+wo:"",q_=zt.dbVersion||"",Uo=Hs(q_),zs=m(Tt.createTable,{name:Zn,ifNotExists:!Uo&&Ws?" IF NOT EXISTS":"",tableProps:bi?`
(
	${bi}
)`:"",tableType:Ae({duplicated:ve,external:tt,immutable:rr,sharded:dr,temporary:yr,temporaryType:Lr,blockchain_table_clauses:x}),options:V({blockchain_table_clauses:x,external_table_clause:He,storage:Cn,partitioning:wt,selectStatement:nn,tableProperties:Yi})});return Uo?zs=et(zs,Ws):zs+=";",_(zs+`${k_}
`+Bo,{isActivated:jn})},hydrateIndex(x,z,ue){return{...x,schemaName:ue.schemaName}},createIndex(x,z,ue,oe=!0){let ve=It(z.indxName),tt=ce(z.indxType),He=Le(z),Nt=je(z),tr=e.dbVersion||"",rr=Hs(tr),Lt=z.ifNotExist&&!rr,wt=m(Tt.createIndex,{indexType:tt,ifNotExists:Lt?" IF NOT EXISTS":"",name:ve,keys:He,options:Nt,tableName:R(x,z.schemaName)});return z.ifNotExist&&rr&&(wt=et(wt,!0)),rr?_(wt,{isActivated:z.isActivated}):_(wt,{isActivated:z.isActivated})},dropIndex({name:x}){return m(Tt.dropIndex,{name:x})},alterIndexRename({oldName:x,newName:z}){return m(Tt.alterIndexRename,{oldName:x,newName:z})},alterIndexRebuild({name:x,indexData:z}){let ue=je(z);return m(Tt.alterIndexRebuild,{name:x,options:ue})},hydrateViewColumn(x){return{name:x.name,tableName:x.entityName,alias:x.alias,isActivated:x.isActivated,dbName:x.dbName}},hydrateView({viewData:x,entityData:z,jsonSchema:ue}){var ve,tt;let oe=z[0];return{name:x.name,keys:x.keys,orReplace:oe.or_replace,editionable:oe.editionable,editioning:oe.editioning,force:oe.force,selectStatement:oe.selectStatement,tableName:x.tableName,schemaName:x.schemaData.schemaName,description:oe.description,ifNotExist:oe.ifNotExist,materialized:oe.materialized,sharing:oe.sharing,duality:oe.duality,rootTableAlias:oe.rootTableAlias,tableTagsClause:oe.tableTagsClause,viewProperties:oe.materialized?oe.mviewProperties:oe.viewProperties,synonyms:((tt=(ve=x.schemaData)==null?void 0:ve.synonyms)==null?void 0:tt.filter(He=>He.synonymEntityId===ue.GUID))||[],modelInfo:{dbVersion:Ge.get(x,"schemaData.dbVersion")}}},hydrateViewIndex(x,z,ue){var oe;return{...x,schemaName:z.schemaName,materialized:(oe=Ge.first(ue))==null?void 0:oe.materialized}},createViewIndex(x,z,ue,oe){let ve=It(z.indxName),tt=ce(z.indxType),He=Le(z),Nt=je(z,oe);if(z.materialized)return _(m(Tt.createIndex,{indexType:tt,name:ve,keys:He,options:Nt,tableName:R(x,z.schemaName)}),{isActivated:z.isActivated})},createView(x,z,ue){let oe=R(x.name,x.schemaName),{columns:ve,tables:tt}=j(x.keys),He=ve.map(nn=>nn.statement).join(`,
		`),Nt=x.description?`
`+m(Tt.comment,{object:"TABLE",objectName:oe,comment:g(x.description)})+`
`:`
`,tr=Ge.trim(x.selectStatement)?Ge.trim(o(x.selectStatement)):m(Tt.viewSelectStatement,{tableName:tt.join(", "),keys:He}),rr=$t(x.synonyms,oe,x.schemaName),Lt=Ge.get(x,"modelInfo.dbVersion",""),wt=Hs(Lt),zt=m(Tt.createView,{name:oe,ifNotExists:!wt&&x.ifNotExist?" IF NOT EXISTS":"",orReplace:x.orReplace&&!x.materialized?" OR REPLACE":"",force:x.force&&!x.materialized?" FORCE":"",materialized:x.materialized?" MATERIALIZED":"",viewType:x.materialized?"":St(x),viewProperties:x.viewProperties?` 
`+o(x.viewProperties):"",sharing:x.sharing&&!x.materialized?` SHARING=${x.sharing}`:"",selectStatement:tr});return wt?zt=et(zt,x.ifNotExist):zt+=";",_(zt+Nt+rr,{isActivated:ue})},createDualityView({jsonSchema:x,view:z,relatedSchemas:ue}){return RF.getCreatorInstance(IF.SQL,{ddlTemplates:Tt,assignTemplates:m,lodash:Ge}).convertDualityViewToDdl({view:z,jsonSchema:x,relatedSchemas:ue})},createUdt(x){let z=$t(x.synonyms,R(x.name,x.schemaName),x.schemaName);return _(ee(x,this.convertColumnDefinition)+z,{isActivated:x.isActivated})},commentIfDeactivated(x,z,ue){return x},renameColumn(x,z,ue){return m(Tt.renameColumn,{tableName:x,oldColumnName:z,newColumnName:ue})},createSchemaSequence({schemaName:x,sequence:z}){let ue=Hs(e==null?void 0:e.dbVersion);return kr({schemaName:x,sequence:z,usingTryCatchWrapper:ue})},dropSchemaSequence({schemaName:x,sequence:z}){let ue=Hs(e==null?void 0:e.dbVersion);return qr({schemaName:x,sequence:z,usingTryCatchWrapper:ue})},alterSchemaSequence({schemaName:x,sequence:z,oldSequence:ue}){let oe=Hs(e==null?void 0:e.dbVersion);return Ui({schemaName:x,sequence:z,oldSequence:ue,usingTryCatchWrapper:oe})}}}});var dg=U((JH,Ag)=>{"use strict";var{AlterScriptDto:Y_}=rn(),{getUpdateTypesScriptDtos:gF}=RD(),{getRenameColumnScriptDtos:CF}=DD(),{getModifyIndexesScriptDtos:OF,getAddedIndexesScriptDtos:yF}=BD(),ur=Ct(),LF=a(({app:s,dbVersion:e,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o})=>_=>{let{getEntityName:T}=xe()(ur),{createColumnDefinitionBySchema:u}=yo()(s),h=Sn()(null,{dbVersion:e},s),{getDefinitionByReference:A}=s.require("@hackolade/ddl-fe-utils"),P={schemaName:_.compMod.keyspaceName,dbVersion:e},R={..._,...ur.omit(_==null?void 0:_.role,"properties")||{}},g=ur.toPairs(R.properties).map(([L,v])=>{let H=A({propertySchema:v,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o});return u({name:L,jsonSchema:v,parentJsonSchema:R,ddlProvider:h,schemaData:P,definitionJsonSchema:H})}),p=(R.chkConstr||[]).map(L=>h.createCheckConstraint(h.hydrateCheckConstraint(L))),m={name:T(R),columns:g.map(L=>h.convertColumnDefinition(L)),checkConstraints:p,foreignKeyConstraints:[],schemaData:P,columnDefinitions:g},y=h.hydrateTable({tableData:m,entityData:[R],jsonSchema:R}),I=fg({_:ur,ddlProvider:h,collection:_,dbVersion:e}).flatMap(({scripts:L})=>L.map(({script:v})=>v)),M=h.createTable(y,R.isActivated);return Y_.getInstance([M,...I],!0,!1)},"getAddCollectionScriptDto"),wF=a(s=>e=>{let{getEntityName:t,getNamePrefixedWithSchemaName:n}=xe()(ur),o={...e,...ur.omit(e==null?void 0:e.role,"properties")||{}},_=t(o),T=e.compMod.keyspaceName,h=`DROP TABLE ${n(_,T)};`;return Y_.getInstance([h],!0,!0)},"getDeleteCollectionScriptDto"),BF=a(({app:s,dbVersion:e})=>t=>{let n=Sn()(null,{dbVersion:e},s);return[...OF({_:ur,ddlProvider:n})({collection:t})].filter(Boolean)},"getModifyCollectionScriptDtos"),UF=a(({app:s,dbVersion:e,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o})=>_=>{var M;let{getEntityName:T,getNamePrefixedWithSchemaName:u}=xe()(ur),{createColumnDefinitionBySchema:h}=yo()(s),A=Sn()(null,{dbVersion:e},s),{getDefinitionByReference:N}=s.require("@hackolade/ddl-fe-utils"),P={..._,...ur.omit(_==null?void 0:_.role,"properties")||{}},R=T(P),g=(M=P.compMod)==null?void 0:M.keyspaceName,p=u(R,g),m={schemaName:g,dbVersion:e},y=ur.toPairs(_.properties).filter(([L,v])=>!v.compMod).map(([L,v])=>{let H=N({propertySchema:v,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o});return h({name:L,jsonSchema:v,parentJsonSchema:P,ddlProvider:A,schemaData:m,definitionJsonSchema:H})}).map(L=>A.convertColumnDefinition(L)).map(L=>`ALTER TABLE ${p} ADD (${L});`).map(L=>Y_.getInstance([L],!0,!1)).filter(Boolean),I=fg({_:ur,ddlProvider:A,collection:_});return y.concat(I).filter(Boolean)},"getAddColumnScriptDtos"),fg=a(({_:s,ddlProvider:e,collection:t})=>{var u,h;let n=((u=t==null?void 0:t.role)==null?void 0:u.Indxs)||[],o={...t==null?void 0:t.properties,...(h=t==null?void 0:t.role)==null?void 0:h.properties},_=Object.values(o).map(({GUID:A})=>A);return n.length===0||_.length===0?[]:n.some(({indxKey:A})=>A.find(({keyId:N})=>_.includes(N)))?yF({_:s,ddlProvider:e})({collection:t}):[]},"getNewlyCreatedIndexesScripts"),YF=a(s=>e=>{var A;let{getEntityName:t,getNamePrefixedWithSchemaName:n,wrapInQuotes:o}=xe()(ur),_={...e,...ur.omit(e==null?void 0:e.role,"properties")||{}},T=t(_),u=(A=_.compMod)==null?void 0:A.keyspaceName,h=n(T,u);return ur.toPairs(e.properties).filter(([N,P])=>!P.compMod).map(([N])=>`ALTER TABLE ${h} DROP COLUMN ${o(N)};`).map(N=>Y_.getInstance([N],!0,!0)).filter(Boolean)},"getDeleteColumnScriptDtos"),MF=a((s,e)=>t=>{let n=Sn()(null,{dbVersion:e},s),o=CF(ur,n)(t),_=gF(ur,n)(t);return[...o,..._].filter(Boolean)},"getModifyColumnScriptDtos");Ag.exports={getAddCollectionScriptDto:LF,getDeleteCollectionScriptDto:wF,getModifyCollectionScriptDtos:BF,getAddColumnScriptDtos:UF,getDeleteColumnScriptDtos:YF,getModifyColumnScriptDtos:MF}});var Pg=U((ZH,mg)=>{"use strict";var{checkFieldPropertiesChanged:pg}=xe()(),xF=ES(),{AlterScriptDto:Ks}=rn(),gn=Ct(),VF=a(({app:s,dbVersion:e,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o})=>_=>{let{createColumnDefinitionBySchema:T}=yo()(s),u=Sn()(null,{dbVersion:e},s),{getDefinitionByReference:h}=s.require("@hackolade/ddl-fe-utils"),A={dbVersion:e},N=gn.toPairs(_.properties||{}).map(([p,m])=>{let y=h({propertySchema:m,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o});return T({name:p,jsonSchema:m,parentJsonSchema:_,ddlProvider:u,schemaData:A,definitionJsonSchema:y})}),R={...T({name:_.code||_.name,jsonSchema:_,parentJsonSchema:{required:[]},definitionJsonSchema:{},ddlProvider:u,schemaData:A}),properties:N},g=u.createUdt(R);return Ks.getInstance([g],!0,!1)},"getCreateUdtScriptDto"),bF=a(s=>e=>{let{wrapInQuotes:t}=xe()(gn),o=`DROP TYPE ${t(e.code||e.name)};`;return Ks.getInstance([o],!0,!0)},"getDeleteUdtScriptDto"),FF=a(({app:s,dbVersion:e,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o})=>_=>{let{createColumnDefinitionBySchema:T}=yo()(s),{wrapInQuotes:u}=xe()(gn),h=Sn()(null,{dbVersion:e},s),{getDefinitionByReference:A}=s.require("@hackolade/ddl-fe-utils"),N=u(_.code||_.name),P={dbVersion:e};return gn.toPairs(_.properties).filter(([R,g])=>!g.compMod).map(([R,g])=>{let p=A({propertySchema:g,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o});return T({name:R,jsonSchema:g,parentJsonSchema:{required:[]},ddlProvider:h,schemaData:P,definitionJsonSchema:p})}).map(R=>h.convertColumnDefinition(R,xF.objectTypeColumnDefinition)).map(R=>`ALTER TYPE ${N} ADD ATTRIBUTE ${R};`).map(R=>Ks.getInstance([R],!0,!1))},"getAddColumnToTypeScriptDtos"),vF=a(s=>e=>{let{wrapInQuotes:t}=xe()(gn),n=t(e.code||e.name);return gn.toPairs(e.properties).filter(([o,_])=>!_.compMod).map(([o])=>`ALTER TYPE ${n} DROP ATTRIBUTE ${t(o)};`).map(o=>Ks.getInstance([o],!0,!0))},"getDeleteColumnFromTypeScriptDtos"),kF=a(s=>e=>{let{wrapInQuotes:t}=xe()(gn),n=t(e.code||e.name),o=gn.values(e.properties).filter(T=>pg(T.compMod,["name"])).flatMap(T=>{let u=t(T.compMod.oldField.name),h=`ALTER TYPE ${n} DROP ATTRIBUTE ${u};`,A=t(T.compMod.newField.name),N=`ALTER TYPE ${n} ADD ATTRIBUTE ${A};`;return[Ks.getInstance([h],!0,!0),Ks.getInstance([N],!0,!1)]}),_=gn.toPairs(e.properties).filter(([T,u])=>pg(u.compMod,["type","mode"])).map(([T,u])=>{let h=t(T),A=gn.toUpper(u.compMod.newField.mode||u.compMod.newField.type),N=`ALTER TYPE ${n} MODIFY ATTRIBUTE ${h} ${A};`;return Ks.getInstance([N],!0,!1)});return[...o,..._]},"getModifyColumnOfTypeScriptDtos");mg.exports={getCreateUdtScriptDto:VF,getDeleteUdtScriptDto:bF,getAddColumnToTypeScriptDtos:FF,getDeleteColumnFromTypeScriptDtos:vF,getModifyColumnOfTypeScriptDtos:kF}});var Dg=U((tK,Ig)=>{"use strict";var{DualityViewPropertiesType:Rg}=SS(),qF=a(s=>e=>{let{getEntityName:t,getBucketName:n}=xe()(s),o=s.get(e,"role",{}),_=s.get(o,"compMod.bucketProperties",{}),T=s.get(o,"compMod.collectionData.entityData[0]",{}),u=t(T),h=n(_);return{code:o.code,tableName:u,name:o.name,tableTagsClause:o.tableTagsClause,schemaName:h,rootTableAlias:o.rootTableAlias,orReplace:o.or_replace}},"mapToFeView"),GF=a(s=>(e,t,n)=>{let o=n==null?void 0:n[t.refId],_=(o==null?void 0:o.definition)||{},T=_.code||_.name||"";return{code:e,ref:t.ref,refId:t.refId,refIdPath:[t.refId,t.ref],refType:Rg.COLLECTION_REFERENCE,columnTagsClause:t.columnTagsClause,referencedColumnName:T}},"mapRegularField"),HF=a((s,e,t)=>{if(!t[e.GUID]){let n=s||e.title;throw n?n=`<u>${n}</u>`:n="a",new Error(`Could not find referenced collection for ${n} subquery. Check if all the subqueries have the "child table" property set`)}},"assertSubqueryIsValid"),KF=a(s=>(e,t,n)=>{HF(e,t,n);let o={code:e,type:t.type,name:t.title,subtype:t.subtype,sqlJsonFunction:t.sqlJsonFunction,whereClause:t.whereClause,joinedCollectionRefIdPath:[t.GUID],childTableAlias:t.childTableAlias,tableTagsClause:t.tableTagsClause,items:void 0,properties:void 0,unnestSubquery:void 0};if(t.subtype==="array"){let _=s.get(t,"items.properties",{});o.items={properties:RS(s)(_,n)}}else if(t.subtype==="object"){o.unnestSubquery=t.unnestSubquery;let _=s.get(t,"properties",{});o.properties=RS(s)(_,n)}return o},"mapSubquery"),RS=a(s=>(e,t)=>{let o=s.toPairs(e).map(([_,T])=>{if(T.type===Rg.JOIN_SUBQUERY_TYPE){let h=KF(s)(_,T,t);return[_,h]}let u=GF(s)(_,T,t);return[_,u]});return s.fromPairs(o)},"recursivelyParseProperties"),WF=a(s=>e=>{let t=s.get(e,"role.properties",{}),n=s.get(e,"role.compMod.collectionData.collectionRefsDefinitionsMap",{});return RS(s)(t,n)},"parseProperties"),$F=a(s=>e=>{let{getEntityName:t}=xe()(s),n=s.get(e,"role",{}),o=s.get(n,"compMod.collectionData.entityData[0]",{}),_=t(o),T=WF(s)(e);return{rootTableAlias:n.rootTableAlias,tableName:_,properties:T,duality:n.duality,editionable:n.editionable,force:n.force,viewOn:n.viewOn}},"mapToFeJsonSchema"),zF=a(s=>e=>{let t=s.get(e,"role.compMod.collectionData.collectionRefsDefinitionsMap",{}),o=s.toPairs(t).map(([_,T])=>{let u=s.get(T,"bucket[0].name",""),h=s.get(T,"collection[0]",""),A=T.definition||{},P={properties:{[A.code||A.name]:{GUID:T.definitionId}},bucketName:u,code:h.code,collectionName:h.collectionName};return[_,P]});return s.fromPairs(o)},"mapToFeRelatedSchemas"),XF=a(s=>e=>{let t=qF(s)(e),n=$F(s)(e),o=zF(s)(e);return{view:t,jsonSchema:n,relatedSchemas:o}},"mapDeltaDualityViewToFeDualityView");Ig.exports={mapDeltaDualityViewToFeDualityView:XF}});var Og=U((nK,Cg)=>{"use strict";var{AlterScriptDto:IS}=rn(),{mapDeltaDualityViewToFeDualityView:QF}=Dg(),gg=Ct(),JF=a(s=>e=>{let t=Sn()(null,null,s),n={name:e.code||e.name,keys:[],schemaData:{schemaName:""}},o=t.hydrateView({viewData:n,entityData:[e]}),_=t.createView(o,{},e.isActivated);return IS.getInstance([_],!0,!1)},"getAddRegularViewScriptDto"),jF=a(s=>e=>{let t=Sn()(null,null,s),n=QF(gg)(e),o=t.createDualityView(n);return IS.getInstance([o],!0,!1)},"getDualityViewScriptDto"),ZF=a(s=>e=>{if(e.duality)return jF(s)(e);if(e.selectStatement)return JF(s)(e)},"getAddViewScriptDto"),e2=a(s=>e=>{let{wrapInQuotes:t}=xe()(gg),o=`DROP VIEW ${t(e.code||e.name)};`;return IS.getInstance([o],!0,!0)},"getDeleteViewScriptDto");Cg.exports={getAddViewScriptDto:ZF,getDeleteViewScriptDto:e2}});var Lg=U((iK,yg)=>{"use strict";var BS=class BS{isActivated;name};a(BS,"AlterRelationshipFKField");var DS=BS,US=class US{bucket;collection};a(US,"AlterRelationshipParentDto");var gS=US,YS=class YS{bucket;collection};a(YS,"AlterRelationshipChildDto");var CS=YS,MS=class MS{relationshipOnDelete;relationshipOnUpdate;relationshipMatch};a(MS,"AlterRelationshipCustomProperties");var OS=MS,xS=class xS{created;deleted;modified;parent;child;name;description;customProperties;isActivated};a(xS,"AlterRelationshipRoleCompModDto");var yS=xS,VS=class VS{id;name;relationshipType;parentField;parentCardinality;childField;isActivated;childCardinality;parentCollection;childCollection;hackoladeStyles;compMod;roleType};a(VS,"AlterRelationshipRoleDto");var LS=VS,bS=class bS{type;isActivated;unique;subtype;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;triggerUpdateColumns;role;GUID};a(bS,"AlterRelationshipDto");var wS=bS;yg.exports={AlterRelationshipRoleCompModDto:yS,AlterRelationshipRoleDto:LS,AlterRelationshipDto:wS,AlterRelationshipFKField:DS,AlterRelationshipParentDto:gS,AlterRelationshipChildDto:CS,AlterRelationshipCustomProperties:OS}});var xg=U((_K,Mg)=>{"use strict";var{AlterScriptDto:FS}=rn(),{AlterRelationshipDto:aK}=Lg(),M_=a(s=>s.role.name,"getRelationshipName"),t2=a(s=>e=>{let{getNamePrefixedWithSchemaName:t}=xe()(s),n=e.role.compMod,o=n.child.bucket.name,_=n.child.collection.name;return t(_,o)},"getFullChildTableName"),wg=a((s,e)=>t=>{var _,T;let n=t.role.compMod,o=((_=n.name)==null?void 0:_.new)||M_(t)||"";return s.createForeignKey({name:o,foreignKey:n.child.collection.fkFields,primaryKey:n.parent.collection.fkFields,customProperties:(T=n.customProperties)==null?void 0:T.new,foreignTable:n.child.collection.name,foreignSchemaName:n.child.bucket.name,foreignTableActivated:n.child.collection.isActivated,primaryTable:n.parent.collection.name,primarySchemaName:n.parent.bucket.name,primaryTableActivated:n.parent.collection.isActivated})},"getAddSingleForeignKeyStatementDto"),Bg=a(s=>{var t,n,o,_,T,u,h,A,N,P,R;let e=s.role.compMod;return e?[((t=e.name)==null?void 0:t.new)||M_(s),(n=e.parent)==null?void 0:n.bucket,(o=e.parent)==null?void 0:o.collection,(u=(T=(_=e.parent)==null?void 0:_.collection)==null?void 0:T.fkFields)==null?void 0:u.length,(h=e.child)==null?void 0:h.bucket,(A=e.child)==null?void 0:A.collection,(R=(P=(N=e.child)==null?void 0:N.collection)==null?void 0:P.fkFields)==null?void 0:R.length].every(g=>!!g):!1},"canRelationshipBeAdded"),r2=a((s,e)=>t=>t.filter(n=>Bg(n)).map(n=>{let o=wg(s,e)(n);return FS.getInstance([o.statement],o.isActivated,!1)}).filter(Boolean).filter(n=>n.scripts.some(o=>!!o.script)),"getAddForeignKeyScriptDtos"),Ug=a((s,e)=>t=>{var P,R,g,p;let{wrapInQuotes:n}=xe()(e),o=t.role.compMod,_=t2(e)(t),T=((P=o.name)==null?void 0:P.old)||M_(t)||"",u=n(T),h=s.dropForeignKey(_,u),A=!!((p=(g=(R=t.role)==null?void 0:R.compMod)==null?void 0:g.isActivated)!=null&&p.new),N=o.child.collection.isActivated;return{statement:h,isActivated:A&&N}},"getDeleteSingleForeignKeyStatementDto"),Yg=a(s=>{var t,n,o;let e=s.role.compMod;return e?[((t=e.name)==null?void 0:t.old)||M_(s),(n=e.child)==null?void 0:n.bucket,(o=e.child)==null?void 0:o.collection].every(_=>!!_):!1},"canRelationshipBeDeleted"),n2=a((s,e)=>t=>t.filter(n=>Yg(n)).map(n=>{let o=Ug(s,e)(n);return FS.getInstance([o.statement],o.isActivated,!0)}).filter(Boolean).filter(n=>n.scripts.some(o=>!!o.script)),"getDeleteForeignKeyScriptDtos"),s2=a((s,e)=>t=>t.filter(n=>Bg(n)&&Yg(n)).map(n=>{let o=Ug(s,e)(n),_=wg(s,e)(n),T=_.isActivated&&o.isActivated;return FS.getDropAndRecreateInstance(o.statement,_.statement,T)}).filter(Boolean).filter(n=>n.scripts.some(o=>!!o.script)),"getModifyForeignKeyScriptDtos");Mg.exports={getDeleteForeignKeyScriptDtos:n2,getModifyForeignKeyScriptDtos:s2,getAddForeignKeyScriptDtos:r2}});var zS=U((lK,Vg)=>{"use strict";var HS=class HS{message;stack};a(HS,"PluginError");var vS=HS,KS=class KS{require};a(KS,"App");var kS=KS,WS=class WS{log;clear};a(WS,"Logger");var qS=WS,$S=class $S{jsonSchema;modelDefinitions;internalDefinitions;externalDefinitions;containerData;entityData;entities;views;viewData;relationships;collectionRefsDefinitionsMap;isUpdateScript;level;host;clusterId;accessToken;applyToInstanceQueryRequestTimeout;script;hiddenKeys;options;modelData};a($S,"CoreData");var GS=$S;Vg.exports={App:kS,CoreData:GS,Logger:qS,PluginError:vS}});var Fg=U((uK,bg)=>{"use strict";var nN=class nN{name;isActivated};a(nN,"ContainerJsonSchema");var XS=nN,sN=class sN{backgroundColor};a(sN,"ContainerStyles");var QS=sN,iN=class iN{collectionName;isActivated;bucketId;additionalProperties;tableIfNotExists};a(iN,"EntityData");var JS=iN,oN=class oN{$schema;type;GUID};a(oN,"InternalDefinitions");var jS=oN,aN=class aN{$schema;type;GUID};a(aN,"ModelDefinitions");var ZS=aN,_N=class _N{$schema;type;GUID};a(_N,"ExternalDefinitions");var eN=_N,cN=class cN{type;isActivated;mode;subtype;compositeKey;compositePartitionKey;compositeClusteringKey;compositePrimaryKey;compositeUniqueKey;GUID};a(cN,"FieldJsonSchema");var tN=cN,lN=class lN{$schema;type;title;properties;isActivated;additionalProperties;tableIfNotExists;GUID};a(lN,"EntityJsonSchema");var rN=lN;bg.exports={ContainerJsonSchema:XS,ContainerStyles:QS,EntityData:JS,InternalDefinitions:jS,ModelDefinitions:ZS,ExternalDefinitions:eN,FieldJsonSchema:tN,EntityJsonSchema:rN}});var x_=U((hK,vg)=>{"use strict";vg.exports=Sn()});var qg=U((NK,kg)=>{"use strict";var{AlterScriptDto:Lo}=rn(),{App:SK}=zS(),i2="sequences",V_=Ct(),o2=a(({app:s})=>({container:e,dbVersion:t})=>{var T;let n=x_()(null,{dbVersion:t},s),{getDbName:o}=xe()(V_),_=o([e.role]);return(((T=e.role)==null?void 0:T.sequences)||[]).map(u=>{let h=n.createSchemaSequence({schemaName:_,sequence:u});return Lo.getInstance([h],!0,!1)}).filter(Boolean)},"getAddContainerSequencesScriptDtos"),a2=a(({app:s})=>({container:e,dbVersion:t})=>{var y,I;let n=x_()(null,{dbVersion:t},s),{getDbName:o,getGroupItemsByCompMode:_}=xe()(V_),T=o([e.role]),u=((I=(y=e.role)==null?void 0:y.compMod)==null?void 0:I[i2])||{},{new:h=[],old:A=[]}=u,{removed:N,added:P,modified:R}=_({newItems:h,oldItems:A}),g=N.map(M=>{let L=n.dropSchemaSequence({schemaName:T,sequence:M});return Lo.getInstance([L],!0,!0)}),p=P.map(M=>{let L=n.createSchemaSequence({schemaName:T,sequence:M});return Lo.getInstance([L],!0,!1)});return[...R.map(M=>{let L=V_.find(A,{id:M.id})||{},v=n.alterSchemaSequence({schemaName:T,sequence:M,oldSequence:L}),H=v.startsWith("DROP");return Lo.getInstance([v],!0,H)}),...g,...p].filter(Boolean)},"getModifyContainerSequencesScriptDtos"),_2=a(({app:s})=>({container:e,dbVersion:t})=>{var T;let n=x_()(null,{dbVersion:t},s),{getDbName:o}=xe()(V_),_=o([e.role]);return(((T=e.role)==null?void 0:T.sequences)||[]).map(u=>{let h=n.dropSchemaSequence({schemaName:_,sequence:u});return Lo.getInstance([h],!0,!0)}).filter(Boolean)},"getDeleteContainerSequencesScriptDtos");kg.exports={getAddContainerSequencesScriptDtos:o2,getModifyContainerSequencesScriptDtos:a2,getDeleteContainerSequencesScriptDtos:_2}});var Hg=U((DK,Gg)=>{"use strict";var{getAddContainerScriptDto:c2,getDeleteContainerScriptDto:l2}=mD(),{getAddCollectionScriptDto:T2,getDeleteCollectionScriptDto:u2,getModifyCollectionScriptDtos:E2,getAddColumnScriptDtos:h2,getDeleteColumnScriptDtos:S2,getModifyColumnScriptDtos:N2}=dg(),{getDeleteUdtScriptDto:f2,getCreateUdtScriptDto:A2,getAddColumnToTypeScriptDtos:d2,getDeleteColumnFromTypeScriptDtos:p2,getModifyColumnOfTypeScriptDtos:m2}=Pg(),{getAddViewScriptDto:P2,getDeleteViewScriptDto:R2}=Og(),{getModifyForeignKeyScriptDtos:I2,getDeleteForeignKeyScriptDtos:D2,getAddForeignKeyScriptDtos:g2}=xg(),{AlterScriptDto:AK,ModificationScript:dK}=rn(),{App:pK,CoreData:mK}=zS(),{InternalDefinitions:PK,ModelDefinitions:RK,ExternalDefinitions:IK}=Fg(),{getModifyContainerSequencesScriptDtos:C2,getDeleteContainerSequencesScriptDtos:O2,getAddContainerSequencesScriptDtos:y2}=qg(),Is=Ct(),L2=a(({collection:s,app:e})=>{var T,u,h,A,N,P,R,g;let t=(A=(h=(u=(T=s.properties)==null?void 0:T.containers)==null?void 0:u.properties)==null?void 0:h.added)==null?void 0:A.items,n=(g=(R=(P=(N=s.properties)==null?void 0:N.containers)==null?void 0:P.properties)==null?void 0:R.deleted)==null?void 0:g.items,o=[].concat(t).filter(Boolean).map(p=>c2(e)(Object.keys(p.properties)[0])),_=[].concat(n).filter(Boolean).map(p=>l2(e)(Object.keys(p.properties)[0]));return[...o,..._].filter(Boolean)},"getAlterContainersScriptDtos"),w2=a(({collection:s,app:e,dbVersion:t,modelDefinitions:n,internalDefinitions:o,externalDefinitions:_})=>{var m,y,I,M,L,v,H,te,se,Ae,V,Y;let T=[].concat((M=(I=(y=(m=s.properties)==null?void 0:m.entities)==null?void 0:y.properties)==null?void 0:I.added)==null?void 0:M.items).filter(Boolean).map(F=>Object.values(F.properties)[0]),u=[].concat((te=(H=(v=(L=s.properties)==null?void 0:L.entities)==null?void 0:v.properties)==null?void 0:H.deleted)==null?void 0:te.items).filter(Boolean).map(F=>Object.values(F.properties)[0]),h=[].concat((Y=(V=(Ae=(se=s.properties)==null?void 0:se.entities)==null?void 0:Ae.properties)==null?void 0:V.modified)==null?void 0:Y.items).filter(Boolean).map(F=>Object.values(F.properties)[0]),A=T.filter(F=>{var J;return(J=F.compMod)==null?void 0:J.created}).map(T2({app:e,dbVersion:t,modelDefinitions:n,internalDefinitions:o,externalDefinitions:_})),N=u.filter(F=>{var J;return(J=F.compMod)==null?void 0:J.deleted}).map(u2(e)),P=h.filter(F=>{var J;return(J=F.compMod)==null?void 0:J.modified}).flatMap(E2({app:e,dbVersion:t})),R=T.filter(F=>{var J;return!((J=F==null?void 0:F.compMod)!=null&&J.created)}).flatMap(h2({app:e,dbVersion:t,modelDefinitions:n,internalDefinitions:o,externalDefinitions:_})),g=u.filter(F=>{var J;return!((J=F==null?void 0:F.compMod)!=null&&J.deleted)}).flatMap(S2(e)),p=h.flatMap(N2(e,t));return[...A,...N,...P,...R,...g,...p].filter(Boolean)},"getAlterCollectionsScriptDtos"),B2=a((s,e,t)=>{var _,T,u,h,A,N,P,R;let n=[].concat((h=(u=(T=(_=s.properties)==null?void 0:_.views)==null?void 0:T.properties)==null?void 0:u.added)==null?void 0:h.items).filter(Boolean).map(g=>Object.values(g.properties)[0]).map(g=>({...g,...g.role||{}})).filter(g=>{var p;return(p=g.compMod)==null?void 0:p.created}).map(P2(e));return[...[].concat((R=(P=(N=(A=s.properties)==null?void 0:A.views)==null?void 0:N.properties)==null?void 0:P.deleted)==null?void 0:R.items).filter(Boolean).map(g=>Object.values(g.properties)[0]).map(g=>({...g,...g.role||{}})).map(R2(e)),...n].filter(Boolean)},"getAlterViewScriptDtos"),U2=a(({collection:s,app:e,dbVersion:t,modelDefinitions:n,internalDefinitions:o,externalDefinitions:_})=>{var P,R,g,p,m,y,I,M,L,v,H,te,se,Ae,V,Y,F,J,Te,Pe;let T=[].concat((p=(g=(R=(P=s.properties)==null?void 0:P.modelDefinitions)==null?void 0:R.properties)==null?void 0:g.added)==null?void 0:p.items).filter(Boolean).map(ee=>Object.values(ee.properties)[0]).map(ee=>({...ee,...Is.omit(ee.role,"properties")||{}})).filter(ee=>{var ye;return(ye=ee.compMod)==null?void 0:ye.created}).map(A2({app:e,dbVersion:t,modelDefinitions:n,internalDefinitions:o,externalDefinitions:_})),u=[].concat((M=(I=(y=(m=s.properties)==null?void 0:m.modelDefinitions)==null?void 0:y.properties)==null?void 0:I.deleted)==null?void 0:M.items).filter(Boolean).map(ee=>Object.values(ee.properties)[0]).map(ee=>({...ee,...Is.omit(ee.role,"properties")||{}})).filter(ee=>{var ye;return(ye=ee.compMod)==null?void 0:ye.deleted}).map(f2(e)),h=[].concat((te=(H=(v=(L=s.properties)==null?void 0:L.modelDefinitions)==null?void 0:v.properties)==null?void 0:H.added)==null?void 0:te.items).filter(Boolean).map(ee=>Object.values(ee.properties)[0]).filter(ee=>!ee.compMod).map(ee=>({...ee,...Is.omit(ee.role,"properties")||{}})).filter(ee=>ee.childType==="object_udt").flatMap(d2({app:e,dbVersion:t,modelDefinitions:n,internalDefinitions:o,externalDefinitions:_})),A=[].concat((Y=(V=(Ae=(se=s.properties)==null?void 0:se.modelDefinitions)==null?void 0:Ae.properties)==null?void 0:V.deleted)==null?void 0:Y.items).filter(Boolean).map(ee=>Object.values(ee.properties)[0]).filter(ee=>!ee.compMod).map(ee=>({...ee,...Is.omit(ee.role,"properties")||{}})).filter(ee=>ee.childType==="object_udt").flatMap(p2(e)),N=[].concat((Pe=(Te=(J=(F=s.properties)==null?void 0:F.modelDefinitions)==null?void 0:J.properties)==null?void 0:Te.modified)==null?void 0:Pe.items).filter(Boolean).map(ee=>Object.values(ee.properties)[0]).filter(ee=>!ee.compMod).map(ee=>({...ee,...Is.omit(ee.role,"properties")||{}})).filter(ee=>ee.childType==="object_udt").flatMap(m2(e));return[...u,...T,...h,...A,...N].filter(Boolean)},"getAlterModelDefinitionsScriptDtos"),Y2=a(({collection:s,app:e})=>{var A,N,P,R,g,p,m,y,I,M,L,v;let t=Sn()(null,null,e),n=[].concat((R=(P=(N=(A=s.properties)==null?void 0:A.relationships)==null?void 0:N.properties)==null?void 0:P.added)==null?void 0:R.items).filter(Boolean).map(H=>Object.values(H.properties)[0]).filter(H=>{var te,se;return(se=(te=H==null?void 0:H.role)==null?void 0:te.compMod)==null?void 0:se.created}),o=[].concat((y=(m=(p=(g=s.properties)==null?void 0:g.relationships)==null?void 0:p.properties)==null?void 0:m.deleted)==null?void 0:y.items).filter(Boolean).map(H=>Object.values(H.properties)[0]).filter(H=>{var te,se;return(se=(te=H==null?void 0:H.role)==null?void 0:te.compMod)==null?void 0:se.deleted}),_=[].concat((v=(L=(M=(I=s.properties)==null?void 0:I.relationships)==null?void 0:M.properties)==null?void 0:L.modified)==null?void 0:v.items).filter(Boolean).map(H=>Object.values(H.properties)[0]).filter(H=>{var te,se;return(se=(te=H==null?void 0:H.role)==null?void 0:te.compMod)==null?void 0:se.modified}),T=D2(t,Is)(o),u=g2(t,Is)(n),h=I2(t,Is)(_);return[...T,...u,...h].filter(Boolean)},"getAlterRelationshipsScriptDtos"),M2=a(s=>{if(!s)return;let e=s.scripts.map(t=>({...t,script:(t.script||"").trim()})).filter(t=>!!t.script);if(e.length)return{...s,scripts:e}},"prettifyAlterScriptDto"),x2=a(({collection:s,app:e,dbVersion:t})=>{var A,N,P,R,g,p,m,y,I,M,L,v;let n=(R=(P=(N=(A=s.properties)==null?void 0:A.containers)==null?void 0:N.properties)==null?void 0:P.added)==null?void 0:R.items,o=(y=(m=(p=(g=s.properties)==null?void 0:g.containers)==null?void 0:p.properties)==null?void 0:m.deleted)==null?void 0:y.items,_=(v=(L=(M=(I=s.properties)==null?void 0:I.containers)==null?void 0:M.properties)==null?void 0:L.modified)==null?void 0:v.items,T=[].concat(n).filter(Boolean).map(H=>Object.values(H.properties)[0]).flatMap(H=>y2({app:e})({container:H,dbVersion:t})),u=[].concat(o).filter(Boolean).map(H=>Object.values(H.properties)[0]).flatMap(H=>O2({app:e})({container:H,dbVersion:t})),h=[].concat(_).filter(Boolean).map(H=>Object.values(H.properties)[0]).flatMap(H=>C2({app:e})({container:H,dbVersion:t}));return[...T,...u,...h].filter(Boolean)},"getAlterContainersSequencesScriptDtos"),V2=a((s,e)=>{var g;let t=JSON.parse(s.jsonSchema);if(!t)throw new Error('"comparisonModelCollection" is not found. Alter script can be generated only from Delta model');let n=JSON.parse(s.modelDefinitions),o=JSON.parse(s.internalDefinitions),_=JSON.parse(s.externalDefinitions),T=(g=s.modelData[0])==null?void 0:g.dbVersion,u=L2({collection:t,app:e}),h=w2({collection:t,app:e,dbVersion:T,modelDefinitions:n,internalDefinitions:o,externalDefinitions:_}),A=B2(t,e,T),N=U2({collection:t,app:e,dbVersion:T,modelDefinitions:n,internalDefinitions:o,externalDefinitions:_}),P=Y2({collection:t,app:e}),R=x2({collection:t,app:e,dbVersion:T});return[...u,...R,...N,...h,...A,...P].filter(Boolean).map(p=>M2(p)).filter(Boolean)},"getAlterScriptDtos");Gg.exports={getAlterScriptDtos:V2}});var Xg=U((OK,zg)=>{"use strict";var{getAlterScriptDtos:b_}=Hg(),{AlterScriptDto:CK}=rn(),Kg=Ct(),Wg=a(s=>(e,t)=>{let{commentIfDeactivated:n}=xe()(s);return e.map(o=>o.isActivated===!1?o.scripts.map(_=>n(_.script,{isActivated:!1,isPartOfLine:!1})):t?o.scripts.map(_=>_.script):o.scripts.map(_=>n(_.script,{isActivated:!_.isDropScript,isPartOfLine:!1}))).flat().filter(Boolean).map(o=>o.trim()).filter(Boolean).join(`

`)},"joinAlterScriptDtosIntoScript"),b2=a((s,e)=>{var o,_;let t=b_(s,e),n=(_=(o=s.options)==null?void 0:o.additionalOptions)==null?void 0:_.some(T=>T.id==="applyDropStatements"&&T.value);return Wg(Kg)(t,n)},"buildEntityLevelAlterScript"),F2=a((s,e)=>b_(s,e).some(n=>n.isActivated&&n.scripts.some(o=>o.isDropScript)),"doesEntityLevelAlterScriptContainDropStatements"),$g=a(s=>({...s,jsonSchema:s.collections[0],internalDefinitions:Object.values(s.internalDefinitions)[0]}),"mapCoreDataForContainerLevelScripts"),v2=a((s,e)=>{var _,T;let t=$g(s),n=b_(t,e),o=(T=(_=t.options)==null?void 0:_.additionalOptions)==null?void 0:T.some(u=>u.id==="applyDropStatements"&&u.value);return Wg(Kg)(n,o)},"buildContainerLevelAlterScript"),k2=a((s,e)=>{let t=$g(s);return b_(t,e).some(o=>o.isActivated&&o.scripts.some(_=>_.isDropScript))},"doesContainerLevelAlterScriptContainDropStatements");zg.exports={buildEntityLevelAlterScript:b2,doesEntityLevelAlterScriptContainDropStatements:F2,buildContainerLevelAlterScript:v2,doesContainerLevelAlterScriptContainDropStatements:k2}});var Qg=ED(),q2=SD(),{doesContainerLevelAlterScriptContainDropStatements:G2,doesEntityLevelAlterScriptContainDropStatements:H2,buildContainerLevelAlterScript:K2,buildEntityLevelAlterScript:W2}=Xg();module.exports={generateScript(s,e,t,n){try{let o=W2(s,n);t(null,o)}catch(o){e.log("error",{message:o.message,stack:o.stack},"Oracle Forward-Engineering Error"),t({message:o.message,stack:o.stack})}},generateViewScript(s,e,t,n){t(new Error("Forward-Engineering of delta model on view level is not supported"))},generateContainerScript(s,e,t,n){try{let o=K2(s,n);t(null,o)}catch(o){e.log("error",{message:o.message,stack:o.stack},"Oracle Forward-Engineering Error"),t({message:o.message,stack:o.stack})}},getDatabases(s,e,t,n){e.progress({message:"Find all schemas"}),Qg.getSchemaNames(s,e,t,n)},applyToInstance(s,e,t,n){e.clear(),e.log("info",s,"connectionInfo",s.hiddenKeys),q2.applyToInstance(s,e,n).then(o=>{t(null,o)}).catch(o=>{let _={message:o.message,stack:o.stack};e.log("error",_,"Error when applying to instance"),t(_)})},testConnection(s,e,t,n){Qg.testConnection(s,e,t,n)},isDropInStatements(s,e,t,n){try{if(s.level==="container"){let o=G2(s,n);t(null,o)}else{let o=H2(s,n);t(null,o)}}catch(o){t({message:o.message,stack:o.stack})}}};
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
