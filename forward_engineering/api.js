"use strict";var RU=Object.defineProperty;var _=(s,e)=>RU(s,"name",{value:e,configurable:!0});var Y=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var Ct=Y((ui,eo)=>{(function(){var s,e="4.17.21",t=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",T="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",A=1,N=2,R=4,g=1,I=2,p=1,m=2,y=4,P=8,M=16,B=32,F=64,$=128,j=256,se=512,ue=30,x="...",ne=800,U=16,G=1,Z=2,pe=3,Se=1/0,te=9007199254740991,we=17976931348623157e292,J=NaN,Te=4294967295,Be=Te-1,tt=Te>>>1,It=[["ary",$],["bind",p],["bindKey",m],["curry",P],["curryRight",M],["flip",se],["partial",B],["partialRight",F],["rearg",j]],Et="[object Arguments]",er="[object Array]",vr="[object AsyncFunction]",dr="[object Boolean]",kr="[object Date]",xi="[object DOMException]",Zn="[object Error]",Ln="[object Function]",es="[object GeneratorFunction]",vt="[object Map]",V="[object Number]",Q="[object Null]",ae="[object Object]",de="[object Promise]",Ze="[object Proxy]",Ke="[object RegExp]",ve="[object Set]",rt="[object String]",Yt="[object Symbol]",qr="[object Undefined]",pr="[object WeakMap]",tr="[object WeakSet]",kt="[object ArrayBuffer]",rr="[object DataView]",Gr="[object Float32Array]",sn="[object Float64Array]",on="[object Int8Array]",An="[object Int16Array]",ts="[object Int32Array]",Qs="[object Uint8Array]",Vi="[object Uint8ClampedArray]",bi="[object Uint16Array]",rs="[object Uint32Array]",Js=/\b__p \+= '';/g,wo=/\b(__p \+=) '' \+/g,G_=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Bo=/&(?:amp|lt|gt|quot|#39);/g,Uo=/[&<>"']/g,H_=RegExp(Bo.source),Yo=RegExp(Uo.source),Mo=/<%-([\s\S]+?)%>/g,K_=/<%([\s\S]+?)%>/g,xo=/<%=([\s\S]+?)%>/g,W_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vo=/^\w*$/,js=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Os=/[\\^$.*+?()[\]{}|]/g,eC=RegExp(Os.source),$_=/^\s+/,tC=/\s/,rC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nC=/\{\n\/\* \[wrapped with (.+)\] \*/,sC=/,? & /,iC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oC=/[()=,{}\[\]\/\s]/,aC=/\\(\\)?/g,_C=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,hN=/\w*$/,cC=/^[-+]0x[0-9a-f]+$/i,lC=/^0b[01]+$/i,TC=/^\[object .+?Constructor\]$/,uC=/^0o[0-7]+$/i,EC=/^(?:0|[1-9]\d*)$/,hC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bo=/($^)/,SC=/['\n\r\u2028\u2029\\]/g,Fo="\\ud800-\\udfff",NC="\\u0300-\\u036f",fC="\\ufe20-\\ufe2f",AC="\\u20d0-\\u20ff",SN=NC+fC+AC,NN="\\u2700-\\u27bf",fN="a-z\\xdf-\\xf6\\xf8-\\xff",dC="\\xac\\xb1\\xd7\\xf7",pC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",mC="\\u2000-\\u206f",PC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",AN="A-Z\\xc0-\\xd6\\xd8-\\xde",dN="\\ufe0e\\ufe0f",pN=dC+pC+mC+PC,z_="['\u2019]",RC="["+Fo+"]",mN="["+pN+"]",vo="["+SN+"]",PN="\\d+",IC="["+NN+"]",RN="["+fN+"]",IN="[^"+Fo+pN+PN+NN+fN+AN+"]",X_="\\ud83c[\\udffb-\\udfff]",DC="(?:"+vo+"|"+X_+")",DN="[^"+Fo+"]",Q_="(?:\\ud83c[\\udde6-\\uddff]){2}",J_="[\\ud800-\\udbff][\\udc00-\\udfff]",Zs="["+AN+"]",gN="\\u200d",CN="(?:"+RN+"|"+IN+")",gC="(?:"+Zs+"|"+IN+")",ON="(?:"+z_+"(?:d|ll|m|re|s|t|ve))?",yN="(?:"+z_+"(?:D|LL|M|RE|S|T|VE))?",LN=DC+"?",wN="["+dN+"]?",CC="(?:"+gN+"(?:"+[DN,Q_,J_].join("|")+")"+wN+LN+")*",OC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",BN=wN+LN+CC,LC="(?:"+[IC,Q_,J_].join("|")+")"+BN,wC="(?:"+[DN+vo+"?",vo,Q_,J_,RC].join("|")+")",BC=RegExp(z_,"g"),UC=RegExp(vo,"g"),j_=RegExp(X_+"(?="+X_+")|"+wC+BN,"g"),YC=RegExp([Zs+"?"+RN+"+"+ON+"(?="+[mN,Zs,"$"].join("|")+")",gC+"+"+yN+"(?="+[mN,Zs+CN,"$"].join("|")+")",Zs+"?"+CN+"+"+ON,Zs+"+"+yN,yC,OC,PN,LC].join("|"),"g"),MC=RegExp("["+gN+Fo+SN+dN+"]"),xC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,VC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bC=-1,_t={};_t[Gr]=_t[sn]=_t[on]=_t[An]=_t[ts]=_t[Qs]=_t[Vi]=_t[bi]=_t[rs]=!0,_t[Et]=_t[er]=_t[kt]=_t[dr]=_t[rr]=_t[kr]=_t[Zn]=_t[Ln]=_t[vt]=_t[V]=_t[ae]=_t[Ke]=_t[ve]=_t[rt]=_t[pr]=!1;var nt={};nt[Et]=nt[er]=nt[kt]=nt[rr]=nt[dr]=nt[kr]=nt[Gr]=nt[sn]=nt[on]=nt[An]=nt[ts]=nt[vt]=nt[V]=nt[ae]=nt[Ke]=nt[ve]=nt[rt]=nt[Yt]=nt[Qs]=nt[Vi]=nt[bi]=nt[rs]=!0,nt[Zn]=nt[Ln]=nt[pr]=!1;var FC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},vC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},GC=parseFloat,HC=parseInt,UN=typeof global=="object"&&global&&global.Object===Object&&global,KC=typeof self=="object"&&self&&self.Object===Object&&self,qt=UN||KC||Function("return this")(),Z_=typeof ui=="object"&&ui&&!ui.nodeType&&ui,ys=Z_&&typeof eo=="object"&&eo&&!eo.nodeType&&eo,YN=ys&&ys.exports===Z_,ec=YN&&UN.process,Hr=function(){try{var L=ys&&ys.require&&ys.require("util").types;return L||ec&&ec.binding&&ec.binding("util")}catch{}}(),MN=Hr&&Hr.isArrayBuffer,xN=Hr&&Hr.isDate,VN=Hr&&Hr.isMap,bN=Hr&&Hr.isRegExp,FN=Hr&&Hr.isSet,vN=Hr&&Hr.isTypedArray;function Lr(L,k,b){switch(b.length){case 0:return L.call(k);case 1:return L.call(k,b[0]);case 2:return L.call(k,b[0],b[1]);case 3:return L.call(k,b[0],b[1],b[2])}return L.apply(k,b)}_(Lr,"apply");function WC(L,k,b,ie){for(var Ie=-1,qe=L==null?0:L.length;++Ie<qe;){var Mt=L[Ie];k(ie,Mt,b(Mt),L)}return ie}_(WC,"arrayAggregator");function Kr(L,k){for(var b=-1,ie=L==null?0:L.length;++b<ie&&k(L[b],b,L)!==!1;);return L}_(Kr,"arrayEach");function $C(L,k){for(var b=L==null?0:L.length;b--&&k(L[b],b,L)!==!1;);return L}_($C,"arrayEachRight");function kN(L,k){for(var b=-1,ie=L==null?0:L.length;++b<ie;)if(!k(L[b],b,L))return!1;return!0}_(kN,"arrayEvery");function ns(L,k){for(var b=-1,ie=L==null?0:L.length,Ie=0,qe=[];++b<ie;){var Mt=L[b];k(Mt,b,L)&&(qe[Ie++]=Mt)}return qe}_(ns,"arrayFilter");function ko(L,k){var b=L==null?0:L.length;return!!b&&ei(L,k,0)>-1}_(ko,"arrayIncludes");function tc(L,k,b){for(var ie=-1,Ie=L==null?0:L.length;++ie<Ie;)if(b(k,L[ie]))return!0;return!1}_(tc,"arrayIncludesWith");function ht(L,k){for(var b=-1,ie=L==null?0:L.length,Ie=Array(ie);++b<ie;)Ie[b]=k(L[b],b,L);return Ie}_(ht,"arrayMap");function ss(L,k){for(var b=-1,ie=k.length,Ie=L.length;++b<ie;)L[Ie+b]=k[b];return L}_(ss,"arrayPush");function rc(L,k,b,ie){var Ie=-1,qe=L==null?0:L.length;for(ie&&qe&&(b=L[++Ie]);++Ie<qe;)b=k(b,L[Ie],Ie,L);return b}_(rc,"arrayReduce");function zC(L,k,b,ie){var Ie=L==null?0:L.length;for(ie&&Ie&&(b=L[--Ie]);Ie--;)b=k(b,L[Ie],Ie,L);return b}_(zC,"arrayReduceRight");function nc(L,k){for(var b=-1,ie=L==null?0:L.length;++b<ie;)if(k(L[b],b,L))return!0;return!1}_(nc,"arraySome");var XC=sc("length");function QC(L){return L.split("")}_(QC,"asciiToArray");function JC(L){return L.match(iC)||[]}_(JC,"asciiWords");function qN(L,k,b){var ie;return b(L,function(Ie,qe,Mt){if(k(Ie,qe,Mt))return ie=qe,!1}),ie}_(qN,"baseFindKey");function qo(L,k,b,ie){for(var Ie=L.length,qe=b+(ie?1:-1);ie?qe--:++qe<Ie;)if(k(L[qe],qe,L))return qe;return-1}_(qo,"baseFindIndex");function ei(L,k,b){return k===k?cO(L,k,b):qo(L,GN,b)}_(ei,"baseIndexOf");function jC(L,k,b,ie){for(var Ie=b-1,qe=L.length;++Ie<qe;)if(ie(L[Ie],k))return Ie;return-1}_(jC,"baseIndexOfWith");function GN(L){return L!==L}_(GN,"baseIsNaN");function HN(L,k){var b=L==null?0:L.length;return b?oc(L,k)/b:J}_(HN,"baseMean");function sc(L){return function(k){return k==null?s:k[L]}}_(sc,"baseProperty");function ic(L){return function(k){return L==null?s:L[k]}}_(ic,"basePropertyOf");function KN(L,k,b,ie,Ie){return Ie(L,function(qe,Mt,et){b=ie?(ie=!1,qe):k(b,qe,Mt,et)}),b}_(KN,"baseReduce");function ZC(L,k){var b=L.length;for(L.sort(k);b--;)L[b]=L[b].value;return L}_(ZC,"baseSortBy");function oc(L,k){for(var b,ie=-1,Ie=L.length;++ie<Ie;){var qe=k(L[ie]);qe!==s&&(b=b===s?qe:b+qe)}return b}_(oc,"baseSum");function ac(L,k){for(var b=-1,ie=Array(L);++b<L;)ie[b]=k(b);return ie}_(ac,"baseTimes");function eO(L,k){return ht(k,function(b){return[b,L[b]]})}_(eO,"baseToPairs");function WN(L){return L&&L.slice(0,QN(L)+1).replace($_,"")}_(WN,"baseTrim");function wr(L){return function(k){return L(k)}}_(wr,"baseUnary");function _c(L,k){return ht(k,function(b){return L[b]})}_(_c,"baseValues");function Fi(L,k){return L.has(k)}_(Fi,"cacheHas");function $N(L,k){for(var b=-1,ie=L.length;++b<ie&&ei(k,L[b],0)>-1;);return b}_($N,"charsStartIndex");function zN(L,k){for(var b=L.length;b--&&ei(k,L[b],0)>-1;);return b}_(zN,"charsEndIndex");function tO(L,k){for(var b=L.length,ie=0;b--;)L[b]===k&&++ie;return ie}_(tO,"countHolders");var rO=ic(FC),nO=ic(vC);function sO(L){return"\\"+qC[L]}_(sO,"escapeStringChar");function iO(L,k){return L==null?s:L[k]}_(iO,"getValue");function ti(L){return MC.test(L)}_(ti,"hasUnicode");function oO(L){return xC.test(L)}_(oO,"hasUnicodeWord");function aO(L){for(var k,b=[];!(k=L.next()).done;)b.push(k.value);return b}_(aO,"iteratorToArray");function cc(L){var k=-1,b=Array(L.size);return L.forEach(function(ie,Ie){b[++k]=[Ie,ie]}),b}_(cc,"mapToArray");function XN(L,k){return function(b){return L(k(b))}}_(XN,"overArg");function is(L,k){for(var b=-1,ie=L.length,Ie=0,qe=[];++b<ie;){var Mt=L[b];(Mt===k||Mt===h)&&(L[b]=h,qe[Ie++]=b)}return qe}_(is,"replaceHolders");function Go(L){var k=-1,b=Array(L.size);return L.forEach(function(ie){b[++k]=ie}),b}_(Go,"setToArray");function _O(L){var k=-1,b=Array(L.size);return L.forEach(function(ie){b[++k]=[ie,ie]}),b}_(_O,"setToPairs");function cO(L,k,b){for(var ie=b-1,Ie=L.length;++ie<Ie;)if(L[ie]===k)return ie;return-1}_(cO,"strictIndexOf");function lO(L,k,b){for(var ie=b+1;ie--;)if(L[ie]===k)return ie;return ie}_(lO,"strictLastIndexOf");function ri(L){return ti(L)?uO(L):XC(L)}_(ri,"stringSize");function an(L){return ti(L)?EO(L):QC(L)}_(an,"stringToArray");function QN(L){for(var k=L.length;k--&&tC.test(L.charAt(k)););return k}_(QN,"trimmedEndIndex");var TO=ic(kC);function uO(L){for(var k=j_.lastIndex=0;j_.test(L);)++k;return k}_(uO,"unicodeSize");function EO(L){return L.match(j_)||[]}_(EO,"unicodeToArray");function hO(L){return L.match(YC)||[]}_(hO,"unicodeWords");var SO=_(function L(k){k=k==null?qt:os.defaults(qt.Object(),k,os.pick(qt,VC));var b=k.Array,ie=k.Date,Ie=k.Error,qe=k.Function,Mt=k.Math,et=k.Object,lc=k.RegExp,NO=k.String,Wr=k.TypeError,Ho=b.prototype,fO=qe.prototype,ni=et.prototype,Ko=k["__core-js_shared__"],Wo=fO.toString,Xe=ni.hasOwnProperty,AO=0,JN=function(){var r=/[^.]+$/.exec(Ko&&Ko.keys&&Ko.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),$o=ni.toString,dO=Wo.call(et),pO=qt._,mO=lc("^"+Wo.call(Xe).replace(Os,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zo=YN?k.Buffer:s,as=k.Symbol,Xo=k.Uint8Array,jN=zo?zo.allocUnsafe:s,Qo=XN(et.getPrototypeOf,et),ZN=et.create,ef=ni.propertyIsEnumerable,Jo=Ho.splice,tf=as?as.isConcatSpreadable:s,vi=as?as.iterator:s,Ls=as?as.toStringTag:s,jo=function(){try{var r=Ms(et,"defineProperty");return r({},"",{}),r}catch{}}(),PO=k.clearTimeout!==qt.clearTimeout&&k.clearTimeout,RO=ie&&ie.now!==qt.Date.now&&ie.now,IO=k.setTimeout!==qt.setTimeout&&k.setTimeout,Zo=Mt.ceil,ea=Mt.floor,Tc=et.getOwnPropertySymbols,DO=zo?zo.isBuffer:s,rf=k.isFinite,gO=Ho.join,CO=XN(et.keys,et),xt=Mt.max,nr=Mt.min,OO=ie.now,yO=k.parseInt,nf=Mt.random,LO=Ho.reverse,uc=Ms(k,"DataView"),ki=Ms(k,"Map"),Ec=Ms(k,"Promise"),si=Ms(k,"Set"),qi=Ms(k,"WeakMap"),Gi=Ms(et,"create"),ta=qi&&new qi,ii={},wO=xs(uc),BO=xs(ki),UO=xs(Ec),YO=xs(si),MO=xs(qi),ra=as?as.prototype:s,Hi=ra?ra.valueOf:s,sf=ra?ra.toString:s;function f(r){if(pt(r)&&!De(r)&&!(r instanceof Ue)){if(r instanceof $r)return r;if(Xe.call(r,"__wrapped__"))return oA(r)}return new $r(r)}_(f,"lodash");var oi=function(){function r(){}return _(r,"object"),function(i){if(!ft(i))return{};if(ZN)return ZN(i);r.prototype=i;var l=new r;return r.prototype=s,l}}();function na(){}_(na,"baseLodash");function $r(r,i){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=s}_($r,"LodashWrapper"),f.templateSettings={escape:Mo,evaluate:K_,interpolate:xo,variable:"",imports:{_:f}},f.prototype=na.prototype,f.prototype.constructor=f,$r.prototype=oi(na.prototype),$r.prototype.constructor=$r;function Ue(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Te,this.__views__=[]}_(Ue,"LazyWrapper");function xO(){var r=new Ue(this.__wrapped__);return r.__actions__=mr(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=mr(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=mr(this.__views__),r}_(xO,"lazyClone");function VO(){if(this.__filtered__){var r=new Ue(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}_(VO,"lazyReverse");function bO(){var r=this.__wrapped__.value(),i=this.__dir__,l=De(r),E=i<0,S=l?r.length:0,d=Qy(0,S,this.__views__),D=d.start,C=d.end,w=C-D,H=E?C:D-1,K=this.__iteratees__,z=K.length,re=0,_e=nr(w,this.__takeCount__);if(!l||!E&&S==w&&_e==w)return yf(r,this.__actions__);var fe=[];e:for(;w--&&re<_e;){H+=i;for(var Ce=-1,Ae=r[H];++Ce<z;){var Le=K[Ce],Me=Le.iteratee,Yr=Le.type,Sr=Me(Ae);if(Yr==Z)Ae=Sr;else if(!Sr){if(Yr==G)continue e;break e}}fe[re++]=Ae}return fe}_(bO,"lazyValue"),Ue.prototype=oi(na.prototype),Ue.prototype.constructor=Ue;function ws(r){var i=-1,l=r==null?0:r.length;for(this.clear();++i<l;){var E=r[i];this.set(E[0],E[1])}}_(ws,"Hash");function FO(){this.__data__=Gi?Gi(null):{},this.size=0}_(FO,"hashClear");function vO(r){var i=this.has(r)&&delete this.__data__[r];return this.size-=i?1:0,i}_(vO,"hashDelete");function kO(r){var i=this.__data__;if(Gi){var l=i[r];return l===T?s:l}return Xe.call(i,r)?i[r]:s}_(kO,"hashGet");function qO(r){var i=this.__data__;return Gi?i[r]!==s:Xe.call(i,r)}_(qO,"hashHas");function GO(r,i){var l=this.__data__;return this.size+=this.has(r)?0:1,l[r]=Gi&&i===s?T:i,this}_(GO,"hashSet"),ws.prototype.clear=FO,ws.prototype.delete=vO,ws.prototype.get=kO,ws.prototype.has=qO,ws.prototype.set=GO;function wn(r){var i=-1,l=r==null?0:r.length;for(this.clear();++i<l;){var E=r[i];this.set(E[0],E[1])}}_(wn,"ListCache");function HO(){this.__data__=[],this.size=0}_(HO,"listCacheClear");function KO(r){var i=this.__data__,l=sa(i,r);if(l<0)return!1;var E=i.length-1;return l==E?i.pop():Jo.call(i,l,1),--this.size,!0}_(KO,"listCacheDelete");function WO(r){var i=this.__data__,l=sa(i,r);return l<0?s:i[l][1]}_(WO,"listCacheGet");function $O(r){return sa(this.__data__,r)>-1}_($O,"listCacheHas");function zO(r,i){var l=this.__data__,E=sa(l,r);return E<0?(++this.size,l.push([r,i])):l[E][1]=i,this}_(zO,"listCacheSet"),wn.prototype.clear=HO,wn.prototype.delete=KO,wn.prototype.get=WO,wn.prototype.has=$O,wn.prototype.set=zO;function Bn(r){var i=-1,l=r==null?0:r.length;for(this.clear();++i<l;){var E=r[i];this.set(E[0],E[1])}}_(Bn,"MapCache");function XO(){this.size=0,this.__data__={hash:new ws,map:new(ki||wn),string:new ws}}_(XO,"mapCacheClear");function QO(r){var i=Na(this,r).delete(r);return this.size-=i?1:0,i}_(QO,"mapCacheDelete");function JO(r){return Na(this,r).get(r)}_(JO,"mapCacheGet");function jO(r){return Na(this,r).has(r)}_(jO,"mapCacheHas");function ZO(r,i){var l=Na(this,r),E=l.size;return l.set(r,i),this.size+=l.size==E?0:1,this}_(ZO,"mapCacheSet"),Bn.prototype.clear=XO,Bn.prototype.delete=QO,Bn.prototype.get=JO,Bn.prototype.has=jO,Bn.prototype.set=ZO;function Bs(r){var i=-1,l=r==null?0:r.length;for(this.__data__=new Bn;++i<l;)this.add(r[i])}_(Bs,"SetCache");function ey(r){return this.__data__.set(r,T),this}_(ey,"setCacheAdd");function ty(r){return this.__data__.has(r)}_(ty,"setCacheHas"),Bs.prototype.add=Bs.prototype.push=ey,Bs.prototype.has=ty;function _n(r){var i=this.__data__=new wn(r);this.size=i.size}_(_n,"Stack");function ry(){this.__data__=new wn,this.size=0}_(ry,"stackClear");function ny(r){var i=this.__data__,l=i.delete(r);return this.size=i.size,l}_(ny,"stackDelete");function sy(r){return this.__data__.get(r)}_(sy,"stackGet");function iy(r){return this.__data__.has(r)}_(iy,"stackHas");function oy(r,i){var l=this.__data__;if(l instanceof wn){var E=l.__data__;if(!ki||E.length<t-1)return E.push([r,i]),this.size=++l.size,this;l=this.__data__=new Bn(E)}return l.set(r,i),this.size=l.size,this}_(oy,"stackSet"),_n.prototype.clear=ry,_n.prototype.delete=ny,_n.prototype.get=sy,_n.prototype.has=iy,_n.prototype.set=oy;function of(r,i){var l=De(r),E=!l&&Vs(r),S=!l&&!E&&us(r),d=!l&&!E&&!S&&li(r),D=l||E||S||d,C=D?ac(r.length,NO):[],w=C.length;for(var H in r)(i||Xe.call(r,H))&&!(D&&(H=="length"||S&&(H=="offset"||H=="parent")||d&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||xn(H,w)))&&C.push(H);return C}_(of,"arrayLikeKeys");function af(r){var i=r.length;return i?r[Ic(0,i-1)]:s}_(af,"arraySample");function ay(r,i){return fa(mr(r),Us(i,0,r.length))}_(ay,"arraySampleSize");function _y(r){return fa(mr(r))}_(_y,"arrayShuffle");function hc(r,i,l){(l!==s&&!cn(r[i],l)||l===s&&!(i in r))&&Un(r,i,l)}_(hc,"assignMergeValue");function Ki(r,i,l){var E=r[i];(!(Xe.call(r,i)&&cn(E,l))||l===s&&!(i in r))&&Un(r,i,l)}_(Ki,"assignValue");function sa(r,i){for(var l=r.length;l--;)if(cn(r[l][0],i))return l;return-1}_(sa,"assocIndexOf");function cy(r,i,l,E){return _s(r,function(S,d,D){i(E,S,l(S),D)}),E}_(cy,"baseAggregator");function _f(r,i){return r&&pn(i,Gt(i),r)}_(_f,"baseAssign");function ly(r,i){return r&&pn(i,Rr(i),r)}_(ly,"baseAssignIn");function Un(r,i,l){i=="__proto__"&&jo?jo(r,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):r[i]=l}_(Un,"baseAssignValue");function Sc(r,i){for(var l=-1,E=i.length,S=b(E),d=r==null;++l<E;)S[l]=d?s:Xc(r,i[l]);return S}_(Sc,"baseAt");function Us(r,i,l){return r===r&&(l!==s&&(r=r<=l?r:l),i!==s&&(r=r>=i?r:i)),r}_(Us,"baseClamp");function zr(r,i,l,E,S,d){var D,C=i&A,w=i&N,H=i&R;if(l&&(D=S?l(r,E,S,d):l(r)),D!==s)return D;if(!ft(r))return r;var K=De(r);if(K){if(D=jy(r),!C)return mr(r,D)}else{var z=sr(r),re=z==Ln||z==es;if(us(r))return Bf(r,C);if(z==ae||z==Et||re&&!S){if(D=w||re?{}:Jf(r),!C)return w?ky(r,ly(D,r)):vy(r,_f(D,r))}else{if(!nt[z])return S?r:{};D=Zy(r,z,C)}}d||(d=new _n);var _e=d.get(r);if(_e)return _e;d.set(r,D),gA(r)?r.forEach(function(Ae){D.add(zr(Ae,i,l,Ae,r,d))}):IA(r)&&r.forEach(function(Ae,Le){D.set(Le,zr(Ae,i,l,Le,r,d))});var fe=H?w?Mc:Yc:w?Rr:Gt,Ce=K?s:fe(r);return Kr(Ce||r,function(Ae,Le){Ce&&(Le=Ae,Ae=r[Le]),Ki(D,Le,zr(Ae,i,l,Le,r,d))}),D}_(zr,"baseClone");function Ty(r){var i=Gt(r);return function(l){return cf(l,r,i)}}_(Ty,"baseConforms");function cf(r,i,l){var E=l.length;if(r==null)return!E;for(r=et(r);E--;){var S=l[E],d=i[S],D=r[S];if(D===s&&!(S in r)||!d(D))return!1}return!0}_(cf,"baseConformsTo");function lf(r,i,l){if(typeof r!="function")throw new Wr(o);return ji(function(){r.apply(s,l)},i)}_(lf,"baseDelay");function Wi(r,i,l,E){var S=-1,d=ko,D=!0,C=r.length,w=[],H=i.length;if(!C)return w;l&&(i=ht(i,wr(l))),E?(d=tc,D=!1):i.length>=t&&(d=Fi,D=!1,i=new Bs(i));e:for(;++S<C;){var K=r[S],z=l==null?K:l(K);if(K=E||K!==0?K:0,D&&z===z){for(var re=H;re--;)if(i[re]===z)continue e;w.push(K)}else d(i,z,E)||w.push(K)}return w}_(Wi,"baseDifference");var _s=Vf(dn),Tf=Vf(fc,!0);function uy(r,i){var l=!0;return _s(r,function(E,S,d){return l=!!i(E,S,d),l}),l}_(uy,"baseEvery");function ia(r,i,l){for(var E=-1,S=r.length;++E<S;){var d=r[E],D=i(d);if(D!=null&&(C===s?D===D&&!Ur(D):l(D,C)))var C=D,w=d}return w}_(ia,"baseExtremum");function Ey(r,i,l,E){var S=r.length;for(l=ge(l),l<0&&(l=-l>S?0:S+l),E=E===s||E>S?S:ge(E),E<0&&(E+=S),E=l>E?0:OA(E);l<E;)r[l++]=i;return r}_(Ey,"baseFill");function uf(r,i){var l=[];return _s(r,function(E,S,d){i(E,S,d)&&l.push(E)}),l}_(uf,"baseFilter");function zt(r,i,l,E,S){var d=-1,D=r.length;for(l||(l=t0),S||(S=[]);++d<D;){var C=r[d];i>0&&l(C)?i>1?zt(C,i-1,l,E,S):ss(S,C):E||(S[S.length]=C)}return S}_(zt,"baseFlatten");var Nc=bf(),Ef=bf(!0);function dn(r,i){return r&&Nc(r,i,Gt)}_(dn,"baseForOwn");function fc(r,i){return r&&Ef(r,i,Gt)}_(fc,"baseForOwnRight");function oa(r,i){return ns(i,function(l){return Vn(r[l])})}_(oa,"baseFunctions");function Ys(r,i){i=ls(i,r);for(var l=0,E=i.length;r!=null&&l<E;)r=r[mn(i[l++])];return l&&l==E?r:s}_(Ys,"baseGet");function hf(r,i,l){var E=i(r);return De(r)?E:ss(E,l(r))}_(hf,"baseGetAllKeys");function Er(r){return r==null?r===s?qr:Q:Ls&&Ls in et(r)?Xy(r):_0(r)}_(Er,"baseGetTag");function Ac(r,i){return r>i}_(Ac,"baseGt");function hy(r,i){return r!=null&&Xe.call(r,i)}_(hy,"baseHas");function Sy(r,i){return r!=null&&i in et(r)}_(Sy,"baseHasIn");function Ny(r,i,l){return r>=nr(i,l)&&r<xt(i,l)}_(Ny,"baseInRange");function dc(r,i,l){for(var E=l?tc:ko,S=r[0].length,d=r.length,D=d,C=b(d),w=1/0,H=[];D--;){var K=r[D];D&&i&&(K=ht(K,wr(i))),w=nr(K.length,w),C[D]=!l&&(i||S>=120&&K.length>=120)?new Bs(D&&K):s}K=r[0];var z=-1,re=C[0];e:for(;++z<S&&H.length<w;){var _e=K[z],fe=i?i(_e):_e;if(_e=l||_e!==0?_e:0,!(re?Fi(re,fe):E(H,fe,l))){for(D=d;--D;){var Ce=C[D];if(!(Ce?Fi(Ce,fe):E(r[D],fe,l)))continue e}re&&re.push(fe),H.push(_e)}}return H}_(dc,"baseIntersection");function fy(r,i,l,E){return dn(r,function(S,d,D){i(E,l(S),d,D)}),E}_(fy,"baseInverter");function $i(r,i,l){i=ls(i,r),r=tA(r,i);var E=r==null?r:r[mn(Qr(i))];return E==null?s:Lr(E,r,l)}_($i,"baseInvoke");function Sf(r){return pt(r)&&Er(r)==Et}_(Sf,"baseIsArguments");function Ay(r){return pt(r)&&Er(r)==kt}_(Ay,"baseIsArrayBuffer");function dy(r){return pt(r)&&Er(r)==kr}_(dy,"baseIsDate");function zi(r,i,l,E,S){return r===i?!0:r==null||i==null||!pt(r)&&!pt(i)?r!==r&&i!==i:py(r,i,l,E,zi,S)}_(zi,"baseIsEqual");function py(r,i,l,E,S,d){var D=De(r),C=De(i),w=D?er:sr(r),H=C?er:sr(i);w=w==Et?ae:w,H=H==Et?ae:H;var K=w==ae,z=H==ae,re=w==H;if(re&&us(r)){if(!us(i))return!1;D=!0,K=!1}if(re&&!K)return d||(d=new _n),D||li(r)?zf(r,i,l,E,S,d):$y(r,i,w,l,E,S,d);if(!(l&g)){var _e=K&&Xe.call(r,"__wrapped__"),fe=z&&Xe.call(i,"__wrapped__");if(_e||fe){var Ce=_e?r.value():r,Ae=fe?i.value():i;return d||(d=new _n),S(Ce,Ae,l,E,d)}}return re?(d||(d=new _n),zy(r,i,l,E,S,d)):!1}_(py,"baseIsEqualDeep");function my(r){return pt(r)&&sr(r)==vt}_(my,"baseIsMap");function pc(r,i,l,E){var S=l.length,d=S,D=!E;if(r==null)return!d;for(r=et(r);S--;){var C=l[S];if(D&&C[2]?C[1]!==r[C[0]]:!(C[0]in r))return!1}for(;++S<d;){C=l[S];var w=C[0],H=r[w],K=C[1];if(D&&C[2]){if(H===s&&!(w in r))return!1}else{var z=new _n;if(E)var re=E(H,K,w,r,i,z);if(!(re===s?zi(K,H,g|I,E,z):re))return!1}}return!0}_(pc,"baseIsMatch");function Nf(r){if(!ft(r)||n0(r))return!1;var i=Vn(r)?mO:TC;return i.test(xs(r))}_(Nf,"baseIsNative");function Py(r){return pt(r)&&Er(r)==Ke}_(Py,"baseIsRegExp");function Ry(r){return pt(r)&&sr(r)==ve}_(Ry,"baseIsSet");function Iy(r){return pt(r)&&Ra(r.length)&&!!_t[Er(r)]}_(Iy,"baseIsTypedArray");function ff(r){return typeof r=="function"?r:r==null?Ir:typeof r=="object"?De(r)?pf(r[0],r[1]):df(r):FA(r)}_(ff,"baseIteratee");function mc(r){if(!Ji(r))return CO(r);var i=[];for(var l in et(r))Xe.call(r,l)&&l!="constructor"&&i.push(l);return i}_(mc,"baseKeys");function Dy(r){if(!ft(r))return a0(r);var i=Ji(r),l=[];for(var E in r)E=="constructor"&&(i||!Xe.call(r,E))||l.push(E);return l}_(Dy,"baseKeysIn");function Pc(r,i){return r<i}_(Pc,"baseLt");function Af(r,i){var l=-1,E=Pr(r)?b(r.length):[];return _s(r,function(S,d,D){E[++l]=i(S,d,D)}),E}_(Af,"baseMap");function df(r){var i=Vc(r);return i.length==1&&i[0][2]?Zf(i[0][0],i[0][1]):function(l){return l===r||pc(l,r,i)}}_(df,"baseMatches");function pf(r,i){return Fc(r)&&jf(i)?Zf(mn(r),i):function(l){var E=Xc(l,r);return E===s&&E===i?Qc(l,r):zi(i,E,g|I)}}_(pf,"baseMatchesProperty");function aa(r,i,l,E,S){r!==i&&Nc(i,function(d,D){if(S||(S=new _n),ft(d))gy(r,i,D,l,aa,E,S);else{var C=E?E(kc(r,D),d,D+"",r,i,S):s;C===s&&(C=d),hc(r,D,C)}},Rr)}_(aa,"baseMerge");function gy(r,i,l,E,S,d,D){var C=kc(r,l),w=kc(i,l),H=D.get(w);if(H){hc(r,l,H);return}var K=d?d(C,w,l+"",r,i,D):s,z=K===s;if(z){var re=De(w),_e=!re&&us(w),fe=!re&&!_e&&li(w);K=w,re||_e||fe?De(C)?K=C:Dt(C)?K=mr(C):_e?(z=!1,K=Bf(w,!0)):fe?(z=!1,K=Uf(w,!0)):K=[]:Zi(w)||Vs(w)?(K=C,Vs(C)?K=yA(C):(!ft(C)||Vn(C))&&(K=Jf(w))):z=!1}z&&(D.set(w,K),S(K,w,E,d,D),D.delete(w)),hc(r,l,K)}_(gy,"baseMergeDeep");function mf(r,i){var l=r.length;if(l)return i+=i<0?l:0,xn(i,l)?r[i]:s}_(mf,"baseNth");function Pf(r,i,l){i.length?i=ht(i,function(d){return De(d)?function(D){return Ys(D,d.length===1?d[0]:d)}:d}):i=[Ir];var E=-1;i=ht(i,wr(Ne()));var S=Af(r,function(d,D,C){var w=ht(i,function(H){return H(d)});return{criteria:w,index:++E,value:d}});return ZC(S,function(d,D){return Fy(d,D,l)})}_(Pf,"baseOrderBy");function Cy(r,i){return Rf(r,i,function(l,E){return Qc(r,E)})}_(Cy,"basePick");function Rf(r,i,l){for(var E=-1,S=i.length,d={};++E<S;){var D=i[E],C=Ys(r,D);l(C,D)&&Xi(d,ls(D,r),C)}return d}_(Rf,"basePickBy");function Oy(r){return function(i){return Ys(i,r)}}_(Oy,"basePropertyDeep");function Rc(r,i,l,E){var S=E?jC:ei,d=-1,D=i.length,C=r;for(r===i&&(i=mr(i)),l&&(C=ht(r,wr(l)));++d<D;)for(var w=0,H=i[d],K=l?l(H):H;(w=S(C,K,w,E))>-1;)C!==r&&Jo.call(C,w,1),Jo.call(r,w,1);return r}_(Rc,"basePullAll");function If(r,i){for(var l=r?i.length:0,E=l-1;l--;){var S=i[l];if(l==E||S!==d){var d=S;xn(S)?Jo.call(r,S,1):Cc(r,S)}}return r}_(If,"basePullAt");function Ic(r,i){return r+ea(nf()*(i-r+1))}_(Ic,"baseRandom");function yy(r,i,l,E){for(var S=-1,d=xt(Zo((i-r)/(l||1)),0),D=b(d);d--;)D[E?d:++S]=r,r+=l;return D}_(yy,"baseRange");function Dc(r,i){var l="";if(!r||i<1||i>te)return l;do i%2&&(l+=r),i=ea(i/2),i&&(r+=r);while(i);return l}_(Dc,"baseRepeat");function ye(r,i){return qc(eA(r,i,Ir),r+"")}_(ye,"baseRest");function Ly(r){return af(Ti(r))}_(Ly,"baseSample");function wy(r,i){var l=Ti(r);return fa(l,Us(i,0,l.length))}_(wy,"baseSampleSize");function Xi(r,i,l,E){if(!ft(r))return r;i=ls(i,r);for(var S=-1,d=i.length,D=d-1,C=r;C!=null&&++S<d;){var w=mn(i[S]),H=l;if(w==="__proto__"||w==="constructor"||w==="prototype")return r;if(S!=D){var K=C[w];H=E?E(K,w,C):s,H===s&&(H=ft(K)?K:xn(i[S+1])?[]:{})}Ki(C,w,H),C=C[w]}return r}_(Xi,"baseSet");var Df=ta?function(r,i){return ta.set(r,i),r}:Ir,By=jo?function(r,i){return jo(r,"toString",{configurable:!0,enumerable:!1,value:jc(i),writable:!0})}:Ir;function Uy(r){return fa(Ti(r))}_(Uy,"baseShuffle");function Xr(r,i,l){var E=-1,S=r.length;i<0&&(i=-i>S?0:S+i),l=l>S?S:l,l<0&&(l+=S),S=i>l?0:l-i>>>0,i>>>=0;for(var d=b(S);++E<S;)d[E]=r[E+i];return d}_(Xr,"baseSlice");function Yy(r,i){var l;return _s(r,function(E,S,d){return l=i(E,S,d),!l}),!!l}_(Yy,"baseSome");function _a(r,i,l){var E=0,S=r==null?E:r.length;if(typeof i=="number"&&i===i&&S<=tt){for(;E<S;){var d=E+S>>>1,D=r[d];D!==null&&!Ur(D)&&(l?D<=i:D<i)?E=d+1:S=d}return S}return gc(r,i,Ir,l)}_(_a,"baseSortedIndex");function gc(r,i,l,E){var S=0,d=r==null?0:r.length;if(d===0)return 0;i=l(i);for(var D=i!==i,C=i===null,w=Ur(i),H=i===s;S<d;){var K=ea((S+d)/2),z=l(r[K]),re=z!==s,_e=z===null,fe=z===z,Ce=Ur(z);if(D)var Ae=E||fe;else H?Ae=fe&&(E||re):C?Ae=fe&&re&&(E||!_e):w?Ae=fe&&re&&!_e&&(E||!Ce):_e||Ce?Ae=!1:Ae=E?z<=i:z<i;Ae?S=K+1:d=K}return nr(d,Be)}_(gc,"baseSortedIndexBy");function gf(r,i){for(var l=-1,E=r.length,S=0,d=[];++l<E;){var D=r[l],C=i?i(D):D;if(!l||!cn(C,w)){var w=C;d[S++]=D===0?0:D}}return d}_(gf,"baseSortedUniq");function Cf(r){return typeof r=="number"?r:Ur(r)?J:+r}_(Cf,"baseToNumber");function Br(r){if(typeof r=="string")return r;if(De(r))return ht(r,Br)+"";if(Ur(r))return sf?sf.call(r):"";var i=r+"";return i=="0"&&1/r==-Se?"-0":i}_(Br,"baseToString");function cs(r,i,l){var E=-1,S=ko,d=r.length,D=!0,C=[],w=C;if(l)D=!1,S=tc;else if(d>=t){var H=i?null:Ky(r);if(H)return Go(H);D=!1,S=Fi,w=new Bs}else w=i?[]:C;e:for(;++E<d;){var K=r[E],z=i?i(K):K;if(K=l||K!==0?K:0,D&&z===z){for(var re=w.length;re--;)if(w[re]===z)continue e;i&&w.push(z),C.push(K)}else S(w,z,l)||(w!==C&&w.push(z),C.push(K))}return C}_(cs,"baseUniq");function Cc(r,i){return i=ls(i,r),r=tA(r,i),r==null||delete r[mn(Qr(i))]}_(Cc,"baseUnset");function Of(r,i,l,E){return Xi(r,i,l(Ys(r,i)),E)}_(Of,"baseUpdate");function ca(r,i,l,E){for(var S=r.length,d=E?S:-1;(E?d--:++d<S)&&i(r[d],d,r););return l?Xr(r,E?0:d,E?d+1:S):Xr(r,E?d+1:0,E?S:d)}_(ca,"baseWhile");function yf(r,i){var l=r;return l instanceof Ue&&(l=l.value()),rc(i,function(E,S){return S.func.apply(S.thisArg,ss([E],S.args))},l)}_(yf,"baseWrapperValue");function Oc(r,i,l){var E=r.length;if(E<2)return E?cs(r[0]):[];for(var S=-1,d=b(E);++S<E;)for(var D=r[S],C=-1;++C<E;)C!=S&&(d[S]=Wi(d[S]||D,r[C],i,l));return cs(zt(d,1),i,l)}_(Oc,"baseXor");function Lf(r,i,l){for(var E=-1,S=r.length,d=i.length,D={};++E<S;){var C=E<d?i[E]:s;l(D,r[E],C)}return D}_(Lf,"baseZipObject");function yc(r){return Dt(r)?r:[]}_(yc,"castArrayLikeObject");function Lc(r){return typeof r=="function"?r:Ir}_(Lc,"castFunction");function ls(r,i){return De(r)?r:Fc(r,i)?[r]:iA(We(r))}_(ls,"castPath");var My=ye;function Ts(r,i,l){var E=r.length;return l=l===s?E:l,!i&&l>=E?r:Xr(r,i,l)}_(Ts,"castSlice");var wf=PO||function(r){return qt.clearTimeout(r)};function Bf(r,i){if(i)return r.slice();var l=r.length,E=jN?jN(l):new r.constructor(l);return r.copy(E),E}_(Bf,"cloneBuffer");function wc(r){var i=new r.constructor(r.byteLength);return new Xo(i).set(new Xo(r)),i}_(wc,"cloneArrayBuffer");function xy(r,i){var l=i?wc(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.byteLength)}_(xy,"cloneDataView");function Vy(r){var i=new r.constructor(r.source,hN.exec(r));return i.lastIndex=r.lastIndex,i}_(Vy,"cloneRegExp");function by(r){return Hi?et(Hi.call(r)):{}}_(by,"cloneSymbol");function Uf(r,i){var l=i?wc(r.buffer):r.buffer;return new r.constructor(l,r.byteOffset,r.length)}_(Uf,"cloneTypedArray");function Yf(r,i){if(r!==i){var l=r!==s,E=r===null,S=r===r,d=Ur(r),D=i!==s,C=i===null,w=i===i,H=Ur(i);if(!C&&!H&&!d&&r>i||d&&D&&w&&!C&&!H||E&&D&&w||!l&&w||!S)return 1;if(!E&&!d&&!H&&r<i||H&&l&&S&&!E&&!d||C&&l&&S||!D&&S||!w)return-1}return 0}_(Yf,"compareAscending");function Fy(r,i,l){for(var E=-1,S=r.criteria,d=i.criteria,D=S.length,C=l.length;++E<D;){var w=Yf(S[E],d[E]);if(w){if(E>=C)return w;var H=l[E];return w*(H=="desc"?-1:1)}}return r.index-i.index}_(Fy,"compareMultiple");function Mf(r,i,l,E){for(var S=-1,d=r.length,D=l.length,C=-1,w=i.length,H=xt(d-D,0),K=b(w+H),z=!E;++C<w;)K[C]=i[C];for(;++S<D;)(z||S<d)&&(K[l[S]]=r[S]);for(;H--;)K[C++]=r[S++];return K}_(Mf,"composeArgs");function xf(r,i,l,E){for(var S=-1,d=r.length,D=-1,C=l.length,w=-1,H=i.length,K=xt(d-C,0),z=b(K+H),re=!E;++S<K;)z[S]=r[S];for(var _e=S;++w<H;)z[_e+w]=i[w];for(;++D<C;)(re||S<d)&&(z[_e+l[D]]=r[S++]);return z}_(xf,"composeArgsRight");function mr(r,i){var l=-1,E=r.length;for(i||(i=b(E));++l<E;)i[l]=r[l];return i}_(mr,"copyArray");function pn(r,i,l,E){var S=!l;l||(l={});for(var d=-1,D=i.length;++d<D;){var C=i[d],w=E?E(l[C],r[C],C,l,r):s;w===s&&(w=r[C]),S?Un(l,C,w):Ki(l,C,w)}return l}_(pn,"copyObject");function vy(r,i){return pn(r,bc(r),i)}_(vy,"copySymbols");function ky(r,i){return pn(r,Xf(r),i)}_(ky,"copySymbolsIn");function la(r,i){return function(l,E){var S=De(l)?WC:cy,d=i?i():{};return S(l,r,Ne(E,2),d)}}_(la,"createAggregator");function ai(r){return ye(function(i,l){var E=-1,S=l.length,d=S>1?l[S-1]:s,D=S>2?l[2]:s;for(d=r.length>3&&typeof d=="function"?(S--,d):s,D&&hr(l[0],l[1],D)&&(d=S<3?s:d,S=1),i=et(i);++E<S;){var C=l[E];C&&r(i,C,E,d)}return i})}_(ai,"createAssigner");function Vf(r,i){return function(l,E){if(l==null)return l;if(!Pr(l))return r(l,E);for(var S=l.length,d=i?S:-1,D=et(l);(i?d--:++d<S)&&E(D[d],d,D)!==!1;);return l}}_(Vf,"createBaseEach");function bf(r){return function(i,l,E){for(var S=-1,d=et(i),D=E(i),C=D.length;C--;){var w=D[r?C:++S];if(l(d[w],w,d)===!1)break}return i}}_(bf,"createBaseFor");function qy(r,i,l){var E=i&p,S=Qi(r);function d(){var D=this&&this!==qt&&this instanceof d?S:r;return D.apply(E?l:this,arguments)}return _(d,"wrapper"),d}_(qy,"createBind");function Ff(r){return function(i){i=We(i);var l=ti(i)?an(i):s,E=l?l[0]:i.charAt(0),S=l?Ts(l,1).join(""):i.slice(1);return E[r]()+S}}_(Ff,"createCaseFirst");function _i(r){return function(i){return rc(VA(xA(i).replace(BC,"")),r,"")}}_(_i,"createCompounder");function Qi(r){return function(){var i=arguments;switch(i.length){case 0:return new r;case 1:return new r(i[0]);case 2:return new r(i[0],i[1]);case 3:return new r(i[0],i[1],i[2]);case 4:return new r(i[0],i[1],i[2],i[3]);case 5:return new r(i[0],i[1],i[2],i[3],i[4]);case 6:return new r(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new r(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var l=oi(r.prototype),E=r.apply(l,i);return ft(E)?E:l}}_(Qi,"createCtor");function Gy(r,i,l){var E=Qi(r);function S(){for(var d=arguments.length,D=b(d),C=d,w=ci(S);C--;)D[C]=arguments[C];var H=d<3&&D[0]!==w&&D[d-1]!==w?[]:is(D,w);if(d-=H.length,d<l)return Hf(r,i,Ta,S.placeholder,s,D,H,s,s,l-d);var K=this&&this!==qt&&this instanceof S?E:r;return Lr(K,this,D)}return _(S,"wrapper"),S}_(Gy,"createCurry");function vf(r){return function(i,l,E){var S=et(i);if(!Pr(i)){var d=Ne(l,3);i=Gt(i),l=_(function(C){return d(S[C],C,S)},"predicate")}var D=r(i,l,E);return D>-1?S[d?i[D]:D]:s}}_(vf,"createFind");function kf(r){return Mn(function(i){var l=i.length,E=l,S=$r.prototype.thru;for(r&&i.reverse();E--;){var d=i[E];if(typeof d!="function")throw new Wr(o);if(S&&!D&&Sa(d)=="wrapper")var D=new $r([],!0)}for(E=D?E:l;++E<l;){d=i[E];var C=Sa(d),w=C=="wrapper"?xc(d):s;w&&vc(w[0])&&w[1]==($|P|B|j)&&!w[4].length&&w[9]==1?D=D[Sa(w[0])].apply(D,w[3]):D=d.length==1&&vc(d)?D[C]():D.thru(d)}return function(){var H=arguments,K=H[0];if(D&&H.length==1&&De(K))return D.plant(K).value();for(var z=0,re=l?i[z].apply(this,H):K;++z<l;)re=i[z].call(this,re);return re}})}_(kf,"createFlow");function Ta(r,i,l,E,S,d,D,C,w,H){var K=i&$,z=i&p,re=i&m,_e=i&(P|M),fe=i&se,Ce=re?s:Qi(r);function Ae(){for(var Le=arguments.length,Me=b(Le),Yr=Le;Yr--;)Me[Yr]=arguments[Yr];if(_e)var Sr=ci(Ae),Mr=tO(Me,Sr);if(E&&(Me=Mf(Me,E,S,_e)),d&&(Me=xf(Me,d,D,_e)),Le-=Mr,_e&&Le<H){var gt=is(Me,Sr);return Hf(r,i,Ta,Ae.placeholder,l,Me,gt,C,w,H-Le)}var ln=z?l:this,Fn=re?ln[r]:r;return Le=Me.length,C?Me=c0(Me,C):fe&&Le>1&&Me.reverse(),K&&w<Le&&(Me.length=w),this&&this!==qt&&this instanceof Ae&&(Fn=Ce||Qi(Fn)),Fn.apply(ln,Me)}return _(Ae,"wrapper"),Ae}_(Ta,"createHybrid");function qf(r,i){return function(l,E){return fy(l,r,i(E),{})}}_(qf,"createInverter");function ua(r,i){return function(l,E){var S;if(l===s&&E===s)return i;if(l!==s&&(S=l),E!==s){if(S===s)return E;typeof l=="string"||typeof E=="string"?(l=Br(l),E=Br(E)):(l=Cf(l),E=Cf(E)),S=r(l,E)}return S}}_(ua,"createMathOperation");function Bc(r){return Mn(function(i){return i=ht(i,wr(Ne())),ye(function(l){var E=this;return r(i,function(S){return Lr(S,E,l)})})})}_(Bc,"createOver");function Ea(r,i){i=i===s?" ":Br(i);var l=i.length;if(l<2)return l?Dc(i,r):i;var E=Dc(i,Zo(r/ri(i)));return ti(i)?Ts(an(E),0,r).join(""):E.slice(0,r)}_(Ea,"createPadding");function Hy(r,i,l,E){var S=i&p,d=Qi(r);function D(){for(var C=-1,w=arguments.length,H=-1,K=E.length,z=b(K+w),re=this&&this!==qt&&this instanceof D?d:r;++H<K;)z[H]=E[H];for(;w--;)z[H++]=arguments[++C];return Lr(re,S?l:this,z)}return _(D,"wrapper"),D}_(Hy,"createPartial");function Gf(r){return function(i,l,E){return E&&typeof E!="number"&&hr(i,l,E)&&(l=E=s),i=bn(i),l===s?(l=i,i=0):l=bn(l),E=E===s?i<l?1:-1:bn(E),yy(i,l,E,r)}}_(Gf,"createRange");function ha(r){return function(i,l){return typeof i=="string"&&typeof l=="string"||(i=Jr(i),l=Jr(l)),r(i,l)}}_(ha,"createRelationalOperation");function Hf(r,i,l,E,S,d,D,C,w,H){var K=i&P,z=K?D:s,re=K?s:D,_e=K?d:s,fe=K?s:d;i|=K?B:F,i&=~(K?F:B),i&y||(i&=~(p|m));var Ce=[r,i,S,_e,z,fe,re,C,w,H],Ae=l.apply(s,Ce);return vc(r)&&rA(Ae,Ce),Ae.placeholder=E,nA(Ae,r,i)}_(Hf,"createRecurry");function Uc(r){var i=Mt[r];return function(l,E){if(l=Jr(l),E=E==null?0:nr(ge(E),292),E&&rf(l)){var S=(We(l)+"e").split("e"),d=i(S[0]+"e"+(+S[1]+E));return S=(We(d)+"e").split("e"),+(S[0]+"e"+(+S[1]-E))}return i(l)}}_(Uc,"createRound");var Ky=si&&1/Go(new si([,-0]))[1]==Se?function(r){return new si(r)}:tl;function Kf(r){return function(i){var l=sr(i);return l==vt?cc(i):l==ve?_O(i):eO(i,r(i))}}_(Kf,"createToPairs");function Yn(r,i,l,E,S,d,D,C){var w=i&m;if(!w&&typeof r!="function")throw new Wr(o);var H=E?E.length:0;if(H||(i&=~(B|F),E=S=s),D=D===s?D:xt(ge(D),0),C=C===s?C:ge(C),H-=S?S.length:0,i&F){var K=E,z=S;E=S=s}var re=w?s:xc(r),_e=[r,i,l,E,S,K,z,d,D,C];if(re&&o0(_e,re),r=_e[0],i=_e[1],l=_e[2],E=_e[3],S=_e[4],C=_e[9]=_e[9]===s?w?0:r.length:xt(_e[9]-H,0),!C&&i&(P|M)&&(i&=~(P|M)),!i||i==p)var fe=qy(r,i,l);else i==P||i==M?fe=Gy(r,i,C):(i==B||i==(p|B))&&!S.length?fe=Hy(r,i,l,E):fe=Ta.apply(s,_e);var Ce=re?Df:rA;return nA(Ce(fe,_e),r,i)}_(Yn,"createWrap");function Wf(r,i,l,E){return r===s||cn(r,ni[l])&&!Xe.call(E,l)?i:r}_(Wf,"customDefaultsAssignIn");function $f(r,i,l,E,S,d){return ft(r)&&ft(i)&&(d.set(i,r),aa(r,i,s,$f,d),d.delete(i)),r}_($f,"customDefaultsMerge");function Wy(r){return Zi(r)?s:r}_(Wy,"customOmitClone");function zf(r,i,l,E,S,d){var D=l&g,C=r.length,w=i.length;if(C!=w&&!(D&&w>C))return!1;var H=d.get(r),K=d.get(i);if(H&&K)return H==i&&K==r;var z=-1,re=!0,_e=l&I?new Bs:s;for(d.set(r,i),d.set(i,r);++z<C;){var fe=r[z],Ce=i[z];if(E)var Ae=D?E(Ce,fe,z,i,r,d):E(fe,Ce,z,r,i,d);if(Ae!==s){if(Ae)continue;re=!1;break}if(_e){if(!nc(i,function(Le,Me){if(!Fi(_e,Me)&&(fe===Le||S(fe,Le,l,E,d)))return _e.push(Me)})){re=!1;break}}else if(!(fe===Ce||S(fe,Ce,l,E,d))){re=!1;break}}return d.delete(r),d.delete(i),re}_(zf,"equalArrays");function $y(r,i,l,E,S,d,D){switch(l){case rr:if(r.byteLength!=i.byteLength||r.byteOffset!=i.byteOffset)return!1;r=r.buffer,i=i.buffer;case kt:return!(r.byteLength!=i.byteLength||!d(new Xo(r),new Xo(i)));case dr:case kr:case V:return cn(+r,+i);case Zn:return r.name==i.name&&r.message==i.message;case Ke:case rt:return r==i+"";case vt:var C=cc;case ve:var w=E&g;if(C||(C=Go),r.size!=i.size&&!w)return!1;var H=D.get(r);if(H)return H==i;E|=I,D.set(r,i);var K=zf(C(r),C(i),E,S,d,D);return D.delete(r),K;case Yt:if(Hi)return Hi.call(r)==Hi.call(i)}return!1}_($y,"equalByTag");function zy(r,i,l,E,S,d){var D=l&g,C=Yc(r),w=C.length,H=Yc(i),K=H.length;if(w!=K&&!D)return!1;for(var z=w;z--;){var re=C[z];if(!(D?re in i:Xe.call(i,re)))return!1}var _e=d.get(r),fe=d.get(i);if(_e&&fe)return _e==i&&fe==r;var Ce=!0;d.set(r,i),d.set(i,r);for(var Ae=D;++z<w;){re=C[z];var Le=r[re],Me=i[re];if(E)var Yr=D?E(Me,Le,re,i,r,d):E(Le,Me,re,r,i,d);if(!(Yr===s?Le===Me||S(Le,Me,l,E,d):Yr)){Ce=!1;break}Ae||(Ae=re=="constructor")}if(Ce&&!Ae){var Sr=r.constructor,Mr=i.constructor;Sr!=Mr&&"constructor"in r&&"constructor"in i&&!(typeof Sr=="function"&&Sr instanceof Sr&&typeof Mr=="function"&&Mr instanceof Mr)&&(Ce=!1)}return d.delete(r),d.delete(i),Ce}_(zy,"equalObjects");function Mn(r){return qc(eA(r,s,cA),r+"")}_(Mn,"flatRest");function Yc(r){return hf(r,Gt,bc)}_(Yc,"getAllKeys");function Mc(r){return hf(r,Rr,Xf)}_(Mc,"getAllKeysIn");var xc=ta?function(r){return ta.get(r)}:tl;function Sa(r){for(var i=r.name+"",l=ii[i],E=Xe.call(ii,i)?l.length:0;E--;){var S=l[E],d=S.func;if(d==null||d==r)return S.name}return i}_(Sa,"getFuncName");function ci(r){var i=Xe.call(f,"placeholder")?f:r;return i.placeholder}_(ci,"getHolder");function Ne(){var r=f.iteratee||Zc;return r=r===Zc?ff:r,arguments.length?r(arguments[0],arguments[1]):r}_(Ne,"getIteratee");function Na(r,i){var l=r.__data__;return r0(i)?l[typeof i=="string"?"string":"hash"]:l.map}_(Na,"getMapData");function Vc(r){for(var i=Gt(r),l=i.length;l--;){var E=i[l],S=r[E];i[l]=[E,S,jf(S)]}return i}_(Vc,"getMatchData");function Ms(r,i){var l=iO(r,i);return Nf(l)?l:s}_(Ms,"getNative");function Xy(r){var i=Xe.call(r,Ls),l=r[Ls];try{r[Ls]=s;var E=!0}catch{}var S=$o.call(r);return E&&(i?r[Ls]=l:delete r[Ls]),S}_(Xy,"getRawTag");var bc=Tc?function(r){return r==null?[]:(r=et(r),ns(Tc(r),function(i){return ef.call(r,i)}))}:rl,Xf=Tc?function(r){for(var i=[];r;)ss(i,bc(r)),r=Qo(r);return i}:rl,sr=Er;(uc&&sr(new uc(new ArrayBuffer(1)))!=rr||ki&&sr(new ki)!=vt||Ec&&sr(Ec.resolve())!=de||si&&sr(new si)!=ve||qi&&sr(new qi)!=pr)&&(sr=_(function(r){var i=Er(r),l=i==ae?r.constructor:s,E=l?xs(l):"";if(E)switch(E){case wO:return rr;case BO:return vt;case UO:return de;case YO:return ve;case MO:return pr}return i},"getTag"));function Qy(r,i,l){for(var E=-1,S=l.length;++E<S;){var d=l[E],D=d.size;switch(d.type){case"drop":r+=D;break;case"dropRight":i-=D;break;case"take":i=nr(i,r+D);break;case"takeRight":r=xt(r,i-D);break}}return{start:r,end:i}}_(Qy,"getView");function Jy(r){var i=r.match(nC);return i?i[1].split(sC):[]}_(Jy,"getWrapDetails");function Qf(r,i,l){i=ls(i,r);for(var E=-1,S=i.length,d=!1;++E<S;){var D=mn(i[E]);if(!(d=r!=null&&l(r,D)))break;r=r[D]}return d||++E!=S?d:(S=r==null?0:r.length,!!S&&Ra(S)&&xn(D,S)&&(De(r)||Vs(r)))}_(Qf,"hasPath");function jy(r){var i=r.length,l=new r.constructor(i);return i&&typeof r[0]=="string"&&Xe.call(r,"index")&&(l.index=r.index,l.input=r.input),l}_(jy,"initCloneArray");function Jf(r){return typeof r.constructor=="function"&&!Ji(r)?oi(Qo(r)):{}}_(Jf,"initCloneObject");function Zy(r,i,l){var E=r.constructor;switch(i){case kt:return wc(r);case dr:case kr:return new E(+r);case rr:return xy(r,l);case Gr:case sn:case on:case An:case ts:case Qs:case Vi:case bi:case rs:return Uf(r,l);case vt:return new E;case V:case rt:return new E(r);case Ke:return Vy(r);case ve:return new E;case Yt:return by(r)}}_(Zy,"initCloneByTag");function e0(r,i){var l=i.length;if(!l)return r;var E=l-1;return i[E]=(l>1?"& ":"")+i[E],i=i.join(l>2?", ":" "),r.replace(rC,`{
/* [wrapped with `+i+`] */
`)}_(e0,"insertWrapDetails");function t0(r){return De(r)||Vs(r)||!!(tf&&r&&r[tf])}_(t0,"isFlattenable");function xn(r,i){var l=typeof r;return i=i??te,!!i&&(l=="number"||l!="symbol"&&EC.test(r))&&r>-1&&r%1==0&&r<i}_(xn,"isIndex");function hr(r,i,l){if(!ft(l))return!1;var E=typeof i;return(E=="number"?Pr(l)&&xn(i,l.length):E=="string"&&i in l)?cn(l[i],r):!1}_(hr,"isIterateeCall");function Fc(r,i){if(De(r))return!1;var l=typeof r;return l=="number"||l=="symbol"||l=="boolean"||r==null||Ur(r)?!0:Vo.test(r)||!W_.test(r)||i!=null&&r in et(i)}_(Fc,"isKey");function r0(r){var i=typeof r;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?r!=="__proto__":r===null}_(r0,"isKeyable");function vc(r){var i=Sa(r),l=f[i];if(typeof l!="function"||!(i in Ue.prototype))return!1;if(r===l)return!0;var E=xc(l);return!!E&&r===E[0]}_(vc,"isLaziable");function n0(r){return!!JN&&JN in r}_(n0,"isMasked");var s0=Ko?Vn:nl;function Ji(r){var i=r&&r.constructor,l=typeof i=="function"&&i.prototype||ni;return r===l}_(Ji,"isPrototype");function jf(r){return r===r&&!ft(r)}_(jf,"isStrictComparable");function Zf(r,i){return function(l){return l==null?!1:l[r]===i&&(i!==s||r in et(l))}}_(Zf,"matchesStrictComparable");function i0(r){var i=ma(r,function(E){return l.size===u&&l.clear(),E}),l=i.cache;return i}_(i0,"memoizeCapped");function o0(r,i){var l=r[1],E=i[1],S=l|E,d=S<(p|m|$),D=E==$&&l==P||E==$&&l==j&&r[7].length<=i[8]||E==($|j)&&i[7].length<=i[8]&&l==P;if(!(d||D))return r;E&p&&(r[2]=i[2],S|=l&p?0:y);var C=i[3];if(C){var w=r[3];r[3]=w?Mf(w,C,i[4]):C,r[4]=w?is(r[3],h):i[4]}return C=i[5],C&&(w=r[5],r[5]=w?xf(w,C,i[6]):C,r[6]=w?is(r[5],h):i[6]),C=i[7],C&&(r[7]=C),E&$&&(r[8]=r[8]==null?i[8]:nr(r[8],i[8])),r[9]==null&&(r[9]=i[9]),r[0]=i[0],r[1]=S,r}_(o0,"mergeData");function a0(r){var i=[];if(r!=null)for(var l in et(r))i.push(l);return i}_(a0,"nativeKeysIn");function _0(r){return $o.call(r)}_(_0,"objectToString");function eA(r,i,l){return i=xt(i===s?r.length-1:i,0),function(){for(var E=arguments,S=-1,d=xt(E.length-i,0),D=b(d);++S<d;)D[S]=E[i+S];S=-1;for(var C=b(i+1);++S<i;)C[S]=E[S];return C[i]=l(D),Lr(r,this,C)}}_(eA,"overRest");function tA(r,i){return i.length<2?r:Ys(r,Xr(i,0,-1))}_(tA,"parent");function c0(r,i){for(var l=r.length,E=nr(i.length,l),S=mr(r);E--;){var d=i[E];r[E]=xn(d,l)?S[d]:s}return r}_(c0,"reorder");function kc(r,i){if(!(i==="constructor"&&typeof r[i]=="function")&&i!="__proto__")return r[i]}_(kc,"safeGet");var rA=sA(Df),ji=IO||function(r,i){return qt.setTimeout(r,i)},qc=sA(By);function nA(r,i,l){var E=i+"";return qc(r,e0(E,l0(Jy(E),l)))}_(nA,"setWrapToString");function sA(r){var i=0,l=0;return function(){var E=OO(),S=U-(E-l);if(l=E,S>0){if(++i>=ne)return arguments[0]}else i=0;return r.apply(s,arguments)}}_(sA,"shortOut");function fa(r,i){var l=-1,E=r.length,S=E-1;for(i=i===s?E:i;++l<i;){var d=Ic(l,S),D=r[d];r[d]=r[l],r[l]=D}return r.length=i,r}_(fa,"shuffleSelf");var iA=i0(function(r){var i=[];return r.charCodeAt(0)===46&&i.push(""),r.replace(js,function(l,E,S,d){i.push(S?d.replace(aC,"$1"):E||l)}),i});function mn(r){if(typeof r=="string"||Ur(r))return r;var i=r+"";return i=="0"&&1/r==-Se?"-0":i}_(mn,"toKey");function xs(r){if(r!=null){try{return Wo.call(r)}catch{}try{return r+""}catch{}}return""}_(xs,"toSource");function l0(r,i){return Kr(It,function(l){var E="_."+l[0];i&l[1]&&!ko(r,E)&&r.push(E)}),r.sort()}_(l0,"updateWrapDetails");function oA(r){if(r instanceof Ue)return r.clone();var i=new $r(r.__wrapped__,r.__chain__);return i.__actions__=mr(r.__actions__),i.__index__=r.__index__,i.__values__=r.__values__,i}_(oA,"wrapperClone");function T0(r,i,l){(l?hr(r,i,l):i===s)?i=1:i=xt(ge(i),0);var E=r==null?0:r.length;if(!E||i<1)return[];for(var S=0,d=0,D=b(Zo(E/i));S<E;)D[d++]=Xr(r,S,S+=i);return D}_(T0,"chunk");function u0(r){for(var i=-1,l=r==null?0:r.length,E=0,S=[];++i<l;){var d=r[i];d&&(S[E++]=d)}return S}_(u0,"compact");function E0(){var r=arguments.length;if(!r)return[];for(var i=b(r-1),l=arguments[0],E=r;E--;)i[E-1]=arguments[E];return ss(De(l)?mr(l):[l],zt(i,1))}_(E0,"concat");var h0=ye(function(r,i){return Dt(r)?Wi(r,zt(i,1,Dt,!0)):[]}),S0=ye(function(r,i){var l=Qr(i);return Dt(l)&&(l=s),Dt(r)?Wi(r,zt(i,1,Dt,!0),Ne(l,2)):[]}),N0=ye(function(r,i){var l=Qr(i);return Dt(l)&&(l=s),Dt(r)?Wi(r,zt(i,1,Dt,!0),s,l):[]});function f0(r,i,l){var E=r==null?0:r.length;return E?(i=l||i===s?1:ge(i),Xr(r,i<0?0:i,E)):[]}_(f0,"drop");function A0(r,i,l){var E=r==null?0:r.length;return E?(i=l||i===s?1:ge(i),i=E-i,Xr(r,0,i<0?0:i)):[]}_(A0,"dropRight");function d0(r,i){return r&&r.length?ca(r,Ne(i,3),!0,!0):[]}_(d0,"dropRightWhile");function p0(r,i){return r&&r.length?ca(r,Ne(i,3),!0):[]}_(p0,"dropWhile");function m0(r,i,l,E){var S=r==null?0:r.length;return S?(l&&typeof l!="number"&&hr(r,i,l)&&(l=0,E=S),Ey(r,i,l,E)):[]}_(m0,"fill");function aA(r,i,l){var E=r==null?0:r.length;if(!E)return-1;var S=l==null?0:ge(l);return S<0&&(S=xt(E+S,0)),qo(r,Ne(i,3),S)}_(aA,"findIndex");function _A(r,i,l){var E=r==null?0:r.length;if(!E)return-1;var S=E-1;return l!==s&&(S=ge(l),S=l<0?xt(E+S,0):nr(S,E-1)),qo(r,Ne(i,3),S,!0)}_(_A,"findLastIndex");function cA(r){var i=r==null?0:r.length;return i?zt(r,1):[]}_(cA,"flatten");function P0(r){var i=r==null?0:r.length;return i?zt(r,Se):[]}_(P0,"flattenDeep");function R0(r,i){var l=r==null?0:r.length;return l?(i=i===s?1:ge(i),zt(r,i)):[]}_(R0,"flattenDepth");function I0(r){for(var i=-1,l=r==null?0:r.length,E={};++i<l;){var S=r[i];E[S[0]]=S[1]}return E}_(I0,"fromPairs");function lA(r){return r&&r.length?r[0]:s}_(lA,"head");function D0(r,i,l){var E=r==null?0:r.length;if(!E)return-1;var S=l==null?0:ge(l);return S<0&&(S=xt(E+S,0)),ei(r,i,S)}_(D0,"indexOf");function g0(r){var i=r==null?0:r.length;return i?Xr(r,0,-1):[]}_(g0,"initial");var C0=ye(function(r){var i=ht(r,yc);return i.length&&i[0]===r[0]?dc(i):[]}),O0=ye(function(r){var i=Qr(r),l=ht(r,yc);return i===Qr(l)?i=s:l.pop(),l.length&&l[0]===r[0]?dc(l,Ne(i,2)):[]}),y0=ye(function(r){var i=Qr(r),l=ht(r,yc);return i=typeof i=="function"?i:s,i&&l.pop(),l.length&&l[0]===r[0]?dc(l,s,i):[]});function L0(r,i){return r==null?"":gO.call(r,i)}_(L0,"join");function Qr(r){var i=r==null?0:r.length;return i?r[i-1]:s}_(Qr,"last");function w0(r,i,l){var E=r==null?0:r.length;if(!E)return-1;var S=E;return l!==s&&(S=ge(l),S=S<0?xt(E+S,0):nr(S,E-1)),i===i?lO(r,i,S):qo(r,GN,S,!0)}_(w0,"lastIndexOf");function B0(r,i){return r&&r.length?mf(r,ge(i)):s}_(B0,"nth");var U0=ye(TA);function TA(r,i){return r&&r.length&&i&&i.length?Rc(r,i):r}_(TA,"pullAll");function Y0(r,i,l){return r&&r.length&&i&&i.length?Rc(r,i,Ne(l,2)):r}_(Y0,"pullAllBy");function M0(r,i,l){return r&&r.length&&i&&i.length?Rc(r,i,s,l):r}_(M0,"pullAllWith");var x0=Mn(function(r,i){var l=r==null?0:r.length,E=Sc(r,i);return If(r,ht(i,function(S){return xn(S,l)?+S:S}).sort(Yf)),E});function V0(r,i){var l=[];if(!(r&&r.length))return l;var E=-1,S=[],d=r.length;for(i=Ne(i,3);++E<d;){var D=r[E];i(D,E,r)&&(l.push(D),S.push(E))}return If(r,S),l}_(V0,"remove");function Gc(r){return r==null?r:LO.call(r)}_(Gc,"reverse");function b0(r,i,l){var E=r==null?0:r.length;return E?(l&&typeof l!="number"&&hr(r,i,l)?(i=0,l=E):(i=i==null?0:ge(i),l=l===s?E:ge(l)),Xr(r,i,l)):[]}_(b0,"slice");function F0(r,i){return _a(r,i)}_(F0,"sortedIndex");function v0(r,i,l){return gc(r,i,Ne(l,2))}_(v0,"sortedIndexBy");function k0(r,i){var l=r==null?0:r.length;if(l){var E=_a(r,i);if(E<l&&cn(r[E],i))return E}return-1}_(k0,"sortedIndexOf");function q0(r,i){return _a(r,i,!0)}_(q0,"sortedLastIndex");function G0(r,i,l){return gc(r,i,Ne(l,2),!0)}_(G0,"sortedLastIndexBy");function H0(r,i){var l=r==null?0:r.length;if(l){var E=_a(r,i,!0)-1;if(cn(r[E],i))return E}return-1}_(H0,"sortedLastIndexOf");function K0(r){return r&&r.length?gf(r):[]}_(K0,"sortedUniq");function W0(r,i){return r&&r.length?gf(r,Ne(i,2)):[]}_(W0,"sortedUniqBy");function $0(r){var i=r==null?0:r.length;return i?Xr(r,1,i):[]}_($0,"tail");function z0(r,i,l){return r&&r.length?(i=l||i===s?1:ge(i),Xr(r,0,i<0?0:i)):[]}_(z0,"take");function X0(r,i,l){var E=r==null?0:r.length;return E?(i=l||i===s?1:ge(i),i=E-i,Xr(r,i<0?0:i,E)):[]}_(X0,"takeRight");function Q0(r,i){return r&&r.length?ca(r,Ne(i,3),!1,!0):[]}_(Q0,"takeRightWhile");function J0(r,i){return r&&r.length?ca(r,Ne(i,3)):[]}_(J0,"takeWhile");var j0=ye(function(r){return cs(zt(r,1,Dt,!0))}),Z0=ye(function(r){var i=Qr(r);return Dt(i)&&(i=s),cs(zt(r,1,Dt,!0),Ne(i,2))}),eL=ye(function(r){var i=Qr(r);return i=typeof i=="function"?i:s,cs(zt(r,1,Dt,!0),s,i)});function tL(r){return r&&r.length?cs(r):[]}_(tL,"uniq");function rL(r,i){return r&&r.length?cs(r,Ne(i,2)):[]}_(rL,"uniqBy");function nL(r,i){return i=typeof i=="function"?i:s,r&&r.length?cs(r,s,i):[]}_(nL,"uniqWith");function Hc(r){if(!(r&&r.length))return[];var i=0;return r=ns(r,function(l){if(Dt(l))return i=xt(l.length,i),!0}),ac(i,function(l){return ht(r,sc(l))})}_(Hc,"unzip");function uA(r,i){if(!(r&&r.length))return[];var l=Hc(r);return i==null?l:ht(l,function(E){return Lr(i,s,E)})}_(uA,"unzipWith");var sL=ye(function(r,i){return Dt(r)?Wi(r,i):[]}),iL=ye(function(r){return Oc(ns(r,Dt))}),oL=ye(function(r){var i=Qr(r);return Dt(i)&&(i=s),Oc(ns(r,Dt),Ne(i,2))}),aL=ye(function(r){var i=Qr(r);return i=typeof i=="function"?i:s,Oc(ns(r,Dt),s,i)}),_L=ye(Hc);function cL(r,i){return Lf(r||[],i||[],Ki)}_(cL,"zipObject");function lL(r,i){return Lf(r||[],i||[],Xi)}_(lL,"zipObjectDeep");var TL=ye(function(r){var i=r.length,l=i>1?r[i-1]:s;return l=typeof l=="function"?(r.pop(),l):s,uA(r,l)});function EA(r){var i=f(r);return i.__chain__=!0,i}_(EA,"chain");function uL(r,i){return i(r),r}_(uL,"tap");function Aa(r,i){return i(r)}_(Aa,"thru");var EL=Mn(function(r){var i=r.length,l=i?r[0]:0,E=this.__wrapped__,S=_(function(d){return Sc(d,r)},"interceptor");return i>1||this.__actions__.length||!(E instanceof Ue)||!xn(l)?this.thru(S):(E=E.slice(l,+l+(i?1:0)),E.__actions__.push({func:Aa,args:[S],thisArg:s}),new $r(E,this.__chain__).thru(function(d){return i&&!d.length&&d.push(s),d}))});function hL(){return EA(this)}_(hL,"wrapperChain");function SL(){return new $r(this.value(),this.__chain__)}_(SL,"wrapperCommit");function NL(){this.__values__===s&&(this.__values__=CA(this.value()));var r=this.__index__>=this.__values__.length,i=r?s:this.__values__[this.__index__++];return{done:r,value:i}}_(NL,"wrapperNext");function fL(){return this}_(fL,"wrapperToIterator");function AL(r){for(var i,l=this;l instanceof na;){var E=oA(l);E.__index__=0,E.__values__=s,i?S.__wrapped__=E:i=E;var S=E;l=l.__wrapped__}return S.__wrapped__=r,i}_(AL,"wrapperPlant");function dL(){var r=this.__wrapped__;if(r instanceof Ue){var i=r;return this.__actions__.length&&(i=new Ue(this)),i=i.reverse(),i.__actions__.push({func:Aa,args:[Gc],thisArg:s}),new $r(i,this.__chain__)}return this.thru(Gc)}_(dL,"wrapperReverse");function pL(){return yf(this.__wrapped__,this.__actions__)}_(pL,"wrapperValue");var mL=la(function(r,i,l){Xe.call(r,l)?++r[l]:Un(r,l,1)});function PL(r,i,l){var E=De(r)?kN:uy;return l&&hr(r,i,l)&&(i=s),E(r,Ne(i,3))}_(PL,"every");function RL(r,i){var l=De(r)?ns:uf;return l(r,Ne(i,3))}_(RL,"filter");var IL=vf(aA),DL=vf(_A);function gL(r,i){return zt(da(r,i),1)}_(gL,"flatMap");function CL(r,i){return zt(da(r,i),Se)}_(CL,"flatMapDeep");function OL(r,i,l){return l=l===s?1:ge(l),zt(da(r,i),l)}_(OL,"flatMapDepth");function hA(r,i){var l=De(r)?Kr:_s;return l(r,Ne(i,3))}_(hA,"forEach");function SA(r,i){var l=De(r)?$C:Tf;return l(r,Ne(i,3))}_(SA,"forEachRight");var yL=la(function(r,i,l){Xe.call(r,l)?r[l].push(i):Un(r,l,[i])});function LL(r,i,l,E){r=Pr(r)?r:Ti(r),l=l&&!E?ge(l):0;var S=r.length;return l<0&&(l=xt(S+l,0)),Ia(r)?l<=S&&r.indexOf(i,l)>-1:!!S&&ei(r,i,l)>-1}_(LL,"includes");var wL=ye(function(r,i,l){var E=-1,S=typeof i=="function",d=Pr(r)?b(r.length):[];return _s(r,function(D){d[++E]=S?Lr(i,D,l):$i(D,i,l)}),d}),BL=la(function(r,i,l){Un(r,l,i)});function da(r,i){var l=De(r)?ht:Af;return l(r,Ne(i,3))}_(da,"map");function UL(r,i,l,E){return r==null?[]:(De(i)||(i=i==null?[]:[i]),l=E?s:l,De(l)||(l=l==null?[]:[l]),Pf(r,i,l))}_(UL,"orderBy");var YL=la(function(r,i,l){r[l?0:1].push(i)},function(){return[[],[]]});function ML(r,i,l){var E=De(r)?rc:KN,S=arguments.length<3;return E(r,Ne(i,4),l,S,_s)}_(ML,"reduce");function xL(r,i,l){var E=De(r)?zC:KN,S=arguments.length<3;return E(r,Ne(i,4),l,S,Tf)}_(xL,"reduceRight");function VL(r,i){var l=De(r)?ns:uf;return l(r,Pa(Ne(i,3)))}_(VL,"reject");function bL(r){var i=De(r)?af:Ly;return i(r)}_(bL,"sample");function FL(r,i,l){(l?hr(r,i,l):i===s)?i=1:i=ge(i);var E=De(r)?ay:wy;return E(r,i)}_(FL,"sampleSize");function vL(r){var i=De(r)?_y:Uy;return i(r)}_(vL,"shuffle");function kL(r){if(r==null)return 0;if(Pr(r))return Ia(r)?ri(r):r.length;var i=sr(r);return i==vt||i==ve?r.size:mc(r).length}_(kL,"size");function qL(r,i,l){var E=De(r)?nc:Yy;return l&&hr(r,i,l)&&(i=s),E(r,Ne(i,3))}_(qL,"some");var GL=ye(function(r,i){if(r==null)return[];var l=i.length;return l>1&&hr(r,i[0],i[1])?i=[]:l>2&&hr(i[0],i[1],i[2])&&(i=[i[0]]),Pf(r,zt(i,1),[])}),pa=RO||function(){return qt.Date.now()};function HL(r,i){if(typeof i!="function")throw new Wr(o);return r=ge(r),function(){if(--r<1)return i.apply(this,arguments)}}_(HL,"after");function NA(r,i,l){return i=l?s:i,i=r&&i==null?r.length:i,Yn(r,$,s,s,s,s,i)}_(NA,"ary");function fA(r,i){var l;if(typeof i!="function")throw new Wr(o);return r=ge(r),function(){return--r>0&&(l=i.apply(this,arguments)),r<=1&&(i=s),l}}_(fA,"before");var Kc=ye(function(r,i,l){var E=p;if(l.length){var S=is(l,ci(Kc));E|=B}return Yn(r,E,i,l,S)}),AA=ye(function(r,i,l){var E=p|m;if(l.length){var S=is(l,ci(AA));E|=B}return Yn(i,E,r,l,S)});function dA(r,i,l){i=l?s:i;var E=Yn(r,P,s,s,s,s,s,i);return E.placeholder=dA.placeholder,E}_(dA,"curry");function pA(r,i,l){i=l?s:i;var E=Yn(r,M,s,s,s,s,s,i);return E.placeholder=pA.placeholder,E}_(pA,"curryRight");function mA(r,i,l){var E,S,d,D,C,w,H=0,K=!1,z=!1,re=!0;if(typeof r!="function")throw new Wr(o);i=Jr(i)||0,ft(l)&&(K=!!l.leading,z="maxWait"in l,d=z?xt(Jr(l.maxWait)||0,i):d,re="trailing"in l?!!l.trailing:re);function _e(gt){var ln=E,Fn=S;return E=S=s,H=gt,D=r.apply(Fn,ln),D}_(_e,"invokeFunc");function fe(gt){return H=gt,C=ji(Le,i),K?_e(gt):D}_(fe,"leadingEdge");function Ce(gt){var ln=gt-w,Fn=gt-H,vA=i-ln;return z?nr(vA,d-Fn):vA}_(Ce,"remainingWait");function Ae(gt){var ln=gt-w,Fn=gt-H;return w===s||ln>=i||ln<0||z&&Fn>=d}_(Ae,"shouldInvoke");function Le(){var gt=pa();if(Ae(gt))return Me(gt);C=ji(Le,Ce(gt))}_(Le,"timerExpired");function Me(gt){return C=s,re&&E?_e(gt):(E=S=s,D)}_(Me,"trailingEdge");function Yr(){C!==s&&wf(C),H=0,E=w=S=C=s}_(Yr,"cancel");function Sr(){return C===s?D:Me(pa())}_(Sr,"flush");function Mr(){var gt=pa(),ln=Ae(gt);if(E=arguments,S=this,w=gt,ln){if(C===s)return fe(w);if(z)return wf(C),C=ji(Le,i),_e(w)}return C===s&&(C=ji(Le,i)),D}return _(Mr,"debounced"),Mr.cancel=Yr,Mr.flush=Sr,Mr}_(mA,"debounce");var KL=ye(function(r,i){return lf(r,1,i)}),WL=ye(function(r,i,l){return lf(r,Jr(i)||0,l)});function $L(r){return Yn(r,se)}_($L,"flip");function ma(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new Wr(o);var l=_(function(){var E=arguments,S=i?i.apply(this,E):E[0],d=l.cache;if(d.has(S))return d.get(S);var D=r.apply(this,E);return l.cache=d.set(S,D)||d,D},"memoized");return l.cache=new(ma.Cache||Bn),l}_(ma,"memoize"),ma.Cache=Bn;function Pa(r){if(typeof r!="function")throw new Wr(o);return function(){var i=arguments;switch(i.length){case 0:return!r.call(this);case 1:return!r.call(this,i[0]);case 2:return!r.call(this,i[0],i[1]);case 3:return!r.call(this,i[0],i[1],i[2])}return!r.apply(this,i)}}_(Pa,"negate");function zL(r){return fA(2,r)}_(zL,"once");var XL=My(function(r,i){i=i.length==1&&De(i[0])?ht(i[0],wr(Ne())):ht(zt(i,1),wr(Ne()));var l=i.length;return ye(function(E){for(var S=-1,d=nr(E.length,l);++S<d;)E[S]=i[S].call(this,E[S]);return Lr(r,this,E)})}),Wc=ye(function(r,i){var l=is(i,ci(Wc));return Yn(r,B,s,i,l)}),PA=ye(function(r,i){var l=is(i,ci(PA));return Yn(r,F,s,i,l)}),QL=Mn(function(r,i){return Yn(r,j,s,s,s,i)});function JL(r,i){if(typeof r!="function")throw new Wr(o);return i=i===s?i:ge(i),ye(r,i)}_(JL,"rest");function jL(r,i){if(typeof r!="function")throw new Wr(o);return i=i==null?0:xt(ge(i),0),ye(function(l){var E=l[i],S=Ts(l,0,i);return E&&ss(S,E),Lr(r,this,S)})}_(jL,"spread");function ZL(r,i,l){var E=!0,S=!0;if(typeof r!="function")throw new Wr(o);return ft(l)&&(E="leading"in l?!!l.leading:E,S="trailing"in l?!!l.trailing:S),mA(r,i,{leading:E,maxWait:i,trailing:S})}_(ZL,"throttle");function ew(r){return NA(r,1)}_(ew,"unary");function tw(r,i){return Wc(Lc(i),r)}_(tw,"wrap");function rw(){if(!arguments.length)return[];var r=arguments[0];return De(r)?r:[r]}_(rw,"castArray");function nw(r){return zr(r,R)}_(nw,"clone");function sw(r,i){return i=typeof i=="function"?i:s,zr(r,R,i)}_(sw,"cloneWith");function iw(r){return zr(r,A|R)}_(iw,"cloneDeep");function ow(r,i){return i=typeof i=="function"?i:s,zr(r,A|R,i)}_(ow,"cloneDeepWith");function aw(r,i){return i==null||cf(r,i,Gt(i))}_(aw,"conformsTo");function cn(r,i){return r===i||r!==r&&i!==i}_(cn,"eq");var _w=ha(Ac),cw=ha(function(r,i){return r>=i}),Vs=Sf(function(){return arguments}())?Sf:function(r){return pt(r)&&Xe.call(r,"callee")&&!ef.call(r,"callee")},De=b.isArray,lw=MN?wr(MN):Ay;function Pr(r){return r!=null&&Ra(r.length)&&!Vn(r)}_(Pr,"isArrayLike");function Dt(r){return pt(r)&&Pr(r)}_(Dt,"isArrayLikeObject");function Tw(r){return r===!0||r===!1||pt(r)&&Er(r)==dr}_(Tw,"isBoolean");var us=DO||nl,uw=xN?wr(xN):dy;function Ew(r){return pt(r)&&r.nodeType===1&&!Zi(r)}_(Ew,"isElement");function hw(r){if(r==null)return!0;if(Pr(r)&&(De(r)||typeof r=="string"||typeof r.splice=="function"||us(r)||li(r)||Vs(r)))return!r.length;var i=sr(r);if(i==vt||i==ve)return!r.size;if(Ji(r))return!mc(r).length;for(var l in r)if(Xe.call(r,l))return!1;return!0}_(hw,"isEmpty");function Sw(r,i){return zi(r,i)}_(Sw,"isEqual");function Nw(r,i,l){l=typeof l=="function"?l:s;var E=l?l(r,i):s;return E===s?zi(r,i,s,l):!!E}_(Nw,"isEqualWith");function $c(r){if(!pt(r))return!1;var i=Er(r);return i==Zn||i==xi||typeof r.message=="string"&&typeof r.name=="string"&&!Zi(r)}_($c,"isError");function fw(r){return typeof r=="number"&&rf(r)}_(fw,"isFinite");function Vn(r){if(!ft(r))return!1;var i=Er(r);return i==Ln||i==es||i==vr||i==Ze}_(Vn,"isFunction");function RA(r){return typeof r=="number"&&r==ge(r)}_(RA,"isInteger");function Ra(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=te}_(Ra,"isLength");function ft(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}_(ft,"isObject");function pt(r){return r!=null&&typeof r=="object"}_(pt,"isObjectLike");var IA=VN?wr(VN):my;function Aw(r,i){return r===i||pc(r,i,Vc(i))}_(Aw,"isMatch");function dw(r,i,l){return l=typeof l=="function"?l:s,pc(r,i,Vc(i),l)}_(dw,"isMatchWith");function pw(r){return DA(r)&&r!=+r}_(pw,"isNaN");function mw(r){if(s0(r))throw new Ie(n);return Nf(r)}_(mw,"isNative");function Pw(r){return r===null}_(Pw,"isNull");function Rw(r){return r==null}_(Rw,"isNil");function DA(r){return typeof r=="number"||pt(r)&&Er(r)==V}_(DA,"isNumber");function Zi(r){if(!pt(r)||Er(r)!=ae)return!1;var i=Qo(r);if(i===null)return!0;var l=Xe.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&Wo.call(l)==dO}_(Zi,"isPlainObject");var zc=bN?wr(bN):Py;function Iw(r){return RA(r)&&r>=-te&&r<=te}_(Iw,"isSafeInteger");var gA=FN?wr(FN):Ry;function Ia(r){return typeof r=="string"||!De(r)&&pt(r)&&Er(r)==rt}_(Ia,"isString");function Ur(r){return typeof r=="symbol"||pt(r)&&Er(r)==Yt}_(Ur,"isSymbol");var li=vN?wr(vN):Iy;function Dw(r){return r===s}_(Dw,"isUndefined");function gw(r){return pt(r)&&sr(r)==pr}_(gw,"isWeakMap");function Cw(r){return pt(r)&&Er(r)==tr}_(Cw,"isWeakSet");var Ow=ha(Pc),yw=ha(function(r,i){return r<=i});function CA(r){if(!r)return[];if(Pr(r))return Ia(r)?an(r):mr(r);if(vi&&r[vi])return aO(r[vi]());var i=sr(r),l=i==vt?cc:i==ve?Go:Ti;return l(r)}_(CA,"toArray");function bn(r){if(!r)return r===0?r:0;if(r=Jr(r),r===Se||r===-Se){var i=r<0?-1:1;return i*we}return r===r?r:0}_(bn,"toFinite");function ge(r){var i=bn(r),l=i%1;return i===i?l?i-l:i:0}_(ge,"toInteger");function OA(r){return r?Us(ge(r),0,Te):0}_(OA,"toLength");function Jr(r){if(typeof r=="number")return r;if(Ur(r))return J;if(ft(r)){var i=typeof r.valueOf=="function"?r.valueOf():r;r=ft(i)?i+"":i}if(typeof r!="string")return r===0?r:+r;r=WN(r);var l=lC.test(r);return l||uC.test(r)?HC(r.slice(2),l?2:8):cC.test(r)?J:+r}_(Jr,"toNumber");function yA(r){return pn(r,Rr(r))}_(yA,"toPlainObject");function Lw(r){return r?Us(ge(r),-te,te):r===0?r:0}_(Lw,"toSafeInteger");function We(r){return r==null?"":Br(r)}_(We,"toString");var ww=ai(function(r,i){if(Ji(i)||Pr(i)){pn(i,Gt(i),r);return}for(var l in i)Xe.call(i,l)&&Ki(r,l,i[l])}),LA=ai(function(r,i){pn(i,Rr(i),r)}),Da=ai(function(r,i,l,E){pn(i,Rr(i),r,E)}),Bw=ai(function(r,i,l,E){pn(i,Gt(i),r,E)}),Uw=Mn(Sc);function Yw(r,i){var l=oi(r);return i==null?l:_f(l,i)}_(Yw,"create");var Mw=ye(function(r,i){r=et(r);var l=-1,E=i.length,S=E>2?i[2]:s;for(S&&hr(i[0],i[1],S)&&(E=1);++l<E;)for(var d=i[l],D=Rr(d),C=-1,w=D.length;++C<w;){var H=D[C],K=r[H];(K===s||cn(K,ni[H])&&!Xe.call(r,H))&&(r[H]=d[H])}return r}),xw=ye(function(r){return r.push(s,$f),Lr(wA,s,r)});function Vw(r,i){return qN(r,Ne(i,3),dn)}_(Vw,"findKey");function bw(r,i){return qN(r,Ne(i,3),fc)}_(bw,"findLastKey");function Fw(r,i){return r==null?r:Nc(r,Ne(i,3),Rr)}_(Fw,"forIn");function vw(r,i){return r==null?r:Ef(r,Ne(i,3),Rr)}_(vw,"forInRight");function kw(r,i){return r&&dn(r,Ne(i,3))}_(kw,"forOwn");function qw(r,i){return r&&fc(r,Ne(i,3))}_(qw,"forOwnRight");function Gw(r){return r==null?[]:oa(r,Gt(r))}_(Gw,"functions");function Hw(r){return r==null?[]:oa(r,Rr(r))}_(Hw,"functionsIn");function Xc(r,i,l){var E=r==null?s:Ys(r,i);return E===s?l:E}_(Xc,"get");function Kw(r,i){return r!=null&&Qf(r,i,hy)}_(Kw,"has");function Qc(r,i){return r!=null&&Qf(r,i,Sy)}_(Qc,"hasIn");var Ww=qf(function(r,i,l){i!=null&&typeof i.toString!="function"&&(i=$o.call(i)),r[i]=l},jc(Ir)),$w=qf(function(r,i,l){i!=null&&typeof i.toString!="function"&&(i=$o.call(i)),Xe.call(r,i)?r[i].push(l):r[i]=[l]},Ne),zw=ye($i);function Gt(r){return Pr(r)?of(r):mc(r)}_(Gt,"keys");function Rr(r){return Pr(r)?of(r,!0):Dy(r)}_(Rr,"keysIn");function Xw(r,i){var l={};return i=Ne(i,3),dn(r,function(E,S,d){Un(l,i(E,S,d),E)}),l}_(Xw,"mapKeys");function Qw(r,i){var l={};return i=Ne(i,3),dn(r,function(E,S,d){Un(l,S,i(E,S,d))}),l}_(Qw,"mapValues");var Jw=ai(function(r,i,l){aa(r,i,l)}),wA=ai(function(r,i,l,E){aa(r,i,l,E)}),jw=Mn(function(r,i){var l={};if(r==null)return l;var E=!1;i=ht(i,function(d){return d=ls(d,r),E||(E=d.length>1),d}),pn(r,Mc(r),l),E&&(l=zr(l,A|N|R,Wy));for(var S=i.length;S--;)Cc(l,i[S]);return l});function Zw(r,i){return BA(r,Pa(Ne(i)))}_(Zw,"omitBy");var eB=Mn(function(r,i){return r==null?{}:Cy(r,i)});function BA(r,i){if(r==null)return{};var l=ht(Mc(r),function(E){return[E]});return i=Ne(i),Rf(r,l,function(E,S){return i(E,S[0])})}_(BA,"pickBy");function tB(r,i,l){i=ls(i,r);var E=-1,S=i.length;for(S||(S=1,r=s);++E<S;){var d=r==null?s:r[mn(i[E])];d===s&&(E=S,d=l),r=Vn(d)?d.call(r):d}return r}_(tB,"result");function rB(r,i,l){return r==null?r:Xi(r,i,l)}_(rB,"set");function nB(r,i,l,E){return E=typeof E=="function"?E:s,r==null?r:Xi(r,i,l,E)}_(nB,"setWith");var UA=Kf(Gt),YA=Kf(Rr);function sB(r,i,l){var E=De(r),S=E||us(r)||li(r);if(i=Ne(i,4),l==null){var d=r&&r.constructor;S?l=E?new d:[]:ft(r)?l=Vn(d)?oi(Qo(r)):{}:l={}}return(S?Kr:dn)(r,function(D,C,w){return i(l,D,C,w)}),l}_(sB,"transform");function iB(r,i){return r==null?!0:Cc(r,i)}_(iB,"unset");function oB(r,i,l){return r==null?r:Of(r,i,Lc(l))}_(oB,"update");function aB(r,i,l,E){return E=typeof E=="function"?E:s,r==null?r:Of(r,i,Lc(l),E)}_(aB,"updateWith");function Ti(r){return r==null?[]:_c(r,Gt(r))}_(Ti,"values");function _B(r){return r==null?[]:_c(r,Rr(r))}_(_B,"valuesIn");function cB(r,i,l){return l===s&&(l=i,i=s),l!==s&&(l=Jr(l),l=l===l?l:0),i!==s&&(i=Jr(i),i=i===i?i:0),Us(Jr(r),i,l)}_(cB,"clamp");function lB(r,i,l){return i=bn(i),l===s?(l=i,i=0):l=bn(l),r=Jr(r),Ny(r,i,l)}_(lB,"inRange");function TB(r,i,l){if(l&&typeof l!="boolean"&&hr(r,i,l)&&(i=l=s),l===s&&(typeof i=="boolean"?(l=i,i=s):typeof r=="boolean"&&(l=r,r=s)),r===s&&i===s?(r=0,i=1):(r=bn(r),i===s?(i=r,r=0):i=bn(i)),r>i){var E=r;r=i,i=E}if(l||r%1||i%1){var S=nf();return nr(r+S*(i-r+GC("1e-"+((S+"").length-1))),i)}return Ic(r,i)}_(TB,"random");var uB=_i(function(r,i,l){return i=i.toLowerCase(),r+(l?MA(i):i)});function MA(r){return Jc(We(r).toLowerCase())}_(MA,"capitalize");function xA(r){return r=We(r),r&&r.replace(hC,rO).replace(UC,"")}_(xA,"deburr");function EB(r,i,l){r=We(r),i=Br(i);var E=r.length;l=l===s?E:Us(ge(l),0,E);var S=l;return l-=i.length,l>=0&&r.slice(l,S)==i}_(EB,"endsWith");function hB(r){return r=We(r),r&&Yo.test(r)?r.replace(Uo,nO):r}_(hB,"escape");function SB(r){return r=We(r),r&&eC.test(r)?r.replace(Os,"\\$&"):r}_(SB,"escapeRegExp");var NB=_i(function(r,i,l){return r+(l?"-":"")+i.toLowerCase()}),fB=_i(function(r,i,l){return r+(l?" ":"")+i.toLowerCase()}),AB=Ff("toLowerCase");function dB(r,i,l){r=We(r),i=ge(i);var E=i?ri(r):0;if(!i||E>=i)return r;var S=(i-E)/2;return Ea(ea(S),l)+r+Ea(Zo(S),l)}_(dB,"pad");function pB(r,i,l){r=We(r),i=ge(i);var E=i?ri(r):0;return i&&E<i?r+Ea(i-E,l):r}_(pB,"padEnd");function mB(r,i,l){r=We(r),i=ge(i);var E=i?ri(r):0;return i&&E<i?Ea(i-E,l)+r:r}_(mB,"padStart");function PB(r,i,l){return l||i==null?i=0:i&&(i=+i),yO(We(r).replace($_,""),i||0)}_(PB,"parseInt");function RB(r,i,l){return(l?hr(r,i,l):i===s)?i=1:i=ge(i),Dc(We(r),i)}_(RB,"repeat");function IB(){var r=arguments,i=We(r[0]);return r.length<3?i:i.replace(r[1],r[2])}_(IB,"replace");var DB=_i(function(r,i,l){return r+(l?"_":"")+i.toLowerCase()});function gB(r,i,l){return l&&typeof l!="number"&&hr(r,i,l)&&(i=l=s),l=l===s?Te:l>>>0,l?(r=We(r),r&&(typeof i=="string"||i!=null&&!zc(i))&&(i=Br(i),!i&&ti(r))?Ts(an(r),0,l):r.split(i,l)):[]}_(gB,"split");var CB=_i(function(r,i,l){return r+(l?" ":"")+Jc(i)});function OB(r,i,l){return r=We(r),l=l==null?0:Us(ge(l),0,r.length),i=Br(i),r.slice(l,l+i.length)==i}_(OB,"startsWith");function yB(r,i,l){var E=f.templateSettings;l&&hr(r,i,l)&&(i=s),r=We(r),i=Da({},i,E,Wf);var S=Da({},i.imports,E.imports,Wf),d=Gt(S),D=_c(S,d),C,w,H=0,K=i.interpolate||bo,z="__p += '",re=lc((i.escape||bo).source+"|"+K.source+"|"+(K===xo?_C:bo).source+"|"+(i.evaluate||bo).source+"|$","g"),_e="//# sourceURL="+(Xe.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++bC+"]")+`
`;r.replace(re,function(Ae,Le,Me,Yr,Sr,Mr){return Me||(Me=Yr),z+=r.slice(H,Mr).replace(SC,sO),Le&&(C=!0,z+=`' +
__e(`+Le+`) +
'`),Sr&&(w=!0,z+=`';
`+Sr+`;
__p += '`),Me&&(z+=`' +
((__t = (`+Me+`)) == null ? '' : __t) +
'`),H=Mr+Ae.length,Ae}),z+=`';
`;var fe=Xe.call(i,"variable")&&i.variable;if(!fe)z=`with (obj) {
`+z+`
}
`;else if(oC.test(fe))throw new Ie(a);z=(w?z.replace(Js,""):z).replace(wo,"$1").replace(G_,"$1;"),z="function("+(fe||"obj")+`) {
`+(fe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(C?", __e = _.escape":"")+(w?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+z+`return __p
}`;var Ce=bA(function(){return qe(d,_e+"return "+z).apply(s,D)});if(Ce.source=z,$c(Ce))throw Ce;return Ce}_(yB,"template");function LB(r){return We(r).toLowerCase()}_(LB,"toLower");function wB(r){return We(r).toUpperCase()}_(wB,"toUpper");function BB(r,i,l){if(r=We(r),r&&(l||i===s))return WN(r);if(!r||!(i=Br(i)))return r;var E=an(r),S=an(i),d=$N(E,S),D=zN(E,S)+1;return Ts(E,d,D).join("")}_(BB,"trim");function UB(r,i,l){if(r=We(r),r&&(l||i===s))return r.slice(0,QN(r)+1);if(!r||!(i=Br(i)))return r;var E=an(r),S=zN(E,an(i))+1;return Ts(E,0,S).join("")}_(UB,"trimEnd");function YB(r,i,l){if(r=We(r),r&&(l||i===s))return r.replace($_,"");if(!r||!(i=Br(i)))return r;var E=an(r),S=$N(E,an(i));return Ts(E,S).join("")}_(YB,"trimStart");function MB(r,i){var l=ue,E=x;if(ft(i)){var S="separator"in i?i.separator:S;l="length"in i?ge(i.length):l,E="omission"in i?Br(i.omission):E}r=We(r);var d=r.length;if(ti(r)){var D=an(r);d=D.length}if(l>=d)return r;var C=l-ri(E);if(C<1)return E;var w=D?Ts(D,0,C).join(""):r.slice(0,C);if(S===s)return w+E;if(D&&(C+=w.length-C),zc(S)){if(r.slice(C).search(S)){var H,K=w;for(S.global||(S=lc(S.source,We(hN.exec(S))+"g")),S.lastIndex=0;H=S.exec(K);)var z=H.index;w=w.slice(0,z===s?C:z)}}else if(r.indexOf(Br(S),C)!=C){var re=w.lastIndexOf(S);re>-1&&(w=w.slice(0,re))}return w+E}_(MB,"truncate");function xB(r){return r=We(r),r&&H_.test(r)?r.replace(Bo,TO):r}_(xB,"unescape");var VB=_i(function(r,i,l){return r+(l?" ":"")+i.toUpperCase()}),Jc=Ff("toUpperCase");function VA(r,i,l){return r=We(r),i=l?s:i,i===s?oO(r)?hO(r):JC(r):r.match(i)||[]}_(VA,"words");var bA=ye(function(r,i){try{return Lr(r,s,i)}catch(l){return $c(l)?l:new Ie(l)}}),bB=Mn(function(r,i){return Kr(i,function(l){l=mn(l),Un(r,l,Kc(r[l],r))}),r});function FB(r){var i=r==null?0:r.length,l=Ne();return r=i?ht(r,function(E){if(typeof E[1]!="function")throw new Wr(o);return[l(E[0]),E[1]]}):[],ye(function(E){for(var S=-1;++S<i;){var d=r[S];if(Lr(d[0],this,E))return Lr(d[1],this,E)}})}_(FB,"cond");function vB(r){return Ty(zr(r,A))}_(vB,"conforms");function jc(r){return function(){return r}}_(jc,"constant");function kB(r,i){return r==null||r!==r?i:r}_(kB,"defaultTo");var qB=kf(),GB=kf(!0);function Ir(r){return r}_(Ir,"identity");function Zc(r){return ff(typeof r=="function"?r:zr(r,A))}_(Zc,"iteratee");function HB(r){return df(zr(r,A))}_(HB,"matches");function KB(r,i){return pf(r,zr(i,A))}_(KB,"matchesProperty");var WB=ye(function(r,i){return function(l){return $i(l,r,i)}}),$B=ye(function(r,i){return function(l){return $i(r,l,i)}});function el(r,i,l){var E=Gt(i),S=oa(i,E);l==null&&!(ft(i)&&(S.length||!E.length))&&(l=i,i=r,r=this,S=oa(i,Gt(i)));var d=!(ft(l)&&"chain"in l)||!!l.chain,D=Vn(r);return Kr(S,function(C){var w=i[C];r[C]=w,D&&(r.prototype[C]=function(){var H=this.__chain__;if(d||H){var K=r(this.__wrapped__),z=K.__actions__=mr(this.__actions__);return z.push({func:w,args:arguments,thisArg:r}),K.__chain__=H,K}return w.apply(r,ss([this.value()],arguments))})}),r}_(el,"mixin");function zB(){return qt._===this&&(qt._=pO),this}_(zB,"noConflict");function tl(){}_(tl,"noop");function XB(r){return r=ge(r),ye(function(i){return mf(i,r)})}_(XB,"nthArg");var QB=Bc(ht),JB=Bc(kN),jB=Bc(nc);function FA(r){return Fc(r)?sc(mn(r)):Oy(r)}_(FA,"property");function ZB(r){return function(i){return r==null?s:Ys(r,i)}}_(ZB,"propertyOf");var eU=Gf(),tU=Gf(!0);function rl(){return[]}_(rl,"stubArray");function nl(){return!1}_(nl,"stubFalse");function rU(){return{}}_(rU,"stubObject");function nU(){return""}_(nU,"stubString");function sU(){return!0}_(sU,"stubTrue");function iU(r,i){if(r=ge(r),r<1||r>te)return[];var l=Te,E=nr(r,Te);i=Ne(i),r-=Te;for(var S=ac(E,i);++l<r;)i(l);return S}_(iU,"times");function oU(r){return De(r)?ht(r,mn):Ur(r)?[r]:mr(iA(We(r)))}_(oU,"toPath");function aU(r){var i=++AO;return We(r)+i}_(aU,"uniqueId");var _U=ua(function(r,i){return r+i},0),cU=Uc("ceil"),lU=ua(function(r,i){return r/i},1),TU=Uc("floor");function uU(r){return r&&r.length?ia(r,Ir,Ac):s}_(uU,"max");function EU(r,i){return r&&r.length?ia(r,Ne(i,2),Ac):s}_(EU,"maxBy");function hU(r){return HN(r,Ir)}_(hU,"mean");function SU(r,i){return HN(r,Ne(i,2))}_(SU,"meanBy");function NU(r){return r&&r.length?ia(r,Ir,Pc):s}_(NU,"min");function fU(r,i){return r&&r.length?ia(r,Ne(i,2),Pc):s}_(fU,"minBy");var AU=ua(function(r,i){return r*i},1),dU=Uc("round"),pU=ua(function(r,i){return r-i},0);function mU(r){return r&&r.length?oc(r,Ir):0}_(mU,"sum");function PU(r,i){return r&&r.length?oc(r,Ne(i,2)):0}return _(PU,"sumBy"),f.after=HL,f.ary=NA,f.assign=ww,f.assignIn=LA,f.assignInWith=Da,f.assignWith=Bw,f.at=Uw,f.before=fA,f.bind=Kc,f.bindAll=bB,f.bindKey=AA,f.castArray=rw,f.chain=EA,f.chunk=T0,f.compact=u0,f.concat=E0,f.cond=FB,f.conforms=vB,f.constant=jc,f.countBy=mL,f.create=Yw,f.curry=dA,f.curryRight=pA,f.debounce=mA,f.defaults=Mw,f.defaultsDeep=xw,f.defer=KL,f.delay=WL,f.difference=h0,f.differenceBy=S0,f.differenceWith=N0,f.drop=f0,f.dropRight=A0,f.dropRightWhile=d0,f.dropWhile=p0,f.fill=m0,f.filter=RL,f.flatMap=gL,f.flatMapDeep=CL,f.flatMapDepth=OL,f.flatten=cA,f.flattenDeep=P0,f.flattenDepth=R0,f.flip=$L,f.flow=qB,f.flowRight=GB,f.fromPairs=I0,f.functions=Gw,f.functionsIn=Hw,f.groupBy=yL,f.initial=g0,f.intersection=C0,f.intersectionBy=O0,f.intersectionWith=y0,f.invert=Ww,f.invertBy=$w,f.invokeMap=wL,f.iteratee=Zc,f.keyBy=BL,f.keys=Gt,f.keysIn=Rr,f.map=da,f.mapKeys=Xw,f.mapValues=Qw,f.matches=HB,f.matchesProperty=KB,f.memoize=ma,f.merge=Jw,f.mergeWith=wA,f.method=WB,f.methodOf=$B,f.mixin=el,f.negate=Pa,f.nthArg=XB,f.omit=jw,f.omitBy=Zw,f.once=zL,f.orderBy=UL,f.over=QB,f.overArgs=XL,f.overEvery=JB,f.overSome=jB,f.partial=Wc,f.partialRight=PA,f.partition=YL,f.pick=eB,f.pickBy=BA,f.property=FA,f.propertyOf=ZB,f.pull=U0,f.pullAll=TA,f.pullAllBy=Y0,f.pullAllWith=M0,f.pullAt=x0,f.range=eU,f.rangeRight=tU,f.rearg=QL,f.reject=VL,f.remove=V0,f.rest=JL,f.reverse=Gc,f.sampleSize=FL,f.set=rB,f.setWith=nB,f.shuffle=vL,f.slice=b0,f.sortBy=GL,f.sortedUniq=K0,f.sortedUniqBy=W0,f.split=gB,f.spread=jL,f.tail=$0,f.take=z0,f.takeRight=X0,f.takeRightWhile=Q0,f.takeWhile=J0,f.tap=uL,f.throttle=ZL,f.thru=Aa,f.toArray=CA,f.toPairs=UA,f.toPairsIn=YA,f.toPath=oU,f.toPlainObject=yA,f.transform=sB,f.unary=ew,f.union=j0,f.unionBy=Z0,f.unionWith=eL,f.uniq=tL,f.uniqBy=rL,f.uniqWith=nL,f.unset=iB,f.unzip=Hc,f.unzipWith=uA,f.update=oB,f.updateWith=aB,f.values=Ti,f.valuesIn=_B,f.without=sL,f.words=VA,f.wrap=tw,f.xor=iL,f.xorBy=oL,f.xorWith=aL,f.zip=_L,f.zipObject=cL,f.zipObjectDeep=lL,f.zipWith=TL,f.entries=UA,f.entriesIn=YA,f.extend=LA,f.extendWith=Da,el(f,f),f.add=_U,f.attempt=bA,f.camelCase=uB,f.capitalize=MA,f.ceil=cU,f.clamp=cB,f.clone=nw,f.cloneDeep=iw,f.cloneDeepWith=ow,f.cloneWith=sw,f.conformsTo=aw,f.deburr=xA,f.defaultTo=kB,f.divide=lU,f.endsWith=EB,f.eq=cn,f.escape=hB,f.escapeRegExp=SB,f.every=PL,f.find=IL,f.findIndex=aA,f.findKey=Vw,f.findLast=DL,f.findLastIndex=_A,f.findLastKey=bw,f.floor=TU,f.forEach=hA,f.forEachRight=SA,f.forIn=Fw,f.forInRight=vw,f.forOwn=kw,f.forOwnRight=qw,f.get=Xc,f.gt=_w,f.gte=cw,f.has=Kw,f.hasIn=Qc,f.head=lA,f.identity=Ir,f.includes=LL,f.indexOf=D0,f.inRange=lB,f.invoke=zw,f.isArguments=Vs,f.isArray=De,f.isArrayBuffer=lw,f.isArrayLike=Pr,f.isArrayLikeObject=Dt,f.isBoolean=Tw,f.isBuffer=us,f.isDate=uw,f.isElement=Ew,f.isEmpty=hw,f.isEqual=Sw,f.isEqualWith=Nw,f.isError=$c,f.isFinite=fw,f.isFunction=Vn,f.isInteger=RA,f.isLength=Ra,f.isMap=IA,f.isMatch=Aw,f.isMatchWith=dw,f.isNaN=pw,f.isNative=mw,f.isNil=Rw,f.isNull=Pw,f.isNumber=DA,f.isObject=ft,f.isObjectLike=pt,f.isPlainObject=Zi,f.isRegExp=zc,f.isSafeInteger=Iw,f.isSet=gA,f.isString=Ia,f.isSymbol=Ur,f.isTypedArray=li,f.isUndefined=Dw,f.isWeakMap=gw,f.isWeakSet=Cw,f.join=L0,f.kebabCase=NB,f.last=Qr,f.lastIndexOf=w0,f.lowerCase=fB,f.lowerFirst=AB,f.lt=Ow,f.lte=yw,f.max=uU,f.maxBy=EU,f.mean=hU,f.meanBy=SU,f.min=NU,f.minBy=fU,f.stubArray=rl,f.stubFalse=nl,f.stubObject=rU,f.stubString=nU,f.stubTrue=sU,f.multiply=AU,f.nth=B0,f.noConflict=zB,f.noop=tl,f.now=pa,f.pad=dB,f.padEnd=pB,f.padStart=mB,f.parseInt=PB,f.random=TB,f.reduce=ML,f.reduceRight=xL,f.repeat=RB,f.replace=IB,f.result=tB,f.round=dU,f.runInContext=L,f.sample=bL,f.size=kL,f.snakeCase=DB,f.some=qL,f.sortedIndex=F0,f.sortedIndexBy=v0,f.sortedIndexOf=k0,f.sortedLastIndex=q0,f.sortedLastIndexBy=G0,f.sortedLastIndexOf=H0,f.startCase=CB,f.startsWith=OB,f.subtract=pU,f.sum=mU,f.sumBy=PU,f.template=yB,f.times=iU,f.toFinite=bn,f.toInteger=ge,f.toLength=OA,f.toLower=LB,f.toNumber=Jr,f.toSafeInteger=Lw,f.toString=We,f.toUpper=wB,f.trim=BB,f.trimEnd=UB,f.trimStart=YB,f.truncate=MB,f.unescape=xB,f.uniqueId=aU,f.upperCase=VB,f.upperFirst=Jc,f.each=hA,f.eachRight=SA,f.first=lA,el(f,function(){var r={};return dn(f,function(i,l){Xe.call(f.prototype,l)||(r[l]=i)}),r}(),{chain:!1}),f.VERSION=e,Kr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){f[r].placeholder=f}),Kr(["drop","take"],function(r,i){Ue.prototype[r]=function(l){l=l===s?1:xt(ge(l),0);var E=this.__filtered__&&!i?new Ue(this):this.clone();return E.__filtered__?E.__takeCount__=nr(l,E.__takeCount__):E.__views__.push({size:nr(l,Te),type:r+(E.__dir__<0?"Right":"")}),E},Ue.prototype[r+"Right"]=function(l){return this.reverse()[r](l).reverse()}}),Kr(["filter","map","takeWhile"],function(r,i){var l=i+1,E=l==G||l==pe;Ue.prototype[r]=function(S){var d=this.clone();return d.__iteratees__.push({iteratee:Ne(S,3),type:l}),d.__filtered__=d.__filtered__||E,d}}),Kr(["head","last"],function(r,i){var l="take"+(i?"Right":"");Ue.prototype[r]=function(){return this[l](1).value()[0]}}),Kr(["initial","tail"],function(r,i){var l="drop"+(i?"":"Right");Ue.prototype[r]=function(){return this.__filtered__?new Ue(this):this[l](1)}}),Ue.prototype.compact=function(){return this.filter(Ir)},Ue.prototype.find=function(r){return this.filter(r).head()},Ue.prototype.findLast=function(r){return this.reverse().find(r)},Ue.prototype.invokeMap=ye(function(r,i){return typeof r=="function"?new Ue(this):this.map(function(l){return $i(l,r,i)})}),Ue.prototype.reject=function(r){return this.filter(Pa(Ne(r)))},Ue.prototype.slice=function(r,i){r=ge(r);var l=this;return l.__filtered__&&(r>0||i<0)?new Ue(l):(r<0?l=l.takeRight(-r):r&&(l=l.drop(r)),i!==s&&(i=ge(i),l=i<0?l.dropRight(-i):l.take(i-r)),l)},Ue.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ue.prototype.toArray=function(){return this.take(Te)},dn(Ue.prototype,function(r,i){var l=/^(?:filter|find|map|reject)|While$/.test(i),E=/^(?:head|last)$/.test(i),S=f[E?"take"+(i=="last"?"Right":""):i],d=E||/^find/.test(i);S&&(f.prototype[i]=function(){var D=this.__wrapped__,C=E?[1]:arguments,w=D instanceof Ue,H=C[0],K=w||De(D),z=_(function(Le){var Me=S.apply(f,ss([Le],C));return E&&re?Me[0]:Me},"interceptor");K&&l&&typeof H=="function"&&H.length!=1&&(w=K=!1);var re=this.__chain__,_e=!!this.__actions__.length,fe=d&&!re,Ce=w&&!_e;if(!d&&K){D=Ce?D:new Ue(this);var Ae=r.apply(D,C);return Ae.__actions__.push({func:Aa,args:[z],thisArg:s}),new $r(Ae,re)}return fe&&Ce?r.apply(this,C):(Ae=this.thru(z),fe?E?Ae.value()[0]:Ae.value():Ae)})}),Kr(["pop","push","shift","sort","splice","unshift"],function(r){var i=Ho[r],l=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",E=/^(?:pop|shift)$/.test(r);f.prototype[r]=function(){var S=arguments;if(E&&!this.__chain__){var d=this.value();return i.apply(De(d)?d:[],S)}return this[l](function(D){return i.apply(De(D)?D:[],S)})}}),dn(Ue.prototype,function(r,i){var l=f[i];if(l){var E=l.name+"";Xe.call(ii,E)||(ii[E]=[]),ii[E].push({name:i,func:l})}}),ii[Ta(s,m).name]=[{name:"wrapper",func:s}],Ue.prototype.clone=xO,Ue.prototype.reverse=VO,Ue.prototype.value=bO,f.prototype.at=EL,f.prototype.chain=hL,f.prototype.commit=SL,f.prototype.next=NL,f.prototype.plant=AL,f.prototype.reverse=dL,f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=pL,f.prototype.first=f.prototype.head,vi&&(f.prototype[vi]=fL),f},"runInContext"),os=SO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(qt._=os,define(function(){return os})):ys?((ys.exports=os)._=os,Z_._=os):qt._=os}).call(ui)});var kA=Y((X2,IU)=>{IU.exports={name:"Oracle",version:"0.2.6",author:"hackolade",engines:{hackolade:"6.11.1",hackoladePlugin:"1.2.0"},contributes:{target:{applicationTarget:"Oracle",title:"Oracle",versions:["12c","18c","19c","21c","23ai"]},features:{nestedCollections:!1,disablePatternField:!0,disableMultipleTypes:!0,enableForwardEngineering:!0,disableReverseEngineering:!1,disableChoices:!0,enableJsonType:!0,useJsonTypesWithComplexTypes:!0,reverseSchemaIntoOneColumn:!0,disableDenormalization:!0,enableComplexTypesNormalization:!0,restrictNestedFieldsAsPrimaryKey:!1,views:{enabled:!0,viewLevel:"model",disablePipelines:!0},relationships:{compositeRelationships:!0},enableFetchSystemEntitiesCheckbox:!0,discoverRelationships:!0}},description:"Hackolade plugin for Oracle and Autonomous databases",disabled:!1,dependencies:{"adm-zip":"0.5.9",lodash:"4.17.21",oracledb:"6.0.3",perplex:"0.11.0"},"lint-staged":{"*.{js,json}":"prettier --write"},"simple-git-hooks":{"pre-commit":"npx lint-staged","pre-push":"npx eslint ."},scripts:{lint:"eslint . --max-warnings=0",package:"node esbuild.package.js"},devDependencies:{"@hackolade/hck-esbuild-plugins-pack":"0.0.1","@typescript-eslint/parser":"7.11.0","@typescript-eslint/eslint-plugin":"7.11.0",esbuild:"0.20.2","esbuild-plugin-clean":"1.0.1",eslint:"8.57.0","eslint-config-prettier":"9.1.0","eslint-formatter-teamcity":"^1.0.0","eslint-plugin-import":"^2.26.0","eslint-plugin-prettier":"5.1.3","eslint-plugin-unused-imports":"3.2.0","lint-staged":"14.0.1",prettier:"3.2.5","simple-git-hooks":"2.11.1"}}});var GA=Y((Q2,qA)=>{"use strict";var vn=require("os"),DU=kA(),gU=_(s=>s<10?"0"+s:s,"prefixZero"),CU=_(s=>s.reduce((e,t)=>Math.max(e,t.speed),0),"maxClock"),OU=_(s=>Math.floor(s/3600)+":"+gU(parseInt((s/3600-Math.floor(s/3600))*60)),"toTime"),yU=_(()=>DU.version,"getPluginVersion"),LU=_(s=>`Date: ${new Date}
Application version: ${s}
Plugin version: ${yU()}

System information:
 Hostname:  ${vn.hostname()}
 Platform:  ${vn.platform()} ${vn.arch()}
 Release:   ${vn.release()}
 Uptime:    ${OU(vn.uptime())}
 Total RAM: ${(vn.totalmem()/1073741824).toFixed(2)} GB
 CPU Model: ${vn.cpus()[0].model}
 CPU Clock: ${CU(vn.cpus())} MHZ
 CPU Cores: ${vn.cpus().length} cores

`,"getSystemInfo"),wU=_((s,e,t)=>{t.clear(),t.log("info",LU(e.appVersion),s),t.log("info",e,"connectionInfo",e.hiddenKeys)},"logInfo");qA.exports=wU});var KA=Y((j2,HA)=>{HA.exports={VERSION_MAJOR:6,VERSION_MINOR:0,VERSION_PATCH:3,VERSION_SUFFIX:""}});var ir=Y((Z2,$A)=>{"use strict";var Es=KA(),WA=Es.VERSION_MAJOR+"."+Es.VERSION_MINOR+"."+Es.VERSION_PATCH+Es.VERSION_SUFFIX;$A.exports={VERSION_MAJOR:Es.VERSION_MAJOR,VERSION_MINOR:Es.VERSION_MINOR,VERSION_PATCH:Es.VERSION_PATCH,VERSION_SUFFIX:Es.VERSION_SUFFIX,VERSION_STRING:WA,DEFAULT_DRIVER_NAME:"node-oracledb : "+WA,DEFAULT_ERROR_URL:"https://node-oracledb.readthedocs.io/en/latest/user_guide/installation.html",DEFAULT_MAX_SIZE_FOR_OUT_BINDS:200,CSFRM_IMPLICIT:1,CSFRM_NCHAR:2,CQN_OPCODE_ALL_OPS:0,CQN_OPCODE_ALL_ROWS:1,CQN_OPCODE_ALTER:16,CQN_OPCODE_DELETE:8,CQN_OPCODE_DROP:32,CQN_OPCODE_INSERT:2,CQN_OPCODE_UPDATE:4,DEFAULT:0,STMT_TYPE_UNKNOWN:0,STMT_TYPE_SELECT:1,STMT_TYPE_UPDATE:2,STMT_TYPE_DELETE:3,STMT_TYPE_INSERT:4,STMT_TYPE_CREATE:5,STMT_TYPE_DROP:6,STMT_TYPE_ALTER:7,STMT_TYPE_BEGIN:8,STMT_TYPE_DECLARE:9,STMT_TYPE_CALL:10,STMT_TYPE_EXPLAIN_PLAN:15,STMT_TYPE_MERGE:16,STMT_TYPE_ROLLBACK:17,STMT_TYPE_COMMIT:21,SHUTDOWN_MODE_DEFAULT:0,SHUTDOWN_MODE_TRANSACTIONAL:1,SHUTDOWN_MODE_TRANSACTIONAL_LOCAL:2,SHUTDOWN_MODE_IMMEDIATE:3,SHUTDOWN_MODE_ABORT:4,SHUTDOWN_MODE_FINAL:5,STARTUP_MODE_DEFAULT:0,STARTUP_MODE_FORCE:1,STARTUP_MODE_RESTRICT:2,SUBSCR_EVENT_TYPE_SHUTDOWN:2,SUBSCR_EVENT_TYPE_SHUTDOWN_ANY:3,SUBSCR_EVENT_TYPE_STARTUP:1,SUBSCR_EVENT_TYPE_DEREG:5,SUBSCR_EVENT_TYPE_OBJ_CHANGE:6,SUBSCR_EVENT_TYPE_QUERY_CHANGE:7,SUBSCR_EVENT_TYPE_AQ:100,SUBSCR_GROUPING_CLASS_TIME:1,SUBSCR_GROUPING_TYPE_SUMMARY:1,SUBSCR_GROUPING_TYPE_LAST:2,SUBSCR_NAMESPACE_AQ:1,SUBSCR_NAMESPACE_DBCHANGE:2,SUBSCR_QOS_BEST_EFFORT:16,SUBSCR_QOS_DEREG_NFY:2,SUBSCR_QOS_QUERY:8,SUBSCR_QOS_RELIABLE:1,SUBSCR_QOS_ROWIDS:4,SYSASM:32768,SYSBACKUP:131072,SYSDBA:2,SYSDG:262144,SYSKM:524288,SYSOPER:4,SYSPRELIM:8,SYSRAC:1048576,BIND_IN:3001,BIND_INOUT:3002,BIND_OUT:3003,OUT_FORMAT_ARRAY:4001,OUT_FORMAT_OBJECT:4002,SODA_COLL_MAP_MODE:5001,POOL_STATUS_OPEN:6e3,POOL_STATUS_DRAINING:6001,POOL_STATUS_CLOSED:6002,POOL_STATUS_RECONFIGURING:6003,PURITY_DEFAULT:0,PURITY_NEW:1,PURITY_SELF:2,AQ_DEQ_NO_WAIT:0,AQ_DEQ_WAIT_FOREVER:4294967295,AQ_DEQ_MODE_BROWSE:1,AQ_DEQ_MODE_LOCKED:2,AQ_DEQ_MODE_REMOVE:3,AQ_DEQ_MODE_REMOVE_NO_DATA:4,AQ_DEQ_NAV_FIRST_MSG:1,AQ_DEQ_NAV_NEXT_TRANSACTION:2,AQ_DEQ_NAV_NEXT_MSG:3,AQ_MSG_DELIV_MODE_PERSISTENT:1,AQ_MSG_DELIV_MODE_BUFFERED:2,AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED:3,AQ_MSG_STATE_READY:0,AQ_MSG_STATE_WAITING:1,AQ_MSG_STATE_PROCESSED:2,AQ_MSG_STATE_EXPIRED:3,AQ_VISIBILITY_IMMEDIATE:1,AQ_VISIBILITY_ON_COMMIT:2,TPC_BEGIN_JOIN:2,TPC_BEGIN_NEW:1,TPC_BEGIN_PROMOTE:8,TPC_BEGIN_RESUME:4,TPC_END_NORMAL:0,TPC_END_SUSPEND:1048576}});var Ee=Y((ev,zp)=>{"use strict";var BU=require("util"),zA="NJS",XA=2,QA=3,sl=4,il=5,ol=7,al=9,JA=10,jA=11,ZA=12,ed=13,td=15,rd=16,nd=17,sd=18,id=19,od=21,ad=22,_d=23,cd=24,ld=34,Td=35,ud=36,Ed=37,hd=40,Sd=41,Nd=42,fd=43,Ad=44,dd=45,pd=46,md=47,Pd=52,Rd=55,Id=56,Dd=57,gd=58,Cd=59,Od=60,yd=61,Ld=62,wd=63,Bd=64,Ud=65,Yd=66,Md=67,_l=68,xd=69,Vd=70,bd=75,Fd=76,vd=78,kd=80,qd=81,Gd=82,Hd=83,Kd=84,Wd=85,$d=86,cl=87,ll=89,zd=90,Xd=91,Qd=92,Tl=95,Jd=97,jd=98,Zd=99,ep=100,tp=101,rp=102,np=103,ul=104,El=105,sp=106,hl=107,Sl=108,ip=109,op=110,ap=111,_p=112,cp=113,lp=114,Nl=115,Tp=116,up=117,Ep=118,hp=119,Sp=120,Np=121,fp=122,fl=123,Ap=125,dp=126,pp=127,mp=128,Al=129,Pp=130,dl=131,pl=132,ml=133,Rp=134,Ip=135,Dp=136,gp=137,Cp=138,bs=500,Op=501,yp=503,Lp=504,wp=505,Bp=506,Up=507,Yp=508,Mp=509,xp=510,Vp=511,bp=512,Fp=513,vp=514,kp=515,qp=516,Gp=517,Hp=518,Kp=519,Wp=520,$p=521,Ht=new Map;Ht.set("DPI-1010",bs);Ht.set("DPI-1024",[pl,"at index ([0-9]+) does"]);Ht.set("DPI-1040",Sl);Ht.set("DPI-1044",Nl);Ht.set("DPI-1055",El);Ht.set("DPI-1063",Tl);Ht.set("DPI-1067",[fl,"call timeout of ([0-9]+) ms"]);Ht.set("DPI-1080",bs);Ht.set("OCI-22303",[Al,'type "([^"]*"."[^"]*)"']);Ht.set("OCI-22164",ml);Ht.set("OCI-22165",[dl,/index \[([0-9]+)\] must be in the range of \[([0-9]+)\] to \[([0-9]+)\]/]);Ht.set("ORA-00028",bs);Ht.set("ORA-00600",bs);Ht.set("ORA-24338",hl);Ht.set("ORA-24422",ul);Ht.set("ORA-25708",cl);var v=new Map;v.set(XA,"invalid pool");v.set(QA,"invalid connection");v.set(sl,'invalid value for property "%s"');v.set(il,"invalid value for parameter %d");v.set(ol,'invalid value for "%s" in parameter %d');v.set(al,"invalid number of parameters");v.set(JA,"unsupported data type %d in column %d");v.set(jA,"encountered bind value and type mismatch");v.set(ZA,"encountered invalid bind data type in parameter %d");v.set(ed,"invalid bind direction");v.set(td,"type was not specified for conversion");v.set(rd,"buffer is too small for OUT binds");v.set(nd,"concurrent operations on ResultSet are not allowed");v.set(sd,"invalid ResultSet");v.set(id,"ResultSet cannot be returned for non-query statements");v.set(od,"invalid type for conversion specified");v.set(ad,"invalid Lob");v.set(_d,"concurrent operations on a Lob are not allowed");v.set(cd,"memory allocation failed");v.set(ld,"data type is unsupported for array bind");v.set(Td,"maxArraySize is required for IN OUT array bind");v.set(ud,'length of given array is greater than "maxArraySize"');v.set(Ed,'invalid data type at array index %d for bind ":%s"');v.set(hd,'connection request timeout. Request exceeded "queueTimeout" of %d');v.set(Sd,"cannot convert ResultSet to QueryStream after invoking methods");v.set(Nd,"cannot invoke ResultSet methods after converting to QueryStream");v.set(fd,"ResultSet already converted to QueryStream");v.set(Ad,'bind object must contain one of the following attributes: "dir", "type", "maxSize", or "val"');v.set(dd,"cannot load a node-oracledb Thick mode binary for Node.js. Please try using Thin mode. %s");v.set(pd,'pool alias "%s" already exists in the connection pool cache');v.set(md,'pool alias "%s" not found in connection pool cache');v.set(Pd,"invalid data type at array index %d for bind position %d");v.set(Rd,"binding by position and name cannot be mixed");v.set(Id,"maxSize for bind position %d must be specified and be greater than zero");v.set(Dd,'maxSize for bind "%s" must be specified and greater than zero');v.set(gd,"maxSize of %d is too small for value of length %d in row %d");v.set(Cd,"type must be specified for bind position %d");v.set(Od,'type must be specified for bind "%s"');v.set(yd,"invalid subscription");v.set(Ld,"subscription notification callback missing");v.set(wd,"subscription notification SQL missing");v.set(Bd,"connection pool is closing");v.set(Ud,"connection pool was closed");v.set(Yd,"invalid SODA document cursor");v.set(Md,"a pre-built node-oracledb Thick mode binary was not found for %s");v.set(_l,"invalid error number %d supplied");v.set(xd,"node-oracledb %s requires Node.js %s or later");v.set(Vd,"message must be a string, buffer, database object or an object containing a payload property which itself is a string, buffer or database object");v.set(bd,'only one of "connectString" and "connectionString" can be used');v.set(Fd,'connection request rejected. Pool queue length "queueMax" %d reached');v.set(vd,"unsupported data type %d in JSON value");v.set(kd,'only one of "user" and "username" can be used');v.set(qd,"concurrent operations on a connection are disabled");v.set(Gd,"connection pool is being reconfigured");v.set(Hd,"pool statistics are not enabled");v.set(Kd,"invalid access token");v.set(Wd,'invalid connection pool configuration with token-based authentication. The "homogeneous" and "externalAuth" attributes must be set to true');v.set($d,'invalid standalone configuration with token-based authentication. The "externalAuth" attribute must be set to true');v.set(cl,"access token has expired");v.set(ll,"%s is not supported by node-oracledb in Thin mode");v.set(zd,"initOracleClient() was already called with different arguments");v.set(Xd,"file %s is missing");v.set(Qd,'"poolMax" %d must be greater than or equal to "poolMin" %d');v.set(Tl,'setting "batchErrors" or "dmlRowCounts" to true is only permitted for DML statements');v.set(Jd,'no bind placeholder named ":%s" was found in the statement text');v.set(jd,"%s positional bind values are required but %s were provided");v.set(Zd,"internal error: buffer of length %s insufficient to hold %s bytes");v.set(ep,"national character set id %d is not supported by node-oracledb in Thin mode");v.set(tp,"no credentials specified");v.set(rp,"unexpected end of data: want %d bytes but only %d bytes are available");v.set(np,"unexpected message type %d received at position %d of packet %d");v.set(ul,"connection pool cannot be closed because connections are busy");v.set(El,"value is not a number (NaN) and cannot be used in Oracle Database numbers");v.set(sp,"internal error: %s");v.set(hl,"invalid cursor");v.set(Sl,"LOB was already closed");v.set(ip,"invalid type number %d");v.set(op,"invalid Oracle type number %d [csfrm: %d]");v.set(ap,"internal error: read a negative integer when expecting a positive integer at position %d of packet %d");v.set(_p,"internal error: read integer of length %d when expecting integer of no more than length %d at position %d of packet %d");v.set(cp,"unexpected data received: %s");v.set(lp,"OSON field names may not exceed 255 UTF-8 encoded bytes");v.set(Nl,"value cannot be represented as an Oracle Database number");v.set(Tp,"password verifier type 0x%s is not supported by node-oracledb in Thin mode");v.set(up,"invalid private key. Headers and footers are not allowed");v.set(Ep,"node-oracledb Thick mode cannot be enabled because a Thin mode connection has already been created");v.set(hp,"conversion from type %s to type %s is not supported");v.set(Sp,"fetchTypeHandler return value must be an object");v.set(Np,'fetchTypeHandler return value attribute "type" must be a valid database type');v.set(fp,'fetchTypeHandler return value attribute "converter" must be a function');v.set(fl,"call timeout of %d ms exceeded");v.set(Ap,'"connectString" cannot be empty or undefined. Bequeath connections are not supported in Thin mode');v.set(dp,"OSON version %s is not supported");v.set(pp,"internal error: unknown server side piggyback opcode %s");v.set(mp,'internal error: unknown column type name "%s"');v.set(Al,'invalid object type name: "%s"');v.set(Pp,"Oracle TDS data type %d is not supported");v.set(dl,"given index %d must be in the range of %d to %d");v.set(pl,"element at index %d does not exist");v.set(ml,"cannot delete elements of a VARRAY");v.set(Rp,"value is of wrong type for attribute %s of object %s");v.set(Ip,"value is of wrong type for an element of object %s");v.set(Dp,"user name and password cannot be set when using external authentication");v.set(gp,'a bind variable replacement value for placeholder ":%s" was not provided');v.set(Cp,"connections to this database server version are not supported by node-oracledb in Thin mode");v.set(bs,"connection to the Oracle Database was broken");v.set(Op,`connection to host %s port %d terminated unexpectedly. (CONNECTION_ID=%s)
%s`);v.set(yp,`connection to host %s port %d could not be established. (CONNECTION_ID=%s)
%s`);v.set(Lp,`connection establishment through a web proxy at host %s port %d failed. (CONNECTION_ID=%s)
%s`);v.set(wp,"unable to initiate TLS connection. Please check if wallet credentials are valid");v.set(Bp,`connection to host %s port %d encountered TLS handshake failure. (CONNECTION_ID=%s)
%s`);v.set(Up,"TLS detected an invalid certificate. Server DN in certificate does not match the specified DN");v.set(Yp,"TLS detected an invalid certificate. %s not present in certificate");v.set(Mp,"internal error: invalid packet type or malformed packet received");v.set(xp,'connection to host %s port %d timed out. Request exceeded "%s" of %d seconds. (CONNECTION_ID=%s)');v.set(Vp,`connection to listener at host %s port %d was refused. (CONNECTION_ID=%s)
Cause: %s`);v.set(bp,`invalid connection string parameters.
%s`);v.set(Fp,"error received through in-band notification: %s");v.set(vp,"syntax error in connection string");v.set(kp,"error in Easy Connect connection string: %s: %s");v.set(qp,"no configuration directory set or available to search for tnsnames.ora");v.set(Gp,'cannot connect to Oracle Database. Unable to find "%s" in "%s"');v.set(Hp,'cannot connect to Oracle Database. Service "%s" is not registered with the listener at host %s port %s. (CONNECTION_ID=%s)');v.set(Kp,'cannot connect to Oracle Database. SID "%s" is not registered with the listener at host %s port %s. (CONNECTION_ID=%s)');v.set(Wp,"cannot connect to Oracle Database. File tnsnames.ora not found in %s");v.set($p,"connection to host %s port %d received end-of-file on communication channel. (CONNECTION_ID=%s)");function to(s){if(!s){let e=Array.prototype.slice.call(arguments,1);Pl(...e)}}_(to,"assert");function UU(s,e,t){to(s.length>=e&&s.length<=t,al)}_(UU,"assertArgCount");function YU(s,e,t){s[t]!==void 0&&Ei(typeof s[t]=="boolean",e,t)}_(YU,"assertParamPropBool");function MU(s,e,t){s[t]!==void 0&&Ei(typeof s[t]=="function",e,t)}_(MU,"assertParamPropFunction");function xU(s,e,t){s[t]!==void 0&&Ei(Number.isInteger(s[t]),e,t)}_(xU,"assertParamPropInt");function VU(s,e,t){s[t]!==void 0&&Ei(Number.isInteger(s[t])&&s[t]>=0,e,t)}_(VU,"assertParamPropUnsignedInt");function bU(s,e,t){s[t]!==void 0&&Ei(typeof s[t]=="string",e,t)}_(bU,"assertParamPropString");function Ei(s,e,t){to(s,ol,t,e)}_(Ei,"assertParamPropValue");function FU(s,e){to(s,il,e)}_(FU,"assertParamValue");function vU(s,e){to(s,sl,e)}_(vU,"assertPropValue");function ga(s){let e=v.get(s),t=[...arguments];e||(t=[void 0,s],s=_l,e=v.get(s));let n=s.toString().padStart(3,"0"),o=`${zA}-${n}`;t[0]=`${o}: ${e}`;let a=new Error(BU.format(...t));return a.code=o,Error.captureStackTrace(a,ga),a}_(ga,"getErr");function Pl(){throw ga(...arguments)}_(Pl,"throwErr");function kU(s){Pl(ll,s)}_(kU,"throwNotImplemented");function qU(s,e){if(!s.code){let t=s.message.indexOf(":");if(t>0&&(s.code=s.message.substr(0,t),Ht.has(s.code))){let n=[],o,a=Ht.get(s.code);if(typeof a=="number")o=a;else{o=a[0];let u=a[1],h=s.message.match(u);h&&(n=h.slice(1))}let T=ga(o,...n);s.code=T.code,s.message=T.message+`
`+s.message}}return s.requiresStackCapture&&(delete s.requiresStackCapture,Error.captureStackTrace(s,e)),s}_(qU,"transformErr");zp.exports={ERR_INVALID_POOL:XA,ERR_INVALID_CONNECTION:QA,ERR_INVALID_PROPERTY_VALUE:sl,ERR_INVALID_PARAMETER_VALUE:il,ERR_INVALID_PROPERTY_VALUE_IN_PARAM:ol,ERR_INVALID_NUMBER_OF_PARAMETERS:al,ERR_UNSUPPORTED_DATA_TYPE:JA,ERR_BIND_VALUE_AND_TYPE_MISMATCH:jA,ERR_INVALID_BIND_DATA_TYPE:ZA,ERR_INVALID_BIND_DIRECTION:ed,ERR_NO_TYPE_FOR_CONVERSION:td,ERR_INSUFFICIENT_BUFFER_FOR_BINDS:rd,ERR_BUSY_RS:nd,ERR_INVALID_RS:sd,ERR_NOT_A_QUERY:id,ERR_INVALID_TYPE_FOR_CONVERSION:od,ERR_INVALID_LOB:ad,ERR_BUSY_LOB:_d,ERR_INSUFFICIENT_MEMORY:cd,ERR_INVALID_TYPE_FOR_ARRAY_BIND:ld,ERR_REQUIRED_MAX_ARRAY_SIZE:Td,ERR_INVALID_ARRAY_SIZE:ud,ERR_INCOMPATIBLE_TYPE_ARRAY_BIND:Ed,ERR_CONN_REQUEST_TIMEOUT:hd,ERR_CANNOT_CONVERT_RS_TO_STREAM:Sd,ERR_CANNOT_INVOKE_RS_METHODS:Nd,ERR_RS_ALREADY_CONVERTED:fd,ERR_INVALID_BIND_UNIT:Ad,ERR_CANNOT_LOAD_BINARY:dd,ERR_POOL_WITH_ALIAS_ALREADY_EXISTS:pd,ERR_POOL_WITH_ALIAS_NOT_FOUND:md,ERR_INCOMPATIBLE_TYPE_ARRAY_INDEX_BIND:Pd,ERR_MIXED_BIND:Rd,ERR_MISSING_MAX_SIZE_BY_POS:Id,ERR_MISSING_MAX_SIZE_BY_NAME:Dd,ERR_MAX_SIZE_TOO_SMALL:gd,ERR_MISSING_TYPE_BY_POS:Cd,ERR_MISSING_TYPE_BY_NAME:Od,ERR_INVALID_SUBSCR:yd,ERR_MISSING_SUBSCR_CALLBACK:Ld,ERR_MISSING_SUBSCR_SQL:wd,ERR_POOL_CLOSING:Bd,ERR_POOL_CLOSED:Ud,ERR_INVALID_SODA_DOC_CURSOR:Yd,ERR_NO_BINARY_AVAILABLE:Md,ERR_INVALID_ERR_NUM:_l,ERR_NODE_TOO_OLD:xd,ERR_INVALID_AQ_MESSAGE:Vd,ERR_DBL_CONNECT_STRING:bd,ERR_QUEUE_MAX_EXCEEDED:Fd,ERR_UNSUPPORTED_DATA_TYPE_IN_JSON:vd,ERR_DBL_USER:kd,ERR_CONCURRENT_OPS:qd,ERR_POOL_RECONFIGURING:Gd,ERR_POOL_STATISTICS_DISABLED:Hd,ERR_TOKEN_BASED_AUTH:Kd,ERR_POOL_TOKEN_BASED_AUTH:Wd,ERR_CONN_TOKEN_BASED_AUTH:$d,ERR_TOKEN_HAS_EXPIRED:cl,ERR_NOT_IMPLEMENTED:ll,ERR_INIT_ORACLE_CLIENT_ARGS:zd,ERR_MISSING_FILE:Xd,ERR_INVALID_NUMBER_OF_CONNECTIONS:Qd,ERR_EXEC_MODE_ONLY_FOR_DML:Tl,ERR_CONNECTION_CLOSED:bs,ERR_CONNECTION_LOSTCONTACT:Op,ERR_CONNECTION_INCOMPLETE:yp,ERR_PROXY_CONNECTION_FAILURE:Lp,ERR_TLS_INIT_FAILURE:wp,ERR_TLS_AUTH_FAILURE:Bp,ERR_TLS_DNMATCH_FAILURE:Up,ERR_TLS_HOSTMATCH_FAILURE:Yp,ERR_INVALID_PACKET:Mp,ERR_CONNECTION_TIMEDOUT:xp,ERR_CONNECTION_REFUSED:Vp,ERR_INVALID_CONNECT_STRING_PARAMETERS:bp,ERR_CONNECTION_INBAND:Fp,ERR_INVALID_CONNECT_STRING_SYNTAX:vp,ERR_INVALID_EZCONNECT_SYNTAX:kp,ERR_NO_CONFIG_DIR:qp,ERR_TNS_ENTRY_NOT_FOUND:Gp,ERR_CONNECTION_EOF:$p,ERR_INVALID_BIND_NAME:Jd,ERR_WRONG_NUMBER_OF_POSITIONAL_BINDS:jd,ERR_BUFFER_LENGTH_INSUFFICIENT:Zd,ERR_NCHAR_CS_NOT_SUPPORTED:ep,ERR_MISSING_CREDENTIALS:tp,ERR_UNEXPECTED_END_OF_DATA:rp,ERR_UNEXPECTED_MESSAGE_TYPE:np,ERR_POOL_HAS_BUSY_CONNECTIONS:ul,ERR_INTERNAL:sp,ERR_INVALID_REF_CURSOR:hl,ERR_UNSUPPORTED_VERIFIER_TYPE:Tp,ERR_NAN_VALUE:El,ERR_LOB_CLOSED:Sl,ERR_ORACLE_NUMBER_NO_REPR:Nl,ERR_INVALID_SERVICE_NAME:Hp,ERR_INVALID_SID:Kp,ERR_TNS_NAMES_FILE_MISSING:Wp,ERR_INVALID_TYPE_NUM:ip,ERR_INVALID_ORACLE_TYPE_NUM:op,ERR_UNEXPECTED_NEGATIVE_INTEGER:ap,ERR_INTEGER_TOO_LARGE:_p,ERR_UNEXPECTED_DATA:cp,ERR_OSON_FIELD_NAME_LIMITATION:lp,ERR_OSON_VERSION_NOT_SUPPORTED:dp,ERR_INVALID_PRIVATE_KEY:up,ERR_THIN_CONNECTION_ALREADY_CREATED:Ep,ERR_UNSUPPORTED_CONVERSION:hp,ERR_FETCH_TYPE_HANDLER_RETURN_VALUE:Sp,ERR_FETCH_TYPE_HANDLER_TYPE:Np,ERR_FETCH_TYPE_HANDLER_CONVERTER:fp,ERR_CALL_TIMEOUT_EXCEEDED:fl,ERR_EMPTY_CONNECT_STRING:Ap,ERR_UNKOWN_SERVER_SIDE_PIGGYBACK:pp,ERR_UNKNOWN_COLUMN_TYPE_NAME:mp,ERR_INVALID_OBJECT_TYPE_NAME:Al,ERR_TDS_TYPE_NOT_SUPPORTED:Pp,ERR_INVALID_COLL_INDEX_SET:dl,ERR_INVALID_COLL_INDEX_GET:pl,ERR_DELETE_ELEMENTS_OF_VARRAY:ml,ERR_WRONG_VALUE_FOR_DBOBJECT_ATTR:Rp,ERR_WRONG_VALUE_FOR_DBOBJECT_ELEM:Ip,ERR_WRONG_CRED_FOR_EXTAUTH:Dp,ERR_MISSING_BIND_VALUE:gp,ERR_SERVER_VERSION_NOT_SUPPORTED:Cp,ERR_CONNECTION_CLOSED_CODE:`${zA}-${bs}`,assert:to,assertArgCount:UU,assertParamPropBool:YU,assertParamPropFunction:MU,assertParamPropInt:xU,assertParamPropString:bU,assertParamPropUnsignedInt:VU,assertParamPropValue:Ei,assertParamValue:FU,assertPropValue:vU,getErr:ga,throwErr:Pl,throwNotImplemented:kU,transformErr:qU}});var Dr=Y((rv,Jp)=>{"use strict";var As=ir(),fi=Ee(),GU=require("util"),Xp=new Map,Qp=new Map,jr=new Map,Ol=class Ol{constructor(e,t,n,o){this.num=e,this.name=t,this.columnTypeName=n,this._bufferSizeFactor=o.bufferSizeFactor||0,this._oraTypeNum=o.oraTypeNum||0,this._csfrm=o.csfrm||0,Xp.set(e,this);let a=(o.csfrm||0)*256+o.oraTypeNum;Qp.set(a,this),jr.set(n,this)}[Symbol.toPrimitive](e){switch(e){case"number":return this.num;default:return this.toString()}}[GU.inspect.custom](){return this.toString()}toString(){return`[DbType ${this.name}]`}};_(Ol,"DbType");var Ge=Ol;function HU(s){let e=jr.get(s);return e||fi.throwErr(fi.ERR_UNKNOWN_COLUMN_TYPE_NAME,s),e}_(HU,"getTypeByColumnTypeName");function KU(s){let e=Xp.get(s);return e||fi.throwErr(fi.ERR_INVALID_TYPE_NUM,s),e}_(KU,"getTypeByNum");function WU(s,e){let t=(e||0)*256+s,n=Qp.get(t);return n||fi.throwErr(fi.ERR_INVALID_ORACLE_TYPE_NUM,s,e),n}_(WU,"getTypeByOraTypeNum");var Rl=new Ge(2020,"DB_TYPE_BFILE","BFILE",{oraTypeNum:114,bufferSizeFactor:112}),Ca=new Ge(2008,"DB_TYPE_BINARY_DOUBLE","BINARY_DOUBLE",{oraTypeNum:101,bufferSizeFactor:8}),Oa=new Ge(2007,"DB_TYPE_BINARY_FLOAT","BINARY_FLOAT",{oraTypeNum:100,bufferSizeFactor:4}),ro=new Ge(2009,"DB_TYPE_BINARY_INTEGER","BINARY_INTEGER",{oraTypeNum:3,bufferSizeFactor:22}),ya=new Ge(2019,"DB_TYPE_BLOB","BLOB",{oraTypeNum:113,bufferSizeFactor:112}),La=new Ge(2022,"DB_TYPE_BOOLEAN","BOOLEAN",{oraTypeNum:252,bufferSizeFactor:4}),hi=new Ge(2003,"DB_TYPE_CHAR","CHAR",{oraTypeNum:96,csfrm:As.CSFRM_IMPLICIT,bufferSizeFactor:4}),wa=new Ge(2017,"DB_TYPE_CLOB","CLOB",{oraTypeNum:112,csfrm:As.CSFRM_IMPLICIT,bufferSizeFactor:112}),Il=new Ge(2021,"DB_TYPE_CURSOR","CURSOR",{oraTypeNum:102,bufferSizeFactor:4}),Ba=new Ge(2011,"DB_TYPE_DATE","DATE",{oraTypeNum:12,bufferSizeFactor:7}),Dl=new Ge(2015,"DB_TYPE_INTERVAL_DS","INTERVAL DAY TO SECOND",{oraTypeNum:183,bufferSizeFactor:11}),gl=new Ge(2016,"DB_TYPE_INTERVAL_YM","INTERVAL YEAR TO MONTH",{oraTypeNum:182}),Ua=new Ge(2027,"DB_TYPE_JSON","JSON",{oraTypeNum:119}),kn=new Ge(2024,"DB_TYPE_LONG","LONG",{oraTypeNum:8,csfrm:As.CSFRM_IMPLICIT,bufferSizeFactor:2**31-1}),hs=new Ge(2031,"DB_TYPE_LONG_NVARCHAR","LONG",{oraTypeNum:8,csfrm:As.CSFRM_NCHAR,bufferSizeFactor:2**31-1}),Ss=new Ge(2025,"DB_TYPE_LONG_RAW","LONG RAW",{oraTypeNum:24,bufferSizeFactor:2**31-1}),Ns=new Ge(2004,"DB_TYPE_NCHAR","NCHAR",{oraTypeNum:96,csfrm:As.CSFRM_NCHAR,bufferSizeFactor:4}),Ya=new Ge(2018,"DB_TYPE_NCLOB","NCLOB",{oraTypeNum:112,csfrm:As.CSFRM_NCHAR,bufferSizeFactor:112}),Gn=new Ge(2010,"DB_TYPE_NUMBER","NUMBER",{oraTypeNum:2,bufferSizeFactor:22}),qn=new Ge(2002,"DB_TYPE_NVARCHAR","NVARCHAR2",{oraTypeNum:1,csfrm:As.CSFRM_NCHAR,bufferSizeFactor:4}),Cl=new Ge(2023,"DB_TYPE_OBJECT","OBJECT",{oraTypeNum:109}),Si=new Ge(2006,"DB_TYPE_RAW","RAW",{oraTypeNum:23,bufferSizeFactor:1}),Ni=new Ge(2005,"DB_TYPE_ROWID","ROWID",{oraTypeNum:11,bufferSizeFactor:18}),Ma=new Ge(2012,"DB_TYPE_TIMESTAMP","TIMESTAMP",{oraTypeNum:180,bufferSizeFactor:11}),Pn=new Ge(2014,"DB_TYPE_TIMESTAMP_LTZ","TIMESTAMP WITH LOCAL TIME ZONE",{oraTypeNum:231,bufferSizeFactor:11}),fs=new Ge(2013,"DB_TYPE_TIMESTAMP_TZ","TIMESTAMP WITH TIME ZONE",{oraTypeNum:181,bufferSizeFactor:13}),xa=new Ge(2030,"DB_TYPE_UROWID","UROWID",{oraTypeNum:208}),$e=new Ge(2001,"DB_TYPE_VARCHAR","VARCHAR2",{oraTypeNum:1,csfrm:As.CSFRM_IMPLICIT,bufferSizeFactor:4}),$U=new Map([[Ca,new Map([[$e,$e]])],[Oa,new Map([[$e,$e]])],[ya,new Map([[Si,Ss],[Ss,Ss]])],[hi,new Map([[$e,$e]])],[wa,new Map([[$e,kn],[kn,kn]])],[Ba,new Map([[$e,$e],[Pn,Pn]])],[Ua,new Map([[$e,$e]])],[kn,new Map([[$e,kn]])],[Ss,new Map([[Si,Ss]])],[Ns,new Map([[hi,Ns],[$e,qn],[qn,qn]])],[Ya,new Map([[$e,hs],[qn,hs],[kn,hs],[hs,hs]])],[Gn,new Map([[$e,$e]])],[qn,new Map([[hi,Ns],[Ns,Ns],[$e,qn]])],[Si,new Map([[$e,$e]])],[Ni,new Map([[$e,Ni]])],[Ma,new Map([[$e,$e],[Pn,Pn]])],[Pn,new Map([[$e,$e],[fs,fs]])],[fs,new Map([[$e,$e],[Pn,Pn]])],[xa,new Map([[$e,Ni]])]]),zU=new Map([[Rl,Rl],[Ca,Ca],[Oa,Oa],[ro,ro],[ya,ya],[La,La],[hi,hi],[wa,wa],[Il,Il],[Ba,Ba],[Dl,Dl],[gl,gl],[Ua,Ua],[kn,kn],[hs,hs],[Ss,Ss],[Ns,Ns],[Ya,Ya],[Gn,Gn],[qn,qn],[Cl,Cl],[Si,Si],[Ni,Ni],[Ma,Ma],[Pn,fs],[fs,fs],[xa,xa],[$e,$e]]);jr.set("DOUBLE PRECISION",Gn);jr.set("FLOAT",Gn);jr.set("INTEGER",Gn);jr.set("PL/SQL BOOLEAN",La);jr.set("PL/SQL BINARY INTEGER",ro);jr.set("PL/SQL PLS INTEGER",ro);jr.set("REAL",Gn);jr.set("SMALLINT",Gn);jr.set("TIMESTAMP WITH LOCAL TZ",Pn);jr.set("TIMESTAMP WITH TZ",fs);Jp.exports={DbType:Ge,DB_TYPE_BFILE:Rl,DB_TYPE_BINARY_DOUBLE:Ca,DB_TYPE_BINARY_FLOAT:Oa,DB_TYPE_BINARY_INTEGER:ro,DB_TYPE_BLOB:ya,DB_TYPE_BOOLEAN:La,DB_TYPE_CHAR:hi,DB_TYPE_CLOB:wa,DB_TYPE_CURSOR:Il,DB_TYPE_DATE:Ba,DB_TYPE_INTERVAL_DS:Dl,DB_TYPE_INTERVAL_YM:gl,DB_TYPE_JSON:Ua,DB_TYPE_LONG:kn,DB_TYPE_LONG_NVARCHAR:hs,DB_TYPE_LONG_RAW:Ss,DB_TYPE_NCHAR:Ns,DB_TYPE_NCLOB:Ya,DB_TYPE_NUMBER:Gn,DB_TYPE_NVARCHAR:qn,DB_TYPE_OBJECT:Cl,DB_TYPE_RAW:Si,DB_TYPE_ROWID:Ni,DB_TYPE_TIMESTAMP:Ma,DB_TYPE_TIMESTAMP_LTZ:Pn,DB_TYPE_TIMESTAMP_TZ:fs,DB_TYPE_UROWID:xa,DB_TYPE_VARCHAR:$e,DB_TYPE_CONVERSION_MAP:$U,DB_TYPE_FETCH_TYPE_MAP:zU,getTypeByColumnTypeName:HU,getTypeByNum:KU,getTypeByOraTypeNum:WU}});var jp=Y((sv,XU)=>{XU.exports={name:"oracledb",version:"6.0.3",description:"A Node.js module for Oracle Database access from JavaScript and TypeScript",license:"(Apache-2.0 OR UPL-1.0)",homepage:"http://oracle.github.io/node-oracledb/",keywords:["Oracle","Database","official","DB","SQL","JSON","PL/SQL","SODA","OCI","API","client","library","driver","add-on","extension","binding","interface","adapter","module"],repository:{type:"git",url:"git://github.com/oracle/node-oracledb.git"},scripts:{install:"node package/install.js",prune:"node package/prunebinaries.js"},engines:{node:">=14.6"},maintainers:[{name:"Oracle Corp."}],bugs:{url:"https://github.com/oracle/node-oracledb/issues"},main:"./index.js"}});var Cr=Y((iv,sm)=>{"use strict";var{Buffer:no}=require("buffer"),Lt=Ee(),gr=require("process"),QU=require("util"),JU=Dr(),Zp;try{Zp=jp()}catch{Lt.throwErr(Lt.ERR_MISSING_FILE,"package.json")}var em=Zp.version,jU="build/Release",ZU="oracledb-"+em+"-"+gr.platform+"-"+gr.arch+".node",eY="package/Staging";function tm(){return"Node-oracledb installation instructions: https://node-oracledb.readthedocs.io/en/latest/user_guide/installation.html"}_(tm,"getInstallURL");function tY(){let s,e,t=tm()+`
`;return gr.platform==="linux"?(gr.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html
`,s="64-bit"):gr.arch==="x32"?(e=`https://www.oracle.com/database/technologies/instant-client/linux-x86-32-downloads.html
`,s="32-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,s=gr.arch),t+="You must have Linux "+s+` Oracle Client libraries configured with ldconfig, or in LD_LIBRARY_PATH.
`,t+=`If you do not have Oracle Database on this computer, then install the Instant Client Basic or Basic Light package from 
`,t+=e):gr.platform==="darwin"?(gr.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/macos-intel-x86-downloads.html
`,s="64-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,s=gr.arch),t+="You must have macOS "+s+` Oracle Instant Client Basic or Basic Light package libraries in
`,t+=`/usr/local/lib or set by calling oracledb.initOracleClient({libDir: "/my/instant_client_directory"}).
`,t+="Oracle Instant Client can be downloaded from "+e):gr.platform==="win32"?(gr.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html
`,s="64-bit"):gr.arch==="x32"?(e=`https://www.oracle.com/database/technologies/instant-client/microsoft-windows-32-downloads.html
`,s="32-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,s=gr.arch),t+="You must have Windows "+s+` Oracle Client libraries in your PATH environment variable.
`,t+=`If you do not have Oracle Database on this computer, then install the Instant Client Basic or Basic Light package from
`,t+=e,t+=`A Microsoft Visual Studio Redistributable suitable for your Oracle client library version must be available.
`):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,t+="You must have "+gr.arch+` Oracle Client libraries in your operating system library search path.
`,t+=`If you do not have Oracle Database on this computer, then install an Instant Client Basic or Basic Light package from: 
`,t+=e),t}_(tY,"getInstallHelp");function yl(s){let e=_(function(){if(typeof arguments[arguments.length-1]!="function")return s.apply(this,arguments).catch(_(function o(a){throw Lt.transformErr(a,o)},"stackCapture"));let t=Array.prototype.slice.call(arguments,0,arguments.length-1),n=arguments[arguments.length-1];s.apply(this,t).then(function(o){n(null,o)},_(function o(a){n(Lt.transformErr(a,o))},"stackCapture"))},"wrapper");return s.name&&Object.defineProperty(e,"name",{value:s.name}),e}_(yl,"callbackify");function Ll(s){return async function(){let e;this._impl&&(e=this._impl._getConnImpl(),await e._acquireLock());try{return await s.apply(this,arguments)}finally{e&&e._releaseLock()}}}_(Ll,"serialize");function rm(s,e){return async function(){this._isActive&&Lt.throwErr(e),this._isActive=!0;try{return await s.apply(this,arguments)}finally{this._isActive=!1}}}_(rm,"preventConcurrent");function rY(s){let e=1,t;typeof arguments[1]=="number"&&(e=2,t=arguments[1]);for(let n=e;n<arguments.length;n++){let o=arguments[n],a=s[o];t?s[o]=yl(rm(Ll(a),t)):s[o]=yl(Ll(a))}}_(rY,"wrapFns");function nY(s){if(!Array.isArray(s))return!1;for(let e=0;e<s.length;e++)if(typeof s[e]!="string")return!1;return!0}_(nY,"isArrayOfStrings");function Bl(s){return s!==null&&typeof s=="object"}_(Bl,"isObject");function sY(s){return s!==null&&typeof s=="object"||Array.isArray(s)}_(sY,"isObjectOrArray");function iY(s){if(!Array.isArray(s))return!1;for(let e=0;e<s.length;e++){let t=s[e];if(!(typeof t=="string"||typeof t=="number"||no.isBuffer(t)||QU.isDate(t)))return!1}return!0}_(iY,"isShardingKey");function nm(s){return s!=null&&s._sodaDocumentMarker}_(nm,"isSodaDocument");function oY(s){return Bl(s)&&Number.isInteger(s.formatId)&&(no.isBuffer(s.globalTransactionId)||typeof s.globalTransactionId=="string")&&(no.isBuffer(s.branchQualifier)||typeof s.branchQualifier=="string")}_(oY,"isXid");function aY(s){return nm(s)?s._impl:(Lt.assertParamValue(Bl(s),1),no.from(JSON.stringify(s)))}_(aY,"verifySodaDoc");function wl(s){Lt.assert(typeof s=="string",Lt.ERR_TOKEN_BASED_AUTH),s.split(".")[1]===void 0&&Lt.throwErr(Lt.ERR_TOKEN_BASED_AUTH);let t=s.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=no.from(t,"base64").toString("ascii"),a=JSON.parse(o).exp;return Lt.assert(a!=null,Lt.ERR_TOKEN_BASED_AUTH),a=a*1e3,new Date().getTime()>a}_(wl,"isTokenExpired");function _Y(s){switch(typeof s){case"string":return s===""&&Lt.throwErr(Lt.ERR_TOKEN_BASED_AUTH),!wl(s);case"object":return(s.token===void 0||s.token===""||s.privateKey===void 0||s.privateKey==="")&&Lt.throwErr(Lt.ERR_TOKEN_BASED_AUTH),!wl(s.token);default:Lt.throwErr(Lt.ERR_TOKEN_BASED_AUTH)}}_(_Y,"isTokenValid");function cY(s){return Lt.assert(typeof s.privateKey=="string",Lt.ERR_TOKEN_BASED_AUTH),!(s.privateKey.startsWith("-----BEGIN PRIVATE KEY-----")||s.privateKey.endsWith("-----END PRIVATE KEY-----"))}_(cY,"isPrivateKeyValid");function lY(s,e){let t=e+"Class",n=e+"Name",o=s[t],a=s[e];typeof a=="number"&&(a=s[e]=JU.getTypeByNum(a)),o?s[n]=o.prototype.fqn:a&&(s[n]=a.columnTypeName)}_(lY,"addTypeProperties");sm.exports={BINARY_FILE:ZU,PACKAGE_JSON_VERSION:em,RELEASE_DIR:jU,STAGING_DIR:eY,addTypeProperties:lY,callbackify:yl,getInstallURL:tm,getInstallHelp:tY,isArrayOfStrings:nY,isObject:Bl,isObjectOrArray:sY,isPrivateKeyValid:cY,isShardingKey:iY,isSodaDocument:nm,isTokenExpired:wl,isTokenValid:_Y,isXid:oY,preventConcurrent:rm,serialize:Ll,verifySodaDoc:aY,wrapFns:rY}});var om=Y((av,im)=>{"use strict";var Kt=Ee(),Yl=class Yl{getCondition(){Kt.throwNotImplemented("getting condition (dequeue options)")}getConsumerName(){Kt.throwNotImplemented("getting consumer name (dequeue options)")}getCorrelation(){Kt.throwNotImplemented("getting correlation (dequeue options)")}getMode(){Kt.throwNotImplemented("getting mode (dequeue options)")}getMsgId(){Kt.throwNotImplemented("getting message id (dequeue options)")}getNavigation(){Kt.throwNotImplemented("getting navigation (dequeue options)")}getTransformation(){Kt.throwNotImplemented("getting transformation (dequeue options)")}getVisibility(){Kt.throwNotImplemented("getting visibility (dequeue options)")}getWait(){Kt.throwNotImplemented("getting wait (dequeue options)")}setCondition(){Kt.throwNotImplemented("setting condition (dequeue options)")}setConsumerName(){Kt.throwNotImplemented("setting consumer name (dequeue options)")}setCorrelation(){Kt.throwNotImplemented("setting correlation (dequeue options)")}setMode(){Kt.throwNotImplemented("setting mode (dequeue options)")}setMsgId(){Kt.throwNotImplemented("setting message id (dequeue options)")}setNavigation(){Kt.throwNotImplemented("setting navigation (dequeue options)")}setTransformation(){Kt.throwNotImplemented("setting transformation (dequeue options)")}setVisibility(){Kt.throwNotImplemented("setting visibility (dequeue options)")}setWait(){Kt.throwNotImplemented("setting wait (dequeue options)")}};_(Yl,"AqDeqOptionsImpl");var Ul=Yl;im.exports=Ul});var _m=Y((cv,am)=>{"use strict";var Ai=Ee(),xl=class xl{getDeliveryMode(){Ai.throwNotImplemented("getting delivery mode (enqueue options)")}getTransformation(){Ai.throwNotImplemented("getting transformation (enqueue options)")}getVisibility(){Ai.throwNotImplemented("getting visibility (enqueue options)")}setDeliveryMode(){Ai.throwNotImplemented("setting delivery mode (enqueue options)")}setTransformation(){Ai.throwNotImplemented("setting transformation (enqueue options)")}setVisibility(){Ai.throwNotImplemented("setting visibility (enqueue options)")}};_(xl,"AqEnqOptionsImpl");var Ml=xl;am.exports=Ml});var lm=Y((Tv,cm)=>{"use strict";var Tn=Ee(),bl=class bl{getCorrelation(){Tn.throwNotImplemented("getting correlation (message)")}getDelay(){Tn.throwNotImplemented("getting delay (message)")}getDeliveryMode(){Tn.throwNotImplemented("getting delivery mode (message)")}getExceptionQueue(){Tn.throwNotImplemented("getting exception queue (message)")}getExpiration(){Tn.throwNotImplemented("getting expiration (message)")}getMsgId(){Tn.throwNotImplemented("getting message id (message)")}getNumAttempts(){Tn.throwNotImplemented("getting number of attempts (message)")}getOriginalMsgId(){Tn.throwNotImplemented("getting original message id (message)")}getPayload(){Tn.throwNotImplemented("getting payload (message)")}getPriority(){Tn.throwNotImplemented("getting priority (message)")}getState(){Tn.throwNotImplemented("getting state (message)")}};_(bl,"AqMessageImpl");var Vl=bl;cm.exports=Vl});var um=Y((Ev,Tm)=>{"use strict";var Va=Ee(),vl=class vl{_getConnImpl(){return this._connection}deqMany(){Va.throwNotImplemented("dequeuing multiple items from a queue")}deqOne(){Va.throwNotImplemented("dequeuing a single item from a queue")}enqMany(){Va.throwNotImplemented("enqueuing multiple items from a queue")}enqOne(){Va.throwNotImplemented("enqueuing a single item from a queue")}};_(vl,"AqQueueImpl");var Fl=vl;Tm.exports=Fl});var ba=Y((Sv,Em)=>{"use strict";var xr=Ee(),ql=class ql{constructor(e){this._objType=e}append(){xr.throwNotImplemented("appending element to collection")}copy(){xr.throwNotImplemented("copying an object")}deleteElement(){xr.throwNotImplemented("deleting an element from a collection")}getElement(){xr.throwNotImplemented("getting an element from a collection")}getFirstIndex(){xr.throwNotImplemented("getting the first index in a collection")}getKeys(){xr.throwNotImplemented("returning the keys of a collection")}getLastIndex(){xr.throwNotImplemented("getting the last index in a collection")}getNextIndex(){xr.throwNotImplemented("getting the next index in a collection")}getPrevIndex(){xr.throwNotImplemented("getting the previous index in a collection")}getValues(){xr.throwNotImplemented("getting the values in a collection")}hasElement(){xr.throwNotImplemented("getting if value exists in a collection")}setElement(){xr.throwNotImplemented("setting an element in a collection")}trim(){xr.throwNotImplemented("trimming elements from a collection")}};_(ql,"DbObjectImpl");var kl=ql;Em.exports=kl});var Zr=Y((fv,hm)=>{"use strict";var TY=ir(),Fa=Ee(),Ve=Dr(),Hl=class Hl{constructor(){this.autoCommit=!1,this.connectionClass="",this.dbObjectAsPojo=!1,this.edition="",this.errorOnConcurrentExecute=!1,this.events=!1,this.externalAuth=!1,this.fetchArraySize=100,this.fetchAsBuffer=[],this.fetchAsString=[],this.lobPrefetchSize=16384,this.maxRows=0,this.outFormat=TY.OUT_FORMAT_ARRAY,this.poolIncrement=1,this.poolMax=4,this.poolMaxPerShard=0,this.poolMin=0,this.poolPingInterval=60,this.poolTimeout=60,this.prefetchRows=2,this.queueTimeout=6e4,this.queueMax=500,this.stmtCacheSize=30,this.thin=!0,this.thinDriverInitialized=!1,this.createFetchTypeMap(this.fetchAsString,this.fetchAsBuffer),this.fetchTypeHandler=void 0}_getDateComponents(e,t){return e?[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()*1e3*1e3]:[t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()*1e3*1e3]}_makeDate(e,t,n,o,a,T,u,h,A){return e?new Date(t,n-1,o,a,T,u,h):new Date(Date.UTC(t,n-1,o,a,T,u,h)-A*6e4)}addToOptions(e){for(let t=1;t<arguments.length;t++){let n=arguments[t];e[n]===void 0&&(e[n]=this[n])}}createFetchTypeMap(e,t){let n=new Map(Ve.DB_TYPE_FETCH_TYPE_MAP);for(let o of e)switch(o){case Ve.DB_TYPE_NUMBER:n.set(Ve.DB_TYPE_BINARY_DOUBLE,Ve.DB_TYPE_VARCHAR),n.set(Ve.DB_TYPE_BINARY_FLOAT,Ve.DB_TYPE_VARCHAR),n.set(Ve.DB_TYPE_BINARY_INTEGER,Ve.DB_TYPE_VARCHAR),n.set(Ve.DB_TYPE_NUMBER,Ve.DB_TYPE_VARCHAR);break;case Ve.DB_TYPE_TIMESTAMP:n.set(Ve.DB_TYPE_DATE,Ve.DB_TYPE_VARCHAR),n.set(Ve.DB_TYPE_TIMESTAMP,Ve.DB_TYPE_VARCHAR),n.set(Ve.DB_TYPE_TIMESTAMP_TZ,Ve.DB_TYPE_VARCHAR),n.set(Ve.DB_TYPE_TIMESTAMP_LTZ,Ve.DB_TYPE_VARCHAR);break;case Ve.DB_TYPE_CLOB:case Ve.DB_TYPE_NCLOB:n.set(Ve.DB_TYPE_CLOB,Ve.DB_TYPE_LONG),n.set(Ve.DB_TYPE_NCLOB,Ve.DB_TYPE_LONG_NVARCHAR);break;case Ve.DB_TYPE_RAW:n.set(Ve.DB_TYPE_RAW,Ve.DB_TYPE_VARCHAR);break;case Ve.DB_TYPE_JSON:n.set(Ve.DB_TYPE_JSON,Ve.DB_TYPE_VARCHAR);break;default:Fa.throwErr(Fa.ERR_INVALID_TYPE_FOR_CONVERSION)}for(let o of t)switch(o){case Ve.DB_TYPE_BLOB:n.set(Ve.DB_TYPE_BLOB,Ve.DB_TYPE_LONG_RAW);break;default:Fa.throwErr(Fa.ERR_INVALID_TYPE_FOR_CONVERSION)}this.fetchTypeMap=n}};_(Hl,"Settings");var Gl=Hl;hm.exports=new Gl});var va=Y((dv,Sm)=>{"use strict";var uY=Zr(),Pe=Ee(),EY=require("util"),Wl=class Wl{constructor(){this._inProgress=!1,this._dbObjectTypes=new Map,this._requestQueue=[]}async _acquireLock(){this._inProgress&&(uY.errorOnConcurrentExecute&&Pe.throwErr(Pe.ERR_CONCURRENT_OPS),await new Promise((e,t)=>{let n={resolve:e,reject:t};this._requestQueue.push(n)})),this._inProgress=!0}_getConnImpl(){return this}_getDbObjectType(e,t,n,o){let a;if(o&&(a=this._dbObjectTypes.get(o),a))return a;let T=n?`${e}.${n}.${t}`:`${e}.${t}`;return a=this._dbObjectTypes.get(T),a||(a={oid:o,fqn:T,schema:e,name:t,packageName:n,partial:!0,isXmlType:e==="SYS"&&t==="XMLTYPE"},this._dbObjectTypes.set(T,a)),o&&!a.oid&&(a.oid=o,this._dbObjectTypes.set(o,a)),a}_isDate(e){return EY.isDate(e)}_releaseLock(){this._requestQueue.length>0?this._requestQueue.shift().resolve():this._inProgress=!1}breakExecution(){Pe.throwNotImplemented("getting Oracle Server version number")}changePassword(){Pe.throwNotImplemented("changing the password")}close(){Pe.throwNotImplemented("closing the connection")}commit(){Pe.throwNotImplemented("committing the transaction")}createLob(){Pe.throwNotImplemented("creating a temporary LOB")}execute(){Pe.throwNotImplemented("executing a SQL statement")}executeMany(){Pe.throwNotImplemented("executing a SQL statement multiple times")}getCallTimeout(){Pe.throwNotImplemented("getting call timeout")}getCurrentSchema(){Pe.throwNotImplemented("getting current schema")}getDbObjectClass(){Pe.throwNotImplemented("getting a database object class")}getExternalName(){Pe.throwNotImplemented("getting the external name")}getInternalName(){Pe.throwNotImplemented("getting the internal name")}getOracleServerVersion(){Pe.throwNotImplemented("getting Oracle Server version number")}getOracleServerVersionString(){Pe.throwNotImplemented("getting Oracle Server version as a string")}getQueue(){Pe.throwNotImplemented("getting a queue")}getSodaDatabase(){Pe.throwNotImplemented("getting a SODA database")}getStatementInfo(){Pe.throwNotImplemented("getting information about a statement")}getStmtCacheSize(){Pe.throwNotImplemented("getting the statement cache size")}getTag(){Pe.throwNotImplemented("getting the tag for the connection")}isHealthy(){Pe.throwNotImplemented("getting the health of the connection")}ping(){Pe.throwNotImplemented("sending a ping to the database")}rollback(){Pe.throwNotImplemented("rolling back a transaction")}setAction(){Pe.throwNotImplemented("setting end-to-end attribute 'action'")}setCallTimeout(){Pe.throwNotImplemented("setting call timeout")}setClientId(){Pe.throwNotImplemented("setting end-to-end attribute 'clientId'")}setClientInfo(){Pe.throwNotImplemented("setting end-to-end attribute 'clientInfo'")}setCurrentSchema(){Pe.throwNotImplemented("setting the current schema")}setDbOp(){Pe.throwNotImplemented("setting end-to-end attribute 'dbOp'")}setECID(){Pe.throwNotImplemented("setting end-to-end attribute 'ecid'")}setExternalName(){Pe.throwNotImplemented("setting the external name")}setInternalName(){Pe.throwNotImplemented("setting the internal name")}setStmtCacheSize(){Pe.throwNotImplemented("setting the size of the statement cache")}setModule(){Pe.throwNotImplemented("setting end-to-end attribute 'module'")}setTag(){Pe.throwNotImplemented("setting the tag for the connection")}shutdown(){Pe.throwNotImplemented("shutting down the database instance")}startup(){Pe.throwNotImplemented("starting up the database instance")}subscribe(){Pe.throwNotImplemented("subscribing to events in the database")}tpcBegin(){Pe.throwNotImplemented("starting a two-phase transaction")}tpcCommit(){Pe.throwNotImplemented("committing a two-phase transaction")}tpcEnd(){Pe.throwNotImplemented("ending a two-phase transaction")}tpcForget(){Pe.throwNotImplemented("forgetting a two-phase transaction")}tpcPrepare(){Pe.throwNotImplemented("preparing a two-phase transaction")}tpcRollback(){Pe.throwNotImplemented("rolling back a two-phase transaction")}unsubscribe(){Pe.throwNotImplemented("unsubscribing from events")}};_(Wl,"ConnectionImpl");var Kl=Wl;Sm.exports=Kl});var Xl=Y((mv,Nm)=>{"use strict";var hY=va(),ka=Ee(),zl=class zl{_getConnImpl(){let e=this._parentObj;for(;!(e instanceof hY);)e=e._parentObj;return e}close(){ka.throwNotImplemented("closing a LOB")}getData(){ka.throwNotImplemented("getting all of the data from a LOB")}read(){ka.throwNotImplemented("reading from a LOB")}write(){ka.throwNotImplemented("writing to a LOB")}};_(zl,"LobImpl");var $l=zl;Nm.exports=$l});var jl=Y((Rv,fm)=>{"use strict";var Xt=Ee(),SY=Cr(),Jl=class Jl{async _accessTokenHandler(e,t,n){let o;try{let a=e(n);a instanceof Promise&&(a=await a),SY.isTokenValid(a)||Xt.throwErr(Xt.ERR_TOKEN_HAS_EXPIRED),o=a}finally{this.returnAccessToken(t,o)}}close(){Xt.throwNotImplemented("closing the pool")}create(){Xt.throwNotImplemented("creating the pool")}getConnection(){Xt.throwNotImplemented("getting a connection from the pool")}getConnectionsInUse(){Xt.throwNotImplemented("getting num connection in use")}getConnectionsOpen(){Xt.throwNotImplemented("getting num connection open")}getPoolIncrement(){Xt.throwNotImplemented("getting the pool increment")}getPoolMax(){Xt.throwNotImplemented("getting the pool max")}getPoolMaxPerShard(){Xt.throwNotImplemented("getting the pool max per shard")}getPoolMin(){Xt.throwNotImplemented("getting the pool min")}getPoolPingInterval(){Xt.throwNotImplemented("getting the pool ping interval")}getPoolTimeout(){Xt.throwNotImplemented("getting the pool timeout")}getStmtCacheSize(){Xt.throwNotImplemented("getting the pool statement cache size")}getSodaMetaDataCache(){Xt.throwNotImplemented("getting the SODA metadata cache flag")}reconfigure(){Xt.throwNotImplemented("reconfiguring the pool")}setAccessToken(){Xt.throwNotImplemented("sets the access token")}};_(Jl,"PoolImpl");var Ql=Jl;fm.exports=Ql});var tT=Y((Dv,dm)=>{"use strict";var NY=ir(),Rn=Ee(),fY=Cr(),Am=Zr(),Qt=Dr(),eT=class eT{_determineFetchType(e,t){if(delete e.fetchType,delete e.converter,t.fetchTypeHandler){let n=t.fetchTypeHandler(e);n!==void 0&&(Rn.assert(typeof n=="object",Rn.ERR_FETCH_TYPE_HANDLER_RETURN_VALUE),n.type!==void 0&&Rn.assert(n.type instanceof Qt.DbType,Rn.ERR_FETCH_TYPE_HANDLER_TYPE),n.converter!==void 0&&Rn.assert(typeof n.converter=="function",Rn.ERR_FETCH_TYPE_HANDLER_CONVERTER),e.fetchType=n.type,e.converter=n.converter)}if(e.fetchType||(t.fetchTypeMap&&t.fetchTypeMap.has(e.name)?(e.fetchType=t.fetchTypeMap.get(e.name),e.fetchType===NY.DEFAULT&&(e.fetchType=Qt.DB_TYPE_FETCH_TYPE_MAP.get(e.dbType))):e.fetchType=Am.fetchTypeMap.get(e.dbType)),e.fetchType!==e.dbType){let n=Qt.DB_TYPE_CONVERSION_MAP.get(e.dbType),o=n&&n.get(e.fetchType);o||Rn.throwErr(Rn.ERR_UNSUPPORTED_CONVERSION,e.dbType.name,e.fetchType.name),e.fetchType=o}if(Am.thin){let n,o=e.converter;if(e.dbType===Qt.DB_TYPE_NUMBER&&e.fetchType===Qt.DB_TYPE_NUMBER?n=_(a=>a===null?null:parseFloat(a),"converter"):e.fetchType===Qt.DB_TYPE_VARCHAR&&(e.dbType===Qt.DB_TYPE_BINARY_DOUBLE||e.dbType===Qt.DB_TYPE_BINARY_FLOAT||e.dbType===Qt.DB_TYPE_DATE||e.dbType===Qt.DB_TYPE_TIMESTAMP||e.dbType===Qt.DB_TYPE_TIMESTAMP_LTZ||e.dbType===Qt.DB_TYPE_TIMESTAMP_TZ)&&(n=_(a=>a===null?null:a.toString(),"converter")),o&&n){let a=n;n=_(T=>o(a(T)),"converter")}n&&(e.converter=n)}}_getConnImpl(){return this._parentObj}_setup(e,t){this._parentObj=e.connection._impl,this.metaData=t,this.lobIndices=[],this.dbObjectIndices=[],this.nestedCursorIndices=[],this.converterIndices=[],this.outFormat=e.outFormat,this.fetchArraySize=e.fetchArraySize,this.dbObjectAsPojo=e.dbObjectAsPojo,this.maxRows=e.maxRows;let n=new Map;for(let o=0;o<t.length;o++){let a=t[o].name;n.has(a)||n.set(a,o)}for(let o=0;o<t.length;o++){let a=t[o];if(a.dbTypeClass){let u=e.connection._getDbObjectClass(a.dbTypeClass);a.dbTypeClass=u}fY.addTypeProperties(a,"dbType"),this._determineFetchType(a,e),a.fetchType===Qt.DB_TYPE_CURSOR?this.nestedCursorIndices.push(o):a.fetchType===Qt.DB_TYPE_CLOB||a.fetchType===Qt.DB_TYPE_NCLOB||a.fetchType===Qt.DB_TYPE_BLOB?this.lobIndices.push(o):a.fetchType===Qt.DB_TYPE_OBJECT&&this.dbObjectIndices.push(o),a.converter&&this.converterIndices.push(o);let T=a.name;if(n.get(T)!==o){let u=0;for(;n.has(T);)u=u+1,T=`${a.name}_${u}`;n.set(T,o),a.name=T}}}close(){Rn.throwNotImplemented("closing a result set")}getRows(){Rn.throwNotImplemented("getting rows")}};_(eT,"ResultSetImpl");var Zl=eT;dm.exports=Zl});var mm=Y((Cv,pm)=>{"use strict";var Or=Ee(),nT=class nT{_getConnImpl(){return this._database._connection}createIndex(){Or.throwNotImplemented("creating an index on a SODA collection")}drop(){Or.throwNotImplemented("dropping a SODA collection")}dropIndex(){Or.throwNotImplemented("dropping an index on a SODA collection")}find(){Or.throwNotImplemented("creating a SODA operation")}getDataGuide(){Or.throwNotImplemented("getting the data guide for the collection")}getMetaData(){Or.throwNotImplemented("getting the metadata for the collection")}getName(){Or.throwNotImplemented("getting the name of the collection")}insertMany(){Or.throwNotImplemented("inserting multiple docs into a collection")}insertManyAndGet(){Or.throwNotImplemented("insert/return many docs in a collection")}insertOne(){Or.throwNotImplemented("inserting a single doc into a collection")}insertOneAndGet(){Or.throwNotImplemented("insert/return a single doc in a collection")}save(){Or.throwNotImplemented("saving a single doc in a collection")}saveAndGet(){Or.throwNotImplemented("saving a single doc in a collection")}truncate(){Or.throwNotImplemented("removing all docs from a collection")}};_(nT,"SodaCollectionImpl");var rT=nT;pm.exports=rT});var Rm=Y((yv,Pm)=>{"use strict";var qa=Ee(),iT=class iT{_getConnImpl(){return this._connection}createCollection(){qa.throwNotImplemented("creating a SODA collection")}createDocument(){qa.throwNotImplemented("creating a SODA document")}getCollectionNames(){qa.throwNotImplemented("getting a list of SODA collection names")}openCollection(){qa.throwNotImplemented("getting a list of SODA collection names")}};_(iT,"SodaDatabaseImpl");var sT=iT;Pm.exports=sT});var gm=Y((wv,Dm)=>{"use strict";var Im=Ee(),aT=class aT{_getConnImpl(){return this._operation._getConnImpl()}close(){Im.throwNotImplemented("closing a SODA document cursor")}getNext(){Im.throwNotImplemented("getting a document from a SODA doc cursor")}};_(aT,"SodaDocCursorImpl");var oT=aT;Dm.exports=oT});var Om=Y((Uv,Cm)=>{"use strict";var Fs=Ee(),cT=class cT{getContentAsBuffer(){Fs.throwNotImplemented("getting doc content as a buffer")}getContentAsString(){Fs.throwNotImplemented("getting doc content as a string")}getCreatedOn(){Fs.throwNotImplemented("getting the created date of a document")}getKey(){Fs.throwNotImplemented("getting the key of a document")}getLastModified(){Fs.throwNotImplemented("getting the last modified date of a doc")}getMediaType(){Fs.throwNotImplemented("getting the media type of a document")}getVersion(){Fs.throwNotImplemented("getting the version of a document")}};_(cT,"SodaDocumentImpl");var _T=cT;Cm.exports=_T});var Lm=Y((Mv,ym)=>{"use strict";var vs=Ee(),TT=class TT{_getConnImpl(){return this._collection._database._connection}count(){vs.throwNotImplemented("getting a count of documents")}getCursor(){vs.throwNotImplemented("getting a cursor for documents")}getDocuments(){vs.throwNotImplemented("getting a cursor for documents")}getOne(){vs.throwNotImplemented("getting a single document")}remove(){vs.throwNotImplemented("removing documents from a collection")}replaceOne(){vs.throwNotImplemented("replacing a single document")}replaceOneAndGet(){vs.throwNotImplemented("replacing/returning a single document")}};_(TT,"SodaOperationImpl");var lT=TT;ym.exports=lT});var di=Y((Vv,wm)=>{"use strict";var AY=om(),dY=_m(),pY=lm(),mY=um(),PY=ba(),RY=va(),IY=Xl(),DY=jl(),gY=tT(),CY=mm(),OY=Rm(),yY=gm(),LY=Om(),wY=Lm();wm.exports={AqDeqOptionsImpl:AY,AqEnqOptionsImpl:dY,AqMessageImpl:pY,AqQueueImpl:mY,DbObjectImpl:PY,ConnectionImpl:RY,LobImpl:IY,PoolImpl:DY,ResultSetImpl:gY,SodaCollectionImpl:CY,SodaDatabaseImpl:OY,SodaDocCursorImpl:yY,SodaDocumentImpl:LY,SodaOperationImpl:wY}});var hT=Y((bv,Bm)=>{"use strict";var{Buffer:BY}=require("buffer"),Hn=ir(),Kn=Ee(),ET=class ET{get condition(){return this._impl.getCondition()}set condition(e){Kn.assertPropValue(typeof e=="string","condition"),this._impl.setCondition(e)}get consumerName(){return this._impl.getConsumerName()}set consumerName(e){Kn.assertPropValue(typeof e=="string","consumerName"),this._impl.setConsumerName(e)}get correlation(){return this._impl.getCorrelation()}set correlation(e){Kn.assertPropValue(typeof e=="string","correlation"),this._impl.setCorrelation(e)}get mode(){return this._impl.getMode()}set mode(e){Kn.assertPropValue(e===Hn.AQ_DEQ_MODE_BROWSE||e===Hn.AQ_DEQ_MODE_LOCKED||e===Hn.AQ_DEQ_MODE_REMOVE||e===Hn.AQ_DEQ_MODE_REMOVE_NO_DATA,"mode"),this._impl.setMode(e)}get msgId(){return this._impl.getMsgId()}set msgId(e){Kn.assertPropValue(BY.isBuffer(e),"msgId"),this._impl.setMsgId(e)}get navigation(){return this._impl.getNavigation()}set navigation(e){Kn.assertPropValue(e===Hn.AQ_DEQ_NAV_FIRST_MSG||e===Hn.AQ_DEQ_NAV_NEXT_TRANSACTION||e===Hn.AQ_DEQ_NAV_NEXT_MSG,"navigation"),this._impl.setNavigation(e)}get transformation(){return this._impl.getTransformation()}set transformation(e){Kn.assertPropValue(typeof e=="string","transformation"),this._impl.setTransformation(e)}get visibility(){return this._impl.getVisibility()}set visibility(e){Kn.assertPropValue(e===Hn.AQ_VISIBILITY_IMMEDIATE||e===Hn.AQ_VISIBILITY_ON_COMMIT,"visibility"),this._impl.setVisibility(e)}get wait(){return this._impl.getWait()}set wait(e){Kn.assertPropValue(Number.isInteger(e)&&e>=0,"wait"),this._impl.setWait(e)}};_(ET,"AqDeqOptions");var uT=ET;Bm.exports=uT});var AT=Y((vv,Um)=>{"use strict";var so=ir(),ST=Ee(),fT=class fT{get deliveryMode(){return this._impl.getDeliveryMode()}set deliveryMode(e){ST.assertPropValue(e===so.AQ_MSG_DELIV_MODE_PERSISTENT||e===so.AQ_MSG_DELIV_MODE_BUFFERED||e===so.AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED,"deliveryMode"),this._impl.setDeliveryMode(e)}get transformation(){return this._impl.getTransformation()}set transformation(e){ST.assertPropValue(typeof e=="string","transformation"),this._impl.setTransformation(e)}get visibility(){return this._impl.getVisibility()}set visibility(e){ST.assertPropValue(e===so.AQ_VISIBILITY_IMMEDIATE||e===so.AQ_VISIBILITY_ON_COMMIT,"visibility"),this._impl.setVisibility(e)}};_(fT,"AqEnqOptions");var NT=fT;Um.exports=NT});var mT=Y((qv,Ym)=>{"use strict";var UY=ba(),pT=class pT{get correlation(){return this._impl.getCorrelation()}get delay(){return this._impl.getDelay()}get deliveryMode(){return this._impl.getDeliveryMode()}get exceptionQueue(){return this._impl.getExceptionQueue()}get expiration(){return this._impl.getExpiration()}get msgId(){return this._impl.getMsgId()}get numAttempts(){return this._impl.getNumAttempts()}get originalMsgId(){return this._impl.getOriginalMsgId()}get payload(){let e=this._impl.getPayload();if(e instanceof UY){let t=Object.create(this._payloadTypeClass.prototype);return t._impl=e,t}return e}get priority(){return this._impl.getPriority()}get state(){return this._impl.getState()}};_(pT,"AqMessage");var dT=pT;Ym.exports=dT});var pi=Y((Hv,xm)=>{"use strict";var{Buffer:PT}=require("buffer"),{Duplex:YY}=require("stream"),Mm=ir(),yr=Ee(),RT=Cr(),MY=Dr(),IT=class IT extends YY{constructor(){super({decodeStrings:!1}),this.offset=1,this._isActive=!1,this.once("finish",function(){this._autoCloseLob&&this.destroy()})}async _destroy(e,t){if(e&&e.message.startsWith("NJS-108:")&&delete this._impl,this._impl){let n=this._impl;delete this._impl;try{await n.close()}catch(o){t(o);return}}t(e)}async _read(){try{let e=await this._serializedRead(this.offset);e?(this.offset+=e.length,this.push(e)):(this.push(null),this._autoCloseLob&&this.destroy())}catch(e){throw this._autoCloseLob&&this.destroy(e),e}}async _readData(e){yr.assert(this._impl,yr.ERR_INVALID_LOB);try{return await this._impl.read(e)}catch(t){throw yr.transformErr(t,this._readData)}}_setup(e,t){this._impl=e,this._chunkSize=e.getChunkSize(),this._pieceSize=e.getPieceSize(),this._length=e.getLength(),this._type=e.getType(),typeof this._type=="number"&&(this._type=MY.getTypeByNum(this._type)),this._autoCloseLob=t}async _write(e,t,n){this.type==Mm.DB_TYPE_BLOB&&!PT.isBuffer(e)?e=PT.from(e):this.type==Mm.DB_TYPE_CLOB&&PT.isBuffer(e)&&(e=e.toString());try{await this._serializedWrite(this.offset,e)}catch(o){this._autoCloseLob&&this.destroy(o),n(o);return}this.offset+=e.length,n(null)}async _writeData(e,t){yr.assert(this._impl,yr.ERR_INVALID_LOB);try{await this._impl.write(e,t)}catch(n){throw yr.transformErr(n,this._writeData)}}get chunkSize(){return this._chunkSize}async close(){if(yr.assertArgCount(arguments,0,0),this._impl){let e=this._impl;delete this._impl;try{await e.close(),this.emit("close")}catch(t){this.destroy(t)}}}async getData(){return yr.assertArgCount(arguments,0,0),yr.assert(this._impl,yr.ERR_INVALID_LOB),await this._impl.getData()}get length(){return this._length}get pieceSize(){return this._pieceSize}set pieceSize(e){yr.assertPropValue(Number.isInteger(e)&&e>=0,"pieceSize"),yr.assert(this._impl,yr.ERR_INVALID_LOB),this._impl.setPieceSize(e),this._pieceSize=e}get type(){return this._type}};_(IT,"Lob");var ds=IT;RT.wrapFns(ds.prototype,yr.ERR_BUSY_LOB,"close","getData");ds.prototype._serializedRead=RT.serialize(ds.prototype._readData);ds.prototype._serializedWrite=RT.serialize(ds.prototype._writeData);xm.exports=ds});var CT=Y((Wv,Vm)=>{"use strict";var xY=require("process"),{Readable:VY}=require("stream"),gT=class gT extends VY{constructor(e){super({objectMode:!0}),this._fetching=!1,this._numRows=0,e&&xY.nextTick(()=>{this._open(e)})}async _destroy(e,t){if(this._resultSet){let n=this._resultSet;this._resultSet=null,this._fetching&&await new Promise(o=>this.once("_doneFetching",o));try{await n._impl.close()}catch(o){t(o);return}}t(e)}_open(e){this._resultSet=e,this.emit("open"),this.emit("metadata",e.metaData)}async _read(){if(!this._resultSet){this.once("open",this._read);return}try{this._fetching=!0,this._resultSet._allowGetRowCall=!0;let e=await this._resultSet.getRow();e?this.push(e):this.push(null)}catch(e){this.destroy(e)}finally{this._fetching=!1,this._resultSet?this._resultSet._allowGetRowCall=!1:this.emit("_doneFetching")}}};_(gT,"QueryStream");var DT=gT;Vm.exports=DT});var Ka=Y((zv,bm)=>{"use strict";var bY=CT(),FY=mi(),vY=Cr(),kY=ir(),qY=pi(),mt=Ee(),Ha=class Ha{constructor(){this._rowCache=[],this._processingStarted=!1,this._convertedToStream=!1,this._allowGetRowCall=!1,this._isActive=!1}async _getAllRows(){try{let e=this._impl.maxRows,t=this._impl.fetchArraySize,n=[];for(;;){e>0&&t>=e&&(t=e);let o=await this._getRows(t);if(o&&(await this._processRows(o,!0),n=n.concat(o)),o.length==e||o.length<t)break;e>0&&(e-=o.length)}return n}finally{await this._impl.close(),delete this._impl}}async _getRows(e){let t={};return this._impl.nestedCursorIndices.length>0&&(t={connection:this._connection,outFormat:this._impl.outFormat,fetchArraySize:this._impl.fetchArraySize,dbObjectAsPojo:this._impl.dbObjectAsPojo,maxRows:this._impl.maxRows,fetchTypeMap:this._impl.fetchTypeMap}),await this._impl.getRows(e,t)}async _processRows(e,t){for(let n of this._impl.nestedCursorIndices)for(let o=0;o<e.length;o++){let a=e[o][n];if(a){let T=new Ha;T._setup(this._connection,a),this._impl.metaData[n].metaData=a.metaData,t?e[o][n]=await T._getAllRows():e[o][n]=T}}for(let n of this._impl.lobIndices)for(let o=0;o<e.length;o++){let a=e[o][n];a&&(e[o][n]=new qY)._setup(a,!0)}for(let n of this._impl.dbObjectIndices){let o=this._impl.metaData[n].dbTypeClass;for(let a=0;a<e.length;a++){let T=e[a][n];if(T){let u=e[a][n]=Object.create(o.prototype);u._impl=T,this._impl.dbObjectAsPojo?e[a][n]=u._toPojo():u.isCollection&&(e[a][n]=new Proxy(u,FY._collectionProxyHandler))}}}for(let n of this._impl.converterIndices){let o=this._impl.metaData[n].converter;this._connection._impl._inProgress=!1;try{for(let a=0;a<e.length;a++){let T=o(e[a][n]);T instanceof Promise&&(T=await T),e[a][n]=T}}finally{this._connection._impl._inProgress=!0}}if(this._impl.outFormat===kY.OUT_FORMAT_OBJECT)for(let n=0;n<e.length;n++){let o=e[n],a=e[n]={},T=this._impl.metaData;for(let u=0;u<T.length;u++)a[T[u].name]=o[u]}}_setup(e,t){this._connection=e,this._impl=t}async close(){mt.assertArgCount(arguments,0,0),mt.assert(this._impl&&this._connection._impl,mt.ERR_INVALID_RS),this._convertedToStream&&mt.throwErr(mt.ERR_CANNOT_INVOKE_RS_METHODS),this._processingStarted=!0;let e=this._impl;delete this._impl,await e.close()}async getRow(){if(mt.assertArgCount(arguments,0,0),mt.assert(this._impl&&this._connection._impl,mt.ERR_INVALID_RS),this._convertedToStream&&!this._allowGetRowCall&&mt.throwErr(mt.ERR_CANNOT_INVOKE_RS_METHODS),this._allowGetRowCall=!1,this._processingStarted=!0,this._rowCache.length==0){let e=await this._getRows(this._impl.fetchArraySize);await this._processRows(e,!1),this._rowCache=e}return this._rowCache.shift()}async getRows(e){let t;mt.assertArgCount(arguments,0,1),mt.assert(this._impl&&this._connection._impl,mt.ERR_INVALID_RS),arguments.length==0?e=0:mt.assertParamValue(Number.isInteger(e)&&e>=0,1),this._convertedToStream&&mt.throwErr(mt.ERR_CANNOT_INVOKE_RS_METHODS),this._processingStarted=!0;let n;if(e==0){n=this._rowCache;let o=this._impl.fetchArraySize;for(;;){let a=await this._getRows(o);if(a&&(await this._processRows(a,!1),n=n.concat(a)),a.length<o)break}return n}if(this._rowCache.length===0)n=await this._getRows(e),await this._processRows(n,!1);else if(t=e-this._rowCache.length,t<=0)n=this._rowCache.splice(0,e);else{let o=await this._getRows(t);await this._processRows(o,!1),n=this._rowCache.concat(o),this._rowCache=[]}return n}get metaData(){if(this._impl)return this._impl.metaData}toQueryStream(){return mt.assertArgCount(arguments,0,0),this._processingStarted&&mt.throwErr(mt.ERR_CANNOT_CONVERT_RS_TO_STREAM),this._convertedToStream&&mt.throwErr(mt.ERR_RS_ALREADY_CONVERTED),this._convertedToStream=!0,new bY(this)}[Symbol.asyncIterator](){let e=this;return{async next(){let t=await e.getRow();return{value:t,done:t===void 0}},return(){return{done:!0}}}}};_(Ha,"ResultSet");var Ga=Ha;vY.wrapFns(Ga.prototype,mt.ERR_BUSY_RS,"close","getRow","getRows");bm.exports=Ga});var wT=Y((Qv,km)=>{"use strict";var OT=mi(),{Buffer:yT}=require("buffer"),GY=pi(),HY=Ka(),KY=ir(),Pt=Ee(),Fm=require("util"),ct=Dr();function Wn(s,e){if(s.type===void 0&&arguments.length>2)s.type=arguments[2];else{let t=!1;for(let n=2;n<arguments.length;n++)if(s.type===arguments[n]){t=!0;break}t||(s.attrName?Pt.throwErr(Pt.ERR_WRONG_VALUE_FOR_DBOBJECT_ATTR,s.attrName,s.fqn):s.fqn?Pt.throwErr(Pt.ERR_WRONG_VALUE_FOR_DBOBJECT_ELEM,s.fqn):s.isArray&&s.name?Pt.throwErr(Pt.ERR_INCOMPATIBLE_TYPE_ARRAY_BIND,e.pos,s.name):s.isArray?Pt.throwErr(Pt.ERR_INCOMPATIBLE_TYPE_ARRAY_INDEX_BIND,e.pos,s.pos):Pt.throwErr(Pt.ERR_BIND_VALUE_AND_TYPE_MISMATCH))}}_(Wn,"checkType");function LT(s){if(s==null||typeof s=="number"||typeof s=="string"||typeof s=="boolean"||yT.isBuffer(s)||Fm.isDate(s))return s;if(Array.isArray(s)){let t=new Array(s.length);for(let n=0;n<s.length;n++)t[n]=LT(s[n]);return t}if(s instanceof OT)return{fields:[],values:[]};let e={};e.fields=Object.getOwnPropertyNames(s),e.values=new Array(e.fields.length);for(let t=0;t<e.fields.length;t++)e.values[t]=LT(s[e.fields[t]]);return e}_(LT,"transformJsonValue");function vm(s,e,t){if(e!=null){if(s.type===ct.DB_TYPE_OBJECT){let n=e;return e instanceof OT||(n=new s.typeClass(e)),n._impl}else{if(s.type===ct.DB_TYPE_JSON)return LT(e);if(typeof e=="string"){if(Wn(s,t,ct.DB_TYPE_VARCHAR,ct.DB_TYPE_NVARCHAR,ct.DB_TYPE_CHAR,ct.DB_TYPE_NCHAR,ct.DB_TYPE_CLOB,ct.DB_TYPE_NCLOB),s.type!==ct.DB_TYPE_CLOB&&s.type!==ct.DB_TYPE_NCLOB){let n=yT.byteLength(e);(s.maxSize===void 0||n>s.maxSize)&&(s.checkSize&&Pt.throwErr(Pt.ERR_MAX_SIZE_TOO_SMALL,s.maxSize,n,t.pos),s.maxSize=n)}return e}else{if(typeof e=="number")return Wn(s,t,ct.DB_TYPE_NUMBER,ct.DB_TYPE_BINARY_INTEGER,ct.DB_TYPE_BINARY_FLOAT,ct.DB_TYPE_BINARY_DOUBLE),Number.isNaN(e)&&s.type===ct.DB_TYPE_NUMBER&&Pt.throwErr(Pt.ERR_NAN_VALUE),e;if(typeof e=="boolean")return Wn(s,t,ct.DB_TYPE_BOOLEAN),e;if(Fm.isDate(e))return Wn(s,t,ct.DB_TYPE_TIMESTAMP,ct.DB_TYPE_TIMESTAMP_TZ,ct.DB_TYPE_TIMESTAMP_LTZ,ct.DB_TYPE_DATE),e;if(yT.isBuffer(e))return Wn(s,t,ct.DB_TYPE_RAW,ct.DB_TYPE_BLOB),s.type===ct.DB_TYPE_RAW&&(s.maxSize===void 0||e.length>s.maxSize)&&(s.checkSize&&Pt.throwErr(Pt.ERR_MAX_SIZE_TOO_SMALL,s.maxSize,e.length,t.pos),s.maxSize=e.length),e;if(e instanceof HY)return Wn(s,t,ct.DB_TYPE_CURSOR),e._impl;if(e instanceof GY)return Wn(s,t,e.type),e._impl;if(e instanceof OT)return Wn(s,t,ct.DB_TYPE_OBJECT),e._impl;if(t.allowArray&&Array.isArray(e)){s.isArray=!0,s.dir===KY.BIND_IN?s.maxArraySize=e.length||1:s.maxArraySize===void 0?Pt.throwErr(Pt.ERR_REQUIRED_MAX_ARRAY_SIZE):e.length>s.maxArraySize&&Pt.throwErr(Pt.ERR_INVALID_ARRAY_SIZE),t.allowArray=!1;let n=new Array(e.length);for(let o=0;o<e.length;o++)t.pos=o,n[o]=vm(s,e[o],t);return n}}}s.type===void 0&&Pt.throwErr(Pt.ERR_INVALID_BIND_DATA_TYPE,2),Wn(s,t)}}_(vm,"transformValueIn");km.exports={transformValueIn:vm}});var mi=Y((jv,Gm)=>{"use strict";var WY=pi(),qm=di(),Ot=Ee(),$Y=Dr(),BT=require("util"),io=class io{_getAttrValue(e){let t=this._impl.getAttrValue(e);return this._transformValueOut(t,e.typeClass)}_setAttrValue(e,t){let n={fqn:this._objType.fqn,attrName:e.name,type:e.type,typeClass:e.typeClass},o={allowArray:!1};t=UT.transformValueIn(n,t,o),this._impl.setAttrValue(e,t)}_toPojo(){if(this.isCollection){let t=this.getValues();if(this.elementType===$Y.DB_TYPE_OBJECT)for(let n=0;n<t.length;n++)t[n]=t[n]._toPojo();return t}let e={};for(let t in this.attributes){let n=this[t];n instanceof io&&(n=n._toPojo()),e[t]=n}return e}_transformValueOut(e,t){let n=e;return e instanceof qm.LobImpl?(n=new WY,n._setup(e,!0)):e instanceof qm.DbObjectImpl&&(n=Object.create(t.prototype),n._impl=e,n.isCollection&&(n=new Proxy(n,io._collectionProxyHandler))),n}append(e){Ot.assertArgCount(arguments,1,1);let t={fqn:this._objType.fqn,type:this._objType.elementType,typeClass:this._objType.elementTypeClass},n={allowArray:!1};e=UT.transformValueIn(t,e,n),this._impl.append(e)}get attributes(){if(!this._attributes){let e=this._objType.attributes||[],t={};for(let n=0;n<e.length;n++){let o=e[n],a={type:o.type,typeName:o.typeName};o.typeClass&&(a.typeClass=o.typeClass),t[o.name]=a}this._attributes=t}return this._attributes}deleteElement(e){return Ot.assertArgCount(arguments,1,1),Ot.assertParamValue(Number.isInteger(e),1),this._impl.deleteElement(e)}get elementType(){return this._objType.elementType}get elementTypeClass(){return this._objType.elementTypeClass}get elementTypeName(){return this._objType.elementTypeName}get fqn(){return this._objType.fqn}getElement(e){Ot.assertArgCount(arguments,1,1),Ot.assertParamValue(Number.isInteger(e),1);let t=this._impl.getElement(e);return this._transformValueOut(t,this.elementTypeClass)}getKeys(){return Ot.assertArgCount(arguments,0,0),this._impl.getKeys()}getFirstIndex(){return Ot.assertArgCount(arguments,0,0),this._impl.getFirstIndex()}getLastIndex(){return Ot.assertArgCount(arguments,0,0),this._impl.getLastIndex()}getNextIndex(e){return Ot.assertArgCount(arguments,1,1),Ot.assertParamValue(Number.isInteger(e),1),this._impl.getNextIndex(e)}getPrevIndex(e){return Ot.assertArgCount(arguments,1,1),Ot.assertParamValue(Number.isInteger(e),1),this._impl.getPrevIndex(e)}getValues(){Ot.assertArgCount(arguments,0,0);let e=this._impl.getValues();for(let t=0;t<e.length;t++)e[t]=this._transformValueOut(e[t],this.elementTypeClass);return e}hasElement(e){return Ot.assertArgCount(arguments,1,1),Ot.assertParamValue(Number.isInteger(e),1),this._impl.hasElement(e)}get isCollection(){return this._objType.isCollection}get name(){return this._objType.name}get schema(){return this._objType.schema}setElement(e,t){Ot.assertArgCount(arguments,2,2),Ot.assertParamValue(Number.isInteger(e),1);let n={fqn:this._objType.fqn,type:this._objType.elementType,typeClass:this._objType.elementTypeClass},o={allowArray:!1};t=UT.transformValueIn(n,t,o),this._impl.setElement(e,t)}trim(e){Ot.assertArgCount(arguments,1,1),Ot.assertParamValue(Number.isInteger(e)&&e>=0,1),this._impl.trim(e)}[BT.inspect.custom](e,t){return"["+this.fqn+"] "+BT.inspect(this._toPojo(),t)}[Symbol.iterator](){if(this.isCollection)return this.getValues()[Symbol.iterator]();throw TypeError("obj is not iterable")}[Symbol.toPrimitive](e){switch(e){case"number":return NaN;default:return"["+this.fqn+"] "+BT.inspect(this._toPojo(),{})}}get[Symbol.toStringTag](){return this.fqn}toJSON(){return this._toPojo()}};_(io,"BaseDbObject");var oo=io;function zY(s){return function(){try{return s.apply(this,arguments)}catch(e){throw Ot.transformErr(e,Ot.transformErr)}}}_(zY,"transformErr");function XY(s){for(let e=1;e<arguments.length;e++){let t=arguments[e];s[t]=zY(s[t])}}_(XY,"wrapFns");XY(oo.prototype,"_getAttrValue","_setAttrValue","append","deleteElement","getElement","getKeys","getFirstIndex","getLastIndex","getNextIndex","getPrevIndex","getValues","hasElement","setElement","trim");oo._collectionProxyHandler={deleteProperty(s,e){if(typeof e=="string"){let t=+e;if(!isNaN(t))return s.deleteElement(t)}return delete s[e]},get(s,e){if(typeof e=="string"){let n=+e;if(!isNaN(n))return s.getElement(n)}let t=s[e];return typeof t=="function"?t.bind(s):t},set(s,e,t){if(typeof e=="string"){let n=+e;if(!isNaN(n))return s.setElement(n,t),!0}return s[e]=t,!0}};Gm.exports=oo;var UT=wT()});var VT=Y((ek,$m)=>{"use strict";var{Buffer:YT}=require("buffer"),Hm=ir(),Nr=Ee(),MT=Cr(),QY=hT(),JY=AT(),Km=mT(),Wm=mi(),xT=class xT{_isPayload(e){return typeof e=="string"||YT.isBuffer(e)||e instanceof Wm}_verifyMessage(e){let t;return this._isPayload(e)?(t=e,e={}):(e={...e},this._isPayload(e.payload)?t=e.payload:this._payloadTypeClass?t=new this._payloadTypeClass(e.payload):Nr.throwErr(Nr.ERR_INVALID_AQ_MESSAGE)),typeof t=="string"?e.payload=YT.from(t):YT.isBuffer(t)?e.payload=t:e.payload=t._impl,e.correlation!==void 0&&Nr.assertParamPropValue(typeof e.correlation=="string",1,"correlation"),e.delay!==void 0&&Nr.assertParamPropValue(Number.isInteger(e.delay),1,"delay"),e.exceptionQueue!==void 0&&Nr.assertParamPropValue(typeof e.exceptionQueue=="string",1,"exceptionQueue"),e.expiration!==void 0&&Nr.assertParamPropValue(Number.isInteger(e.expiration),1,"expiration"),e.priority!==void 0&&Nr.assertParamPropValue(Number.isInteger(e.priority),1,"priority"),e.recipients!==void 0&&Nr.assertParamPropValue(MT.isArrayOfStrings(e.recipients),1,"recipients"),e}async create(e,t,n){if(n.payloadType){if(typeof n.payloadType=="string"){let o=await e._getDbObjectClassForName(n.payloadType);this._payloadTypeClass=o,n.payloadType=o}else Nr.assertParamPropValue(MT.isObject(n.payloadType)&&n.payloadType.prototype instanceof Wm,2,"payloadType"),this._payloadTypeClass=n.payloadType;this._payloadType=Hm.DB_TYPE_OBJECT,this._payloadTypeName=this._payloadTypeClass.prototype.name}else this._payloadType=Hm.DB_TYPE_RAW,this._payloadTypeName="RAW";this._name=t,this._impl=await e._impl.getQueue(t,n)}async deqMany(e){Nr.assertArgCount(arguments,1,1),Nr.assertParamValue(Number.isInteger(e)&&e>0,1);let t=await this._impl.deqMany(e),n=new Array(t.length);for(let o=0;o<t.length;o++){let a=new Km;a._impl=t[o],a._payloadTypeClass=this._payloadTypeClass,n[o]=a}return n}async deqOne(){Nr.assertArgCount(arguments,0,0);let e=await this._impl.deqOne();if(e){let t=new Km;return t._impl=e,t._payloadTypeClass=this._payloadTypeClass,t}}get deqOptions(){if(!this._deqOptions){let e=new QY;e._impl=this._impl.deqOptions,this._deqOptions=e}return this._deqOptions}async enqMany(e){Nr.assertArgCount(arguments,1,1),Nr.assertParamValue(Array.isArray(e)&&e.length>0,1);let t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=this._verifyMessage(e[n]);return await this._impl.enqMany(t)}async enqOne(e){return Nr.assertArgCount(arguments,1,1),e=this._verifyMessage(e),await this._impl.enqOne(e)}get enqOptions(){if(!this._enqOptions){let e=new JY;e._impl=this._impl.enqOptions,this._enqOptions=e}return this._enqOptions}get name(){return this._name}get payloadType(){return this._payloadType}get payloadTypeName(){return this._payloadTypeName}get payloadTypeClass(){return this._payloadTypeClass}};_(xT,"AqQueue");var Wa=xT;MT.wrapFns(Wa.prototype,"deqOne","deqMany","enqOne","enqMany");$m.exports=Wa});var Pi=Y((rk,zm)=>{"use strict";var bT=class bT{get createdOn(){return this._impl.getCreatedOn()}getContent(){return JSON.parse(this._impl.getContentAsString())}getContentAsBuffer(){return this._impl.getContentAsBuffer()}getContentAsString(){return this._impl.getContentAsString()}get key(){return this._impl.getKey()}get lastModified(){return this._impl.getLastModified()}get mediaType(){return this._impl.getMediaType()}get version(){return this._impl.getVersion()}};_(bT,"SodaDocument");var $a=bT;$a.prototype._sodaDocumentMarker=!0;zm.exports=$a});var vT=Y((sk,Xm)=>{"use strict";var Ri=Ee(),jY=Cr(),ZY=Pi(),FT=class FT{async close(){Ri.assertArgCount(arguments,0,0),Ri.assert(this._impl,Ri.ERR_INVALID_SODA_DOC_CURSOR),await this._impl.close(),delete this._impl}async getNext(){Ri.assertArgCount(arguments,0,0),Ri.assert(this._impl,Ri.ERR_INVALID_SODA_DOC_CURSOR);let e=await this._impl.getNext();if(e){let t=new ZY;return t._impl=e,t}}};_(FT,"SodaDocCursor");var za=FT;jY.wrapFns(za.prototype,"close","getNext");Xm.exports=za});var GT=Y((ok,Jm)=>{"use strict";var e1=vT(),kT=Pi(),St=Ee(),Xa=Cr(),Qm=Zr(),qT=class qT{constructor(){this._options={autoCommit:Qm.autoCommit,fetchArraySize:Qm.fetchArraySize}}async count(){return St.assertArgCount(arguments,0,0),await this._impl.count(this._options)}async getCursor(){St.assertArgCount(arguments,0,0);let e=new e1;return e._impl=await this._impl.getCursor(this._options),e}async getDocuments(){St.assertArgCount(arguments,0,0);let e=await this._impl.getDocuments(this._options),t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=new kT,t[n]._impl=e[n];return t}async getOne(){St.assertArgCount(arguments,0,0);let e=await this._impl.getOne(this._options);if(e){let t=new kT;return t._impl=e,t}}async replaceOne(e){return St.assertArgCount(arguments,1,1),e=Xa.verifySodaDoc(e),await this._impl.replaceOne(this._options,e)}async replaceOneAndGet(e){St.assertArgCount(arguments,1,1),e=Xa.verifySodaDoc(e);let t=await this._impl.replaceOneAndGet(this._options,e);if(t){let n=new kT;return n._impl=t,n}}async remove(){return St.assertArgCount(arguments,0,0),await this._impl.remove(this._options)}fetchArraySize(e){return St.assertArgCount(arguments,1,1),St.assertParamValue(Number.isInteger(e)&&e>=0,1),this._options.fetchArraySize=e,this}filter(e){return St.assertArgCount(arguments,1,1),St.assertParamValue(Xa.isObject(e),1),this._options.filter=JSON.stringify(e),this}hint(e){return St.assertArgCount(arguments,1,1),St.assertParamValue(typeof e=="string",1),this._options.hint=e,this}key(e){return St.assertArgCount(arguments,1,1),St.assertParamValue(typeof e=="string",1),this._options.key=e,this._options.keys=void 0,this}keys(e){St.assertArgCount(arguments,1,1),St.assertParamValue(Array.isArray(e),1);for(let t=0;t<e.length;t++)St.assertParamValue(typeof e[t]=="string",1);return this._options.keys=e,this._options.key=void 0,this}limit(e){return St.assertArgCount(arguments,1,1),St.assertParamValue(typeof e=="number",1),this._options.limit=e,this}skip(e){return St.assertArgCount(arguments,1,1),St.assertParamValue(typeof e=="number",1),this._options.skip=e,this}version(e){return St.assertArgCount(arguments,1,1),St.assertParamValue(typeof e=="string",1),this._options.version=e,this}};_(qT,"SodaOperation");var Qa=qT;Xa.wrapFns(Qa.prototype,"count","getCursor","getDocuments","getOne","remove","replaceOne","replaceOneAndGet");Jm.exports=Qa});var KT=Y((_k,jm)=>{"use strict";var Ja=Pi(),t1=GT(),Nt=Ee(),un=Cr(),$n=Zr(),HT=class HT{async createIndex(e){Nt.assertArgCount(arguments,1,1),Nt.assertParamValue(un.isObject(e),1);let t={autoCommit:$n.autoCommit};return await this._impl.createIndex(JSON.stringify(e),t)}async drop(){Nt.assertArgCount(arguments,0,0);let e={autoCommit:$n.autoCommit};return await this._impl.drop(e)}async dropIndex(e,t){let n={autoCommit:$n.autoCommit};return Nt.assertArgCount(arguments,1,2),Nt.assertParamValue(typeof e=="string",1),arguments.length==2&&(Nt.assertParamValue(typeof t=="object",2),t.force!==void 0&&(Nt.assertParamPropValue(typeof t.force=="boolean",2,"force"),n.force=t.force)),await this._impl.dropIndex(e,n)}find(){Nt.assertArgCount(arguments,0,0);let e=new t1;return e._impl=this._impl.find(),e}async getDataGuide(){Nt.assertArgCount(arguments,0,0);let e=new Ja;return e._impl=await this._impl.getDataGuide(),e}async insertMany(e){Nt.assertArgCount(arguments,1,1),Nt.assertParamValue(Array.isArray(e)&&e.length>0,1);let t=Array(e.length);for(let o=0;o<e.length;o++)t[o]=un.verifySodaDoc(e[o]);let n={autoCommit:$n.autoCommit};await this._impl.insertMany(t,n)}async insertManyAndGet(e,t){let n={autoCommit:$n.autoCommit};Nt.assertArgCount(arguments,1,2),Nt.assertParamValue(Array.isArray(e)&&e.length>0,1),arguments.length==2&&(Nt.assertParamValue(un.isObject(t),2),t.hint!==void 0&&(Nt.assertParamPropValue(typeof t.hint=="string",2,"hint"),n.hint=t.hint));let o=Array(e.length);for(let T=0;T<e.length;T++)o[T]=un.verifySodaDoc(e[T]);let a=await this._impl.insertManyAndGet(o,n);for(let T=0;T<e.length;T++){let u=o[T]=new Ja;u._impl=a[T]}return o}async insertOne(e){Nt.assertArgCount(arguments,1,1),e=un.verifySodaDoc(e);let t={autoCommit:$n.autoCommit};await this._impl.insertOne(e,t)}async insertOneAndGet(e,t){let n={autoCommit:$n.autoCommit};Nt.assertArgCount(arguments,1,2),e=un.verifySodaDoc(e),arguments.length==2&&(Nt.assertParamValue(un.isObject(t),2),t.hint!==void 0&&(Nt.assertParamPropValue(typeof t.hint=="string",2,"hint"),n.hint=t.hint));let o=new Ja;return o._impl=await this._impl.insertOneAndGet(e,n),o}get metaData(){return JSON.parse(this._impl.getMetaData())}get name(){return this._impl.getName()}async save(e){Nt.assertArgCount(arguments,1,1),e=un.verifySodaDoc(e);let t={autoCommit:$n.autoCommit};await this._impl.save(e,t)}async saveAndGet(e,t){Nt.assertArgCount(arguments,1,2),e=un.verifySodaDoc(e);let n={autoCommit:$n.autoCommit};arguments.length==2&&(Nt.assertParamValue(un.isObject(t),2),t.hint!==void 0&&(Nt.assertParamPropValue(typeof t.hint=="string",2,"hint"),n.hint=t.hint));let o=new Ja;return o._impl=await this._impl.saveAndGet(e,n),o}async truncate(){Nt.assertArgCount(arguments,0,0),await this._impl.truncate()}};_(HT,"SodaCollection");var ja=HT;un.wrapFns(ja.prototype,"createIndex","drop","dropIndex","getDataGuide","insertMany","insertManyAndGet","insertOne","insertOneAndGet","save","saveAndGet","truncate");jm.exports=ja});var zT=Y((lk,tP)=>{"use strict";var{Buffer:WT}=require("buffer"),Zm=KT(),r1=Pi(),or=Ee(),ks=Cr(),eP=Zr(),$T=class $T{_getConnection(){return this._connection}async createCollection(e,t){let n={autoCommit:eP.autoCommit};or.assertArgCount(arguments,1,2),or.assertParamValue(typeof e=="string",1),arguments.length==2&&(or.assertParamValue(ks.isObject(t),2),t.mode!==void 0&&(or.assertParamPropValue(Number.isInteger(t.mode)&&t.mode>0,2,"mode"),n.mode=t.mode),t.metaData!==void 0&&(or.assertParamPropValue(ks.isObject(t.metaData),2,"metaData"),n.metaData=JSON.stringify(t.metaData)));let o=new Zm;return o._impl=await this._impl.createCollection(e,n),o}createDocument(e,t){let n={};or.assertArgCount(arguments,1,2),or.assertParamValue(WT.isBuffer(e)||typeof e=="string"||ks.isObject(e),1),arguments.length>1&&(or.assertParamValue(ks.isObject(t),2),n=t,or.assertParamPropString(n,2,"key"),or.assertParamPropString(n,2,"mediaType")),typeof e=="string"?e=WT.from(e):ks.isObject(e)&&(e=WT.from(JSON.stringify(e)));let o=new r1;return o._impl=this._impl.createDocument(e,n),o}async getCollectionNames(e){let t={};return or.assertArgCount(arguments,0,1),arguments.length==1&&(or.assertParamValue(ks.isObject(e),1),t=e,t.startsWith!==void 0&&or.assertParamPropValue(typeof t.startsWith=="string",1,"startsWith"),t.limit!==void 0&&or.assertParamPropValue(Number.isInteger(t.limit),1,"limit")),await this._impl.getCollectionNames(t)}async openCollection(e){or.assertArgCount(arguments,1,1),or.assertParamValue(typeof e=="string",1);let t={autoCommit:eP.autoCommit},n=await this._impl.openCollection(e,t);if(n){let o=new Zm;return o._impl=n,o}}};_($T,"SodaDatabase");var Za=$T;ks.wrapFns(Za.prototype,"createCollection","getCollectionNames","openCollection");tP.exports=Za});var jT=Y((uk,rP)=>{"use strict";var n1=VT(),Ii=mi(),{Buffer:s1}=require("buffer"),XT=pi(),e_=Ka(),i1=zT(),o1=require("events"),a1=CT(),O=Ee(),yt=Cr(),t_=di(),_1=require("process"),c1=require("util"),Vt=ir(),QT=Zr(),l1=wT(),st=Dr(),ao=new Map,JT=class JT extends o1{constructor(){super(),this._dbObjectClasses=new Map,this._closing=!1}_addDefaultsToExecOpts(e){e.connection=this,e.keepInStmtCache===void 0&&(e.keepInStmtCache=!0),QT.addToOptions(e,"autoCommit","dbObjectAsPojo","fetchArraySize","fetchTypeHandler","maxRows","outFormat","prefetchRows")}_buildDbObjectClass(e){let t=_(function(n){if(this._impl=new t_.DbObjectImpl(e),this.isCollection){let o=new Proxy(this,Ii._collectionProxyHandler);if(n!==void 0)for(let a=0;a<n.length;a++)this.append(n[a]);return o}else n!==void 0&&Object.assign(this,n)},"DbObject");if(t.prototype=Object.create(Ii.prototype),t.prototype.constructor=t,t.prototype._objType=e,e.elementTypeClass){let n=this._getDbObjectClass(e.elementTypeClass);e.elementTypeClass=n}if(yt.addTypeProperties(e,"elementType"),e.attributes){let n={};for(let o of e.attributes){o.typeClass&&(o.typeClass=this._getDbObjectClass(o.typeClass)),yt.addTypeProperties(o,"type");let a={get(){return this._getAttrValue(o)},set(T){this._setAttrValue(o,T)}};n[o.name]=a}Object.defineProperties(t.prototype,n)}return t.toString=function(){return"DbObjectClass ["+e.fqn+"]"},t}_getDbObjectClass(e){if(e.prototype instanceof Ii)return e;let t=this._dbObjectClasses.get(e);return t||(t=this._buildDbObjectClass(e),t._connection=this,t._objType=e,e._connection=this._impl,this._dbObjectClasses.set(e,t)),t}async _getDbObjectClassForName(e){let t=this._dbObjectClasses.get(e);if(!t){let n=await this._impl.getDbObjectClass(e);t=this._getDbObjectClass(n),this._dbObjectClasses.set(e,t)}return t}_isBindDir(e){return e===Vt.BIND_IN||e===Vt.BIND_OUT||e===Vt.BIND_INOUT}_isBindValue(e){return e==null||typeof e=="number"||typeof e=="string"||typeof e=="boolean"||Array.isArray(e)||s1.isBuffer(e)||c1.isDate(e)||e instanceof XT||e instanceof e_||e instanceof Ii}async _processBindUnit(e,t,n){let o=!1;if(t.dir===void 0?e.dir=Vt.BIND_IN:(O.assert(this._isBindDir(t.dir),O.ERR_INVALID_BIND_DIRECTION),e.dir=t.dir,o=!0),t.type!==void 0?(typeof t.type=="string"?(e.type=st.DB_TYPE_OBJECT,e.typeClass=await this._getDbObjectClassForName(t.type),e.objType=e.typeClass._objType):t.type.prototype instanceof Ii?(e.type=st.DB_TYPE_OBJECT,e.typeClass=t.type,e.objType=e.typeClass._objType):(O.assert(t.type instanceof st.DbType,O.ERR_INVALID_BIND_DATA_TYPE,2),e.type=t.type),o=!0):n&&(e.name&&O.throwErr(O.ERR_MISSING_TYPE_BY_NAME,e.name),O.throwErr(O.ERR_MISSING_TYPE_BY_POS,e.pos)),(e.dir!==Vt.BIND_IN||n)&&(t.maxSize!==void 0?(O.assertParamPropValue(Number.isInteger(t.maxSize)&&t.maxSize>0,2,"maxSize"),e.maxSize=t.maxSize,e.checkSize=!0,o=!0):n?(e.type===st.DB_TYPE_VARCHAR||e.type===st.DB_TYPE_RAW)&&(e.name&&O.throwErr(O.ERR_MISSING_MAX_SIZE_BY_NAME,e.name),O.throwErr(O.ERR_MISSING_MAX_SIZE_BY_POS,e.pos)):e.maxSize=Vt.DEFAULT_MAX_SIZE_FOR_OUT_BINDS),e.isArray=!1,n||t.maxArraySize!==void 0&&(O.assertParamPropValue(Number.isInteger(t.maxArraySize)&&t.maxArraySize>0,2,"maxArraySize"),e.maxArraySize=t.maxArraySize,e.isArray=!0),!n&&t.val!==void 0)return t.val;o||O.throwErr(O.ERR_INVALID_BIND_UNIT)}async _processBindValue(e,t,n){let o=l1.transformValueIn(e,t,n);e.isArray?e.values=o.concat(e.values.slice(o.length)):e.values[n.pos]=o,e.type===st.DB_TYPE_OBJECT&&e.typeClass===void 0&&(e.typeClass=await this._getDbObjectClass(t._objType),e.objType=e.typeClass._objType)}async _processExecuteBind(e,t){e.isArray=!1;let n;if(this._isBindValue(t)?(e.dir=Vt.BIND_IN,n=t):n=await this._processBindUnit(e,t,!1),e.dir!==Vt.BIND_OUT){let o={pos:0,allowArray:!0};await this._processBindValue(e,n,o)}e.type===void 0&&(e.type=st.DB_TYPE_VARCHAR,e.maxSize===void 0&&(e.maxSize=1)),e.isArray&&e.type!==st.DB_TYPE_VARCHAR&&e.type!==st.DB_TYPE_NVARCHAR&&e.type!==st.DB_TYPE_CHAR&&e.type!==st.DB_TYPE_NCHAR&&e.type!==st.DB_TYPE_NUMBER&&e.type!==st.DB_TYPE_BINARY_FLOAT&&e.type!==st.DB_TYPE_BINARY_DOUBLE&&e.type!==st.DB_TYPE_DATE&&e.type!==st.DB_TYPE_TIMESTAMP&&e.type!==st.DB_TYPE_TIMESTAMP_LTZ&&e.type!==st.DB_TYPE_TIMESTAMP_TZ&&e.type!==st.DB_TYPE_RAW&&O.throwErr(O.ERR_INVALID_TYPE_FOR_ARRAY_BIND)}async _processExecuteBinds(e){let t=[];if(Array.isArray(e))for(let n=0;n<e.length;n++){let o=t[n]={pos:n+1,values:[]};await this._processExecuteBind(o,e[n])}else{O.assertParamValue(yt.isObject(e),2);let n=Object.getOwnPropertyNames(e);for(let o=0;o<n.length;o++){let a=t[o]={name:n[o],values:[]};await this._processExecuteBind(a,e[n[o]])}}return t}async _processExecuteManyBinds(e,t){let n=[],o;if(t!==void 0)if(Array.isArray(t)){o=!0;for(let a=0;a<t.length;a++){let T=n[a]={pos:a+1,values:[]};await this._processBindUnit(T,t[a],!0)}}else{o=!1;let a=Object.getOwnPropertyNames(t);for(let T=0;T<a.length;T++){let u=n[T]={name:a[T],values:[]};await this._processBindUnit(u,t[a[T]],!0)}}else{let a=e[0];if(O.assertParamValue(yt.isObjectOrArray(a),2),Array.isArray(a)){o=!0;for(let T=0;T<a.length;T++)n[T]={pos:T+1}}else{o=!1;let T=Object.getOwnPropertyNames(a);for(let u=0;u<T.length;u++)n[u]={name:T[u]}}for(let T=0;T<n.length;T++)n[T].dir=Vt.BIND_IN,n[T].isArray=!1,n[T].values=[]}for(let a=0;a<e.length;a++){let T=e[a],u={pos:a,allowArray:!1};O.assert(o&&Array.isArray(T)||!o&&yt.isObject(T),O.ERR_MIXED_BIND);for(let h=0;h<n.length;h++){let A=n[h],N=o?T[h]:T[A.name];await this._processBindValue(A,N,u)}}for(let a=0;a<n.length;a++){let T=n[a];T.type===void 0&&(T.type=st.DB_TYPE_VARCHAR,T.maxSize=1)}return n}_transformOutBind(e,t){let n=e;if(Array.isArray(e)){n=[];for(let o=0;o<e.length;o++)n.push(this._transformOutBind(e[o],t))}else if(e instanceof t_.ResultSetImpl)n=new e_,n._setup(this,e);else if(e instanceof t_.LobImpl)n=new XT,n._setup(e,!0);else if(e instanceof t_.DbObjectImpl){let o=this._dbObjectClasses.get(e._objType);n=Object.create(o.prototype),n._impl=e,t.dbObjectAsPojo?n=n._toPojo():n.isCollection&&(n=new Proxy(n,Ii._collectionProxyHandler))}return n}_verifyExecOpts(e,t){let n={};if(O.assertParamValue(yt.isObject(e),3),e.autoCommit!==void 0&&(O.assertParamPropValue(typeof e.autoCommit=="boolean",3,"autoCommit"),n.autoCommit=e.autoCommit),e.dbObjectAsPojo!==void 0&&(O.assertParamPropValue(typeof e.dbObjectAsPojo=="boolean",3,"dbObjectAsPojo"),n.dbObjectAsPojo=e.dbObjectAsPojo),e.keepInStmtCache!==void 0&&(O.assertParamPropValue(typeof e.keepInStmtCache=="boolean",3,"keepInStmtCache"),n.keepInStmtCache=e.keepInStmtCache),t)e.bindDefs!==void 0&&(O.assertParamPropValue(yt.isObjectOrArray(e.bindDefs),3,"bindDefs"),n.bindDefs=e.bindDefs),e.batchErrors!==void 0&&(O.assertParamPropValue(typeof e.batchErrors=="boolean",3,"batchErrors"),n.batchErrors=e.batchErrors),e.dmlRowCounts!==void 0&&(O.assertParamPropValue(typeof e.dmlRowCounts=="boolean",3,"dmlRowCounts"),n.dmlRowCounts=e.dmlRowCounts);else{if(e.fetchArraySize!==void 0&&(O.assertParamPropValue(Number.isInteger(e.fetchArraySize)&&e.fetchArraySize>0,3,"fetchArraySize"),n.fetchArraySize=e.fetchArraySize),e.fetchInfo!==void 0){O.assertParamPropValue(yt.isObject(e.fetchInfo),3,"fetchInfo");let o=Object.getOwnPropertyNames(e.fetchInfo),a=new Map(QT.fetchTypeMap);for(let T of o){let u=e.fetchInfo[T];u.type===void 0&&O.throwErr(O.ERR_NO_TYPE_FOR_CONVERSION),u.type!==Vt.DEFAULT&&u.type!==st.DB_TYPE_VARCHAR&&u.type!==st.DB_TYPE_RAW&&O.throwErr(O.ERR_INVALID_TYPE_FOR_CONVERSION),a.set(T,u.type)}n.fetchTypeMap=a}if(e.fetchTypeHandler!==void 0){let o=typeof e.fetchTypeHandler;O.assertParamPropValue(o==="function",3,"fetchTypeHandler"),n.fetchTypeHandler=e.fetchTypeHandler}e.maxRows!==void 0&&(O.assertParamPropValue(Number.isInteger(e.maxRows)&&e.maxRows>=0,3,"maxRows"),n.maxRows=e.maxRows),e.outFormat!==void 0&&(O.assertParamPropValue(e.outFormat===Vt.OUT_FORMAT_ARRAY||e.outFormat===Vt.OUT_FORMAT_OBJECT,3,"outFormat"),n.outFormat=e.outFormat),e.prefetchRows!==void 0&&(O.assertParamPropValue(Number.isInteger(e.prefetchRows)&&e.prefetchRows>=0,3,"prefetchRows"),n.prefetchRows=e.prefetchRows),e.resultSet!==void 0&&(O.assertParamPropValue(typeof e.resultSet=="boolean",3,"resultSet"),n.resultSet=e.resultSet)}return n}get action(){return null}set action(e){O.assertPropValue(typeof e=="string","action"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setAction(e)}async breakExecution(){O.assertArgCount(arguments,0,0),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.breakExecution()}get callTimeout(){if(this._impl)return this._impl.getCallTimeout()}set callTimeout(e){O.assertPropValue(Number.isInteger(e)&&e>=0,"callTimeout"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setCallTimeout(e)}async changePassword(e,t,n){O.assertArgCount(arguments,3,3),O.assertParamValue(typeof e=="string",1),O.assertParamValue(typeof t=="string",2),O.assertParamValue(typeof n=="string",3),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.changePassword(e,t,n)}get clientId(){return null}set clientId(e){O.assertPropValue(typeof e=="string","clientId"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setClientId(e)}get clientInfo(){return null}set clientInfo(e){O.assertPropValue(typeof e=="string","clientInfo"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setClientInfo(e)}async close(e){let t={};O.assertArgCount(arguments,0,1),arguments.length==1&&(O.assertParamValue(yt.isObject(e),1),t=e,O.assertParamPropBool(t,1,"drop")),O.assert(this._impl&&!this._closing,O.ERR_INVALID_CONNECTION),this._closing=!0;try{await this._impl.close(t)}finally{this._closing=!1}delete this._impl,this._dbObjectClasses.clear(),this.emit("_afterConnClose")}async commit(){O.assertArgCount(arguments,0,0),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.commit()}async createLob(e){O.assertArgCount(arguments,1,1),O.assertParamValue(e===st.DB_TYPE_CLOB||e===st.DB_TYPE_BLOB||e===st.DB_TYPE_NCLOB,1),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let t=new XT;return t._setup(await this._impl.createLob(e),!1),t}get currentSchema(){if(this._impl)return this._impl.getCurrentSchema()}set currentSchema(e){O.assertPropValue(typeof e=="string","currentSchema"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setCurrentSchema(e)}get dbOp(){return null}set dbOp(e){O.assertPropValue(typeof e=="string","dbOp"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setDbOp(e)}get thin(){return QT.thin}get ecid(){return null}set ecid(e){O.assertPropValue(typeof e=="string","ecid"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setECID(e)}async execute(e,t,n){let a=[],T={};O.assertArgCount(arguments,1,3),O.assertParamValue(typeof e=="string",1),arguments.length>=2&&(a=await this._processExecuteBinds(t)),arguments.length==3&&(T=this._verifyExecOpts(n,!1)),this._addDefaultsToExecOpts(T),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let u;try{u=await this._impl.execute(e,1,a,T,!1)}catch(h){throw h.errorNum===1406&&O.throwErr(O.ERR_INSUFFICIENT_BUFFER_FOR_BINDS),h}if(u.resultSet!==void 0){let h=new e_;h._setup(this,u.resultSet),u.metaData=h._impl.metaData,T.resultSet?u.resultSet=h:(u.rows=await h._getAllRows(),delete u.resultSet)}if(u.outBinds!==void 0)for(let h in u.outBinds){let A=this._transformOutBind(u.outBinds[h],T);u.outBinds[h]=A}if(u.implicitResults)for(let h in u.implicitResults){let A=u.implicitResults[h],N=new e_;N._setup(this,A),T.resultSet?u.implicitResults[h]=N:u.implicitResults[h]=await N._getAllRows()}return u}async executeMany(e,t,n){let o={},a=[],T;O.assertArgCount(arguments,2,3),O.assertParamValue(typeof e=="string",1),arguments.length==3&&(o=this._verifyExecOpts(n,!0)),this._addDefaultsToExecOpts(o),typeof t=="number"?(O.assertParamValue(Number.isInteger(t)&&t>0,2),T=t,o.bindDefs!==void 0&&(a=await this._processExecuteManyBinds([],o.bindDefs))):(O.assertParamValue(Array.isArray(t)&&t.length>0,2),T=t.length,a=await this._processExecuteManyBinds(t,o.bindDefs)),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let u=await this._impl.execute(e,T,a,o,!0);if(u.outBinds!==void 0)for(let h=0;h<u.outBinds.length;h++){let A=u.outBinds[h];for(let N in A)A[N]=this._transformOutBind(A[N],o)}return u}get externalName(){if(this._impl)return this._impl.getExternalName()}set externalName(e){O.assertPropValue(typeof e=="string","externalName"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setExternalName(e)}async getDbObjectClass(e){return O.assertArgCount(arguments,1,1),O.assertParamValue(typeof e=="string",1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._getDbObjectClassForName(e)}async getQueue(e,t){let n={};O.assertArgCount(arguments,1,2),O.assertParamValue(typeof e=="string",1),arguments.length==2&&(O.assertParamValue(yt.isObject(t),2),n={...t}),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let o=new n1;return await o.create(this,e,n),o}getSodaDatabase(){O.assertArgCount(arguments,0,0),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let e=new i1;return e._impl=this._impl.getSodaDatabase(),e}async getStatementInfo(e){O.assertArgCount(arguments,1,1),O.assertParamValue(typeof e=="string",1),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let t=await this._impl.getStatementInfo(e);if(t.metaData)for(let n=0;n<t.metaData.length;n++){let o=t.metaData[n];yt.addTypeProperties(o,"dbType"),o.fetchType=st.DB_TYPE_FETCH_TYPE_MAP.get(o.dbType)}return t}get internalName(){if(this._impl)return this._impl.getInternalName()}set internalName(e){O.assertPropValue(typeof e=="string","internalName"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setInternalName(e)}isHealthy(){return this._impl!==void 0&&!this._closing&&this._impl.isHealthy()}get module(){return null}set module(e){O.assertPropValue(typeof e=="string","module"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setModule(e)}get oracleServerVersion(){if(this._impl)return this._impl.getOracleServerVersion()}get oracleServerVersionString(){if(this._impl)return this._impl.getOracleServerVersionString()}async ping(){O.assertArgCount(arguments,0,0),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.ping()}queryStream(e,t,n){O.assertArgCount(arguments,1,3),O.assertParamValue(typeof e=="string",1),arguments.length==3?(O.assertParamValue(yt.isObject(n),3),n={...n}):n={},n.resultSet=!0;let o=new a1;return _1.nextTick(async()=>{try{let a=await this.execute(e,t||[],n);a.resultSet||O.throwErr(O.ERR_NOT_A_QUERY),o._open(a.resultSet)}catch(a){o.destroy(a);return}}),o}async rollback(){O.assertArgCount(arguments,0,0),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.rollback()}async shutdown(e){let t=Vt.SHUTDOWN_MODE_DEFAULT;O.assertArgCount(arguments,0,1),e!==void 0&&(O.assertParamValue(typeof t=="number",1),t=e),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.shutdown(t)}async startup(e){let t={};O.assertArgCount(arguments,0,1),arguments.length==1&&(O.assertParamValue(typeof t=="object",1),t=e,O.assertParamPropBool(t,1,"force"),O.assertParamPropBool(t,1,"restrict"),O.assertParamPropString(t,1,"pfile")),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.startup(t)}get stmtCacheSize(){if(this._impl)return this._impl.getStmtCacheSize()}set stmtCacheSize(e){O.assertPropValue(Number.isInteger(e)&&e>=0,"stmtCacheSize"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setStmtCacheSize(e)}async subscribe(e,t){O.assertArgCount(arguments,2,2),O.assertParamValue(typeof e=="string",1),O.assertParamValue(yt.isObject(t),2),t={...t},O.assertParamPropUnsignedInt(t,2,"namespace"),t.namespace===void 0&&(t.namespace=Vt.SUBSCR_NAMESPACE_DBCHANGE),O.assertParamPropString(t,2,"ipAddress"),O.assertParamPropUnsignedInt(t,2,"port"),O.assertParamPropUnsignedInt(t,2,"timeout"),O.assertParamPropUnsignedInt(t,2,"operations"),O.assertParamPropUnsignedInt(t,2,"qos"),O.assertParamPropUnsignedInt(t,2,"groupingClass"),O.assertParamPropUnsignedInt(t,2,"groupingValue"),O.assertParamPropUnsignedInt(t,2,"groupingType"),O.assertParamPropBool(t,2,"clientInitiated"),O.assertParamPropFunction(t,2,"callback"),O.assert(t.callback,O.ERR_MISSING_SUBSCR_CALLBACK),t.namespace===Vt.SUBSCR_NAMESPACE_DBCHANGE&&(O.assertParamPropString(t,2,"sql"),O.assert(t.sql&&t.sql.length>0,O.ERR_MISSING_SUBSCR_SQL),t.binds!==void 0&&(t.binds=await this._processExecuteBinds(t.binds))),O.assert(this._impl,O.ERR_INVALID_CONNECTION);let n=ao.get(e),o=await this._impl.subscribe(n,t),a;return t.namespace===Vt.SUBSCR_NAMESPACE_DBCHANGE?(a=o.subscription,delete o.subscription):(a=o,o=void 0),ao.set(e,a),o}get tag(){if(this._impl)return this._impl.getTag()}set tag(e){O.assertPropValue(typeof e=="string","tag"),O.assert(this._impl,O.ERR_INVALID_CONNECTION),this._impl.setTag(e)}async tpcBegin(e,t,n){O.assertArgCount(arguments,1,3),O.assertParamValue(yt.isXid(e),1),arguments.length<3?n=60:O.assertParamValue(typeof n=="number",3),arguments.length<2?t=Vt.TPC_BEGIN_NEW:O.assertParamValue(typeof t=="number",2),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.tpcBegin(e,t,n)}async tpcCommit(e,t){O.assertArgCount(arguments,0,2),arguments.length<2?t=!1:O.assertParamValue(typeof t=="boolean",2),arguments.length>=1&&O.assertParamValue(yt.isXid(e),1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.tpcCommit(e,t)}async tpcEnd(e,t){O.assertArgCount(arguments,0,2),arguments.length<2?t=Vt.TPC_END_NORMAL:O.assertParamValue(typeof t=="number",2),arguments.length>=1&&O.assertParamValue(yt.isXid(e),1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.tpcEnd(e,t)}async tpcForget(e){O.assertArgCount(arguments,1,1),O.assertParamValue(yt.isXid(e),1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.tpcForget(e)}async tpcPrepare(e){return O.assertArgCount(arguments,0,1),arguments.length>=1&&O.assertParamValue(yt.isXid(e),1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.tpcPrepare(e)}async tpcRecover(e){O.assertArgCount(arguments,0,1),arguments.length==1?O.assertParamValue(typeof e=="boolean",1):e=!0;let t=`
      SELECT
          formatid as "formatId",
          UTL_RAW.CAST_TO_VARCHAR2(globalid) as "globalTransactionId",
          UTL_RAW.CAST_TO_VARCHAR2(branchid) as "branchQualifier"
      FROM DBA_PENDING_TRANSACTIONS`,n=`
      SELECT
          formatid as "formatId",
          globalid as "globalTransactionId",
          branchid as "branchQualifier"
      FROM DBA_PENDING_TRANSACTIONS`,o={outFormat:Vt.OUT_FORMAT_OBJECT,resultSet:!1};return(await this.execute(e?t:n,{},o)).rows}async tpcRollback(e){O.assertArgCount(arguments,0,1),arguments.length==1&&O.assertParamValue(yt.isXid(e),1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),await this._impl.tpcRollback(e)}async unsubscribe(e){O.assertArgCount(arguments,1,1),O.assertParamValue(typeof e=="string",1),O.assert(this._impl,O.ERR_INVALID_CONNECTION),O.assert(ao.has(e),O.ERR_INVALID_SUBSCR),await this._impl.unsubscribe(ao.get(e)),ao.delete(e)}};_(JT,"Connection");var ps=JT;ps.prototype.break=yt.callbackify(ps.prototype.breakExecution);yt.wrapFns(ps.prototype,"changePassword","close","commit","createLob","execute","executeMany","getDbObjectClass","getQueue","getStatementInfo","ping","rollback","shutdown","startup","subscribe","tpcBegin","tpcCommit","tpcEnd","tpcForget","tpcPrepare","tpcRecover","tpcRollback","unsubscribe");ps.prototype.release=ps.prototype.close;rP.exports=ps});var tu=Y((hk,nP)=>{"use strict";var T1=require("process"),u1=Zr(),eu=class eu{constructor(e){let t=0;e._totalRequestsEnqueued!==0&&(t=Math.round(e._totalTimeInQueue/e._totalRequestsEnqueued)),this.gatheredDate=Date.now(),this.upTime=this.gatheredDate-e._createdDate,this.upTimeSinceReset=this.gatheredDate-e._timeOfReset,this.connectionRequests=e._totalConnectionRequests,this.requestsEnqueued=e._totalRequestsEnqueued,this.requestsDequeued=e._totalRequestsDequeued,this.failedRequests=e._totalFailedRequests,this.rejectedRequests=e._totalRequestsRejected,this.requestTimeouts=e._totalRequestTimeouts,this.maximumQueueLength=e._maximumQueueLength,this.currentQueueLength=e._connRequestQueue.length,this.timeInQueue=e._totalTimeInQueue,this.minimumTimeInQueue=e._minTimeInQueue,this.maximumTimeInQueue=e._maxTimeInQueue,this.averageTimeInQueue=t,this.connectionsInUse=e.connectionsInUse,this.connectionsOpen=e.connectionsOpen,this.connectString=e.connectString,this.edition=e.edition,this.events=e.events,this.externalAuth=e.externalAuth,this.homogeneous=e.homogeneous,this.poolAlias=e.poolAlias,this.poolIncrement=e.poolIncrement,this.poolMax=e.poolMax,this.poolMaxPerShard=e.poolMaxPerShard,this.poolMin=e.poolMin,this.poolPingInterval=e.poolPingInterval,this.poolTimeout=e.poolTimeout,this.queueMax=e.queueMax,this.queueTimeout=e.queueTimeout,this.sodaMetaDataCache=e.sodaMetaDataCache,this.stmtCacheSize=e.stmtCacheSize,this.user=e.user,this.threadPoolSize=T1.env.UV_THREADPOOL_SIZE,this.thin=u1.thin}logStatistics(){console.log(`
Driver:`),console.log("...thin mode:",this.thin),console.log("Pool statistics:"),console.log("...gathered at:",new Date(this.gatheredDate).toISOString()),console.log("...up time (milliseconds):",this.upTime),console.log("...up time from last reset (milliseconds)",this.upTimeSinceReset),console.log("...connection requests:",this.connectionRequests),console.log("...requests enqueued:",this.requestsEnqueued),console.log("...requests dequeued:",this.requestsDequeued),console.log("...requests failed:",this.failedRequests),console.log("...requests exceeding queueMax:",this.rejectedRequests),console.log("...requests exceeding queueTimeout:",this.requestTimeouts),console.log("...current queue length:",this.currentQueueLength),console.log("...maximum queue length:",this.maximumQueueLength),console.log("...sum of time in queue (milliseconds):",this.timeInQueue),console.log("...minimum time in queue (milliseconds):",this.minimumTimeInQueue),console.log("...maximum time in queue (milliseconds):",this.maximumTimeInQueue),console.log("...average time in queue (milliseconds):",this.averageTimeInQueue),console.log("...pool connections in use:",this.connectionsInUse),console.log("...pool connections open:",this.connectionsOpen),console.log("Pool attributes:"),console.log("...connectString:",this.connectString),console.log("...edition:",this.edition),console.log("...events:",this.events),console.log("...externalAuth:",this.externalAuth),console.log("...homogeneous:",this.homogeneous),console.log("...poolAlias:",this.poolAlias),console.log("...poolIncrement:",this.poolIncrement),console.log("...poolMax:",this.poolMax),console.log("...poolMaxPerShard:",this.poolMaxPerShard),console.log("...poolMin:",this.poolMin),console.log("...poolPingInterval (seconds):",this.poolPingInterval),console.log("...poolTimeout (seconds):",this.poolTimeout),console.log("...queueMax:",this.queueMax),console.log("...queueTimeout (milliseconds):",this.queueTimeout),console.log("...sessionCallback:",this.sessionCallback),console.log("...sodaMetaDataCache:",this.sodaMetaDataCache),console.log("...stmtCacheSize:",this.stmtCacheSize),console.log("...user:",this.user),console.log("Related environment variables:"),console.log("...UV_THREADPOOL_SIZE:",this.threadPoolSize)}};_(eu,"PoolStatistics");var ZT=eu;nP.exports=ZT});var oP=Y((Nk,iP)=>{"use strict";var E1=jT(),h1=require("events"),zn=ir(),Re=Ee(),sP=Zr(),Xn=Cr(),S1=di(),N1=tu(),ru=class ru extends h1{constructor(){super(),this._impl=new S1.PoolImpl,this._queueMax=0,this._queueTimeout=0,this._enableStatistics=!1,this._timeOfReset=this._createdDate=Date.now(),this._sessionCallback=void 0,this._connRequestQueue=[],this._connectionClass=sP.connectionClass}_checkPoolOpen(e){this.status===zn.POOL_STATUS_DRAINING?Re.throwErr(Re.ERR_POOL_CLOSING):this.status===zn.POOL_STATUS_CLOSED?Re.throwErr(Re.ERR_POOL_CLOSED):e||this.status===zn.POOL_STATUS_RECONFIGURING&&Re.throwErr(Re.ERR_POOL_RECONFIGURING)}_checkRequestQueue(){let e=this._connectionsOut;for(;this._connRequestQueue.length>0&&e<this.poolMax;){e+=1;let t=this._connRequestQueue.shift();this._enableStatistics&&(this._totalRequestsDequeued+=1,this._updateWaitStatistics(t)),t.timeoutHandle&&clearTimeout(t.timeoutHandle),t.resolve()}}get _enableStats(){return this._enableStatistics}_resetStatistics(){this._timeOfReset=Date.now(),this._totalConnectionRequests=0,this._totalRequestsEnqueued=0,this._totalRequestsDequeued=0,this._totalFailedRequests=0,this._totalRequestsRejected=0,this._totalRequestTimeouts=0,this._maximumQueueLength=this._connRequestQueue.length,this._totalTimeInQueue=0,this._minTimeInQueue=0,this._maxTimeInQueue=0}_setup(e,t){this._queueTimeout=e.queueTimeout,this._queueMax=e.queueMax,this._enableStatistics=e.enableStatistics,this._edition=e.edition,this._eventsFlag=e.events,this._externalAuth=e.externalAuth,this._homogeneous=e.homogeneous,this._user=e.user,this._connectString=e.connectString,this._status=zn.POOL_STATUS_OPEN,this._connectionsOut=0,this._poolAlias=t,this.on("_checkRequestQueue",this._checkRequestQueue),this._resetStatistics()}_updateWaitStatistics(e){let t=Date.now()-e.enqueuedTime;this._totalTimeInQueue+=t,this._minTimeInQueue===0?this._minTimeInQueue=t:this._minTimeInQueue=Math.min(this._minTimeInQueue,t),this._maxTimeInQueue=Math.max(this._maxTimeInQueue,t)}_verifyGetConnectionOptions(e){let t={};if(e.user!==void 0&&(Re.assertParamPropValue(typeof e.user=="string",1,"user"),t.user=e.user),e.username!==void 0&&(Re.assert(t.user===void 0,Re.ERR_DBL_USER),Re.assertParamPropValue(typeof e.username=="string",1,"username"),t.user=e.username),e.password!==void 0&&(Re.assertParamPropValue(typeof e.password=="string",1,"password"),t.password=e.password),e.tag!==void 0&&(Re.assertParamPropValue(typeof e.tag=="string",1,"tag"),t.tag=e.tag),e.matchAnyTag!==void 0&&(Re.assertParamPropValue(typeof e.matchAnyTag=="boolean",1,"matchAnyTag"),t.matchAnyTag=e.matchAnyTag),e.shardingKey!==void 0){let n=e.shardingKey;Re.assertParamPropValue(Xn.isShardingKey(n),1,"shardingKey"),t.shardingKey=e.shardingKey}if(e.superShardingKey!==void 0){let n=e.superShardingKey;Re.assertParamPropValue(Xn.isShardingKey(n),1,"superShardingKey"),t.superShardingKey=e.superShardingKey}return t}async close(e){let t=0,n=!1;Re.assertArgCount(arguments,0,1),arguments.length==1&&(Re.assertParamValue(typeof e=="number",1),(e<0||isNaN(e)||e>2**31)&&Re.throwErr(Re.ERR_INVALID_PARAMETER_VALUE,1),n=!0,this._connectionsOut>0&&(t=e*1e3)),this._checkPoolOpen(!1),t>0&&(this._status=zn.POOL_STATUS_DRAINING,await new Promise(o=>{let a=setTimeout(()=>{this.removeAllListeners("_allCheckedIn"),o()},t);this.once("_allCheckedIn",()=>{clearTimeout(a),o()})})),await this._impl.close({forceClose:n}),this._status=zn.POOL_STATUS_CLOSED,this.emit("_afterPoolClose")}get connectionsInUse(){return this._impl.getConnectionsInUse()}get connectionsOpen(){return this._impl.getConnectionsOpen()}get connectString(){return this._connectString}get thin(){return sP.thin}get edition(){return this._edition}get enableStatistics(){return this._enableStatistics}get events(){return this._eventsFlag}get externalAuth(){return this._externalAuth}async getConnection(e){let t,n={};Re.assertArgCount(arguments,0,1),arguments.length==1&&(Re.assertParamValue(Xn.isObject(e),1),n=this._verifyGetConnectionOptions(e)),n.connectionClass=this._connectionClass,this._checkPoolOpen(!0),this._enableStatistics&&(this._totalConnectionRequests+=1);try{t=this.poolMax}catch(o){throw this._enableStatistics&&(this._totalFailedRequests+=1),o}(this._connectionsOut>=t||this.status===zn.POOL_STATUS_RECONFIGURING)&&(this._connRequestQueue.length>=this._queueMax&&this._queueMax>=0&&(this._enableStatistics&&(this._totalRequestsRejected+=1),Re.throwErr(Re.ERR_QUEUE_MAX_EXCEEDED,this._queueMax)),await new Promise((o,a)=>{let T={resolve:o,reject:a};this._queueTimeout!==0&&(T.timeoutHandle=setTimeout(()=>{let u=this._connRequestQueue.indexOf(T);u>=0&&this._connRequestQueue.splice(u,1),this._enableStatistics&&(this._totalRequestTimeouts+=1,this._updateWaitStatistics(T));try{Re.throwErr(Re.ERR_CONN_REQUEST_TIMEOUT,this._queueTimeout)}catch(h){a(h)}},this._queueTimeout)),this._connRequestQueue.push(T),this._enableStatistics&&(T.enqueuedTime=Date.now(),this._totalRequestsEnqueued+=1,this._maximumQueueLength=Math.max(this._maximumQueueLength,this._connRequestQueue.length))}),this._checkPoolOpen(!0)),this._connectionsOut+=1;try{let o=new E1;o._impl=await this._impl.getConnection(n),o._pool=this;let a=n.tag||"";if(typeof this.sessionCallback=="function"&&(o._impl._newSession||o.tag!=a))try{await new Promise((T,u)=>{this.sessionCallback(o,a,function(h){h?u(h):T()})})}catch(T){throw await o.close({drop:!0}),T}return o.on("_afterConnClose",()=>{this._connectionsOut-=1,this.emit("_checkRequestQueue"),this._connectionsOut==0&&this.emit("_allCheckedIn")}),o}catch(o){throw this._connectionsOut-=1,this._enableStatistics&&(this._totalFailedRequests+=1),this.emit("_checkRequestQueue"),o}}getStatistics(){return this._checkPoolOpen(!1),this._enableStatistics!==!0?null:new N1(this)}get homogeneous(){return this._homogeneous}logStatistics(){let e=this.getStatistics();e===null&&Re.throwErr(Re.ERR_POOL_STATISTICS_DISABLED),e.logStatistics()}get poolAlias(){return this._poolAlias}get poolIncrement(){return this._impl.getPoolIncrement()}get poolMax(){return this._impl.getPoolMax()}get poolMaxPerShard(){return this._impl.getPoolMaxPerShard()}get poolMin(){return this._impl.getPoolMin()}get poolPingInterval(){return this._impl.getPoolPingInterval()}get poolTimeout(){return this._impl.getPoolTimeout()}get queueMax(){return this._queueMax}get queueTimeout(){return this._queueTimeout}async reconfigure(e){Re.assertArgCount(arguments,1,1),Re.assertParamValue(Xn.isObject(e)),Re.assertParamPropUnsignedInt(e,1,"queueMax"),Re.assertParamPropUnsignedInt(e,1,"queueTimeout"),Re.assertParamPropBool(e,1,"enableStatistics"),Re.assertParamPropBool(e,1,"resetStatistics"),Re.assertParamPropUnsignedInt(e,1,"poolMin"),Re.assertParamPropUnsignedInt(e,1,"poolMax"),Re.assertParamPropUnsignedInt(e,1,"poolMaxPerShard"),Re.assertParamPropUnsignedInt(e,1,"poolIncrement"),Re.assertParamPropInt(e,1,"poolPingInterval"),Re.assertParamPropUnsignedInt(e,1,"poolTimeout"),Re.assertParamPropUnsignedInt(e,1,"stmtCacheSize"),Re.assertParamPropBool(e,1,"sodaMetaDataCache"),this._checkPoolOpen(!1),this._status=zn.POOL_STATUS_RECONFIGURING;try{await this._impl.reconfigure(e),(e.resetStatistics==!0||e.enableStatistics==!0&&this._enableStatistics==!1)&&this._resetStatistics(),e.queueMax!==void 0&&(this._queueMax=e.queueMax),e.queueTimeout!==void 0&&(this._queueTimeout=e.queueTimeout),e.enableStatistics!==void 0&&(this._enableStatistics=e.enableStatistics)}finally{this._status=zn.POOL_STATUS_OPEN}this.emit("_checkRequestQueue")}get sessionCallback(){return this._sessionCallback}async setAccessToken(e){Re.assertArgCount(arguments,1,1),Re.assertParamValue(Xn.isObject(e),1),Re.assertParamPropString(e,1,"token"),Re.assertParamPropString(e,1,"privateKey"),await this._impl.setAccessToken(e)}get sodaMetaDataCache(){return this._impl.getSodaMetaDataCache()}get status(){return this._status}get stmtCacheSize(){return this._impl.getStmtCacheSize()}get user(){return this._user}};_(ru,"Pool");var fr=ru;fr.prototype.close=Xn.callbackify(fr.prototype.close);fr.prototype.getConnection=Xn.callbackify(fr.prototype.getConnection);fr.prototype.reconfigure=Xn.callbackify(fr.prototype.reconfigure);fr.prototype.setAccessToken=Xn.callbackify(fr.prototype.setAccessToken);fr.prototype.terminate=fr.prototype.close;fr.prototype._logStats=fr.prototype.logStatistics;iP.exports=fr});var At=Y((Ak,_P)=>{"use strict";var{Buffer:aP}=require("buffer"),bt=ir();_P.exports={BIND_IN:bt.BIND_IN,BIND_INOUT:bt.BIND_INOUT,BIND_OUT:bt.BIND_OUT,CLIENT_VERSION:bt.VERSION_MAJOR<<24|bt.VERSION_MINOR<<20|bt.VERSION_PATCH<<12,CSFRM_IMPLICIT:bt.CSFRM_IMPLICIT,CSFRM_NCHAR:bt.CSFRM_NCHAR,DRIVER_NAME:bt.DEFAULT_DRIVER_NAME+" thn",PURITY_DEFAULT:bt.PURITY_DEFAULT,PURITY_NEW:bt.PURITY_NEW,PURITY_SELF:bt.PURITY_SELF,SYSASM:bt.SYSASM,SYSBKP:bt.SYSBKP,SYSDBA:bt.SYSDBA,SYSDG:bt.SYSDG,SYSKM:bt.SYSKM,SYSOPER:bt.SYSOPER,SYSRAC:bt.SYSRAC,AUTH_MODE_DEFAULT:0,AUTH_MODE_PRELIM:8,AUTH_MODE_SYSASM:32768,AUTH_MODE_SYSBKP:131072,AUTH_MODE_SYSDBA:2,AUTH_MODE_SYSDGD:262144,AUTH_MODE_SYSKMT:524288,AUTH_MODE_SYSOPER:4,AUTH_MODE_SYSRAC:1048576,TNS_AUTH_MODE_LOGON:1,TNS_AUTH_MODE_CHANGE_PASSWORD:2,TNS_AUTH_MODE_SYSDBA:32,TNS_AUTH_MODE_SYSOPER:64,TNS_AUTH_MODE_PRELIM:128,TNS_AUTH_MODE_WITH_PASSWORD:256,TNS_AUTH_MODE_SYSASM:4194304,TNS_AUTH_MODE_SYSBKP:16777216,TNS_AUTH_MODE_SYSDGD:33554432,TNS_AUTH_MODE_SYSKMT:67108864,TNS_AUTH_MODE_SYSRAC:134217728,TNS_AUTH_MODE_IAM_TOKEN:536870912,TNS_PACKET_TYPE_CONNECT:1,TNS_PACKET_TYPE_ACCEPT:2,TNS_PACKET_TYPE_REFUSE:4,TNS_PACKET_TYPE_REDIRECT:5,TNS_PACKET_TYPE_DATA:6,TNS_PACKET_TYPE_RESEND:11,TNS_PACKET_TYPE_MARKER:12,TNS_PACKET_TYPE_CONTROL:14,TNS_MARKER_TYPE_BREAK:1,TNS_MARKER_TYPE_RESET:2,TNS_DATA_TYPE_DEFAULT:0,TNS_DATA_TYPE_VARCHAR:1,TNS_DATA_TYPE_NUMBER:2,TNS_DATA_TYPE_BINARY_INTEGER:3,TNS_DATA_TYPE_FLOAT:4,TNS_DATA_TYPE_STR:5,TNS_DATA_TYPE_VNU:6,TNS_DATA_TYPE_PDN:7,TNS_DATA_TYPE_LONG:8,TNS_DATA_TYPE_VCS:9,TNS_DATA_TYPE_TIDDEF:10,TNS_DATA_TYPE_ROWID:11,TNS_DATA_TYPE_DATE:12,TNS_DATA_TYPE_VBI:15,TNS_DATA_TYPE_RAW:23,TNS_DATA_TYPE_LONG_RAW:24,TNS_DATA_TYPE_UB2:25,TNS_DATA_TYPE_UB4:26,TNS_DATA_TYPE_SB1:27,TNS_DATA_TYPE_SB2:28,TNS_DATA_TYPE_SB4:29,TNS_DATA_TYPE_SWORD:30,TNS_DATA_TYPE_UWORD:31,TNS_DATA_TYPE_PTRB:32,TNS_DATA_TYPE_PTRW:33,TNS_DATA_TYPE_OER8:290,TNS_DATA_TYPE_FUN:291,TNS_DATA_TYPE_AUA:292,TNS_DATA_TYPE_RXH7:293,TNS_DATA_TYPE_NA6:294,TNS_DATA_TYPE_OAC:39,TNS_DATA_TYPE_AMS:40,TNS_DATA_TYPE_BRN:41,TNS_DATA_TYPE_BRP:298,TNS_DATA_TYPE_BRV:299,TNS_DATA_TYPE_KVA:300,TNS_DATA_TYPE_CLS:301,TNS_DATA_TYPE_CUI:302,TNS_DATA_TYPE_DFN:303,TNS_DATA_TYPE_DQR:304,TNS_DATA_TYPE_DSC:305,TNS_DATA_TYPE_EXE:306,TNS_DATA_TYPE_FCH:307,TNS_DATA_TYPE_GBV:308,TNS_DATA_TYPE_GEM:309,TNS_DATA_TYPE_GIV:310,TNS_DATA_TYPE_OKG:311,TNS_DATA_TYPE_HMI:312,TNS_DATA_TYPE_INO:313,TNS_DATA_TYPE_LNF:315,TNS_DATA_TYPE_ONT:316,TNS_DATA_TYPE_OPE:317,TNS_DATA_TYPE_OSQ:318,TNS_DATA_TYPE_SFE:319,TNS_DATA_TYPE_SPF:320,TNS_DATA_TYPE_VSN:321,TNS_DATA_TYPE_UD7:322,TNS_DATA_TYPE_DSA:323,TNS_DATA_TYPE_UIN:68,TNS_DATA_TYPE_PIN:327,TNS_DATA_TYPE_PFN:328,TNS_DATA_TYPE_PPT:329,TNS_DATA_TYPE_STO:331,TNS_DATA_TYPE_ARC:333,TNS_DATA_TYPE_MRS:334,TNS_DATA_TYPE_MRT:335,TNS_DATA_TYPE_MRG:336,TNS_DATA_TYPE_MRR:337,TNS_DATA_TYPE_MRC:338,TNS_DATA_TYPE_VER:339,TNS_DATA_TYPE_LON2:340,TNS_DATA_TYPE_INO2:341,TNS_DATA_TYPE_ALL:342,TNS_DATA_TYPE_UDB:343,TNS_DATA_TYPE_AQI:344,TNS_DATA_TYPE_ULB:345,TNS_DATA_TYPE_ULD:346,TNS_DATA_TYPE_SLS:91,TNS_DATA_TYPE_SID:348,TNS_DATA_TYPE_NA7:349,TNS_DATA_TYPE_LVC:94,TNS_DATA_TYPE_LVB:95,TNS_DATA_TYPE_CHAR:96,TNS_DATA_TYPE_AVC:97,TNS_DATA_TYPE_AL7:354,TNS_DATA_TYPE_K2RPC:355,TNS_DATA_TYPE_BINARY_FLOAT:100,TNS_DATA_TYPE_BINARY_DOUBLE:101,TNS_DATA_TYPE_CURSOR:102,TNS_DATA_TYPE_RDD:104,TNS_DATA_TYPE_XDP:359,TNS_DATA_TYPE_OSL:106,TNS_DATA_TYPE_OKO8:363,TNS_DATA_TYPE_EXT_NAMED:108,TNS_DATA_TYPE_INT_NAMED:109,TNS_DATA_TYPE_EXT_REF:110,TNS_DATA_TYPE_INT_REF:111,TNS_DATA_TYPE_CLOB:112,TNS_DATA_TYPE_BLOB:113,TNS_DATA_TYPE_BFILE:114,TNS_DATA_TYPE_CFILE:115,TNS_DATA_TYPE_RSET:116,TNS_DATA_TYPE_CWD:117,TNS_DATA_TYPE_JSON:119,TNS_DATA_TYPE_NEW_OAC:120,TNS_DATA_TYPE_UD12:380,TNS_DATA_TYPE_AL8:381,TNS_DATA_TYPE_LFOP:382,TNS_DATA_TYPE_FCRT:383,TNS_DATA_TYPE_DNY:384,TNS_DATA_TYPE_OPR:385,TNS_DATA_TYPE_PLS:386,TNS_DATA_TYPE_XID:387,TNS_DATA_TYPE_TXN:388,TNS_DATA_TYPE_DCB:389,TNS_DATA_TYPE_CCA:390,TNS_DATA_TYPE_WRN:391,TNS_DATA_TYPE_TLH:393,TNS_DATA_TYPE_TOH:394,TNS_DATA_TYPE_FOI:395,TNS_DATA_TYPE_SID2:396,TNS_DATA_TYPE_TCH:397,TNS_DATA_TYPE_PII:398,TNS_DATA_TYPE_PFI:399,TNS_DATA_TYPE_PPU:400,TNS_DATA_TYPE_PTE:401,TNS_DATA_TYPE_CLV:146,TNS_DATA_TYPE_RXH8:404,TNS_DATA_TYPE_N12:405,TNS_DATA_TYPE_AUTH:406,TNS_DATA_TYPE_KVAL:407,TNS_DATA_TYPE_DTR:152,TNS_DATA_TYPE_DUN:153,TNS_DATA_TYPE_DOP:154,TNS_DATA_TYPE_VST:155,TNS_DATA_TYPE_ODT:156,TNS_DATA_TYPE_FGI:413,TNS_DATA_TYPE_DSY:414,TNS_DATA_TYPE_DSYR8:415,TNS_DATA_TYPE_DSYH8:416,TNS_DATA_TYPE_DSYL:417,TNS_DATA_TYPE_DSYT8:418,TNS_DATA_TYPE_DSYV8:419,TNS_DATA_TYPE_DSYP:420,TNS_DATA_TYPE_DSYF:421,TNS_DATA_TYPE_DSYK:422,TNS_DATA_TYPE_DSYY:423,TNS_DATA_TYPE_DSYQ:424,TNS_DATA_TYPE_DSYC:425,TNS_DATA_TYPE_DSYA:426,TNS_DATA_TYPE_OT8:427,TNS_DATA_TYPE_DOL:172,TNS_DATA_TYPE_DSYTY:429,TNS_DATA_TYPE_AQE:430,TNS_DATA_TYPE_KV:431,TNS_DATA_TYPE_AQD:432,TNS_DATA_TYPE_AQ8:433,TNS_DATA_TYPE_TIME:178,TNS_DATA_TYPE_TIME_TZ:179,TNS_DATA_TYPE_TIMESTAMP:180,TNS_DATA_TYPE_TIMESTAMP_TZ:181,TNS_DATA_TYPE_INTERVAL_YM:182,TNS_DATA_TYPE_INTERVAL_DS:183,TNS_DATA_TYPE_EDATE:184,TNS_DATA_TYPE_ETIME:185,TNS_DATA_TYPE_ETTZ:186,TNS_DATA_TYPE_ESTAMP:187,TNS_DATA_TYPE_ESTZ:188,TNS_DATA_TYPE_EIYM:189,TNS_DATA_TYPE_EIDS:190,TNS_DATA_TYPE_RFS:449,TNS_DATA_TYPE_RXH10:450,TNS_DATA_TYPE_DCLOB:195,TNS_DATA_TYPE_DBLOB:196,TNS_DATA_TYPE_DBFILE:197,TNS_DATA_TYPE_DJSON:198,TNS_DATA_TYPE_KPN:454,TNS_DATA_TYPE_KPDNR:455,TNS_DATA_TYPE_DSYD:456,TNS_DATA_TYPE_DSYS:457,TNS_DATA_TYPE_DSYR:458,TNS_DATA_TYPE_DSYH:459,TNS_DATA_TYPE_DSYT:460,TNS_DATA_TYPE_DSYV:461,TNS_DATA_TYPE_AQM:462,TNS_DATA_TYPE_OER11:463,TNS_DATA_TYPE_UROWID:208,TNS_DATA_TYPE_AQL:466,TNS_DATA_TYPE_OTC:467,TNS_DATA_TYPE_KFNO:468,TNS_DATA_TYPE_KFNP:469,TNS_DATA_TYPE_KGT8:470,TNS_DATA_TYPE_RASB4:471,TNS_DATA_TYPE_RAUB2:472,TNS_DATA_TYPE_RAUB1:473,TNS_DATA_TYPE_RATXT:474,TNS_DATA_TYPE_RSSB4:475,TNS_DATA_TYPE_RSUB2:476,TNS_DATA_TYPE_RSUB1:477,TNS_DATA_TYPE_RSTXT:478,TNS_DATA_TYPE_RIDL:479,TNS_DATA_TYPE_GLRDD:480,TNS_DATA_TYPE_GLRDG:481,TNS_DATA_TYPE_GLRDC:482,TNS_DATA_TYPE_OKO:483,TNS_DATA_TYPE_DPP:484,TNS_DATA_TYPE_DPLS:485,TNS_DATA_TYPE_DPMOP:486,TNS_DATA_TYPE_TIMESTAMP_LTZ:231,TNS_DATA_TYPE_ESITZ:232,TNS_DATA_TYPE_UB8:233,TNS_DATA_TYPE_STAT:490,TNS_DATA_TYPE_RFX:491,TNS_DATA_TYPE_FAL:492,TNS_DATA_TYPE_CKV:493,TNS_DATA_TYPE_DRCX:494,TNS_DATA_TYPE_KGH:495,TNS_DATA_TYPE_AQO:496,TNS_DATA_TYPE_PNTY:241,TNS_DATA_TYPE_OKGT:498,TNS_DATA_TYPE_KPFC:499,TNS_DATA_TYPE_FE2:500,TNS_DATA_TYPE_SPFP:501,TNS_DATA_TYPE_DPULS:502,TNS_DATA_TYPE_BOOLEAN:252,TNS_DATA_TYPE_AQA:509,TNS_DATA_TYPE_KPBF:510,TNS_DATA_TYPE_TSM:513,TNS_DATA_TYPE_MSS:514,TNS_DATA_TYPE_KPC:516,TNS_DATA_TYPE_CRS:517,TNS_DATA_TYPE_KKS:518,TNS_DATA_TYPE_KSP:519,TNS_DATA_TYPE_KSPTOP:520,TNS_DATA_TYPE_KSPVAL:521,TNS_DATA_TYPE_PSS:522,TNS_DATA_TYPE_NLS:523,TNS_DATA_TYPE_ALS:524,TNS_DATA_TYPE_KSDEVTVAL:525,TNS_DATA_TYPE_KSDEVTTOP:526,TNS_DATA_TYPE_KPSPP:527,TNS_DATA_TYPE_KOL:528,TNS_DATA_TYPE_LST:529,TNS_DATA_TYPE_ACX:530,TNS_DATA_TYPE_SCS:531,TNS_DATA_TYPE_RXH:532,TNS_DATA_TYPE_KPDNS:533,TNS_DATA_TYPE_KPDCN:534,TNS_DATA_TYPE_KPNNS:535,TNS_DATA_TYPE_KPNCN:536,TNS_DATA_TYPE_KPS:537,TNS_DATA_TYPE_APINF:538,TNS_DATA_TYPE_TEN:539,TNS_DATA_TYPE_XSSCS:540,TNS_DATA_TYPE_XSSSO:541,TNS_DATA_TYPE_XSSAO:542,TNS_DATA_TYPE_KSRPC:543,TNS_DATA_TYPE_KVL:560,TNS_DATA_TYPE_SESSGET:563,TNS_DATA_TYPE_SESSREL:564,TNS_DATA_TYPE_XSSDEF:565,TNS_DATA_TYPE_PDQCINV:572,TNS_DATA_TYPE_PDQIDC:573,TNS_DATA_TYPE_KPDQCSTA:574,TNS_DATA_TYPE_KPRS:575,TNS_DATA_TYPE_KPDQIDC:576,TNS_DATA_TYPE_RTSTRM:578,TNS_DATA_TYPE_SESSRET:579,TNS_DATA_TYPE_SCN6:580,TNS_DATA_TYPE_KECPA:581,TNS_DATA_TYPE_KECPP:582,TNS_DATA_TYPE_SXA:583,TNS_DATA_TYPE_KVARR:584,TNS_DATA_TYPE_KPNGN:585,TNS_DATA_TYPE_XSNSOP:590,TNS_DATA_TYPE_XSATTR:591,TNS_DATA_TYPE_XSNS:592,TNS_DATA_TYPE_TXT:593,TNS_DATA_TYPE_XSSESSNS:594,TNS_DATA_TYPE_XSATTOP:595,TNS_DATA_TYPE_XSCREOP:596,TNS_DATA_TYPE_XSDETOP:597,TNS_DATA_TYPE_XSDESOP:598,TNS_DATA_TYPE_XSSETSP:599,TNS_DATA_TYPE_XSSIDP:600,TNS_DATA_TYPE_XSPRIN:601,TNS_DATA_TYPE_XSKVL:602,TNS_DATA_TYPE_XSSSDEF2:603,TNS_DATA_TYPE_XSNSOP2:604,TNS_DATA_TYPE_XSNS2:605,TNS_DATA_TYPE_IMPLRES:611,TNS_DATA_TYPE_OER:612,TNS_DATA_TYPE_UB1ARRAY:613,TNS_DATA_TYPE_SESSSTATE:614,TNS_DATA_TYPE_AC_REPLAY:615,TNS_DATA_TYPE_AC_CONT:616,TNS_DATA_TYPE_KPDNREQ:622,TNS_DATA_TYPE_KPDNRNF:623,TNS_DATA_TYPE_KPNGNC:624,TNS_DATA_TYPE_KPNRI:625,TNS_DATA_TYPE_AQENQ:626,TNS_DATA_TYPE_AQDEQ:627,TNS_DATA_TYPE_AQJMS:628,TNS_DATA_TYPE_KPDNRPAY:629,TNS_DATA_TYPE_KPDNRACK:630,TNS_DATA_TYPE_KPDNRMP:631,TNS_DATA_TYPE_KPDNRDQ:632,TNS_DATA_TYPE_CHUNKINFO:636,TNS_DATA_TYPE_SCN:637,TNS_DATA_TYPE_SCN8:638,TNS_DATA_TYPE_UDS:639,TNS_DATA_TYPE_TNP:640,TNS_TYPE_REP_NATIVE:0,TNS_TYPE_REP_UNIVERSAL:1,TNS_TYPE_REP_ORACLE:10,TNS_MSG_TYPE_PROTOCOL:1,TNS_MSG_TYPE_DATA_TYPES:2,TNS_MSG_TYPE_FUNCTION:3,TNS_MSG_TYPE_ERROR:4,TNS_MSG_TYPE_ROW_HEADER:6,TNS_MSG_TYPE_ROW_DATA:7,TNS_MSG_TYPE_PARAMETER:8,TNS_MSG_TYPE_STATUS:9,TNS_MSG_TYPE_IO_VECTOR:11,TNS_MSG_TYPE_LOB_DATA:14,TNS_MSG_TYPE_WARNING:15,TNS_MSG_TYPE_DESCRIBE_INFO:16,TNS_MSG_TYPE_PIGGYBACK:17,TNS_MSG_TYPE_FLUSH_OUT_BINDS:19,TNS_MSG_TYPE_BIT_VECTOR:21,TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK:23,TNS_MSG_TYPE_IMPLICIT_RESULTSET:27,TNS_MSG_TYPE_ONEWAY_FN:26,TNS_KEYWORD_NUM_CURRENT_SCHEMA:168,TNS_KEYWORD_NUM_EDITION:172,TNS_BIND_USE_INDICATORS:1,TNS_BIND_USE_LENGTH:2,TNS_BIND_ARRAY:64,TNS_BIND_DIR_OUTPUT:16,TNS_BIND_DIR_INPUT:32,TNS_BIND_DIR_INPUT_OUTPUT:48,TNS_EXEC_OPTION_PARSE:1,TNS_EXEC_OPTION_BIND:8,TNS_EXEC_OPTION_DEFINE:16,TNS_EXEC_OPTION_EXECUTE:32,TNS_EXEC_OPTION_FETCH:64,TNS_EXEC_OPTION_COMMIT:256,TNS_EXEC_OPTION_COMMIT_REEXECUTE:1,TNS_EXEC_OPTION_PLSQL_BIND:1024,TNS_EXEC_OPTION_DML_ROWCOUNTS:16384,TNS_EXEC_OPTION_NOT_PLSQL:32768,TNS_EXEC_OPTION_IMPLICIT_RESULTSET:32768,TNS_EXEC_OPTION_DESCRIBE:131072,TNS_EXEC_OPTION_NO_COMPRESSED_FETCH:262144,TNS_EXEC_OPTION_BATCH_ERRORS:524288,TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION:1,TNS_SERVER_PIGGYBACK_OS_PID_MTS:2,TNS_SERVER_PIGGYBACK_TRACE_EVENT:3,TNS_SERVER_PIGGYBACK_SESS_RET:4,TNS_SERVER_PIGGYBACK_SYNC:5,TNS_SERVER_PIGGYBACK_LTXID:7,TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT:8,TNS_SERVER_PIGGYBACK_EXT_SYNC:9,TNS_SESSGET_SESSION_CHANGED:4,TNS_LOB_OP_GET_LENGTH:1,TNS_LOB_OP_READ:2,TNS_LOB_OP_TRIM:32,TNS_LOB_OP_WRITE:64,TNS_LOB_OP_GET_CHUNK_SIZE:16384,TNS_LOB_OP_CREATE_TEMP:272,TNS_LOB_OP_FREE_TEMP:273,TNS_LOB_OP_OPEN:32768,TNS_LOB_OP_CLOSE:65536,TNS_LOB_OP_IS_OPEN:69632,TNS_LOB_OP_ARRAY:524288,TNS_LOB_LOC_OFFSET_FLAG_1:4,TNS_LOB_LOC_OFFSET_FLAG_3:6,TNS_LOB_LOC_OFFSET_FLAG_4:7,TNS_LOB_QLOCATOR_VERSION:4,TNS_LOB_LOC_FLAGS_BLOB:1,TNS_LOB_LOC_FLAGS_VALUE_BASED:32,TNS_LOB_LOC_FLAGS_ABSTRACT:64,TNS_LOB_LOC_FLAGS_INIT:8,TNS_LOB_LOC_FLAGS_TEMP:1,TNS_LOB_LOC_FLAGS_VAR_LENGTH_CHARSET:128,TNS_LOB_OPEN_READ_WRITE:2,TNS_LOB_PREFETCH_FLAG:33554432,TNS_JSON_MAX_LENGTH:32*1024*1024,TNS_JSON_MAGIC_BYTE_1:255,TNS_JSON_MAGIC_BYTE_2:74,TNS_JSON_MAGIC_BYTE_3:90,TNS_JSON_VERSION:1,TNS_JSON_FLAG_HASH_ID_UINT8:256,TNS_JSON_FLAG_HASH_ID_UINT16:512,TNS_JSON_FLAG_NUM_FNAMES_UINT16:1024,TNS_JSON_FLAG_FNAMES_SEG_UINT32:2048,TNS_JSON_FLAG_TINY_NODES_STAT:8192,TNS_JSON_FLAG_TREE_SEG_UINT32:4096,TNS_JSON_FLAG_REL_OFFSET_MODE:1,TNS_JSON_FLAG_INLINE_LEAF:2,TNS_JSON_FLAG_LEN_IN_PCODE:4,TNS_JSON_FLAG_NUM_FNAMES_UINT32:8,TNS_JSON_FLAG_IS_SCALAR:16,TNS_JSON_TYPE_NULL:48,TNS_JSON_TYPE_TRUE:49,TNS_JSON_TYPE_FALSE:50,TNS_JSON_TYPE_STRING_LENGTH_UINT8:51,TNS_JSON_TYPE_NUMBER_LENGTH_UINT8:52,TNS_JSON_TYPE_BINARY_DOUBLE:54,TNS_JSON_TYPE_STRING_LENGTH_UINT16:55,TNS_JSON_TYPE_STRING_LENGTH_UINT32:56,TNS_JSON_TYPE_TIMESTAMP:57,TNS_JSON_TYPE_BINARY_LENGTH_UINT16:58,TNS_JSON_TYPE_BINARY_LENGTH_UINT32:59,TNS_JSON_TYPE_DATE:60,TNS_JSON_TYPE_INTERVAL_YM:61,TNS_JSON_TYPE_INTERVAL_DS:62,TNS_JSON_TYPE_TIMESTAMP_TZ:124,TNS_JSON_TYPE_TIMESTAMP7:125,TNS_JSON_TYPE_BINARY_FLOAT:127,TNS_JSON_TYPE_OBJECT:132,TNS_JSON_TYPE_ARRAY:192,TNS_END_TO_END_ACTION:16,TNS_END_TO_END_CLIENT_IDENTIFIER:1,TNS_END_TO_END_CLIENT_INFO:256,TNS_END_TO_END_DBOP:512,TNS_END_TO_END_MODULE:8,TNS_VERSION_DESIRED:316,TNS_VERSION_MINIMUM:300,TNS_VERSION_MIN_ACCEPTED:315,TNS_VERSION_MIN_LARGE_SDU:315,TNS_SERVICE_OPTIONS:3073,TNS_PROTOCOL_CHARACTERISTICS:20376,TNS_CONNECT_FLAGS:32896,TNS_CAN_RECV_ATTENTION:1024,TNS_CHECK_OOB:1,TNS_FUNC_AUTH_PHASE_ONE:118,TNS_FUNC_AUTH_PHASE_TWO:115,TNS_FUNC_CLOSE_CURSORS:105,TNS_FUNC_COMMIT:14,TNS_FUNC_EXECUTE:94,TNS_FUNC_FETCH:5,TNS_FUNC_LOB_OP:96,TNS_FUNC_LOGOFF:9,TNS_FUNC_PING:147,TNS_FUNC_ROLLBACK:15,TNS_FUNC_SET_END_TO_END_ATTR:135,TNS_FUNC_REEXECUTE:4,TNS_FUNC_REEXECUTE_AND_FETCH:78,TNS_FUNC_SET_SCHEMA:152,TNS_FUNC_SESSION_GET:162,TNS_FUNC_SESSION_RELEASE:163,TNS_FUNC_SESSION_STATE:176,TNS_FUNC_CANCEL_ALL:120,TNS_CHARSET_UTF8:873,TNS_CHARSET_UTF16:2e3,TNS_ENCODING_UTF8:"UTF-8",TNS_ENCODING_UTF16:"UTF-16LE",TNS_ENCODING_MULTI_BYTE:1,TNS_ENCODING_CONV_LENGTH:2,TNS_CCAP_SQL_VERSION:0,TNS_CCAP_LOGON_TYPES:4,TNS_CCAP_FIELD_VERSION:7,TNS_CCAP_SERVER_DEFINE_CONV:8,TNS_CCAP_TTC1:15,TNS_CCAP_OCI1:16,TNS_CCAP_TDS_VERSION:17,TNS_CCAP_RPC_VERSION:18,TNS_CCAP_RPC_SIG:19,TNS_CCAP_DBF_VERSION:21,TNS_CCAP_LOB:23,TNS_CCAP_TTC2:26,TNS_CCAP_UB2_DTY:27,TNS_CCAP_OCI2:31,TNS_CCAP_CLIENT_FN:34,TNS_CCAP_TTC3:37,TNS_CCAP_TTC4:40,TNS_CCAP_LOB2:42,TNS_CCAP_MAX:45,TNS_CCAP_SQL_VERSION_MAX:6,TNS_CCAP_FIELD_VERSION_11_2:6,TNS_CCAP_FIELD_VERSION_12_1:7,TNS_CCAP_FIELD_VERSION_12_2:8,TNS_CCAP_FIELD_VERSION_12_2_EXT1:9,TNS_CCAP_FIELD_VERSION_18_1:10,TNS_CCAP_FIELD_VERSION_18_1_EXT_1:11,TNS_CCAP_FIELD_VERSION_19_1:12,TNS_CCAP_FIELD_VERSION_19_1_EXT_1:13,TNS_CCAP_FIELD_VERSION_20_1:14,TNS_CCAP_FIELD_VERSION_20_1_EXT_1:15,TNS_CCAP_FIELD_VERSION_21_1:16,TNS_CCAP_FIELD_VERSION_23_1:17,TNS_CCAP_FIELD_VERSION_23_1_EXT_1:18,TNS_CCAP_FIELD_VERSION_MAX:18,TNS_CCAP_O5LOGON:8,TNS_CCAP_O5LOGON_NP:2,TNS_CCAP_O7LOGON:32,TNS_CCAP_O8LOGON_LONG_IDENTIFIER:64,TNS_CCAP_O9LOGON_LONG_PASSWORD:128,TNS_CCAP_END_OF_CALL_STATUS:1,TNS_CCAP_IND_RCD:8,TNS_CCAP_FAST_BVEC:32,TNS_CCAP_FAST_SESSION_PROPAGATE:16,TNS_CCAP_APP_CTX_PIGGYBACK:128,TNS_CCAP_TDS_VERSION_MAX:3,TNS_CCAP_RPC_VERSION_MAX:7,TNS_CCAP_RPC_SIG_VALUE:3,TNS_CCAP_DBF_VERSION_MAX:1,TNS_CCAP_IMPLICIT_RESULTS:16,TNS_CCAP_BIG_CHUNK_CLR:32,TNS_CCAP_KEEP_OUT_ORDER:128,TNS_CCAP_LOB_UB8_SIZE:1,TNS_CCAP_LOB_ENCS:2,TNS_CCAP_LOB_PREFETCH:64,TNS_CCAP_DRCP:16,TNS_CCAP_ZLNP:4,TNS_CCAP_INBAND_NOTIFICATION:4,TNS_CCAP_CLIENT_FN_MAX:12,TNS_CCAP_LOB2_QUASI:1,TNS_CCAP_LOB2_2GB_PREFETCH:4,TNS_RCAP_COMPAT:0,TNS_RCAP_TTC:6,TNS_RCAP_MAX:7,TNS_RCAP_COMPAT_81:2,TNS_RCAP_TTC_ZERO_COPY:1,TNS_RCAP_TTC_32K:4,TNS_VERIFIER_TYPE_11G_1:45394,TNS_VERIFIER_TYPE_11G_2:6949,TNS_VERIFIER_TYPE_12C:18453,TNS_MAX_SHORT_LENGTH:252,TNS_ESCAPE_CHAR:253,TNS_LONG_LENGTH_INDICATOR:254,TNS_NULL_LENGTH_INDICATOR:255,TNS_MAX_ROWID_LENGTH:18,TNS_DURATION_MID:2147483648,TNS_DURATION_OFFSET:60,TNS_DURATION_SESSION:10,TNS_MAX_LONG_LENGTH:2147483647,TNS_SDU:8192,TNS_TDU:65535,TNS_TXN_IN_PROGRESS:2,TNS_MAX_CONNECT_DATA:230,TNS_CHUNK_SIZE:32767,TNS_MAX_UROWID_LENGTH:3950,TNS_HAS_REGION_ID:128,TZ_HOUR_OFFSET:20,TZ_MINUTE_OFFSET:60,DRCP_DEAUTHENTICATE:2,TNS_OBJ_IS_VERSION_81:128,TNS_OBJ_IS_DEGENERATE:16,TNS_OBJ_IS_COLLECTION:8,TNS_OBJ_NO_PREFIX_SEG:4,TNS_OBJ_IMAGE_VERSION:1,TNS_OBJ_MAX_SHORT_LENGTH:245,TNS_OBJ_ATOMIC_NULL:253,TNS_OBJ_NON_NULL_OID:2,TNS_OBJ_HAS_EXTENT_OID:8,TNS_OBJ_TOP_LEVEL:1,TNS_OBJ_HAS_INDEXES:16,TNS_OBJ_PLSQL_INDEX_TABLE:1,TNS_OBJ_NESTED_TABLE:2,TNS_OBJ_VARRAY:3,TNS_OBJ_TDS_TYPE_CHAR:1,TNS_OBJ_TDS_TYPE_DATE:2,TNS_OBJ_TDS_TYPE_FLOAT:5,TNS_OBJ_TDS_TYPE_NUMBER:6,TNS_OBJ_TDS_TYPE_VARCHAR:7,TNS_OBJ_TDS_TYPE_BOOLEAN:8,TNS_OBJ_TDS_TYPE_RAW:19,TNS_OBJ_TDS_TYPE_TIMESTAMP:21,TNS_OBJ_TDS_TYPE_TIMESTAMP_TZ:23,TNS_OBJ_TDS_TYPE_OBJ:27,TNS_OBJ_TDS_TYPE_COLL:28,TNS_OBJ_TDS_TYPE_CLOB:29,TNS_OBJ_TDS_TYPE_BLOB:30,TNS_OBJ_TDS_TYPE_TIMESTAMP_LTZ:33,TNS_OBJ_TDS_TYPE_BINARY_FLOAT:37,TNS_OBJ_TDS_TYPE_BINARY_DOUBLE:45,TNS_XML_TYPE_LOB:1,TNS_XML_TYPE_STRING:4,TNS_XML_TYPE_FLAG_SKIP_NEXT_4:1048576,TNS_ERR_VAR_NOT_IN_SELECT_LIST:1007,TNS_ERR_INBAND_MESSAGE:12573,TNS_ERR_INVALID_SERVICE_NAME:12514,TNS_ERR_INVALID_SID:12505,TNS_ERR_NO_DATA_FOUND:1403,TNS_ERR_SESSION_SHUTDOWN:12572,PACKET_HEADER_SIZE:8,NUMBER_AS_TEXT_CHARS:172,NUMBER_MAX_DIGITS:40,BUFFER_CHUNK_SIZE:65536,CHUNKED_BYTES_CHUNK_SIZE:65536,TNS_BASE64_ALPHABET_ARRAY:aP.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),TNS_EXTENT_OID:aP.from("00000000000000000000000000010001","hex")}});var co=Y((dk,lP)=>{"use strict";var{Buffer:_o}=require("buffer"),cP=At(),f1=require("crypto"),su=class su extends Error{};_(su,"OutOfPacketsError");var nu=su;function r_(s,e,t,n){for(let o=0;o<t;o++)s[n+t-o-1]=cP.TNS_BASE64_ALPHABET_ARRAY[e&63],e=e>>6;return n+t}_(r_,"_convertBase64");function A1(s){let e=0;if(s.rba!==0||s.partitionID!==0||s.blockNum!==0||s.slotNum!=0){let t=_o.alloc(cP.TNS_MAX_ROWID_LENGTH);return e=r_(t,s.rba,6,e),e=r_(t,s.partitionID,3,e),e=r_(t,s.blockNum,6,e),r_(t,s.slotNum,3,e),t.toString("utf8")}}_(A1,"encodeRowID");function d1(s){let e=f1.randomBytes(_o.byteLength(s)),t=_o.from(s,"utf8"),n=_o.byteLength(s),o=[];for(let a=0;a<n;a++)o.push(e[a]^t[a]);return t.fill(0),{obfuscatedValue:e,value:o}}_(d1,"setObfuscatedValue");function p1(s,e){let t=[];for(let a=0;a<s.length;a++)t.push(s[a]^e[a]);let n=_o.from(t);t.fill(0);let o=n.toString();return n.fill(0),o}_(p1,"getDeobfuscatedValue");lP.exports={encodeRowID:A1,getDeobfuscatedValue:p1,OutOfPacketsError:nu,setObfuscatedValue:d1}});var En=Y((mk,TP)=>{"use strict";var{Buffer:iu}=require("buffer"),Ye=At(),n_=Ee(),cu=class cu{constructor(){this.num=0,this.cursorId=0,this.pos=0,this.rowCount=0,this.message="",this.rowID=null,this.batchErrors}};_(cu,"OracleErrorInfo");var ou=cu,lu=class lu{constructor(e,t="",n="",o=!1,a=!1,T=0,u=0){this.num=e,this.message=t,this.context=n,this.isRecoverable=o,this.isWarning=a,this.code=T,this.offset=u}};_(lu,"Error");var au=lu,Tu=class Tu{constructor(e){this.errorInfo=new ou,this.connection=e,this.messageType=Ye.TNS_MSG_TYPE_FUNCTION,this.functionCode=0,this.callStatus=0,this.flushOutBinds=!1,this.endToEndSeqNum=0,this.errorOccurred=!1,this.isWarning=!1,this.flushOutBinds=!1,this.processedError=!1}preProcess(){}async postProcess(){}writeFunctionHeader(e){e.writeUInt8(this.messageType),e.writeUInt8(this.functionCode),e.writeSeqNum(),e.caps.ttcFieldVersion>=Ye.TNS_CCAP_FIELD_VERSION_23_1_EXT_1&&e.writeUB8(0)}processErrorInfo(e){this.callStatus=e.readUB4(),e.skipUB2(),e.skipUB4(),e.skipUB2(),e.skipUB2(),e.skipUB2(),this.errorInfo.cursorId=e.readUB2(),this.errorInfo.pos=e.readUB2(),e.skipUB1(),e.skipUB1(),e.skipUB2(),e.skipUB2(),e.skipUB1(),e.skipUB1(),this.errorInfo.rowID=e.readRowID(),e.skipUB4(),e.skipUB1(),e.skipUB1(),e.skipUB2(),e.skipUB4(),e.readUB4()>0&&e.skipBytesChunked();let n=e.readUB2();if(n>0){this.errorInfo.batchErrors=[];let o=e.readUInt8();for(let a=0;a<n;a++){o===Ye.TNS_LONG_LENGTH_INDICATOR&&e.skipUB4();let T=e.readUB2();this.errorInfo.batchErrors.push(new au(T))}o===Ye.TNS_LONG_LENGTH_INDICATOR&&e.skipBytes(1)}if(n=e.readUB2(),n>0){let o=e.readUInt8();for(let a=0;a<n;a++)o===Ye.TNS_LONG_LENGTH_INDICATOR&&e.skipUB4(),this.errorInfo.batchErrors[a].offset=e.readUB4();o===Ye.TNS_LONG_LENGTH_INDICATOR&&e.skipBytes(1)}if(n=e.readUB2(),n>0){e.skipBytes(1);for(let o=0;o<n;o++)e.skipUB2(),this.errorInfo.batchErrors[o].message=e.readStr(Ye.CSFRM_IMPLICIT),e.skipBytes(2)}this.errorInfo.num=e.readUB4(),this.errorInfo.rowCount=e.readUB8(),this.errorInfo.num!==0&&(this.errorOccurred=!0,this.errorInfo.message=e.readStr(Ye.CSFRM_IMPLICIT),this.errorInfo.message=this.errorInfo.message.replace(/\n+$/,"")),this.errorInfo.isWarning=!1,this.processedError=!0}processReturnParameter(){}processWarningInfo(e){this.errorInfo.num=e.readUB2();let t=e.readUB2();e.skipUB2(),this.errorInfo.num!=0&&t>0&&(this.errorInfo.message=e.readStr(Ye.CSFRM_IMPLICIT)),this.errorInfo.isWarning=!0}hasMoreData(e){return e.numBytesLeft()>0&&!this.flushOutBinds}decode(e){this.process(e)}process(e){this.flushOutBinds=!1,this.processedError=!1;do{this.savePoint(e);let t=e.readUInt8();this.processMessage(e,t)}while(this.hasMoreData(e))}savePoint(e){e.savePoint()}processMessage(e,t){t===Ye.TNS_MSG_TYPE_ERROR?this.processErrorInfo(e):t===Ye.TNS_MSG_TYPE_WARNING?this.processWarningInfo(e):t===Ye.TNS_MSG_TYPE_STATUS?(this.callStatus=e.readUB4(),this.endToEndSeqNum=e.readUB2()):t===Ye.TNS_MSG_TYPE_PARAMETER?this.processReturnParameter(e):t===Ye.TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK?this.processServerSidePiggyBack(e):n_.throwErr(n_.ERR_UNEXPECTED_MESSAGE_TYPE,t,e.pos,e.packetNum)}processServerSidePiggyBack(e){let t=e.readUInt8();if(t===Ye.TNS_SERVER_PIGGYBACK_LTXID){let n=e.readUB4();n>0&&e.skipBytes(n)}else if(!(t===Ye.TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION||t===Ye.TNS_SERVER_PIGGYBACK_TRACE_EVENT))if(t===Ye.TNS_SERVER_PIGGYBACK_OS_PID_MTS)e.skipUB2(),e.skipBytesChunked();else if(t===Ye.TNS_SERVER_PIGGYBACK_SYNC){e.skipUB2(),e.skipUB1();let n=e.readUB2();e.skipBytes(1);for(let o=0;o<n;o++){let a=e.readUB2();a>0&&e.skipBytesChunked(),a=e.readUB2(),a>0&&e.skipBytesChunked(),e.skipUB2(),e.skipUB4()}}else if(t===Ye.TNS_SERVER_PIGGYBACK_EXT_SYNC)e.skipUB2(),e.skipUB1();else if(t===Ye.TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT){e.skipUB2(),e.skipUB1(1),e.skipUB4(),e.skipUB4(),e.skipUB1();let n=e.readUB4();n>0&&e.skipBytes(n)}else if(t===Ye.TNS_SERVER_PIGGYBACK_SESS_RET){e.skipUB2(),e.skipUB1();let n=e.readUB2();if(n>0){e.skipUB1();for(let a=0;a<n;++a){let T=e.readUB2();T>0&&e.skipBytesChunked(),T=e.readUB2(),T>0&&e.skipBytesChunked(),e.skipUB2()}}e.readUB4()&Ye.TNS_SESSGET_SESSION_CHANGED&&this.connection._drcpEstablishSession&&this.connection.resetStatmentCache(),this.connection._drcpEstablishSession=!1,e.skipUB4(),e.skipUB2()}else n_.throwErr(n_.ERR_UNKOWN_SERVER_SIDE_PIGGYBACK,t)}writePiggybacks(e){this.connection._currentSchemaModified&&this._writeCurrentSchemaPiggyback(e),this.connection._cursorsToClose.size>0&&!this.connection._drcpEstablishSession&&this.writeCloseCursorsPiggyBack(e),(this.connection._actionModified||this.connection._clientIdentifierModified||this.connection._dbopModified||this.connection._clientInfoModified||this.connection._moduleModified)&&this._writeEndToEndPiggybacks(e),this.connection._tempLobsTotalSize>0&&this.writeCloseTempLobsPiggyback(e)}writePiggybackHeader(e,t){e.writeUInt8(Ye.TNS_MSG_TYPE_PIGGYBACK),e.writeUInt8(t),e.writeSeqNum(),e.caps.ttcFieldVersion>=Ye.TNS_CCAP_FIELD_VERSION_23_1_EXT_1&&e.writeUB8(0)}writeCloseCursorsPiggyBack(e){this.writePiggybackHeader(e,Ye.TNS_FUNC_CLOSE_CURSORS),e.writeUInt8(1),e.writeUB4(this.connection._cursorsToClose.size);for(let t of this.connection._cursorsToClose.keys())e.writeUB4(t);this.connection._cursorsToClose.clear()}writeCloseTempLobsPiggyback(e){let t=this.connection._tempLobsToClose,n=Ye.TNS_LOB_OP_FREE_TEMP|Ye.TNS_LOB_OP_ARRAY;this.writePiggybackHeader(e,Ye.TNS_FUNC_LOB_OP),e.writeUInt8(1),e.writeUB4(this.connection._tempLobsTotalSize),e.writeUInt8(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(n),e.writeUInt8(0),e.writeUB4(0),e.writeUB8(0),e.writeUB8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);for(let o of t)e.writeBytes(o);this.connection._tempLobsToClose=[],this.connection._tempLobsTotalSize=0}_writeCurrentSchemaPiggyback(e){this.writePiggybackHeader(e,Ye.TNS_FUNC_SET_SCHEMA),e.writeUInt8(1);let t=iu.byteLength(this.connection.currentSchema);e.writeUB4(t),e.writeBytesWithLength(iu.from(this.connection.currentSchema))}_writeEndToEndPiggybacks(e){let t=0;this.connection._actionModified&&(t|=Ye.TNS_END_TO_END_ACTION),this.connection._clientIdentifierModified&&(t|=Ye.TNS_END_TO_END_CLIENT_IDENTIFIER),this.connection._clientInfoModified&&(t|=Ye.TNS_END_TO_END_CLIENT_INFO),this.connection._moduleModified&&(t|=Ye.TNS_END_TO_END_MODULE),this.connection._dbOpModified&&(t|=Ye.TNS_END_TO_END_DBOP),this.writePiggybackHeader(e,Ye.TNS_FUNC_SET_END_TO_END_ATTR),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(t);let n=this.writeEndEndTraceValue(e,this.connection._clientIdentifier,this.connection._clientIdentifierModified),o=this.writeEndEndTraceValue(e,this.connection._module,this.connection._moduleModified),a=this.writeEndEndTraceValue(e,this.connection._action,this.connection._actionModified);e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);let T=this.writeEndEndTraceValue(e,this.connection._clientInfo,this.connection._clientInfoModified);e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);let u=this.writeEndEndTraceValue(e,this.connection._dbOp,this.connection._dbOpModified);this.connection._clientIdentifierModified&&this.connection._clientIdentifier&&e.writeBytesWithLength(n),this.connection._moduleModified&&this.connection._module&&e.writeBytesWithLength(o),this.connection._actionModified&&this.connection._action&&e.writeBytesWithLength(a),this.connection._clientInfoModified&&this.connection._clientInfo&&e.writeBytesWithLength(T),this.connection._dbOpModified&&this.connection._dbOp&&e.writeBytesWithLength(u),this.connection._actionModified=!1,this.connection._action="",this.connection._clientIdentifierModified=!1,this.connection._clientIdentifier="",this.connection._clientInfoModified=!1,this.connection._clientInfo="",this.connection._dbOpModified=!1,this.connection._dbOp="",this.connection._moduleModified=!1,this.connection._module=""}writeEndEndTraceValue(e,t,n){let o;return n?(e.writeUInt8(1),t?(o=iu.from(t),e.writeUB4(o.length)):e.writeUB4(0)):(e.writeUInt8(0),e.writeUB4(0)),o}};_(Tu,"Message");var _u=Tu;TP.exports=_u});var lo=Y((Rk,EP)=>{"use strict";var{Buffer:In}=require("buffer"),Jt=At(),en=Ee(),m1=Zr(),uP=Dr(),Eu=class Eu{constructor(e){typeof e=="number"?(this.buf=In.alloc(e),this.size=0,this.maxSize=e):(this.buf=e,this.size=this.maxSize=e.length),this.pos=0}_grow(e){en.throwErr(en.ERR_BUFFER_LENGTH_INSUFFICIENT,this.numBytesLeft(),e)}_readBytesWithLength(e){return this.readBytes(e)}_readInteger(e,t,n){let o=!1,a=this.readUInt8();if(a===0)return 0;if(a&128&&(t||en.throwErr(en.ERR_UNEXPECTED_NEGATIVE_INTEGER,this.pos,this.packetNum),o=!0,a=a&127),a>e&&en.throwErr(en.ERR_INTEGER_TOO_LARGE,a,e,this.pos,this.packetNum),n)this.skipBytes(a);else{let u=this.readBytes(a).readUIntBE(0,a);return o?-u:u}}numBytesLeft(){return this.size-this.pos}parseBinaryDouble(e){return e=In.from(e),e[0]&128?e[0]&=127:(e[0]^=255,e[1]^=255,e[2]^=255,e[3]^=255,e[4]^=255,e[5]^=255,e[6]^=255,e[7]^=255),e.readDoubleBE()}parseBinaryFloat(e){return e=In.from(e),e[0]&128?e[0]&=127:(e[0]^=255,e[1]^=255,e[2]^=255,e[3]^=255),e.readFloatBE()}parseOracleDate(e,t=!0){let n=0;e.length>=11&&(n=Math.floor(e.readUInt32BE(7)/(1e3*1e3)));let o=(e[0]-100)*100+e[1]-100;return m1._makeDate(t,o,e[2],e[3],e[4]-1,e[5]-1,e[6]-1,n,0)}parseOracleNumber(e){let t=e[0],n=!!(t&128);n||(t=t^255),t-=193;let o=t*2+2;if(e.length===1)return n?"0":"-1e126";let a=e.length;!n&&e[e.length-1]===102&&(a-=1);let T,u=[];for(let A=1;A<a;A++){n?T=e[A]-1:T=101-e[A];let N=Math.floor(T/10);N===0&&A===1?o-=1:N===10?(u.push("1"),u.push("0"),o+=1):(N!==0||A>1)&&u.push(N.toString()),N=T%10,(N!==0||A<a-1)&&u.push(N.toString())}let h=[];n||h.push("-"),o<=0&&(h.push("."),o<0&&h.push("0".repeat(-o)));for(let A=0;A<u.length;A++)A>0&&A===o&&h.push("."),h.push(u[A]);if(o>u.length)for(let A=u.length;A<o;A++)h.push("0");return h.join("")}readBinaryDouble(){let e=this.readBytesWithLength();return e?this.parseBinaryDouble(e):null}readBinaryFloat(){let e=this.readBytesWithLength();return e?this.parseBinaryFloat(e):null}readBool(){let e=this.readBytesWithLength();return e?e[e.length-1]===1:null}readBytes(e){let t=this.numBytesLeft();e>t&&en.throwErr(en.ERR_UNEXPECTED_END_OF_DATA,e,t);let n=this.buf.subarray(this.pos,this.pos+e);return this.pos+=e,n}readBytesWithLength(){let e=this.readUInt8();return e===0||e===Jt.TNS_NULL_LENGTH_INDICATOR?null:this._readBytesWithLength(e)}readDbObject(){let e={},t=this.readUB4();return t>0&&(e.toid=In.from(this.readBytesWithLength())),t=this.readUB4(),t>0&&(e.oid=In.from(this.readBytesWithLength())),t=this.readUB4(),t>0&&(e.snapshot=In.from(this.readBytesWithLength())),this.skipUB2(),t=this.readUB4(),this.skipUB2(),t>0&&(e.packedData=In.from(this.readBytesWithLength())),e}readInt8(){return this.readBytes(1).readInt8()}readOracleDate(e){let t=this.readBytesWithLength();return t?this.parseOracleDate(t,e):null}readOracleNumber(){let e=this.readBytesWithLength();return e?this.parseOracleNumber(e):null}readSB2(){return this._readInteger(2,!0,!1)}readSB4(){return this._readInteger(4,!0,!1)}readSB8(){return this._readInteger(8,!0,!1)}readStr(e){let t=this.readBytesWithLength();return t?e===Jt.CSFRM_IMPLICIT?t.toString():In.from(t).swap16().toString("utf16le"):null}readUB2(){return this._readInteger(2,!1,!1)}readUB4(){return this._readInteger(4,!1,!1)}readUB8(){return this._readInteger(8,!1,!1)}readUInt8(){return this.readBytes(1)[0]}readUInt16BE(){return this.readBytes(2).readUInt16BE()}readUInt16LE(){return this.readBytes(2).readUInt16LE()}readUInt32BE(){return this.readBytes(4).readUInt32BE()}reserveBytes(e){e>this.numBytesLeft()&&this._grow(this.pos+e);let t=this.buf.subarray(this.pos,this.pos+e);return this.pos+=e,t}skipBytes(e){e>this.numBytesLeft()&&en.throwErr(en.ERR_UNEXPECTED_END_OF_DATA),this.pos+=e}skipSB4(){return this._readInteger(4,!0,!0)}skipUB1(){this.skipBytes(1)}skipUB2(){return this._readInteger(2,!1,!0)}skipUB4(){return this._readInteger(4,!1,!0)}skipUB8(){return this._readInteger(8,!1,!0)}writeBinaryDouble(e){this.writeUInt8(8);let t=this.reserveBytes(8);t.writeDoubleBE(e),t[0]&128?(t[0]^=255,t[1]^=255,t[2]^=255,t[3]^=255,t[4]^=255,t[5]^=255,t[6]^=255,t[7]^=255):t[0]|=128}writeBinaryFloat(e){this.writeUInt8(4);let t=this.reserveBytes(4);t.writeFloatBE(e),t[0]&128?(t[0]^=255,t[1]^=255,t[2]^=255,t[3]^=255):t[0]|=128}writeBytes(e){let t=0,n=e.length;for(;n>0;){let o=this.numBytesLeft();o===0&&this._grow(this.pos+n);let a=Math.min(o,n);e.copy(this.buf,this.pos,t,t+a),this.pos+=a,t+=a,n-=a}}writeBytesWithLength(e){let t=e.length;if(t<=Jt.TNS_MAX_SHORT_LENGTH)this.writeUInt8(t),t>0&&this.writeBytes(e);else{let n=0;for(this.writeUInt8(Jt.TNS_LONG_LENGTH_INDICATOR);t>0;){let o=Math.min(t,Jt.BUFFER_CHUNK_SIZE);this.writeUB4(o),this.writeBytes(e.subarray(n,n+o)),t-=o,n+=o}this.writeUB4(0)}}writeDbObject(e){this.writeUB4(e.toid.length),this.writeBytesWithLength(e.toid),e.oid?(this.writeUB4(e.oid.length),this.writeBytesWithLength(e.oid)):this.writeUB4(0),this.writeUB4(0),this.writeUB4(0);let t=e._getPackedData();this.writeUB4(t.length),this.writeUB4(e.flags),this.writeBytesWithLength(t)}writeOracleDate(e,t,n=!0){let o,a=t._bufferSizeFactor;a>7&&(o=e.getUTCMilliseconds()*1e3*1e3,o===0&&a<=11&&(a=7)),n&&this.writeUInt8(a);let T=this.reserveBytes(a);if(t===uP.DB_TYPE_DATE||t==uP.DB_TYPE_TIMESTAMP){let u=e.getFullYear();T[0]=Math.trunc(u/100)+100,T[1]=u%100+100,T[2]=e.getMonth()+1,T[3]=e.getDate(),T[4]=e.getHours()+1,T[5]=e.getMinutes()+1,T[6]=e.getSeconds()+1}else{let u=e.getUTCFullYear();T[0]=Math.trunc(u/100)+100,T[1]=u%100+100,T[2]=e.getUTCMonth()+1,T[3]=e.getUTCDate(),T[4]=e.getUTCHours()+1,T[5]=e.getUTCMinutes()+1,T[6]=e.getUTCSeconds()+1}a>7&&(T.writeInt32BE(o,7),a>11&&(T[11]=Jt.TZ_HOUR_OFFSET,T[12]=Jt.TZ_MINUTE_OFFSET))}writeOracleNumber(e){let t=!1;e[0]==="-"&&(t=!0,e=e.substring(1));let n=0,o=e.indexOf("e");o>0&&(n=Number(e.substring(o+1)),e=e.substring(0,o));let a=e.indexOf(".");if(a>0&&(n-=e.length-a-1,e=e.substring(0,a)+e.substring(a+1)),e[0]==="0"&&(e=e.replace(/^0+/,"")),e.length>0&&e[e.length-1]==="0"){let N=e.replace(/0+$/,"");n+=e.length-N.length,e=N}(e.length>Jt.NUMBER_MAX_DIGITS||n>126||n<-129)&&en.throwErr(en.ERR_ORACLE_NUMBER_NO_REPR),(n>0&&n%2===1||n<0&&n%2===-1)&&(n--,e+="0"),e.length%2===1&&(e="0"+e);let T=t&&e.length<Jt.NUMBER_MAX_DIGITS,u=e.length/2,h=(n+e.length)/2+192;t?h=h^255:e.length===0&&n===0&&(h=128);let A=this.reserveBytes(u+2+T);A[0]=u+1+T,A[1]=h;for(let N=0,R=2;N<e.length;N+=2,R++){let g=Number(e.substring(N,N+2));t?A[R]=101-g:A[R]=g+1}T&&(A[A.length-1]=102)}writeQLocator(e){this.writeUB4(40),this.writeUInt8(40),this.writeUInt16BE(38),this.writeUInt16BE(Jt.TNS_LOB_QLOCATOR_VERSION),this.writeUInt8(Jt.TNS_LOB_LOC_FLAGS_VALUE_BASED|Jt.TNS_LOB_LOC_FLAGS_BLOB|Jt.TNS_LOB_LOC_FLAGS_ABSTRACT),this.writeUInt8(Jt.TNS_LOB_LOC_FLAGS_INIT),this.writeUInt16BE(0),this.writeUInt16BE(1),this.writeUInt64BE(e),this.writeUInt16BE(0),this.writeUInt16BE(0),this.writeUInt16BE(0),this.writeUInt64BE(0),this.writeUInt64BE(0)}writeStr(e){this.writeBytes(In.from(e))}writeInt32BE(e){this.reserveBytes(4).writeInt32BE(e)}writeUB4(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):e<=65535?(this.writeUInt8(2),this.writeUInt16BE(e)):(this.writeUInt8(4),this.writeUInt32BE(e))}writeUB8(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):e<=65535?(this.writeUInt8(2),this.writeUInt16BE(e)):e<=4294967295?(this.writeUInt8(4),this.writeUInt32BE(e)):(this.writeUInt8(8),this.writeUInt64BE(e))}writeUInt8(e){let t=this.reserveBytes(1);t[0]=e}writeUInt16BE(e){this.reserveBytes(2).writeUInt16BE(e)}writeUInt32BE(e){this.reserveBytes(4).writeUInt32BE(e)}writeUInt64BE(e){let t=this.reserveBytes(8);t.writeUInt32BE(0),t.writeUInt32BE(e,4)}writeUInt16LE(e){this.reserveBytes(2).writeUInt16LE(e)}};_(Eu,"BaseBuffer");var s_=Eu,hu=class hu extends s_{constructor(e){e?super(e):(super(Jt.BUFFER_CHUNK_SIZE),this.size=this.maxSize)}_grow(e){let t=e%Jt.BUFFER_CHUNK_SIZE;t>0&&(e+=Jt.BUFFER_CHUNK_SIZE-t);let n=In.alloc(e);this.buf.copy(n),this.buf=n,this.maxSize=this.size=e}};_(hu,"GrowableBuffer");var uu=hu;EP.exports={BaseBuffer:s_,GrowableBuffer:uu}});var fu=Y((Dk,hP)=>{"use strict";var{Buffer:Di}=require("buffer"),it=At(),tn=Ee(),ze=Dr(),P1=ba(),{GrowableBuffer:R1}=lo(),Nu=class Nu extends R1{_readBytesWithLength(e){return e===it.TNS_LONG_LENGTH_INDICATOR&&(e=this.readUInt32BE()),this.readBytes(e)}getIsAtomicNull(){let e=this.readUInt8();return e===it.TNS_OBJ_ATOMIC_NULL||e===it.TNS_NULL_LENGTH_INDICATOR?!0:(this.pos-=1,!1)}readHeader(e){if(e.imageFlags=this.readUInt8(),e.imageVersion=this.readUInt8(),this.readLength(),!(e.imageFlags&it.TNS_OBJ_NO_PREFIX_SEG)){let t=this.readLength();this.skipBytes(t)}}readLength(){let e=this.readUInt8();return e!==it.TNS_LONG_LENGTH_INDICATOR?e:this.readUInt32BE()}writeHeader(e){this.writeUInt8(e.imageFlags),this.writeUInt8(e.imageVersion),this.writeUInt8(it.TNS_LONG_LENGTH_INDICATOR),this.writeUInt32BE(0),e._objType.isCollection&&(this.writeUInt8(1),this.writeUInt8(1))}writeLength(e){e<=it.TNS_OBJ_MAX_SHORT_LENGTH?this.writeUInt8(e):(this.writeUInt8(it.TNS_LONG_LENGTH_INDICATOR),this.writeUInt32BE(e))}};_(Nu,"DbObjectPickleBuffer");var i_=Nu,o_=class o_ extends P1{constructor(e,t){if(typeof e=="function"&&(e=e.prototype._objType),super(e),this.packedData=t,this.unpackedAttrs=new Map,t)this.unpackedAssocArray=new Map,this.unpackedAssocKeys=void 0;else if(e){let n=Di.from([0,34,it.TNS_OBJ_NON_NULL_OID,it.TNS_OBJ_HAS_EXTENT_OID]);this.toid=Di.concat([n,e.oid,it.TNS_EXTENT_OID]),this.flags=it.TNS_OBJ_TOP_LEVEL,this.imageFlags=it.TNS_OBJ_IS_VERSION_81,this.imageVersion=it.TNS_OBJ_IMAGE_VERSION,e.isCollection?(this.imageFlags|=it.TNS_OBJ_IS_COLLECTION,e.collectionType===it.TNS_OBJ_PLSQL_INDEX_TABLE?this.unpackedAssocArray=new Map:this.unpackedArray=[]):this.imageFlags|=it.TNS_OBJ_NO_PREFIX_SEG}}_ensureAssocKeys(){this.unpackedAssocKeys||(this.unpackedAssocKeys=[...this.unpackedAssocArray.keys()].sort())}_ensureUnpacked(){this.packedData&&this._unpackData()}_getPackedData(){if(this.packedData)return this.packedData;let e=new i_;e.writeHeader(this),this._packData(e);let t=e.pos;return e.pos=3,e.writeUInt32BE(t),e.buf.subarray(0,t)}_packData(e){let t=this._objType;if(t.isCollection)if(e.writeUInt8(t.collectionFlags),t.collectionType===it.TNS_OBJ_PLSQL_INDEX_TABLE){this._ensureAssocKeys(),e.writeLength(this.unpackedAssocKeys.length);for(let n of this.unpackedAssocKeys)e.writeInt32BE(n),this._packValue(e,t.elementType,t.elementTypeClass,this.unpackedAssocArray.get(n))}else{e.writeLength(this.unpackedArray.length);for(let n of this.unpackedArray)this._packValue(e,t.elementType,t.elementTypeClass,n)}else for(let n of t.attributes)this._packValue(e,n.type,n.typeClass,this.unpackedAttrs.get(n.name))}_packValue(e,t,n,o){if(o==null)n&&!n.prototype.isCollection?e.writeUInt8(it.TNS_OBJ_ATOMIC_NULL):e.writeUInt8(it.TNS_NULL_LENGTH_INDICATOR);else switch(t){case ze.DB_TYPE_CHAR:case ze.DB_TYPE_VARCHAR:e.writeBytesWithLength(Di.from(o));break;case ze.DB_TYPE_NCHAR:case ze.DB_TYPE_NVARCHAR:e.writeBytesWithLength(Di.from(o,"utf16le").swap16());break;case ze.DB_TYPE_NUMBER:e.writeOracleNumber(o.toString());break;case ze.DB_TYPE_BINARY_INTEGER:case ze.DB_TYPE_BOOLEAN:e.writeUInt8(4),e.writeUInt32BE(o);break;case ze.DB_TYPE_RAW:e.writeBytesWithLength(o);break;case ze.DB_TYPE_BINARY_DOUBLE:e.writeBinaryDouble(o);break;case ze.DB_TYPE_BINARY_FLOAT:e.writeBinaryFloat(o);break;case ze.DB_TYPE_DATE:case ze.DB_TYPE_TIMESTAMP:case ze.DB_TYPE_TIMESTAMP_LTZ:case ze.DB_TYPE_TIMESTAMP_TZ:e.writeOracleDate(o,t);break;case ze.DB_TYPE_OBJECT:this._objType.isCollection||o._objType.isCollection?e.writeBytesWithLength(o._getPackedData()):o._packData(e);break;default:tn.throwErr(tn.ERR_NOT_IMPLEMENTED,t)}}_unpackData(){let e=new i_(this.packedData);e.readHeader(this),this._unpackDataFromBuf(e),this.packedData=void 0}_unpackDataFromBuf(e){let t,n,o,a,T=this._objType;if(T.isCollection){T.collectionType===it.TNS_OBJ_PLSQL_INDEX_TABLE?n=new Map:t=[],this.collectionFlags=e.readUInt8();let u=e.readLength();for(let h=0;h<u;h++){T.collectionType===it.TNS_OBJ_PLSQL_INDEX_TABLE&&(o=e.readUInt32BE());let A=this._unpackValue(e,T.elementType,T.elementTypeClass);T.collectionType===it.TNS_OBJ_PLSQL_INDEX_TABLE?n.set(o,A):t.push(A)}}else{a=new Map;for(let u of T.attributes){let h=this._unpackValue(e,u.type,u.typeClass);a.set(u.name,h)}}this.unpackedAttrs=a,this.unpackedArray=t,this.unpackedAssocArray=n}_unpackValue(e,t,n){let o,a,T;switch(t){case ze.DB_TYPE_NUMBER:return T=e.readOracleNumber(),T!==null&&(T=parseFloat(T)),T;case ze.DB_TYPE_BINARY_INTEGER:return e.readBinaryInteger();case ze.DB_TYPE_VARCHAR:case ze.DB_TYPE_CHAR:return e.readStr(it.CSFRM_IMPLICIT);case ze.DB_TYPE_NVARCHAR:case ze.DB_TYPE_NCHAR:return e.readStr(it.CSFRM_NCHAR);case ze.DB_TYPE_RAW:return Di.from(e.readBytesWithLength());case ze.DB_TYPE_BINARY_DOUBLE:return e.readBinaryDouble();case ze.DB_TYPE_BINARY_FLOAT:return e.readBinaryFloat();case ze.DB_TYPE_DATE:case ze.DB_TYPE_TIMESTAMP:return e.readOracleDate(!0);case ze.DB_TYPE_TIMESTAMP_LTZ:case ze.DB_TYPE_TIMESTAMP_TZ:return e.readOracleDate(!1);case ze.DB_TYPE_BOOLEAN:return e.readBool();case ze.DB_TYPE_OBJECT:return o=e.getIsAtomicNull(),o?null:(a=new o_(n),a._objType.isCollection||this._objType.isCollection?a.packedData=Di.from(e.readBytesWithLength()):a._unpackDataFromBuf(e),a);default:tn.throwErr(tn.ERR_NOT_IMPLEMENTED,t)}}append(e){if(this._ensureUnpacked(),this.unpackedArray){let t=this._objType;t.maxNumElements>0&&this.unpackedArray.length>=t.maxNumElements&&tn.throwErr(tn.ERR_INVALID_COLL_INDEX_SET,this.unpackedArray.length,0,t.maxNumElements),this.unpackedArray.push(e)}else{this._ensureAssocKeys();let t;if(this.unpackedAssocKeys.length===0)t=0;else{let n=this.unpackedAssocKeys.length-1;t=this.unpackedAssocKeys[n]+1}this.unpackedAssocArray.set(t,e),this.unpackedAssocKeys.push(t)}}deleteElement(e){this._ensureUnpacked(),this.unpackedArray?(this._objType.collectionType==it.TNS_OBJ_VARRAY&&tn.throwErr(tn.ERR_DELETE_ELEMENTS_OF_VARRAY),this.unpackedArray.splice(e,1)):(this._unpackedAssocKeys=void 0,this.unpackedAssocArray.delete(e))}getAttrValue(e){this._ensureUnpacked();let t=this.unpackedAttrs.get(e.name);return t===void 0?null:t}getElement(e){let t;return this._ensureUnpacked(),this.unpackedArray?t=this.unpackedArray[e]:t=this.unpackedAssocArray.get(e),t===void 0&&tn.throwErr(tn.ERR_INVALID_COLL_INDEX_GET,e),t}getFirstIndex(){if(this._ensureUnpacked(),this.unpackedArray)return 0;if(this.unpackedAssocArray)return this._ensureAssocKeys(),this.unpackedAssocKeys[0]}getKeys(){return this._ensureUnpacked(),this.unpackedArray?Array.from(this.unpackedArray.keys()):this.unpackedAssocArray?(this._ensureAssocKeys(),Array.from(this.unpackedAssocKeys)):[]}getLastIndex(){if(this._ensureUnpacked(),this.unpackedArray){if(this.unpackedArray.length>0)return this.unpackedArray.length-1}else if(this.unpackedAssocArray)return this._ensureAssocKeys(),this.unpackedAssocKeys[this.unpackedAssocKeys.length-1]}getNextIndex(e){if(this._ensureUnpacked(),this.unpackedArray){if(e+1<this.unpackedArray.length)return e+1}else if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys)if(t>e)return t}}getPrevIndex(e){if(this._ensureUnpacked(),this.unpackedArray){if(e>0)return e-1}else if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys.reverse())if(t<e)return t}}getValues(){let e=[];if(this._ensureUnpacked(),this.unpackedArray)return Array.from(this.unpackedArray);if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys)e.push(this.unpackedAssocArray.get(t))}return e}hasElement(e){return this._ensureUnpacked(),this.unpackedArray?e>=0&&e<this.unpackedArray.length:this.unpackedAssocArray.has(e)}setAttrValue(e,t){this._ensureUnpacked(),this.unpackedAttrs.set(e.name,t)}setElement(e,t){if(this._ensureUnpacked(),this.unpackedArray){let n=Math.max(this.unpackedArray.length-1,0);e>n&&tn.throwErr(tn.ERR_INVALID_COLL_INDEX_SET,e,0,n),this.unpackedArray[e]=t}else this.unpackedAssocArray.has(e)||(this.unpackedAssocKeys=void 0),this.unpackedAssocArray.set(e,t)}trim(e){this._ensureUnpacked(),e>0&&(this.unpackedArray=this.unpackedArray.slice(0,this.unpackedArray.length-e))}};_(o_,"ThinDbObjectImpl");var Su=o_;hP.exports=Su});var pu=Y((Ck,SP)=>{"use strict";var{Buffer:To}=require("buffer"),Wt=At(),I1=En(),du=class du extends I1{constructor(e,t){super(e),this.sourceLobImpl=t.sourceLobImpl||null,this.operation=t.operation,this.destLobImpl=t.destLobImpl||null,this.sourceOffset=t.sourceOffset||0,this.destOffset=t.destOffset||0,this.boolFlag=!1,t.data&&(this.data=t.data),this.functionCode=Wt.TNS_FUNC_LOB_OP,this.sendAmount=t.sendAmount,this.amount=t.amount||0}encode(e){this.writeFunctionHeader(e),this.sourceLobImpl===null?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(this.sourceLobImpl._locator.length)),this.destLobImpl===null?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(this.destLobImpl._locator.length)),e.writeUB4(0),e.writeUB4(0),this.operation===Wt.TNS_LOB_OP_CREATE_TEMP?e.writeUInt8(1):e.writeUInt8(0),e.writeUInt8(0),this.operation===Wt.TNS_LOB_OP_CREATE_TEMP||this.operation===Wt.TNS_LOB_OP_IS_OPEN?e.writeUInt8(1):e.writeUInt8(0),e.writeUB4(this.operation),e.writeUInt8(0),e.writeUInt8(0),e.writeUB8(this.sourceOffset),e.writeUB8(this.destOffset),this.sendAmount?e.writeUInt8(1):e.writeUInt8(0);for(let t=0;t<3;t++)e.writeUInt16BE(0);if(this.sourceLobImpl&&e.writeBytes(this.sourceLobImpl._locator),this.destLobImpl&&e.writeBytes(this.destLobImpl._locator),this.operation===Wt.TNS_LOB_OP_CREATE_TEMP&&(this.sourceLobImpl.dbType._csfrm===Wt.CSFRM_NCHAR?(e.caps.checkNCharsetId(),e.writeUB4(Wt.TNS_CHARSET_UTF16)):e.writeUB4(Wt.TNS_CHARSET_UTF8)),this.data){let t;e.writeUInt8(Wt.TNS_MSG_TYPE_LOB_DATA),this.sourceLobImpl.dbType._oraTypeNum===Wt.TNS_DATA_TYPE_BLOB?t=this.data:this.sourceLobImpl.getCsfrm()===Wt.CSFRM_NCHAR?(t=this.data,To.isBuffer(this.data)&&(t=t.toString()),t=To.from(t,Wt.TNS_ENCODING_UTF16).swap16()):t=To.from(this.data),e.writeBytesWithLength(t)}this.sendAmount&&e.writeUB8(this.amount)}processMessage(e,t){if(t===Wt.TNS_MSG_TYPE_LOB_DATA){let n=this.sourceLobImpl.dbType._oraTypeNum,o=e.readBytesWithLength();o!==null&&(n===Wt.TNS_DATA_TYPE_BLOB?o=To.from(o):this.sourceLobImpl.getCsfrm()===Wt.CSFRM_NCHAR?o=To.from(o).swap16().toString("utf16le"):o=o.toString()),this.data=o}else super.processMessage(e,t)}processReturnParameter(e){let t,n,o,a;this.sourceLobImpl!==null&&(a=this.sourceLobImpl._locator.length,t=e.readBytes(a),n=t.slice(0,a),n.copy(this.sourceLobImpl._locator)),this.destLobImpl!==null&&(a=this.destLobImpl._locator.length,t=e.readBytes(a),n=t.slice(0,a),n.copy(this.destLobImpl._locator)),this.operation===Wt.TNS_LOB_OP_CREATE_TEMP&&e.skipUB2(),this.sendAmount&&(this.amount=e.readSB8()),(this.operation===Wt.TNS_LOB_OP_CREATE_TEMP||this.operation===Wt.TNS_LOB_OP_IS_OPEN)&&(o=e.readUB2(),this.boolFlag=o>0)}};_(du,"LobOpMessage");var Au=du;SP.exports=Au});var __=Y((yk,NP)=>{"use strict";var{Buffer:D1}=require("buffer"),g1=Xl(),ar=At(),C1=pu(),a_=Ee(),Pu=class Pu extends g1{_getConnImpl(){return this.conn}async _sendMessage(e){let t=new C1(this.conn,e);return await this.conn._protocol._processMessage(t),e.operation===ar.TNS_LOB_OP_READ?t.data?t.data:null:t.amount}getChunkSize(){return this._chunkSize}async _getChunkSizeAsync(){this.checkConn();let e={operation:ar.TNS_LOB_OP_GET_CHUNK_SIZE,sourceLobImpl:this,sendAmount:!0};this._chunkSize=this._pieceSize=await this._sendMessage(e)}getLength(){return this._length}getPieceSize(){return this._pieceSize}setPieceSize(e){this._pieceSize=e}getType(){return this.dbType}async getData(){return this._length<0&&a_.throwErr(a_.ERR_INVALID_LOB),await this.read(1,this._length)}async read(e,t){this.checkConn();let n={operation:ar.TNS_LOB_OP_READ,sourceLobImpl:this,sourceOffset:e,sendAmount:!0,amount:t||this._pieceSize};return await this._sendMessage(n)}async write(e,t){this.checkConn();let n={operation:ar.TNS_LOB_OP_WRITE,sourceLobImpl:this,sourceOffset:e,data:t};await this._sendMessage(n),this._length+=t.length}getCsfrm(){return this.dbType._csfrm!==ar.CSFRM_NCHAR&&this._locator[ar.TNS_LOB_LOC_OFFSET_FLAG_3]&ar.TNS_LOB_LOC_FLAGS_VAR_LENGTH_CHARSET?ar.CSFRM_NCHAR:this.dbType._csfrm}async create(e,t){this.dirtyLength=!1,this.conn=e,this.dbType=t,this._locator=D1.alloc(40),this._isTempLob=!0,this._length=0;let n={operation:ar.TNS_LOB_OP_CREATE_TEMP,sourceLobImpl:this,amount:ar.TNS_DURATION_SESSION,destOffset:t._oraTypeNum,sourceOffset:t._csfrm,sendAmount:!0};await this._sendMessage(n),await this._getChunkSizeAsync()}checkConn(){this.conn.nscon.connected||a_.throwErr(a_.ERR_LOB_CLOSED)}close(){this.checkConn(),this._isTempLob&&(this.conn._tempLobsToClose.push(this._locator),this.conn._tempLobsTotalSize+=this._locator.length)}init(e,t,n,o,a){this.dirtyLength=!1,this.conn=e,this._locator=t,this._isTempLob=!1,(this._locator[ar.TNS_LOB_LOC_OFFSET_FLAG_4]&ar.TNS_LOB_LOC_FLAGS_TEMP===ar.TNS_LOB_LOC_FLAGS_TEMP||this._locator[ar.TNS_LOB_LOC_OFFSET_FLAG_1]&ar.TNS_LOB_LOC_FLAGS_ABSTRACT===ar.TNS_LOB_LOC_FLAGS_ABSTRACT)&&(this._isTempLob=!0),this.dbType=n,this._length=o,this._chunkSize=a,this._pieceSize=a}};_(Pu,"ThinLobImpl");var mu=Pu;NP.exports=mu});var Du=Y((wk,dP)=>{"use strict";var{Buffer:qs}=require("buffer"),fP=co(),X=At(),O1=En(),y1=fu(),L1=__(),ms=Ee(),wt=Dr(),Iu=class Iu extends O1{constructor(e,t=null,n=null){super(e),this.statement=t,this.options=n,this.offset=0,this.numExecs=1,this.arrayDmlRowCounts=!1,this.requiresDefine=!1,this.rowIndex=t.bufferRowCount||0,this.dmlRowCounts=[],this.batchErrors=!1,this.outVariables=[],this.inFetch=!1,this.parseOnly=!1,this.resultSetsToSetup=[]}processMessage(e,t){t===X.TNS_MSG_TYPE_DESCRIBE_INFO?(e.skipBytesChunked(),this.statement.queryVars=[],this.statement.numQueryVars=0,this.statement.bufferRowCount=0,this.statement.bufferRowIndex=0,this.processDescribeInfo(e,this.resultSet),this.outVariables=this.statement.queryVars):t===X.TNS_MSG_TYPE_ROW_HEADER?this.processRowHeader(e):t===X.TNS_MSG_TYPE_ROW_DATA?this.processRowData(e):t===X.TNS_MSG_TYPE_IMPLICIT_RESULTSET?this.processImplicitResultSet(e):t===X.TNS_MSG_TYPE_BIT_VECTOR?this.processBitVector(e):t===X.TNS_MSG_TYPE_IO_VECTOR?this.processIOVector(e):t===X.TNS_MSG_TYPE_FLUSH_OUT_BINDS?this.flushOutBinds=!0:t===X.TNS_MSG_TYPE_ERROR?this.processErrorInfo(e):super.processMessage(e,t)}hasMoreData(){return!this.processedError&&!this.flushOutBinds}processErrorInfo(e){super.processErrorInfo(e),this.errorInfo.cursorId!==0&&(this.statement.cursorId=this.errorInfo.cursorId),this.statement.isPlSql||(this.statement.rowCount=this.errorInfo.rowCount),this.errorInfo.rowCount>0&&(this.statement.lastRowid=fP.encodeRowID(this.errorInfo.rowID)),this.options.batchErrors=this.errorInfo.batchErrors,this.batchErrors&&this.options.batchErrors===null&&(this.options.batchErrors=[]),this.errorInfo.num===X.TNS_ERR_NO_DATA_FOUND&&this.statement.isQuery?(this.errorInfo.num=0,this.errorOccurred=!1,this.statement.moreRowsToFetch=!1):this.errorInfo.num!==0&&this.errorInfo.cursorId!==0&&(this.connection._addCursorToClose(this.statement.cursorId),this.connection.statementCache.delete(this.statement.sql)),this.errorInfo.batchErrors&&(this.errorOccurred=!1)}processDescribeInfo(e,t){let n=t.statement;e.skipUB4(),n.numQueryVars=e.readUB4(),n.numQueryVars>0&&e.skipUB1(),t.metadata=[];for(let a=0;a<n.numQueryVars;a++){let T=this.processColumnInfo(e,a+1);n.queryVars.push(T),t.metadata.push(T.fetchInfo)}let o=e.readUB4();o>0&&e.skipBytesChunked(),e.skipUB4(),e.skipUB4(),e.skipUB4(),e.skipUB4(),o=e.readUB4(),o>0&&e.skipBytesChunked(),this.resultSetsToSetup.push(t)}processColumnInfo(e,t){let n=e.readUInt8();e.skipUB1();let o=e.readInt8(),a;n===X.TNS_DATA_TYPE_NUMBER||n===X.TNS_DATA_TYPE_INTERVAL_DS||n===X.TNS_DATA_TYPE_TIMESTAMP||n===X.TNS_DATA_TYPE_TIMESTAMP_LTZ||n===X.TNS_DATA_TYPE_TIMESTAMP_TZ?a=e.readSB2():a=e.readInt8();let T=e.readUB4();e.skipUB4(),e.skipUB4();let u,h=e.readUB4();h>0&&(u=qs.from(e.readBytesWithLength())),e.skipUB2(),e.skipUB2();let A=e.readUInt8(),N=e.readUB4();n===X.TNS_DATA_TYPE_RAW&&(N=T),e.caps.ttcFieldVersion>=X.TNS_CCAP_FIELD_VERSION_12_2&&e.skipUB4();let R=!!e.readUInt8();e.skipUB1();let g;h=e.readUB4(),h>0&&(g=e.readStr(X.CSFRM_IMPLICIT));let I;h=e.readUB4(),h>0&&(I=e.readStr(X.CSFRM_IMPLICIT)),h=e.readUB4();let p;h>0&&(p=e.readStr(X.CSFRM_IMPLICIT)),e.skipUB2(),e.skipUB4();let m={name:g,dbType:wt.getTypeByOraTypeNum(n,A),nullable:R};switch(m.dbType){case wt.DB_TYPE_VARCHAR:case wt.DB_TYPE_NVARCHAR:case wt.DB_TYPE_CHAR:case wt.DB_TYPE_NCHAR:case wt.DB_TYPE_RAW:m.byteSize=N;break;case wt.DB_TYPE_NUMBER:m.precision=o;break;case wt.DB_TYPE_TIMESTAMP:case wt.DB_TYPE_TIMESTAMP_TZ:case wt.DB_TYPE_TIMESTAMP_LTZ:m.precision=a;break;case wt.DB_TYPE_OBJECT:m.dbTypeClass=this.connection._getDbObjectType(I,p,void 0,u),m.dbTypeClass.partial&&this.connection._partialDbObjectTypes.push(m.dbTypeClass);break;default:break}return m.dbType===wt.DB_TYPE_NUMBER&&(m.scale=a),{fetchInfo:m,type:m.dbType,maxSize:T,columnNum:t,values:new Array(this.options.fetchArraySize)}}processRowHeader(e){e.skipUB1(),e.skipUB2(),e.skipUB4(),e.skipUB4(),e.skipUB2();let t=e.readUB4();t>0&&(e.skipUB1(),this.getBitVector(e,t)),t=e.readUB4(),t>0&&e.skipBytesChunked()}isDuplicateData(e){if(this.bitVector===null||this.bitVector===void 0)return!1;let t=Math.floor(e/8),n=e%8;return(this.bitVector[t]&1<<n)===0}processRowData(e){let t;for(let[n,o]of this.outVariables.entries())if(o.isArray){o.numElementsInArray=e.readUB4();let a=new Array(o.numElementsInArray).fill(null);for(let T=0;T<o.numElementsInArray;T++)t=this.processColumnData(e,o,T),a[T]=t;o.values[this.rowIndex]=a}else if(this.statement.isReturning){let a=e.readUB4(),T=Array(a).fill(null);for(let u=0;u<a;u++)T[u]=this.processColumnData(e,o,u);o.values[this.rowIndex]=T}else this.isDuplicateData(n)?(this.rowIndex===0&&o.outConverter?t=o.lastRawValue:t=o.values[this.statement.lastRowIndex],o.values[this.rowIndex]=t):(t=this.processColumnData(e,o,this.rowIndex),o.values[this.rowIndex]=t);this.rowIndex++,this.inFetch&&(this.statement.lastRowIndex=this.rowIndex-1,this.statement.bufferRowCount++,this.bitVector=null)}processIOVector(e){let t;e.skipUB1();let n=e.readUB2(),a=e.readUB4()*256+n;e.skipUB4(),e.skipUB2(),t=e.readUB2(),t>0&&e.skipBytes(t),t=e.readUB2(),t>0&&e.skipBytes(t),this.outVariables=[];for(let T=0;T<a;T++){let u=this.statement.bindInfoList[T];u.bindDir=e.readUInt8(),u.bindDir!==X.TNS_BIND_DIR_INPUT&&this.outVariables.push(u.bindVar)}}processColumnData(e,t){let n=t.type,o=n._oraTypeNum,a=n._csfrm,T=t.maxSize,u=null;if(T===0&&o!==X.TNS_DATA_TYPE_LONG&&o!==X.TNS_DATA_TYPE_LONG_RAW&&o!==X.TNS_DATA_TYPE_UROWID)u=null;else if(o===X.TNS_DATA_TYPE_VARCHAR||o===X.TNS_DATA_TYPE_CHAR||o===X.TNS_DATA_TYPE_LONG)a===X.CSFRM_NCHAR&&e.caps.checkNCharsetId(),u=e.readStr(a);else if(o===X.TNS_DATA_TYPE_RAW||o===X.TNS_DATA_TYPE_LONG_RAW)u=e.readBytesWithLength(),u!==null&&(u=qs.from(u));else if(o===X.TNS_DATA_TYPE_NUMBER)u=e.readOracleNumber(),!this.inFetch&&u!==null&&(u=parseFloat(u));else if(o===X.TNS_DATA_TYPE_DATE||o===X.TNS_DATA_TYPE_TIMESTAMP||o===X.TNS_DATA_TYPE_TIMESTAMP_LTZ||o===X.TNS_DATA_TYPE_TIMESTAMP_TZ){let h=o===X.TNS_DATA_TYPE_DATE||o===X.TNS_DATA_TYPE_TIMESTAMP;u=e.readOracleDate(h)}else if(o===X.TNS_DATA_TYPE_ROWID)if(!this.inFetch)u=e.readStr(X.CSFRM_IMPLICIT);else{let h=e.readUInt8();if(AP(h))u=null;else{let A=e.readRowID();u=fP.encodeRowID(A)}}else if(o===X.TNS_DATA_TYPE_UROWID)this.inFetch?u=e.readURowID():u=e.readStr(X.CSFRM_IMPLICIT);else if(o===X.TNS_DATA_TYPE_BINARY_DOUBLE)u=e.readBinaryDouble();else if(o===X.TNS_DATA_TYPE_BINARY_FLOAT)u=e.readBinaryFloat();else if(o===X.TNS_DATA_TYPE_BINARY_INTEGER)u=e.readOracleNumber(),u!==null&&(u=parseFloat(u));else if(o===X.TNS_DATA_TYPE_CURSOR){let h=e.readUInt8();AP(h)?u=null:(u=this.createCursorFromDescribe(e),u.statement.cursorId=e.readUB2(),u.statement.cursorId===0&&t.dir!==X.BIND_IN&&(this.options.nullifyInvalidCursor?u=null:ms.throwErr(ms.ERR_INVALID_REF_CURSOR)))}else if(o===X.TNS_DATA_TYPE_BOOLEAN)u=e.readBool();else if(o===X.TNS_DATA_TYPE_CLOB||o===X.TNS_DATA_TYPE_BLOB){if(e.readUB4()>0){u=new L1;let A=e.readUB8(),N=e.readUB4(),R=qs.from(e.readBytesWithLength());u.init(this.connection,R,n,A,N)}}else if(o===X.TNS_DATA_TYPE_JSON)u=e.readOson();else if(o===X.TNS_DATA_TYPE_INT_NAMED){let h=e.readDbObject();if(h.packedData){let A=t.fetchInfo?t.fetchInfo.dbTypeClass:t.typeClass;u=new y1(A,h.packedData),u.toid=h.toid,u.oid=h.oid}}else ms.throwErr(ms.ERR_UNSUPPORTED_DATA_TYPE,n.num,t.columnNum);if(this.inFetch)(o===X.TNS_DATA_TYPE_LONG||o===X.TNS_DATA_TYPE_LONG_RAW||t.maxSize>e.caps.maxStringSize)&&(e.skipSB4(),e.skipUB4());else{let h=e.readSB4();h<0&&o===X.TNS_DATA_TYPE_BOOLEAN?u=null:h!==0&&u!==null&&ms.throwErr(ms.ERR_INSUFFICIENT_BUFFER_FOR_BINDS)}return u}processReturnParameter(e){let t=0,n,o=e.readUB2();for(let T=0;T<o;T++)e.skipUB4();let a=e.readUB2();a>0&&e.skipBytes(a),o=e.readUB2();for(let T=0;T<o;T++)a=e.readUB2(),a>0&&(n=e.readStr(X.CSFRM_IMPLICIT)),a=e.readUB2(),a>0&&e.skipBytesChunked(),t=e.readUB2(),t===X.TNS_KEYWORD_NUM_CURRENT_SCHEMA?this.connection.currentSchema=n:t===X.TNS_KEYWORD_NUM_EDITION&&(this.connection._edition=n);if(a=e.readUB2(),a>0&&e.skip(a),this.arrayDmlRowCounts){let T=e.readUB4(),u=this.options.dmlRowCounts=[];for(let h=0;h<T;h++){let A=e.readUB8();u.push(A)}}}process(e){this.bitVector=this.savedBitVector,super.process(e)}savePoint(e){this.savedBitVector=this.bitVector,super.savePoint(e)}async postProcess(){if(this.outVariables)for(let e of this.outVariables)if(e.isArray)for(let t=0;t<e.numElementsInArray;t++)e.outConverter&&(e.values[0][t]=await e.outConverter(e.values[0][t]));else e.outConverter&&(e.values[0]=await e.outConverter(e.values[0]));await this.connection._populatePartialDbObjectTypes();for(let e of this.resultSetsToSetup){e._setup(this.options,e.metadata);for(let t of e.statement.queryVars)(t.type===wt.DB_TYPE_CLOB||t.type===wt.DB_TYPE_NCLOB||t.type===wt.DB_TYPE_BLOB||t.type===wt.DB_TYPE_JSON)&&(t.type!==t.fetchInfo.fetchType&&(t.type=t.fetchInfo.fetchType,t.maxSize=X.TNS_MAX_LONG_LENGTH),e.statement.requiresDefine=!0,e.statement.noPrefetch=!0)}}preProcess(){if(this.statement.isReturning&&!this.parseOnly){this.outVariables=[];for(let e of this.statement.bindInfoList)e.isReturnBind&&this.outVariables.push(e.bindVar)}if(this.statement.isQuery&&(this.inFetch=!0,this.statement.queryVars)){this.outVariables=[];for(let e=0;e<this.statement.queryVars.length;e++)this.outVariables.push(this.statement.queryVars[e])}}processBitVector(e){this.numColumnsSent=e.readUB2();let t=Math.floor(this.statement.numQueryVars/8);this.statement.numQueryVars%8>0&&(t+=1),this.getBitVector(e,t)}getBitVector(e,t){this.bitVector=qs.from(e.readBytes(t))}processBindParams(e,t){let n=[],o=[];for(let a of t)a.isReturnBind||o.push(a),n.push(a.bindVar);return this.writeColumnMetadata(e,n),o}writeColumnMetadata(e,t){for(let n of t){let o=n.type._oraTypeNum,a=n.maxSize||n.type._bufferSizeFactor,T=0;n.type._csfrm===X.CSFRM_NCHAR&&(a*=n.type._bufferSizeFactor),[X.TNS_DATA_TYPE_ROWID,X.TNS_DATA_TYPE_UROWID].includes(o)&&(o=X.TNS_DATA_TYPE_VARCHAR,a=X.TNS_MAX_UROWID_LENGTH);let u=X.TNS_BIND_USE_INDICATORS;n.isArray&&(u|=X.TNS_BIND_ARRAY);let h=0;if(n.type===wt.DB_TYPE_BLOB||n.type===wt.DB_TYPE_CLOB||n.type===wt.DB_TYPE_NCLOB?h=X.TNS_LOB_PREFETCH_FLAG:n.type===wt.DB_TYPE_JSON&&(h=X.TNS_LOB_PREFETCH_FLAG,a=T=X.TNS_JSON_MAX_LENGTH),e.writeUInt8(o),e.writeUInt8(u),e.writeUInt8(0),e.writeUInt8(0),a>e.caps.maxStringSize?e.writeUB4(X.TNS_MAX_LONG_LENGTH):e.writeUB4(a),n.isArray?e.writeUB4(n.maxArraySize):e.writeUB4(0),e.writeUB4(h),n.objType){let A=n.objType;e.writeUB4(A.oid.length),e.writeBytesWithLength(A.oid),e.writeUB4(A.version)}else e.writeUB4(0),e.writeUB4(0);n.type._csfrm!==0?e.writeUB4(X.TNS_CHARSET_UTF8):e.writeUB4(0),e.writeUInt8(n.type._csfrm),e.writeUB4(T),e.caps.ttcFieldVersion>=X.TNS_CCAP_FIELD_VERSION_12_2&&e.writeUB4(0)}}writeBindParamsRow(e,t,n){let o=this.offset,a=!1;for(let T of t){if(T.isReturnBind)continue;let u=T.bindVar;if(u.isArray){let h=u.values.length;e.writeUB4(h);for(let A=0;A<h;A++)this.writeBindParamsColumn(e,u,u.values[A])}else u.maxSize>e.caps.maxStringSize?a=!0:this.writeBindParamsColumn(e,u,u.values[n+o])}if(a)for(let T of t){if(T.isReturnBind)continue;let u=T.bindVar;u.maxSize>e.caps.maxStringSize&&this.writeBindParamsColumn(e,u,u.values[n+o])}}writeBindParamsColumn(e,t,n){let o=t.type._oraTypeNum,a;if(n==null&&o!==X.TNS_DATA_TYPE_CURSOR&&o!==X.TNS_DATA_TYPE_JSON)o===X.TNS_DATA_TYPE_BOOLEAN?(e.writeUInt8(X.TNS_ESCAPE_CHAR),e.writeUInt8(1)):o===X.TNS_DATA_TYPE_INT_NAMED?(e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(X.TNS_OBJ_TOP_LEVEL)):e.writeUInt8(0);else if(o===X.TNS_DATA_TYPE_NUMBER||o===X.TNS_DATA_TYPE_BINARY_INTEGER)typeof n=="boolean"?a=n?"1":"0":a=n.toString(),e.writeOracleNumber(a);else if(o===X.TNS_DATA_TYPE_VARCHAR||o===X.TNS_DATA_TYPE_CHAR||o===X.TNS_DATA_TYPE_LONG||o===X.TNS_DATA_TYPE_RAW||o===X.TNS_DATA_TYPE_LONG_RAW)t.type._csfrm===X.CSFRM_NCHAR?(e.caps.checkNCharsetId(),n=qs.from(n,X.TNS_ENCODING_UTF16).swap16()):n=qs.from(n),e.writeBytesWithLength(n);else if(o===X.TNS_DATA_TYPE_DATE||o===X.TNS_DATA_TYPE_TIMESTAMP||o===X.TNS_DATA_TYPE_TIMESTAMP_TZ||o===X.TNS_DATA_TYPE_TIMESTAMP_LTZ)e.writeOracleDate(n,t.type);else if(o===X.TNS_DATA_TYPE_BINARY_DOUBLE)e.writeBinaryDouble(n);else if(o===X.TNS_DATA_TYPE_BINARY_FLOAT)e.writeBinaryFloat(n);else if(o===X.TNS_DATA_TYPE_CURSOR){let T=n;n||(T=this.connection._createResultSet()),T.statement.cursorId===0?(e.writeUInt8(1),e.writeUInt8(0)):(e.writeUB4(1),e.writeUB4(T.statement.cursorId))}else if(o===X.TNS_DATA_TYPE_BOOLEAN)n?(e.writeUInt8(2),e.writeUInt16BE(257)):e.writeUInt16BE(256);else if(o===X.TNS_DATA_TYPE_CLOB||o===X.TNS_DATA_TYPE_BLOB)e.writeUB4(n._locator.length),e.writeBytesWithLength(n._locator);else if([X.TNS_DATA_TYPE_ROWID,X.TNS_DATA_TYPE_UROWID].includes(o))e.writeBytesWithLength(qs.from(n));else if(o===X.TNS_DATA_TYPE_JSON)e.writeOson(n);else if(o===X.TNS_DATA_TYPE_INT_NAMED)e.writeDbObject(n);else{let T=`Binding data of type ${t.type}`;ms.throwErr(ms.ERR_NOT_IMPLEMENTED,T)}}createCursorFromDescribe(e){let t=this.connection._createResultSet(this.options);return t.options.moreRowsToFetch=!0,t.statement.isQuery=!0,t.statement.requiresFullExecute=!0,this.processDescribeInfo(e,t),t}processImplicitResultSet(e){this.options.implicitResultSet=[];let t=e.readUB4();for(let n=0;n<t;n++){let o=e.readUInt8();e.skipBytes(o);let a=this.createCursorFromDescribe(e);a.statement.cursorId=e.readUB2(),this.options.implicitResultSet.push(a)}}};_(Iu,"MessageWithData");var Ru=Iu,AP=_(s=>s===0||s===X.TNS_NULL_LENGTH_INDICATOR,"isNullLength");dP.exports=Ru});var Ou=Y((Uk,mP)=>{"use strict";var w1=Du(),lt=At(),pP=Ee(),Cu=class Cu extends w1{constructor(e,t,n,o){super(e,t,n),!o&&t.isQuery&&(o=e._createResultSet(n,t)),this.resultSet=o,this.functionCode=lt.TNS_FUNC_EXECUTE,this.bindParams=void 0,this.currentRow=0}writeExecuteMessage(e){let t=0,n=0,o=0,a=1,T=this.statement,u=T.bindInfoList;if(!T.requiresDefine&&!this.parseOnly&&u&&(o=u.length),T.requiresDefine?t|=lt.TNS_EXEC_OPTION_DEFINE:!this.parseOnly&&T.sql&&(n=lt.TNS_EXEC_OPTION_IMPLICIT_RESULTSET,t|=lt.TNS_EXEC_OPTION_EXECUTE),(T.cursorId===0||T.isDdl)&&(t|=lt.TNS_EXEC_OPTION_PARSE),T.isQuery&&(this.parseOnly?t|=lt.TNS_EXEC_OPTION_DESCRIBE:(T.cursorId===0||T.requiresDefine?a=this.options.prefetchRows:a=this.options.fetchArraySize,a>0&&!T.noPrefetch&&(t|=lt.TNS_EXEC_OPTION_FETCH))),!T.isPlSql&&!this.parseOnly?t|=lt.TNS_EXEC_OPTION_NOT_PLSQL:T.isPlSql&&o>0&&(t|=lt.TNS_EXEC_OPTION_PLSQL_BIND),o>0&&(t|=lt.TNS_EXEC_OPTION_BIND),this.batchErrors&&(t|=lt.TNS_EXEC_OPTION_BATCH_ERRORS),this.arrayDmlRowCounts&&(n=lt.TNS_EXEC_OPTION_DML_ROWCOUNTS),this.options.autoCommit&&(t|=lt.TNS_EXEC_OPTION_COMMIT),this.writePiggybacks(e),this.writeFunctionHeader(e),e.writeUB4(t),e.writeUB4(T.cursorId),T.cursorId===0||T.isDdl?(e.writeUInt8(1),e.writeUB4(T.sqlLength)):(e.writeUInt8(0),e.writeUB4(0)),e.writeUInt8(1),e.writeUB4(13),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(a),e.writeUB4(lt.TNS_MAX_LONG_LENGTH),o===0?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(o)),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),T.requiresDefine?(e.writeUInt8(1),e.writeUB4(this.statement.queryVars.length)):(e.writeUInt8(0),e.writeUB4(0)),e.writeUB4(0),e.writeUInt8(0),e.writeUInt8(1),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUB4(0),this.arrayDmlRowCounts?(e.writeUInt8(1),e.writeUB4(this.numExecs),e.writeUInt8(1)):(e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0)),e.caps.ttcFieldVersion>=lt.TNS_CCAP_FIELD_VERSION_12_2&&(e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.caps.ttcFieldVersion>=lt.TNS_CCAP_FIELD_VERSION_12_2_EXT1&&(e.writeUInt8(0),e.writeUB4(0))),T.cursorId===0||T.isDdl?T.sql?(e.writeBytesWithLength(T.sqlBytes),e.writeUB4(1)):pP.throwErr(pP.ERR_INVALID_REF_CURSOR):e.writeUB4(0),T.isQuery?T.cursorId===0?e.writeUB4(0):e.writeUB4(a):e.writeUB4(this.numExecs),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(T.isQuery?1:0),e.writeUB4(0),e.writeUB4(n),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),T.requiresDefine)this.writeColumnMetadata(e,this.statement.queryVars);else if(o>0)return this.processBindParams(e,u)}writeReExecuteMessage(e){let t=this.statement,n=t.bindInfoList,o=0,a=0,T;if(n!==void 0){t.isQuery||(this.outVariables=[],n.forEach(h=>{h.bindDir!==lt.TNS_BIND_DIR_INPUT&&this.outVariables.push(h.bindVar)}));let u=[];n.forEach(h=>{h.bindDir!==lt.TNS_BIND_DIR_OUTPUT&&!h.isReturnBind&&u.push(h)}),n=u}return this.functionCode===lt.TNS_FUNC_REEXECUTE_AND_FETCH?(o|=lt.TNS_EXEC_OPTION_EXECUTE,T=this.options.prefetchRows):(this.options.autoCommit&&(a|=lt.TNS_EXEC_OPTION_COMMIT_REEXECUTE),T=this.numExecs),this.writePiggybacks(e),this.writeFunctionHeader(e),e.writeUB4(t.cursorId),e.writeUB4(T),e.writeUB4(o),e.writeUB4(a),n}encode(e){if(this.currentRow===0){let t=this.statement;t.cursorId!==0&&!t.requiresFullExecute&&!this.parseOnly&&!t.requiresDefine&&!t.isDdl&&!this.batchErrors?(t.isQuery&&!t.requiresDefine&&!t.noPrefetch&&this.options.prefetchRows>0?this.functionCode=lt.TNS_FUNC_REEXECUTE_AND_FETCH:this.functionCode=lt.TNS_FUNC_REEXECUTE,this.bindParams=this.writeReExecuteMessage(e)):(this.functionCode=lt.TNS_FUNC_EXECUTE,this.bindParams=this.writeExecuteMessage(e))}if(this.bindParams&&this.bindParams.length>0){let t=e.nsi.ntAdapter;for(;this.currentRow<this.numExecs;)if(e.writeUInt8(lt.TNS_MSG_TYPE_ROW_DATA),this.writeBindParamsRow(e,this.bindParams,this.currentRow),this.currentRow++,this.currentRow<this.numExecs&&t.shouldPauseWrite())return!0}this.currentRow=0,this.bindParams=void 0}};_(Cu,"ExecuteMessage");var gu=Cu;mP.exports=gu});var wu=Y((Mk,PP)=>{"use strict";var B1=At(),U1=Du(),Lu=class Lu extends U1{constructor(e,t,n,o){super(e,t,n),this.resultSet=o,this.functionCode=B1.TNS_FUNC_FETCH}encode(e){this.writeFunctionHeader(e),e.writeUB4(this.statement.cursorId),e.writeUB4(this.options.fetchArraySize)}};_(Lu,"FetchMessage");var yu=Lu;PP.exports=yu});var Yu=Y((Vk,RP)=>{"use strict";var Y1=tT(),M1=Ou(),x1=wu(),Uu=class Uu extends Y1{async _fetchMoreRows(e){let t=this.statement.requiresFullExecute?M1:x1,n=new t(this.connection,this.statement,e,this);await this.connection._protocol._processMessage(n),this.statement.requiresFullExecute=!1}_resultSetNew(e,t,n){this.connection=e,this.statement=t,this._nestedCursorIndices=[],this.options=n,this.prefetchRowsProcessed=!1,this.statement.bufferRowIndex=0}close(){this.connection._returnStatement(this.statement)}_processRows(e){let t=[],n=this.statement.bufferRowIndex;for(let o=n;o<n+e;o++){let a=[];for(let T=0;T<this.statement.numQueryVars;T++)a.push(this.statement.queryVars[T].values[o]);t.push(a)}return this.statement.bufferRowIndex+=e,this.statement.bufferRowIndex===this.statement.bufferRowCount&&(this.statement.bufferRowCount=0,this.statement.bufferRowIndex=0),t}async getRows(e,t){if(t.fetchArraySize=e||this.options.fetchArraySize,t.prefetchRows=this.options.prefetchRows,this.statement.bufferRowCount-this.statement.bufferRowIndex>=t.fetchArraySize)return this._processRows(t.fetchArraySize);{t.fetchArraySize=t.fetchArraySize-(this.statement.bufferRowCount-this.statement.bufferRowIndex);let o=this.statement.bufferRowCount;if(this.statement.moreRowsToFetch&&t.fetchArraySize>0&&await this._fetchMoreRows(t),t.fetchArraySize=e||this.options.fetchArraySize,o===this.statement.bufferRowCount){let a=this.statement.bufferRowCount-this.statement.bufferRowIndex;return this.statement.bufferRowCount=0,a>0?this._processRows(a):[]}}let n=this.statement.bufferRowCount-this.statement.bufferRowIndex;return this._processRows(n)}};_(Uu,"ThinResultSetImpl");var Bu=Uu;RP.exports=Bu});var CP=Y((Fk,gP)=>{"use strict";var{Buffer:IP}=require("buffer"),ce=At(),DP=Ee(),xu=class xu{constructor(e){this.protocolVersion=e,this.ttcFieldVersion=ce.TNS_CCAP_FIELD_VERSION_MAX,this.supports12cLogon=!0,this.supportsOob=!1,this.nCharsetId=ce.TNS_CHARSET_UTF16,this.compileCaps=IP.alloc(ce.TNS_CCAP_MAX),this.runtimeCaps=IP.alloc(ce.TNS_RCAP_MAX),this.initCompileCaps(),this.initRuntimeCaps(),this.maxStringSize=0}adjustForServerCompileCaps(e){e[ce.TNS_CCAP_FIELD_VERSION]<this.ttcFieldVersion&&(this.ttcFieldVersion=e[ce.TNS_CCAP_FIELD_VERSION],this.compileCaps[ce.TNS_CCAP_FIELD_VERSION]=this.ttcFieldVersion)}adjustForServerRuntimeCaps(e){e[ce.TNS_RCAP_TTC]&ce.TNS_RCAP_TTC_32K?this.maxStringSize=32767:this.maxStringSize=4e3}initCompileCaps(){this.compileCaps[ce.TNS_CCAP_SQL_VERSION]=ce.TNS_CCAP_SQL_VERSION_MAX,this.compileCaps[ce.TNS_CCAP_LOGON_TYPES]=ce.TNS_CCAP_O5LOGON|ce.TNS_CCAP_O5LOGON_NP|ce.TNS_CCAP_O7LOGON|ce.TNS_CCAP_O8LOGON_LONG_IDENTIFIER|ce.TNS_CCAP_O9LOGON_LONG_PASSWORD,this.compileCaps[ce.TNS_CCAP_FIELD_VERSION]=this.ttcFieldVersion,this.compileCaps[ce.TNS_CCAP_SERVER_DEFINE_CONV]=1,this.compileCaps[ce.TNS_CCAP_TTC1]=ce.TNS_CCAP_FAST_BVEC|ce.TNS_CCAP_END_OF_CALL_STATUS|ce.TNS_CCAP_IND_RCD,this.compileCaps[ce.TNS_CCAP_OCI1]=ce.TNS_CCAP_FAST_SESSION_PROPAGATE|ce.TNS_CCAP_APP_CTX_PIGGYBACK,this.compileCaps[ce.TNS_CCAP_TDS_VERSION]=ce.TNS_CCAP_TDS_VERSION_MAX,this.compileCaps[ce.TNS_CCAP_RPC_VERSION]=ce.TNS_CCAP_RPC_VERSION_MAX,this.compileCaps[ce.TNS_CCAP_RPC_SIG]=ce.TNS_CCAP_RPC_SIG_VALUE,this.compileCaps[ce.TNS_CCAP_DBF_VERSION]=ce.TNS_CCAP_DBF_VERSION_MAX,this.compileCaps[ce.TNS_CCAP_LOB]=ce.TNS_CCAP_LOB_UB8_SIZE|ce.TNS_CCAP_LOB_ENCS|ce.TNS_CCAP_LOB_PREFETCH,this.compileCaps[ce.TNS_CCAP_UB2_DTY]=1,this.compileCaps[ce.TNS_CCAP_LOB2]=ce.TNS_CCAP_LOB2_QUASI|ce.TNS_CCAP_LOB2_2GB_PREFETCH,this.compileCaps[ce.TNS_CCAP_TTC3]=ce.TNS_CCAP_IMPLICIT_RESULTS|ce.TNS_CCAP_BIG_CHUNK_CLR|ce.TNS_CCAP_KEEP_OUT_ORDER,this.compileCaps[ce.TNS_CCAP_TTC2]=ce.TNS_CCAP_ZLNP,this.compileCaps[ce.TNS_CCAP_OCI2]=ce.TNS_CCAP_DRCP,this.compileCaps[ce.TNS_CCAP_CLIENT_FN]=ce.TNS_CCAP_CLIENT_FN_MAX,this.compileCaps[ce.TNS_CCAP_TTC4]=ce.TNS_CCAP_INBAND_NOTIFICATION}initRuntimeCaps(){this.runtimeCaps[ce.TNS_RCAP_COMPAT]=ce.TNS_RCAP_COMPAT_81,this.runtimeCaps[ce.TNS_RCAP_TTC]=ce.TNS_RCAP_TTC_ZERO_COPY|ce.TNS_RCAP_TTC_32K}checkNCharsetId(){this.nCharsetId!==ce.TNS_CHARSET_UTF16&&DP.throwErr(DP.ERR_NCHAR_CS_NOT_SUPPORTED,this.nCharsetId)}};_(xu,"Capabilities");var Mu=xu;gP.exports=Mu});var LP=Y((kk,yP)=>{"use strict";var{BaseBuffer:V1,GrowableBuffer:qu}=lo(),{Buffer:uo}=require("buffer"),he=At(),Ps=Ee(),OP=Dr(),b1=require("util"),Gu=class Gu extends V1{_decodeContainerNode(e){let t,n,o,a=this._getNumChildren(e),T=(e&64)===0;if(a===void 0){let u=this._getOffset(e);n=this.pos,this.pos=this.treeSegPos+u;let h=this.readUInt8();a=this._getNumChildren(h),t=T?{}:new Array(a),o=this.pos}else T?(t={},o=this.pos,n=this.pos+this.fieldIdLength*a):(t=new Array(a),n=this.pos);for(let u=0;u<a;u++){let h;if(T){let N;this.fieldIdLength===1?N=this.buf[o]:this.fieldIdLength==2?N=this.buf.readUInt16BE(o):N=this.buf.readUInt32BE(o),h=this.fieldNames[N-1],o+=this.fieldIdLength}this.pos=n;let A=this._getOffset(e);n=this.pos,this.pos=this.treeSegPos+A,T?t[h]=this._decodeNode():t[u]=this._decodeNode()}return t}_decodeNode(){let e=this.readUInt8();if(e&128)return this._decodeContainerNode(e);if(e===he.TNS_JSON_TYPE_NULL)return null;if(e===he.TNS_JSON_TYPE_TRUE)return!0;if(e===he.TNS_JSON_TYPE_FALSE)return!1;if(e===he.TNS_JSON_TYPE_DATE||e===he.TNS_JSON_TYPE_TIMESTAMP7)return this.parseOracleDate(this.readBytes(7));if(e===he.TNS_JSON_TYPE_TIMESTAMP)return this.parseOracleDate(this.readBytes(11));if(e===he.TNS_JSON_TYPE_TIMESTAMP_TZ)return this.parseOracleDate(this.readBytes(13));if(e===he.TNS_JSON_TYPE_BINARY_FLOAT)return this.parseBinaryFloat(this.readBytes(4));if(e===he.TNS_JSON_TYPE_BINARY_DOUBLE)return this.parseBinaryDouble(this.readBytes(8));if(e===he.TNS_JSON_TYPE_STRING_LENGTH_UINT8)return this.readBytes(this.readUInt8()).toString();if(e===he.TNS_JSON_TYPE_STRING_LENGTH_UINT16)return this.readBytes(this.readUInt16BE()).toString();if(e===he.TNS_JSON_TYPE_STRING_LENGTH_UINT32)return this.readBytes(this.readUInt32BE()).toString();if(e===he.TNS_JSON_TYPE_NUMBER_LENGTH_UINT8)return parseFloat(this.readOracleNumber());if(e===he.TNS_JSON_TYPE_BINARY_LENGTH_UINT16)return uo.from(this.readBytes(this.readUInt16BE()));if(e===he.TNS_JSON_TYPE_BINARY_LENGTH_UINT32)return uo.from(this.readBytes(this.readUInt32BE()));let t=e&240;if(t===32||t===96){let n=e&15;return parseFloat(this.parseOracleNumber(this.readBytes(n+1)))}else if(t===64||t===80){let n=e&15;return parseFloat(this.parseOracleNumber(this.readBytes(n)))}else if(!(e&224))return e===0?"":this.readBytes(e).toString();Ps.throwErr(Ps.ERR_UNSUPPORTED_DATA_TYPE_IN_JSON,e)}_getNumChildren(e){let t=e&24;if(t===0)return this.readUInt8();if(t===8)return this.readUInt16BE();if(t===16)return this.readUInt32BE()}_getOffset(e){return e&32?this.readUInt32BE():this.readUInt16BE()}decode(){let e=this.readBytes(3);(e[0]!==he.TNS_JSON_MAGIC_BYTE_1||e[1]!==he.TNS_JSON_MAGIC_BYTE_2||e[2]!==he.TNS_JSON_MAGIC_BYTE_3)&&Ps.throwErr(Ps.ERR_UNEXPECTED_DATA,e.toString("hex"));let t=this.readUInt8();t!==he.TNS_JSON_VERSION&&Ps.throwErr(Ps.ERR_OSON_VERSION_NOT_SUPPORTED,t);let n=this.readUInt16BE();if(n&he.TNS_JSON_FLAG_IS_SCALAR)return n&he.TNS_JSON_FLAG_TREE_SEG_UINT32?this.skipBytes(4):this.skipBytes(2),this._decodeNode();let o;n&he.TNS_JSON_FLAG_NUM_FNAMES_UINT32?(o=this.readUInt32BE(),this.fieldIdLength=4):n&he.TNS_JSON_FLAG_NUM_FNAMES_UINT16?(o=this.readUInt16BE(),this.fieldIdLength=2):(o=this.readUInt8(),this.fieldIdLength=1);let a,T;n&he.TNS_JSON_FLAG_FNAMES_SEG_UINT32?(a=4,T=this.readUInt32BE()):(a=2,T=this.readUInt16BE()),n&he.TNS_JSON_FLAG_TREE_SEG_UINT32?this.skipBytes(4):this.skipBytes(2),this.skipBytes(2);let u;n&he.TNS_JSON_FLAG_HASH_ID_UINT8?u=1:n&he.TNS_JSON_FLAG_HASH_ID_UINT16?u=2:u=4,this.skipBytes(o*u);let h=this.pos;this.skipBytes(o*a);let A=this.pos;this.skipBytes(T),this.fieldNames=new Array(o);for(let N=0;N<o;N++){let R=A;n&he.TNS_JSON_FLAG_FNAMES_SEG_UINT32?(R+=this.buf.readUInt32BE(h),h+=4):(R+=this.buf.readUInt16BE(h),h+=2);let g=this.buf[R],I=this.buf.subarray(R+1,R+g+1).toString();this.fieldNames[N]=I}return this.treeSegPos=this.pos,this._decodeNode()}};_(Gu,"OsonDecoder");var Vu=Gu,Hu=class Hu{constructor(e){this.name=e,this.nameBytes=uo.from(e),this.nameBytes.length>255&&Ps.throwErr(Ps.ERR_OSON_FIELD_NAME_LIMITATION),this.hashId=BigInt(2166136261);let t=BigInt(16777619),n=BigInt(4294967295);for(let o=0;o<this.nameBytes.length;o++){let a=BigInt(this.nameBytes[o]);this.hashId=(this.hashId^a)*t&n}this.hashId=Number(this.hashId)&255}};_(Hu,"OsonFieldName");var bu=Hu,Ku=class Ku extends qu{constructor(e){super(),this.fieldNamesMap=new Map,this.fieldNames=[],this._examineNode(e),this._processFieldNames()}_examineNode(e){if(Array.isArray(e))for(let t of e)this._examineNode(t);else if(e&&Array.isArray(e.fields))for(let t=0;t<e.fields.length;t++){let n=e.fields[t],o=e.values[t];if(!this.fieldNamesMap.has(n)){let a=new bu(n);this.fieldNamesMap.set(n,a),this.fieldNames.push(a),a.offset=this.pos,this.writeUInt8(a.nameBytes.length),this.writeBytes(a.nameBytes)}this._examineNode(o)}}_processFieldNames(){this.fieldNames.sort((e,t)=>e.hashId<t.hashId?-1:e.hashId>t.hashId?1:e.nameBytes.length<t.nameBytes.length?-1:e.nameBytes.length>t.nameBytes.length?1:e.name<t.name?-1:e.name>t.name?1:0);for(let e=0;e<this.fieldNames.length;e++)this.fieldNames[e].fieldId=e+1;this.fieldNames.length<256?this.fieldIdSize=1:this.fieldNames.length<65536?this.fieldIdSize=2:this.fieldIdSize=4}};_(Ku,"OsonFieldNamesSegment");var Fu=Ku,Wu=class Wu extends qu{_encodeArray(e,t){this._encodeContainer(he.TNS_JSON_TYPE_ARRAY,e.length);let n=0,o=this.reserveBytes(e.length*4);for(let a of e)o.writeUInt32BE(this.pos,n),n+=4,this.encodeNode(a,t)}_encodeContainer(e,t){e|=32,t>65535?e|=16:t>255&&(e|=8),this.writeUInt8(e),t<256?this.writeUInt8(t):t<65536?this.writeUInt16BE(t):this.writeUInt32BE(t)}_encodeObject(e,t){let n=e.values.length;this._encodeContainer(he.TNS_JSON_TYPE_OBJECT,n);let o=0,a=n*t.fieldIdSize,T=this.reserveBytes(n*(t.fieldIdSize+4));for(let u=0;u<e.fields.length;u++){let h=t.fieldNamesMap.get(e.fields[u]);t.fieldIdSize==1?T[o]=h.fieldId:t.fieldIdSize==2?T.writeUInt16BE(h.fieldId,o):T.writeUInt32BE(h.fieldId,o),T.writeUInt32BE(this.pos,a),o+=t.fieldIdSize,a+=4,this.encodeNode(e.values[u],t)}}encodeNode(e,t){if(e==null)this.writeUInt8(he.TNS_JSON_TYPE_NULL);else if(typeof e=="boolean")e?this.writeUInt8(he.TNS_JSON_TYPE_TRUE):this.writeUInt8(he.TNS_JSON_TYPE_FALSE);else if(typeof e=="number")this.writeUInt8(he.TNS_JSON_TYPE_NUMBER_LENGTH_UINT8),this.writeOracleNumber(e.toString());else if(typeof e=="string"){let n=uo.from(e);n.length<256?(this.writeUInt8(he.TNS_JSON_TYPE_STRING_LENGTH_UINT8),this.writeUInt8(n.length)):n.length<65536?(this.writeUInt8(he.TNS_JSON_TYPE_STRING_LENGTH_UINT16),this.writeUInt16BE(n.length)):(this.writeUInt8(he.TNS_JSON_TYPE_STRING_LENGTH_UINT32),this.writeUInt32BE(n.length)),n.length>0&&this.writeBytes(n)}else b1.isDate(e)?e.getUTCMilliseconds()===0?(this.writeUInt8(he.TNS_JSON_TYPE_TIMESTAMP7),this.writeOracleDate(e,OP.DB_TYPE_DATE,!1)):(this.writeUInt8(he.TNS_JSON_TYPE_TIMESTAMP),this.writeOracleDate(e,OP.DB_TYPE_TIMESTAMP,!1)):uo.isBuffer(e)?(e.length<65536?(this.writeUInt8(he.TNS_JSON_TYPE_BINARY_LENGTH_UINT16),this.writeUInt16BE(e.length)):(this.writeUInt8(he.TNS_JSON_TYPE_BINARY_LENGTH_UINT32),this.writeUInt32BE(e.length)),this.writeBytes(e)):Array.isArray(e)?this._encodeArray(e,t):this._encodeObject(e,t)}};_(Wu,"OsonTreeSegment");var vu=Wu,$u=class $u extends qu{encode(e){let t,n=he.TNS_JSON_FLAG_INLINE_LEAF;Array.isArray(e)||e&&Array.isArray(e.fields)?(n|=he.TNS_JSON_FLAG_HASH_ID_UINT8|he.TNS_JSON_FLAG_TINY_NODES_STAT,t=new Fu(e),t.fieldNames.length>65535?n|=he.TNS_JSON_FLAG_NUM_FNAMES_UINT32:t.fieldNames.length>255&&(n|=he.TNS_JSON_FLAG_NUM_FNAMES_UINT16),t.pos>65535&&(n|=he.TNS_JSON_FLAG_FNAMES_SEG_UINT32)):n|=he.TNS_JSON_FLAG_IS_SCALAR;let o=new vu;if(o.encodeNode(e,t),o.pos>65535&&(n|=he.TNS_JSON_FLAG_TREE_SEG_UINT32),this.writeUInt8(he.TNS_JSON_MAGIC_BYTE_1),this.writeUInt8(he.TNS_JSON_MAGIC_BYTE_2),this.writeUInt8(he.TNS_JSON_MAGIC_BYTE_3),this.writeUInt8(he.TNS_JSON_VERSION),this.writeUInt16BE(n),t&&(t.fieldNames.length<256?this.writeUInt8(t.fieldNames.length):t.fieldNames.length<65536?this.writeUInt16BE(t.fieldNames.length):this.writeUInt32BE(t.fieldNames.length),t.pos<65536?this.writeUInt16BE(t.pos):this.writeUInt32BE(t.pos)),o.pos<65536?this.writeUInt16BE(o.pos):this.writeUInt32BE(o.pos),t){this.writeUInt16BE(0);for(let a of t.fieldNames)this.writeUInt8(a.hashId);for(let a of t.fieldNames)t.pos<65536?this.writeUInt16BE(a.offset):this.writeUInt32BE(a.offset);t.pos>0&&this.writeBytes(t.buf.subarray(0,t.pos))}return this.writeBytes(o.buf.subarray(0,o.pos)),this.buf.subarray(0,this.pos)}};_($u,"OsonEncoder");var ku=$u;yP.exports={OsonDecoder:Vu,OsonEncoder:ku}});var MP=Y((Gk,YP)=>{"use strict";var{BaseBuffer:BP}=lo(),{Buffer:Qn}=require("buffer"),Jn=At(),UP=LP(),wP=co(),gi=Qn.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/","utf8"),Ju=class Ju{constructor(e){this.allocLen=e;let t=e%Jn.CHUNKED_BYTES_CHUNK_SIZE;t>0&&(this.allocLen+=Jn.CHUNKED_BYTES_CHUNK_SIZE-t),this.buf=Qn.alloc(this.allocLen),this.actualLen=0}};_(Ju,"BytesChunk");var c_=Ju,ju=class ju{constructor(){this.chunks=[]}endChunkedRead(){if(this.chunks.length>1){let t=0;for(let a of this.chunks)t+=a.actualLen;let n=0,o=new c_(t);for(let a of this.chunks)a.buf.copy(o.buf,n,0,a.actualLen),n+=a.actualLen;o.actualLen=t,this.chunks=[o]}let e=this.chunks[0];return e.buf.subarray(0,e.actualLen)}getBuf(e){let t;this.chunks.length>0&&(t=this.chunks[this.chunks.length-1],t.allocLen-t.actualLen<e&&(t=void 0)),t||(t=new c_(e),this.chunks.push(t));let n=t.buf.subarray(t.actualLen,t.actualLen+e);return t.actualLen+=e,n}startChunkedRead(){this.chunks.length>0&&(this.chunks=this.chunks.splice(0,1),this.chunks[0].actualLen=0)}};_(ju,"ChunkedBytesBuffer");var zu=ju,Zu=class Zu extends BP{constructor(e,t){super(e.sAtts.sdu),this.nsi=e,this.caps=t,this.chunkedBytesBuf=new zu}_readBytesWithLength(e){if(e!==Jn.TNS_LONG_LENGTH_INDICATOR)return this.readBytes(e);for(this.chunkedBytesBuf.startChunkedRead();;){let t=this.readUB4();if(t===0)break;this.readBytes(t,!0)}return this.chunkedBytesBuf.endChunkedRead()}skipBytes(e){this.pos===this.size&&this.receivePacket();let t=this.numBytesLeft();if(e<=t){this.pos+=e;return}for(e-=t;e>0;){this.receivePacket();let n=Math.min(e,this.size-this.pos);this.pos+=n,e-=n}}readBytes(e,t=!1){this.pos===this.size&&this.receivePacket();let n=this.numBytesLeft();if(e<=n){let T;return t?(T=this.chunkedBytesBuf.getBuf(e),this.buf.copy(T,0,this.pos,this.pos+e)):T=this.buf.subarray(this.pos,this.pos+e),this.pos+=e,T}let o;t?o=this.chunkedBytesBuf.getBuf(e):o=Qn.alloc(e);let a=0;for(this.buf.copy(o,a,this.pos,this.pos+n),a+=n,e-=n;e>0;){this.receivePacket();let T=Math.min(e,this.size-this.pos);this.buf.copy(o,a,this.pos,this.pos+T),this.pos+=T,a+=T,e-=T}return o}receivePacket(){if(this.savedPacketPos===this.savedPackets.length){let e=this.nsi.syncRecvPacket();if(!e||this.nsi.isBreak)throw new wP.OutOfPacketsError;this.savedPackets.push(e)}this.startPacket(this.savedPackets[this.savedPacketPos++])}restorePoint(){this.savedPacketPos=0,this.startPacket(this.savedPackets[this.savedPacketPos++]),this.pos=this.savedPos}savePoint(){this.savedPackets?this.savedPackets=this.savedPackets.splice(this.savedPacketPos-1):this.savedPackets=[this.packet],this.savedPacketPos=1,this.savedPos=this.pos}startPacket(e){this.packet=e,this.buf=e.buf,this.pos=10,this.size=e.buf.length,this.packetNum=e.num}async waitForPackets(){let e=await this.nsi.recvPacket();this.savedPackets?this.savedPackets.push(e):(this.savedPackets=[e],this.savedPacketPos=0),this.startPacket(this.savedPackets[this.savedPacketPos++])}readOson(){if(this.readUB4()===0)return null;this.skipUB8(),this.skipUB4();let t=new UP.OsonDecoder(this.readBytesWithLength());return this.skipBytesChunked(),t.decode()}readURowID(){let e=0,t=1,n=this.readBytesWithLength();if(n===null)return null;n=this.readBytesWithLength();let o=n.length;if(n&&n[0]===1){let h=n.readUInt32BE(1),A=n.readUInt16BE(5),N=n.readUInt32BE(7),R=n.readUInt16BE(11);return wP.encodeRowID({rba:h,partitionID:A,blockNum:N,slotNum:R})}let a=Math.floor(o/3)*4,T=o%3;T===1?a+=1:T===2&&(a+=3);let u=Qn.alloc(a);for(o-=1,u[0]=42,e+=1;o>0;){let h=n[t]>>2;if(u[e]=gi[h],e+=1,h=(n[t]&3)<<4,o==1){u[e]=gi[h];break}if(t+=1,h|=(n[t]&240)>>4,u[e]=gi[h],e+=1,h=(n[t]&15)<<2,o==2){u[e]=gi[h];break}t+=1,h|=(n[t]&192)>>6,u[e]=gi[h],e+=1,h=n[t]&63,u[e]=gi[h],e+=1,t+=1,o-=3}return u.toString("utf-8")}readRowID(){let e=this.readUB4(),t=this.readUB2();this.skipUB1();let n=this.readUB4(),o=this.readUB2();return{rba:e,partitionID:t,blockNum:n,slotNum:o}}skipBytesChunked(){let e=this.readUInt8();if(e!==Jn.TNS_LONG_LENGTH_INDICATOR)this.skipBytes(e);else for(;;){let t=this.readUB4();if(t===0)break;this.skipBytes(t)}}};_(Zu,"ReadPacket");var Xu=Zu,eE=class eE extends BP{constructor(e,t,n){super(e.sAtts.sdu),this.size=this.maxSize,this.isLargeSDU=e.sAtts.version>=Jn.TNS_VERSION_MIN_LARGE_SDU,this.protocol=n,this.packetType=Jn.TNS_PACKET_TYPE_DATA,this.caps=t,this.nsi=e}_grow(){this._sendPacket()}_sendPacket(e=!1){let t=this.pos;this.pos=0,this.isLargeSDU?this.writeUInt32BE(t):(this.writeUInt16BE(t),this.writeUInt16BE(0)),this.writeUInt8(this.packetType),this.writeUInt8(0),this.writeUInt16BE(0);let n=this.buf.subarray(0,t);e||(n=Qn.from(n),this.startPacket()),this.nsi.ntAdapter.send(n)}startPacket(e=0){this.pos=Jn.PACKET_HEADER_SIZE,this.packetType===Jn.TNS_PACKET_TYPE_DATA&&this.writeUInt16BE(e)}startRequest(e,t=0){this.packetType=e,this.startPacket(t)}endRequest(){this.pos>Jn.PACKET_HEADER_SIZE&&this._sendPacket(!0)}writeKeyValue(e,t,n=0){let o=Qn.byteLength(e),a=Qn.byteLength(t);this.writeUB4(o),this.writeBytesWithLength(Qn.from(e)),this.writeUB4(a),a>0&&this.writeBytesWithLength(Qn.from(t)),this.writeUB4(n)}writeOson(e){let n=new UP.OsonEncoder().encode(e);this.writeQLocator(n.length),this.writeBytesWithLength(n)}writeSeqNum(){this.writeUInt8(this.protocol.sequenceId),this.protocol.sequenceId=(this.protocol.sequenceId+1)%256}};_(eE,"WritePacket");var Qu=eE;YP.exports={ReadPacket:Xu,WritePacket:Qu}});var VP=Y((Kk,xP)=>{"use strict";var Eo=At(),F1=CP(),{WritePacket:v1,ReadPacket:k1}=MP(),Gs=Ee(),q1=co(),rE=class rE{constructor(e){this._breakInProgress=!1,this.txnInProgress=!1,this.connInProgress=!0,this.nsi=e.nscon,this.sequenceId=1,this.caps=new F1(e.nscon.sAtts.version),this.writeBuf=new v1(e.nscon,this.caps,this),this.readBuf=new k1(e.nscon,this.caps),this.callTimeout=0}async _decodeMessage(e){for(e.preProcess(),await this.readBuf.waitForPackets();;){this.nsi.isBreak&&(await this.resetMessage(),delete this.readBuf.savedBuffers,await this.readBuf.waitForPackets());try{e.decode(this.readBuf);break}catch(t){if(t instanceof q1.OutOfPacketsError){this.nsi.isBreak||(await this.readBuf.waitForPackets(),this.readBuf.restorePoint());continue}throw t}}await e.postProcess()}async _encodeMessage(e){let t=this.nsi.ntAdapter;for(this.writeBuf.startRequest(Eo.TNS_PACKET_TYPE_DATA);e.encode(this.writeBuf);)await t.pauseWrite();this.writeBuf.endRequest()}async _recoverFromError(e,t){try{this.breakMessage(),this._breakInProgress=!1,await this.resetMessage(),await this.readBuf.waitForPackets(),t.decode(this.readBuf)}catch(n){this.nsi.disconnect();let o=Gs.getErr(Gs.ERR_CONNECTION_CLOSED);throw e.message=o.message+`
Error recovery failed: `+n.message+`
Original error: `+e.message,e}}async _processMessage(e){let t,n=!1;try{this.callTimeout>0&&(t=setTimeout(()=>{n=!0,this.breakMessage()},this.callTimeout)),await this._encodeMessage(e),e.messageType!==Eo.TNS_MSG_TYPE_ONEWAY_FN&&await this._decodeMessage(e)}catch(o){throw!this.connInProgress&&o.code!==Gs.ERR_CONNECTION_CLOSED_CODE&&await this._recoverFromError(o,e),o}finally{clearTimeout(t)}if(e.flushOutBinds&&await this.flushOutBindMessage(e),this.txnInProgress=e.callStatus&Eo.TNS_TXN_IN_PROGRESS,e.errorOccurred){n&&Gs.throwErr(Gs.ERR_CALL_TIMEOUT_EXCEEDED,this.callTimeout);let o=new Error(e.errorInfo.message);throw o.offset=e.errorInfo.pos,o.errorNum=e.errorInfo.num,o=Gs.transformErr(o),o.code===Gs.ERR_CONNECTION_CLOSED_CODE&&this.nsi.disconnect(),o}}async flushOutBindMessage(e){this.writeBuf.startRequest(Eo.TNS_PACKET_TYPE_DATA),this.writeBuf.writeUInt8(Eo.TNS_MSG_TYPE_FLUSH_OUT_BINDS),this.writeBuf.endRequest(),await this._decodeMessage(e)}breakMessage(){this._breakInProgress=!0,this.nsi.sendBreak()}async resetMessage(){await this.nsi.reset()}};_(rE,"Protocol");var tE=rE;xP.exports=tE});var Ci=Y(($k,bP)=>{bP.exports={NSPTCN:1,NSPTAC:2,NSPTAK:3,NSPTRF:4,NSPTRD:5,NSPTDA:6,NSPTNL:7,NSPTAB:9,NSPTRS:11,NSPTMK:12,NSPTAT:13,NSPTCNL:14,NSPTDD:15,NSPTHI:19,NSPHDLEN:0,NSPHDPSM:2,NSPHDTYP:4,NSPHDFLGS:5,NSPHDHSM:6,NSPSIZHD:8,NSPFSID:1,NSPFRDS:2,NSPFRDR:4,NSPFLSD:32,NO_HEADER_FLAGS:0,NSPFSRN:8,NSPCNVSN:8,NSPCNLOV:10,NSPCNOPT:12,NSPCNSDU:14,NSPCNTDU:16,NSPCNNTC:18,NSPCNTNA:20,NSPCNONE:22,NSPCNLEN:24,NSPCNOFF:26,NSPCNMXC:28,NSPCNFL0:32,NSPCNFL1:33,NSPCNTMO:50,NSPCNTCK:52,NSPCNADL:54,NSPCNAOF:56,NSPCNLSD:58,NSPCNLTD:62,NSPCNCFL:66,NSPCNCFL2:70,NSPCNDAT:74,NSPMXCDATA:230,NSINAWANTED:1,NSINAINTCHG:2,NSINADISABLEDFORCONNECTION:4,NSINANOSERVICES:8,NSINAREQUIRED:16,NSINAAUTHWANTED:32,NSISUPSECRENEG:128,NSGDONTCARE:1,NSGHDX:2,NSGFDX:4,NSGHDRCHKSUM:8,NSGPAKCHKSUM:16,NSGBROKEN:32,NSGUSEVIO:64,NSGOSAUTHOK:128,NSGSENDATTN:512,NSGRECVATTN:1024,NSGNOATTNPR:2048,NSGRAW:4096,TNS_VERSION_DESIRED:319,TNS_VERSION_MINIMUM:300,NSPACVSN:8,NSPACOPT:10,NSPACSDU:12,NSPACTDU:14,NSPACONE:16,NSPACLEN:18,NSPACOFF:20,NSPACFL0:22,NSPACFL1:23,NSPACTMO:24,NSPACTCK:26,NSPACADL:28,NSPACAOF:30,NSPACLSD:32,NSPACLTD:36,NSPACCFL:40,NSPACFL2:41,NSPACV310DAT:32,NSPACV315DAT:41,NSPRFURS:8,NSPRFSRS:9,NSPRFLEN:10,NSPRFDAT:12,NSPACCFON:128,NSPACCFAT:64,NSPACCFNT:2,NSPACOOB:1,NSGPCHKSCMD:16777216,NSPRDLEN:8,NSPRDDAT:10,NSPDAFLG:8,NSPDADAT:10,NSPDAFEOF:64,NSPMKTYP:8,NSPMKODT:9,NSPMKDAT:10,NSPMKTD0:0,NSPMKTD1:1,NSPMKTAT:2,NIQBMARK:1,NIQRMARK:2,NIQIMARK:3,NSPCTLCMD:8,NSPCTLDAT:10,NSPCTL_SERR:8,NSPCTL_CLRATTN:9,NSPDFSDULN:8192,NSPABSSDULN:2097152,NSPMXSDULN:65535,NSPMNSDULN:512,NSPDFTDULN:2097152,NSPMXTDULN:2097152,NSPMNTDULN:255,NSFIMM:64,DISABLE_OOB_STR:"DISABLE_OOB",EXPIRE_TIME:"EXPIRE_TIME",PEM_WALLET_FILE_NAME:"ewallet.pem",NT_MOREDATA:1,NS_MOREDATA:2,SVCNAME:3,SERVERTYPE:4,REMOTEADDR:5,HEALTHCHECK:6,CONNCLASS:7,PURITY:8,SID:9,NSNOBLOCK:1}});var kP=Y((zk,vP)=>{"use strict";var l_=require("buffer").Buffer,ee=Ci(),Rs=Ee(),G1=230,FP=74;function H1(s,e,t=0){this.connectData=s,this.connectDataLen=s.length,this.overflow=!1;let n,o;this.connectDataLen<=G1?n=FP+this.connectDataLen:(n=FP,this.overflow=!0),this.buf=l_.allocUnsafe(n).fill(0),this.buf.writeUInt16BE(n,ee.NSPHDLEN),this.buf.writeUInt8(t,ee.NSPHDFLGS),this.buf.writeUInt8(ee.NSPTCN,ee.NSPHDTYP),this.buf.writeUInt16BE(ee.TNS_VERSION_DESIRED,ee.NSPCNVSN),this.buf.writeUInt16BE(ee.TNS_VERSION_MINIMUM,ee.NSPCNLOV),o=ee.NSGDONTCARE,this.buf.writeUInt16BE(o,ee.NSPCNOPT),e.sdu>ee.NSPMXSDULN?this.buf.writeUInt16BE(ee.NSPMXSDULN,ee.NSPCNSDU):this.buf.writeUInt16BE(e.sdu,ee.NSPCNSDU),e.tdu>ee.NSPMXSDULN?this.buf.writeUInt16BE(ee.NSPMXSDULN,ee.NSPCNTDU):this.buf.writeUInt16BE(e.tdu,ee.NSPCNTDU),this.buf.writeUInt16BE(e.ntCha,ee.NSPCNNTC),this.buf.writeUInt16BE(1,ee.NSPCNONE),this.buf.writeUInt16BE(this.connectDataLen,ee.NSPCNLEN),this.buf.writeUInt16BE(ee.NSPCNDAT,ee.NSPCNOFF),this.buf.writeUInt8(ee.NSISUPSECRENEG|ee.NSINADISABLEDFORCONNECTION,ee.NSPCNFL0),this.buf.writeUInt8(ee.NSISUPSECRENEG|ee.NSINADISABLEDFORCONNECTION,ee.NSPCNFL1),this.buf.writeUInt16BE(0,ee.NSPCNTMO),this.buf.writeUInt16BE(0,ee.NSPCNTCK),this.buf.writeUInt16BE(0,ee.NSPCNADL),this.buf.writeUInt16BE(0,ee.NSPCNAOF),this.buf.writeUInt32BE(e.sdu,ee.NSPCNLSD),this.buf.writeUInt32BE(e.tdu,ee.NSPCNLTD),this.buf.writeUInt32BE(0,ee.NSPCNCFL),this.buf.writeUInt32BE(0,ee.NSPCNCFL2),!this.overflow&&this.connectDataLen&&this.buf.write(s.toString("ascii"),ee.NSPCNDAT,this.connectDataLen,"ascii")}_(H1,"ConnectPacket");function K1(s){this.dataPtr=0,this.dataLen=0,this.offset=0,this.len=0,this.bufLen=0,this.createPacket=function(e){this.dataPtr=ee.NSPDADAT,this.dataLen=ee.NSPDADAT,this.buf=l_.allocUnsafe(e).fill(0),this.buf.writeUInt8(0,ee.NSPHDFLGS),this.buf.writeUInt8(ee.NSPTDA,ee.NSPHDTYP),this.bufLen=e},this.fillBuf=function(e,t,n,o=0){let a;return this.buf||this.createPacket(n+ee.NSPDADAT),n>this.bufLen-this.dataLen?a=this.bufLen-this.dataLen:a=n,a&&e.copy(this.buf,this.dataLen,t,t+a),this.dataLen+=a,this.prepare2Send(o),a},this.prepare2Send=function(e=0){s?this.buf.writeUInt32BE(this.dataLen,ee.NSPHDLEN):this.buf.writeUInt16BE(this.dataLen,ee.NSPHDLEN),this.buf.writeUInt16BE(e,ee.NSPDAFLG),this.dataBuf=this.buf.subarray(0,this.dataLen)},this.fromPacket=function(e){this.buf=e.buf,this.dataLen=e.buf.length,this.dataPtr=ee.NSPDADAT,this.offset=this.dataPtr,this.len=this.dataLen,e.dataOffset=this.dataPtr}}_(K1,"DataPacket");function W1(s,e){this.buf=s.buf,this.len=s.buf.length,e.version=s.buf.readUInt16BE(ee.NSPACVSN),e.options=s.buf.readUInt16BE(ee.NSPACOPT),e.sdu=s.buf.readUInt16BE(ee.NSPACSDU),e.tdu=s.buf.readUInt16BE(ee.NSPACTDU),e.version>=315&&(e.sdu=s.buf.readUInt32BE(ee.NSPACLSD),e.tdu=s.buf.readUInt32BE(ee.NSPACLTD),e.largeSDU=!0),this.flag0=s.buf.readUInt8(ee.NSPACFL0),this.flag1=s.buf.readUInt8(ee.NSPACFL1)}_(W1,"AcceptPacket");function $1(s){this.buf=s.buf,this.len=s.buf.length,this.userReason=s.buf.readUInt8(ee.NSPRFURS),this.systemReason=s.buf.readUInt8(ee.NSPRFURS),this.dataLen=s.buf.readUInt16BE(ee.NSPRFLEN),this.dataOff=ee.NSPRFDAT,this.len>this.dataOff?(this.dataBuf=this.buf.toString("ascii",this.dataOff,this.len),this.overflow=!1):this.overflow=!0}_($1,"RefusePacket");function z1(s){this.buf=s.buf,this.len=s.buf.length,this.flags=s.flags,this.dataLen=s.buf.readUInt16BE(ee.NSPRDLEN),this.dataOff=ee.NSPRDDAT,this.len>this.dataOff?(this.dataBuf=this.buf.subarray(this.dataOff,this.len),this.overflow=!1):this.overflow=!0}_(z1,"RedirectPacket");function X1(s){this.len=ee.NSPMKDAT+1,this.buf=l_.alloc(ee.NSPMKDAT+1),s?this.buf.writeUInt32BE(this.len,ee.NSPHDLEN):this.buf.writeUInt16BE(this.len,ee.NSPHDLEN),this.buf.writeUInt8(0,ee.NSPHDFLGS),this.buf.writeUInt8(ee.NSPTMK,ee.NSPHDTYP),this.prepare=function(e,t){this.buf.writeUInt8(e,ee.NSPMKTYP),this.buf.writeUInt8(t,ee.NSPMKDAT)},this.fromPacket=function(e,t){switch(this.type=e.buf.readUInt8(ee.NSPMKTYP),this.type){case ee.NSPMKTD0:t.isBreak=!0;break;case ee.NSPMKTD1:this.data=e.buf.readUInt8(ee.NSPMKDAT),t.isBreak=!0,this.data==ee.NIQRMARK&&(t.isReset=!0,t.isBreak=!0);break;default:Rs.throwErr(Rs.ERR_INVALID_PACKET)}}}_(X1,"MarkerPacket");function Q1(){this.clear=function(){this.errno=0,this.notif=null,this.notifLen=0,this.cmd=0},this.fromPacket=function(s){let o,a,T;switch(this.cmd=s.buf.readUInt16BE(ee.NSPCTLCMD),this.cmd){case ee.NSPCTL_SERR:o=s.buf.readUInt32BE(ee.NSPCTLDAT),a=s.buf.readUInt32BE(ee.NSPCTLDAT+4),T=s.buf.readUInt32BE(ee.NSPCTLDAT+8),a==12572?this.errno=a:a==12573?(this.errno=a,this.notifLen=T,this.notif=l_.allocUnsafe(T+1).fill(0),this.buf.copy(this.notif,0,ee.NSPCTLDAT+12,ee.NSPCTLDAT+12+T)):(this.errno=a,o==22?Rs.throwErr(Rs.ERR_CONNECTION_INBAND,"ORA-"+a):Rs.throwErr(Rs.ERR_CONNECTION_INBAND,"TNS-"+a));break;default:Rs.throwErr(Rs.ERR_INVALID_PACKET)}}}_(Q1,"ControlPacket");vP.exports={ConnectPacket:H1,DataPacket:K1,AcceptPacket:W1,RefusePacket:$1,RedirectPacket:z1,MarkerPacket:X1,ControlPacket:Q1}});var HP=Y((Qk,GP)=>{"use strict";var{Buffer:J1}=require("buffer"),j1=require("net"),qP=require("process"),ho=require("tls"),Z1=require("http"),eM=require("timers"),nE=Ci(),Bt=Ee(),tM=8,rM=1521,nM=80,sM=4878,iM=1,iE=class iE{constructor(e){this.atts=e,this.cha=sM,this.connected=!1,this.err=!1,this.needsDrain=!1,this.numPacketsSinceLastWait=0,this.secure=!1,this.largeSDU=!1,this.streamNum=iM++,this.packetNum=1}dnMatch(e,t){if(this.atts.sslServerDNMatch){let n=_(o=>o.split(",").map(a=>a.split("=").map(T=>T.trim())).reduce((a,T)=>(a[T[0]]=T[1],a),{}),"toObject");if(this.atts.sslServerCertDN){let o=n(this.atts.sslServerCertDN);for(let a in o)if(o[a]!=t.subject[a])return Bt.getErr(Bt.ERR_TLS_DNMATCH_FAILURE)}else if(ho.checkServerIdentity(this.hostName,t)&&(!this.originHost||ho.checkServerIdentity(this.originHost,t))){let o=this.hostName+" "+(this.originHost?"or "+this.originHost:"");return Bt.getErr(Bt.ERR_TLS_HOSTMATCH_FAILURE,o)}}}async tlsConnect(e,t){this.stream.removeAllListeners();let n,o={host:this.host,socket:t,rejectUnauthorized:!0,secureContext:e,enableTrace:!1,checkServerIdentity:this.dnMatch.bind(this)};await new Promise(a=>{this.stream=ho.connect(o,()=>{this.stream.authorized||(n="server certificate unauthorized"),a()}).on("error",T=>{n=T.message,a()})}),n&&Bt.throwErr(Bt.ERR_TLS_AUTH_FAILURE,this.host,this.port,this.atts.connectionId,n),this.connStream=t}async ntConnect(e){e.port||(e.port=rM);let t,n,o,a=e.httpsProxy||this.atts.httpsProxy,T=e.httpsProxyPort||this.atts.httpsProxyPort;await new Promise(u=>{a?(T||(T=nM),o=Z1.request({host:a,port:T,method:"CONNECT",path:e.host+":"+e.port}),o.once("connect",(h,A)=>{h.statusCode==200?(this.connected=!0,this.stream=A):n=h.statusCode,u()}),o.once("error",h=>{n=h.message,u()}),o.end()):(this.stream=j1.connect(e.port,e.host,()=>{this.connected=!0,u()}),this.stream.once("error",h=>{t=h.message,u()}))}),o&&o.removeAllListeners(),this.connected||(n?Bt.throwErr(Bt.ERR_PROXY_CONNECTION_FAILURE,a,T,this.atts.connectionId,n):Bt.throwErr(Bt.ERR_CONNECTION_INCOMPLETE,this.host,this.port,this.atts.connectionId,t))}async connect(e){this.originHost=e.originHost,this.host=e.host,this.hostName=e.hostname,this.port=e.port;try{if(await this.ntConnect(e),(this.atts.expireTime||this.atts.enableDCD)&&(this.atts.expireTime?this.stream.setKeepAlive(!0,this.atts.expireTime):this.stream.setKeepAlive(!0)),this.atts.tcpNoDelay&&this.stream.setNoDelay(!0),e.protocol.toUpperCase()=="TCPS"){let t;this.secure=!0;try{t=ho.createSecureContext({cert:this.atts.wallet,key:this.atts.wallet,passphrase:this.atts.walletPassword,ca:this.atts.wallet})}catch{Bt.throwErr(Bt.ERR_TLS_INIT_FAILURE)}await this.tlsConnect(t,this.stream)}}finally{this.stream&&this.setupEventHandlers()}}disconnect(e){this.connected&&!this.err&&(e==nE.NSFIMM?this.stream.destroy():this.stream.end()),this.stream=null,this.connected=!1,this.drainWaiter=null,this.readWaiter=null}getPacketDump(e){let t=[];for(let n=0;n<e.length;n+=8){let o=n.toString().padStart(4,"0"),a=e.slice(n,n+8),T=[],u=[];for(let N of a)T.push(N.toString(16).toUpperCase().padStart(2,"0")),N>32&&N<127?u.push(String.fromCharCode(N)):u.push(".");for(;T.length<8;)T.push("  "),u.push(" ");let h=T.join(" "),A=u.join("");t.push(`${o} : ${h} |${A}|`)}return t.join(`
`)}printPacket(e,t){let n=new Date,o=`${n.getFullYear()}-${n.getMonth().toString().padStart(2,"0")}-${n.getDay().toString().padStart(2,"0")} ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}:${n.getSeconds().toString().padStart(2,"0")}.${n.getMilliseconds().toString().padStart(3,"0")}`,a=this.getPacketDump(t);console.log(`${o} ${e}:
${a}
`)}checkErr(){if(!this.connected||this.err){let e,t;throw this.savedErr?e=Bt.getErr(Bt.ERR_CONNECTION_LOSTCONTACT,this.host,this.port,this.atts.connectionId,this.savedErr.message):e=Bt.getErr(Bt.ERR_CONNECTION_EOF,this.host,this.port,this.atts.connectionId),t=Bt.getErr(Bt.ERR_CONNECTION_CLOSED),t.message=t.message+`
`+e.message,t}}send(e){this.checkErr(),qP.env.NODE_ORACLEDB_DEBUG_PACKETS&&this.printPacket(`Sending packet ${this.packetNum} on stream ${this.streamNum}`,e),this.stream.write(e,n=>{n&&(this.savedErr=n,this.err=!0,this._notifyWaiters())})||(this.needsDrain=!0),this.numPacketsSinceLastWait++,this.packetNum++}shouldPauseWrite(){return this.needsDrain||this.numPacketsSinceLastWait>=100}async pauseWrite(){this.checkErr(),this.needsDrain?(await new Promise(e=>{this.drainWaiter=e}),this.checkErr()):await new Promise(e=>eM.setImmediate(e)),this.numPacketsSinceLastWait=0}startRead(){let e;this.packets=[],this.stream.on("data",t=>{for(e?e=J1.concat([e,t]):e=t;e.length>=tM;){let n;if(this.largeSDU?n=e.readUInt32BE():n=e.readUInt16BE(),n>e.length)break;let o={buf:e.subarray(0,n),type:e[4],flags:e[5],num:this.packetNum++};if(this.packets.push(o),this.readWaiter&&(this.readWaiter(),this.readWaiter=null),qP.env.NODE_ORACLEDB_DEBUG_PACKETS&&this.printPacket(`Receiving packet ${o.num} on stream ${this.streamNum}`,o.buf),n===e.length){e=null;break}else e=e.subarray(n)}})}syncReceive(){return this.packets.shift()}async receive(){return this.packets.length===0&&(this.checkErr(),await new Promise(e=>{this.readWaiter=e,this.numPacketsSinceLastWait=0}),this.checkErr()),this.packets.shift()}async renegTLS(){try{this.checkErr();let e=ho.createSecureContext({cert:this.atts.wallet,key:this.atts.wallet,passphrase:this.atts.walletPassword,ca:this.atts.wallet});await this.tlsConnect(e,this.connStream)}finally{this.setupEventHandlers()}}setupEventHandlers(){this.stream.removeAllListeners(),this.stream.on("error",e=>{this.savedErr=e,this.err=!0,this._notifyWaiters()}),this.stream.on("end",()=>{this.err=!0,this._notifyWaiters()}),this.stream.on("close",()=>{this.connected=!1,this._notifyWaiters()}),this.stream.on("drain",()=>{this.needsDrain=!1,this.drainWaiter&&(this.drainWaiter(),this.drainWaiter=null)})}getOption(e){switch(this.checkErr(),e){case nE.NT_MOREDATA:return this.packets.length>0;case nE.REMOTEADDR:{let t=this.secure?this.connStream:this.stream;return t.remoteAddress+":"+t.remotePort}default:Bt.throwErr(Bt.ERR_INTERNAL,"getOption not supported for opcode "+e)}}_notifyWaiters(){this.drainWaiter&&(this.drainWaiter(),this.drainWaiter=null),this.readWaiter&&(this.readWaiter(),this.readWaiter=null)}};_(iE,"NTTCP");var sE=iE;GP.exports=sE});var $P=Y((jk,WP)=>{"use strict";var oM=require("crypto"),aM=require("path"),KP=Ci(),_M=require("fs");async function cM(){return await new Promise((s,e)=>{oM.randomBytes(16,(t,n)=>{t?e(t):s(n)})})}_(cM,"genuuid");var aE=class aE{constructor(e){this.largeSDU=!1,this.tdu=KP.NSPDFTDULN,this.nt={},this.nt.tcpNoDelay=!0,this.uuid=e,this.nt.sslServerDNMatch=!0}setFrom(e){e&&(e.sdu>0&&(this.sdu=parseInt(e.sdu)),typeof e.walletLocation=="string"&&(this.nt.walletFile=aM.join(e.walletLocation,KP.PEM_WALLET_FILE_NAME)),typeof e.walletPassword=="string"&&(this.nt.walletPassword=e.walletPassword),e.expireTime>0&&(this.nt.expireTime=e.expireTime*1e3*60),e.connectTimeout>0&&(this.connectTimeout=e.connectTimeout*1e3),e.transportConnectTimeout>0&&(this.transportConnectTimeout=e.transportConnectTimeout*1e3),e.recvTimeout>0&&(this.recvTimeout=e.recvTimeout*1e3),e.sendTimeout>0&&(this.sendTimeout=e.sendTimeout*1e3),typeof e.connectionIdPrefix=="string"&&(this.connectionIdPrefix=e.connectionIdPrefix),typeof e.tcpNoDelay=="boolean"&&(this.nt.tcpNoDelay=e.tcpNoDelay),typeof e.sslServerDNMatch=="boolean"&&(this.nt.sslServerDNMatch=e.sslServerDNMatch),typeof e.sslServerCertDN=="string"&&(this.nt.sslServerCertDN=e.sslServerCertDN),typeof e.enable=="string"&&e.enable.toUpperCase()=="BROKEN"&&(this.nt.enabledDCD=!0),typeof e.httpsProxy=="string"&&(this.nt.httpsProxy=e.httpsProxy),e.httpsProxyPort>=0&&(this.nt.httpsProxyPort=parseInt(e.httpsProxyPort)))}readWalletFile(){return new Promise((e,t)=>{_M.readFile(this.nt.walletFile,(n,o)=>{n?t(n):e(o)})})}async prepare(e){this.uuid||(this.uuid=await cM(),this.uuid=this.uuid.toString("base64")),this.connectionIdPrefix?this.connectionId=this.connectionIdPrefix+this.uuid:this.connectionId=this.uuid,this.nt.connectionId=this.connectionId,e&&e.toUpperCase()=="TCPS"&&this.nt.walletFile&&(this.nt.wallet=await this.readWalletFile()),!this.connectTimeout&&!this.transportConnectTimeout&&(this.transportConnectTimeout=60*1e3)}};_(aE,"SessionAtts");var oE=aE;WP.exports=oE});var No=Y((eq,eR)=>{"use strict";var Je=Ee(),zP=0,So=1,_E=2,cE=3,T_=4,AE=class AE{constructor(e){this.name=e,this.listType=cE,this.rhsType=zP}set setAtom(e){this._containsComment(e)&&Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX),this.rhsType=So,this.list=null,this.atom=e}_containsComment(e){for(let t=0;t<e.length;t++)if(e.charAt(t)=="#")if(t!=0){if(e.charAt(t-1)=="\\")continue;return!0}else return!0;return!1}getListSize(){return this.list==null?0:this.list.length}getListElement(e){return this.list==null?null:this.list[e]}addListElement(e){this.list==null&&(this.rhsType=_E,this.list=new Array,this.atom=null),this.list.push(e),e.parent=this}removeListElement(e){this.list!=null&&(this.list.splice(e,1),this.getListSize==0&&(this.list=null,this.rhsType=zP))}_space(e){var t="";for(let n=0;n<e;n++)t+=" ";return t}valueToString(){let e="";if(this.rhsType==So)e=e+this.atom;else if(this.rhsType==_E){if(this.listType==cE)for(let t=0;t<this.getListSize();t++)e=e+this.getListElement(t).toString();else if(this.listType==T_)for(let t=0;t<this.getListSize();t++){let n=this.getListElement(t);e=e+n.name,t!=this.getListSize()-1&&(e=e+", ")}}return e}toString(){let e="("+this.name+"=";if(this.rhsType==So)e=e+this.atom;else if(this.rhsType==_E){if(this.listType==cE)for(let t=0;t<this.getListSize();t++)e=e+this.getListElement(t).toString();else if(this.listType==T_){e=e+" (";for(let t=0;t<this.getListSize();t++){let n=this.getListElement(t);e=e+n.name,t!=this.getListSize()-1&&(e=e+", ")}e=e+")"}}return e=e+")",e}};_(AE,"NVPair");var u_=AE,lM=0,E_=1,hE=2,Is=3,QP=4,h_=8,TM=9,lE="(",TE=")",uE=",",EE="=",uM="\\",XP='"',EM="'",hM="%",SM=" ",NM="	",fM=`
`,AM="\r",dE=class dE{constructor(){this.tkType=null,this.tkValue=null,this.numTokens=0,this.tkPos=0}_isWhiteSpace(e){return e==SM||e==NM||e==fM||e==AM}_trimWhiteSpace(e){let t=e.length,n=0,o=t;for(;n<t&&this._isWhiteSpace(e.charAt(n));)n++;for(;n<o&&this._isWhiteSpace(e.charAt(o-1));)o--;return e.substring(n,o)}parseTokens(e){this.numTokens=0,this.tkPos=0,this.tkType=new Array,this.tkValue=new Array;let t=e.length,n=!1,o=new Array;o=Array.from(e);let a=0;for(;a<t;){for(;a<t&&this._isWhiteSpace(o[a]);)a++;if(a<t)switch(o[a]){case lE:n=!1,this._addToken(E_,lE),a++;break;case EE:n=!0,this._addToken(QP,EE),a++;break;case TE:n=!1,this._addToken(hE,TE),a++;break;case uE:n=!1,this._addToken(Is,uE),a++;break;default:{let T=a,u=-1,h=!1,A=XP;for((o[a]==EM||o[a]==XP)&&(h=!0,A=o[a],a++,T=a);a<t;){if(o[a]==uM){a+=2;continue}if(h){if(o[a]==A){a++,u=a-1;break}}else if(o[a]==lE||o[a]==TE||o[a]==uE&&!n||o[a]==EE&&!n){u=a;break}a++}u==-1&&(u=a),this._addToken(h_,e.substring(T,u).trim());break}}}return this._addToken(TM,hM),!0}getToken(){if(this.tkType==null&&Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens)return Number(this.tkType[this.tkPos]);Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX)}popToken(){let e=lM;return this.tkType==null&&Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=Number(this.tkType[this.tkPos++]):Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX),e}getLiteral(){let e=null;return this.tkValue==null&&Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=String(this.tkValue[this.tkPos]):Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX),e}popLiteral(){let e=null;return this.tkValue==null&&Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=String(this.tkValue[this.tkPos++]):Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX),e}eatToken(){this.tkPos<this.numTokens&&this.tkPos++}toString(){if(this.tkType==null)return"*NO TOKENS*";let e="Tokens";for(let t=0;t<this.numTokens;t++)e=e+" : "+this.tkValue[t];return e}_addToken(e,t){this.tkType.push(Number(e)),this.tkValue.push(String(t)),this.numTokens++}};_(dE,"NVTokens");var SE=dE;function dM(s){let e=new SE;return e.parseTokens(s),pM(e)}_(dM,"createNVPair");function pM(s){let e=s.getToken();s.eatToken(),e!=E_&&Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=fE(s),n=new u_(t);if((e=s.getToken())==Is){for(;e==h_||e==Is;)t+=s.popLiteral(),e=s.getToken();return n.name=t,NE(n,s)}return NE(n,s)}_(pM,"readTopLevelNVPair");function mM(s){let e=s.getToken();s.eatToken(),e==E_||e==Is||Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=fE(s),n=new u_(t);return NE(n,s)}_(mM,"readNVPair");function NE(s,e){let t=e.getToken();switch(t){case QP:if(e.eatToken(),t=e.getToken(),t==h_){let n=fE(e);s.setAtom=n}else JP(e,s);break;case Is:case hE:s.setAtom=s.name;break;default:Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX)}return t=e.getToken(),t==hE?e.eatToken():t!=Is&&Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX),s}_(NE,"readRightHandSide");function fE(s){return s.getToken()!=h_&&Je.throwErr(Je.ERR_INVALID_CONNECT_STRING_SYNTAX),s.popLiteral()}_(fE,"readNVLiteral");function JP(s,e){let t=s.getToken();if(!(t==E_||t==Is))return;let n=mM(s);e.addListElement(n),(t==Is||n.name==n.atom)&&e.getListType!=T_&&(e.setListType=T_),JP(s,e)}_(JP,"readNVList");function jP(s,e){if(!s)return null;if(e.toUpperCase()==s.name.toUpperCase())return s;if(s.getRHSType==So)return null;for(let t=0;t<s.getListSize();t++){let n=jP(s.getListElement(t),e);if(n!==null)return n}return null}_(jP,"findNVPairRecurse");function ZP(s,e){if(!s||s.getRHSType==So)return null;for(let t=0;t<s.getListSize();t++){let n=s.getListElement(t);if(e.toUpperCase()==n.name.toUpperCase())return n}return null}_(ZP,"findNVPair");function PM(s,e){if(!s||e[0].toUpperCase()!=s.name.toUpperCase())return null;let t=s,n=e.length;for(let o=1;o<n;o++)if(t=ZP(t,e[o]),!t)return null;return t.atom==null?t.list==null?null:t.list.toString():t.atom.toString()}_(PM,"findValue");eR.exports={findNVPairRecurse:jP,createNVPair:dM,findNVPair:ZP,findValue:PM}});var Oi=Y((rq,sR)=>{"use strict";var rR=ir(),S_=Ee(),tR=require("os");function RM(){this.program=process.argv0,this.terminal="unknown",this.pid=process.pid.toString();try{this.userName=tR.userInfo().username}catch{this.userName="unknown"}this.hostName=tR.hostname()}_(RM,"populateClientInfo");var IM=new RM;function DM(s){let e=[];for(let t of s)e.push(t.fetchInfo);return e}_(DM,"getMetadataMany");function pE(s,e){let t=s[0].name===void 0,n;t?n=[]:n={};for(let o=0;o<s.length;o++)s[o].dir!==rR.BIND_IN&&(t?n.push(s[o].values[e]):n[s[o].name]=s[o].values[e]);return n}_(pE,"getOutBinds");function gM(s,e){if(nR(s)===0)return;let n=new Array(e).fill(null);for(let o=0;o<e;o++)n[o]=pE(s,o);return n}_(gM,"getExecuteManyOutBinds");function nR(s){let e=0;for(let t=0;t<s.length;t++)s[t].dir!==rR.BIND_IN&&e++;return e}_(nR,"getNumOutBinds");function CM(s){if(nR(s)!==0)return pE(s,0)}_(CM,"getExecuteOutBinds");function OM(s){return s=s.trim(),s=s.replace(/\--.*(\n|$)/g,""),s=s.replace(/\/\\*[\S\n ]+\\*\//g,""),s=s.replace(/\s+/g," "),s}_(OM,"cleanSql");function yM(s){let e=[];for(let t of s.bindInfoList)e.push(t.bindVar);return e}_(yM,"getBindVars");function LM(s){let e="",t="",n=!1,o=!1,a=0,T,u={status:-1,proxyUser:"",schemaUser:""},h=s.length,A=0,N,R;for(;A<h;){if(s.charAt(A)==='"'&&(n=!n,a=A),s.charAt(A)==="["&&!n){if(o=!0,a!=0){for(N=a+1;N<A;N++)if(s.charAt(N)!==" ")return u;for(N=0;N<=a;N++)t+=s.charAt(N)}else for(N=0;N<A&&s.charAt(N)!==" ";N++)t+=s.charAt(N);break}A++}if(t.length===0)return u;for(u.proxyUser=t,A=A+1,n=!1,T=A,a=0;A<h;){if(s.charAt(A)==='"'&&(n=!n,a=A),s.charAt(A)==="["&&!n&&o)return u;if(s.charAt(A)==="]"&&!n){if(a!=T&&a!=0){for(N=T;N<=a;N++)e+=s.charAt(N);for(N=a+1;N<A;N++)if(s.charAt(N)!=" ")return u}else{for(N=T;N<A&&s.charAt(N)==" ";N++);if(N==A)return u;for(R=N;R<A;R++)e+=s[R]}for(N=A+1;N<h;N++)if(s[N]!=" ")return u}A++}return e.length===0||(u.schemaUser=e,u.status=0),u}_(LM,"checkProxyUserValidity");function wM(s){s.token===void 0&&(s.externalAuth===!0&&S_.throwErr(S_.ERR_NOT_IMPLEMENTED,"External Authentication"),s.password===void 0&&S_.throwErr(S_.ERR_MISSING_CREDENTIALS))}_(wM,"checkCredentials");sR.exports={getMetadataMany:DM,cleanSql:OM,CLIENT_INFO:IM,getExecuteOutBinds:CM,getExecuteManyOutBinds:gM,getOutBinds:pE,getBindVars:yM,checkProxyUserValidity:LM,checkCredentials:wM}});var _R=Y((sq,aR)=>{"use strict";var{findNVPairRecurse:fo,createNVPair:d_}=No(),_r=Ee(),BM=require("os"),UM=require("net"),YM=require("dns"),iR=YM.promises,mE=Oi().CLIENT_INFO,p_={ADDR:0,ADDR_LIST:1,DESC:2,DESC_LIST:3},gE=class gE{isS(){return p_.ADDR}initFromString(e){let t=d_(e);this.initFromNVPair(t)}initFromNVPair(e){(e==null||e.name.toUpperCase()!="ADDRESS")&&_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=fo(e,"protocol"),n=fo(e,"port"),o=fo(e,"host"),a=fo(e,"https_proxy"),T=fo(e,"https_proxy_port");n&&(this.port=n.atom),o&&(this.host=o.atom),t&&(this.prot=t.atom),a&&(this.httpsProxy=a.atom),T&&(this.httpsProxyPort=T.atom),this.addr=e.toString()}toString(){return this.addr}};_(gE,"Address");var PE=gE,CE=class CE{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!1,this.failover=!0}isS(){return p_.ADDR_LIST}initFromString(e){let t=d_(e);this.initFromNVPair(t)}initFromNVPair(e){this.children=[];let t,n,o=e.getListSize();o==0&&_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let a=0;a<o;a++)t=e.getListElement(a),t.name.toUpperCase()=="SOURCE_ROUTE"?this.sourceRoute=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="LOAD_BALANCE"?this.loadBalance=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="FAILOVER"?this.failover=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="ADDRESS"?(n=new Ao,n.initFromNVPair(t),this.children.push(n)):t.name.toUpperCase()=="ADDRESS_LIST"?(n=new po,n.initFromNVPair(t),this.children.push(n)):_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX);this.children.length==0&&_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX)}toString(){let e=new String("");if(this.children.size()<1)return e;e+="(ADDRESS_LIST=";for(let t=0;t<this.children.size();t++)e+=this.children[t].toString();return this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"+yi.HC),this.loadBalance&&(e+="(LOAD_BALANCE=yes)"),this.failover||(e+="(FAILOVER=false)"),e+=")",e}};_(CE,"AddressList");var RE=CE,OE=class OE{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!1,this.failover=!0,this.delayInMillis=-1,this.params={}}isS(){return p_.DESC}initFromString(e){let t=d_(e);this.initFromNVPair(t)}initFromNVPair(e){let t=e.getListSize(),n,o;t==0&&_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let a=0;a<t;a++)if(n=e.getListElement(a),n.name.toUpperCase()=="SOURCE_ROUTE")this.sourceRoute=n.atom.toLowerCase()=="yes"||n.atom.toLowerCase()=="on"||n.atom.toLowerCase()=="true";else if(n.name.toUpperCase()=="LOAD_BALANCE")this.loadBalance=n.atom.toLowerCase()=="yes"||n.atom.toLowerCase()=="on"||n.atom.toLowerCase()=="true";else if(n.name.toUpperCase()=="FAILOVER")this.failover=n.atom.toLowerCase()=="yes"||n.atom.toLowerCase()=="on"||n.atom.toLowerCase()=="true";else if(n.name.toUpperCase()=="ADDRESS_LIST")o=new po,o.initFromNVPair(n),this.children.push(o);else if(n.name.toUpperCase()=="ADDRESS")o=new Ao,o.initFromNVPair(n),this.children.push(o);else if(n.name.toUpperCase()=="CONNECT_DATA"){let T,u=n.getListSize();for(let h=0;h<u;h++)if(T=n.getListElement(h),T.name.toUpperCase()=="CONNECTION_ID_PREFIX"){this.params.connectionIdPrefix=T.atom,n.removeListElement(h);break}this.connectData=n.valueToString()}else if(n.name.toUpperCase()=="RETRY_DELAY")n.atom>0&&(this.delayInMillis=n.atom*1e3);else if(n.name.toUpperCase()=="RETRY_COUNT")this.retryCount=n.atom;else if(n.name.toUpperCase()=="CONNECTION_ID_PREFIX")this.conidPrefix=n.atom;else if(n.name.toUpperCase()=="CONNECT_TIMEOUT")n.atom>0&&(this.params.connectTimeout=n.atom);else if(n.name.toUpperCase()=="TRANSPORT_CONNECT_TIMEOUT")n.atom>0&&(this.params.transportConnectTimeout=n.atom);else if(n.name.toUpperCase()=="ENABLE")this.params.enable=n.atom;else if(n.name.toUpperCase()=="RECV_TIMEOUT")n.atom>0&&(this.params.recvTimeout=n.atom);else if(n.name.toUpperCase()=="SDU")this.params.sdu=n.atom;else if(n.name.toUpperCase()=="EXPIRE_TIME")n.atom>0&&(this.params.expireTime=n.atom);else if(n.name.toUpperCase()=="SECURITY"){let T=n.getListSize(),u;for(let h=0;h<T;h++)u=n.getListElement(h),u.name.toUpperCase()=="SSL_SERVER_CERT_DN"?this.params.sslServerCertDN=u.valueToString():u.name.toUpperCase()=="SSL_SERVER_DN_MATCH"?this.params.sslServerDNMatch=u.atom.toLowerCase()=="yes"||u.atom.toLowerCase()=="on"||u.atom.toLowerCase()=="true":(u.name.toUpperCase()=="WALLET_LOCATION"||u.name.toUpperCase()=="MY_WALLET_DIRECTORY")&&(this.params.walletLocation=u.atom)}}toString(){let e=new String(""),t;t=new String("");for(let n=0;n<this.children.size();n++)t=this.children[n].toString(),!t==""&&(e+=t);return!e==""&&this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"),!e==""&&this.loadBalance&&(e+="(LOAD_BALANCE=yes)"),!e==""&&!this.failover&&(e+="(FAILOVER=false)"),e.equals("")||(e="(DESCRIPTION="+e+")"),e}};_(OE,"Description");var IE=OE,yE=class yE{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!0,this.failover=!0}isS(){return p_.ADDR_LIST}initFromString(e){let t=d_(e);this.initFromNVPair(t)}initFromNVPair(e){let t=e.getListSize(),n,o;t==0&&_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let a=0;a<t;a++)o=e.getListElement(a),o.name.toUpperCase()=="SOURCE_ROUTE"?this.sourceRoute=o.atom.toLowerCase()=="yes"||o.atom.toLowerCase()=="on"||o.atom.toLowerCase=="true":o.name.toUpperCase()=="LOAD_BALANCE"?this.loadBalance=o.atom.toLowerCase()=="yes"||o.atom.toLowerCase()=="on"||o.atom.toLowerCase()=="true":o.name.toUpperCase()=="FAILOVER"?this.failover=o.atom.toLowerCase()=="yes"||o.atom.toLowerCase()=="on"||o.atom.toLowerCase()=="true":o.name.toUpperCase()=="DESCRIPTION"?(n=new f_,n.initFromNVPair(o),this.children.push(n)):_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX);this.children.length==0&&_r.throwErr(_r.ERR_INVALID_CONNECT_STRING_SYNTAX)}toString(){let e=new String("");if(this.children.size()<1)return e;let t=new String("");for(let n=0;n<this.children.size();n++)t=this.children[n].toString(),t.equals("")||(e+=t);return e.equals("")&&this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"),e.equals("")&&!this.loadBalance&&(e+="(LOAD_BALANCE=no)"),e.equals("")&&!this.failover&&(e+="(FAILOVER=false)"),e.equals("")||(e="(DESCRIPTION_LIST="+e+")"),e}};_(yE,"DescriptionList");var DE=yE,LE=class LE{constructor(){this.CNdata=new Array}};_(LE,"ConnOption");var N_=LE,yi={DEBUG:!1,SR:"(SOURCE_ROUTE=yes)",HC:"(HOP_COUNT=0)",LB:"(LOAD_BALANCE=yes)",NFO:"(FAILOVER=false)",CD:"(CONNECT_DATA=",CONID:"(CONNECTION_ID="},oR={all:!0},wE=class wE extends PE{constructor(){super()}async navigate(e){let t,n=0,o=!1;if(!this.host){n=1,this.host=BM.hostname();try{await iR.lookup(this.host,oR)}catch{this.host="localhost"}}if(e.getcurrentDescription()==null&&(e.newConnectionDescription(),o=!0),UM.isIP(this.host)){let a=new N_;a.hostname=this.host,a.port=this.port,a.protocol=this.prot,a.httpsProxy=this.httpsProxy,a.httpsProxyPort=this.httpsProxyPort,a.desc=e.getcurrentDescription(),a.CNdata.push(e.sBuf.join("")),a.CNdata.push(this.toString()),a.host=this.host,a.addr=this.addr,e.getcurrentDescription().addConnectOption(a)}else try{t=await iR.lookup(this.host,oR);for(let a in t){let T=new N_;T.hostname=this.host,T.port=this.port,T.protocol=this.prot,T.httpsProxy=this.httpsProxy,T.httpsProxyPort=this.httpsProxyPort,T.desc=e.getcurrentDescription(),T.CNdata.push(e.sBuf.join("")),n==1?T.CNdata.push("(address=(protocol="+this.prot+")(host="+this.host+")(port="+this.port+"))"):T.CNdata.push(this.toString()),T.host=t[a].address,T.addr=this.addr,e.getcurrentDescription().addConnectOption(T)}}catch{}o&&e.closeDescription()}addToString(e){let t=this.toString(),n=new Array;n=e.getcurrentDescription().getConnectOptions();for(let o=0;o<n.length;o++)n[o].done||n[o].CNdata.push(t)}};_(wE,"NavAddress");var Ao=wE,BE=class BE extends RE{constructor(){super(),this.activeChildren=new Array,this.sBuflength=0}async navigate(e){await this.navigate2(e,0)}async navigate2(e,t){if(t++,this.sBuflength=e.sBuf.length,e.sBuf.push("(ADDRESS_LIST="),this.sourceRoute){this.activeChildren=this.children,await this.activeChildren[0].navigate(e);for(let n=1;n<this.activeChildren.length;n++)this.activeChildren[n].addToString(e)}else{this.activeChildren=mo.setActiveChildren(this.children,this.failover,this.loadBalance);for(let n=0;n<this.activeChildren.length;n++)this.getChildrenType(n)==1?await this.activeChildren[n].navigate2(e,t):await this.activeChildren[n].navigate(e)}this.closeNVPair(e),e.sBuf.length=this.sBuflength}addToString(e){let t=this.toString(),n=new Array;n=e.getcurrentDescription().getConnectOptions();for(let o=0;o<n.length;o++)n[o].done||n[o].CNdata.push(t)}getChildrenSize(){let e=0;for(let t=0;t<this.activeChildren.length;t++)if(this.getChildrenType(t)==1?e+=this.activeChildren[t].getChildrenSize():e++,this.sourceRoute)return e;return e}getChildrenType(e){return this.activeChildren[e].isS()}getChild(e){return this.children[e]}closeNVPair(e){let t=new Array,n=this.getChildrenSize();if(e.getcurrentDescription()!=null){t=e.getcurrentDescription().getConnectOptions();let o=0,a=null,T=null;for(let u=t.length-1;u>=0&&!t[u].done&&((t[u].hostname!=a||t[u].port!=T)&&o++,a=t[u].hostname,T=t[u].port,!(o>n));u--)this.sourceRoute&&(t[u].CNdata.push(yi.SR),t[u].CNdata.push(yi.HC),t[u].done=!0),t[u].CNdata.push(")")}}};_(BE,"NavAddressList");var po=BE,UE=class UE extends IE{constructor(){super(),this.activeChildren=new Array,this.descProcessed=0}async navigate(e){e.sBuf.length=0,e.sBuf.push("(DESCRIPTION=");let t=e.newConnectionDescription();if(this.retryCount!=null&&(e.retryCount=this.getIntValue(this.retryCount,e.retryCount),t.retryCount=e.retryCount),this.delayInMillis!=-1&&(t.delayInMillis=this.delayInMillis),t.params=this.params,"connectTimeout"in this.params&&e.sBuf.push("(CONNECT_TIMEOUT="+this.params.connectTimeout+")"),"transportConnectTimeout"in this.params&&e.sBuf.push("(TRANSPORT_CONNECT_TIMEOUT="+this.params.transportConnectTimeout+")"),"recvTimeout"in this.params&&e.sBuf.push("(RECV_TIMEOUT="+this.params.recvTimeout+")"),"sdu"in this.params&&e.sBuf.push("(SDU="+this.params.sdu+")"),"expireTime"in this.params&&e.sBuf.push("(EXPIRE_TIME="+this.params.expireTime+")"),"enable"in this.params&&e.sBuf.push("(ENABLE="+this.params.enable+")"),("sslServerCertDN"in this.params||"sslServerDNMatch"in this.params||"walletLocation"in this.params)&&(e.sBuf.push("(SECURITY="),"sslServerCertDN"in this.params&&e.sBuf.push("(SSL_SERVER_CERT_DN="+this.params.sslServerCertDN+")"),"sslServerDNMatch"in this.params&&e.sBuf.push("(SSL_SERVER_DN_MATCH="+this.params.sslServerDNMatch+")"),"walletLocation"in this.params&&e.sBuf.push("(WALLET_LOCATION="+this.params.walletLocation+")"),e.sBuf.push(")")),"httpsProxyPort"in this.params&&e.sBuf.push("(HTTPS_PROXY_PORT="+this.params.httpsProxyPort+")"),"httpsProxy"in this.params&&e.sBuf.push("(HTTPS_PROXY="+this.params.httpsProxy+")"),this.failover||e.sBuf.push(yi.NFO),this.sourceRoute){this.activeChildren=this.children,await this.activeChildren[0].navigate(e);for(let n=1;n<this.activeChildren.length;n++)this.activeChildren[n].addToString(e);this.closeNVPair(e)}else{this.activeChildren=mo.setActiveChildren(this.children,this.failover,this.loadBalance);for(let n=0;n<this.activeChildren.length;n++)await this.activeChildren[n].navigate(e);this.closeNVPair(e)}e.closeDescription()}closeNVPair(e){if(e.getcurrentDescription()==null)return;let t=new Array;t=e.getcurrentDescription().getConnectOptions();for(let n=0;n<t.length;++n){this.sourceRoute&&t[n].CNdata.push(yi.SR),this.connectData==null&&(this.connectData="(SERVICE_NAME=)");let o=`(CID=(PROGRAM=${mE.program})(HOST=${mE.hostName})(USER=${mE.userName}))`;t[n].CNdata.push(yi.CD),t[n].CNdata.push(this.connectData),t[n].CNdata.push(o),t[n].CNdata.push(")"),this.SID!=null&&(t[n].sid=this.SID),this.serviceName!=null&&(t[n].service_name=this.serviceName),this.instanceName!=null&&(t[n].instance_name=this.instanceName),t[n].CNdata.push(")"),t[n].done=!0}}getIntValue(e,t){try{return parseInt(e)}catch{return t}}};_(UE,"NavDescription");var f_=UE,A_=class A_ extends DE{constructor(e=new Array,t=0,n=0){super(),this.activeChildren=e,this.descProcessed=t,this.done=n}async navigate(e){for(e.sBuf.push("(DESCRIPTION_LIST="),this.activeChildren=A_.setActiveChildren(this.children,this.failover,this.loadBalance);this.descProcessed<this.activeChildren.length;)await this.activeChildren[this.descProcessed].navigate(e),this.descProcessed++}static setActiveChildren(e,t,n){let o,a=e.length,T=new Array,u=Math.floor(Math.random()*10),h=new Array(a).fill(!1);if(t)if(n)for(let A=0;A<a;A++){do o=Math.abs(Math.floor(Math.random()*10))%a;while(h[o]);h[o]=!0,T.push(e[o])}else T=e;else n?(o=Math.abs(u)%a,T.push(e[o])):T.push(e[0]);return T}};_(A_,"NavDescriptionList");var mo=A_;aR.exports={NavAddress:Ao,NavAddressList:po,NavDescription:f_,NavDescriptionList:mo}});var TR=Y((oq,lR)=>{"use strict";var{NavAddress:MM,NavAddressList:xM,NavDescription:VM,NavDescriptionList:bM}=_R(),{createNVPair:FM}=No(),cR=Ee(),xE=class xE{constructor(){this.cOpts=new Array}addConnectOption(e){this.cOpts.push(e)}getConnectOptions(){return this.cOpts}};_(xE,"ConnectDescription");var YE=xE,VE=class VE{constructor(){this.nextOptToTry=0,this.retryCount=0,this.lastRetryCounter=0,this.lastRetryConnectDescription=0,this.currentDescription=null,this.descriptionList=new Array,this.sBuf=new Array}hasMoreOptions(){let e=0;for(let t=0;t<this.descriptionList.length;++t)e+=this.descriptionList[t].getConnectOptions().length;return this.nextOptToTry<e}newConnectionDescription(){return this.currentDescription=new YE,this.currentDescription}getcurrentDescription(){return this.currentDescription}closeDescription(){this.descriptionList.push(this.currentDescription),this.currentDescription=null}async execute(e){e!=null&&this.retryCount==0&&e.retryCount>0&&(this.retryCount=e.retryCount);for(let t=this.lastRetryConnectDescription;t<this.descriptionList.length;t++){let n=this.descriptionList[t],o=new Array;o=n.getConnectOptions();let a=n.delayInMillis;e!=null&&(a==0||a==null)&&e.retryDelay>0&&(a=e.retryDelay*1e3);for(let T=this.lastRetryCounter;T<=this.retryCount;++T){for(;this.nextOptToTry<o.length;){let u=o[this.nextOptToTry];return this.lastRetryCounter=T,this.lastRetryConnectDescription=t,this.nextOptToTry++,u}this.nextOptToTry=0,a>0&&T<this.retryCount&&await vM(a)}this.lastRetryCounter=0}throw this.nextOptToTry=1e3,this.lastRetryCounter=1e3,new Error("All options tried")}};_(VE,"ConnStrategy");var ME=VE;function vM(s){return new Promise(e=>setTimeout(e,s))}_(vM,"sleep");async function kM(s){let e;typeof s=="string"?e=FM(s):e=s;let t=e.name.toUpperCase(),n=null;switch(t){case"ADDRESS":n=new MM;break;case"ADDRESS_LIST":n=new xM;break;case"DESCRIPTION":n=new VM;break;case"DESCRIPTION_LIST":n=new bM;break;default:cR.throwErr(cR.ERR_INVALID_CONNECT_STRING_PARAMETERS,`unknown top element ${t}`)}n.initFromNVPair(e);let o=new ME;return await n.navigate(o),o}_(kM,"createNode");lR.exports={createNode:kM}});var SR=Y((_q,hR)=>{"use strict";var{lookup:qM}=require("dns").promises,Dn=Ee(),ER=new RegExp("((?=(?<hostnames>(((\\[[A-z0-9:]+\\])|([A-z0-9][A-z0-9._-]+))[,]?)+)))\\k<hostnames>(:(?<port>\\d+)?)?","g"),GM=new RegExp("^(((?<protocol>[A-z0-9]+):)?//)?(?<hostinfo>("+ER.source+"(?=([,]|[;]|[/]|[:]|$))([,]|[;])?)+)(/(?<servicename>[A-z0-9][A-z0-9,-.]+)?)?(:(?<servermode>dedicated|shared|pooled))?(/(?<instance>[A-z0-9][A-z0-9]+))?$","ig"),uR='"',HM="=",KM="&",WM=["ENABLE","FAILOVER","LOAD_BALANCE","RECV_BUF_SIZE","SEND_BUF_SIZE","SDU","SOURCE_ROUTE","RETRY_COUNT","RETRY_DELAY","CONNECT_TIMEOUT","TRANSPORT_CONNECT_TIMEOUT","RECV_TIMEOUT"],FE=class FE{constructor(e){this.URL_PROPS_ALIAS=this.initializeUrlAlias();let t=e.indexOf("@");t!=-1?(this.url=e.substring(t+1),this.urlPrefix=e.substring(0,t+1)):(this.url=e,this.urlPrefix=""),this.resolvedUrl="",this.connectionProps=new Map,this.urlProps=new Map,this.lb=!1}async getResolvedUrl(){return await this.parse(),this.resolvedUrl}async parse(){let e=this.parseExtendedSettings(this.url);this.connectionProps.size===0&&this.urlProps.size===0&&(e=this.url),e.startsWith("(")?this.resolvedUrl=this.urlPrefix+e:this.resolvedUrl=this.urlPrefix+await this.resolveToLongURLFormat(e)}async resolveToLongURLFormat(e){let t=e.replace(/\s/g,""),n=0,o=null,a=null,T=null,u=null,h=null;for(let p of t.matchAll(GM))n=1,o=p.groups.protocol,a=p.groups.hostinfo,T=p.groups.servicename,u=p.groups.servermode,h=p.groups.instance;n||Dn.throwErr(Dn.ERR_INVALID_EZCONNECT_SYNTAX,"input string not in easy connect format",t),o==null?e.includes("//")||(o="TCP"):o.toLowerCase()!="tcp"&&o.toLowerCase()!="tcps"&&Dn.throwErr(Dn.ERR_INVALID_EZCONNECT_SYNTAX,"Unsupported protocol in thin mode",o);let A=this.urlProps.get("HTTPS_PROXY"),N=this.urlProps.get("HTTPS_PROXY_PORT"),R=await this.buildAddressList(a,o,A,N),g=this.urlProps.get("CONNECTION_ID_PREFIX"),I=[];return this.lb&&I.push("(LOAD_BALANCE=ON)"),I.push(this.buildDescriptionParams()),I.push(R),I.push(this.buildConnectData(T,u,h,g)),I.push(this.buildSecurityInfo(o)),`(DESCRIPTION=${I.join("")})`}buildConnectData(e,t,n,o){let a=this.urlProps.get("POOL_CONNECTION_CLASS"),T=this.urlProps.get("POOL_PURITY"),u=this.urlProps.get("SERVICE_TAG"),h=[];return e?h.push(`(SERVICE_NAME=${e})`):h.push("(SERVICE_NAME=)"),t&&h.push(`(SERVER=${t})`),n&&h.push(`(INSTANCE_NAME=${n})`),a&&h.push(`(POOL_CONNECTION_CLASS=${a})`),T&&h.push(`(POOL_PURITY=${T})`),u&&h.push(`(SERVICE_TAG=${u})`),o&&h.push(`(CONNECTION_ID_PREFIX=${o})`),`(CONNECT_DATA=${h.join("")})`}async buildAddressList(e,t,n,o){let a="",T=0,u=new Array,h="";n!=null&&(o!=null?h=`(HTTPS_PROXY=${n})(HTTPS_PROXY_PORT=${o})`:h=`(HTTPS_PROXY=${n})`),t==null&&(t="TCP");let A=0,N=e.split(";");for(let R in N){let g=0,I=new Array;for(let m of N[R].matchAll(ER)){let y=m.groups.hostnames.split(","),P=m.groups.port;P==null&&(P="1521");for(let M in y)I.push(this.getAddrStr(y[M],P,t,h)),a=y[M],g++}A+=g;let p=[];N.length>1&&g>1&&p.push("(LOAD_BALANCE=ON)"),p.push(I.join("")),N.length>1?u.push(`(ADDRESS_LIST=${p.join("")})`):u.push(p.join(""))}if(A==1){a=a.trim(),a.startsWith("[")&&a.endsWith("]")&&(a=a.substring(1,a.length-1));try{await qM(a),T++}catch{}T==0&&Dn.throwErr(Dn.ERR_INVALID_EZCONNECT_SYNTAX,"could not resolve hostname",a)}return N.length<2&&A>1&&(this.lb=!0),u.join("")}getAddrStr(e,t,n,o){let a=e.trim();return a.startsWith("[")&&a.endsWith("]")&&(a=a.substring(1,a.length-1)),`(ADDRESS=(PROTOCOL=${n})(HOST=${a})(PORT=${t})${o})`}buildDescriptionParams(){if(this.urlProps.size===0)return"";let e=new Array;return this.urlProps.forEach(function(t,n){WM.includes(n)&&e.push(`(${n}=${t})`)}),e.join("")}buildSecurityInfo(e){let t=new Array;if(e!=null&&e.toLowerCase()=="tcps"){let n=this.urlProps.get("SSL_SERVER_DN_MATCH")||"TRUE",o=this.urlProps.get("SSL_SERVER_CERT_DN"),a=this.urlProps.get("MY_WALLET_DIRECTORY");t.push(`(SSL_SERVER_DN_MATCH=${n})`),o!=null&&t.push(`(SSL_SERVER_CERT_DN=${o}})`),a!=null&&t.push(`(MY_WALLET_DIRECTORY=${a})`)}return t.length===0?"":`(SECURITY=${t.join("")})`}parseExtendedSettings(e){let t=Array.from(e.trim()),n=this.findExtendedSettingPosition(t);return n==-1?e:(this.parseExtendedProperties(t,n+1),e.substring(0,n))}parseExtendedProperties(e,t){let n=null,o=null,a=new Array(e.length),T=0,u="";for(let h=t;h<e.length;h++)if(e[h].trim()!="")switch(e[h]){case uR:u=this.parseQuotedString(h,e,T,a),T=u[1],h=u[0];break;case HM:n!=null&&Dn.throwErr(Dn.ERR_INVALID_EZCONNECT_SYNTAX,"unable to parse, invalid syntax",this.url),n=a.join("").substring(0,T).trim(),T=0;break;case KM:n==null&&Dn.throwErr(Dn.ERR_INVALID_EZCONNECT_SYNTAX,"unable to parse, invalid syntax",this.url),o=a.join("").substring(0,T).trim(),this.addParam(n,o),n=null,o=null,T=0;break;default:a[T++]=e[h]}n!=null&&(o=a.join("").substring(0,T).trim(),this.addParam(n,o))}parseQuotedString(e,t,n,o){let a=e+1;for(;a<t.length;){let T=t[a];if(T==uR)return[a,n];o[n++]=T,a++}}addParam(e,t){let n=e.toLowerCase(),o=this.URL_PROPS_ALIAS.get(n);o!=null?this.urlProps.set(o,t):this.connectionProps.set(o,t)}findExtendedSettingPosition(e){let t=0;for(let n=0;n<e.length;n++)if(e[n]=="(")t++;else if(e[n]==")")t--;else if(e[n]=="?"&&t==0)return n;return-1}initializeUrlAlias(){let e=new Map;return e.set("enable","ENABLE"),e.set("failover","FAILOVER"),e.set("load_balance","LOAD_BALANCE"),e.set("recv_buf_size","RECV_BUF_SIZE"),e.set("send_buf_size","SEND_BUF_SIZE"),e.set("sdu","SDU"),e.set("source_route","SOURCE_ROUTE"),e.set("retry_count","RETRY_COUNT"),e.set("retry_delay","RETRY_DELAY"),e.set("https_proxy","HTTPS_PROXY"),e.set("https_proxy_port","HTTPS_PROXY_PORT"),e.set("connect_timeout","CONNECT_TIMEOUT"),e.set("transport_connect_timeout","TRANSPORT_CONNECT_TIMEOUT"),e.set("recv_timeout","RECV_TIMEOUT"),e.set("ssl_server_cert_dn","SSL_SERVER_CERT_DN"),e.set("ssl_server_dn_match","SSL_SERVER_DN_MATCH"),e.set("wallet_location","MY_WALLET_DIRECTORY"),e.set("pool_connection_class","POOL_CONNECTION_CLASS"),e.set("pool_purity","POOL_PURITY"),e.set("service_tag","SERVICE_TAG"),e.set("connection_id_prefix","CONNECTION_ID_PREFIX"),e}};_(FE,"EZConnectResolver");var bE=FE;hR.exports=bE});var dR=Y((lq,AR)=>{"use strict";var{createNVPair:$M,findValue:zM}=No(),m_=require("fs"),fR=require("process"),XM=require("readline"),Li=Ee();function QM(s){let e=null,t=fR.env.TNS_ADMIN;if(s){if(e=s+"/tnsnames.ora",m_.existsSync(e))return e;Li.throwErr(Li.ERR_TNS_NAMES_FILE_MISSING,s)}else return t?(e=t,e+="/tnsnames.ora",m_.existsSync(e)||Li.throwErr(Li.ERR_TNS_NAMES_FILE_MISSING,t)):Li.throwErr(Li.ERR_NO_CONFIG_DIR),e}_(QM,"tnsnamesFilePath");var NR=0,kE=class kE{async initializeNlpa(e){let t=m_.statSync(e);if(!(t.mtime-NR))return this.ht;let n=XM.createInterface({input:m_.createReadStream(e),output:fR.stdout,terminal:!1});return this.ht=new Map,await _(async()=>{let a="";for await(let T of n)if(T.length!=0){if(T[0]=="#")continue;if(T[0]==" "||T[0]=="	"||T[0]==")"||T[0]=="("){if(T=T.replace(/\s+/g,""),T=this.checkNLPforComments(T),T.length==0)continue;a=a+T}else a.length==0?(T=this.checkNLPforComments(T),a=a+T):a.length!=0&&(this.addNLPListElement(a),a="",T=this.checkNLPforComments(T),a=a+T)}return a.length!=0&&(this.addNLPListElement(a),a=""),NR=t.mtime,this.ht},"start")()}checkNLPforComments(e){let t=new Array(e.length);for(let n=0;n<e.length;n++){let o=e[n];if(o=="#"){if(n!=0)break;return""}else t.push(o)}return t.join("")}addNLPListElement(e){let t=e.split(/\r?\n/).filter(n=>n);for(let n=0;n<t.length;n++){t[n].charAt(0)!="("&&(t[n]="("+t[n]+")");let o=$M(t[n]),T=o.name.toUpperCase();o.name=T;let u=T.split(",");for(let h=0;h<u.length;h++)this.ht.set(u[h],o)}}toString(){let e="";return this.ht.forEach(t=>{e=e+t.toString()+`
`}),e}findValueOf(e){let t=e.split("/");return zM(this.ht.get(t[0].toUpperCase()),t)}};_(kE,"NLParamParser");var vE=kE;AR.exports={NLParamParser:vE,tnsnamesFilePath:QM}});var WE=Y((uq,PR)=>{"use strict";var hn=kP(),JM=HP(),jM=$P(),me=Ci(),{createNode:ZM}=TR(),Tt=Ee(),{findNVPairRecurse:ex,createNVPair:P_,findValue:gn}=No(),{Buffer:pR}=require("buffer"),tx=SR(),{NLParamParser:rx,tnsnamesFilePath:nx}=dR(),sx=require("process");async function ix(s){let e=await mR(s.connectString,s.configDir),t;typeof e=="string"?t=P_(e):t=e;let n=gn(t,["DESCRIPTION","CONNECT_DATA","SERVER"]),o=gn(t,["DESCRIPTION","CONNECT_DATA","POOL_CONNECTION_CLASS"]),a=gn(t,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"]),T=gn(t,["DESCRIPTION","CONNECT_DATA","POOL_PURITY"]);return[n,o,a,T]}_(ix,"getConnectionInfo");var ox=new rx;async function mR(s,e){let t=s.trim(),n=t;if(t.indexOf(")")==-1||t.indexOf("(")!=0)try{n=await new tx(t).getResolvedUrl()}catch(o){try{let a=nx(e);n=(await ox.initializeNlpa(a)).get(t.toUpperCase()),n||Tt.throwErr(Tt.ERR_TNS_ENTRY_NOT_FOUND,t,e?e+"/tnsnames.ora":sx.env.TNS_ADMIN+"/tnsnames.ora"),n=n.getListElement(0)}catch(a){throw t.indexOf(":")!=-1||t.indexOf("/")!=-1?o:a}}return n}_(mR,"resolveConnectStr");async function GE(s,e){let t=await mR(s,e);return ZM(t)}_(GE,"resolveAddress");function qE(s,e,t,n,o){let a,T=new Promise((u,h)=>{e>2147483647&&(e=2147483647),a=setTimeout(()=>h(Tt.getErr(Tt.ERR_CONNECTION_TIMEDOUT,n.host,n.port,t,e/1e3,o)),e)});return Promise.race([s,T]).then(u=>(clearTimeout(a),u)).catch(u=>{throw clearTimeout(a),u})}_(qE,"timeout");var KE=class KE{constructor(){this.connected=!1,this.isBreak=!1,this.isReset=!1,this.breakPosted=!1}async getAddress(e,t){let n=await e.execute(t),o=this.sAtts?this.sAtts.uuid:null;this.sAtts=new jM(o),this.sAtts.setFrom(t),this.sAtts.setFrom(n.desc.params),await this.sAtts.prepare(n.protocol);let a=P_(n.CNdata.join("")),T=ex(a,"CONNECT_DATA"),u=`(CONNECTION_ID=${this.sAtts.connectionId})`,h=P_(u);return T.addListElement(h),this.cData=pR.from(a.toString(),"ascii"),this.cDataNVPair=a,n}async transportConnect(e){e.protocol.toUpperCase()=="TCP"&&e.httpsProxy&&Tt.throwErr(Tt.ERR_INVALID_CONNECT_STRING_PARAMETERS,"https proxy requires protocol as","tcps "),e.protocol&&(e.protocol.toUpperCase()=="TCP"||e.protocol.toUpperCase()=="TCPS")?this.ntAdapter=new JM(this.sAtts.nt):Tt.throwErr(Tt.ERR_INVALID_CONNECT_STRING_PARAMETERS,e.protocol+" protocol not supported"),await this.ntAdapter.connect(e),this.ntAdapter.startRead(),this.sAtts.ntCha=this.ntAdapter.cha,this.sndDatapkt=new hn.DataPacket(this.sAtts.largeSDU),this.rcvDatapkt=new hn.DataPacket(this.sAtts.largeSDU)}_sendConnect(e){this._sendPacket(e.buf),e.overflow&&(this._send(e.connectData,0,e.connectDataLen),this.flush())}async connect2(e){if(this.sAtts.sdu?this.sAtts.sdu>me.NSPABSSDULN?this.sAtts.sdu=me.NSPABSSDULN:this.sAtts.sdu<me.NSPMNSDULN&&(this.sAtts.sdu=me.NSPMNSDULN):this.sAtts.sdu=me.NSPDFSDULN,this.sAtts.transportConnectTimeout){let n=this.transportConnect(e);await qE(n,this.sAtts.transportConnectTimeout,"transportConnectTimeout",e,this.sAtts.connectionId)}else await this.transportConnect(e);let t=new hn.ConnectPacket(this.cData,this.sAtts);for(this._sendConnect(t);;){let n=await this._recvPacket();if(n.type===me.NSPTAC)break;if(n.type===me.NSPTRF){this.refusePkt.overflow&&(await this._recvPacket(),this.refusePkt.dataBuf=this.rcvDatapkt.buf.subarray(this.rcvDatapkt.offset,this.rcvDatapkt.len).toString());let o=P_(this.refusePkt.dataBuf);this.refusePkt=null;let a=gn(o,["DESCRIPTION","ERR"]);a=="12514"?Tt.throwErr(Tt.ERR_INVALID_SERVICE_NAME,this.getOption(me.SVCNAME),e.host,e.port,this.sAtts.connectionId):a=="12505"?Tt.throwErr(Tt.ERR_INVALID_SID,this.getOption(me.SID),e.host,e.port,this.sAtts.connectionId):a?Tt.throwErr(Tt.ERR_CONNECTION_REFUSED,e.host,e.port,this.sAtts.connectionId,"ORA-"+a):Tt.throwErr(Tt.ERR_CONNECTION_REFUSED,e.host,e.port,this.sAtts.connectionId,"refused")}else if(n.type===me.NSPTRS)(n.flags&me.NSPFSRN)==me.NSPFSRN&&(await this.ntAdapter.renegTLS(),this.ntAdapter.startRead()),this._sendConnect(t);else if(n.type===me.NSPTRD){let o,a,T,u;this.redirectPkt.overflow&&(await this._recvPacket(),this.redirectPkt.dataBuf=this.rcvDatapkt.buf.subarray(this.rcvDatapkt.offset,this.rcvDatapkt.len)),this.redirectPkt.flags&me.NSPFRDS?(o=this.redirectPkt.dataBuf.indexOf("\0",0,"ascii"),a=this.redirectPkt.dataBuf.toString("ascii",0,o),u=this.redirectPkt.dataBuf.subarray(o+1,this.redirectPkt.dataLen)):(a=this.redirectPkt.dataBuf.toString("ascii"),u=this.cData),T=await GE(a);let h=e.host;if(e=await T.execute(),e.desc&&this.sAtts.setFrom(e.desc.params),e.originHost=h,this.redirectPkt=null,this.ntAdapter.disconnect(me.NSFIMM),this.sAtts.transportConnectTimeout){let A=this.transportConnect(e);await qE(A,this.sAtts.transportConnectTimeout,"transportConnectTimeout",e,this.sAtts.connectionId)}else await this.transportConnect(e);t=new hn.ConnectPacket(u,this.sAtts,me.NSPFRDR),this.sndDatapkt=new hn.DataPacket(this.sAtts.largeSDU),this._sendConnect(t)}}return this.connected=!0,this.cData=null,this.sndDatapkt=new hn.DataPacket(this.sAtts.largeSDU),this.sndDatapkt.createPacket(me.NSPDADAT),this.sndDatapkt.offset=this.sndDatapkt.dataPtr,this.sndDatapkt.len=this.sndDatapkt.bufLen,this.markerPkt=new hn.MarkerPacket(this.sAtts.largeSDU),this.controlPkt=new hn.ControlPacket,this.ntAdapter.largeSDU=this.sAtts.largeSDU,this.sAtts.nt.wallet=null,this.sAtts.nt.walletPassword=null,!0}async connect1(e,t,n){let o,a;do try{if(this.sAtts.connectTimeout){let T=this.connect2(e);o=await qE(T,this.sAtts.connectTimeout,"connectTimeout",e,this.sAtts.connectionId)}else o=await this.connect2(e)}catch(T){T.message.startsWith("NJS-510")&&(this.ntAdapter.connected=!0),this.ntAdapter&&(this.ntAdapter.disconnect(me.NSFIMM),this.ntAdapter=null),o=!1,a=T;try{e=await this.getAddress(t,n)}catch{break}}while(!o);if(!o)throw a}_processPacket(e){switch(e.type){case me.NSPTDA:this.rcvDatapkt.fromPacket(e);break;case me.NSPTMK:this.markerPkt.fromPacket(e,this);break;case me.NSPTCNL:this.controlPkt.fromPacket(e);break;case me.NSPTAC:hn.AcceptPacket(e,this.sAtts);break;case me.NSPTRF:this.refusePkt=new hn.RefusePacket(e);break;case me.NSPTRS:break;case me.NSPTRD:this.redirectPkt=new hn.RedirectPacket(e);break;default:Tt.throwErr(Tt.ERR_CONNECTION_INVALID_PACKET)}}async _recvPacket(){for(;;){let e=await this.ntAdapter.receive();if(!e)break;if(this._processPacket(e),e.type!==me.NSPTCNL)return e}}_sendPacket(e){this.ntAdapter.send(e)}sendBreak(){if(!this.isBreak){if(!this.connected){this.isBreak=!0,this.breakPosted=!0;return}this.isBreak=!0,this.markerPkt.prepare(me.NSPMKTD1,me.NIQIMARK),this._sendPacket(this.markerPkt.buf)}}async reset(){for(this.breakPosted&&(this.markerPkt.prepare(me.NSPMKTD1,me.NIQBMARK),this._sendPacket(this.markerPkt.buf),this.breakPosted=!1),this.markerPkt.prepare(me.NSPMKTD1,me.NIQRMARK),this._sendPacket(this.markerPkt.buf);!this.isReset;)await this._recvPacket();this.sndDatapkt.dataPtr=this.sndDatapkt.dataLen=me.NSPDADAT,this.sndDatapkt.offset=this.sndDatapkt.dataPtr,this.sndDatapkt.len=this.sndDatapkt.bufLen,this.isBreak=this.isReset=!1}async recvPacket(){return await this._recvPacket()}syncRecvPacket(){for(;this.ntAdapter.packets.length>0;){let e=this.ntAdapter.syncReceive();if(!e)break;if(this._processPacket(e),e.type!==me.NSPTCNL)return e}}_send(e,t,n){if(this.isBreak)return;let o=0;for(this.sndDatapkt.dataLen=this.sndDatapkt.offset,(this.sndDatapkt.dataLen<this.sndDatapkt.bufLen||!this.sndDatapkt.bufLen)&&(o=this.sndDatapkt.fillBuf(e,t,n),n-=o,t+=o,this.sndDatapkt.offset=this.sndDatapkt.dataLen);n;){if(this._sendPacket(this.sndDatapkt.dataBuf),this.isBreak)return;this.sndDatapkt.dataLen=this.sndDatapkt.dataPtr,this.sndDatapkt.offset=this.sndDatapkt.dataPtr,o=this.sndDatapkt.fillBuf(e,t,n),n-=o,t+=o,this.sndDatapkt.offset=this.sndDatapkt.dataLen}}flush(){this.isBreak||(this.sndDatapkt.dataLen=this.sndDatapkt.offset,this.sndDatapkt.prepare2Send(),this._sendPacket(pR.from(this.sndDatapkt.dataBuf)),this.sndDatapkt.dataLen=this.sndDatapkt.dataPtr,this.sndDatapkt.offset=this.sndDatapkt.dataPtr)}async connect(e){let t=e.connectString?e.connectString:e.connectionString,n=await GE(t,e.configDir),o;try{o=await this.getAddress(n,e)}catch(a){a.message=="All options tried"?Tt.throwErr(Tt.ERR_INVALID_CONNECT_STRING_PARAMETERS,"Ensure the ADDRESS parameters have been entered correctly, the most likely incorrect parameter is the host name"):Tt.throwErr(Tt.ERR_INVALID_CONNECT_STRING_PARAMETERS,a.message)}await this.connect1(o,n,e)}disconnect(e){this.connected&&(e!=me.NSFIMM&&!this.ntAdapter.err&&(this.sndDatapkt.dataLen=this.sndDatapkt.offset,this.sndDatapkt.prepare2Send(me.NSPDAFEOF),this._sendPacket(this.sndDatapkt.dataBuf)),this.ntAdapter.disconnect(e),this.ntAdapter=null,this.connected=!1)}getOption(e){switch(e){case me.NS_MOREDATA:return this.ntAdapter.packets.length>0;case me.SVCNAME:return gn(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"]);case me.SID:return gn(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SID"]);case me.SERVERTYPE:return gn(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVER"]);case me.REMOTEADDR:return this.ntAdapter?this.ntAdapter.getOption(e):null;case me.CONNCLASS:return gn(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","POOL_CONNECTION_CLASS"]);case me.PURITY:return gn(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","POOL_PURITY"]);case me.HEALTHCHECK:return this.connected&&this.ntAdapter.connected&&!this.ntAdapter.err;default:Tt.throwErr(Tt.ERR_INTERNAL,"getOption not supported for opcode "+e)}}recvInbandNotif(){let e=0;if(this.controlPkt.errno)return e=this.controlPkt.errno,e;if(this.getOption(me.HEALTHCHECK))if(this.getOption(me.NS_MOREDATA)){let t=this.ntAdapter.syncReceive();return t.type==me.NSPTCNL?(this.controlPkt.fromPacket(t),e=this.controlPkt.errno,e):(this.ntAdapter.packets.unshift(t),0)}else return 0;else return Tt.ERR_CONNECTION_CLOSED}};_(KE,"NetworkSession");var HE=KE;PR.exports={NetworkSession:HE,resolveAddress:GE,getConnectionInfo:ix}});var RR=Y((hq,zE)=>{"use strict";var{Buffer:ax}=require("buffer"),jt=ir(),_x=Oi(),cx=new RegExp('(?<=:)\\s*((?:".*?")|(?:[\\p{L}][\\p{L}\\p{Nd}_\\$#]*)|\\p{Nd}+)',"gu"),lx=/(?<=\bRETURN(?:ING)?\b)/si,Tx=/(?<=\bINTO\b)/gsi,ux=/--.*/g,Ex=/\/\*.*?\*\//sg,hx=/'.*?'/sg,XE=class XE{constructor(e,t=!1){this.bindName=e,this.isReturnBind=t,this.maxSize=0,this.numElements=0,this.maxArraySize=0,this.type=null,this.isArray=!1,this.dir=jt.BIND_IN,this.bindVar=null}};_(XE,"BindInfo");var Po=XE;zE.exports.BindInfo=Po;var R_=class R_{constructor(){this.sql="",this.sqlBytes=[],this.sqlLength=0,this.cursorId=0,this.requiresDefine=!1,this.isQuery=!1,this.isPlSql=!1,this.isDml=!1,this.isDdl=!1,this.isReturning=!1,this.bindInfoList=[],this.queryVars=[],this.bindInfoDict=new Map,this.requiresFullExecute=!1,this.noPrefetch=!1,this.returnToCache=!1,this.numColumns=0,this.lastRowIndex,this.lastRowid,this.moreRowsToFetch=!0,this.inUse=!1,this.bufferRowIndex=0,this.bufferRowCount=0,this.statementType=jt.STMT_TYPE_UNKNOWN}_copy(){let e=new R_;e.sql=this.sql,e.sqlBytes=this.sqlBytes,e.sqlLength=this.sqlLength,e.isQuery=this.isQuery,e.isPlSql=this.isPlSql,e.isDml=this.isDml,e.isDdl=this.isDdl,e.isReturning=this.isReturning,e.bindInfoList=[];for(let n of this.bindInfoList){let o=new Po(n.bindName,n.isReturnBind);e.bindInfoList.push(o)}let t=e.bindInfoDict=new Map;for(let n of e.bindInfoList)t.has(n.bindName)?t.get(n.bindName).push(n):t.set(n.bindName,[n]);return e.returnToCache=!1,e}_determineStatementType(e){e=_x.cleanSql(e);let t=e.trim().trimStart("(").substring(0,10).split(" ");if(t.length>0){let n=t[0].toUpperCase();["DECLARE","BEGIN","CALL"].includes(n)?(this.isPlSql=!0,n==="DECLARE"?this.statementType=jt.STMT_TYPE_DECLARE:n==="BEGIN"?this.statementType=jt.STMT_TYPE_BEGIN:n==="CALL"&&(this.statementType=jt.STMT_TYPE_CALL)):["SELECT","WITH"].includes(n)?(this.isQuery=!0,n==="SELECT"&&(this.statementType=jt.STMT_TYPE_SELECT)):["INSERT","UPDATE","DELETE","MERGE"].includes(n)?(this.isDml=!0,n==="INSERT"?this.statementType=jt.STMT_TYPE_INSERT:n==="UPDATE"?this.statementType=jt.STMT_TYPE_UPDATE:n==="DELETE"?this.statementType=jt.STMT_TYPE_DELETE:n==="MERGE"&&(this.statementType=jt.STMT_TYPE_MERGE)):["CREATE","ALTER","DROP","TRUNCATE"].includes(n)?(this.isDdl=!0,n==="CREATE"?this.statementType=jt.STMT_TYPE_CREATE:n==="ALTER"?this.statementType=jt.STMT_TYPE_ALTER:n==="DROP"&&(this.statementType=jt.STMT_TYPE_DROP)):n==="COMMIT"?this.statementType=jt.STMT_TYPE_COMMIT:n==="ROLLBACK"?this.statementType=jt.STMT_TYPE_ROLLBACK:n==="MERGE"?this.statementType=jt.STMT_TYPE_MERGE:this.statementType=jt.STMT_TYPE_UNKNOWN}}_prepare(e){this.sql=e,this.sqlBytes=ax.from(this.sql,"utf8"),this.sqlLength=this.sqlBytes.length,e=e.replace(hx,"'S'"),e=e.replace(ux,""),e=e.replace(Ex,""),this._determineStatementType(e);let t;if(this.isQuery||this.isDml||this.isPlSql){let n=e;if(this.isDml){let o,a=-1,T=e.search(lx),u=Tx;for(;(o=u.exec(e.slice(T)))!=null;)a=o.index,u.lastIndex=o.index+1;T>-1&&a>-1&&(a=T+a,n=e.slice(0,a),t=e.slice(a))}this._addBinds(n,!1),t&&(this.isReturning=!0,this._addBinds(t,!0))}}_addBinds(e,t){let n=[...e.matchAll(cx)],o;n.forEach(a=>{if(a[0].startsWith('"')&&a[0].endsWith('"')?o=a[0].substring(1,a[0].length-1):o=a[0].trim().toUpperCase(),this.isPlSql&&this.bindInfoDict.has(o))return;let T=new Po(o,t);this.bindInfoList.push(T),this.bindInfoDict.has(T.bindName)?this.bindInfoDict.get(T.bindName).push(T):this.bindInfoDict.set(T.bindName,[T])})}_setVariable(e,t){(t.maxSize!==e.maxSize||t.dir!==e.dir||t.isArray!==e.isArray||t.values.length>e.numElements||t.type!=e.type||t.maxArraySize!=e.maxArraySize)&&(e.isArray=t.isArray,e.numElements=t.values.length,e.maxSize=t.maxSize,e.type=t.type,e.dir=t.dir,e.maxArraySize=t.maxArraySize,this.requiresFullExecute=!0),e.bindVar=t}};_(R_,"Statement");var $E=R_;zE.exports.Statement=$E});var DR=Y((Nq,IR)=>{"use strict";var{Buffer:Qe}=require("buffer"),Sn=require("crypto"),I_="aes-256-cbc",Sx=Qe.from([0,1]),JE=class JE{_decrypt(e,t){let n=Qe.alloc(16,0),o=Sn.createDecipheriv(I_,e,n);o.setAutoPadding(!1);let a=o.update(t);return a=Qe.concat([a,o.final()]),a}_encrypt(e,t,n){let o=16,a=Qe.alloc(o,0),T=o-t.length%o,u=Qe.alloc(T,T);T>0&&(n?t+=Qe.alloc(T):t=Qe.concat([t,u]));let h=Sn.createCipheriv(I_,e,a),A=h.update(t);return A=Qe.concat([A,h.final()]),n||(A=A.slice(0,t.length)),t.fill(0),A}_setEncryptedPasswordBuffers(e,t,n,o){let a=Qe.alloc(16);Sn.randomFillSync(a,0,16);let T=Qe.concat([a,e]);if(o.encodedPassword=this._encrypt(n,T),T.fill(0),o.encodedPassword=o.encodedPassword.slice().toString("hex").toUpperCase(),t){let u=Qe.concat([a,t]);o.encodedNewPassword=this._encrypt(n,u),u.fill(0),o.encodedNewPassword=o.encodedNewPassword.slice().toString("hex").toUpperCase()}e.fill(0),t&&t.fill(0)}updateVerifierData(e,t,n,o,a){let T=32,u="sha512",h=Qe.from(e.AUTH_VFR_DATA,"hex"),A=Qe.from(e.AUTH_SESSKEY,"hex"),N=Number(e.AUTH_PBKDF2_VGEN_COUNT),R=Qe.from(t,"utf8"),g,I;if(o){I_="aes-192-cbc",T=24,u="sha1";let B=Sn.createHash(u);B.update(R),B.update(h);let F=B.digest();g=Qe.alloc(F.length+4),F.copy(g,0,0,F.length)}else{I_="aes-256-cbc";let B=Qe.from("AUTH_PBKDF2_SPEEDY_KEY","utf8"),F=Qe.concat([h,B]);I=Sn.pbkdf2Sync(R,F,N,64,"sha512");let $=Sn.createHash(u);$.update(I),$.update(h),g=$.digest().slice(0,T)}let p;n&&(p=Qe.from(n,"utf8"));let m=this._decrypt(g,A),y=Qe.alloc(m.length);Sn.randomFillSync(y);let P=this._encrypt(g,y);if(m.length===48){a.sessionKey=P.slice().toString("hex").toUpperCase().slice(0,96);let B=Qe.alloc(24);for(let j=16;j<=40;j++)B[j-16]=m[j]^y[j];let F=Sn.createHash("md5").update(B.subarray(0,16)).digest(),$=Sn.createHash("md5").update(B.subarray(16)).digest();a.comboKey=Qe.concat([F,$]).slice(0,T)}else{a.sessionKey=P.slice().toString("hex").toUpperCase().slice(0,64);let B=Qe.from(e.AUTH_PBKDF2_CSK_SALT,"hex");N=Number(e.AUTH_PBKDF2_SDER_COUNT);let $=Qe.concat([y.slice(0,T),m.slice(0,T)]).toString("hex").toUpperCase(),j=Qe.from($,"utf8");a.comboKey=Sn.pbkdf2Sync(j,B,N,T,"sha512")}let M=Qe.alloc(16);if(!o){Sn.randomFillSync(M,0,16);let B=Qe.concat([M,I]);a.speedyKey=this._encrypt(a.comboKey,B),a.speedyKey=a.speedyKey.slice(0,80).toString("hex").toUpperCase()}this._setEncryptedPasswordBuffers(R,p,a.comboKey,a)}getEncryptedJSWPData(e,t){let n=this._encrypt(e,t,!0);return n=n.slice().toString("hex").toUpperCase(),n=Qe.concat([n,Sx]),n}updatePasswordsWithComboKey(e,t,n,o){let a=Qe.from(e,"utf8"),T;t&&(T=Qe.from(t,"utf8")),this._setEncryptedPasswordBuffers(a,T,n,o)}};_(JE,"EncryptDecrypt");var QE=JE,Nx=new QE;IR.exports=Nx});var LR=Y((Aq,yR)=>{"use strict";var{Buffer:jE}=require("buffer"),Fe=At(),gR=Ee(),CR=require("process"),ZE=DR(),fx=En(),OR=Oi(),D_=OR.CLIENT_INFO,Ax=require("crypto"),th=class th extends fx{constructor(e,t){super(e),this.functionCode=Fe.TNS_FUNC_AUTH_PHASE_ONE,this.messageType=Fe.TNS_MSG_TYPE_FUNCTION,this.sessionData={},this.conn=e,this.sessionKey="",this.encodedPassword="",this.changePassword=!1,Object.defineProperty(this,"password",{enumerable:!1,value:t.password}),this.username=t.user,this.username===void 0?this.username="":this.username=this.username.trim(),this.schemaUser="",this.proxyUser="",this.proxyStatus=-1,this.username.length!==0&&(this.proxyStatusObj=OR.checkProxyUserValidity(this.username),this.proxyStatusObj.status===0&&(this.proxyStatus=0,this.proxyUser=this.proxyStatusObj.proxyUser,this.schemaUser=this.proxyStatusObj.schemaUser,this.username=this.proxyUser)),this.newPassword=t.newPassword,t.changePassword&&(this.changePassword=!0,this.functionCode=Fe.TNS_FUNC_AUTH_PHASE_TWO),this.username?this.userByteLen=jE.byteLength(this.username):this.userByteLen=0,this.token=t.token,this.token&&(this.functionCode=Fe.TNS_FUNC_AUTH_PHASE_TWO),this.privateKey=t.privateKey,this.privateKey&&(this.privateKey=`-----BEGIN PRIVATE KEY-----
`+this.privateKey,this.privateKey=this.privateKey+`
-----END PRIVATE KEY-----`),this.serviceName=this.conn.serviceName,this.remoteAddress=this.conn.remoteAddress,this.setAuthMode()}setAuthMode(){this.newPassword||(this.authMode=Fe.TNS_AUTH_MODE_LOGON),this.conn.privilege&Fe.SYSDBA&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSDBA),this.conn.privilege&Fe.SYSOPER&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSOPER),this.conn.privilege&Fe.SYSASM&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSASM),this.conn.privilege&Fe.SYSBKP&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSBKP),this.conn.privilege&Fe.SYSDG&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSDGD),this.conn.privilege&Fe.SYSKM&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSKMT),this.conn.privilege&Fe.SYSRAC&&(this.authMode|=Fe.TNS_AUTH_MODE_SYSRAC),this.privateKey&&(this.authMode|=Fe.TNS_AUTH_MODE_IAM_TOKEN),this.newPassword&&(this.authMode|=Fe.TNS_AUTH_MODE_CHANGE_PASSWORD),this.token||(this.authMode|=Fe.TNS_AUTH_MODE_WITH_PASSWORD)}getAlterTimezoneStatement(){let e,t;if(CR.env.ORA_SDTZ)t=CR.env.ORA_SDTZ;else{let o=new Date().getTimezoneOffset(),a=Math.trunc(o/60),T=Math.abs((o-a*60)%60);a<0?(e="+",a=-a):e="-",a=a.toLocaleString("en-US",{minimumIntegerDigits:2}),t=`${e}${a}:${T}`}return`ALTER SESSION SET TIME_ZONE ='${t}'\0`}encode(e){let t=!1;if(this.writeFunctionHeader(e),this.userByteLen>0?e.writeUInt8(1):e.writeUInt8(0),e.writeUB4(this.userByteLen),e.writeUB4(this.authMode),this.functionCode===Fe.TNS_FUNC_AUTH_PHASE_ONE)e.writeUInt8(1),e.writeUB4(5),e.writeUInt8(0),e.writeUInt8(1),this.userByteLen>0&&e.writeBytesWithLength(jE.from(this.username)),e.writeKeyValue("AUTH_TERMINAL","unknown"),e.writeKeyValue("AUTH_PROGRAM_NM",D_.program),e.writeKeyValue("AUTH_MACHINE",D_.hostName),e.writeKeyValue("AUTH_PID",D_.pid),e.writeKeyValue("AUTH_SID",D_.userName);else{let n=0;if(this.changePassword?(ZE.updatePasswordsWithComboKey(this.password,this.newPassword,this.conn.comboKey,this),n=2):(n=4,this.token?n+=1:(n+=2,this.verifierType===Fe.TNS_VERIFIER_TYPE_11G_1||this.verifierType===Fe.TNS_VERIFIER_TYPE_11G_2?t=!0:this.verifierType!==Fe.TNS_VERIFIER_TYPE_12C?gR.throwErr(gR.ERR_UNSUPPORTED_VERIFIER_TYPE,this.verifierType.toString(16)):n+=1,ZE.updateVerifierData(this.sessionData,this.password,this.newPassword,t,this),this.conn.comboKey=this.comboKey,this.newPassword&&(n+=1)),this.privateKey&&(n+=2),this.conn.connClass&&(n+=1),this.conn.purity&&(n+=1),this.conn.jdwpData&&(this.encryptedJDWPData=ZE.getEncryptedJSWPData(this.sessionKey,this.conn.jdwpData),n+=1),this.schemaUser.length!==0&&(n+=1)),e.writeUInt8(1),e.writeUB4(n),e.writeUInt8(1),e.writeUInt8(1),this.userByteLen>0&&e.writeBytesWithLength(jE.from(this.username)),this.token?e.writeKeyValue("AUTH_TOKEN",this.token):this.changePassword||(e.writeKeyValue("AUTH_SESSKEY",this.sessionKey,1),t||e.writeKeyValue("AUTH_PBKDF2_SPEEDY_KEY",this.speedyKey)),this.changePassword||(e.writeKeyValue("SESSION_CLIENT_CHARSET","873"),e.writeKeyValue("SESSION_CLIENT_DRIVER_NAME",Fe.DRIVER_NAME),e.writeKeyValue("SESSION_CLIENT_VERSION",Fe.CLIENT_VERSION.toString()),e.writeKeyValue("AUTH_ALTER_SESSION",this.getAlterTimezoneStatement(),1)),this.encodedPassword&&e.writeKeyValue("AUTH_PASSWORD",this.encodedPassword),this.proxyStatus===0&&e.writeKeyValue("PROXY_CLIENT_NAME",this.schemaUser),this.encodedNewPassword&&e.writeKeyValue("AUTH_NEWPASSWORD",this.encodedNewPassword),this.conn.connClass&&e.writeKeyValue("AUTH_KPPL_CONN_CLASS",this.conn.connClass),this.conn.purity&&e.writeKeyValue("AUTH_KPPL_PURITY",""+this.conn.purity),this.privateKey){let T="date: "+new Date().toGMTString()+`
(request-target): `+this.serviceName+`
host: `+this.remoteAddress,u=Ax.createSign("RSA-SHA256").update(T).sign(this.privateKey,"base64");e.writeKeyValue("AUTH_HEADER",T),e.writeKeyValue("AUTH_SIGNATURE",u)}this.conn.jdwpData&&e.writeKeyValue("AUTH_ORA_DEBUG_JDWP",this.encryptedJDWPData)}}processReturnParameter(e){let t=e.readUB2();for(let n=0;n<t;n++){e.skipUB4();let o=e.readStr(Fe.CSFRM_IMPLICIT),a="";e.readUB4()>0&&(a=e.readStr(Fe.CSFRM_IMPLICIT));let u=e.readUB4();o==="AUTH_VFR_DATA"&&(this.verifierType=u),this.sessionData[o]=a}if(this.functionCode===Fe.TNS_FUNC_AUTH_PHASE_ONE)this.functionCode=Fe.TNS_FUNC_AUTH_PHASE_TWO;else{let n,o,a,T,u;this.conn.sessionID=this.sessionData.AUTH_SESSION_ID,this.conn.serialNum=this.sessionData.AUTH_SERIAL_NUM;let h=Number(this.sessionData.AUTH_VERSION_NO);n=h>>24&255,e.caps.ttcFieldVersion>=Fe.TNS_CCAP_FIELD_VERSION_18_1_EXT_1?(o=h>>16&255,a=h>>12&15,T=h>>4&255,u=h&15):(o=h>>20&15,a=h>>12&255,T=h>>8&15,u=h&255),this.conn.serverVersionString=n+"."+o+"."+a+"."+T+"."+u,this.conn.serverVersion=n*1e8+o*1e6+a*1e4+T*100+u*1}}};_(th,"AuthMessage");var eh=th;yR.exports=eh});var BR=Y((pq,wR)=>{"use strict";var dx=En(),px=At(),nh=class nh extends dx{constructor(e){super(e),this.functionCode=px.TNS_FUNC_COMMIT}encode(e){this.writeFunctionHeader(e)}};_(nh,"CommitMessage");var rh=nh;wR.exports=rh});var YR=Y((Pq,UR)=>{"use strict";var c=At(),mx=En(),ih=class ih extends mx{processMessage(e){for(;e.readUInt16BE()!==0;)e.readUInt16BE()!==0&&e.skipBytes(4)}encode(e){e.writeUInt8(c.TNS_MSG_TYPE_DATA_TYPES),e.writeUInt16LE(c.TNS_CHARSET_UTF8),e.writeUInt16LE(c.TNS_CHARSET_UTF8),e.writeUInt8(c.TNS_ENCODING_MULTI_BYTE|c.TNS_ENCODING_CONV_LENGTH),e.writeBytesWithLength(e.caps.compileCaps),e.writeBytesWithLength(e.caps.runtimeCaps);for(let t of Px)e.writeUInt16BE(t[0]),e.writeUInt16BE(t[1]),e.writeUInt16BE(t[2]),e.writeUInt16BE(0);e.writeUInt16BE(0)}};_(ih,"DataTypeMessage");var sh=ih,Px=[[c.TNS_DATA_TYPE_VARCHAR,c.TNS_DATA_TYPE_VARCHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_NUMBER,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_LONG,c.TNS_DATA_TYPE_LONG,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DATE,c.TNS_DATA_TYPE_DATE,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_RAW,c.TNS_DATA_TYPE_RAW,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_LONG_RAW,c.TNS_DATA_TYPE_LONG_RAW,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UB2,c.TNS_DATA_TYPE_UB2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UB4,c.TNS_DATA_TYPE_UB4,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SB1,c.TNS_DATA_TYPE_SB1,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SB2,c.TNS_DATA_TYPE_SB2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SB4,c.TNS_DATA_TYPE_SB4,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SWORD,c.TNS_DATA_TYPE_SWORD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UWORD,c.TNS_DATA_TYPE_UWORD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PTRB,c.TNS_DATA_TYPE_PTRB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PTRW,c.TNS_DATA_TYPE_PTRW,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TIDDEF,c.TNS_DATA_TYPE_TIDDEF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ROWID,c.TNS_DATA_TYPE_ROWID,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AMS,c.TNS_DATA_TYPE_AMS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BRN,c.TNS_DATA_TYPE_BRN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CWD,c.TNS_DATA_TYPE_CWD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_NEW_OAC,c.TNS_DATA_TYPE_NEW_OAC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OER8,c.TNS_DATA_TYPE_OER8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FUN,c.TNS_DATA_TYPE_FUN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AUA,c.TNS_DATA_TYPE_AUA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RXH7,c.TNS_DATA_TYPE_RXH7,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_NA6,c.TNS_DATA_TYPE_NA6,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BRP,c.TNS_DATA_TYPE_BRP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BRV,c.TNS_DATA_TYPE_BRV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KVA,c.TNS_DATA_TYPE_KVA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CLS,c.TNS_DATA_TYPE_CLS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CUI,c.TNS_DATA_TYPE_CUI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DFN,c.TNS_DATA_TYPE_DFN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DQR,c.TNS_DATA_TYPE_DQR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSC,c.TNS_DATA_TYPE_DSC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_EXE,c.TNS_DATA_TYPE_EXE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FCH,c.TNS_DATA_TYPE_FCH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_GBV,c.TNS_DATA_TYPE_GBV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_GEM,c.TNS_DATA_TYPE_GEM,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_GIV,c.TNS_DATA_TYPE_GIV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OKG,c.TNS_DATA_TYPE_OKG,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_HMI,c.TNS_DATA_TYPE_HMI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_INO,c.TNS_DATA_TYPE_INO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_LNF,c.TNS_DATA_TYPE_LNF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ONT,c.TNS_DATA_TYPE_ONT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OPE,c.TNS_DATA_TYPE_OPE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OSQ,c.TNS_DATA_TYPE_OSQ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SFE,c.TNS_DATA_TYPE_SFE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SPF,c.TNS_DATA_TYPE_SPF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_VSN,c.TNS_DATA_TYPE_VSN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UD7,c.TNS_DATA_TYPE_UD7,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSA,c.TNS_DATA_TYPE_DSA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PIN,c.TNS_DATA_TYPE_PIN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PFN,c.TNS_DATA_TYPE_PFN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PPT,c.TNS_DATA_TYPE_PPT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_STO,c.TNS_DATA_TYPE_STO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ARC,c.TNS_DATA_TYPE_ARC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_MRS,c.TNS_DATA_TYPE_MRS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_MRT,c.TNS_DATA_TYPE_MRT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_MRG,c.TNS_DATA_TYPE_MRG,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_MRR,c.TNS_DATA_TYPE_MRR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_MRC,c.TNS_DATA_TYPE_MRC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_VER,c.TNS_DATA_TYPE_VER,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_LON2,c.TNS_DATA_TYPE_LON2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_INO2,c.TNS_DATA_TYPE_INO2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ALL,c.TNS_DATA_TYPE_ALL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UDB,c.TNS_DATA_TYPE_UDB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQI,c.TNS_DATA_TYPE_AQI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ULB,c.TNS_DATA_TYPE_ULB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ULD,c.TNS_DATA_TYPE_ULD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SID,c.TNS_DATA_TYPE_SID,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_NA7,c.TNS_DATA_TYPE_NA7,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AL7,c.TNS_DATA_TYPE_AL7,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_K2RPC,c.TNS_DATA_TYPE_K2RPC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XDP,c.TNS_DATA_TYPE_XDP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OKO8,c.TNS_DATA_TYPE_OKO8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UD12,c.TNS_DATA_TYPE_UD12,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AL8,c.TNS_DATA_TYPE_AL8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_LFOP,c.TNS_DATA_TYPE_LFOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FCRT,c.TNS_DATA_TYPE_FCRT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DNY,c.TNS_DATA_TYPE_DNY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OPR,c.TNS_DATA_TYPE_OPR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PLS,c.TNS_DATA_TYPE_PLS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XID,c.TNS_DATA_TYPE_XID,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TXN,c.TNS_DATA_TYPE_TXN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DCB,c.TNS_DATA_TYPE_DCB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CCA,c.TNS_DATA_TYPE_CCA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_WRN,c.TNS_DATA_TYPE_WRN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TLH,c.TNS_DATA_TYPE_TLH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TOH,c.TNS_DATA_TYPE_TOH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FOI,c.TNS_DATA_TYPE_FOI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SID2,c.TNS_DATA_TYPE_SID2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TCH,c.TNS_DATA_TYPE_TCH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PII,c.TNS_DATA_TYPE_PII,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PFI,c.TNS_DATA_TYPE_PFI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PPU,c.TNS_DATA_TYPE_PPU,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PTE,c.TNS_DATA_TYPE_PTE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RXH8,c.TNS_DATA_TYPE_RXH8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_N12,c.TNS_DATA_TYPE_N12,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AUTH,c.TNS_DATA_TYPE_AUTH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KVAL,c.TNS_DATA_TYPE_KVAL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FGI,c.TNS_DATA_TYPE_FGI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSY,c.TNS_DATA_TYPE_DSY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYR8,c.TNS_DATA_TYPE_DSYR8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYH8,c.TNS_DATA_TYPE_DSYH8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYL,c.TNS_DATA_TYPE_DSYL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYT8,c.TNS_DATA_TYPE_DSYT8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYV8,c.TNS_DATA_TYPE_DSYV8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYP,c.TNS_DATA_TYPE_DSYP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYF,c.TNS_DATA_TYPE_DSYF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYK,c.TNS_DATA_TYPE_DSYK,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYY,c.TNS_DATA_TYPE_DSYY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYQ,c.TNS_DATA_TYPE_DSYQ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYC,c.TNS_DATA_TYPE_DSYC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYA,c.TNS_DATA_TYPE_DSYA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OT8,c.TNS_DATA_TYPE_OT8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYTY,c.TNS_DATA_TYPE_DSYTY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQE,c.TNS_DATA_TYPE_AQE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KV,c.TNS_DATA_TYPE_KV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQD,c.TNS_DATA_TYPE_AQD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQ8,c.TNS_DATA_TYPE_AQ8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RFS,c.TNS_DATA_TYPE_RFS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RXH10,c.TNS_DATA_TYPE_RXH10,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPN,c.TNS_DATA_TYPE_KPN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNR,c.TNS_DATA_TYPE_KPDNR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYD,c.TNS_DATA_TYPE_DSYD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYS,c.TNS_DATA_TYPE_DSYS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYR,c.TNS_DATA_TYPE_DSYR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYH,c.TNS_DATA_TYPE_DSYH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYT,c.TNS_DATA_TYPE_DSYT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DSYV,c.TNS_DATA_TYPE_DSYV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQM,c.TNS_DATA_TYPE_AQM,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OER11,c.TNS_DATA_TYPE_OER11,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQL,c.TNS_DATA_TYPE_AQL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OTC,c.TNS_DATA_TYPE_OTC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KFNO,c.TNS_DATA_TYPE_KFNO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KFNP,c.TNS_DATA_TYPE_KFNP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KGT8,c.TNS_DATA_TYPE_KGT8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RASB4,c.TNS_DATA_TYPE_RASB4,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RAUB2,c.TNS_DATA_TYPE_RAUB2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RAUB1,c.TNS_DATA_TYPE_RAUB1,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RATXT,c.TNS_DATA_TYPE_RATXT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RSSB4,c.TNS_DATA_TYPE_RSSB4,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RSUB2,c.TNS_DATA_TYPE_RSUB2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RSUB1,c.TNS_DATA_TYPE_RSUB1,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RSTXT,c.TNS_DATA_TYPE_RSTXT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RIDL,c.TNS_DATA_TYPE_RIDL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_GLRDD,c.TNS_DATA_TYPE_GLRDD,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_GLRDG,c.TNS_DATA_TYPE_GLRDG,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_GLRDC,c.TNS_DATA_TYPE_GLRDC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OKO,c.TNS_DATA_TYPE_OKO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DPP,c.TNS_DATA_TYPE_DPP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DPLS,c.TNS_DATA_TYPE_DPLS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DPMOP,c.TNS_DATA_TYPE_DPMOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_STAT,c.TNS_DATA_TYPE_STAT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RFX,c.TNS_DATA_TYPE_RFX,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FAL,c.TNS_DATA_TYPE_FAL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CKV,c.TNS_DATA_TYPE_CKV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DRCX,c.TNS_DATA_TYPE_DRCX,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KGH,c.TNS_DATA_TYPE_KGH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQO,c.TNS_DATA_TYPE_AQO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OKGT,c.TNS_DATA_TYPE_OKGT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPFC,c.TNS_DATA_TYPE_KPFC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_FE2,c.TNS_DATA_TYPE_FE2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SPFP,c.TNS_DATA_TYPE_SPFP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DPULS,c.TNS_DATA_TYPE_DPULS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQA,c.TNS_DATA_TYPE_AQA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPBF,c.TNS_DATA_TYPE_KPBF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TSM,c.TNS_DATA_TYPE_TSM,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_MSS,c.TNS_DATA_TYPE_MSS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPC,c.TNS_DATA_TYPE_KPC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CRS,c.TNS_DATA_TYPE_CRS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KKS,c.TNS_DATA_TYPE_KKS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KSP,c.TNS_DATA_TYPE_KSP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KSPTOP,c.TNS_DATA_TYPE_KSPTOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KSPVAL,c.TNS_DATA_TYPE_KSPVAL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PSS,c.TNS_DATA_TYPE_PSS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_NLS,c.TNS_DATA_TYPE_NLS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ALS,c.TNS_DATA_TYPE_ALS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KSDEVTVAL,c.TNS_DATA_TYPE_KSDEVTVAL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KSDEVTTOP,c.TNS_DATA_TYPE_KSDEVTTOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPSPP,c.TNS_DATA_TYPE_KPSPP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KOL,c.TNS_DATA_TYPE_KOL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_LST,c.TNS_DATA_TYPE_LST,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ACX,c.TNS_DATA_TYPE_ACX,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SCS,c.TNS_DATA_TYPE_SCS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RXH,c.TNS_DATA_TYPE_RXH,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNS,c.TNS_DATA_TYPE_KPDNS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDCN,c.TNS_DATA_TYPE_KPDCN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPNNS,c.TNS_DATA_TYPE_KPNNS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPNCN,c.TNS_DATA_TYPE_KPNCN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPS,c.TNS_DATA_TYPE_KPS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_APINF,c.TNS_DATA_TYPE_APINF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TEN,c.TNS_DATA_TYPE_TEN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSCS,c.TNS_DATA_TYPE_XSSCS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSSO,c.TNS_DATA_TYPE_XSSSO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSAO,c.TNS_DATA_TYPE_XSSAO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KSRPC,c.TNS_DATA_TYPE_KSRPC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KVL,c.TNS_DATA_TYPE_KVL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSDEF,c.TNS_DATA_TYPE_XSSDEF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PDQCINV,c.TNS_DATA_TYPE_PDQCINV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PDQIDC,c.TNS_DATA_TYPE_PDQIDC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDQCSTA,c.TNS_DATA_TYPE_KPDQCSTA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPRS,c.TNS_DATA_TYPE_KPRS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDQIDC,c.TNS_DATA_TYPE_KPDQIDC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RTSTRM,c.TNS_DATA_TYPE_RTSTRM,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SESSGET,c.TNS_DATA_TYPE_SESSGET,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SESSREL,c.TNS_DATA_TYPE_SESSREL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SESSRET,c.TNS_DATA_TYPE_SESSRET,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SCN6,c.TNS_DATA_TYPE_SCN6,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KECPA,c.TNS_DATA_TYPE_KECPA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KECPP,c.TNS_DATA_TYPE_KECPP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SXA,c.TNS_DATA_TYPE_SXA,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KVARR,c.TNS_DATA_TYPE_KVARR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPNGN,c.TNS_DATA_TYPE_KPNGN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BINARY_INTEGER,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_FLOAT,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_STR,c.TNS_DATA_TYPE_VARCHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_VNU,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_PDN,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_VCS,c.TNS_DATA_TYPE_VARCHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_VBI,c.TNS_DATA_TYPE_VARCHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OAC,c.TNS_DATA_TYPE_NEW_OAC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UIN,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_SLS,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_LVC,c.TNS_DATA_TYPE_VARCHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_LVB,c.TNS_DATA_TYPE_RAW,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CHAR,c.TNS_DATA_TYPE_CHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AVC,c.TNS_DATA_TYPE_CHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BINARY_FLOAT,c.TNS_DATA_TYPE_BINARY_FLOAT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BINARY_DOUBLE,c.TNS_DATA_TYPE_BINARY_DOUBLE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CURSOR,c.TNS_DATA_TYPE_CURSOR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RDD,c.TNS_DATA_TYPE_ROWID,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OSL,c.TNS_DATA_TYPE_OSL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_EXT_NAMED,c.TNS_DATA_TYPE_INT_NAMED,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_INT_NAMED,c.TNS_DATA_TYPE_INT_NAMED,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_EXT_REF,c.TNS_DATA_TYPE_INT_REF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_INT_REF,c.TNS_DATA_TYPE_INT_REF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CLOB,c.TNS_DATA_TYPE_CLOB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BLOB,c.TNS_DATA_TYPE_BLOB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BFILE,c.TNS_DATA_TYPE_BFILE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CFILE,c.TNS_DATA_TYPE_CFILE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_RSET,c.TNS_DATA_TYPE_CURSOR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_JSON,c.TNS_DATA_TYPE_JSON,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DJSON,c.TNS_DATA_TYPE_DJSON,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CLV,c.TNS_DATA_TYPE_CLV,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DTR,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_DUN,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_DOP,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_VST,c.TNS_DATA_TYPE_VARCHAR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ODT,c.TNS_DATA_TYPE_DATE,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_DOL,c.TNS_DATA_TYPE_NUMBER,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_TIME,c.TNS_DATA_TYPE_TIME,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TIME_TZ,c.TNS_DATA_TYPE_TIME_TZ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TIMESTAMP,c.TNS_DATA_TYPE_TIMESTAMP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TIMESTAMP_TZ,c.TNS_DATA_TYPE_TIMESTAMP_TZ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_INTERVAL_YM,c.TNS_DATA_TYPE_INTERVAL_YM,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_INTERVAL_DS,c.TNS_DATA_TYPE_INTERVAL_DS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_EDATE,c.TNS_DATA_TYPE_DATE,c.TNS_TYPE_REP_ORACLE],[c.TNS_DATA_TYPE_ETIME,c.TNS_DATA_TYPE_ETIME,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ETTZ,c.TNS_DATA_TYPE_ETTZ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ESTAMP,c.TNS_DATA_TYPE_ESTAMP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ESTZ,c.TNS_DATA_TYPE_ESTZ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_EIYM,c.TNS_DATA_TYPE_EIYM,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_EIDS,c.TNS_DATA_TYPE_EIDS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DCLOB,c.TNS_DATA_TYPE_CLOB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DBLOB,c.TNS_DATA_TYPE_BLOB,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_DBFILE,c.TNS_DATA_TYPE_BFILE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UROWID,c.TNS_DATA_TYPE_UROWID,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TIMESTAMP_LTZ,c.TNS_DATA_TYPE_TIMESTAMP_LTZ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_ESITZ,c.TNS_DATA_TYPE_TIMESTAMP_LTZ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UB8,c.TNS_DATA_TYPE_UB8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_PNTY,c.TNS_DATA_TYPE_INT_NAMED,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_BOOLEAN,c.TNS_DATA_TYPE_BOOLEAN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSNSOP,c.TNS_DATA_TYPE_XSNSOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSATTR,c.TNS_DATA_TYPE_XSATTR,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSNS,c.TNS_DATA_TYPE_XSNS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UB1ARRAY,c.TNS_DATA_TYPE_UB1ARRAY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SESSSTATE,c.TNS_DATA_TYPE_SESSSTATE,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AC_REPLAY,c.TNS_DATA_TYPE_AC_REPLAY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AC_CONT,c.TNS_DATA_TYPE_AC_CONT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_IMPLRES,c.TNS_DATA_TYPE_IMPLRES,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_OER,c.TNS_DATA_TYPE_OER,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TXT,c.TNS_DATA_TYPE_TXT,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSESSNS,c.TNS_DATA_TYPE_XSSESSNS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSATTOP,c.TNS_DATA_TYPE_XSATTOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSCREOP,c.TNS_DATA_TYPE_XSCREOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSDETOP,c.TNS_DATA_TYPE_XSDETOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSDESOP,c.TNS_DATA_TYPE_XSDESOP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSETSP,c.TNS_DATA_TYPE_XSSETSP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSIDP,c.TNS_DATA_TYPE_XSSIDP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSPRIN,c.TNS_DATA_TYPE_XSPRIN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSKVL,c.TNS_DATA_TYPE_XSKVL,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSSSDEF2,c.TNS_DATA_TYPE_XSSSDEF2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSNSOP2,c.TNS_DATA_TYPE_XSNSOP2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_XSNS2,c.TNS_DATA_TYPE_XSNS2,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNREQ,c.TNS_DATA_TYPE_KPDNREQ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNRNF,c.TNS_DATA_TYPE_KPDNRNF,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPNGNC,c.TNS_DATA_TYPE_KPNGNC,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPNRI,c.TNS_DATA_TYPE_KPNRI,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQENQ,c.TNS_DATA_TYPE_AQENQ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQDEQ,c.TNS_DATA_TYPE_AQDEQ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_AQJMS,c.TNS_DATA_TYPE_AQJMS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNRPAY,c.TNS_DATA_TYPE_KPDNRPAY,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNRACK,c.TNS_DATA_TYPE_KPDNRACK,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNRMP,c.TNS_DATA_TYPE_KPDNRMP,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_KPDNRDQ,c.TNS_DATA_TYPE_KPDNRDQ,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SCN,c.TNS_DATA_TYPE_SCN,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_SCN8,c.TNS_DATA_TYPE_SCN8,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_CHUNKINFO,c.TNS_DATA_TYPE_CHUNKINFO,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_UDS,c.TNS_DATA_TYPE_UDS,c.TNS_TYPE_REP_UNIVERSAL],[c.TNS_DATA_TYPE_TNP,c.TNS_DATA_TYPE_TNP,c.TNS_TYPE_REP_UNIVERSAL]];UR.exports=sh});var xR=Y((Iq,MR)=>{"use strict";var Rx=En(),Ix=At(),ah=class ah extends Rx{constructor(e){super(e),this.functionCode=Ix.TNS_FUNC_LOGOFF}encode(e){this.writePiggybacks(e),this.writeFunctionHeader(e)}};_(ah,"LogOffMessage");var oh=ah;MR.exports=oh});var bR=Y((gq,VR)=>{"use strict";var Dx=En(),gx=At(),ch=class ch extends Dx{constructor(e){super(e),this.functionCode=gx.TNS_FUNC_PING}encode(e){this.writeFunctionHeader(e)}};_(ch,"PingMessage");var _h=ch;VR.exports=_h});var kR=Y((Oq,vR)=>{"use strict";var FR=At(),Cx=En(),Th=class Th extends Cx{encode(e){e.writeUInt8(FR.TNS_MSG_TYPE_PROTOCOL),e.writeUInt8(6),e.writeUInt8(0),e.writeStr("node-oracledb"),e.writeUInt8(0)}decode(e){if(e.readUInt8()===FR.TNS_MSG_TYPE_PROTOCOL){e.skipBytes(2);let n=e.readUInt8();for(;n!==0;)n=e.readUInt8();e.skipBytes(2),e.skipUB1(1);let o=e.readUInt16LE();o>0&&e.skipBytes(o*5);let a=e.readUInt16BE(),T=e.readBytes(a),u=6+T[5]+T[6];e.caps.nCharsetId=(T[u+3]<<8)+T[u+4],e.caps.adjustForServerCompileCaps(e.readBytesWithLength()),e.caps.adjustForServerRuntimeCaps(e.readBytesWithLength())}}};_(Th,"ProtocolMessage");var lh=Th;vR.exports=lh});var GR=Y((Lq,qR)=>{"use strict";var Ox=En(),yx=At(),Eh=class Eh extends Ox{constructor(e){super(e),this.functionCode=yx.TNS_FUNC_ROLLBACK}encode(e){this.writeFunctionHeader(e)}};_(Eh,"RollbackMessage");var uh=Eh;qR.exports=uh});var WR=Y((Bq,KR)=>{"use strict";var Lx=En(),HR=At(),Sh=class Sh extends Lx{constructor(e){super(e),this.functionCode=HR.TNS_FUNC_SESSION_RELEASE,this.messageType=HR.TNS_MSG_TYPE_ONEWAY_FN,this.sessReleaseMode=0}encode(e){this.writeFunctionHeader(e),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(this.sessReleaseMode)}decode(){}};_(Sh,"SessionReleaseMessage");var hh=Sh;KR.exports=hh});var zR=Y((Yq,$R)=>{"use strict";var wx=LR(),Bx=BR(),Ux=YR(),Yx=Ou(),Mx=wu(),xx=pu(),Vx=xR(),bx=bR(),Fx=kR(),vx=GR(),kx=WR();$R.exports={AuthMessage:wx,CommitMessage:Bx,DataTypeMessage:Ux,ExecuteMessage:Yx,FetchMessage:Mx,LobOpMessage:xx,LogOffMessage:Vx,PingMessage:bx,ProtocolMessage:Fx,RollbackMessage:vx,SessionReleaseMessage:kx}});var mh=Y((Mq,jR)=>{"use strict";var{Buffer:XR}=require("buffer"),qx=va(),Gx=Yu(),Nh=__(),Hx=VP(),{BaseBuffer:Kx}=lo(),{NetworkSession:Wx,getConnectionInfo:$x}=WE(),{Statement:QR}=RR(),Hs=Oi(),zx=Ci(),Oe=At(),JR=require("process"),be=Dr(),$t=Ee(),rn=zR(),Xx=new global.FinalizationRegistry(s=>{s.disconnect()}),dh=class dh extends Kx{};_(dh,"TDSBuffer");var fh=dh,ph=class ph extends qx{async close(){if(this._protocol.txnInProgress&&await this.rollback(),this._protocol.callTimeout=0,this._drcpEnabled&&(await this._sessRelease(),this._drcpEstablishSession=!0),this._pool&&!this._dropSess)await this._pool.release(this);else{if(!this._drcpEnabled){let e=new rn.LogOffMessage(this);await this._protocol._processMessage(e)}this.nscon.disconnect()}}async _sessRelease(){let e=new rn.SessionReleaseMessage(this);this.isPooled()||(e.sessReleaseMode=Oe.DRCP_DEAUTHENTICATE),await this._protocol._processMessage(e)}async _determineElementObjType(e){let t=[{name:"owner",type:be.DB_TYPE_VARCHAR,dir:Oe.BIND_IN,maxSize:128,values:[e.schema]},{name:"name",type:be.DB_TYPE_VARCHAR,dir:Oe.BIND_IN,maxSize:128,values:[e.name]},{name:"package_name",type:be.DB_TYPE_VARCHAR,dir:Oe.BIND_IN,maxSize:128,values:[e.packageName]}],n;e.packageName?n=`
        select
            elem_type_owner,
            elem_type_name,
            elem_type_package
        from all_plsql_coll_types
        where owner = :owner
          and type_name = :name
          and package_name = :package_name`:(t.pop(),n=`
        select
            elem_type_owner,
            elem_type_name
        from all_coll_types
        where owner = :owner
          and type_name = :name`);let o={connection:{_impl:this},prefetchRows:2},a=await this.execute(n,1,t,o,!1),T=await a.resultSet.getRows(1,o);await a.resultSet.close();let u=T[0];e.elementTypeClass=this._getDbObjectType(u[0],u[1],u[2]),e.elementTypeClass.partial&&this._partialDbObjectTypes.push(e.elementTypeClass)}async _parseElementType(e,t){let n,o,a=e.readUInt8();switch(a){case Oe.TNS_OBJ_TDS_TYPE_NUMBER:case Oe.TNS_OBJ_TDS_TYPE_FLOAT:t.elementType=be.DB_TYPE_NUMBER;break;case Oe.TNS_OBJ_TDS_TYPE_VARCHAR:case Oe.TNS_OBJ_TDS_TYPE_CHAR:t.maxSize=e.readUInt16BE(),n=a===Oe.TNS_OBJ_TDS_TYPE_VARCHAR?Oe.TNS_DATA_TYPE_VARCHAR:Oe.TNS_DATA_TYPE_CHAR,o=e.readUInt8(),t.elementType=be.getTypeByOraTypeNum(n,o);break;case Oe.TNS_OBJ_TDS_TYPE_RAW:t.elementType=be.DB_TYPE_RAW;break;case Oe.TNS_OBJ_TDS_TYPE_BINARY_FLOAT:t.elementType=be.DB_TYPE_BINARY_FLOAT;break;case Oe.TNS_OBJ_TDS_TYPE_BINARY_DOUBLE:t.elementType=be.DB_TYPE_BINARY_DOUBLE;break;case Oe.TNS_OBJ_TDS_TYPE_DATE:t.elementType=be.DB_TYPE_DATE;break;case Oe.TNS_OBJ_TDS_TYPE_TIMESTAMP:t.elementType=be.DB_TYPE_TIMESTAMP;break;case Oe.TNS_OBJ_TDS_TYPE_TIMESTAMP_LTZ:t.elementType=be.DB_TYPE_TIMESTAMP_LTZ;break;case Oe.TNS_OBJ_TDS_TYPE_TIMESTAMP_TZ:t.elementType=be.DB_TYPE_TIMESTAMP_TZ;break;case Oe.TNS_OBJ_TDS_TYPE_BOOLEAN:t.elementType=be.DB_TYPE_BOOLEAN;break;case Oe.TNS_OBJ_TDS_TYPE_CLOB:this._determineElementTypeCharsetForm(t);break;case Oe.TNS_OBJ_TDS_TYPE_BLOB:t.elementType=be.DB_TYPE_BLOB;break;case Oe.TNS_OBJ_TDS_TYPE_OBJ:t.elementType=be.DB_TYPE_OBJECT,await this._determineElementObjType(t);break;default:$t.throwErr($t.ERR_TDS_TYPE_NOT_SUPPORTED,a)}}async _parseTDS(e,t){let n=new fh(e);if(n.skipBytes(4),n.skipBytes(2),n.skipBytes(2),n.readUInt16BE()>1){t.isCollection=!1;return}n.skipBytes(1),n.skipBytes(1),n.skipBytes(2),n.skipBytes(4);let a=n.readUInt8();if(t.isCollection=a===Oe.TNS_OBJ_TDS_TYPE_COLL,!t.isCollection)return;let T=n.readUInt32BE();t.maxNumElements=n.readUInt32BE(),t.collectionType=n.readUInt8(),t.collectionType===Oe.TNS_OBJ_PLSQL_INDEX_TABLE&&(t.collectionFlags=Oe.TNS_OBJ_HAS_INDEXES),n.pos=T,await this._parseElementType(n,t)}async _populateDbObjectTypeInfo(e){let t=`
      declare
          t_Instantiable              varchar2(3);
          t_SuperTypeOwner            varchar2(128);
          t_SuperTypeName             varchar2(128);
          t_SubTypeRefCursor          sys_refcursor;
          t_Pos                       pls_integer;
      begin
          :ret_val := dbms_pickler.get_type_shape(:full_name, :oid,
              :version, :tds, t_Instantiable, t_SuperTypeOwner,
              t_SuperTypeName, :attrs_rc, t_SubTypeRefCursor);
          :package_name := null;
          if substr(:full_name, length(:full_name) - 7) = '%ROWTYPE' then
              t_Pos := instr(:full_name, '.');
              :schema := substr(:full_name, 1, t_Pos - 1);
              :name := substr(:full_name, t_Pos + 1);
          else
              begin
                  select owner, type_name
                  into :schema, :name
                  from all_types
                  where type_oid = :oid;
              exception
              when no_data_found then
                  begin
                      select owner, package_name, type_name
                      into :schema, :package_name, :name
                      from all_plsql_types
                      where type_oid = :oid;
                  exception
                  when no_data_found then
                      null;
                  end;
              end;
          end if;
      end;`,n=[{name:"full_name",type:be.DB_TYPE_VARCHAR,dir:Oe.BIND_INOUT,maxSize:500,values:[e]},{name:"ret_val",type:be.DB_TYPE_BINARY_INTEGER,dir:Oe.BIND_OUT,values:[]},{name:"oid",type:be.DB_TYPE_RAW,maxSize:16,dir:Oe.BIND_OUT,values:[]},{name:"version",type:be.DB_TYPE_BINARY_INTEGER,dir:Oe.BIND_OUT,values:[]},{name:"tds",type:be.DB_TYPE_RAW,maxSize:2e3,dir:Oe.BIND_OUT,values:[]},{name:"attrs_rc",type:be.DB_TYPE_CURSOR,dir:Oe.BIND_OUT,values:[]},{name:"package_name",type:be.DB_TYPE_VARCHAR,maxSize:128,dir:Oe.BIND_OUT,values:[]},{name:"schema",type:be.DB_TYPE_VARCHAR,maxSize:128,dir:Oe.BIND_OUT,values:[]},{name:"name",type:be.DB_TYPE_VARCHAR,maxSize:128,dir:Oe.BIND_OUT,values:[]}],o={connection:{_impl:this},nullifyInvalidCursor:!0},a=await this.execute(t,1,n,o,!1);a.outBinds.ret_val!==0&&$t.throwErr($t.ERR_INVALID_OBJECT_TYPE_NAME,e);let T=this._getDbObjectType(a.outBinds.schema,a.outBinds.name,a.outBinds.package_name,a.outBinds.oid);if(!T.partial)return T;T.version=a.outBinds.version,await this._parseTDS(a.outBinds.tds,T);let u=await a.outBinds.attrs_rc.getRows(1e3,{});if(u.length>0){T.attributes=[];for(let h of u){let A={name:h[1]};h[4]?(A.type=be.DB_TYPE_OBJECT,A.typeClass=this._getDbObjectType(h[4],h[3],h[5],h[6]),A.typeClass.partial&&this._partialDbObjectTypes.push(A.typeClass)):A.type=be.getTypeByColumnTypeName(h[3]),T.attributes.push(A)}}return T.partial=!1,T}async _populatePartialDbObjectTypes(){for(;this._partialDbObjectTypes.length>0;){let e=this._partialDbObjectTypes.pop(),t="%ROWTYPE",n=e.name;n.endsWith(t)?n=n.substring(0,n.length-t.length):t="";let o;e.packageName?o=`"${e.schema}"."${e.packageName}"."${n}"${t}`:o=`"${e.schema}"."${n}"${t}`,await this._populateDbObjectTypeInfo(o)}}async commit(){let e=new rn.CommitMessage(this);await this._protocol._processMessage(e)}async breakExecution(){await this._protocol.breakMessage()}_healthStatus(){return this.nscon.recvInbandNotif()}isHealthy(){try{return this.nscon.recvInbandNotif()===0}catch{return!1}}isPooled(){return!!this._pool}async connect(e){e.connectString||$t.throwErr($t.ERR_EMPTY_CONNECT_STRING),Hs.checkCredentials(e),this.sessionID=0,this.serialNum=0,this.autoCommit=!1,this.serverVersion="",this.statementCache=null,this.currentSchema="",this.invokeSessionCallback=!0,this.statementCache=new Map,this.statementCacheSize=e.stmtCacheSize,this._numCursorsToClose=0,this._currentSchemaModified=!1,this._cursorsToClose=new Set,this._tempLobsToClose=[],this._tempLobsTotalSize=0,this._drcpEstablishSession=!1,this._cclass=null,this._clientIdentifier="",this._clientIdentifierModified=!1,this._action="",this._actionModified=!1,this._dbOp="",this._dbOpModified=!1,this._clientInfo="",this._clientInfoModified=!1,this._module="",this._moduleModified=!1,this.serviceName="",this.remoteAddress="",this.privilege=e.privilege,this.comboKey=null,this.nscon=new Wx,Xx.register(this,this.nscon),await this.nscon.connect(e),this._connInfo=this.isPooled()?e._connInfo.map(t=>t):await $x(e),this._drcpEnabled=String(this._connInfo[0]).toLowerCase()==="pooled",this.serviceName=this._connInfo[2],this.purity=this._connInfo[3]|Oe.PURITY_DEFAULT,this.remoteAddress=this.nscon.getOption(zx.REMOTEADDR),this.connClass=e.connectionClass,this.purity===Oe.PURITY_DEFAULT&&this._drcpEnabled&&(this.isPooled()?this.purity=Oe.PURITY_SELF:this.purity=Oe.PURITY_NEW),this._protocol=new Hx(this),this._protocol.caps.protocolVersion<Oe.TNS_VERSION_MIN_ACCEPTED&&$t.throwErr($t.ERR_SERVER_VERSION_NOT_SUPPORTED);try{let t=new rn.ProtocolMessage(this);await this._protocol._processMessage(t),t=new rn.DataTypeMessage(this),await this._protocol._processMessage(t),t=new rn.AuthMessage(this,e),await this._protocol._processMessage(t),await this._protocol._processMessage(t)}catch(t){throw this.nscon.disconnect(),t}this._partialDbObjectTypes=[],e.debugJDWP?this.jdwpData=XR.from(e.debugJDWP):JR.env.ORA_DEBUG_JDWP&&(this.jdwpData=XR.from(JR.env.ORA_DEBUG_JDWP)),this._protocol.connInProgress=!1}_returnStatement(e){e.bindInfoList&&e.bindInfoList.forEach(t=>{t.bindVar=null}),e.queryVars&&e.queryVars.forEach(t=>{t.values.fill(null)}),e.returnToCache?e.inUse=!1:e.cursorId!==0&&this._addCursorToClose(e.cursorId)}_addCursorToClose(e){if(this._cursorsToClose.has(e)){let t=`attempt to close cursor ${e} twice`;$t.throwErr($t.ERR_INTERNAL,t)}this._cursorsToClose.add(e)}_adjustStatementCache(){for(;this.statementCache.size>this.statementCacheSize;){let e=this.statementCache.keys().next().value,t=this.statementCache.get(e);this.statementCache.delete(e),t.inUse?t.returnToCache=!1:t.cursorId!==0&&this._addCursorToClose(t.cursorId)}}_prepare(e,t){let n=this._getStatement(e,t.keepInStmtCache);return n.bufferRowIndex=0,n.bufferRowCount=0,n.lastRowIndex=0,n.moreRowsToFetch=!0,n}async _bind(e,t,n=0){let o=e.bindInfoDict,a=e.bindInfoList;if(e.isPlSql&&t.maxSize>32767){t.type===be.DB_TYPE_RAW||t.type===be.DB_TYPE_LONG_RAW?t.type=be.DB_TYPE_BLOB:t.type._csfrm===Oe.CSFRM_NCHAR?t.type=be.DB_TYPE_NCLOB:t.type=be.DB_TYPE_CLOB;let T=t.maxSize;delete t.maxSize,t.outConverter=async function(u){if(u===null)return null;let h=await u.getData(),A=u._length;return h&&A>T&&$t.throwErr($t.ERR_INSUFFICIENT_BUFFER_FOR_BINDS),h}}if(t.type===be.DB_TYPE_CLOB||t.type===be.DB_TYPE_NCLOB||t.type===be.DB_TYPE_BLOB){for(let[T,u]of t.values.entries())if(!(u instanceof Nh))if(u&&u.length>0){let h=new Nh;await h.create(this,t.type),await h.write(1,u),t.values[T]=h}else t.values[T]=null}if(t.name){let T;t.name.startsWith('"')&&t.name.endsWith('"')?T=t.name.substring(1,t.name.length-1):T=t.name.toUpperCase(),T.startsWith(":")&&(T=t.name.substring(1)),o.has(T)||$t.throwErr($t.ERR_INVALID_BIND_NAME,T),o.get(T).forEach(u=>{e._setVariable(u,t)})}else{let T=a[n-1];e._setVariable(T,t)}}_createResultSet(e,t){let n=new Gx;if(t||(t=new QR),n._resultSetNew(this,t,e),t.queryVars.length>0){let o=Hs.getMetadataMany(t.queryVars);n._setup(e,o)}return n}async _prepareAndBind(e,t,n,o=!1){let a=this._prepare(e,n),T=0;if(!o){let u=a.bindInfoList.length,h=t.length;u!==h&&(h===0||!t[0].name)&&$t.throwErr($t.ERR_WRONG_NUMBER_OF_POSITIONAL_BINDS,u,h);for(let A of t)await this._bind(a,A,T+1),T+=1}return a}resetStatmentCache(){this.statementCache.clear(),this._cursorsToClose.clear()}async getDbObjectClass(e){let t=await this._populateDbObjectTypeInfo(e);return await this._populatePartialDbObjectTypes(),t}async getStatementInfo(e){let t={},n={},o=await this._prepareAndBind(e,null,t,!0);if(t.connection=this,!o.isDdl){let a=new rn.ExecuteMessage(this,o,t);a.parseOnly=!0,await this._protocol._processMessage(a)}return o.numQueryVars>0&&(n.metaData=Hs.getMetadataMany(o.queryVars)),n.bindNames=Array.from(o.bindInfoDict.keys()),n.statementType=o.statementType,n}async execute(e,t,n,o,a){let T={};if(a)return await this.executeMany(e,t,n,o);let u=await this._prepareAndBind(e,n,o),h=new rn.ExecuteMessage(this,u,o);if(h.numExecs=1,await this._protocol._processMessage(h),u.requiresFullExecute=!1,u.requiresDefine&&u.sql&&(u.requiresFullExecute=!0,await this._protocol._processMessage(h),u.requiresFullExecute=!1,u.requiresDefine=!1),u.numQueryVars>0)T.resultSet=h.resultSet;else{u.bufferRowIndex=0;let A=Hs.getBindVars(u),N=Hs.getExecuteOutBinds(A);N&&(T.outBinds=N),u.isPlSql&&o.implicitResultSet&&(T.implicitResults=o.implicitResultSet),u.lastRowid&&(T.lastRowid=u.lastRowid,delete u.lastRowid),u.isPlSql?u.rowCount&&(T.rowsAffected=u.rowCount):T.rowsAffected=u.rowCount||0,u.rowCount&&delete u.rowCount,this._returnStatement(u)}return T}async executeMany(e,t,n,o){let a=await this._prepareAndBind(e,n,o);a.isPlSql&&(o.batchErrors||o.dmlRowCounts)&&$t.throwErr($t.ERR_EXEC_MODE_ONLY_FOR_DML);let T=new rn.ExecuteMessage(this,a,o);T.numExecs=t,T.arrayDmlRowCounts=o.dmlRowCounts,T.batchErrors=o.batchErrors,a.isPlSql&&a.requiresFullExecute&&(T.numExecs=1,await this._protocol._processMessage(T),a.requiresFullExecute=!1,T.numExecs=t-1,T.offset=1),T.numExecs>0&&await this._protocol._processMessage(T);let u={};a.bufferRowIndex=0;let h=Hs.getBindVars(a),A=Hs.getExecuteManyOutBinds(h,t);A&&(u.outBinds=A);let N=a.isPlSql?void 0:a.rowCount;return N&&(u.rowsAffected=N,delete a.rowCount),o.dmlRowCounts&&(u.dmlRowCounts=o.dmlRowCounts),o.batchErrors&&(u.batchErrors=o.batchErrors),this._returnStatement(a),u}_getStatement(e,t=!1){let n=this.statementCache.get(e);return n?n.inUse||!t||this._drcpEstablishSession?(t||(this.statementCache.delete(e),n.returnToCache=!1),(n.inUse||this._drcpEstablishSession)&&(n=n._copy())):(this.statementCache.delete(e),this.statementCache.set(e,n)):(n=new QR,n._prepare(e),t&&!this._drcpEstablishSession&&!n.isDdl&&this.statementCacheSize>0&&(n.returnToCache=!0,this.statementCache.set(e,n),this._adjustStatementCache())),n.inUse=!0,n}async ping(){let e=new rn.PingMessage(this);await this._protocol._processMessage(e)}async rollback(){let e=new rn.RollbackMessage(this);await this._protocol._processMessage(e)}getOracleServerVersion(){return this.serverVersion}getOracleServerVersionString(){return this.serverVersionString}setCurrentSchema(e){this._currentSchemaModified=!0,this.currentSchema=e}getCurrentSchema(){return this.currentSchema}setClientId(e){this._clientIdentifierModified=!0,this._clientIdentifier=e}setDbOp(e){this._dbOpModified=!0,this._dbOp=e}setClientInfo(e){this._clientInfoModified=!0,this._clientInfo=e}setModule(e){this._moduleModified=!0,this._module=e,this._actionModified=!0}setAction(e){this._actionModified=!0,this._action=e}async changePassword(e,t,n){let o={user:e,newPassword:n,password:t,changePassword:!0},a=new rn.AuthMessage(this,o);await this._protocol._processMessage(a)}async createLob(e){let t=new Nh;return await t.create(this,e),t}getStmtCacheSize(){return this.statementCacheSize}setCallTimeout(e){this._protocol.callTimeout=e}getCallTimeout(){return this._protocol.callTimeout}getTag(){return""}};_(ph,"ThinConnectionImpl");var Ah=ph;jR.exports=Ah});var eI=Y((Vq,ZR)=>{"use strict";var Qx=jl(),Jx=mh(),Vr=co(),Cn=Ee(),jx=Zr(),Ph=Cr(),Zx=Oi(),{getConnectionInfo:eV}=WE(),tV=require("crypto"),rV=require("events"),Ih=class Ih extends Qx{_init(e){if(e.homogeneous||Cn.throwErr(Cn.ERR_NOT_IMPLEMENTED,"Heterogeneous Pooling"),Zx.checkCredentials(e),this._availableObjects=[],this._name="node-thin",this._poolMin=e.poolMin,this._poolMax=e.poolMax,this._poolIncrement=e.poolIncrement,this._poolTimeout=e.poolTimeout,this._poolPingInterval=e.poolPingInterval,this._stmtCacheSize=e.stmtCacheSize,this._userConfig=e,this._freeConnectionList=[],this._usedConnectionList=new Set,this._password=e.password,this._walletPassword=e.walletPassword,this._obfuscatedPassword=[],this._obfuscatedWalletPassword=[],this._token=e.token,this._obfuscatedToken=[],this._privateKey=e.privateKey,this._obfuscatedPrivateKey=[],this._schedulerJob=null,this._password!==void 0){let t=Vr.setObfuscatedValue(this._password);this._password=t.value,this._obfuscatedPassword=t.obfuscatedValue,this._userConfig.password=null}if(this._walletPassword!==void 0){let t=Vr.setObfuscatedValue(this._walletPassword);this._walletPassword=t.value,this._obfuscatedWalletPassword=t.obfuscatedValue,this._userConfig.walletPassword=null}if(this._token!==void 0){let t=Vr.setObfuscatedValue(this._token);this._token=t.value,this._obfuscatedToken=t.obfuscatedValue,this._userConfig.token=null}if(this._privateKey!==void 0){let t=Vr.setObfuscatedValue(this._privateKey);this._privateKey=t.value,this._obfuscatedPrivateKey=t.obfuscatedValue,this._userConfig.privateKey=null}this._accessTokenFn=e.accessTokenFn,this._isDRCPEnabled=!1,this.eventEmitter=new rV,this.eventEmitter.on("_removePoolConnection",async t=>{await this._destroy(t)})}async create(e){this._init(e),this._userConfig._connInfo=await eV(e),this._isDRCPEnabled=String(this._userConfig._connInfo[0]).toLowerCase()==="pooled",this._isDRCPEnabled&&jx.connectionClass===""&&this._generateConnectionClass(),await this._growPool(this._poolMin)}setAccessToken(e){if(e.token){this._token=e.token;let t=Vr.setObfuscatedValue(this._token);this._token=t.value,this._obfuscatedToken=t.obfuscatedValue}if(e.privateKey){this._privateKey=e.privateKey;let t=Vr.setObfuscatedValue(this._privateKey);this._privateKey=t.value,this._obfuscatedPrivateKey=t.obfuscatedValue}}async _getConnAttrs(){let e,t=Object.assign({},this._userConfig);if(t.password===null&&(t.password=Vr.getDeobfuscatedValue(this._password,this._obfuscatedPassword)),t.walletPassword===null&&(t.walletPassword=Vr.getDeobfuscatedValue(this._walletPassword,this._obfuscatedWalletPassword)),t.token===null&&(t.token=Vr.getDeobfuscatedValue(this._token,this._obfuscatedToken),Ph.isTokenExpired(t.token)))if(typeof this._accessTokenFn=="function"){if(e=await this._accessTokenFn(!0),typeof e=="string")if(t.token=e,Ph.isTokenExpired(t.token))Cn.throwErr(Cn.ERR_TOKEN_HAS_EXPIRED);else{let n=Vr.setObfuscatedValue(t.token);this._token=n.value,this._obfuscatedToken=n.obfuscatedValue}else if(typeof e=="object")if(t.token=e.token,t.privateKey=e.privateKey,Ph.isTokenExpired(t.token))Cn.throwErr(Cn.ERR_TOKEN_HAS_EXPIRED);else{let n=Vr.setObfuscatedValue(t.token);this._token=n.value,this._obfuscatedToken=n.obfuscatedValue;let o=Vr.setObfuscatedValue(t.privateKey);this._privateKey=o.value,this._obfuscatedPrivateKey=o.obfuscatedValue}}else Cn.throwErr(Cn.ERR_TOKEN_HAS_EXPIRED);return t.privateKey===null&&(t.privateKey=Vr.getDeobfuscatedValue(this._privateKey,this._obfuscatedPrivateKey)),t}async getConnection(){return await this.acquire()}async _destroy(e){e.nscon.ntAdapter.connected&&(e._dropSess=!0,await e.close())}async close(e){return this._schedulerJob&&(clearTimeout(this._schedulerJob),this._schedulerJob=null),await this.destroyAllNow(e)}getPoolMax(){return this._poolMax}getPoolMin(){return this._poolMin}getConnectionsInUse(){return this._usedConnectionList.size}getConnectionsOpen(){return this._freeConnectionList.length+this._usedConnectionList.size}getPoolIncrement(){return this._poolIncrement}getPoolMaxPerShard(){}getPoolPingInterval(){return this._poolPingInterval}getPoolTimeout(){return this._poolTimeout}getSodaMetaDataCache(){}getStmtCacheSize(){return this._stmtCacheSize}async _growPool(e){let t=await this._getConnAttrs();for(;e>0;){let n=new Jx;n._pool=this,await n.connect(t),n._newSession=!0,n._dropSess=!1,n._lastTimeUsed=Date.now(),this._freeConnectionList.push(n),e--}}_setScheduler(){!this._schedulerJob&&this._poolTimeout>0&&this._freeConnectionList.length>0&&this._freeConnectionList.length+this._usedConnectionList.size>this._poolMin&&(this._schedulerJob=setTimeout(()=>{this._scanIdleConnection()},this._poolTimeout*1e3))}_scanIdleConnection(){for(;this._usedConnectionList.size+this._freeConnectionList.length>this._poolMin&&this._freeConnectionList.length>0;){let e=this._freeConnectionList[this._freeConnectionList.length-1];if(Date.now()-e._lastTimeUsed<this._poolTimeout*1e3)break;this.eventEmitter.emit("_removePoolConnection",e),this._freeConnectionList.pop()}this._schedulerJob=null,this._setScheduler()}async acquire(){for(;this._freeConnectionList.length>0;){let t=this._freeConnectionList.pop();if(!t.isHealthy()){this.eventEmitter.emit("_removePoolConnection",t);continue}let n=!1;if((this._poolPingInterval===0||this._poolPingInterval>0&&Date.now()-t._lastTimeUsed>this._poolPingInterval*1e3)&&(n=!0),n)try{await t.ping()}catch{this.eventEmitter.emit("_removePoolConnection",t);continue}return this._usedConnectionList.add(t),t}if(this._usedConnectionList.size<this._poolMin)await this._growPool(this._poolMin-this._usedConnectionList.size);else{let t=this._poolMax-this._usedConnectionList.size;await this._growPool(Math.min(this._poolIncrement,t)),this._poolIncrement>1&&t>1&&this._setScheduler()}let e=this._freeConnectionList.pop();return this._usedConnectionList.add(e),e}release(e){this._usedConnectionList.delete(e),e.nscon.connected&&(e._lastTimeUsed=Date.now(),e._newSession=!1,this._freeConnectionList.push(e)),this._setScheduler()}async destroyAllNow(e){let t;for(;this._freeConnectionList.length!==0;)t=this._freeConnectionList.pop(),await this._destroy(t);if(e.forceClose)for(let n of this._usedConnectionList)await this._destroy(n),this._usedConnectionList.delete(n);this._usedConnectionList.size!==0&&Cn.throwErr(Cn.ERR_POOL_HAS_BUSY_CONNECTIONS),this.eventEmitter.removeAllListeners()}_generateConnectionClass(){this._userConfig.connectionClass=tV.randomBytes(16).toString("base64"),this._userConfig.connectionClass="NJS:"+this._userConfig.connectionClass}};_(Ih,"ThinPoolImpl");var Rh=Ih;ZR.exports=Rh});var tI=Y(()=>{"use strict";var nV=mh(),sV=Yu(),iV=eI(),oV=__(),aV=fu(),Ro=di();Ro.ConnectionImpl=nV;Ro.ResultSetImpl=sV;Ro.PoolImpl=iV;Ro.LobImpl=oV;Ro.DbObjectImpl=aV});var _I=Y((kq,aI)=>{"use strict";var W=ir(),Rt=Cr(),q=Ee(),xe=Dr(),rI=di(),_V=require("process"),cV=require("util"),Dh=_V.version.substring(1).split(".").map(Number);q.assert(Dh[0]>14||Dh[0]===14&&Dh[1]>=6,q.ERR_NODE_TOO_OLD,Rt.PACKAGE_JSON_VERSION,"14.6");var lV=hT(),TV=AT(),uV=mT(),EV=VT(),hV=mi(),nI=jT(),SV=pi(),sI=oP(),NV=tu(),fV=Ka(),le=Zr(),AV=zT(),dV=KT(),pV=vT(),mV=Pi(),PV=GT(),wi={},g_={},Io="default",Ds,RV=!1;function IV(){let s=typeof __non_webpack_require__=="function"?__non_webpack_require__:require,e=["../"+Rt.RELEASE_DIR+"/"+Rt.BINARY_FILE,"../"+Rt.RELEASE_DIR+"/oracledb.node","../build/Debug/oracledb.node","./node_modules/oracledb/"+Rt.RELEASE_DIR+"/"+Rt.BINARY_FILE,"./node_modules/oracledb/"+Rt.RELEASE_DIR+"/oracledb.node"],t;for(let n=0;n<e.length;n++)try{t=s(e[n]);break}catch(o){if(o.code!=="MODULE_NOT_FOUND"||n==e.length-1){let a;o.code==="MODULE_NOT_FOUND"?a=`
  Looked for ${e.map(T=>require("path").resolve(__dirname,T)).join(", ")}
  ${Rt.getInstallURL()}
`:a=`
  Node.js require('oracledb') error was:
  ${o.message}
  ${Rt.getInstallHelp()}
`,q.throwErr(q.ERR_CANNOT_LOAD_BINARY,a)}}return t}_(IV,"_initCLib");function iI(){tI()}_(iI,"_initializeThinDriver");function DV(s){return s===W.SYSASM||s===W.SYSBACKUP||s===W.SYSDBA||s===W.SYSDG||s===W.SYSKM||s===W.SYSOPER||s===W.SYSPRELIM||s===W.SYSRAC}_(DV,"_isPrivilege");async function oI(s,e){let t={};if(s.user!==void 0&&(q.assertParamPropValue(typeof s.user=="string",1,"user"),t.user=s.user),s.username!==void 0&&(q.assert(t.user===void 0,q.ERR_DBL_USER),q.assertParamPropValue(typeof s.username=="string",1,"username"),t.user=s.username),s.password!==void 0&&(q.assertParamPropValue(typeof s.password=="string",1,"password"),t.password=s.password),s.connectString!==void 0&&(q.assertParamPropValue(typeof s.connectString=="string",1,"connectString"),t.connectString=s.connectString),s.connectionString!==void 0&&(q.assert(t.connectString===void 0,q.ERR_DBL_CONNECT_STRING),q.assertParamPropValue(typeof s.connectionString=="string",1,"connectionString"),t.connectString=s.connectionString),s.walletPassword!==void 0&&(q.assertParamPropValue(typeof s.walletPassword=="string",1,"walletPassword"),t.walletPassword=s.walletPassword),s.walletLocation!==void 0&&(q.assertParamPropValue(typeof s.walletLocation=="string",1,"walletLocation"),t.walletLocation=s.walletLocation),s.edition!==void 0&&(q.assertParamPropValue(typeof s.edition=="string",1,"edition"),t.edition=s.edition),s.stmtCacheSize!==void 0&&(q.assertParamPropValue(Number.isInteger(s.stmtCacheSize)&&s.stmtCacheSize>=0,1,"stmtCacheSize"),t.stmtCacheSize=s.stmtCacheSize),t.externalAuth=le.externalAuth,s.externalAuth!==void 0&&(q.assertParamPropValue(typeof s.externalAuth=="boolean",1,"externalAuth"),t.externalAuth=s.externalAuth),s.events!==void 0&&(q.assertParamPropValue(typeof s.events=="boolean",1,"events"),t.events=s.events),s.poolAlias!==void 0&&(q.assertParamPropValue(typeof s.poolAlias=="string"&&s.poolAlias.length>0,1,"poolAlias"),t.poolAlias=s.poolAlias),s.configDir!==void 0&&(q.assertParamPropValue(typeof s.configDir=="string",1,"configDir"),t.configDir=s.configDir),s.sslServerCertDN!==void 0&&(q.assertParamPropValue(typeof s.sslServerCertDN=="string",1,"sslServerCertDN"),t.sslServerCertDN=s.sslServerCertDN),s.sslServerDNMatch!==void 0&&(q.assertParamPropValue(typeof s.sslServerDNMatch=="boolean",1,"sslServerDNMatch"),t.sslServerDNMatch=s.sslServerDNMatch),s.httpsProxy!==void 0&&(q.assertParamPropValue(typeof s.httpsProxy=="string",1,"httpsProxy"),t.httpsProxy=s.httpsProxy),s.httpsProxyPort!==void 0&&(q.assertParamPropValue(Number.isInteger(s.httpsProxyPort)&&s.httpsProxyPort>=0,1,"httpsProxyPort"),t.httpsProxyPort=s.httpsProxyPort),s.retryCount!==void 0&&(q.assertParamPropValue(Number.isInteger(s.retryCount)&&s.retryCount>=0,1,"retryCount"),t.retryCount=s.retryCount),s.retryDelay!==void 0&&(q.assertParamPropValue(Number.isInteger(s.retryDelay)&&s.retryDelay>=0,1,"retryDelay"),t.retryDelay=s.retryDelay),s.connectTimeout!==void 0&&(q.assertParamPropValue(Number.isInteger(s.connectTimeout)&&s.connectTimeout>=0,1,"connectTimeout"),t.connectTimeout=s.connectTimeout),s.transportConnectTimeout!==void 0&&(q.assertParamPropValue(Number.isInteger(s.transportConnectTimeout)&&s.transportConnectTimeout>=0,1,"transportConnectTimeout"),t.transportConnectTimeout=s.transportConnectTimeout),s.expireTime!==void 0&&(q.assertParamPropValue(Number.isInteger(s.expireTime)&&s.expireTime>=0,1,"expireTime"),t.expireTime=s.expireTime),s.sdu!==void 0&&(q.assertParamPropValue(Number.isInteger(s.sdu)&&s.sdu>0,1,"sdu"),t.sdu=s.sdu),s.connectionIdPrefix!==void 0&&(q.assertParamPropValue(typeof s.connectionIdPrefix=="string",1,"connectionIdPrefix"),t.connectionIdPrefix=s.connectionIdPrefix),e)s.poolMax!==void 0&&(q.assertParamPropValue(Number.isInteger(s.poolMax)&&s.poolMax>0,1,"poolMax"),t.poolMax=s.poolMax),s.poolMaxPerShard!==void 0&&(q.assertParamPropValue(Number.isInteger(s.poolMaxPerShard)&&s.poolMaxPerShard>=0,1,"poolMaxPerShard"),t.poolMaxPerShard=s.poolMaxPerShard),s.poolMin!==void 0&&(q.assertParamPropValue(Number.isInteger(s.poolMin)&&s.poolMin>=0,1,"poolMin"),t.poolMin=s.poolMin),s.poolIncrement!==void 0&&(q.assertParamPropValue(Number.isInteger(s.poolIncrement)&&s.poolIncrement>=0,1,"poolIncrement"),t.poolIncrement=s.poolIncrement),s.poolTimeout!==void 0&&(q.assertParamPropValue(Number.isInteger(s.poolTimeout)&&s.poolTimeout>=0,1,"poolTimeout"),t.poolTimeout=s.poolTimeout),s.poolPingInterval!==void 0&&(q.assertParamPropValue(Number.isInteger(s.poolPingInterval)&&s.poolPingInterval>=-2147483648&&s.poolPingInterval<=2147483647,1,"poolPingInterval"),t.poolPingInterval=s.poolPingInterval),t.homogeneous=!0,s.homogeneous!==void 0&&(q.assertParamPropValue(typeof s.homogeneous=="boolean",1,"homogeneous"),t.homogeneous=s.homogeneous),s.queueTimeout!==void 0&&(q.assertParamPropValue(Number.isInteger(s.queueTimeout)&&s.queueTimeout>=0,1,"queueTimeout"),t.queueTimeout=s.queueTimeout),s.queueMax!==void 0&&(q.assertParamPropValue(Number.isInteger(s.queueMax),1,"queueMax"),t.queueMax=s.queueMax),t.sodaMetaDataCache=!1,s.sodaMetaDataCache!==void 0&&(q.assertParamPropValue(typeof s.sodaMetaDataCache=="boolean",1,"sodaMetaDataCache"),t.sodaMetaDataCache=s.sodaMetaDataCache),s.sessionCallback!==void 0&&(q.assertParamPropValue(typeof s.sessionCallback=="string"||typeof s.sessionCallback=="function",1,"sessionCallback"),t.sessionCallback=s.sessionCallback),t.enableStatistics=!1,s.enableStatistics!==void 0&&(q.assertParamPropValue(typeof s.enableStatistics=="boolean",1,"enableStatistics"),t.enableStatistics=s.enableStatistics),!t.enableStatistics&&s._enableStats!==void 0&&(q.assertParamPropValue(typeof s._enableStats=="boolean",1,"_enableStats"),t.enableStatistics=s._enableStats);else{if(s.newPassword!==void 0&&(q.assertParamPropValue(typeof s.newPassword=="string",1,"newPassword"),t.newPassword=s.newPassword),s.privilege!==void 0&&(q.assertParamPropValue(DV(s.privilege),1,"privilege"),t.privilege=s.privilege),s.shardingKey!==void 0){let n=s.shardingKey;q.assertParamPropValue(Rt.isShardingKey(n),1,"shardingKey"),t.shardingKey=s.shardingKey}if(s.superShardingKey!==void 0){let n=s.superShardingKey;q.assertParamPropValue(Rt.isShardingKey(n),1,"superShardingKey"),t.superShardingKey=s.superShardingKey}}if(s.accessToken!==void 0){q.assert(t.user===void 0&&t.password===void 0,q.ERR_TOKEN_BASED_AUTH),e?q.assert(t.homogeneous&&t.externalAuth,q.ERR_POOL_TOKEN_BASED_AUTH):q.assert(t.externalAuth,q.ERR_CONN_TOKEN_BASED_AUTH);let n;typeof s.accessToken=="function"?(t.accessTokenFn=s.accessToken,n=await s.accessToken(!1),Rt.isTokenValid(n)||(n=await s.accessToken(!0))):n=s.accessToken,q.assert(Rt.isTokenValid(n),q.ERR_TOKEN_HAS_EXPIRED),n.privateKey!==void 0&&q.assert(Rt.isPrivateKeyValid(n),q.ERR_INVALID_PRIVATE_KEY),typeof n=="string"?t.token=n:(t.token=n.token,t.privateKey=n.privateKey)}return t.token===void 0&&t.externalAuth&&(t.user||t.password)&&q.throwErr(q.ERR_WRONG_CRED_FOR_EXTAUTH),t}_(oI,"_verifyOptions");async function gV(s){let e;q.assertArgCount(arguments,1,1),q.assertParamValue(Rt.isObject(s),1),s=await oI(s,!0);let t=s.sessionCallback;typeof t=="function"&&delete s.sessionCallback,s.poolAlias!==void 0?e=s.poolAlias:s.poolAlias===void 0&&!wi[Io]&&!g_[Io]&&(e=Io),(wi[e]||g_[e])&&q.throwErr(q.ERR_POOL_WITH_ALIAS_ALREADY_EXISTS,e),le.addToOptions(s,"connectionClass","edition","events","externalAuth","stmtCacheSize","poolMax","poolMaxPerShard","poolMin","poolIncrement","poolTimeout","poolPingInterval","queueMax","queueTimeout"),s.poolMin>s.poolMax&&q.throwErr(q.ERR_INVALID_NUMBER_OF_CONNECTIONS,s.poolMax,s.poolMin),Ds===void 0&&!RV&&iI(),e&&(g_[e]=!0);let n=new sI;try{await n._impl.create(s)}finally{e&&delete g_[e]}return e&&(wi[e]=n),n._setup(s,e),n._sessionCallback=t,n.on("_afterPoolClose",()=>{n.poolAlias&&delete wi[n.poolAlias]}),n}_(gV,"createPool");async function CV(s){let e={},t;if(q.assertArgCount(arguments,0,1),arguments.length==0?t=Io:typeof s=="string"?t=s:(e=s,q.assertParamValue(Rt.isObject(e),1),t=e.poolAlias),t){let o=wi[t];return q.assert(o,q.ERR_POOL_WITH_ALIAS_NOT_FOUND,t),await o.getConnection(e)}e=await oI(e,!1),le.addToOptions(e,"connectionClass","edition","events","externalAuth","stmtCacheSize"),Ds===void 0&&!le.thinDriverInitialized&&iI();let n=new nI;return n._impl=new rI.ConnectionImpl,await n._impl.connect(e),Ds===void 0&&(le.thinDriverInitialized=!0),n}_(CV,"getConnection");function OV(s){let e;return q.assertArgCount(arguments,0,1),s&&q.assertParamValue(typeof s=="string"||typeof s=="number",1),s=s||Io,e=wi[s],e||q.throwErr(q.ERR_POOL_WITH_ALIAS_NOT_FOUND,s),e}_(OV,"getPool");function yV(s){let e={};if(q.assertArgCount(arguments,0,1),s!==void 0&&(q.assertParamValue(Rt.isObject(s),1),e={...s},q.assertParamPropString(e,1,"libDir"),q.assertParamPropString(e,1,"configDir"),q.assertParamPropString(e,1,"errorUrl"),q.assertParamPropString(e,1,"driverName")),le.thinDriverInitialized&&q.throwErr(q.ERR_THIN_CONNECTION_ALREADY_CREATED),Ds===void 0){let t=IV();e.driverName===void 0&&(e.driverName=W.DEFAULT_DRIVER_NAME+" thk"),e.errorUrl===void 0&&(e.errorUrl=W.DEFAULT_ERROR_URL);try{t.initOracleClient(e,rI,le)}catch(n){let o=q.transformErr(n);throw o.code==="DPI-1047"&&(o.message+=`
`+Rt.getInstallHelp()),o}Ds=s||{}}else cV.isDeepStrictEqual(Ds,e)||q.throwErr(q.ERR_INIT_ORACLE_CLIENT_ARGS);le.thin=!1}_(yV,"initOracleClient");async function LV(s,e){let t={},n=W.SHUTDOWN_MODE_DEFAULT;q.assertArgCount(arguments,0,2),arguments.length==2?(q.assertParamValue(typeof s=="object",1),q.assertParamValue(typeof e=="number",2),t=s,n=e):arguments.length==1&&(q.assertParamValue(typeof s=="object",1),t=s);let o={user:t.user,password:t.password,connectString:t.connectString,connectionString:t.connectionString,externalAuth:t.externalAuth,privilege:W.SYSOPER},a=await this.getConnection(o);await a.shutdown(n),n!=this.SHUTDOWN_MODE_ABORT&&(await a.execute("ALTER DATABASE CLOSE"),await a.execute("ALTER DATABASE DISMOUNT"),await a.shutdown(this.SHUTDOWN_MODE_FINAL)),await a.close()}_(LV,"shutdown");async function wV(s,e){let t={},n={};q.assertArgCount(arguments,0,2),arguments.length==2?(q.assertParamValue(typeof s=="object",1),q.assertParamValue(typeof e=="object",2),t=s,n=e):arguments.length==1&&(q.assertParamValue(typeof s=="object",1),t=s);let o={user:t.user,password:t.password,connectString:t.connectString,connectionString:t.connectionString,externalAuth:t.externalAuth,privilege:this.SYSOPER|this.SYSPRELIM},a=await this.getConnection(o);await a.startup(n),await a.close(),o.privilege=this.SYSOPER,a=await this.getConnection(o),await a.execute("ALTER DATABASE MOUNT"),await a.execute("ALTER DATABASE OPEN"),await a.close()}_(wV,"startup");aI.exports={AqDeqOptions:lV,AqEnqOptions:TV,AqMessage:uV,AqQueue:EV,BaseDbObject:hV,Connection:nI,Lob:SV,Pool:sI,PoolStatistics:NV,ResultSet:fV,SodaDatabase:AV,SodaCollection:dV,SodaDocCursor:pV,SodaDocument:mV,SodaOperation:PV,getConnection:Rt.callbackify(CV),createPool:Rt.callbackify(gV),getPool:OV,initOracleClient:yV,shutdown:Rt.callbackify(LV),startup:Rt.callbackify(wV),CQN_OPCODE_ALL_OPS:W.CQN_OPCODE_ALL_OPS,CQN_OPCODE_ALL_ROWS:W.CQN_OPCODE_ALL_ROWS,CQN_OPCODE_ALTER:W.CQN_OPCODE_ALTER,CQN_OPCODE_DELETE:W.CQN_OPCODE_DELETE,CQN_OPCODE_DROP:W.CQN_OPCODE_DROP,CQN_OPCODE_INSERT:W.CQN_OPCODE_INSERT,CQN_OPCODE_UPDATE:W.CQN_OPCODE_UPDATE,DB_TYPE_BFILE:xe.DB_TYPE_BFILE,DB_TYPE_BINARY_DOUBLE:xe.DB_TYPE_BINARY_DOUBLE,DB_TYPE_BINARY_FLOAT:xe.DB_TYPE_BINARY_FLOAT,DB_TYPE_BINARY_INTEGER:xe.DB_TYPE_BINARY_INTEGER,DB_TYPE_BLOB:xe.DB_TYPE_BLOB,DB_TYPE_BOOLEAN:xe.DB_TYPE_BOOLEAN,DB_TYPE_CHAR:xe.DB_TYPE_CHAR,DB_TYPE_CLOB:xe.DB_TYPE_CLOB,DB_TYPE_CURSOR:xe.DB_TYPE_CURSOR,DB_TYPE_DATE:xe.DB_TYPE_DATE,DB_TYPE_INTERVAL_DS:xe.DB_TYPE_INTERVAL_DS,DB_TYPE_INTERVAL_YM:xe.DB_TYPE_INTERVAL_YM,DB_TYPE_JSON:xe.DB_TYPE_JSON,DB_TYPE_LONG:xe.DB_TYPE_LONG,DB_TYPE_LONG_NVARCHAR:xe.DB_TYPE_LONG_NVARCHAR,DB_TYPE_LONG_RAW:xe.DB_TYPE_LONG_RAW,DB_TYPE_NCHAR:xe.DB_TYPE_NCHAR,DB_TYPE_NCLOB:xe.DB_TYPE_NCLOB,DB_TYPE_NUMBER:xe.DB_TYPE_NUMBER,DB_TYPE_NVARCHAR:xe.DB_TYPE_NVARCHAR,DB_TYPE_OBJECT:xe.DB_TYPE_OBJECT,DB_TYPE_RAW:xe.DB_TYPE_RAW,DB_TYPE_ROWID:xe.DB_TYPE_ROWID,DB_TYPE_TIMESTAMP:xe.DB_TYPE_TIMESTAMP,DB_TYPE_TIMESTAMP_LTZ:xe.DB_TYPE_TIMESTAMP_LTZ,DB_TYPE_TIMESTAMP_TZ:xe.DB_TYPE_TIMESTAMP_TZ,DB_TYPE_VARCHAR:xe.DB_TYPE_VARCHAR,DEFAULT:W.DEFAULT,STMT_TYPE_UNKNOWN:W.STMT_TYPE_UNKNOWN,STMT_TYPE_SELECT:W.STMT_TYPE_SELECT,STMT_TYPE_UPDATE:W.STMT_TYPE_UPDATE,STMT_TYPE_DELETE:W.STMT_TYPE_DELETE,STMT_TYPE_INSERT:W.STMT_TYPE_INSERT,STMT_TYPE_CREATE:W.STMT_TYPE_CREATE,STMT_TYPE_DROP:W.STMT_TYPE_DROP,STMT_TYPE_ALTER:W.STMT_TYPE_ALTER,STMT_TYPE_BEGIN:W.STMT_TYPE_BEGIN,STMT_TYPE_DECLARE:W.STMT_TYPE_DECLARE,STMT_TYPE_CALL:W.STMT_TYPE_CALL,STMT_TYPE_EXPLAIN_PLAN:W.STMT_TYPE_EXPLAIN_PLAN,STMT_TYPE_MERGE:W.STMT_TYPE_MERGE,STMT_TYPE_ROLLBACK:W.STMT_TYPE_ROLLBACK,STMT_TYPE_COMMIT:W.STMT_TYPE_COMMIT,SHUTDOWN_MODE_DEFAULT:W.SHUTDOWN_MODE_DEFAULT,SHUTDOWN_MODE_TRANSACTIONAL:W.SHUTDOWN_MODE_TRANSACTIONAL,SHUTDOWN_MODE_TRANSACTIONAL_LOCAL:W.SHUTDOWN_MODE_TRANSACTIONAL_LOCAL,SHUTDOWN_MODE_IMMEDIATE:W.SHUTDOWN_MODE_IMMEDIATE,SHUTDOWN_MODE_ABORT:W.SHUTDOWN_MODE_ABORT,SHUTDOWN_MODE_FINAL:W.SHUTDOWN_MODE_FINAL,STARTUP_MODE_DEFAULT:W.STARTUP_MODE_DEFAULT,STARTUP_MODE_FORCE:W.STARTUP_MODE_FORCE,STARTUP_MODE_RESTRICT:W.STARTUP_MODE_RESTRICT,SUBSCR_EVENT_TYPE_SHUTDOWN:W.SUBSCR_EVENT_TYPE_SHUTDOWN,SUBSCR_EVENT_TYPE_SHUTDOWN_ANY:W.SUBSCR_EVENT_TYPE_SHUTDOWN_ANY,SUBSCR_EVENT_TYPE_STARTUP:W.SUBSCR_EVENT_TYPE_STARTUP,SUBSCR_EVENT_TYPE_DEREG:W.SUBSCR_EVENT_TYPE_DEREG,SUBSCR_EVENT_TYPE_OBJ_CHANGE:W.SUBSCR_EVENT_TYPE_OBJ_CHANGE,SUBSCR_EVENT_TYPE_QUERY_CHANGE:W.SUBSCR_EVENT_TYPE_QUERY_CHANGE,SUBSCR_EVENT_TYPE_AQ:W.SUBSCR_EVENT_TYPE_AQ,SUBSCR_GROUPING_CLASS_TIME:W.SUBSCR_GROUPING_CLASS_TIME,SUBSCR_GROUPING_TYPE_SUMMARY:W.SUBSCR_GROUPING_TYPE_SUMMARY,SUBSCR_GROUPING_TYPE_LAST:W.SUBSCR_GROUPING_TYPE_LAST,SUBSCR_NAMESPACE_AQ:W.SUBSCR_NAMESPACE_AQ,SUBSCR_NAMESPACE_DBCHANGE:W.SUBSCR_NAMESPACE_DBCHANGE,SUBSCR_QOS_BEST_EFFORT:W.SUBSCR_QOS_BEST_EFFORT,SUBSCR_QOS_DEREG_NFY:W.SUBSCR_QOS_DEREG_NFY,SUBSCR_QOS_QUERY:W.SUBSCR_QOS_QUERY,SUBSCR_QOS_RELIABLE:W.SUBSCR_QOS_RELIABLE,SUBSCR_QOS_ROWIDS:W.SUBSCR_QOS_ROWIDS,SYSASM:W.SYSASM,SYSBACKUP:W.SYSBACKUP,SYSDBA:W.SYSDBA,SYSDG:W.SYSDG,SYSKM:W.SYSKM,SYSOPER:W.SYSOPER,SYSPRELIM:W.SYSPRELIM,SYSRAC:W.SYSRAC,BIND_IN:W.BIND_IN,BIND_INOUT:W.BIND_INOUT,BIND_OUT:W.BIND_OUT,OUT_FORMAT_ARRAY:W.OUT_FORMAT_ARRAY,OUT_FORMAT_OBJECT:W.OUT_FORMAT_OBJECT,SODA_COLL_MAP_MODE:W.SODA_COLL_MAP_MODE,POOL_STATUS_OPEN:W.POOL_STATUS_OPEN,POOL_STATUS_DRAINING:W.POOL_STATUS_DRAINING,POOL_STATUS_CLOSED:W.POOL_STATUS_CLOSED,POOL_STATUS_RECONFIGURING:W.POOL_STATUS_RECONFIGURING,AQ_DEQ_NO_WAIT:W.AQ_DEQ_NO_WAIT,AQ_DEQ_WAIT_FOREVER:W.AQ_DEQ_WAIT_FOREVER,AQ_DEQ_MODE_BROWSE:W.AQ_DEQ_MODE_BROWSE,AQ_DEQ_MODE_LOCKED:W.AQ_DEQ_MODE_LOCKED,AQ_DEQ_MODE_REMOVE:W.AQ_DEQ_MODE_REMOVE,AQ_DEQ_MODE_REMOVE_NO_DATA:W.AQ_DEQ_MODE_REMOVE_NO_DATA,AQ_DEQ_NAV_FIRST_MSG:W.AQ_DEQ_NAV_FIRST_MSG,AQ_DEQ_NAV_NEXT_TRANSACTION:W.AQ_DEQ_NAV_NEXT_TRANSACTION,AQ_DEQ_NAV_NEXT_MSG:W.AQ_DEQ_NAV_NEXT_MSG,AQ_MSG_DELIV_MODE_PERSISTENT:W.AQ_MSG_DELIV_MODE_PERSISTENT,AQ_MSG_DELIV_MODE_BUFFERED:W.AQ_MSG_DELIV_MODE_BUFFERED,AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED:W.AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED,AQ_MSG_STATE_READY:W.AQ_MSG_STATE_READY,AQ_MSG_STATE_WAITING:W.AQ_MSG_STATE_WAITING,AQ_MSG_STATE_PROCESSED:W.AQ_MSG_STATE_PROCESSED,AQ_MSG_STATE_EXPIRED:W.AQ_MSG_STATE_EXPIRED,AQ_VISIBILITY_IMMEDIATE:W.AQ_VISIBILITY_IMMEDIATE,AQ_VISIBILITY_ON_COMMIT:W.AQ_VISIBILITY_ON_COMMIT,TPC_BEGIN_JOIN:W.TPC_BEGIN_JOIN,TPC_BEGIN_NEW:W.TPC_BEGIN_NEW,TPC_BEGIN_PROMOTE:W.TPC_BEGIN_PROMOTE,TPC_BEGIN_RESUME:W.TPC_BEGIN_RESUME,TPC_END_NORMAL:W.TPC_END_NORMAL,TPC_END_SUSPEND:W.TPC_END_SUSPEND,BLOB:xe.DB_TYPE_BLOB,BUFFER:xe.DB_TYPE_RAW,CLOB:xe.DB_TYPE_CLOB,CURSOR:xe.DB_TYPE_CURSOR,DATE:xe.DB_TYPE_TIMESTAMP,NCLOB:xe.DB_TYPE_NCLOB,NUMBER:xe.DB_TYPE_NUMBER,STRING:xe.DB_TYPE_VARCHAR,ARRAY:W.OUT_FORMAT_ARRAY,OBJECT:W.OUT_FORMAT_OBJECT,get autoCommit(){return le.autoCommit},get connectionClass(){return le.connectionClass},get dbObjectAsPojo(){return le.dbObjectAsPojo},get edition(){return le.edition},get errorOnConcurrentExecute(){return le.errorOnConcurrentExecute},get events(){return le.events},get externalAuth(){return le.externalAuth},get fetchArraySize(){return le.fetchArraySize},get fetchAsBuffer(){return le.fetchAsBuffer},get fetchAsString(){return le.fetchAsString},get fetchTypeHandler(){return le.fetchTypeHandler},get lobPrefetchSize(){return le.lobPrefetchSize},get maxRows(){return le.maxRows},get oracleClientVersion(){return Ds===void 0&&q.throwNotImplemented("getting the Oracle Client version"),le.oracleClientVersion},get oracleClientVersionString(){return Ds===void 0&&q.throwNotImplemented("getting the Oracle Client version"),le.oracleClientVersionString},get outFormat(){return le.outFormat},get poolIncrement(){return le.poolIncrement},get poolMax(){return le.poolMax},get poolMaxPerShard(){return le.poolMaxPerShard},get poolMin(){return le.poolMin},get poolPingInterval(){return le.poolPingInterval},get poolTimeout(){return le.poolTimeout},get prefetchRows(){return le.prefetchRows},get stmtCacheSize(){return le.stmtCacheSize},get thin(){return le.thin},get version(){return W.VERSION_MAJOR*1e4+W.VERSION_MINOR*100+W.VERSION_PATCH},get versionString(){return W.VERSION_STRING},get versionSuffix(){return W.VERSION_SUFFIX},set autoCommit(s){q.assertPropValue(typeof s=="boolean","autoCommit"),le.autoCommit=s},set connectionClass(s){q.assertPropValue(typeof s=="string","connectionClass"),le.connectionClass=s},set dbObjectAsPojo(s){q.assertPropValue(typeof s=="boolean","dbObjectAsPojo"),le.dbObjectAsPojo=s},set edition(s){q.assertPropValue(typeof s=="string","edition"),le.edition=s},set errorOnConcurrentExecute(s){q.assertPropValue(typeof s=="boolean","errorOnConcurrentExecute"),le.errorOnConcurrentExecute=s},set events(s){q.assertPropValue(typeof s=="boolean","events"),le.events=s},set externalAuth(s){q.assertPropValue(typeof s=="boolean","externalAuth"),le.externalAuth=s},set fetchArraySize(s){q.assertPropValue(Number.isInteger(s)&&s>0,"fetchArraySize"),le.fetchArraySize=s},set fetchAsBuffer(s){q.assertPropValue(Array.isArray(s),"fetchAsBuffer"),le.createFetchTypeMap(le.fetchAsString,s),le.fetchAsBuffer=s},set fetchAsString(s){q.assertPropValue(Array.isArray(s),"fetchAsString"),le.createFetchTypeMap(s,le.fetchAsBuffer),le.fetchAsString=s},set fetchTypeHandler(s){s!==void 0&&q.assertPropValue(typeof s=="function","fetchTypeHandler"),le.fetchTypeHandler=s},set lobPrefetchSize(s){q.assertPropValue(Number.isInteger(s)&&s>=0,"lobPrefetchSize"),le.lobPrefetchSize=s},set maxRows(s){q.assertPropValue(Number.isInteger(s)&&s>=0,"maxRows"),le.maxRows=s},set outFormat(s){s!==W.OUT_FORMAT_ARRAY&&s!==W.OUT_FORMAT_OBJECT&&q.throwErr(q.ERR_INVALID_PROPERTY_VALUE,"outFormat"),le.outFormat=s},set poolIncrement(s){q.assertPropValue(Number.isInteger(s)&&s>=0,"poolIncrement"),le.poolIncrement=s},set poolMax(s){q.assertPropValue(Number.isInteger(s)&&s>=0,"poolMax"),le.poolMax=s},set poolMaxPerShard(s){q.assertPropValue(Number.isInteger(s)&&s>=0,"poolMaxPerShard"),le.poolMaxPerShard=s},set poolMin(s){q.assertPropValue(Number.isInteger(s)&&s>=0,"poolMin"),le.poolMin=s},set poolPingInterval(s){q.assertPropValue(Number.isInteger(s)&&s<2**31&&s>=(-2)**31,"poolPingInterval"),le.poolPingInterval=s},set poolTimeout(s){q.assertPropValue(Number.isInteger(s)&&s>=0,"poolTimeout"),le.poolTimeout=s},set prefetchRows(s){q.assertPropValue(Number.isInteger(s)&&s>=0,"prefetchRows"),le.prefetchRows=s},set stmtCacheSize(s){q.assertPropValue(Number.isInteger(s)&&s>=0,"stmtCacheSize"),le.stmtCacheSize=s}}});var lI=Y((Gq,cI)=>{cI.exports=_I()});var gh=Y(TI=>{TI.require=function(){if(typeof process=="object"&&process.versions&&process.versions.electron)try{let s=require("original-fs");if(Object.keys(s).length>0)return s}catch{}return require("fs")}});var Ch=Y((Kq,uI)=>{uI.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var NI=Y((Wq,SI)=>{var BV=gh().require(),Ar=require("path"),EI=Ch(),UV=typeof process=="object"&&process.platform==="win32",hI=_(s=>s&&typeof s=="object","is_Obj"),Oh=new Uint32Array(256).map((s,e)=>{for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e>>>=1;return e>>>0});function Zt(s){this.sep=Ar.sep,this.fs=BV,hI(s)&&hI(s.fs)&&typeof s.fs.statSync=="function"&&(this.fs=s.fs)}_(Zt,"Utils");SI.exports=Zt;Zt.prototype.makeDir=function(s){let e=this;function t(n){let o=n.split(e.sep)[0];n.split(e.sep).forEach(function(a){if(!(!a||a.substr(-1,1)===":")){o+=e.sep+a;var T;try{T=e.fs.statSync(o)}catch{e.fs.mkdirSync(o)}if(T&&T.isFile())throw Errors.FILE_IN_THE_WAY.replace("%s",o)}})}_(t,"mkdirSync"),t(s)};Zt.prototype.writeFileTo=function(s,e,t,n){let o=this;if(o.fs.existsSync(s)){if(!t)return!1;var a=o.fs.statSync(s);if(a.isDirectory())return!1}var T=Ar.dirname(s);o.fs.existsSync(T)||o.makeDir(T);var u;try{u=o.fs.openSync(s,"w",438)}catch{o.fs.chmodSync(s,438),u=o.fs.openSync(s,"w",438)}if(u)try{o.fs.writeSync(u,e,0,e.length,0)}finally{o.fs.closeSync(u)}return o.fs.chmodSync(s,n||438),!0};Zt.prototype.writeFileToAsync=function(s,e,t,n,o){typeof n=="function"&&(o=n,n=void 0);let a=this;a.fs.exists(s,function(T){if(T&&!t)return o(!1);a.fs.stat(s,function(u,h){if(T&&h.isDirectory())return o(!1);var A=Ar.dirname(s);a.fs.exists(A,function(N){N||a.makeDir(A),a.fs.open(s,"w",438,function(R,g){R?a.fs.chmod(s,438,function(){a.fs.open(s,"w",438,function(I,p){a.fs.write(p,e,0,e.length,0,function(){a.fs.close(p,function(){a.fs.chmod(s,n||438,function(){o(!0)})})})})}):g?a.fs.write(g,e,0,e.length,0,function(){a.fs.close(g,function(){a.fs.chmod(s,n||438,function(){o(!0)})})}):a.fs.chmod(s,n||438,function(){o(!0)})})})})})};Zt.prototype.findFiles=function(s){let e=this;function t(n,o,a){typeof o=="boolean"&&(a=o,o=void 0);let T=[];return e.fs.readdirSync(n).forEach(function(u){var h=Ar.join(n,u);e.fs.statSync(h).isDirectory()&&a&&(T=T.concat(t(h,o,a))),(!o||o.test(h))&&T.push(Ar.normalize(h)+(e.fs.statSync(h).isDirectory()?e.sep:""))}),T}return _(t,"findSync"),t(s,void 0,!0)};Zt.prototype.getAttributes=function(){};Zt.prototype.setAttributes=function(){};Zt.crc32update=function(s,e){return Oh[(s^e)&255]^s>>>8};Zt.crc32=function(s){typeof s=="string"&&(s=Buffer.from(s,"utf8")),Oh.length||genCRCTable();let e=s.length,t=-1;for(let n=0;n<e;)t=Zt.crc32update(t,s[n++]);return~t>>>0};Zt.methodToString=function(s){switch(s){case EI.STORED:return"STORED ("+s+")";case EI.DEFLATED:return"DEFLATED ("+s+")";default:return"UNSUPPORTED ("+s+")"}};Zt.canonical=function(s){if(!s)return"";var e=Ar.posix.normalize("/"+s.split("\\").join("/"));return Ar.join(".",e)};Zt.sanitize=function(s,e){s=Ar.resolve(Ar.normalize(s));for(var t=e.split("/"),n=0,o=t.length;n<o;n++){var a=Ar.normalize(Ar.join(s,t.slice(n,o).join(Ar.sep)));if(a.indexOf(s)===0)return a}return Ar.normalize(Ar.join(s,Ar.basename(e)))};Zt.toBuffer=_(function(e){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?Buffer.from(e,"utf8"):Buffer.alloc(0)},"toBuffer");Zt.readBigUInt64LE=function(s,e){var t=Buffer.from(s.slice(e,e+8));return t.swap64(),parseInt(`0x${t.toString("hex")}`)};Zt.isWin=UV;Zt.crcTable=Oh});var AI=Y((zq,fI)=>{fI.exports={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed",FILE_IN_THE_WAY:"There is a file in the way: %s",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:"File not found: %s",NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found"}});var mI=Y((Xq,pI)=>{var C_=gh().require(),dI=require("path");C_.existsSync=C_.existsSync||dI.existsSync;pI.exports=function(s){var e=s||"",t=o(),n=null;function o(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return _(o,"newAttr"),e&&C_.existsSync(e)?(n=C_.statSync(e),t.directory=n.isDirectory(),t.mtime=n.mtime,t.atime=n.atime,t.executable=(73&n.mode)!==0,t.readonly=(128&n.mode)===0,t.hidden=dI.basename(e)[0]==="."):console.warn("Invalid path: "+e),{get directory(){return t.directory},get readOnly(){return t.readonly},get hidden(){return t.hidden},get mtime(){return t.mtime},get atime(){return t.atime},get executable(){return t.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:e,isDirectory:t.directory,isReadOnly:t.readonly,isHidden:t.hidden,isExecutable:t.executable,mTime:t.mtime,aTime:t.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Bi=Y((Jq,Do)=>{Do.exports=NI();Do.exports.Constants=Ch();Do.exports.Errors=AI();Do.exports.FileAttr=mI()});var RI=Y((jq,PI)=>{var go=Bi(),oe=go.Constants;PI.exports=function(){var s=20,e=10,t=0,n=0,o=0,a=0,T=0,u=0,h=0,A=0,N=0,R=0,g=0,I=0,p=0;s|=go.isWin?2560:768,t|=oe.FLG_EFS;var m={};function y(P){P=new Date(P),o=(P.getFullYear()-1980&127)<<25|P.getMonth()+1<<21|P.getDate()<<16|P.getHours()<<11|P.getMinutes()<<5|P.getSeconds()>>1}return _(y,"setTime"),y(+new Date),{get made(){return s},set made(P){s=P},get version(){return e},set version(P){e=P},get flags(){return t},set flags(P){t=P},get method(){return n},set method(P){switch(P){case oe.STORED:this.version=10;case oe.DEFLATED:default:this.version=20}n=P},get time(){return new Date((o>>25&127)+1980,(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(o&31)<<1)},set time(P){y(P)},get crc(){return a},set crc(P){a=Math.max(0,P)>>>0},get compressedSize(){return T},set compressedSize(P){T=Math.max(0,P)>>>0},get size(){return u},set size(P){u=Math.max(0,P)>>>0},get fileNameLength(){return h},set fileNameLength(P){h=P},get extraLength(){return A},set extraLength(P){A=P},get commentLength(){return N},set commentLength(P){N=P},get diskNumStart(){return R},set diskNumStart(P){R=Math.max(0,P)>>>0},get inAttr(){return g},set inAttr(P){g=Math.max(0,P)>>>0},get attr(){return I},set attr(P){I=Math.max(0,P)>>>0},get fileAttr(){return I?(I>>>0|0)>>16&4095:0},get offset(){return p},set offset(P){p=Math.max(0,P)>>>0},get encripted(){return(t&1)===1},get entryHeaderSize(){return oe.CENHDR+h+A+N},get realDataOffset(){return p+oe.LOCHDR+m.fnameLen+m.extraLen},get dataHeader(){return m},loadDataHeaderFromBinary:function(P){var M=P.slice(p,p+oe.LOCHDR);if(M.readUInt32LE(0)!==oe.LOCSIG)throw new Error(go.Errors.INVALID_LOC);m={version:M.readUInt16LE(oe.LOCVER),flags:M.readUInt16LE(oe.LOCFLG),method:M.readUInt16LE(oe.LOCHOW),time:M.readUInt32LE(oe.LOCTIM),crc:M.readUInt32LE(oe.LOCCRC),compressedSize:M.readUInt32LE(oe.LOCSIZ),size:M.readUInt32LE(oe.LOCLEN),fnameLen:M.readUInt16LE(oe.LOCNAM),extraLen:M.readUInt16LE(oe.LOCEXT)}},loadFromBinary:function(P){if(P.length!==oe.CENHDR||P.readUInt32LE(0)!==oe.CENSIG)throw new Error(go.Errors.INVALID_CEN);s=P.readUInt16LE(oe.CENVEM),e=P.readUInt16LE(oe.CENVER),t=P.readUInt16LE(oe.CENFLG),n=P.readUInt16LE(oe.CENHOW),o=P.readUInt32LE(oe.CENTIM),a=P.readUInt32LE(oe.CENCRC),T=P.readUInt32LE(oe.CENSIZ),u=P.readUInt32LE(oe.CENLEN),h=P.readUInt16LE(oe.CENNAM),A=P.readUInt16LE(oe.CENEXT),N=P.readUInt16LE(oe.CENCOM),R=P.readUInt16LE(oe.CENDSK),g=P.readUInt16LE(oe.CENATT),I=P.readUInt32LE(oe.CENATX),p=P.readUInt32LE(oe.CENOFF)},dataHeaderToBinary:function(){var P=Buffer.alloc(oe.LOCHDR);return P.writeUInt32LE(oe.LOCSIG,0),P.writeUInt16LE(e,oe.LOCVER),P.writeUInt16LE(t,oe.LOCFLG),P.writeUInt16LE(n,oe.LOCHOW),P.writeUInt32LE(o,oe.LOCTIM),P.writeUInt32LE(a,oe.LOCCRC),P.writeUInt32LE(T,oe.LOCSIZ),P.writeUInt32LE(u,oe.LOCLEN),P.writeUInt16LE(h,oe.LOCNAM),P.writeUInt16LE(A,oe.LOCEXT),P},entryHeaderToBinary:function(){var P=Buffer.alloc(oe.CENHDR+h+A+N);return P.writeUInt32LE(oe.CENSIG,0),P.writeUInt16LE(s,oe.CENVEM),P.writeUInt16LE(e,oe.CENVER),P.writeUInt16LE(t,oe.CENFLG),P.writeUInt16LE(n,oe.CENHOW),P.writeUInt32LE(o,oe.CENTIM),P.writeUInt32LE(a,oe.CENCRC),P.writeUInt32LE(T,oe.CENSIZ),P.writeUInt32LE(u,oe.CENLEN),P.writeUInt16LE(h,oe.CENNAM),P.writeUInt16LE(A,oe.CENEXT),P.writeUInt16LE(N,oe.CENCOM),P.writeUInt16LE(R,oe.CENDSK),P.writeUInt16LE(g,oe.CENATT),P.writeUInt32LE(I,oe.CENATX),P.writeUInt32LE(p,oe.CENOFF),P.fill(0,oe.CENHDR),P},toJSON:function(){let P=_(function(M){return M+" bytes"},"bytes");return{made:s,version:e,flags:t,method:go.methodToString(n),time:this.time,crc:"0x"+a.toString(16).toUpperCase(),compressedSize:P(T),size:P(u),fileNameLength:P(h),extraLength:P(A),commentLength:P(N),diskNumStart:R,inAttr:g,attr:I,offset:p,entryHeaderSize:P(oe.CENHDR+h+A+N)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var DI=Y((eG,II)=>{var Ui=Bi(),dt=Ui.Constants;II.exports=function(){var s=0,e=0,t=0,n=0,o=0;return{get diskEntries(){return s},set diskEntries(a){s=e=a},get totalEntries(){return e},set totalEntries(a){e=s=a},get size(){return t},set size(a){t=a},get offset(){return n},set offset(a){n=a},get commentLength(){return o},set commentLength(a){o=a},get mainHeaderSize(){return dt.ENDHDR+o},loadFromBinary:function(a){if((a.length!==dt.ENDHDR||a.readUInt32LE(0)!==dt.ENDSIG)&&(a.length<dt.ZIP64HDR||a.readUInt32LE(0)!==dt.ZIP64SIG))throw new Error(Ui.Errors.INVALID_END);a.readUInt32LE(0)===dt.ENDSIG?(s=a.readUInt16LE(dt.ENDSUB),e=a.readUInt16LE(dt.ENDTOT),t=a.readUInt32LE(dt.ENDSIZ),n=a.readUInt32LE(dt.ENDOFF),o=a.readUInt16LE(dt.ENDCOM)):(s=Ui.readBigUInt64LE(a,dt.ZIP64SUB),e=Ui.readBigUInt64LE(a,dt.ZIP64TOT),t=Ui.readBigUInt64LE(a,dt.ZIP64SIZ),n=Ui.readBigUInt64LE(a,dt.ZIP64OFF),o=0)},toBinary:function(){var a=Buffer.alloc(dt.ENDHDR+o);return a.writeUInt32LE(dt.ENDSIG,0),a.writeUInt32LE(0,4),a.writeUInt16LE(s,dt.ENDSUB),a.writeUInt16LE(e,dt.ENDTOT),a.writeUInt32LE(t,dt.ENDSIZ),a.writeUInt32LE(n,dt.ENDOFF),a.writeUInt16LE(o,dt.ENDCOM),a.fill(" ",dt.ENDHDR),a},toJSON:function(){let a=_(function(T,u){let h=T.toString(16).toUpperCase();for(;h.length<u;)h="0"+h;return"0x"+h},"offset");return{diskEntries:s,totalEntries:e,size:t+" bytes",offset:a(n,4),commentLength:o}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Lh=Y(yh=>{yh.EntryHeader=RI();yh.MainHeader=DI()});var CI=Y((nG,gI)=>{gI.exports=function(s){var e=require("zlib"),t={chunkSize:(parseInt(s.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(s,t)},deflateAsync:function(n){var o=e.createDeflateRaw(t),a=[],T=0;o.on("data",function(u){a.push(u),T+=u.length}),o.on("end",function(){var u=Buffer.alloc(T),h=0;u.fill(0);for(var A=0;A<a.length;A++){var N=a[A];N.copy(u,h),h+=N.length}n&&n(u)}),o.end(s)}}}});var yI=Y((sG,OI)=>{OI.exports=function(s){var e=require("zlib");return{inflate:function(){return e.inflateRawSync(s)},inflateAsync:function(t){var n=e.createInflateRaw(),o=[],a=0;n.on("data",function(T){o.push(T),a+=T.length}),n.on("end",function(){var T=Buffer.alloc(a),u=0;T.fill(0);for(var h=0;h<o.length;h++){var A=o[h];A.copy(T,u),u+=A.length}t&&t(T)}),n.end(s)}}}});var YI=Y((iG,UI)=>{"use strict";var{randomFillSync:LI}=require("crypto"),YV=new Uint32Array(256).map((s,e)=>{for(let t=0;t<8;t++)e&1?e=e>>>1^3988292384:e>>>=1;return e>>>0}),BI=_((s,e)=>Math.imul(s,e)>>>0,"uMul"),wI=_((s,e)=>YV[(s^e)&255]^s>>>8,"crc32update"),Co=_(()=>typeof LI=="function"?LI(Buffer.alloc(12)):Co.node(),"genSalt");Co.node=()=>{let s=Buffer.alloc(12),e=s.length;for(let t=0;t<e;t++)s[t]=Math.random()*256&255;return s};var O_={genSalt:Co};function y_(s){let e=Buffer.isBuffer(s)?s:Buffer.from(s);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let t=0;t<e.length;t++)this.updateKeys(e[t])}_(y_,"Initkeys");y_.prototype.updateKeys=function(s){let e=this.keys;return e[0]=wI(e[0],s),e[1]+=e[0]&255,e[1]=BI(e[1],134775813)+1,e[2]=wI(e[2],e[1]>>>24),s};y_.prototype.next=function(){let s=(this.keys[2]|2)>>>0;return BI(s,s^1)>>8&255};function MV(s){let e=new y_(s);return function(t){let n=Buffer.alloc(t.length),o=0;for(let a of t)n[o++]=e.updateKeys(a^e.next());return n}}_(MV,"make_decrypter");function xV(s){let e=new y_(s);return function(t,n,o=0){n||(n=Buffer.alloc(t.length));for(let a of t){let T=e.next();n[o++]=a^T,e.updateKeys(a)}return n}}_(xV,"make_encrypter");function VV(s,e,t){if(!s||!Buffer.isBuffer(s)||s.length<12)return Buffer.alloc(0);let n=MV(t);if(n(s.slice(0,12))[11]!==e.crc>>>24)throw"ADM-ZIP: Wrong Password";return n(s.slice(12))}_(VV,"decrypt");function bV(s){Buffer.isBuffer(s)&&s.length>=12?O_.genSalt=function(){return s.slice(0,12)}:s==="node"?O_.genSalt=Co.node:O_.genSalt=Co}_(bV,"_salter");function FV(s,e,t,n=!1){s==null&&(s=Buffer.alloc(0)),Buffer.isBuffer(s)||(s=Buffer.from(s.toString()));let o=xV(t),a=O_.genSalt();a[11]=e.crc>>>24&255,n&&(a[10]=e.crc>>>16&255);let T=Buffer.alloc(s.length+12);return o(a,T),o(s,T,12)}_(FV,"encrypt");UI.exports={decrypt:VV,encrypt:FV,_salter:bV}});var MI=Y(L_=>{L_.Deflater=CI();L_.Inflater=yI();L_.ZipCrypto=YI()});var Bh=Y((_G,xI)=>{var Ut=Bi(),vV=Lh(),br=Ut.Constants,wh=MI();xI.exports=function(s){var e=new vV.EntryHeader,t=Buffer.alloc(0),n=Buffer.alloc(0),o=!1,a=null,T=Buffer.alloc(0);function u(){return!s||!Buffer.isBuffer(s)?Buffer.alloc(0):(e.loadDataHeaderFromBinary(s),s.slice(e.realDataOffset,e.realDataOffset+e.compressedSize))}_(u,"getCompressedDataFromZip");function h(p){return!((e.flags&8)!==8&&Ut.crc32(p)!==e.dataHeader.crc)}_(h,"crc32OK");function A(p,m,y){if(typeof m>"u"&&typeof p=="string"&&(y=p,p=void 0),o)return p&&m&&m(Buffer.alloc(0),Ut.Errors.DIRECTORY_CONTENT_ERROR),Buffer.alloc(0);var P=u();if(P.length===0)return p&&m&&m(P),P;if(e.encripted){if(typeof y!="string"&&!Buffer.isBuffer(y))throw new Error("ADM-ZIP: Incompatible password parameter");P=wh.ZipCrypto.decrypt(P,e,y)}var M=Buffer.alloc(e.size);switch(e.method){case Ut.Constants.STORED:if(P.copy(M),h(M))return p&&m&&m(M),M;throw p&&m&&m(M,Ut.Errors.BAD_CRC),new Error(Ut.Errors.BAD_CRC);case Ut.Constants.DEFLATED:var B=new wh.Inflater(P);if(p)B.inflateAsync(function(F){F.copy(F,0),m&&(h(F)?m(F):m(F,Ut.Errors.BAD_CRC))});else{if(B.inflate(M).copy(M,0),!h(M))throw new Error(Ut.Errors.BAD_CRC+" "+t.toString());return M}break;default:throw p&&m&&m(Buffer.alloc(0),Ut.Errors.UNKNOWN_METHOD),new Error(Ut.Errors.UNKNOWN_METHOD)}}_(A,"decompress");function N(p,m){if((!a||!a.length)&&Buffer.isBuffer(s))return p&&m&&m(u()),u();if(a.length&&!o){var y;switch(e.method){case Ut.Constants.STORED:return e.compressedSize=e.size,y=Buffer.alloc(a.length),a.copy(y),p&&m&&m(y),y;default:case Ut.Constants.DEFLATED:var P=new wh.Deflater(a);if(p)P.deflateAsync(function(B){y=Buffer.alloc(B.length),e.compressedSize=B.length,B.copy(y),m&&m(y)});else{var M=P.deflate();return e.compressedSize=M.length,M}P=null;break}}else if(p&&m)m(Buffer.alloc(0));else return Buffer.alloc(0)}_(N,"compress");function R(p,m){return(p.readUInt32LE(m+4)<<4)+p.readUInt32LE(m)}_(R,"readUInt64LE");function g(p){for(var m=0,y,P,M;m<p.length;)y=p.readUInt16LE(m),m+=2,P=p.readUInt16LE(m),m+=2,M=p.slice(m,m+P),m+=P,br.ID_ZIP64===y&&I(M)}_(g,"parseExtra");function I(p){var m,y,P,M;p.length>=br.EF_ZIP64_SCOMP&&(m=R(p,br.EF_ZIP64_SUNCOMP),e.size===br.EF_ZIP64_OR_32&&(e.size=m)),p.length>=br.EF_ZIP64_RHO&&(y=R(p,br.EF_ZIP64_SCOMP),e.compressedSize===br.EF_ZIP64_OR_32&&(e.compressedSize=y)),p.length>=br.EF_ZIP64_DSN&&(P=R(p,br.EF_ZIP64_RHO),e.offset===br.EF_ZIP64_OR_32&&(e.offset=P)),p.length>=br.EF_ZIP64_DSN+4&&(M=p.readUInt32LE(br.EF_ZIP64_DSN),e.diskNumStart===br.EF_ZIP64_OR_16&&(e.diskNumStart=M))}return _(I,"parseZip64ExtendedInformation"),{get entryName(){return t.toString()},get rawEntryName(){return t},set entryName(p){t=Ut.toBuffer(p);var m=t[t.length-1];o=m===47||m===92,e.fileNameLength=t.length},get extra(){return T},set extra(p){T=p,e.extraLength=p.length,g(p)},get comment(){return n.toString()},set comment(p){n=Ut.toBuffer(p),e.commentLength=n.length},get name(){var p=t.toString();return o?p.substr(p.length-1).split("/").pop():p.split("/").pop()},get isDirectory(){return o},getCompressedData:function(){return N(!1,null)},getCompressedDataAsync:function(p){N(!0,p)},setData:function(p){a=Ut.toBuffer(p),!o&&a.length?(e.size=a.length,e.method=Ut.Constants.DEFLATED,e.crc=Ut.crc32(p),e.changed=!0):e.method=Ut.Constants.STORED},getData:function(p){return e.changed?a:A(!1,null,p)},getDataAsync:function(p,m){e.changed?p(a):A(!0,p,m)},set attr(p){e.attr=p},get attr(){return e.attr},set header(p){e.loadFromBinary(p)},get header(){return e},packHeader:function(){var p=e.entryHeaderToBinary(),m=Ut.Constants.CENHDR;return t.copy(p,m),m+=t.length,e.extraLength&&(T.copy(p,m),m+=e.extraLength),e.commentLength&&n.copy(p,m),p},toJSON:function(){let p=_(function(m){return"<"+(m&&m.length+" bytes buffer"||"null")+">"},"bytes");return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:e.toJSON(),compressedData:p(s),data:p(a)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var FI=Y((lG,bI)=>{var VI=Bh(),kV=Lh(),cr=Bi();bI.exports=function(s,e){var t=[],n={},o=Buffer.alloc(0),a=new kV.MainHeader,T=!1;let u=Object.assign(Object.create(null),e),{noSort:h}=u;s?R(u.readEntries):T=!0;function A(I){let p=a.diskEntries,m=a.offset;for(let y=0;y<p;y++){let P=m,M=new VI(s);M.header=s.slice(P,P+=cr.Constants.CENHDR),M.entryName=s.slice(P,P+=M.header.fileNameLength),m+=M.header.entryHeaderSize,I(M)}}_(A,"iterateEntries");function N(){T=!0,n={},t=new Array(a.diskEntries);for(var I=a.offset,p=0;p<t.length;p++){var m=I,y=new VI(s);y.header=s.slice(m,m+=cr.Constants.CENHDR),y.entryName=s.slice(m,m+=y.header.fileNameLength),y.header.extraLength&&(y.extra=s.slice(m,m+=y.header.extraLength)),y.header.commentLength&&(y.comment=s.slice(m,m+y.header.commentLength)),I+=y.header.entryHeaderSize,t[p]=y,n[y.entryName]=y}}_(N,"readEntries");function R(I){var p=s.length-cr.Constants.ENDHDR,m=Math.max(0,p-65535),y=m,P=s.length,M=-1,B=0;for(p;p>=y;p--)if(s[p]===80){if(s.readUInt32LE(p)===cr.Constants.ENDSIG){M=p,B=p,P=p+cr.Constants.ENDHDR,y=p-cr.Constants.END64HDR;continue}if(s.readUInt32LE(p)===cr.Constants.END64SIG){y=m;continue}if(s.readUInt32LE(p)===cr.Constants.ZIP64SIG){M=p,P=p+cr.readBigUInt64LE(s,p+cr.Constants.ZIP64SIZE)+cr.Constants.ZIP64LEAD;break}}if(!~M)throw new Error(cr.Errors.INVALID_FORMAT);a.loadFromBinary(s.slice(M,P)),a.commentLength&&(o=s.slice(B+cr.Constants.ENDHDR)),I&&N()}_(R,"readMainHeader");function g(){t.length>1&&!h&&t.sort((I,p)=>I.entryName.toLowerCase().localeCompare(p.entryName.toLowerCase()))}return _(g,"sortEntries"),{get entries(){return T||N(),t},get comment(){return o.toString()},set comment(I){o=cr.toBuffer(I),a.commentLength=o.length},getEntryCount:function(){return T?t.length:a.diskEntries},forEach:function(I){if(!T){A(I);return}t.forEach(I)},getEntry:function(I){return T||N(),n[I]||null},setEntry:function(I){T||N(),t.push(I),n[I.entryName]=I,a.totalEntries=t.length},deleteEntry:function(I){T||N();var p=n[I];if(p&&p.isDirectory){var m=this;this.getEntryChildren(p).forEach(function(y){y.entryName!==I&&m.deleteEntry(y.entryName)})}t.splice(t.indexOf(p),1),delete n[I],a.totalEntries=t.length},getEntryChildren:function(I){if(T||N(),I&&I.isDirectory){let p=[],m=I.entryName,y=m.length;return t.forEach(function(P){P.entryName.substr(0,y)===m&&p.push(P)}),p}return[]},compressToBuffer:function(){T||N(),g();let I=[],p=[],m=0,y=0;a.size=0,a.offset=0;for(let B of t){let F=B.getCompressedData();B.header.offset=y;let $=B.header.dataHeaderToBinary(),j=B.rawEntryName.length,se=Buffer.alloc(j+B.extra.length);B.rawEntryName.copy(se,0),se.copy(B.extra,j);let ue=$.length+se.length+F.length;y+=ue,I.push($),I.push(se),I.push(F);let x=B.packHeader();p.push(x),a.size+=x.length,m+=ue+x.length}m+=a.mainHeaderSize,a.offset=y,y=0;let P=Buffer.alloc(m);for(let B of I)B.copy(P,y),y+=B.length;for(let B of p)B.copy(P,y),y+=B.length;let M=a.toBinary();return o&&o.copy(M,cr.Constants.ENDHDR),M.copy(P,y),P},toAsyncBuffer:function(I,p,m,y){try{T||N(),g();let P=[],M=[],B=0,F=0;a.size=0,a.offset=0;let $=_(function(j){if(j.length){let se=j.pop(),ue=se.entryName+se.extra.toString();m&&m(ue),se.getCompressedDataAsync(function(x){y&&y(ue),se.header.offset=F;let ne=se.header.dataHeaderToBinary(),U=Buffer.alloc(ue.length,ue),G=ne.length+U.length+x.length;F+=G,P.push(ne),P.push(U),P.push(x);let Z=se.packHeader();M.push(Z),a.size+=Z.length,B+=G+Z.length,$(j)})}else{B+=a.mainHeaderSize,a.offset=F,F=0;let se=Buffer.alloc(B);P.forEach(function(x){x.copy(se,F),F+=x.length}),M.forEach(function(x){x.copy(se,F),F+=x.length});let ue=a.toBinary();o&&o.copy(ue,cr.Constants.ENDHDR),ue.copy(se,F),I(se)}},"compress2Buffer");$(t)}catch(P){p(P)}}}}});var kI=Y((uG,vI)=>{var Ft=Bi(),On=require("path"),qV=Bh(),GV=FI(),Ks=_((s,e)=>typeof s=="boolean"?s:e,"get_Bool"),Uh=_((s,e)=>typeof s=="string"?s:e,"get_Str"),HV={noSort:!1,readEntries:!1,method:Ft.Constants.NONE,fs:null};vI.exports=function(s,e){let t=null,n=Object.assign(Object.create(null),HV);s&&typeof s=="object"&&(s instanceof Uint8Array||(Object.assign(n,s),s=n.input?n.input:void 0,n.input&&delete n.input),Buffer.isBuffer(s)&&(t=s,n.method=Ft.Constants.BUFFER,s=void 0)),Object.assign(n,e);let o=new Ft(n);if(s&&typeof s=="string")if(o.fs.existsSync(s))n.method=Ft.Constants.FILE,n.filename=s,t=o.fs.readFileSync(s);else throw new Error(Ft.Errors.INVALID_FILENAME);let a=new GV(t,n),{canonical:T,sanitize:u}=Ft;function h(N){if(N&&a){var R;if(typeof N=="string"&&(R=a.getEntry(N)),typeof N=="object"&&typeof N.entryName<"u"&&typeof N.header<"u"&&(R=a.getEntry(N.entryName)),R)return R}return null}_(h,"getEntry");function A(N){let{join:R,normalize:g,sep:I}=On.posix;return R(".",g(I+N.split("\\").join(I)+I))}return _(A,"fixPath"),{readFile:function(N,R){var g=h(N);return g&&g.getData(R)||null},readFileAsync:function(N,R){var g=h(N);g?g.getDataAsync(R):R(null,"getEntry failed for:"+N)},readAsText:function(N,R){var g=h(N);if(g){var I=g.getData();if(I&&I.length)return I.toString(R||"utf8")}return""},readAsTextAsync:function(N,R,g){var I=h(N);I?I.getDataAsync(function(p,m){if(m){R(p,m);return}p&&p.length?R(p.toString(g||"utf8")):R("")}):R("")},deleteFile:function(N){var R=h(N);R&&a.deleteEntry(R.entryName)},addZipComment:function(N){a.comment=N},getZipComment:function(){return a.comment||""},addZipEntryComment:function(N,R){var g=h(N);g&&(g.comment=R)},getZipEntryComment:function(N){var R=h(N);return R&&R.comment||""},updateFile:function(N,R){var g=h(N);g&&g.setData(R)},addLocalFile:function(N,R,g,I){if(o.fs.existsSync(N)){R=R?A(R):"";var p=N.split("\\").join("/").split("/").pop();R+=g||p;let m=o.fs.statSync(N);this.addFile(R,o.fs.readFileSync(N),I,m)}else throw new Error(Ft.Errors.FILE_NOT_FOUND.replace("%s",N))},addLocalFolder:function(N,R,g){if(g instanceof RegExp?g=function(I){return function(p){return I.test(p)}}(g):typeof g!="function"&&(g=_(function(){return!0},"filter")),R=R?A(R):"",N=On.normalize(N),o.fs.existsSync(N)){let I=o.findFiles(N),p=this;I.length&&I.forEach(function(m){var y=On.relative(N,m).split("\\").join("/");if(g(y)){var P=o.fs.statSync(m);P.isFile()?p.addFile(R+y,o.fs.readFileSync(m),"",P):p.addFile(R+y+"/",Buffer.alloc(0),"",P)}})}else throw new Error(Ft.Errors.FILE_NOT_FOUND.replace("%s",N))},addLocalFolderAsync:function(N,R,g,I){I instanceof RegExp?I=function(m){return function(y){return m.test(y)}}(I):typeof I!="function"&&(I=_(function(){return!0},"filter")),g=g?A(g):"",N=On.normalize(N);var p=this;o.fs.open(N,"r",function(m){if(m&&m.code==="ENOENT")R(void 0,Ft.Errors.FILE_NOT_FOUND.replace("%s",N));else if(m)R(void 0,m);else{var y=o.findFiles(N),P=-1,M=_(function(){if(P+=1,P<y.length){var B=y[P],F=On.relative(N,B).split("\\").join("/");F=F.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),I(F)?o.fs.stat(B,function($,j){$&&R(void 0,$),j.isFile()?o.fs.readFile(B,function(se,ue){se?R(void 0,se):(p.addFile(g+F,ue,"",j),M())}):(p.addFile(g+F+"/",Buffer.alloc(0),"",j),M())}):M()}else R(!0,void 0)},"next");M()}})},addLocalFolderPromise:function(N,R){return new Promise((g,I)=>{let{filter:p,zipPath:m}=Object.assign({},R);this.addLocalFolderAsync(N,(y,P)=>{P&&I(P),y&&g(this)},m,p)})},addFile:function(N,R,g,I){let p=h(N),m=p!=null;m||(p=new qV,p.entryName=N),p.comment=g||"";let y=typeof I=="object"&&I instanceof o.fs.Stats;y&&(p.header.time=I.mtime);var P=p.isDirectory?16:0;if(!Ft.isWin){let M=p.isDirectory?16384:32768;y?M|=4095&I.mode:typeof I=="number"?M|=4095&I:M|=p.isDirectory?493:420,P=(P|M<<16)>>>0}p.attr=P,p.setData(R),m||a.setEntry(p)},getEntries:function(){return a?a.entries:[]},getEntry:function(N){return h(N)},getEntryCount:function(){return a.getEntryCount()},forEach:function(N){return a.forEach(N)},extractEntryTo:function(N,R,g,I,p,m){I=Ks(I,!1),p=Ks(p,!1),g=Ks(g,!0),m=Uh(m,Uh(p,void 0));var y=h(N);if(!y)throw new Error(Ft.Errors.NO_ENTRY);var P=T(y.entryName),M=u(R,m&&!y.isDirectory?m:g?P:On.basename(P));if(y.isDirectory){var B=a.getEntryChildren(y);return B.forEach(function(j){if(j.isDirectory)return;var se=j.getData();if(!se)throw new Error(Ft.Errors.CANT_EXTRACT_FILE);var ue=T(j.entryName),x=u(R,g?ue:On.basename(ue));let ne=p?j.header.fileAttr:void 0;o.writeFileTo(x,se,I,ne)}),!0}var F=y.getData();if(!F)throw new Error(Ft.Errors.CANT_EXTRACT_FILE);if(o.fs.existsSync(M)&&!I)throw new Error(Ft.Errors.CANT_OVERRIDE);let $=p?N.header.fileAttr:void 0;return o.writeFileTo(M,F,I,$),!0},test:function(N){if(!a)return!1;for(var R in a.entries)try{if(R.isDirectory)continue;var g=a.entries[R].getData(N);if(!g)return!1}catch{return!1}return!0},extractAllTo:function(N,R,g,I){if(R=Ks(R,!1),I=Uh(g,I),g=Ks(g,!1),!a)throw new Error(Ft.Errors.NO_ZIP);a.entries.forEach(function(p){var m=u(N,T(p.entryName.toString()));if(p.isDirectory){o.makeDir(m);return}var y=p.getData(I);if(!y)throw new Error(Ft.Errors.CANT_EXTRACT_FILE);let P=g?p.header.fileAttr:void 0;o.writeFileTo(m,y,R,P);try{o.fs.utimesSync(m,p.header.time,p.header.time)}catch{throw new Error(Ft.Errors.CANT_EXTRACT_FILE)}})},extractAllToAsync:function(N,R,g,I){if(I||(I=_(function(){},"callback")),R=Ks(R,!1),typeof g=="function"&&!I&&(I=g),g=Ks(g,!1),!a){I(new Error(Ft.Errors.NO_ZIP));return}N=On.resolve(N);let p=_(B=>u(N,On.normalize(T(B.entryName.toString()))),"getPath"),m=_((B,F)=>new Error(B+': "'+F+'"'),"getError"),y=[],P=new Set;a.entries.forEach(B=>{B.isDirectory?y.push(B):P.add(B)});for(let B of y){let F=p(B),$=g?B.header.fileAttr:void 0;try{o.makeDir(F),$&&o.fs.chmodSync(F,$),o.fs.utimesSync(F,B.header.time,B.header.time)}catch{I(m("Unable to create folder",F))}}let M=_(()=>{P.size===0&&I()},"done");for(let B of P.values()){let F=On.normalize(T(B.entryName.toString())),$=u(N,F);B.getDataAsync(function(j,se){if(se){I(new Error(se));return}if(!j)I(new Error(Ft.Errors.CANT_EXTRACT_FILE));else{let ue=g?B.header.fileAttr:void 0;o.writeFileToAsync($,j,R,ue,function(x){if(!x){I(m("Unable to write file",$));return}o.fs.utimes($,B.header.time,B.header.time,function(ne){if(ne){I(m("Unable to set times",$));return}P.delete(B),M()})})}})}M()},writeZip:function(N,R){if(arguments.length===1&&typeof N=="function"&&(R=N,N=""),!N&&n.filename&&(N=n.filename),!!N){var g=a.compressToBuffer();if(g){var I=o.writeFileTo(N,g,!0);typeof R=="function"&&R(I?null:new Error("failed"),"")}}},writeZipPromise:function(N,R){let{overwrite:g,perm:I}=Object.assign({overwrite:!0},R);return new Promise((p,m)=>{!N&&n.filename&&(N=n.filename),N||m("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(y=>{let P=_(M=>M?p(M):m("ADM-ZIP: Wasn't able to write zip file"),"ret");o.writeFileToAsync(N,y,g,I,P)},m)})},toBufferPromise:function(){return new Promise((N,R)=>{a.toAsyncBuffer(N,R)})},toBuffer:function(N,R,g,I){return this.valueOf=2,typeof N=="function"?(a.toAsyncBuffer(N,R,g,I),null):a.compressToBuffer()}}}});var HI=Y((hG,GI)=>{"use strict";var KV=require("crypto"),Yi=require("fs"),qI=require("path"),WV=kI(),$V=_((s,e)=>new Promise((t,n)=>{try{let o=new WV(s);if(!o)return n(new Error("Link to zip file is broken or system has no permissions to "+s+" folder"));let a=o.getEntries();return Object.keys(a).length===0?n(new Error("Zip file is empty")):(o.extractAllTo(e,!0),t(e))}catch(o){n(o)}}),"extractZip"),zV=_((s,e)=>{if(!Yi.existsSync(s))return;let t=/DIRECTORY\=\".+?\"/i,n=Yi.readFileSync(s).toString();t.test(n)&&(n=n.replace(t,`DIRECTORY="${e}"`),Yi.writeFileSync(s,n))},"replaceSqlNetOraDirectoryPath"),XV=_(s=>new Promise((e,t)=>{let n=_(T=>KV.createHash("md5").update(T,"utf-8").digest("hex"),"getHash"),o=Yi.createReadStream(s),a="";o.on("data",T=>{a+=T}),o.on("error",T=>{t(T)}),o.on("end",function(){e(n(a))})}),"getHashByFile"),QV=_(async({walletFile:s,tempFolder:e,name:t})=>{if(!Yi.existsSync(s))return;let n=await XV(s),o=qI.join(e,t+"_"+n);if(Yi.existsSync(o))return o;await $V(s,o);let a=qI.join(o,"sqlnet.ora");return zV(a,o),o},"extractWallet");GI.exports=QV});var KI=Y(Yh=>{"use strict";Object.defineProperty(Yh,"__esModule",{value:!0});var JV=function(){function s(e,t){t===void 0&&(t=0),this.source=e,this.position=t}return _(s,"LexerState"),s.prototype.copy=function(){return new s(this.source,this.position)},s}();Yh.default=JV});var zI=Y(Ws=>{"use strict";var jV=Ws&&Ws.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){s(e,t);function n(){this.constructor=e}_(n,"__"),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ws,"__esModule",{value:!0});var WI=function(){function s(e,t,n,o,a,T){this.type=e,this.match=t,this.groups=n,this.start=o,this.end=a,this.lexer=T}return _(s,"Token"),s.prototype.strpos=function(){var e=this.lexer.strpos(this.start),t=this.lexer.strpos(this.end);return{start:e,end:t}},s.prototype.isEof=function(){return!1},s}();Ws.default=WI;var $I=function(s){jV(e,s);function e(t){var n=this,o=t.source.length;return n=s.call(this,null,"(eof)",[],o,o,t)||this,n}return _(e,"EOFToken"),e.prototype.isEof=function(){return!0},e}(WI);Ws.EOFToken=$I;Ws.EOF=function(s){return new $I(s)}});var XI=Y(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});function ZV(s){return new RegExp(s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))}_(ZV,"toRegExp");function eb(s){return typeof s=="string"&&(s=ZV(s)),s.source.startsWith("^")?s:new RegExp("^"+s.source,s.flags)}_(eb,"normalize");function tb(s,e){for(var t=0,n=0,o=s;n<o.length;n++){var a=o[n],T=e(a,t++);if(T)return{item:a,result:T}}}_(tb,"first");var rb=function(){function s(){this.tokenTypes=[]}return _(s,"TokenTypes"),s.prototype.disable=function(e){return this.enable(e,!1)},s.prototype.enable=function(e,t){return t===void 0&&(t=!0),this.tokenTypes.filter(function(n){return n.type==e}).forEach(function(n){return n.enabled=t}),this},s.prototype.isEnabled=function(e){var t=this.tokenTypes.filter(function(n){return n.type==e});if(t.length==0)throw new Error("Token of type "+e+" does not exists");return t[0].enabled},s.prototype.peek=function(e,t){var n=e.substr(t);return tb(this.tokenTypes.filter(function(o){return o.enabled}),function(o){return o.regex.lastIndex=0,o.regex.exec(n)})},s.prototype.token=function(e,t,n){return n===void 0&&(n=!1),this.tokenTypes.push({type:e,regex:eb(t),enabled:!0,skip:n}),this},s}();Mh.default=rb});var JI=Y($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});var xh=KI();$s.LexerState=xh.default;var w_=zI();$s.Token=w_.default;$s.EOF=w_.EOF;var QI=XI();$s.TokenTypes=QI.default;var nb=function(){function s(e){e===void 0&&(e=""),this._state=new xh.default(e),this._tokenTypes=new QI.default}return _(s,"Lexer"),Object.defineProperty(s.prototype,"position",{get:function(){return this._state.position},set:function(e){this._state.position=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"source",{get:function(){return this._state.source},set:function(e){this._state=new xh.default(e)},enumerable:!0,configurable:!0}),s.prototype.attachTo=function(e){this._state=e._state},s.prototype.disable=function(e){return this._tokenTypes.disable(e),this},s.prototype.enable=function(e,t){return this._tokenTypes.enable(e,t),this},s.prototype.expect=function(e){var t=this.next();if(t.type!=e){var n=t.strpos();throw new Error("Expected "+e+(t?", got "+t.type:"")+" at "+n.start.line+":"+n.start.column)}return t},s.prototype.isEnabled=function(e){return this._tokenTypes.isEnabled(e)},s.prototype.next=function(){try{var e=this.peek();return this._state.position=e.end,e}catch(t){throw this._state.position=t.end,t}},s.prototype.peek=function(e){var t=this;e===void 0&&(e=this._state.position);var n=_(function(N){if(N===void 0&&(N=e),N>=t._state.source.length)return w_.EOF(t);var R=t._tokenTypes.peek(t._state.source,N);return R?R.item.skip?n(N+R.result[0].length):new w_.default(R.item.type,R.result[0],R.result.map(function(g){return g}),N,N+R.result[0].length,t):null},"read"),o=n();if(o)return o;var a=this._state.source.substring(e,e+1);try{this.peek(e+1)}catch(N){a+=N.unexpected}var T=this.strpos(e),u=T.line,h=T.column,A=new Error("Unexpected input: "+a+" at ("+u+":"+h+")");throw A.unexpected=a,A.end=e+a.length,A},s.prototype.strpos=function(e){var t=this._state.source.substring(0,e).split(/\r?\n/);Array.isArray(t)||(t=[t]);var n=t.length,o=t[t.length-1].length+1;return{line:n,column:o}},s.prototype.toArray=function(){var e=this._state.copy();this._state.position=0;for(var t=[],n;!(n=this.next()).isEof();)t.push(n);return this._state=e,t},s.prototype.token=function(e,t,n){return this._tokenTypes.token(e,t,n),this},s.prototype.keyword=function(e){return this.token(e,new RegExp(e+"(?=\\W|$)"))},s.prototype.operator=function(e){var t=new String(e).valueOf();return this.token(e,t)},s}();$s.default=nb});var ZI=Y((IG,jI)=>{jI.exports=JI()});var rD=Y((DG,tD)=>{"use strict";var sb=ZI().default;function eD(s,e={}){s.expect("(");let t=s.expect("WORD").match;s.expect("=");let n;if(s.peek().type==="("){n={};do Object.assign(n,eD(s,e));while(s.peek().type==="(")}else n=s.expect("WORD").match;return s.expect(")"),{...e,[t]:n}}_(eD,"parseObject");var ib=_(s=>{let e=s.expect("WORD").match;return s.expect("="),{name:e,data:eD(s)}},"parseConnection"),ob=_(s=>{let e=new sb(s).token("$SKIP_COMMENT",/#[^\n]*/,!0).token("$SKIP_WS",/\s+/,!0).token("WORD",/([a-z0-9._-]+|["'][\s\S]*?["'])/i).token("(",/\(/).token(")",/\)/).token("=",/=/),t={};for(;e.peek().type!==null;){let n=ib(e);t[n.name]=n}return t},"parseTns");tD.exports=ob});var B_=Y((CG,nD)=>{"use strict";var Fh=class Fh{cache;cacheValue;cycle;ifNotExist;increment;maxValue;minValue;sequenceName;start;sharing;order;keep;scale;scaleExtend;shard;shardExtend;type};_(Fh,"Sequence");var Vh=Fh,vh=class vh{sharing;ddlScript;sequenceName;minValue;maxValue;increment;cycle;order;cacheValue;scale;extend;shard;type;keep};_(vh,"SequenceDto");var bh=vh;nD.exports={Sequence:Vh,SequenceDto:bh}});var oD=Y((wG,iD)=>{"use strict";var{Sequence:yG,SequenceDto:LG}=B_(),ab=/(?<=START WITH)(\s+)([\w]+)(?=\s+)?/,_b=/\s+LINK$/,lr={true:"Y",false:"N"},ot={cache:"cache",cycle:"cycle",extend:"extend",global:"global",keep:"keep",noCache:"nocache",noCycle:"nocycle",noExtend:"noextend",noKeep:"nokeep",noOrder:"noorder",noScale:"noscale",noShard:"noshard",order:"order",scale:"scale",scaleExtend:"scaleExtend",session:"session",shard:"shard",sharing:"sharing",type:"type"},sD={[ot.cycle]:{[lr.true]:ot.cycle,[lr.false]:ot.noCycle},[ot.order]:{[lr.true]:ot.order,[lr.false]:ot.noOrder},[ot.shard]:{[lr.true]:ot.shard,[lr.false]:""},[ot.scale]:{[lr.true]:ot.scale,[lr.false]:ot.noScale},[ot.type]:{[lr.true]:ot.session,[lr.false]:ot.global},[ot.keep]:{[lr.true]:ot.keep,[lr.false]:ot.noKeep},[ot.extend]:{[lr.true]:ot.extend,[lr.false]:ot.noExtend}},cb=_(async({schema:s,execute:e,logger:t})=>{try{let n=await e(`
      SELECT JSON_OBJECT(
          'sharing'      VALUE SHARING,
          'sequenceName' VALUE SEQUENCE_NAME,
          'minValue'     VALUE MIN_VALUE,
          'maxValue'     VALUE MAX_VALUE,
          'increment'    VALUE INCREMENT_BY,
          'cycle'        VALUE CYCLE_FLAG,
          'order'        VALUE ORDER_FLAG,
          'cacheValue'   VALUE CACHE_SIZE,
          'scale'        VALUE SCALE_FLAG,
          'extend'       VALUE EXTEND_FLAG,
          'shard'        VALUE SHARDED_FLAG,
          'type'         VALUE SESSION_FLAG,
          'keep'         VALUE KEEP_VALUE
      )
      FROM ALL_OBJECTS
      LEFT JOIN ALL_SEQUENCES
                ON ALL_SEQUENCES.SEQUENCE_OWNER = ALL_OBJECTS.OWNER
                AND ALL_SEQUENCES.SEQUENCE_NAME = ALL_OBJECTS.OBJECT_NAME
      WHERE OBJECT_TYPE = 'SEQUENCE'
      AND OWNER = '${s}'
      `);if(!(n!=null&&n.length))return[];let o=await lb({schema:s,execute:e,logger:t});return n.map(([a])=>{let T=JSON.parse(a),u=o[T.sequenceName]||"";return{...T,ddlScript:u}})}catch(n){let{message:o,stack:a,...T}=n;return t.log("error",{message:"Cannot get sequences",error:{message:o,stack:a,err:T}},"Getting sequences"),[]}},"getSchemaSequenceDtos"),lb=_(async({schema:s,execute:e,logger:t})=>{try{let n=await e(`
      SELECT JSON_OBJECT(
          'sequenceName' VALUE OBJECT_NAME,
          'ddlScript'    VALUE DBMS_METADATA.GET_DDL(OBJECT_TYPE, OBJECT_NAME, OWNER)
      )
      FROM ALL_OBJECTS
      WHERE OBJECT_TYPE = 'SEQUENCE'
      AND OWNER = '${s}'
      `);return n!=null&&n.length?n.reduce((o,[a])=>{let{sequenceName:T,ddlScript:u}=JSON.parse(a);return{...o,[T]:u}},{}):{}}catch(n){let{message:o,stack:a,...T}=n;return t.log("error",{message:"Cannot get sequences DDL",error:{message:o,stack:a,err:T}},"Getting sequences"),{}}},"getSchemaSequenceDdl"),Tb=_(({execute:s})=>async({schema:e,logger:t})=>(await cb({schema:e,execute:s,logger:t})).map(o=>{let a=ub({sequenceDto:o}),T=hb({sequenceDto:o}),u=Sb({sequenceDto:o}),h=Eb({sequenceDto:o}),A=o.cacheValue?ot.cache:ot.noCache;return{sequenceName:o.sequenceName,minValue:o.minValue,maxValue:o.maxValue,increment:o.increment,cacheValue:o.cacheValue,cache:A,sharing:a,...T,...u,...h}}),"getSchemaSequences"),ub=_(({sequenceDto:s})=>{var e,t;return(t=(e=s.sharing)==null?void 0:e.replace(_b,""))==null?void 0:t.toLowerCase()},"getSequenceSharing"),Eb=_(({sequenceDto:s})=>{let e=s[ot.scale],t=s[ot.shard],n=s[ot.extend],o=sD[ot.extend][n],a=e===lr.true?o:"",T=t===lr.true?o:"";return{scaleExtend:a,shardExtend:T}},"getExtendOptions"),hb=_(({sequenceDto:s})=>Object.entries(sD).reduce((e,[t,n])=>({...e,[t]:n[s[t]]}),{}),"getBooleanOptions"),Sb=_(({sequenceDto:s})=>({start:Nb({sequenceDto:s})}),"getOptionsFromDdl"),Nb=_(({sequenceDto:s})=>{var n;let e=s.ddlScript;if(!e.includes("START WITH"))return s.minValue<s.maxValue?s.minValue:s.maxValue;let t=(n=e.match(ab))==null?void 0:n[2];return isNaN(Number(t))?t:Number(t)},"getStartOptionFromDdl");iD.exports={getSchemaSequences:Tb}});var Kh=Y((UG,uD)=>{"use strict";var Oo=lI(),fb=HI(),kh=require("path"),Y_=require("fs"),Ab=rD(),{getSchemaSequences:db}=oD(),je=Ct(),_D={message:"Connection error"},jn,qh,pb=_((s="")=>{let e=s.match(/http:\/\/(?:.*?:.*?@)?(.*?):(\d+)/i);return e?{httpsProxy:e[1],httpsProxyPort:e[2]}:{}},"parseProxyOptions"),cD=_(s=>[s,process.env.TNS_ADMIN,kh.join(process.env.ORACLE_HOME||"","network","admin"),kh.join(process.env.LD_LIBRARY_PATH||"","network","admin")].reduce((e,t)=>{if(e)return e;let n=kh.join(t,"tnsnames.ora");return Y_.existsSync(n)?n:e},""),"getTnsNamesOraFile"),lD=_(s=>{let e=Y_.readFileSync(s).toString();return Ab(e)},"parseTnsNamesOra"),mb=_((s,e,t,n)=>{var A,N,R,g,I,p,m,y,P,M,B;let o=cD(s);if(!Y_.existsSync(o))return e;n({message:"Found tnsnames.ora file: "+o});let a=lD(o);if(n({message:"tnsnames.ora successfully parsed"}),!a[e])return n({message:'Cannot find "'+e+'" in tnsnames.ora'}),e;let T=(R=(N=(A=a[e])==null?void 0:A.data)==null?void 0:N.description)==null?void 0:R.address,u=(m=(p=(I=(g=a[e])==null?void 0:g.data)==null?void 0:I.description)==null?void 0:p.connect_data)==null?void 0:m.service_name,h=(B=(M=(P=(y=a[e])==null?void 0:y.data)==null?void 0:P.description)==null?void 0:M.connect_data)==null?void 0:B.sid;return n({message:"tnsnames.ora",address:T,service:u}),Gh(je.omitBy({...T,...t,protocol:(T==null?void 0:T.protocol)||"tcps",service:u||e,sid:h},je.isUndefined),n)},"getConnectionStringByTnsNames"),U_=_((s,e)=>s?e:"","combine"),Gh=_(({protocol:s,host:e,port:t,sid:n,service:o,httpsProxy:a,httpsProxyPort:T},u)=>{let h=`(DESCRIPTION=
		(ADDRESS=
			(PROTOCOL=${s||"tcp"})
			(HOST=${e})
			(PORT=${t}))
			${U_(a,`(HTTPS_PROXY=${a})`)}
			${U_(T,`(HTTPS_PROXY_PORT=${T})`)}
		(CONNECT_DATA=
					${U_(n,`(SID=${n})`)}
					${U_(o,`(SERVICE_NAME=${o})`)}
		)
	)`;return u({message:"connectionString",connectionString:h}),h},"getConnectionDescription"),Pb=_(async(s,e,t)=>{var a,T,u,h,A,N,R,g,I,p,m;let n={protocol:"",host:"",port:"",service:""};if(["Wallet","TNS"].includes(s.connectionMethod)){let y=cD(s.configDir);if(!Y_.existsSync(y))throw new Error("Cannot find tnsnames.ora file. Please, specify tnsnames folder or use Base connection method.");t({message:"Found tnsnames.ora file: "+y});let P=lD(y);if(!P[s.serviceName])throw new Error('Cannot find "'+s.serviceName+'" in tnsnames.ora');let M=(u=(T=(a=P[s.serviceName])==null?void 0:a.data)==null?void 0:T.description)==null?void 0:u.address,B=(R=(N=(A=(h=P[s.serviceName])==null?void 0:h.data)==null?void 0:A.description)==null?void 0:N.connect_data)==null?void 0:R.service_name,F=(m=(p=(I=(g=P[s.serviceName])==null?void 0:g.data)==null?void 0:I.description)==null?void 0:p.connect_data)==null?void 0:m.sid;t({message:"tnsnames.ora",address:M,service:B}),n.protocol=M==null?void 0:M.protocol,n.host=M==null?void 0:M.host,n.port=M==null?void 0:M.port,n.service=B||s.serviceName,n.sid=F}else n.host=s.host,n.port=s.port,n.service=s.serviceName,n.sid=s.sid;let{options:o}=await e.openTunnel({sshAuthMethod:s.sshConfig.ssh_method==="privateKey"?"IDENTITY_FILE":"USER_PASSWORD",sshTunnelHostname:s.sshConfig.ssh_host,sshTunnelPort:s.sshConfig.ssh_port,sshTunnelUsername:s.sshConfig.ssh_user,sshTunnelPassword:s.sshConfig.ssh_password,sshTunnelIdentityFile:s.sshConfig.ssh_key_file,sshTunnelPassphrase:s.sshConfig.ssh_key_passphrase,host:n.host,port:n.port});return Gh({...n,host:o.host,port:o.port.toString()},t)},"getSshConnectionString"),Rb=_(async({walletFile:s,tempFolder:e,name:t,connectionMethod:n,TNSpath:o,host:a,port:T,userName:u,userPassword:h,serviceName:A,clientPath:N,clientType:R,queryRequestTimeout:g,authMethod:I,options:p,sid:m,ssh:y,ssh_user:P,ssh_host:M,ssh_port:B,ssh_method:F,ssh_key_file:$,ssh_key_passphrase:j,ssh_password:se,authRole:ue,mode:x},ne,U)=>{if(jn)return jn;let G={thin:"thin",thick:"thick"},Z,pe,Se={},te="";n==="Wallet"&&(Z=await fb({walletFile:s,tempFolder:e,name:t})),n==="TNS"&&(Z=o),R==="InstantClient"&&(pe=N),p!=null&&p.proxy&&(te=pb(p==null?void 0:p.proxy)),x!==G.thin&&Oo.initOracleClient({libDir:pe,configDir:Z});let we="";return["Wallet","TNS"].includes(n)?te?we=mb(Z,A,te,U):we=A:we=Gh({host:a,port:T,sid:m,service:A},U),y&&(qh=!0,we=await Pb({host:a,port:T,configDir:Z,serviceName:A,sid:m,connectionMethod:n,sshConfig:{ssh_user:P,ssh_host:M,ssh_port:B,ssh_method:F,ssh_key_file:$,ssh_password:se,ssh_key_passphrase:j}},ne,U)),I==="OS"?Se.externalAuth=!0:I==="Kerberos"?(Se.username=u,Se.password=h,Se.externalAuth=!0):(Se.username=u,Se.password=h),Db({connectString:we,username:u,password:h,queryRequestTimeout:g,authRole:ue})},"connect"),Ib=_(async s=>jn?(qh&&(qh=!1,await s.closeConsumer()),new Promise((e,t)=>{jn.close(n=>{if(jn=null,n)return t(n);e()})})):Promise.reject(_D),"disconnect"),Db=_(({connectString:s,username:e,password:t,queryRequestTimeout:n,authRole:o})=>new Promise((a,T)=>{Oo.getConnection({username:e,password:t,connectString:s,privilege:o==="default"?void 0:Oo[o]},(u,h)=>{if(u)return jn=null,T(u);try{h.callTimeout=Number(n||0),jn=h,a()}catch(A){T(A)}})}),"authByCredentials"),gb=_(async({includeSystemCollection:s,schemaName:e},t)=>{let n="SELECT USERNAME FROM ALL_USERS",o,a="";return e&&(a=`USERNAME = '${e}'`),s?o=`${n}${a?` WHERE ${a}`:""}`:o=`${n} WHERE ORACLE_MAINTAINED = 'N'${a?` AND ${a}`:""}`,await Tr(o).catch(T=>(t.info({message:"Cannot retrieve schema names"}),t.error(T),[]))},"getSchemaNames"),Cb=_(s=>je.reduce(s,(e,t)=>({...e,[t[0]]:[...e[t[0]]||[],t[1]]}),{}),"pairToObj"),M_=_((s,e,t)=>{let n="";return t&&(n=`T.OWNER = '${t}'`),Tr(e?`${s}${n?` WHERE ${n}`:""}`:`${s} INNER JOIN ALL_USERS U ON T.OWNER = U.USERNAME WHERE U.ORACLE_MAINTAINED = 'N'${n?` AND ${n}`:""}`)},"selectEntities"),Ob=_(({includeSystemCollection:s,schemaName:e})=>M_("SELECT T.OWNER, T.TABLE_NAME FROM ALL_TABLES T",s,e),"tableNamesByUser"),yb=_(({includeSystemCollection:s,schemaName:e})=>M_("SELECT T.OWNER, T.TABLE_NAME FROM ALL_EXTERNAL_TABLES T",s,e),"externalTableNamesByUser"),Lb=_(({includeSystemCollection:s,schemaName:e})=>M_("SELECT T.OWNER, T.VIEW_NAME || ' (v)' FROM ALL_VIEWS T",s,e),"viewNamesByUser"),wb=_(({includeSystemCollection:s,schemaName:e})=>M_("SELECT T.OWNER, T.MVIEW_NAME || ' (v)' FROM ALL_MVIEWS T",s,e),"materializedViewNamesByUser"),Bb=_(async(s,e)=>{let t=await wb(s).catch(h=>(e.info({message:"Cannot retrieve materialized views"}),e.error(h),[]));e.info({materializedViews:t});let n=t.map(h=>je.join(h,".").slice(0,-4)),o=await Ob(s).then(h=>je.reject(h,A=>n.includes(je.join(A,".")))).catch(h=>(e.info({message:"Cannot retrieve tables"}),e.error(h),[]));e.info({tables:o});let a=await yb(s).catch(h=>(e.info({message:"Cannot retrieve external tables"}),e.error(h),[]));e.info({externalTables:a});let T=await Lb(s).catch(h=>(e.info({message:"Cannot retrieve views"}),e.error(h),[]));e.info({views:T});let u=Cb([...o,...a,...T,...t]);return Object.keys(u).reduce((h,A)=>[...h,{dbName:A,dbCollections:u[A],isEmpty:!u[A].length}],[])},"getEntitiesNames"),Tr=_((s,e={},t=[])=>jn?new Promise((n,o)=>{jn.execute(s,t,e,(a,T)=>{if(a)return o(a);n(T.rows)})}):Promise.reject(_D),"execute"),Ub=_(async s=>{var n,o;let e=["12c","18c","19c","21c","23ai"],t="21c";try{let a=await Tr("SELECT VERSION FROM PRODUCT_COMPONENT_VERSION WHERE product LIKE 'Oracle Database%'");s.log("info",a,"DB Version");let T=(o=(n=a==null?void 0:a[0])==null?void 0:n[0])==null?void 0:o.split(".").shift();return T&&e.find(h=>h.startsWith(T))||t}catch(a){return s.log("error",{message:a.message,stack:a.stack},"Error of getting DB Version"),t}},"getDbVersion"),Yb=_(s=>s.slice(-4)===" (v)","isView"),Mb=_(s=>{let e=je.partition(s,Yb);return{views:e[0].map(t=>t.slice(0,-4)),tables:e[1]}},"splitEntityNames"),Hh=_(()=>Tr(`BEGIN
		DBMS_METADATA.SET_TRANSFORM_PARAM(DBMS_METADATA.SESSION_TRANSFORM,'SQLTERMINATOR', TRUE);
	END;`),"setSQLTerminator"),xb=_(async(s,e,t)=>{var n;try{await Hh();let o=await Tr(`
			SELECT JSON_OBJECT(
			'tableDDL' VALUE DBMS_METADATA.GET_DDL('TABLE', T.TABLE_NAME, T.OWNER),
			'countOfRecords' VALUE (SELECT COUNT(*) FROM ALL_TABLES WHERE TABLE_NAME='${s}'),
			'indexDDLs' VALUE (
				SELECT JSON_ARRAYAGG(DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME, OWNER) RETURNING CLOB)
				FROM ALL_INDEXES
				WHERE TABLE_OWNER=T.OWNER
					AND TABLE_NAME=T.TABLE_NAME
					AND INDEX_NAME NOT IN (
						SELECT CONSTRAINT_NAME
						FROM ALL_CONSTRAINTS
						WHERE CONSTRAINT_TYPE='P'
						AND OWNER=T.OWNER
						AND TABLE_NAME=T.TABLE_NAME
					)
				),
			'jsonColumns' VALUE (
				SELECT JSON_ARRAYAGG(JSON_OBJECT('name' VALUE COLUMN_NAME, 'datatype' VALUE DATA_TYPE) RETURNING CLOB)
				FROM ALL_TAB_COLUMNS
				WHERE TABLE_NAME=T.TABLE_NAME
				AND OWNER=T.OWNER
				AND DATA_TYPE IN ('CLOB', 'BLOB', 'NVARCHAR2', 'JSON')
			),
			'tableComment' VALUE (
				SELECT COMMENTS
				FROM ALL_TAB_COMMENTS
				WHERE OWNER = T.OWNER AND TABLE_NAME = T.TABLE_NAME AND COMMENTS IS NOT NULL
			),
			'columnComments' VALUE (
				SELECT JSON_ARRAYAGG(JSON_OBJECT('name' VALUE COLUMN_NAME, 'comment' VALUE COMMENTS) RETURNING CLOB)
				FROM ALL_COL_COMMENTS
				WHERE OWNER = T.OWNER AND TABLE_NAME = T.TABLE_NAME  AND COMMENTS IS NOT NULL
			) RETURNING CLOB
			)
			FROM ALL_TABLES T
			WHERE T.OWNER='${e}' AND T.TABLE_NAME='${s}'
		`),a=await((n=je.first(je.first(o)))==null?void 0:n.getData());try{let T=JSON.parse(a);t.log("info",T,`Getting DDL from "${e}"."${s}"`);let u=T.tableComment?`COMMENT ON TABLE ${gs(e)}.${gs(s)} IS ${aD(T.tableComment)};`:"",h=je.map(T.columnComments,N=>`COMMENT ON COLUMN ${gs(e)}.${gs(s)}.${gs(N.name)}  IS ${aD(N.comment)};`);return{ddl:`${T.tableDDL}
				${je.join(T.indexDDLs,`
`)}
				${u}

				${je.join(h,`
`)}`,jsonColumns:T.jsonColumns,countOfRecords:T.countOfRecords}}catch(T){return t.log("error",{message:`Cannot parse query result: 

`+a,error:{message:T.message,stack:T.stack,err:je.omit(T,["message","stack"])}},`Getting DDL from "${e}"."${s}"`),{ddl:"",jsonColumns:[],countOfRecords:0}}}catch(o){if((o==null?void 0:o.errorNum)===31603&&!await TD(t))throw o;return t.log("error",{message:"Cannot get DDL for table: "+s,error:{message:o.message,stack:o.stack,err:je.omit(o,["message","stack"])}},`Getting DDL from "${e}"."${s}"`),{ddl:"",jsonColumns:[],countOfRecords:0}}},"getDDL"),Vb=_(s=>Object.keys(s).reduce(async(e,t)=>{let n=await e,o=s[t];return o instanceof Oo.Lob&&(o=await o.getData()),o instanceof Buffer&&(o=o.toString()),n[t]=o,n},Promise.resolve({})),"readLobs"),bb=_(async s=>await s.reduce(async(e,t)=>{let n=await e,o=await Vb(t);return n.concat(o)},Promise.resolve([])),"readRecordsValues"),gs=_(s=>/[\s\da-z]/.test(s)?`"${s}"`:s,"escapeName"),aD=_(s=>`'${s.replaceAll("'","''")}'`,"escapeComment"),Fb=_((s,e)=>e.map(t=>s.reduce((n,o)=>(n[o]=t[o],n),{})),"replaceNames"),vb=_(async({tableName:s,limit:e,jsonColumns:t,schema:n})=>{let o=je.map(t,u=>u.name),a=await Tr(`SELECT ${o.map(u=>gs(u)).join(", ")} FROM ${gs(n)}.${gs(s)} FETCH NEXT ${e} ROWS ONLY`,{outFormat:Oo.OBJECT});return await bb(Fb(o,a))},"selectRecords"),kb=_((s,e)=>{let t={number:"number",boolean:"boolean",string:"string"};return s.reduce((n,o)=>{if(n)return n;let a=o[e];return Array.isArray(a)?"array":typeof a=="object"?a?"object":"null":t[typeof a]??n},"")},"getJsonType"),qb=_(s=>`json${s.charAt(0).toUpperCase()}${s.slice(1)}`,"getJsonTypeName"),Gb=_(async(s,e)=>{let t={CLOB:{type:"lobs",mode:"clob"},BLOB:{type:"lobs",mode:"blob"},NVARCHAR2:{type:"char",mode:"nvarchar2"},JSON:{type:"json"}};return{properties:s.reduce((o,a)=>{let T=a.name,u=a.datatype,h=t[u];if(!h)return o;let A=kb(e,T);if(!A)return o;let N=qb(A);return{...o,[T]:{...h,subtype:A,childType:"json",type:N}}},{})}},"getJsonSchema"),Hb=_(async(s,e,t)=>{try{let n=await Kb(s);if(await Hh(),n){t.log("info",{viewName:s,schema:e},'Is materialized view"');let T=await Tr(`SELECT JSON_OBJECT(
					'viewDDL' VALUE DBMS_METADATA.GET_DDL('MATERIALIZED_VIEW', MV.MVIEW_NAME, MV.OWNER),
					'indexDDLs' VALUE (
						SELECT JSON_ARRAYAGG(DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME, OWNER) RETURNING CLOB)
						FROM ALL_INDEXES
						WHERE TABLE_OWNER=MV.OWNER
							AND TABLE_NAME=MV.MVIEW_NAME
							AND INDEX_NAME NOT IN (
								SELECT CONSTRAINT_NAME
								FROM ALL_CONSTRAINTS
								WHERE CONSTRAINT_TYPE='P'
								AND OWNER=MV.OWNER
								AND TABLE_NAME=MV.MVIEW_NAME
							)
						)
					)
					FROM ALL_MVIEWS MV
					WHERE MV.OWNER='${e}' AND MV.MVIEW_NAME='${s}'`),u=je.first(je.first(T)),h=JSON.parse(u);return t.log("info",{viewName:s,schema:e},`Getting DDL from "${e}"."${s}"`),`${h.viewDDL}
${je.join(h.indexDDLs,`
`)}`}let o=await Tr(`SELECT DBMS_METADATA.GET_DDL('VIEW', VIEW_NAME, OWNER) FROM ALL_VIEWS WHERE VIEW_NAME='${s}'`);return await je.first(je.first(o)).getData()}catch(n){if((n==null?void 0:n.errorNum)===31603&&!await TD(t))throw n;return t.log("error",{message:"Cannot get DDL for view: "+s,error:{message:n.message,stack:n.stack,err:je.omit(n,["message","stack"])}},"Getting DDL"),""}},"getViewDDL"),Kb=_(async s=>{await Hh();let e=await Tr(`SELECT * FROM ALL_MVIEWS WHERE MVIEW_NAME = '${s}'`);return!je.isEmpty(e)},"checkEntityMaterializedView"),TD=_(async s=>{var e;try{let t=await Tr("SELECT sys_context('USERENV', 'CURRENT_USER') FROM dual"),n=je.first(je.first(t));return((e=await Tr(`SELECT GRANTED_ROLE FROM USER_ROLE_PRIVS WHERE USERNAME = '${n}'`))==null?void 0:e.map(([a])=>a)).includes("SELECT_CATALOG_ROLE")}catch(t){return s.log("error",{message:"Checking user privileges error",error:{message:t.message,stack:t.stack,err:je.omit(t,["message","stack"])}},"Getting DDL"),!1}},"checkUserHaveRequiredRole"),Wb=_(s=>{s.log("info",{TNS_ADMIN:process.env.TNS_ADMIN??"",ORACLE_HOME:process.env.ORACLE_HOME??"",LD_LIBRARY_PATH:process.env.LD_LIBRARY_PATH??"",ORACLE_BASE:process.env.ORACLE_BASE??""},"Environment variables")},"logEnvironment"),$b=_(async s=>{try{let e=await Tr("SELECT OWNER, SYNONYM_NAME, TABLE_OWNER, TABLE_NAME, DB_LINK FROM ALL_SYNONYMS WHERE ORIGIN_CON_ID > 1");if(je.isEmpty(e))return[];let t=e.map(([T,u,h,A])=>({synonymSchemaName:h,synonymPublic:T==="PUBLIC",synonymName:u,synonymEntityId:A}));s.log("info",t,"Getting synonyms");let n=await zb(),o=t.map(T=>{var A;let u=n.find(({name:N})=>N===T.synonymName),h=!((A=u==null?void 0:u.ddl)!=null&&A.toUpperCase().includes("NONEDITIONABLE"));return{...T,synonymEditionable:h?"EDITIONABLE":"NONEDITIONABLE"}});return je.groupBy(o,"synonymSchemaName")}catch(e){s.log("error",{message:"Cannot get synonyms",error:{message:e.message,stack:e.stack,err:je.omit(e,["message","stack"])}},"Getting synonyms")}},"getDbSynonyms"),zb=_(async()=>{let s=await Tr("SELECT SYNONYM_NAME, DBMS_METADATA.GET_DDL('SYNONYM', SYNONYM_NAME, OWNER) FROM ALL_SYNONYMS WHERE ORIGIN_CON_ID > 1");return await Promise.all(s.map(async([t,n])=>{let o=await n.getData();return{name:t,ddl:o}}))},"getSynonymsDDL");uD.exports={connect:Rb,disconnect:Ib,getEntitiesNames:Bb,getSchemaNames:gb,splitEntityNames:Mb,getDDL:xb,getJsonSchema:Gb,getViewDDL:Hb,getDbVersion:Ub,selectRecords:vb,logEnvironment:Wb,execute:Tr,getDbSynonyms:$b,getSchemaSequences:db({execute:Tr})}});var ND=Y((MG,SD)=>{"use strict";var x_=Ct(),ED=GA(),Fr=Kh();SD.exports={async connect(s,e,t,n){let o=n.require("@hackolade/ssh-service");ED("Connect to instance",s,e),Fr.logEnvironment(e);try{await Fr.connect(s,o,a=>{e.log("info",a,"Connection")}),t()}catch(a){throw hD(e,a,t),a}},async disconnect(s,e,t,n){try{let o=n.require("@hackolade/ssh-service");await Fr.disconnect(o),t(null)}catch(o){hD(e,o,t)}},async testConnection(s,e,t,n){try{await this.connect(s,e,()=>{},n),t(null)}catch(o){e.log("error",{message:o.message,stack:o.stack,error:o},"Test connection"),t({message:o.message,stack:o.stack})}},async getSchemaNames(s,e,t,n){try{ED("Get schemas",s,e),await this.connect(s,e,()=>{},n);let o=await Fr.getSchemaNames();return e.log("info",o,"All schemas list",s.hiddenKeys),t(null,o)}catch(o){return e.log("error",{message:o.message,stack:o.stack,error:o},"Get schemas"),t({message:o.message,stack:o.stack})}},async getDbCollectionsNames(s,e,t,n){try{await this.connect(s,e,()=>{},n);let o=await Fr.getEntitiesNames(s,{info:a=>{e.log("info",a,"Retrieving table and view names")},error:a=>{e.log("error",{message:a.message,stack:a.stack,error:a},"Retrieving databases and tables information")}});t(null,o)}catch(o){e.log("error",{message:o.message,stack:o.stack,error:o},"Retrieving databases and tables information"),t({message:o.message,stack:o.stack})}},async getDbCollectionsData(s,e,t,n){try{let o=_(({message:R,containerName:g="",entityName:I=""})=>{e.log("info",{message:R,schema:g,table:I},"Retrieving schema"),e.progress({message:R,containerName:g,entityName:I})},"progress");e.log("info",s,"Retrieving schema",s.hiddenKeys),o({message:"Start reverse-engineering process",containerName:"",entityName:""});let a=s.collectionData,T=a.collections,u=a.dataBaseNames,h=await Fr.getDbVersion(e),A=await Fr.getDbSynonyms(e),N=await u.reduce(async(R,g)=>{let I=await R,p=Fr.splitEntityNames(T[g]),m=await Fr.getSchemaSequences({schema:g,logger:e}),y=await p.tables.reduce(async(B,F)=>{let $=await B;o({message:"Start getting data from table",containerName:g,entityName:F});let{ddl:j,countOfRecords:se,jsonColumns:ue}=await Fr.getDDL(F,g,e),x=[],ne={};if(!x_.isEmpty(ue)){let U=Xb(se,s.recordSamplingSettings);o({message:`Fetching columns for JSON schema inference: ${JSON.stringify(ue)}`,containerName:g,entityName:F}),x=await Fr.selectRecords({tableName:F,limit:U,jsonColumns:ue,schema:g}),ne=await Fr.getJsonSchema(ue,x)}return o({message:"Data retrieved successfully",containerName:g,entityName:F}),$.concat({dbName:g,collectionName:F,entityLevel:{},documents:x,views:[],ddl:{script:j,type:"oracle",takeAllDdlProperties:!0},emptyBucket:!1,validation:{jsonSchema:ne},bucketInfo:{database:g,synonyms:(A==null?void 0:A[g])||[],sequences:m}})},Promise.resolve([])),P=await p.views.reduce(async(B,F)=>{let $=await B;o({message:"Start getting data from view",containerName:g,entityName:F});let j=await Fr.getViewDDL(F,g,e);return o({message:"Data retrieved successfully",containerName:g,entityName:F}),$.concat({name:F,data:{},ddl:{script:j,type:"oracle",takeAllDdlProperties:!0}})},Promise.resolve([]));if(x_.isEmpty(P))return[...I,...y];let M={dbName:g,entityLevel:{},views:P,emptyBucket:!1,bucketInfo:{indexes:[],database:g,synonyms:(A==null?void 0:A[g])||[],sequences:m}};return[...I,...y,M]},Promise.resolve([]));o({message:"Start processing the retrieved data in the application ..."}),t(null,N.filter(Boolean),{version:h})}catch(o){if((o==null?void 0:o.errorNum)===31603)return e.log("error",{message:"Missing required role \u201CSELECT_CATALOG_ROLE\u201D to perform this operation",stack:o.stack,error:o},"Reverse-engineering process failed"),t({message:"Missing required role \u201CSELECT_CATALOG_ROLE\u201D to perform this operation",type:"simpleError"});e.log("error",{message:o.message,stack:o.stack,error:o},"Reverse-engineering process failed"),t({message:o.message,stack:o.stack})}}};var hD=_((s,e,t)=>{let n=x_.isString(e)?e:x_.get(e,"message","Reverse Engineering error");s.log("error",{error:e},"Reverse Engineering error"),t(n)},"handleError"),Xb=_((s,e)=>{if(e.active==="absolute")return Number(e.absolute.value);let t=Math.ceil(s*e.relative.value/100);return Math.min(t,e.maxValue)},"getSampleDocSize")});var AD=Y((VG,fD)=>{"use strict";var Wh=Kh(),$h=Ct(),Qb=_(async(s,e,t)=>{let n=t.require("async"),o=t.require("@hackolade/ssh-service");Wh.logEnvironment(e),await Wh.connect(s,o,u=>{e.log("info",u,"Connection")});let a=s.script.split(`

`).filter(Boolean).map(u=>$h.trim($h.trim($h.trim(u),"/"),";")),T;if(await n.mapSeries(a,async u=>{try{u.endsWith("END")&&(u+=";");let h="Query: "+u.split(`
`).shift().substr(0,150);e.progress({message:h}),e.log("info",{message:h},"Apply to instance"),await Wh.execute(u)}catch(h){let A=h.errorNum===955,N=h.errorNum===1920;if(A||N)return;T=h,e.progress({message:"[color:red]Not executed..."}),e.log("error",{message:h.message,stack:h.stack,query:u},"Error applying to instance")}}),T)throw new Error(`Not all statements executed successfully.
Please, see HackoladeFE.log for more details.`)},"applyToInstance");fD.exports={applyToInstance:Qb}});var nn=Y((FG,dD)=>{"use strict";var Qh=class Qh{script;isDropScript};_(Qh,"ModificationScript");var zh=Qh,Jh=class Jh{isActivated;scripts;static getInstances(e,t,n){return(e||[]).filter(Boolean).map(o=>({isActivated:t,scripts:[{isDropScript:n,script:o}]}))}static getInstance(e,t,n){var o;if((o=e==null?void 0:e.filter(Boolean))!=null&&o.length)return{isActivated:t,scripts:e.filter(Boolean).map(a=>({isDropScript:n,script:a}))}}static getDropAndRecreateInstance(e,t,n){let o=[];if(e&&o.push({isDropScript:!0,script:e}),t&&o.push({isDropScript:!1,script:t}),!!(o!=null&&o.length))return{isActivated:n,scripts:o}}};_(Jh,"AlterScriptDto");var Xh=Jh;dD.exports={ModificationScript:zh,AlterScriptDto:Xh}});var ke=Y((qG,pD)=>{"use strict";var kG=Ct();pD.exports=s=>{let e=_(U=>s.get(U,"[0].code")||s.get(U,"[0].name",""),"getDbName"),t=_(U=>U&&(U.code||U.collectionName)||"","getEntityName"),n=_(U=>U&&(U.code||U.name)||"","getViewName"),o=_(U=>U&&(U.code||U.name)||"","getBucketName"),a=_(U=>({...s.get(U,"[0]",{}),name:e(U)}),"getDbData"),T=_(U=>s.get(U,"[0].viewOn"),"getViewOn"),u=_(U=>G=>G.primaryTableId===U&&G.primaryTableId!==G.foreignTableId,"isRecursiveRelationship"),h=_(U=>Object.keys(U).reduce((G,Z)=>{let pe=U[Z].filter(Se=>{let te=U[Se.primaryTableId];return Array.isArray(te)?!te.some(u(Z)):!0});return s.isEmpty(pe)?G:{...G,[Z]:pe}},{}),"rejectRecursiveRelationships"),A=_(U=>Object.keys(U).reduce((G,Z)=>{let pe=U[Z].filter(Se=>{let te=U[Se.primaryTableId];return Array.isArray(te)?te.some(u(Z)):!1});return G.concat(pe)},[]),"filterRecursiveRelationships"),N=_((U,G="	")=>U.split(`
`).map(Z=>G+Z).join(`
`),"tab"),R=_((U,G)=>Object.keys(U).map(s.toLower).includes(s.toLower(G)),"hasType"),g=_(U=>Object.entries(U).filter(([G,Z])=>!s.isNil(Z)).reduce((G,[Z,pe])=>({...G,[Z]:pe}),{}),"clean"),I=_(U=>U.every(G=>s.get(G,"isActivated",!0)),"checkAllKeysActivated"),p=_(U=>U.length?U.every(G=>!s.get(G,"isActivated",!0)):!1,"checkAllKeysDeactivated"),m=_((U,G)=>{let Z=U.filter(Se=>s.get(Se,"isActivated",!0)).map(G),pe=U.filter(Se=>!s.get(Se,"isActivated",!0)).map(G);return{activatedItems:Z,deactivatedItems:pe}},"divideIntoActivatedAndDeactivated"),y=_((U,{isActivated:G,isPartOfLine:Z,inlineComment:pe="--"})=>G!==!1?U:Z?"/* "+U+" */":U.includes(`
`)?`/*
`+U+` */
`:pe+" "+U,"commentIfDeactivated"),P=_((U,G="'",Z="'")=>{let pe=U[0];return U[U.length-1]===G&&pe===Z?U:`${G}${U}${Z}`},"wrap"),M=_(U=>`"${U}"`,"wrapInQuotes"),B=_(U=>G=>U==="nonquotedIdentifier"?G:M(G),"prepareNameForScriptFormat"),F=_(U=>`'${U}'`,"wrapComment"),$=_(U=>(G,Z)=>Z?`${B(U)(Z)}.${B(U)(G)}`:B(U)(G),"getNamePrefixedWithSchemaNameForScriptFormat"),j=_((U,G)=>G.some(Z=>(U==null?void 0:U.oldField[Z])!==(U==null?void 0:U.newField[Z])),"checkFieldPropertiesChanged"),se=_(({name:U})=>M(U),"columnMapToString");return{getDbName:e,getBucketName:o,getDbData:a,getEntityName:t,getViewName:n,getViewOn:T,rejectRecursiveRelationships:h,filterRecursiveRelationships:A,tab:N,hasType:R,clean:g,checkAllKeysActivated:I,checkAllKeysDeactivated:p,divideIntoActivatedAndDeactivated:m,commentIfDeactivated:y,wrap:P,wrapComment:F,wrapInQuotes:M,getNamePrefixedWithSchemaNameForScriptFormat:$,checkFieldPropertiesChanged:j,getColumnsList:_((U,G,Z,pe=se)=>{var we;let Se=m(U,pe),te=(we=Se==null?void 0:Se.deactivatedItems)!=null&&we.length?y(Se.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"";return!G&&Z?" ("+Se.activatedItems.join(", ")+te+")":" ("+U.map(pe).join(", ")+")"},"getColumnsList"),escapeSingleQuote:_(U=>U.replaceAll("'","''"),"escapeSingleQuote"),getGroupItemsByCompMode:_(({newItems:U=[],oldItems:G=[]})=>{let Z=U.filter(te=>!G.some(we=>we.id===te.id)),pe=[],Se=[];return G.forEach(te=>{let we=U.find(J=>J.id===te.id);we?s.isEqual(we,te)||Se.push(we):pe.push(te)}),{added:Z,removed:pe,modified:Se}},"getGroupItemsByCompMode"),prepareNameForScriptFormat:B}}});var ID=Y((HG,RD)=>{"use strict";var{AlterScriptDto:mD}=nn(),PD=Ct(),Jb=_((s,e)=>t=>{let{prepareNameForScriptFormat:n}=ke()(PD),a=`CREATE USER ${n(e)(t)} NO AUTHENTICATION;`;return mD.getInstance([a],!0,!1)},"getAddContainerScriptDto"),jb=_((s,e)=>t=>{let{prepareNameForScriptFormat:n}=ke()(PD),a=`DROP USER ${n(e)(t)};`;return mD.getInstance([a],!0,!0)},"getDeleteContainerScriptDto");RD.exports={getAddContainerScriptDto:Jb,getDeleteContainerScriptDto:jb}});var gD=Y((WG,DD)=>{"use strict";var{AlterScriptDto:Zb}=nn(),eF=_((s,e,t)=>n=>{var g;let{checkFieldPropertiesChanged:o,prepareNameForScriptFormat:a,getNamePrefixedWithSchemaNameForScriptFormat:T,getEntityName:u}=ke()(s),h={...n,...s.omit(n==null?void 0:n.role,"properties")||{}},A=u(h),N=(g=h.compMod)==null?void 0:g.keyspaceName,R=T(t)(A,N);return s.toPairs(n.properties).filter(([I,p])=>o(p.compMod,["type","mode"])).map(([I,p])=>`ALTER TABLE ${R} MODIFY (${a(t)(I)} ${s.toUpper(p.compMod.newField.mode||p.compMod.newField.type)});`).map(I=>Zb.getInstance([I],!0,!1))},"getUpdateTypesScriptDtos");DD.exports={getUpdateTypesScriptDtos:eF}});var OD=Y((zG,CD)=>{"use strict";var{AlterScriptDto:tF}=nn(),rF=_((s,e,t)=>n=>{var g;let{checkFieldPropertiesChanged:o,getEntityName:a,getNamePrefixedWithSchemaNameForScriptFormat:T,prepareNameForScriptFormat:u}=ke()(s),h={...n,...s.omit(n==null?void 0:n.role,"properties")||{}},A=a(h),N=(g=h.compMod)==null?void 0:g.keyspaceName,R=T(t)(A,N);return s.values(n.properties).filter(I=>o(I.compMod,["name"])).map(I=>{let p=u(t)(I.compMod.oldField.name),m=u(t)(I.compMod.newField.name);return e.renameColumn(R,p,m)}).map(I=>tF.getInstance([I],!0,!1))},"getRenameColumnScriptDtos");CD.exports={getRenameColumnScriptDtos:rF}});var V_=Y((QG,yD)=>{"use strict";var eS=class eS{type;keyId};_(eS,"AlterIndexKeyDto");var jh=eS,tS=class tS{id;indxName;isActivated;ifNotExist;indxType;indxKey;column_expression;tablespace;index_properties;index_attributes;index_compression;logging_clause;indxComments};_(tS,"AlterIndexDto");var Zh=tS;yD.exports={AlterIndexDto:Zh,AlterIndexKeyDto:jh}});var wD=Y((ZG,LD)=>{"use strict";var{AlterIndexDto:jG}=V_(),_S=class _S{id;constraintName;indexStorageParameters;indexTablespace;indexInclude};_(_S,"AlterCollectionColumnPrimaryKeyOptionDto");var rS=_S,cS=class cS{type;isActivated;primaryKey;unique;mode;length;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;primaryKeyOptions;triggerUpdateColumns;compMod;GUID};_(cS,"AlterCollectionColumnDto");var nS=cS,lS=class lS extends rS{compositePrimaryKey};_(lS,"AlterCollectionRoleCompModPKDto");var sS=lS,TS=class TS{new;old};_(TS,"AlterCollectionRoleCompModPrimaryKey");var iS=TS,uS=class uS{id;type;collectionName;properties;definitions;isActivated;additionalProperties;memory_optimized;collectionUsers;ifNotExist;on_commit;table_tablespace_name;bucketId;compMod;name;roleType;patternProperties};_(uS,"AlterCollectionRoleDto");var oS=uS,ES=class ES{type;isActivated;unique;subtype;properties;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;triggerUpdateColumns;role;GUID};_(ES,"AlterCollectionDto");var aS=ES;LD.exports={AlterCollectionDto:aS,AlterCollectionRoleDto:oS,AlterCollectionColumnDto:nS,AlterCollectionRoleCompModPrimaryKey:iS,AlterCollectionRoleCompModPKDto:sS}});var MD=Y((nH,YD)=>{"use strict";var{AlterScriptDto:Mi}=nn(),{AlterCollectionDto:tH}=wD(),{AlterIndexDto:rH}=V_(),{prepareNameForScriptFormat:hS}=ke()(),nF=["index_compression","tablespace","logging_clause"],sF=["indxType","indxKey","column_expression","index_properties","index_attributes"],iF=_(({_:s})=>({oldIndex:e,newIndex:t})=>sF.some(n=>!s.isEqual(e[n],t[n])),"shouldDropAndRecreateIndex"),oF=_(({oldIndex:s,newIndex:e})=>nF.some(t=>s[t]!==e[t]),"shouldAlterIndexRebuild"),SS=_(({oldIndex:s,newIndex:e})=>s.id===e.id||s.indxName===e.indxName,"areOldIndexDtoAndNewIndexDtoDescribingSameDatabaseIndex"),BD=_(({index:s,collection:e})=>{var t;return(t=s==null?void 0:s.indxKey)!=null&&t.length?{...s,indxKey:s.indxKey.map(n=>{var h,A,N,R,g,I;if(!(n!=null&&n.keyId))return n;let o=Object.entries(((h=e==null?void 0:e.role)==null?void 0:h.properties)||(e==null?void 0:e.properties)||{}).map(([p,m])=>({...m,name:p})),a=(((N=(A=e==null?void 0:e.role)==null?void 0:A.compMod)==null?void 0:N.oldProperties)||[]).map(p=>({...p,GUID:p.id})),u=(o.length>0?o:a).find(p=>(p==null?void 0:p.GUID)===(n==null?void 0:n.keyId));return u?(R=u==null?void 0:u.compMod)!=null&&R.newField?{...n,name:((I=(g=u==null?void 0:u.compMod)==null?void 0:g.newField)==null?void 0:I.name)||null}:{...n,name:u.name}:n})}:s},"addNameToIndexKey"),aF=_(({_:s,ddlProvider:e,scriptFormat:t})=>({collection:n})=>{var u,h,A,N,R,g;let o=((A=(h=(u=n==null?void 0:n.role)==null?void 0:u.compMod)==null?void 0:h.Indxs)==null?void 0:A.new)||[];return(((g=(R=(N=n==null?void 0:n.role)==null?void 0:N.compMod)==null?void 0:R.Indxs)==null?void 0:g.old)||[]).filter(I=>!o.find(m=>SS({oldIndex:I,newIndex:m}))).map(I=>_F({ddlProvider:e,scriptFormat:t})({index:I,collection:n}))},"getDeletedIndexesScriptDtos"),_F=_(({ddlProvider:s,scriptFormat:e})=>({index:t})=>{let n=hS(e)(t.indxName),o=s.dropIndex({name:n});return Mi.getInstance([o],t.isActivated,!0)},"getDeleteIndexScriptDto"),UD=_(({_:s,ddlProvider:e})=>({collection:t})=>{var T,u,h,A;let n=((T=t==null?void 0:t.role)==null?void 0:T.Indxs)||[],o=((A=(h=(u=t==null?void 0:t.role)==null?void 0:u.compMod)==null?void 0:h.Indxs)==null?void 0:A.old)||[];return n.filter(N=>!o.find(g=>SS({oldIndex:g,newIndex:N}))).map(N=>cF({ddlProvider:e})({index:N,collection:t}))},"getAddedIndexesScriptDtos"),cF=_(({ddlProvider:s})=>({index:e,collection:t})=>{var T,u,h,A,N,R,g;let n=BD({index:e,collection:t}),o=((h=(u=(T=t==null?void 0:t.role)==null?void 0:T.compMod)==null?void 0:u.collectionName)==null?void 0:h.new)||((A=t==null?void 0:t.role)==null?void 0:A.name),a=s.createIndex(o,{...n,schemaName:(g=(R=(N=t==null?void 0:t.role)==null?void 0:N.compMod)==null?void 0:R.bucketProperties)==null?void 0:g.name});return Mi.getInstance([a],e.isActivated,!1)},"getAddIndexScriptDto"),lF=_(({_:s,ddlProvider:e,scriptFormat:t})=>({collection:n})=>{var u,h,A,N,R,g;let o=((A=(h=(u=n==null?void 0:n.role)==null?void 0:u.compMod)==null?void 0:h.Indxs)==null?void 0:A.new)||[],a=((g=(R=(N=n==null?void 0:n.role)==null?void 0:N.compMod)==null?void 0:R.Indxs)==null?void 0:g.old)||[];return o.map(I=>{let p=a.find(m=>SS({oldIndex:m,newIndex:I}));if(p)return{newIndex:I,oldIndex:p}}).filter(Boolean).flatMap(I=>TF({_:s,ddlProvider:e,scriptFormat:t})({modifiedIndex:I,collection:n}))},"getModifiedIndexesScriptDtos"),TF=_(({_:s,ddlProvider:e,scriptFormat:t})=>({modifiedIndex:{oldIndex:n,newIndex:o},collection:a})=>{var N,R,g,I,p,m;let T=hS(t)(n.indxName),u=hS(t)(o.indxName),h=[];if(iF({_:s})({oldIndex:n,newIndex:o})){let y=Mi.getInstance([e.dropIndex({name:T})],o.isActivated,!0),P=BD({index:o,collection:a}),M=Mi.getInstance([e.createIndex((g=(R=(N=a==null?void 0:a.role)==null?void 0:N.compMod)==null?void 0:R.collectionName)==null?void 0:g.new,{...P,schemaName:(m=(p=(I=a==null?void 0:a.role)==null?void 0:I.compMod)==null?void 0:p.bucketProperties)==null?void 0:m.name})],o.isActivated,!1);return h.push(y,M),h}if(n.indxName!==o.indxName){let y=Mi.getInstance([e.alterIndexRename({oldName:T,newName:u})],o.isActivated,!1);h.push(y)}if(oF({oldIndex:n,newIndex:o})){let y=Mi.getInstance([e.alterIndexRebuild({name:u,indexData:o})],o.isActivated,!1);h.push(y)}return h},"getModifyIndexScriptDto"),uF=_(({_:s,ddlProvider:e,scriptFormat:t})=>({collection:n})=>{let o=aF({_:s,ddlProvider:e,scriptFormat:t})({collection:n}),a=UD({_:s,ddlProvider:e})({collection:n}),T=lF({_:s,ddlProvider:e,scriptFormat:t})({collection:n});return[...o,...a,...T].filter(Boolean)},"getModifyIndexesScriptDtos");YD.exports={getModifyIndexesScriptDtos:uF,getAddedIndexesScriptDtos:UD}});var yo=Y((iH,xD)=>{"use strict";xD.exports=s=>{let e=Ct(),{createColumnDefinition:t}=s.require("@hackolade/ddl-fe-utils"),n=_(a=>a.$ref?a.$ref.split("/").pop():e.toUpper(a.mode||a.childType||a.type),"getType");return{createColumnDefinitionBySchema:_(({name:a,jsonSchema:T,parentJsonSchema:u,ddlProvider:h,schemaData:A,definitionJsonSchema:N})=>t({name:a,jsonSchema:T,parentJsonSchema:u,ddlProvider:h,schemaData:A,definitionJsonSchema:N,getType:n}),"createColumnDefinitionBySchema")}}});var bD=Y((aH,VD)=>{"use strict";VD.exports={number:"numeric",string:"nvarchar2",date:"date",timestamp:"timestamp",binary:"raw",boolean:"numeric",document:"bfile",array:"json",objectId:"char",default:"nvarchar2"}});var vD=Y((_H,FD)=>{"use strict";FD.exports={character:{type:"char"},"character varying":{type:"varchar"},"char varying":{type:"varchar"},"national char":{type:"nchar"},"national character":{type:"nchar"},"national char varying":{type:"nvarchar2"},"national character varying":{type:"nvarchar2"},"nchar varying":{type:"nvarchar2"},tinyint:{type:"number",precision:5},"small int":{type:"number",precision:5},shortinteger:{type:"number",precision:5},shortint:{type:"number",precision:5},smallint:{type:"number",precision:5},int:{type:"number",precision:10},integer:{type:"number",precision:10},shortdecimal:{type:"number",precision:5,scale:0},decimal:{type:"number",precision:5,scale:0},longinteger:{type:"number",precision:20},bigint:{type:"number",precision:20},int8:{type:"number",precision:20},bit:{type:"number",precision:1},real:{type:"float",length:23},"double precision":{type:"number"},"small money":{type:"float",precision:16,scale:2},money:{type:"float",precision:16,scale:2},"long varchar":{type:"long"},text:{type:"long"},ntext:{type:"long"},uniqueidentifier:{type:"char",length:36},uuid:{type:"char",length:36},datetime:{type:"date"},"small datetime":{type:"date"},image:{type:"long raw"},binary:{type:"raw"},varbinary:{type:"raw"},string:{type:"nvarchar2"}}});var NS=Y((cH,kD)=>{"use strict";kD.exports={createSchema:"CREATE USER${ifNotExists} ${schemaName} NO AUTHENTICATION",comment:"\nCOMMENT ON ${object} ${objectName} IS ${comment};\n",createTable:"CREATE${tableType} TABLE${ifNotExists} ${name}        ${tableProps}        \n${options}",createTableProps:"${columnDefinitions}${keyConstraints}${checkConstraints}${foreignKeyConstraints}",columnDefinition:"${name}${type}${default}${encrypt}${constraints}",createKeyConstraint:"${constraintName}${keyType}${columns}${options}",createForeignKeyConstraint:"${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${onDelete}",checkConstraint:"${name}CHECK (${expression})",createForeignKey:"ALTER TABLE ${foreignTable} ADD CONSTRAINT ${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${onDelete};",dropForeignKey:"ALTER TABLE ${tableName} DROP CONSTRAINT ${fkConstraintName};",createIndex:"CREATE${indexType} INDEX${ifNotExists}${name} ON ${tableName}${keys}${options};\n",dropIndex:"DROP INDEX ${name};",alterIndexRename:"ALTER INDEX ${oldName} RENAME TO ${newName};",alterIndexRebuild:"ALTER INDEX ${name} REBUILD ${options};",createView:"CREATE${orReplace}${force}${viewType}${materialized} VIEW${ifNotExists} ${name} ${sharing}${viewProperties}\n	AS ${selectStatement}",viewSelectStatement:"SELECT ${keys}\n	FROM ${tableName}",createObjectType:`CREATE OR REPLACE TYPE \${name} AS OBJECT 
(
	\${properties}
);
`,objectTypeColumnDefinition:"${name} ${type}",createCollectionType:"CREATE OR REPLACE TYPE ${name} IS ${collectionType}${size} OF (${datatype})${notPersistable};\n",ifNotExists:`DECLARE
BEGIN
	EXECUTE IMMEDIATE '\${statement}';
	EXCEPTION WHEN OTHERS THEN
		IF SQLCODE = -\${errorCode} THEN NULL; ELSE RAISE; END IF;
END;
/
`,createSynonym:"CREATE${orReplace}${editionable}${public} SYNONYM ${name}\n	FOR ${objectName};\n",renameColumn:"ALTER TABLE ${tableName} RENAME COLUMN ${oldColumnName} TO ${newColumnName};",createSequence:"CREATE SEQUENCE${ifNotExists} ${name}${sharing}${options}",dropSequence:"DROP SEQUENCE${ifExists} ${name};\n",renameSequence:"RENAME ${name} TO ${newName};\n",alterSequence:"ALTER SEQUENCE${ifExists} ${name}${options};\n",dualityView:{createJsonRelationalDualityViewHeading:"CREATE${orReplaceStatement}${forceStatement}${editionableStatement} JSON RELATIONAL DUALITY VIEW ${viewName} AS",sql:{tableTagsStatement:"WITH${checkStatement}${etagStatement}${insertStatement}${updateStatement}${deleteStatement}",columnTagsStatement:"WITH${checkStatement}${etagStatement}${updateStatement}",fromTableStatement:"FROM ${tableName}${tableAlias}${tableTagsStatement}"}}}});var fS=Y((lH,qD)=>{"use strict";var EF=Object.freeze({SQL:"SQL",GRAPHQL:"GRAPHQL"});qD.exports={DualityViewSyntaxType:EF}});var AS=Y((TH,GD)=>{"use strict";var hF=Object.freeze({JOIN_SUBQUERY_TYPE:"joinSubquery",COLLECTION_REFERENCE:"collectionReference"});GD.exports={DualityViewPropertiesType:hF}});var WD=Y((uH,KD)=>{"use strict";var{DualityViewPropertiesType:HD}=AS(),Nn=class Nn{constructor(e,t,n,o,a){if(this.constructor===Nn)throw new Error("Abstract classes can't be instantiated.");this._ddlTemplates=e,this._assignTemplates=t,this._lodash=n,this._prepareName=o,this._getNamePrefixedWithSchemaName=a}static padInFront(e){return` ${e}`}static padInFrontAndUppercaseIfExists(e){return e?Nn.padInFront(e).toUpperCase():""}static isDualityView(e={}){return e.viewOn&&e.duality}static isJoinSubquery(e={}){return(e==null?void 0:e.type)===HD.JOIN_SUBQUERY_TYPE}static isFlexColumn(e={}){return e.flexColumn}static isRegularDualityViewFieldOnRootLevelOrInObjectSubquery(e={}){let{ref:t,refIdPath:n,refType:o}=e;return t&&(n||[]).length===2&&o===HD.COLLECTION_REFERENCE}static isRegularDualityViewFieldInArraySubquery(e={}){let{ref:t,refId:n}=e;return t&&n}static isRegularDualityViewField(e={}){return Nn.isRegularDualityViewFieldOnRootLevelOrInObjectSubquery(e)||Nn.isRegularDualityViewFieldInArraySubquery(e)}static getPathToReferencedColumn(e,t){let n=[];return Nn.isRegularDualityViewFieldOnRootLevelOrInObjectSubquery(e)?n=e.refIdPath:Nn.isRegularDualityViewFieldInArraySubquery(e)&&(n=[...t.joinedCollectionRefIdPath||[],e.ref]),n}static getRegularFieldNameFromCollection(e,t){if(e.length<2)throw new Error("Cannot extract referenced column name");let n=e[0],o=e[1],a=t[n],T=(a==null?void 0:a.properties)||{};for(let u of Object.keys(T))if(T[u].GUID===o)return u;return""}static getKeyValueFrontPadding(e){return"	".repeat(e)}_getForceStatement(e){return Nn.padInFrontAndUppercaseIfExists(e.force)}_getOrReplaceStatement(e){return e.orReplace?" OR REPLACE":""}_getEditionableStatement(e){return Nn.padInFrontAndUppercaseIfExists(e.editionable)}static getRegularFieldName(e,t){return t.code||e||t.referencedColumnName}getCreateJsonRelationalDualityViewHeadingDdl(e){var g,I;let{jsonSchema:t,view:n}=e,{getViewName:o}=ke()(this._lodash),a=((I=(g=this._ddlTemplates)==null?void 0:g.dualityView)==null?void 0:I.createJsonRelationalDualityViewHeading)||"",T=this._getOrReplaceStatement(n),u=this._getForceStatement(t),h=this._getEditionableStatement(t),A=o(n),N=this._getNamePrefixedWithSchemaName(A,n.schemaName),R={orReplaceStatement:T,forceStatement:u,editionableStatement:h,viewName:N};return this._assignTemplates(a,R)}getDualityViewBodyDdl(e){throw new Error("Not implemented")}convertDualityViewToDdl(e){let t=this.getCreateJsonRelationalDualityViewHeadingDdl(e),n=this.getDualityViewBodyDdl(e);return t+`
`+n+`
`}};_(Nn,"AbstractDualityViewFeDdlCreator");var dS=Nn;KD.exports={AbstractDualityViewFeDdlCreator:dS}});var zD=Y((hH,$D)=>{"use strict";var{AbstractDualityViewFeDdlCreator:at}=WD(),mS=class mS extends at{_getFromRootTableAliasStatement(e){if(e.rootTableAlias){let t=this._prepareName(e.rootTableAlias);return at.padInFront(t)}return""}_getFromChildTableAliasStatement(e){if(e.childTableAlias){let t=this._prepareName(e.childTableAlias);return at.padInFront(t)}return""}_getCheckStatement(e){return at.padInFrontAndUppercaseIfExists(e.check)}_getEtagStatement(e){let t=e.etag?"etag":"";return at.padInFrontAndUppercaseIfExists(t)}_getDeleteStatement(e){return at.padInFrontAndUppercaseIfExists(e.delete)}_getInsertStatement(e){return at.padInFrontAndUppercaseIfExists(e.insert)}_getUpdateStatement(e){return at.padInFrontAndUppercaseIfExists(e.update)}_getTableTagsStatement(e){let t=e.tableTagsClause||{},n=this._getCheckStatement(t),o="";n&&(o=this._getEtagStatement(t));let a=this._getInsertStatement(t),T=this._getUpdateStatement(t),u=this._getDeleteStatement(t),h={checkStatement:n,etagStatement:o,insertStatement:a,updateStatement:T,deleteStatement:u};if(Object.values(h).some(N=>N==null?void 0:N.length)){let N=this._ddlTemplates.dualityView.sql.tableTagsStatement,R=this._assignTemplates(N,h);return at.padInFront(R)}return""}_getColumnTagsStatement(e){let t=e.columnTagsClause||{},n=this._getCheckStatement(t),o="";n&&(o=this._getEtagStatement(t));let a=this._getUpdateStatement(t),T={checkStatement:n,etagStatement:o,updateStatement:a};if(Object.values(T).some(h=>h==null?void 0:h.length)){let h=this._ddlTemplates.dualityView.sql.columnTagsStatement,A=this._assignTemplates(h,T);return at.padInFront(A)}return""}_getFromRootTableStatement(e){let t=this._getNamePrefixedWithSchemaName(e.tableName,e.schemaName),n=this._getFromRootTableAliasStatement(e),o=this._getTableTagsStatement(e),a=this._ddlTemplates.dualityView.sql.fromTableStatement;return this._assignTemplates(a,{tableName:t,tableAlias:n,tableTagsStatement:o})}_getFromChildTableStatement({joinSubqueryJsonSchema:e,relatedSchemas:t,bodyPadding:n}){let o=this._lodash.first(e.joinedCollectionRefIdPath);if(!o)throw new Error("Specify child table for all join subqueries");let a=t[o],{getEntityName:T}=ke()(this._lodash),u=T(a),h=a.bucketName,A=this._getNamePrefixedWithSchemaName(u,h),N=this._getFromChildTableAliasStatement(e),R=this._getTableTagsStatement(e),g=this._ddlTemplates.dualityView.sql.fromTableStatement,p=[this._assignTemplates(g,{tableName:A,tableAlias:N,tableTagsStatement:R})];return e.whereClause&&p.push(`WHERE ${e.whereClause}`),p.map(m=>`${n}${m}`).join(`
`)}_getNameOfReferencedColumnForDdl(e,t,n){let{getEntityName:o}=ke()(this._lodash);if(at.isDualityView(e)){let a=e.rootTableAlias||e.tableName;return this._getNamePrefixedWithSchemaName(t,a)}if(at.isJoinSubquery(e)){if(e.childTableAlias){let T=e.childTableAlias;return this._getNamePrefixedWithSchemaName(t,T)}let a=this._lodash.first(e.joinedCollectionRefIdPath);if(a){let T=n[a],u=o(T);return this._getNamePrefixedWithSchemaName(t,u)}}return""}_getRegularFieldKeyValueStatement({propertyName:e,propertyJsonSchema:t,parent:n,paddingFactor:o,relatedSchemas:a}){let{wrap:T}=ke()(this._lodash),u=at.getKeyValueFrontPadding(o),h=at.getRegularFieldName(e,t),A=T(h,"'","'"),N=at.getPathToReferencedColumn(t,n),R=at.getRegularFieldNameFromCollection(N,a),g=this._getNameOfReferencedColumnForDdl(n,R,a),I=this._getColumnTagsStatement(t);return`${u}${A}: ${g}${I}`}_getJoinSubqueryValueStatement({propertyJsonSchema:e,paddingFactor:t,relatedSchemas:n}){let o=t+1,a=t+2,T=this._getObjectGenStatement({paddingFactor:a,relatedSchemas:n,jsonSchema:e}),u=at.getKeyValueFrontPadding(o),A=[`${u}SELECT${T}`],N=this._getFromChildTableStatement({joinSubqueryJsonSchema:e,relatedSchemas:n,bodyPadding:u});return A.push(N),A.join(`
`)}_shouldUnnestJoinSubquery(e){let t=this._lodash.toUpper(e.sqlJsonFunction),n=this._lodash.toLower(e.subtype);return t==="JSON_OBJECT"||n==="object"?!!e.unnestSubquery:!1}_getJoinSubqueryKeyValueStatement({propertyName:e,propertyJsonSchema:t,paddingFactor:n,relatedSchemas:o}){let{wrap:a}=ke()(this._lodash),T=this._getJoinSubqueryValueStatement({relatedSchemas:o,paddingFactor:n,propertyJsonSchema:t}),u=at.getKeyValueFrontPadding(n),h=this._getObjectGenStatementJsonKeywordConfig(t),A=h.surroundingBrackets[0],N=h.surroundingBrackets[1];if(this._shouldUnnestJoinSubquery(t))return`${u}UNNEST ${A}
${T}
${u}${N}`;let g=this._getJoinSubqueryName(e,t),I=a(g,"'","'");return`${u}${I} : ${A}
${T}
${u}${N}`}_getJoinSubqueryName(e,t){return t.name||e}_buildKeyValueStatement({propertyName:e,propertyJsonSchema:t,parent:n,paddingFactor:o,relatedSchemas:a}){return at.isFlexColumn(t)?this._getFlexColumnStatement({propertyName:e,propertyJsonSchema:t,paddingFactor:o}):at.isRegularDualityViewField(t)?this._getRegularFieldKeyValueStatement({propertyName:e,propertyJsonSchema:t,parent:n,paddingFactor:o,relatedSchemas:a}):at.isJoinSubquery(t)?this._getJoinSubqueryKeyValueStatement({propertyName:e,propertyJsonSchema:t,paddingFactor:o,relatedSchemas:a}):""}_getKeyValueStatement({jsonSchema:e,relatedSchemas:t,paddingFactor:n}){var h;let o=[],a=e.properties||((h=e.items)==null?void 0:h.properties)||{},T=this._lodash.toPairs(a);for(let[A,N]of T){let R=this._buildKeyValueStatement({propertyName:A,propertyJsonSchema:N,parent:e,paddingFactor:n,relatedSchemas:t});o.push(R)}return`
${o.join(`,
`)}
`}_getObjectGenStatementJsonKeywordConfig(e){if(!at.isJoinSubquery(e))return{jsonKeyword:"JSON",surroundingBrackets:["",""],jsonKeywordBrackets:["{","}"]};let t=this._lodash.toUpper(e.sqlJsonFunction);return t==="JSON_OBJECT"?{jsonKeyword:t,surroundingBrackets:["(",")"],jsonKeywordBrackets:["(",")"]}:t==="JSON_ARRAYAGG"?{jsonKeyword:t,surroundingBrackets:["(",")"],jsonKeywordBrackets:["( JSON {","})"]}:this._lodash.toLower(e.subtype)==="array"?{jsonKeyword:"JSON",surroundingBrackets:["[","]"],jsonKeywordBrackets:["{","}"]}:{jsonKeyword:"JSON",surroundingBrackets:["(",")"],jsonKeywordBrackets:["{","}"]}}_getObjectGenStatement({relatedSchemas:e,paddingFactor:t,jsonSchema:n}){let o=this._getKeyValueStatement({relatedSchemas:e,paddingFactor:t,jsonSchema:n}),a=at.getKeyValueFrontPadding(t-1),T=this._getObjectGenStatementJsonKeywordConfig(n),u=T.jsonKeywordBrackets[0],h=T.jsonKeywordBrackets[1],A=`${T.jsonKeyword} ${u}\${keyValueStatement}${a}${h}`,N=this._assignTemplates(A,{keyValueStatement:o});return at.padInFront(N)}getDualityViewBodyDdl(e){let{view:t,jsonSchema:n,relatedSchemas:o}=e,u=[`SELECT${this._getObjectGenStatement({jsonSchema:n,paddingFactor:1,relatedSchemas:o})}`],h=this._getFromRootTableStatement(t);return u.push(h+";"),u.join(`
`)}_getFlexColumnStatement({propertyName:e,propertyJsonSchema:t,paddingFactor:n}){let{wrap:o}=ke()(this._lodash),a=at.getKeyValueFrontPadding(n),T=at.getRegularFieldName(e,t),u=o(T,'"','"');return`${a}${u} AS FLEX COLUMN`}};_(mS,"SqlDualityViewDdlCreator");var pS=mS;$D.exports={SqlDualityViewDdlCreator:pS}});var QD=Y((NH,XD)=>{"use strict";var{DualityViewSyntaxType:SF}=fS(),{SqlDualityViewDdlCreator:NF}=zD(),RS=class RS{static getCreatorInstance(e,{ddlTemplates:t,assignTemplates:n,lodash:o,prepareName:a,getNamePrefixedWithSchemaName:T}){switch(e==null?void 0:e.toUpperCase()){case SF.SQL:return new NF(t,n,o,a,T);default:throw new Error(`Unknown syntax config: ${e}`)}}};_(RS,"DualityViewDdlCreatorFactory");var PS=RS;XD.exports={DualityViewDdlCreatorFactory:PS}});var IS=Y((AH,JD)=>{"use strict";var fF=Object.freeze({IF_NOT_EXISTS_SINCE:23,JSON_TYPE_SINCE:21});JD.exports={DbVersion:fF}});var eg=Y((dH,ZD)=>{"use strict";var jD=_((s="")=>new RegExp("\\$\\{(.*?)\\}",s),"template"),AF=_(s=>s.match(jD("gi"))||[],"getAllTemplates"),dF=_(s=>(s.match(jD("i"))||[])[1],"parseTemplate");ZD.exports=({_:s})=>({assignTemplates:_((t,n)=>AF(t).reduce((o,a)=>{let T=dF(a);return o.replace(a,()=>n[T]||n[T]===0?n[T]:"")},t),"assignTemplates")})});var rg=Y((PH,tg)=>{"use strict";var mH=Ct();tg.exports=(s,e)=>{let t=_((m,y)=>Object.entries(m.properties).map(y),"mapProperties"),n=_(m=>m.compositeUniqueKey?!1:!!m.unique,"isUniqueKey"),o=_(m=>{var y;return n(m)&&!((y=m.uniqueKeyOptions)!=null&&y.constraintName)},"isInlineUnique"),a=_(m=>m.compositeUniqueKey||m.compositePrimaryKey?!1:!!m.primaryKey,"isPrimaryKey"),T=_(m=>{var y;return a(m)&&!((y=m.primaryKeyOptions)!=null&&y.constraintName)},"isInlinePrimaryKey"),u=_((m,y,P)=>e({keyType:"UNIQUE",columns:[{name:y,isActivated:P}],...m}),"hydrateUniqueOptions"),h=_((m,y,P)=>e({keyType:"PRIMARY KEY",columns:[{name:y,isActivated:P}],...m}),"hydratePrimaryKeyOptions"),A=_((m,y)=>Object.keys(y).find(P=>y[P].GUID===m),"findName"),N=_((m,y)=>s.get(Object.values(y).find(P=>P.GUID===m),"isActivated",!0),"checkIfActivated"),R=_((m,y)=>s.map(m,P=>({name:A(P.keyId,y.properties),isActivated:N(P.keyId,y.properties)})),"getKeys"),g=_(m=>Array.isArray(m.primaryKey)?m.primaryKey.filter(y=>!s.isEmpty(y.compositePrimaryKey)).map(y=>({...h(y,null,null),columns:R(y.compositePrimaryKey,m)})):[],"getCompositePrimaryKeys"),I=_(m=>Array.isArray(m.uniqueKey)?m.uniqueKey.filter(y=>!s.isEmpty(y.compositeUniqueKey)).map(y=>({...u(y,null,null),columns:R(y.compositeUniqueKey,m)})):[],"getCompositeUniqueKeys");return{getTableKeyConstraints:_(m=>{if(!m.properties)return[];let y=t(m,([M,B])=>{if(!(!n(B)||o(B)))return u(B.uniqueKeyOptions,M,B.isActivated)}).filter(Boolean);return[...t(m,([M,B])=>{if(!(!a(B)||T(B)))return h(B.primaryKeyOptions,M,B.isActivated)}).filter(Boolean),...g(m),...y,...I(m)]},"getTableKeyConstraints"),isInlineUnique:o,isInlinePrimaryKey:T,getKeys:R}}});var DS=Y((DH,ng)=>{"use strict";var IH=Ct();ng.exports=({prepareName:s,_:e})=>({getOptionsString:_(({constraintName:n,deferClause:o,rely:a,validate:T,indexClause:u,exceptionClause:h})=>{let A=n?` CONSTRAINT ${s(e.trim(n))}`:"",N=[o,a,u,T,h].filter(Boolean).join(" ");return{constraintString:A,statement:N&&` ${N}`}},"getOptionsString")})});var ig=Y((OH,sg)=>{"use strict";var CH=Ct(),{DbVersion:pF}=IS(),mF=_(s=>Number.parseInt(s,10)<pF.JSON_TYPE_SINCE,"shouldUseClobForJsonColumns");sg.exports=({_:s,wrap:e,assignTemplates:t,templates:n,commentIfDeactivated:o,wrapComment:a,prepareName:T})=>{let{getOptionsString:u}=DS()({_:s,prepareName:T}),h=_((J,Te)=>s.chain(Te).filter("comment").map(Be=>{let tt=t(n.comment,{object:"COLUMN",objectName:`${J}.${T(Be.name)}`,comment:a(Be.comment)});return o(tt,Be)}).join(`
`).value(),"getColumnComments"),A=_(({nullable:J,unique:Te,primaryKey:Be,primaryKeyOptions:tt,uniqueKeyOptions:It})=>{let{constraintString:Et,statement:er}=u(N({primaryKey:Be,unique:Te,primaryKeyOptions:tt,uniqueKeyOptions:It}));return`${J?"":" NOT NULL"}${Et}${Be?" PRIMARY KEY":""}${Te?" UNIQUE":""}${er}`},"getColumnConstraints"),N=_(({primaryKey:J,unique:Te,primaryKeyOptions:Be,uniqueKeyOptions:tt})=>J?Be||{}:Te?tt||{}:{},"getOptions"),R=_((J,Te)=>J==="JSON"&&mF(Te)?"CLOB":J,"replaceTypeByVersion"),g=_(({default:J,identity:Te})=>{if(!s.isEmpty(Te)&&Te.generated){let Be=_(({generated:It,generatedOnNull:Et})=>It==="BY DEFAULT"?` ${It} ${Et?" ON NULL":""}`:" ALWAYS","getGenerated"),tt=_(({identityStart:It,identityIncrement:Et,numberToCache:er})=>{let vr=It?` START WITH ${It}`:"",dr=Et?` INCREMENT BY ${Et}`:"",kr=er?` CACHE ${er}`:" NOCACHE";return`${vr}${dr}${kr}`},"getOptions");return` GENERATED${Be(Te)} AS IDENTITY (${s.trim(tt(Te))})`}else if(J)return` DEFAULT ${J}`;return""},"getColumnDefault"),I=_(({encryption:J})=>{if(s.isPlainObject(J)&&!s.isEmpty(s.omit(J,"id"))){let{ENCRYPTION_ALGORITHM:Te,INTEGRITY_ALGORITHM:Be,noSalt:tt}=J,It=Te?` USING '${Te}'`:"",Et=Be?` '${Be}'`:"";return` ENCRYPT${It}${Et}${tt?" NO SALT":""}`}return""},"getColumnEncrypt"),p=_((J,Te,Be)=>` ${J}(${Te} ${s.toUpper(Be)})`,"addByteLength"),m=_((J,Te)=>` ${J}(${Te})`,"addLength"),y=_((J,Te,Be)=>s.isNumber(Be)?` ${J}(${Te||"*"},${Be})`:s.isNumber(Te)?` ${J}(${Te})`:` ${J}`,"addScalePrecision"),P=_((J,Te)=>s.isNumber(Te)?` ${J}(${Te})`:` ${J}`,"addPrecision"),M=_((J,Te,Be)=>` TIMESTAMP${s.isNumber(J)?`(${J})`:""}${Te?` WITH${Be?" LOCAL":""} TIME ZONE`:""}`,"timestamp"),B=_(J=>` INTERVAL YEAR${s.isNumber(J)?`(${J})`:""} TO MONTH`,"intervalYear"),F=_((J,Te)=>{let Be=s.isNumber(J)?`(${J})`:"",tt=s.isNumber(Te)?`(${Te})`:"";return` INTERVAL DAY${Be} TO SECOND${tt}`},"intervalDay"),$=_((J,Te,Be)=>{let tt={"vector<int8>":"int8","vector<float32>":"float32","vector<float64>":"float64"}[Be],It=Te||"*",Et=s.toUpper(tt||"*");return` ${J}(${It}, ${Et})`},"decorateVector"),j=_((J,Te)=>["object","array"].includes(Te)?" "+J+"("+s.toUpper(Te)+")":" "+J,"decorateJson"),se=_(J=>["CHAR","VARCHAR2"].includes(J),"canHaveByte"),ue=_(J=>["CHAR","VARCHAR2","NCHAR","NVARCHAR2","RAW","UROWID"].includes(J),"canHaveLength"),x=_(J=>["NUMBER","FLOAT"].includes(J),"canHavePrecision"),ne=_(J=>J==="NUMBER","canHaveScale"),U=_(J=>J==="INTERVAL YEAR","isIntervalYear"),G=_(J=>J==="INTERVAL DAY","isIntervalDay"),Z=_(J=>J==="TIMESTAMP","isTimezone"),pe=_((J,Te,Be)=>J==="VECTOR"&&(Te||Be),"canDecorateVector"),Se=_(J=>J==="JSON","isJson");return{getColumnComments:h,getColumnConstraints:A,replaceTypeByVersion:R,getColumnDefault:g,getColumnEncrypt:I,decorateType:_((J,Te)=>{let{lengthSemantics:Be,length:tt,precision:It,scale:Et,fractSecPrecision:er,withTimeZone:vr,localTimeZone:dr,yearPrecision:kr,dayPrecision:xi,isUDTRef:Zn,schemaName:Ln,dimension:es,subtype:vt}=Te;return Be&&se(J)&&ue(J)&&s.isNumber(tt)?p(J,tt,Be):ue(J)&&s.isNumber(tt)?m(J,tt):x(J)&&ne(J)?y(J,It,Et):x(J)&&s.isNumber(It)?P(J,It):Z(J)?M(er,vr,dr):U(J)?B(kr):G(J)?F(xi,er):Zn&&Ln?` "${Ln}"."${J}"`:pe(J,es,vt)?$(J,es,vt):Se(J)?j(J,vt):` ${J}`},"decorateType"),canHaveIdentity:_(J=>["number"].includes(J),"canHaveIdentity")}}});var ag=Y((wH,og)=>{"use strict";var LH=Ct();og.exports=({_:s,getColumnsList:e,checkAllKeysDeactivated:t,commentIfDeactivated:n,prepareName:o,assignTemplates:a})=>{let{getOptionsString:T}=DS()({_:s,prepareName:o}),u=_(({duplicated:x,external:ne,immutable:U,sharded:G,temporary:Z,temporaryType:pe,blockchain_table_clauses:Se})=>{let te=!s.isEmpty(Se);switch(!0){case Z:return` ${s.toUpper(pe)} TEMPORARY`;case G:return" SHARDED";case x:return" DUPLICATED";case U:return" IMMUTABLE";case te:return`${Se.immutable?" IMMUTABLE":""} BLOCKCHAIN`;default:return""}},"getTableType"),h=_(x=>{let ne=_(G=>G?`${G}
`:"","wrap"),U=[{key:"blockchain_table_clauses",getValue:A(x==null?void 0:x.tableProperties)},{key:"storage",getValue:N(x==null?void 0:x.tableProperties)},{key:"external_table_clause",getValue:R},{key:"partitioning",getValue:g},{key:"selectStatement",getValue:B("AS")},{key:"tableProperties",getValue:G=>G}].map(G=>x[G.key]?ne(G.getValue(x[G.key],x)):"").filter(Boolean).join("");return s.trim(U)?` ${s.trim(U)}`:""},"getTableOptions"),A=_(x=>({blockchain_table_retention_clause:ne,blockchain_row_retention_clause:U,blockchain_hash_and_data_format_clause:G})=>s.includes(x,ne)||s.includes(x,U)||s.includes(x,G)?"":s.trim(` ${ne||""} ${U||""} ${G||""}`),"getBlockChainClause"),N=_(x=>({organization:ne,tablespace:U,logging:G})=>s.includes(x,"TABLESPACE")?"":ne==="external"?"ORGANIZATION EXTERNAL":`ORGANIZATION ${s.toUpper(ne)||"HEAP"}${U?` TABLESPACE ${o(U)}`:""} ${G?"LOGGING":"NOLOGGING"}`,"getStorage"),R=_(x=>{if(!(x!=null&&x.access_driver_type))return"";let{access_driver_type:ne,default_directory:U,access_parameter_type:G,opaque_format_spec:Z,clob_subquery:pe,reject_limit:Se,location:te}=x,we=`(${s.map(te,({location_directory:Be,location_specifier:tt})=>`${Be?`${Be}:`:""}'${tt}'`).join(", ")})`,J=G==="NONE"?"":`ACCESS PARAMETERS ${pe?`USING CLOB ${pe}`:Z}`,Te=`${U&&!s.isEmpty(U)?` DEFAULT DIRECTORY ${U}`:""}`+J+`${te&&!s.isEmpty(te)?` LOCATION ${we}`:""}`;return` (TYPE ${s.toUpper(ne)} ${Te}) REJECT LIMIT ${Se||"UNLIMITED"} `},"getExternalTableClause"),g=_((x,{isActivated:ne})=>{if(x!=null&&x.partitionBy){let U=I(x,ne),G=p(x,ne);return`PARTITION BY ${s.toUpper(s.startsWith(x.partitionBy,"composite")?s.last(x.partitionBy.split(" ")):x.partitionBy)} ${U}${G}`}return""},"getPartitioning"),I=_((x,ne)=>{let U=t(x.partitionKey);return s.isEmpty(x.partitionKey)?"":e(x.partitionKey,U,ne,({name:G})=>o(G))},"getPartitionKeys"),p=_((x,ne)=>{switch(x.partitionBy){case"range":return`${x.interval?`
INTERVAL (${x.interval})`:""}`+P(x.store_in_tablespaces)+m(x.range_partitions,"range_partition_clause");case"list":return`${x.automatic?" AUTOMATIC":""}`+P(x.store_in_tablespaces)+m(x.list_partitions,"list_partition_clause");case"hash":return M(x);case"reference":return`${x.constraint?` (${x.constraint})`:""}`+m(x.reference_partition_descs,"reference_partition_desc");case"system":return x.system_partitioning_quantity?` PARTITIONS ${x.system_partitioning_quantity}`:m(x.system_partition_descs,"system_partition_desc");case"composite range":{let U=y(x,ne);return`${x.interval?` INTERVAL (${x.interval})`:""}`+P(x.store_in_tablespaces)+U+m(x.range_subpartition_descs,"range_subpartition_desc")}case"composite list":{let U=y(x,ne);return P(x.store_in_tablespaces,"AUTOMATIC")+U+m(x.list_subpartition_descs,"list_subpartition_description")}case"composite hash":{let U=y(x,ne),G=M(x);return`${U}${G}`}default:return""}},"getPartitionClause"),m=_((x,ne)=>x&&s.isArray(x)&&!s.isEmpty(x)?`
(
	${(ne?s.map(x,U=>U[ne]):x).join(`,
	`)}
)
`:"","partitionsToString"),y=_(({subpartitionType:x,subpartitionDescription:ne,compositePartitionKey:U},G)=>{if(x){let Z=t(U),pe=ne?`
${ne}`:"";return` SUBPARTITION BY ${s.toUpper(x)} ${e(U,Z,G,({name:Se})=>o(Se))} ${pe}`}return""},"getSubpartition"),P=_((x,ne,U="store_in_tablespace")=>s.isEmpty(x)?"":`${ne?` ${ne}`:""} STORE IN (${s.map(x,G=>G[U]).join(", ")})`,"getTablespaceList"),M=_(({hash_partition_quantity:x,store_in_tablespaces:ne,overflow_store_in_tablespaces:U,individual_hash_partitions:G})=>x?` PARTITIONS ${x}`+P(ne)+P(U,"OVERFLOW","overflow_store_in_tablespace"):m(G,"individual_hash_partition"),"getHashPartition"),B=_(x=>ne=>{if(ne)return`${x} ${ne}`},"getBasicValue");return{getTableOptions:h,getTableType:u,generateConstraintsString:_((x,ne)=>{var pe,Se;let U=n(((x==null?void 0:x.deactivatedItems)||[]).join(`,
	`),{isActivated:!ne,isPartOfLine:!0}),G=(pe=x==null?void 0:x.activatedItems)!=null&&pe.length?`,
	`+x.activatedItems.join(`,
	`):"",Z=(Se=x==null?void 0:x.deactivatedItems)!=null&&Se.length?`
	`+U:"";return G+Z},"generateConstraintsString"),foreignKeysToString:_(x=>{if(Array.isArray(x)){let ne=x.filter(Z=>s.get(Z,"isActivated",!0)).map(Z=>o(s.trim(Z.name))),U=x.filter(Z=>!s.get(Z,"isActivated",!0)).map(Z=>o(s.trim(Z.name))),G=U.length?n(U,{isActivated:!1,isPartOfLine:!0}):"";return ne.join(", ")+G}return x},"foreignKeysToString"),foreignActiveKeysToString:_(x=>x.map(ne=>s.trim(ne.name)).join(", "),"foreignActiveKeysToString"),createKeyConstraint:_((x,ne)=>U=>{let G=t(U.columns),Z=e(U.columns,G,ne,({name:Se})=>o(Se)),pe=T(U).statement;return{statement:a(x.createKeyConstraint,{constraintName:U.constraintName?`CONSTRAINT ${o(U.constraintName)} `:"",keyType:U.keyType,columns:Z,options:pe}),isActivated:!G}},"createKeyConstraint"),customPropertiesForForeignKey:_(x=>({foreignOnDelete:s.get(x,"relationshipOnDelete","")}),"customPropertiesForForeignKey")}}});var cg=Y((YH,_g)=>{"use strict";var UH=Ct();_g.exports=({_:s,assignTemplates:e,templates:t,getNamePrefixedWithSchemaName:n})=>{let o=["OBJECT_UDT","VARRAY","TABLE","COLLECTION_UDT"],a=_((h,A)=>{let N=n(h.name,h.schemaName);switch(h.type){case"OBJECT_UDT":return e(t.createObjectType,{name:N,properties:s.map(h.properties,R=>A(R,t.objectTypeColumnDefinition)).join(`,
	`)});case"VARRAY":case"TABLE":{let R=h.type==="VARRAY"?"(64)":"";return e(t.createCollectionType,{name:N,collectionType:h.type,size:s.isNumber(h.size)?`(${h.size})`:R,datatype:`${h.ofType}${h.nullable?"":" NOT NULL"}`,notPersistable:`${h.notPersistable?" NOT PERSISTABLE":""}`})}default:return""}},"getPlainUdt");return{getUserDefinedType:_((h,A)=>a(h,A),"getUserDefinedType"),isNotPlainType:_(h=>{let A=s.toUpper(h.mode||h.type);return o.includes(A)},"isNotPlainType")}}});var Tg=Y((xH,lg)=>{"use strict";lg.exports=({_:s,prepareName:e})=>{let t=_(({editioning:a,editionable:T})=>`${T?" EDITIONABLE":""}${a?" EDITIONING":""}`,"getViewType"),n=_(a=>a?a.alias?`${e(a.name)} as ${e(a.alias)}`:e(a.name):"","getKeyWithAlias");return{getViewType:t,getViewData:_(a=>Array.isArray(a)?a.reduce((T,u)=>{if(!u.tableName)return T.columns.push(n(u)),T;let h=`${e(u.dbName)}.${e(u.tableName)}`;return T.tables.includes(h)||T.tables.push(h),T.columns.push({statement:`${h}.${n(u)}`,isActivated:u.isActivated}),T},{tables:[],columns:[]}):{tables:[],columns:[]},"getViewData")}}});var Eg=Y((FH,ug)=>{"use strict";var bH=Ct();ug.exports=({_:s,prepareName:e})=>({getIndexType:_(T=>T?` ${s.toUpper(T)}`:"","getIndexType"),getIndexKeys:_(({indxKey:T,column_expression:u})=>{let{escapeSingleQuote:h}=ke()();return u?`
(
	${h(u)}
)
	`:s.isArray(T)&&!s.isEmpty(T)?`
(
	${s.map(T,({name:N,type:R})=>`${e(N)} ${s.toUpper(R)}`).join(`,
	`)}
)
	`:""},"getIndexKeys"),getIndexOptions:_(({indxDescription:T,comments:u,tablespace:h,index_properties:A,index_attributes:N,index_compression:R,logging_clause:g,indxKey:I,column_expression:p})=>{let m=g?` ${s.toUpper(g)}`:"",y=h?` TABLESPACE ${h}`:"",P=R?` ${R}`:"",M=`${m}${y}${P}`;return A?M=` ${A}`:N&&(M=` ${N}`),s.isEmpty(I)&&s.isEmpty(p)?M:s.trim(M)},"getIndexOptions"),getIndexName:_(T=>T?` ${e(T)}`:"","getIndexName")})});var Sg=Y((kH,hg)=>{"use strict";hg.exports=({prepareName:s,templates:e,assignTemplates:t,getNamePrefixedWithSchemaName:n})=>{let o=_(T=>{let u=n(T.synonymName,T.schemaName);return t(e.createSynonym,{name:T.synonymPublic?s(T.synonymName):u,orReplace:T.synonymOrReplace?" OR REPLACE":"",editionable:T.synonymEditionable?" "+T.synonymEditionable:"",public:T.synonymPublic?" PUBLIC":"",objectName:T.synonymEntityName})},"generateSynonymCreateStatement");return{generateSynonymStatements:_((T,u,h)=>T!=null&&T.length?`
`+T.map(A=>o({...A,synonymEntityName:u,schemaName:h})).join(`
`):"","generateSynonymStatements")}}});var fg=Y((KH,Ng)=>{"use strict";var GH=Ct(),{Sequence:HH}=B_();Ng.exports=({_:s,templates:e,assignTemplates:t,getNamePrefixedWithSchemaName:n,wrapIfNotExists:o})=>{let a=_(({schemaName:B,sequences:F,usingTryCatchWrapper:$})=>s.map(F,j=>T({schemaName:B,sequence:j,usingTryCatchWrapper:$})).join(`

`),"getSequencesScript"),T=_(({schemaName:B,sequence:F,usingTryCatchWrapper:$})=>{let j=M({schemaName:B,sequence:F}),se=n(F.sequenceName,j),ue=$?"":p({sequence:F}),x=A({sequence:F,schemaName:B}),ne=y({sequence:F}),U=t(e.createSequence,{name:se,ifNotExists:ue,sharing:ne,options:x});return $?o(U,F.ifNotExist):U+";"},"createSequenceScript"),u=_(({schemaName:B,sequence:F,oldSequence:$,usingTryCatchWrapper:j})=>{let se=$.sequenceName||F.sequenceName,ue=M({schemaName:B,sequence:F}),x=n(se),ne=n(se,ue),U=P({sequence:F,oldSequence:$}),G=A({schemaName:B,sequence:U}),Z=U.sequenceName?n(U.sequenceName):"",pe=m({usingTryCatchWrapper:j});if(U.hasOwnProperty("sharing")){let we=h({schemaName:B,sequence:$,usingTryCatchWrapper:j}),J=T({schemaName:B,sequence:F,usingTryCatchWrapper:j});return we+`
`+J+`
`}return[{key:"options",value:G,name:ne,template:e.alterSequence},{key:"newName",value:Z,name:x,template:e.renameSequence}].filter(we=>we.value).map(we=>t(we.template,{[we.key]:we.value,name:we.name,ifExists:pe})).join(`
`)},"alterSequenceScript"),h=_(({schemaName:B,sequence:F,usingTryCatchWrapper:$})=>{let j=M({schemaName:B,sequence:F}),se=n(F.sequenceName,j),ue=m({usingTryCatchWrapper:$});return t(e.dropSequence,{name:se,ifExists:ue})},"dropSequenceScript"),A=_(({schemaName:B,sequence:F})=>{let j=[{getOption:N,key:"increment",clause:"INCREMENT BY"},{getOption:N,key:"start",clause:"START WITH"},{getOption:N,key:"restart",clause:"RESTART WITH"},{getOption:N,key:"minValue",clause:"MINVALUE"},{getOption:N,key:"maxValue",clause:"MAXVALUE"},{getOption:R,key:"cache",extendedKey:"cacheValue"},{getOption:R,key:"cycle",extendedKey:""},{getOption:R,key:"order",extendedKey:""},{getOption:R,key:"keep",extendedKey:""},{getOption:R,key:"scale",extendedKey:"scaleExtend"},{getOption:R,key:"shard",extendedKey:"shardExtend"},{getOption:R,key:"type",extendedKey:""}].map(se=>{let ue=se.getOption({sequence:F,schemaName:B,config:se});return g({option:ue})}).filter(Boolean).join("");return j&&I({options:j})},"getSequenceOptions"),N=_(({sequence:B,config:F})=>{let $=Number(B[F.key]);return isNaN($)?"":`${F.clause} ${$}`},"getNumberOption"),R=_(({sequence:B,config:F})=>{let $=s.toUpper(B[F.key]);return $?$.startsWith("NO")||!B[F.extendedKey]?$:$+" "+R({sequence:B,config:{key:F.extendedKey}}):""},"getLiteralOption"),g=_(({option:B})=>B?`	${B}
`:"","wrapOption"),I=_(({options:B})=>`
`+B.replace(/\n$/,""),"wrapOptionsBlock"),p=_(({sequence:B})=>B.ifNotExist?" IF NOT EXISTS":"","getIfNotExists"),m=_(({usingTryCatchWrapper:B})=>B?"":" IF EXISTS","getIfExists"),y=_(({sequence:B})=>B.sharing?" SHARING="+s.toUpper(B.sharing):"","getSharing"),P=_(({sequence:B,oldSequence:F})=>{let $=s.omitBy(B,(j,se)=>s.isEqual(j,F[se]));return B.minValue>F.minValue?{...$,restart:B.start}:$},"getModifiedSequence"),M=_(({schemaName:B,sequence:F})=>F.type==="session"?"":B,"getSequenceSchemaName");return{getSequencesScript:a,createSequenceScript:T,alterSequenceScript:u,dropSequenceScript:h}}});var fn=Y((XH,dg)=>{"use strict";var PF=bD(),Ag=vD(),ut=NS(),{DualityViewDdlCreatorFactory:RF}=QD(),{DualityViewSyntaxType:IF}=fS(),{DbVersion:DF}=IS(),{AlterIndexDto:$H}=V_(),{Sequence:zH}=B_(),He=Ct(),zs=_(s=>Number.parseInt(s,10)<DF.IF_NOT_EXISTS_SINCE,"shouldUseTryCatchIfNotExistsWrapper");dg.exports=(s,e,t)=>{var es,vt;let n=_(V=>He.isArray(V)?V:[V],"toArray"),{tab:o,commentIfDeactivated:a,checkAllKeysDeactivated:T,divideIntoActivatedAndDeactivated:u,hasType:h,wrap:A,clean:N,getNamePrefixedWithSchemaNameForScriptFormat:R,wrapComment:g,getColumnsList:I,prepareNameForScriptFormat:p}=ke()(He),m=p((es=e==null?void 0:e.targetScriptOptions)==null?void 0:es.keyword),y=R((vt=e==null?void 0:e.targetScriptOptions)==null?void 0:vt.keyword),{assignTemplates:P}=eg()({_:He}),M=rg()(He,N),{getColumnComments:B,getColumnConstraints:F,replaceTypeByVersion:$,getColumnDefault:j,getColumnEncrypt:se,decorateType:ue,canHaveIdentity:x}=ig()({_:He,wrap:A,assignTemplates:P,templates:ut,commentIfDeactivated:a,wrapComment:g,prepareName:m}),{getTableType:ne,getTableOptions:U,generateConstraintsString:G,foreignKeysToString:Z,foreignActiveKeysToString:pe,createKeyConstraint:Se,customPropertiesForForeignKey:te}=ag()({_:He,checkAllKeysDeactivated:T,getColumnsList:I,commentIfDeactivated:a,prepareName:m,assignTemplates:P}),{getUserDefinedType:we,isNotPlainType:J}=cg()({_:He,commentIfDeactivated:a,assignTemplates:P,templates:ut,getNamePrefixedWithSchemaName:y}),{getViewType:Te,getViewData:Be}=Tg()({_:He,prepareName:m}),{getIndexType:tt,getIndexKeys:It,getIndexOptions:Et,getIndexName:er}=Eg()({_:He,prepareName:m}),vr=_((V,Q,ae=955)=>{if(Q){let de=o(o(V)),Ke=He.trim(de).replace(/;$/,"");return P(ut.ifNotExists,{statement:Ke,errorCode:ae})}return V+";"},"wrapIfNotExists"),{generateSynonymStatements:dr}=Sg()({prepareName:m,templates:ut,assignTemplates:P,getNamePrefixedWithSchemaName:y}),{getSequencesScript:kr,createSequenceScript:xi,dropSequenceScript:Zn,alterSequenceScript:Ln}=fg()({_:He,templates:ut,assignTemplates:P,getNamePrefixedWithSchemaName:y,wrapIfNotExists:vr});return{getDefaultType(V){return PF[V]},getTypesDescriptors(){return Ag},hasType(V){return h(Ag,V)},hydrateSchema(V,Q){let ae=He.get(Q,"modelData.0.dbVersion");return{schemaName:V.name,ifNotExist:V.ifNotExist,dbVersion:ae,synonyms:Q.synonyms,sequences:Q.sequences}},createSchema({schemaName:V,ifNotExist:Q,dbVersion:ae,sequences:de}){let Ze=zs(ae),Ke=P(ut.createSchema,{schemaName:m(V),ifNotExists:!Ze&&Q?" IF NOT EXISTS":""}),ve=kr({schemaName:V,sequences:de,usingTryCatchWrapper:Ze}),rt=ve?`

`+ve:"";return Ze?vr(Ke,Q,1920)+rt:Ke+";"+rt},hydrateColumn({columnDefinition:V,jsonSchema:Q,schemaData:ae,definitionJsonSchema:de={}}){var rt;let Ze=ae.dbVersion,Ke=!!Q.$ref,ve=Ke?V.type:He.toUpper(Q.mode||Q.type);return{name:V.name,type:ve,ofType:Q.ofType,notPersistable:Q.notPersistable,size:Q.size,primaryKey:M.isInlinePrimaryKey(Q),primaryKeyOptions:Q.primaryKeyOptions,unique:M.isInlineUnique(Q),uniqueKeyOptions:Q.uniqueKeyOptions,nullable:V.nullable,default:V.default,comment:Q.refDescription||Q.description||de.description,isActivated:V.isActivated,scale:V.scale,precision:V.precision,length:V.length,schemaName:ae.schemaName,checkConstraints:Q.checkConstraints,dbVersion:Ze,fractSecPrecision:Q.fractSecPrecision,withTimeZone:Q.withTimeZone,localTimeZone:Q.localTimeZone,yearPrecision:Q.yearPrecision,dayPrecision:Q.dayPrecision,lengthSemantics:Q.lengthSemantics,encryption:Q.encryption,synonyms:((rt=ae==null?void 0:ae.synonyms)==null?void 0:rt.filter(Yt=>Yt.synonymEntityId===Q.GUID))||[],isUDTRef:Ke,dimension:Q.dimension,subtype:Q.subtype,...x(Q.mode)&&{identity:Q.identity}}},hydrateJsonSchemaColumn(V,Q){return!V.$ref||He.isEmpty(Q)||J(Q)?V:(V=He.omit(V,"$ref"),{...Q,...V})},convertColumnDefinition(V,Q=ut.columnDefinition){let ae=$(V.type,V.dbVersion);return a(P(Q,{name:m(V.name),type:ue(ae,V),default:j(V),encrypt:se(V),constraints:F(V)}),{isActivated:V.isActivated})},hydrateCheckConstraint(V){return{name:V.chkConstrName,expression:V.constrExpression,comments:V.constrComments,description:V.constrDescription}},createCheckConstraint({name:V,expression:Q,comments:ae,description:de}){return P(ut.checkConstraint,{name:V?`CONSTRAINT ${m(V)} `:"",expression:He.trim(Q).replace(/^\(([\s\S]*)\)$/,"$1")})},createForeignKeyConstraint({name:V,foreignKey:Q,primaryTable:ae,primaryKey:de,primaryTableActivated:Ze,foreignTableActivated:Ke,foreignSchemaName:ve,primarySchemaName:rt,customProperties:Yt},qr,pr){let tr=T(de),kt=T(Q),rr=!tr&&!kt&&Ze&&Ke,Gr=n(Q),sn=n(de),{foreignOnDelete:on}=te(Yt),An=P(ut.createForeignKeyConstraint,{primaryTable:y(ae,rt||pr.schemaName),name:V?`CONSTRAINT ${m(V)}`:"",foreignKey:rr?Z(Gr):pe(Gr),primaryKey:rr?Z(sn):pe(sn),onDelete:on?` ON DELETE ${on}`:""});return{statement:He.trim(An),isActivated:rr}},createForeignKey({name:V,foreignTable:Q,foreignKey:ae,primaryTable:de,primaryKey:Ze,primaryTableActivated:Ke,foreignTableActivated:ve,foreignSchemaName:rt,primarySchemaName:Yt,customProperties:qr},pr,tr){let kt=T(Ze),rr=T(ae),Gr=!kt&&!rr&&Ke&&ve,sn=n(ae),on=n(Ze),{foreignOnDelete:An}=te(qr),ts=P(ut.createForeignKey,{primaryTable:y(de,Yt||tr.schemaName),foreignTable:y(Q,rt||tr.schemaName),name:V?m(V):"",foreignKey:Gr?Z(sn):pe(sn),primaryKey:Gr?Z(on):pe(on),onDelete:An?` ON DELETE ${An}`:""});return{statement:He.trim(ts)+`
`,isActivated:Gr}},dropForeignKey(V,Q){let ae={tableName:V,fkConstraintName:Q};return P(ut.dropForeignKey,ae)},hydrateTable({tableData:V,entityData:Q,jsonSchema:ae}){var ve,rt;let de=Q[0],Ze=He.first(de.partitioning)||{},Ke=M.getKeys(Ze.compositePartitionKey,ae);return{...V,keyConstraints:M.getTableKeyConstraints(ae),selectStatement:He.trim(de.selectStatement),partitioning:He.assign({},Ze,{compositePartitionKey:Ke}),...He.pick(de,"blockchain_table_clauses","duplicated","external","external_table_clause","immutable","sharded","storage","temporary","temporaryType","description","ifNotExist","tableProperties"),synonyms:((rt=(ve=V==null?void 0:V.schemaData)==null?void 0:ve.synonyms)==null?void 0:rt.filter(Yt=>Yt.synonymEntityId===ae.GUID))||[]}},createTable({blockchain_table_clauses:V,checkConstraints:Q,columnDefinitions:ae,columns:de,duplicated:Ze,external:Ke,external_table_clause:ve,foreignKeyConstraints:rt,keyConstraints:Yt,immutable:qr,name:pr,partitioning:tr,schemaData:kt,selectStatement:rr,sharded:Gr,storage:sn,temporary:on,temporaryType:An,description:ts,ifNotExist:Qs,tableProperties:Vi,synonyms:bi},rs){let Js=y(pr,kt.schemaName),wo=ts?P(ut.comment,{object:"TABLE",objectName:Js,comment:g(ts)}):"",G_=u(Yt.map(Se(ut,rs)),Os=>Os.statement),Bo=G(G_,rs),Uo=u(rt,Os=>Os.statement),H_=G(Uo,rs),Yo=B(Js,ae),Mo=P(ut.createTableProps,{columnDefinitions:He.join(de,`,
	`),foreignKeyConstraints:H_,keyConstraints:Bo,checkConstraints:He.isEmpty(Q)?"":`,
	`+He.join(Q,`,
	`)}),K_=dr(bi,Js,kt.schemaName),xo=wo||Yo?`
`+wo+Yo:"",W_=kt.dbVersion||"",Vo=zs(W_),js=P(ut.createTable,{name:Js,ifNotExists:!Vo&&Qs?" IF NOT EXISTS":"",tableProps:Mo?`
(
	${Mo}
)`:"",tableType:ne({duplicated:Ze,external:Ke,immutable:qr,sharded:Gr,temporary:on,temporaryType:An,blockchain_table_clauses:V}),options:U({blockchain_table_clauses:V,external_table_clause:ve,storage:sn,partitioning:tr,selectStatement:rr,tableProperties:Vi})});return Vo?js=vr(js,Qs):js+=";",a(js+`${xo}
`+K_,{isActivated:rs})},hydrateIndex(V,Q,ae){return{...V,schemaName:ae.schemaName}},createIndex(V,Q,ae,de=!0){let Ze=er(Q.indxName),Ke=tt(Q.indxType),ve=It(Q),rt=Et(Q),Yt=e.dbVersion||"",qr=zs(Yt),pr=Q.ifNotExist&&!qr,tr=P(ut.createIndex,{indexType:Ke,ifNotExists:pr?" IF NOT EXISTS":"",name:Ze,keys:ve,options:rt,tableName:y(V,Q.schemaName)});return Q.ifNotExist&&qr&&(tr=vr(tr,!0)),qr?a(tr,{isActivated:Q.isActivated}):a(tr,{isActivated:Q.isActivated})},dropIndex({name:V}){return P(ut.dropIndex,{name:V})},alterIndexRename({oldName:V,newName:Q}){return P(ut.alterIndexRename,{oldName:V,newName:Q})},alterIndexRebuild({name:V,indexData:Q}){let ae=Et(Q);return P(ut.alterIndexRebuild,{name:V,options:ae})},hydrateViewColumn(V){return{name:V.name,tableName:V.entityName,alias:V.alias,isActivated:V.isActivated,dbName:V.dbName}},hydrateView({viewData:V,entityData:Q,jsonSchema:ae}){var Ze,Ke;let de=Q[0];return{name:V.name,keys:V.keys,orReplace:de.or_replace,editionable:de.editionable,editioning:de.editioning,force:de.force,selectStatement:de.selectStatement,tableName:V.tableName,schemaName:V.schemaData.schemaName,description:de.description,ifNotExist:de.ifNotExist,materialized:de.materialized,sharing:de.sharing,duality:de.duality,rootTableAlias:de.rootTableAlias,tableTagsClause:de.tableTagsClause,viewProperties:de.materialized?de.mviewProperties:de.viewProperties,synonyms:((Ke=(Ze=V.schemaData)==null?void 0:Ze.synonyms)==null?void 0:Ke.filter(ve=>ve.synonymEntityId===ae.GUID))||[],modelInfo:{dbVersion:He.get(V,"schemaData.dbVersion")}}},hydrateViewIndex(V,Q,ae){var de;return{...V,schemaName:Q.schemaName,materialized:(de=He.first(ae))==null?void 0:de.materialized}},createViewIndex(V,Q,ae,de){let Ze=er(Q.indxName),Ke=tt(Q.indxType),ve=It(Q),rt=Et(Q,de);if(Q.materialized)return a(P(ut.createIndex,{indexType:Ke,name:Ze,keys:ve,options:rt,tableName:y(V,Q.schemaName)}),{isActivated:Q.isActivated})},createView(V,Q,ae){let de=y(V.name,V.schemaName),{columns:Ze,tables:Ke}=Be(V.keys),ve=Ze.map(rr=>rr.statement).join(`,
		`),rt=V.description?`
`+P(ut.comment,{object:"TABLE",objectName:de,comment:g(V.description)})+`
`:`
`,Yt=He.trim(V.selectStatement)?He.trim(o(V.selectStatement)):P(ut.viewSelectStatement,{tableName:Ke.join(", "),keys:ve}),qr=dr(V.synonyms,de,V.schemaName),pr=He.get(V,"modelInfo.dbVersion",""),tr=zs(pr),kt=P(ut.createView,{name:de,ifNotExists:!tr&&V.ifNotExist?" IF NOT EXISTS":"",orReplace:V.orReplace&&!V.materialized?" OR REPLACE":"",force:V.force&&!V.materialized?" FORCE":"",materialized:V.materialized?" MATERIALIZED":"",viewType:V.materialized?"":Te(V),viewProperties:V.viewProperties?` 
`+o(V.viewProperties):"",sharing:V.sharing&&!V.materialized?` SHARING=${V.sharing}`:"",selectStatement:Yt});return tr?kt=vr(kt,V.ifNotExist):kt+=";",a(kt+rt+qr,{isActivated:ae})},createDualityView({jsonSchema:V,view:Q,relatedSchemas:ae}){return RF.getCreatorInstance(IF.SQL,{ddlTemplates:ut,assignTemplates:P,lodash:He,prepareName:m,getNamePrefixedWithSchemaName:y}).convertDualityViewToDdl({view:Q,jsonSchema:V,relatedSchemas:ae})},createUdt(V){let Q=dr(V.synonyms,y(V.name,V.schemaName),V.schemaName);return a(we(V,this.convertColumnDefinition)+Q,{isActivated:V.isActivated})},commentIfDeactivated(V,Q,ae){return V},renameColumn(V,Q,ae){return P(ut.renameColumn,{tableName:V,oldColumnName:Q,newColumnName:ae})},createSchemaSequence({schemaName:V,sequence:Q}){let ae=zs(e==null?void 0:e.dbVersion);return xi({schemaName:V,sequence:Q,usingTryCatchWrapper:ae})},dropSchemaSequence({schemaName:V,sequence:Q}){let ae=zs(e==null?void 0:e.dbVersion);return Zn({schemaName:V,sequence:Q,usingTryCatchWrapper:ae})},alterSchemaSequence({schemaName:V,sequence:Q,oldSequence:ae}){let de=zs(e==null?void 0:e.dbVersion);return Ln({schemaName:V,sequence:Q,oldSequence:ae,usingTryCatchWrapper:de})}}}});var Pg=Y((JH,mg)=>{"use strict";var{AlterScriptDto:b_}=nn(),{getUpdateTypesScriptDtos:gF}=gD(),{getRenameColumnScriptDtos:CF}=OD(),{getModifyIndexesScriptDtos:OF,getAddedIndexesScriptDtos:yF}=MD(),ur=Ct(),LF=_(({app:s,dbVersion:e,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o,scriptFormat:a})=>T=>{let{getEntityName:u}=ke()(ur),{createColumnDefinitionBySchema:h}=yo()(s),A=fn()(null,{dbVersion:e,targetScriptOptions:{keyword:a}},s),{getDefinitionByReference:N}=s.require("@hackolade/ddl-fe-utils"),g={schemaName:T.compMod.keyspaceName,dbVersion:e},I={...T,...ur.omit(T==null?void 0:T.role,"properties")||{}},p=ur.toPairs(I.properties).map(([F,$])=>{let j=N({propertySchema:$,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o});return h({name:F,jsonSchema:$,parentJsonSchema:I,ddlProvider:A,schemaData:g,definitionJsonSchema:j})}),m=(I.chkConstr||[]).map(F=>A.createCheckConstraint(A.hydrateCheckConstraint(F))),y={name:u(I),columns:p.map(F=>A.convertColumnDefinition(F)),checkConstraints:m,foreignKeyConstraints:[],schemaData:g,columnDefinitions:p},P=A.hydrateTable({tableData:y,entityData:[I],jsonSchema:I}),M=pg({_:ur,ddlProvider:A,collection:T,dbVersion:e}).flatMap(({scripts:F})=>F.map(({script:$})=>$)),B=A.createTable(P,I.isActivated);return b_.getInstance([B,...M],!0,!1)},"getAddCollectionScriptDto"),wF=_((s,e)=>t=>{let{getEntityName:n,getNamePrefixedWithSchemaNameForScriptFormat:o}=ke()(ur),a={...t,...ur.omit(t==null?void 0:t.role,"properties")||{}},T=n(a),u=t.compMod.keyspaceName,A=`DROP TABLE ${o(e)(T,u)};`;return b_.getInstance([A],!0,!0)},"getDeleteCollectionScriptDto"),BF=_(({app:s,dbVersion:e,scriptFormat:t})=>n=>{let o=fn()(null,{dbVersion:e,targetScriptOptions:{keyword:t}},s);return[...OF({_:ur,ddlProvider:o,scriptFormat:t})({collection:n})].filter(Boolean)},"getModifyCollectionScriptDtos"),UF=_(({app:s,dbVersion:e,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o,scriptFormat:a})=>T=>{var B;let{getEntityName:u,getNamePrefixedWithSchemaNameForScriptFormat:h}=ke()(ur),{createColumnDefinitionBySchema:A}=yo()(s),N=fn()(null,{dbVersion:e,targetScriptOptions:{keyword:a}},s),{getDefinitionByReference:R}=s.require("@hackolade/ddl-fe-utils"),g={...T,...ur.omit(T==null?void 0:T.role,"properties")||{}},I=u(g),p=(B=g.compMod)==null?void 0:B.keyspaceName,m=h(a)(I,p),y={schemaName:p,dbVersion:e},P=ur.toPairs(T.properties).filter(([F,$])=>!$.compMod).map(([F,$])=>{let j=R({propertySchema:$,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o});return A({name:F,jsonSchema:$,parentJsonSchema:g,ddlProvider:N,schemaData:y,definitionJsonSchema:j})}).map(F=>N.convertColumnDefinition(F)).map(F=>`ALTER TABLE ${m} ADD (${F});`).map(F=>b_.getInstance([F],!0,!1)).filter(Boolean),M=pg({_:ur,ddlProvider:N,collection:T});return P.concat(M).filter(Boolean)},"getAddColumnScriptDtos"),pg=_(({_:s,ddlProvider:e,collection:t})=>{var u,h;let n=((u=t==null?void 0:t.role)==null?void 0:u.Indxs)||[],o={...t==null?void 0:t.properties,...(h=t==null?void 0:t.role)==null?void 0:h.properties},a=Object.values(o).map(({GUID:A})=>A);return n.length===0||a.length===0?[]:n.some(({indxKey:A})=>A.find(({keyId:N})=>a.includes(N)))?yF({_:s,ddlProvider:e})({collection:t}):[]},"getNewlyCreatedIndexesScripts"),YF=_((s,e)=>t=>{var N;let{getEntityName:n,getNamePrefixedWithSchemaNameForScriptFormat:o,prepareNameForScriptFormat:a}=ke()(ur),T={...t,...ur.omit(t==null?void 0:t.role,"properties")||{}},u=n(T),h=(N=T.compMod)==null?void 0:N.keyspaceName,A=o(e)(u,h);return ur.toPairs(t.properties).filter(([R,g])=>!g.compMod).map(([R])=>`ALTER TABLE ${A} DROP COLUMN ${a(e)(R)};`).map(R=>b_.getInstance([R],!0,!0)).filter(Boolean)},"getDeleteColumnScriptDtos"),MF=_((s,e,t)=>n=>{let o=fn()(null,{dbVersion:e,targetScriptOptions:{keyword:t}},s),a=CF(ur,o,t)(n),T=gF(ur,o,t)(n);return[...a,...T].filter(Boolean)},"getModifyColumnScriptDtos");mg.exports={getAddCollectionScriptDto:LF,getDeleteCollectionScriptDto:wF,getModifyCollectionScriptDtos:BF,getAddColumnScriptDtos:UF,getDeleteColumnScriptDtos:YF,getModifyColumnScriptDtos:MF}});var Dg=Y((ZH,Ig)=>{"use strict";var{checkFieldPropertiesChanged:Rg}=ke()(),xF=NS(),{AlterScriptDto:Xs}=nn(),yn=Ct(),VF=_(({app:s,dbVersion:e,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o,scriptFormat:a})=>T=>{let{createColumnDefinitionBySchema:u}=yo()(s),h=fn()(null,{dbVersion:e,targetScriptOptions:{keyword:a}},s),{getDefinitionByReference:A}=s.require("@hackolade/ddl-fe-utils"),N={dbVersion:e},R=yn.toPairs(T.properties||{}).map(([m,y])=>{let P=A({propertySchema:y,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o});return u({name:m,jsonSchema:y,parentJsonSchema:T,ddlProvider:h,schemaData:N,definitionJsonSchema:P})}),I={...u({name:T.code||T.name,jsonSchema:T,parentJsonSchema:{required:[]},definitionJsonSchema:{},ddlProvider:h,schemaData:N}),properties:R},p=h.createUdt(I);return Xs.getInstance([p],!0,!1)},"getCreateUdtScriptDto"),bF=_((s,e)=>t=>{let{prepareNameForScriptFormat:n}=ke()(yn),a=`DROP TYPE ${n(e)(t.code||t.name)};`;return Xs.getInstance([a],!0,!0)},"getDeleteUdtScriptDto"),FF=_(({app:s,dbVersion:e,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o,scriptFormat:a})=>T=>{let{createColumnDefinitionBySchema:u}=yo()(s),{prepareNameForScriptFormat:h}=ke()(yn),A=fn()(null,{dbVersion:e,targetScriptOptions:{keyword:a}},s),{getDefinitionByReference:N}=s.require("@hackolade/ddl-fe-utils"),R=h(a)(T.code||T.name),g={dbVersion:e};return yn.toPairs(T.properties).filter(([I,p])=>!p.compMod).map(([I,p])=>{let m=N({propertySchema:p,modelDefinitions:t,internalDefinitions:n,externalDefinitions:o});return u({name:I,jsonSchema:p,parentJsonSchema:{required:[]},ddlProvider:A,schemaData:g,definitionJsonSchema:m})}).map(I=>A.convertColumnDefinition(I,xF.objectTypeColumnDefinition)).map(I=>`ALTER TYPE ${R} ADD ATTRIBUTE ${I};`).map(I=>Xs.getInstance([I],!0,!1))},"getAddColumnToTypeScriptDtos"),vF=_((s,e)=>t=>{let{prepareNameForScriptFormat:n}=ke()(yn),o=n(e)(t.code||t.name);return yn.toPairs(t.properties).filter(([a,T])=>!T.compMod).map(([a])=>`ALTER TYPE ${o} DROP ATTRIBUTE ${n(e)(a)};`).map(a=>Xs.getInstance([a],!0,!0))},"getDeleteColumnFromTypeScriptDtos"),kF=_((s,e)=>t=>{let{prepareNameForScriptFormat:n}=ke()(yn),o=n(e)(t.code||t.name),a=yn.values(t.properties).filter(u=>Rg(u.compMod,["name"])).flatMap(u=>{let h=n(e)(u.compMod.oldField.name),A=`ALTER TYPE ${o} DROP ATTRIBUTE ${h};`,N=n(e)(u.compMod.newField.name),R=`ALTER TYPE ${o} ADD ATTRIBUTE ${N};`;return[Xs.getInstance([A],!0,!0),Xs.getInstance([R],!0,!1)]}),T=yn.toPairs(t.properties).filter(([u,h])=>Rg(h.compMod,["type","mode"])).map(([u,h])=>{let A=n(e)(u),N=yn.toUpper(h.compMod.newField.mode||h.compMod.newField.type),R=`ALTER TYPE ${o} MODIFY ATTRIBUTE ${A} ${N};`;return Xs.getInstance([R],!0,!1)});return[...a,...T]},"getModifyColumnOfTypeScriptDtos");Ig.exports={getCreateUdtScriptDto:VF,getDeleteUdtScriptDto:bF,getAddColumnToTypeScriptDtos:FF,getDeleteColumnFromTypeScriptDtos:vF,getModifyColumnOfTypeScriptDtos:kF}});var Og=Y((tK,Cg)=>{"use strict";var{DualityViewPropertiesType:gg}=AS(),qF=_(s=>e=>{let{getEntityName:t,getBucketName:n}=ke()(s),o=s.get(e,"role",{}),a=s.get(o,"compMod.bucketProperties",{}),T=s.get(o,"compMod.collectionData.entityData[0]",{}),u=t(T),h=n(a);return{code:o.code,tableName:u,name:o.name,tableTagsClause:o.tableTagsClause,schemaName:h,rootTableAlias:o.rootTableAlias,orReplace:o.or_replace}},"mapToFeView"),GF=_(s=>(e,t,n)=>{let o=n==null?void 0:n[t.refId],a=(o==null?void 0:o.definition)||{},T=a.code||a.name||"";return{code:e,ref:t.ref,refId:t.refId,refIdPath:[t.refId,t.ref],refType:gg.COLLECTION_REFERENCE,columnTagsClause:t.columnTagsClause,referencedColumnName:T}},"mapRegularField"),HF=_((s,e,t)=>{if(!t[e.GUID]){let n=s||e.title;throw n?n=`<u>${n}</u>`:n="a",new Error(`Could not find referenced collection for ${n} subquery. Check if all the subqueries have the "child table" property set`)}},"assertSubqueryIsValid"),KF=_(s=>(e,t,n)=>{HF(e,t,n);let o={code:e,type:t.type,name:t.title,subtype:t.subtype,sqlJsonFunction:t.sqlJsonFunction,whereClause:t.whereClause,joinedCollectionRefIdPath:[t.GUID],childTableAlias:t.childTableAlias,tableTagsClause:t.tableTagsClause,items:void 0,properties:void 0,unnestSubquery:void 0};if(t.subtype==="array"){let a=s.get(t,"items.properties",{});o.items={properties:gS(s)(a,n)}}else if(t.subtype==="object"){o.unnestSubquery=t.unnestSubquery;let a=s.get(t,"properties",{});o.properties=gS(s)(a,n)}return o},"mapSubquery"),gS=_(s=>(e,t)=>{let o=s.toPairs(e).map(([a,T])=>{if(T.type===gg.JOIN_SUBQUERY_TYPE){let h=KF(s)(a,T,t);return[a,h]}let u=GF(s)(a,T,t);return[a,u]});return s.fromPairs(o)},"recursivelyParseProperties"),WF=_(s=>e=>{let t=s.get(e,"role.properties",{}),n=s.get(e,"role.compMod.collectionData.collectionRefsDefinitionsMap",{});return gS(s)(t,n)},"parseProperties"),$F=_(s=>e=>{let{getEntityName:t}=ke()(s),n=s.get(e,"role",{}),o=s.get(n,"compMod.collectionData.entityData[0]",{}),a=t(o),T=WF(s)(e);return{rootTableAlias:n.rootTableAlias,tableName:a,properties:T,duality:n.duality,editionable:n.editionable,force:n.force,viewOn:n.viewOn}},"mapToFeJsonSchema"),zF=_(s=>e=>{let t=s.get(e,"role.compMod.collectionData.collectionRefsDefinitionsMap",{}),o=s.toPairs(t).map(([a,T])=>{let u=s.get(T,"bucket[0].name",""),h=s.get(T,"collection[0]",""),A=T.definition||{},R={properties:{[A.code||A.name]:{GUID:T.definitionId}},bucketName:u,code:h.code,collectionName:h.collectionName};return[a,R]});return s.fromPairs(o)},"mapToFeRelatedSchemas"),XF=_(s=>e=>{let t=qF(s)(e),n=$F(s)(e),o=zF(s)(e);return{view:t,jsonSchema:n,relatedSchemas:o}},"mapDeltaDualityViewToFeDualityView");Cg.exports={mapDeltaDualityViewToFeDualityView:XF}});var wg=Y((nK,Lg)=>{"use strict";var{AlterScriptDto:CS}=nn(),{mapDeltaDualityViewToFeDualityView:QF}=Og(),yg=Ct(),JF=_((s,e)=>t=>{let n=fn()(null,{targetScriptOptions:{keyword:e}},s),o={name:t.code||t.name,keys:[],schemaData:{schemaName:""}},a=n.hydrateView({viewData:o,entityData:[t]}),T=n.createView(a,{},t.isActivated);return CS.getInstance([T],!0,!1)},"getAddRegularViewScriptDto"),jF=_((s,e)=>t=>{let n=fn()(null,{targetScriptOptions:{keyword:e}},s),o=QF(yg)(t),a=n.createDualityView(o);return CS.getInstance([a],!0,!1)},"getDualityViewScriptDto"),ZF=_((s,e)=>t=>{if(t.duality)return jF(s,e)(t);if(t.selectStatement)return JF(s,e)(t)},"getAddViewScriptDto"),e2=_((s,e)=>t=>{let{prepareNameForScriptFormat:n}=ke()(yg),a=`DROP VIEW ${n(e)(t.code||t.name)};`;return CS.getInstance([a],!0,!0)},"getDeleteViewScriptDto");Lg.exports={getAddViewScriptDto:ZF,getDeleteViewScriptDto:e2}});var Ug=Y((iK,Bg)=>{"use strict";var MS=class MS{isActivated;name};_(MS,"AlterRelationshipFKField");var OS=MS,xS=class xS{bucket;collection};_(xS,"AlterRelationshipParentDto");var yS=xS,VS=class VS{bucket;collection};_(VS,"AlterRelationshipChildDto");var LS=VS,bS=class bS{relationshipOnDelete;relationshipOnUpdate;relationshipMatch};_(bS,"AlterRelationshipCustomProperties");var wS=bS,FS=class FS{created;deleted;modified;parent;child;name;description;customProperties;isActivated};_(FS,"AlterRelationshipRoleCompModDto");var BS=FS,vS=class vS{id;name;relationshipType;parentField;parentCardinality;childField;isActivated;childCardinality;parentCollection;childCollection;hackoladeStyles;compMod;roleType};_(vS,"AlterRelationshipRoleDto");var US=vS,kS=class kS{type;isActivated;unique;subtype;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;triggerUpdateColumns;role;GUID};_(kS,"AlterRelationshipDto");var YS=kS;Bg.exports={AlterRelationshipRoleCompModDto:BS,AlterRelationshipRoleDto:US,AlterRelationshipDto:YS,AlterRelationshipFKField:OS,AlterRelationshipParentDto:yS,AlterRelationshipChildDto:LS,AlterRelationshipCustomProperties:wS}});var Fg=Y((_K,bg)=>{"use strict";var{AlterScriptDto:qS}=nn(),{AlterRelationshipDto:aK}=Ug(),F_=_(s=>s.role.name,"getRelationshipName"),t2=_((s,e)=>t=>{let{getNamePrefixedWithSchemaNameForScriptFormat:n}=ke()(s),o=t.role.compMod,a=o.child.bucket.name,T=o.child.collection.name;return n(e)(T,a)},"getFullChildTableName"),Yg=_((s,e)=>t=>{var a,T;let n=t.role.compMod,o=((a=n.name)==null?void 0:a.new)||F_(t)||"";return s.createForeignKey({name:o,foreignKey:n.child.collection.fkFields,primaryKey:n.parent.collection.fkFields,customProperties:(T=n.customProperties)==null?void 0:T.new,foreignTable:n.child.collection.name,foreignSchemaName:n.child.bucket.name,foreignTableActivated:n.child.collection.isActivated,primaryTable:n.parent.collection.name,primarySchemaName:n.parent.bucket.name,primaryTableActivated:n.parent.collection.isActivated})},"getAddSingleForeignKeyStatementDto"),Mg=_(s=>{var t,n,o,a,T,u,h,A,N,R,g;let e=s.role.compMod;return e?[((t=e.name)==null?void 0:t.new)||F_(s),(n=e.parent)==null?void 0:n.bucket,(o=e.parent)==null?void 0:o.collection,(u=(T=(a=e.parent)==null?void 0:a.collection)==null?void 0:T.fkFields)==null?void 0:u.length,(h=e.child)==null?void 0:h.bucket,(A=e.child)==null?void 0:A.collection,(g=(R=(N=e.child)==null?void 0:N.collection)==null?void 0:R.fkFields)==null?void 0:g.length].every(I=>!!I):!1},"canRelationshipBeAdded"),r2=_((s,e)=>t=>t.filter(n=>Mg(n)).map(n=>{let o=Yg(s,e)(n);return qS.getInstance([o.statement],o.isActivated,!1)}).filter(Boolean).filter(n=>n.scripts.some(o=>!!o.script)),"getAddForeignKeyScriptDtos"),xg=_((s,e,t)=>n=>{var g,I,p,m;let{prepareNameForScriptFormat:o}=ke()(e),a=n.role.compMod,T=t2(e,t)(n),u=((g=a.name)==null?void 0:g.old)||F_(n)||"",h=o(t)(u),A=s.dropForeignKey(T,h),N=!!((m=(p=(I=n.role)==null?void 0:I.compMod)==null?void 0:p.isActivated)!=null&&m.new),R=a.child.collection.isActivated;return{statement:A,isActivated:N&&R}},"getDeleteSingleForeignKeyStatementDto"),Vg=_(s=>{var t,n,o;let e=s.role.compMod;return e?[((t=e.name)==null?void 0:t.old)||F_(s),(n=e.child)==null?void 0:n.bucket,(o=e.child)==null?void 0:o.collection].every(a=>!!a):!1},"canRelationshipBeDeleted"),n2=_((s,e,t)=>n=>n.filter(o=>Vg(o)).map(o=>{let a=xg(s,e,t)(o);return qS.getInstance([a.statement],a.isActivated,!0)}).filter(Boolean).filter(o=>o.scripts.some(a=>!!a.script)),"getDeleteForeignKeyScriptDtos"),s2=_((s,e,t)=>n=>n.filter(o=>Mg(o)&&Vg(o)).map(o=>{let a=xg(s,e,t)(o),T=Yg(s,e)(o),u=T.isActivated&&a.isActivated;return qS.getDropAndRecreateInstance(a.statement,T.statement,u)}).filter(Boolean).filter(o=>o.scripts.some(a=>!!a.script)),"getModifyForeignKeyScriptDtos");bg.exports={getDeleteForeignKeyScriptDtos:n2,getModifyForeignKeyScriptDtos:s2,getAddForeignKeyScriptDtos:r2}});var JS=Y((lK,vg)=>{"use strict";var $S=class $S{message;stack};_($S,"PluginError");var GS=$S,zS=class zS{require};_(zS,"App");var HS=zS,XS=class XS{log;clear};_(XS,"Logger");var KS=XS,QS=class QS{jsonSchema;modelDefinitions;internalDefinitions;externalDefinitions;containerData;entityData;entities;views;viewData;relationships;collectionRefsDefinitionsMap;isUpdateScript;level;host;clusterId;accessToken;applyToInstanceQueryRequestTimeout;script;hiddenKeys;options;modelData};_(QS,"CoreData");var WS=QS;vg.exports={App:HS,CoreData:WS,Logger:KS,PluginError:GS}});var qg=Y((uK,kg)=>{"use strict";var oN=class oN{name;isActivated};_(oN,"ContainerJsonSchema");var jS=oN,aN=class aN{backgroundColor};_(aN,"ContainerStyles");var ZS=aN,_N=class _N{collectionName;isActivated;bucketId;additionalProperties;tableIfNotExists};_(_N,"EntityData");var eN=_N,cN=class cN{$schema;type;GUID};_(cN,"InternalDefinitions");var tN=cN,lN=class lN{$schema;type;GUID};_(lN,"ModelDefinitions");var rN=lN,TN=class TN{$schema;type;GUID};_(TN,"ExternalDefinitions");var nN=TN,uN=class uN{type;isActivated;mode;subtype;compositeKey;compositePartitionKey;compositeClusteringKey;compositePrimaryKey;compositeUniqueKey;GUID};_(uN,"FieldJsonSchema");var sN=uN,EN=class EN{$schema;type;title;properties;isActivated;additionalProperties;tableIfNotExists;GUID};_(EN,"EntityJsonSchema");var iN=EN;kg.exports={ContainerJsonSchema:jS,ContainerStyles:ZS,EntityData:eN,InternalDefinitions:tN,ModelDefinitions:rN,ExternalDefinitions:nN,FieldJsonSchema:sN,EntityJsonSchema:iN}});var v_=Y((hK,Gg)=>{"use strict";Gg.exports=fn()});var Kg=Y((NK,Hg)=>{"use strict";var{AlterScriptDto:Lo}=nn(),{App:SK}=JS(),i2="sequences",k_=Ct(),o2=_(({app:s})=>({container:e,dbVersion:t})=>{var T;let n=v_()(null,{dbVersion:t},s),{getDbName:o}=ke()(k_),a=o([e.role]);return(((T=e.role)==null?void 0:T.sequences)||[]).map(u=>{let h=n.createSchemaSequence({schemaName:a,sequence:u});return Lo.getInstance([h],!0,!1)}).filter(Boolean)},"getAddContainerSequencesScriptDtos"),a2=_(({app:s})=>({container:e,dbVersion:t})=>{var y,P;let n=v_()(null,{dbVersion:t},s),{getDbName:o,getGroupItemsByCompMode:a}=ke()(k_),T=o([e.role]),u=((P=(y=e.role)==null?void 0:y.compMod)==null?void 0:P[i2])||{},{new:h=[],old:A=[]}=u,{removed:N,added:R,modified:g}=a({newItems:h,oldItems:A}),I=N.map(M=>{let B=n.dropSchemaSequence({schemaName:T,sequence:M});return Lo.getInstance([B],!0,!0)}),p=R.map(M=>{let B=n.createSchemaSequence({schemaName:T,sequence:M});return Lo.getInstance([B],!0,!1)});return[...g.map(M=>{let B=k_.find(A,{id:M.id})||{},F=n.alterSchemaSequence({schemaName:T,sequence:M,oldSequence:B}),$=F.startsWith("DROP");return Lo.getInstance([F],!0,$)}),...I,...p].filter(Boolean)},"getModifyContainerSequencesScriptDtos"),_2=_(({app:s})=>({container:e,dbVersion:t})=>{var T;let n=v_()(null,{dbVersion:t},s),{getDbName:o}=ke()(k_),a=o([e.role]);return(((T=e.role)==null?void 0:T.sequences)||[]).map(u=>{let h=n.dropSchemaSequence({schemaName:a,sequence:u});return Lo.getInstance([h],!0,!0)}).filter(Boolean)},"getDeleteContainerSequencesScriptDtos");Hg.exports={getAddContainerSequencesScriptDtos:o2,getModifyContainerSequencesScriptDtos:a2,getDeleteContainerSequencesScriptDtos:_2}});var $g=Y((DK,Wg)=>{"use strict";var{getAddContainerScriptDto:c2,getDeleteContainerScriptDto:l2}=ID(),{getAddCollectionScriptDto:T2,getDeleteCollectionScriptDto:u2,getModifyCollectionScriptDtos:E2,getAddColumnScriptDtos:h2,getDeleteColumnScriptDtos:S2,getModifyColumnScriptDtos:N2}=Pg(),{getDeleteUdtScriptDto:f2,getCreateUdtScriptDto:A2,getAddColumnToTypeScriptDtos:d2,getDeleteColumnFromTypeScriptDtos:p2,getModifyColumnOfTypeScriptDtos:m2}=Dg(),{getAddViewScriptDto:P2,getDeleteViewScriptDto:R2}=wg(),{getModifyForeignKeyScriptDtos:I2,getDeleteForeignKeyScriptDtos:D2,getAddForeignKeyScriptDtos:g2}=Fg(),{AlterScriptDto:AK,ModificationScript:dK}=nn(),{App:pK,CoreData:mK}=JS(),{InternalDefinitions:PK,ModelDefinitions:RK,ExternalDefinitions:IK}=qg(),{getModifyContainerSequencesScriptDtos:C2,getDeleteContainerSequencesScriptDtos:O2,getAddContainerSequencesScriptDtos:y2}=Kg(),Cs=Ct(),L2=_(({collection:s,app:e,scriptFormat:t})=>{var u,h,A,N,R,g,I,p;let n=(N=(A=(h=(u=s.properties)==null?void 0:u.containers)==null?void 0:h.properties)==null?void 0:A.added)==null?void 0:N.items,o=(p=(I=(g=(R=s.properties)==null?void 0:R.containers)==null?void 0:g.properties)==null?void 0:I.deleted)==null?void 0:p.items,a=[].concat(n).filter(Boolean).map(m=>c2(e,t)(Object.keys(m.properties)[0])),T=[].concat(o).filter(Boolean).map(m=>l2(e,t)(Object.keys(m.properties)[0]));return[...a,...T].filter(Boolean)},"getAlterContainersScriptDtos"),w2=_(({collection:s,app:e,dbVersion:t,modelDefinitions:n,internalDefinitions:o,externalDefinitions:a,scriptFormat:T})=>{var y,P,M,B,F,$,j,se,ue,x,ne,U;let u=[].concat((B=(M=(P=(y=s.properties)==null?void 0:y.entities)==null?void 0:P.properties)==null?void 0:M.added)==null?void 0:B.items).filter(Boolean).map(G=>Object.values(G.properties)[0]),h=[].concat((se=(j=($=(F=s.properties)==null?void 0:F.entities)==null?void 0:$.properties)==null?void 0:j.deleted)==null?void 0:se.items).filter(Boolean).map(G=>Object.values(G.properties)[0]),A=[].concat((U=(ne=(x=(ue=s.properties)==null?void 0:ue.entities)==null?void 0:x.properties)==null?void 0:ne.modified)==null?void 0:U.items).filter(Boolean).map(G=>Object.values(G.properties)[0]),N=u.filter(G=>{var Z;return(Z=G.compMod)==null?void 0:Z.created}).map(T2({app:e,dbVersion:t,modelDefinitions:n,internalDefinitions:o,externalDefinitions:a,scriptFormat:T})),R=h.filter(G=>{var Z;return(Z=G.compMod)==null?void 0:Z.deleted}).map(u2(e,T)),g=A.filter(G=>{var Z;return(Z=G.compMod)==null?void 0:Z.modified}).flatMap(E2({app:e,dbVersion:t,scriptFormat:T})),I=u.filter(G=>{var Z;return!((Z=G==null?void 0:G.compMod)!=null&&Z.created)}).flatMap(h2({app:e,dbVersion:t,modelDefinitions:n,internalDefinitions:o,externalDefinitions:a,scriptFormat:T})),p=h.filter(G=>{var Z;return!((Z=G==null?void 0:G.compMod)!=null&&Z.deleted)}).flatMap(S2(e,T)),m=A.flatMap(N2(e,t,T));return[...N,...R,...g,...I,...p,...m].filter(Boolean)},"getAlterCollectionsScriptDtos"),B2=_((s,e,t,n)=>{var T,u,h,A,N,R,g,I;let o=[].concat((A=(h=(u=(T=s.properties)==null?void 0:T.views)==null?void 0:u.properties)==null?void 0:h.added)==null?void 0:A.items).filter(Boolean).map(p=>Object.values(p.properties)[0]).map(p=>({...p,...p.role||{}})).filter(p=>{var m;return(m=p.compMod)==null?void 0:m.created}).map(P2(e,n));return[...[].concat((I=(g=(R=(N=s.properties)==null?void 0:N.views)==null?void 0:R.properties)==null?void 0:g.deleted)==null?void 0:I.items).filter(Boolean).map(p=>Object.values(p.properties)[0]).map(p=>({...p,...p.role||{}})).map(R2(e,n)),...o].filter(Boolean)},"getAlterViewScriptDtos"),U2=_(({collection:s,app:e,dbVersion:t,modelDefinitions:n,internalDefinitions:o,externalDefinitions:a,scriptFormat:T})=>{var g,I,p,m,y,P,M,B,F,$,j,se,ue,x,ne,U,G,Z,pe,Se;let u=[].concat((m=(p=(I=(g=s.properties)==null?void 0:g.modelDefinitions)==null?void 0:I.properties)==null?void 0:p.added)==null?void 0:m.items).filter(Boolean).map(te=>Object.values(te.properties)[0]).map(te=>({...te,...Cs.omit(te.role,"properties")||{}})).filter(te=>{var we;return(we=te.compMod)==null?void 0:we.created}).map(A2({app:e,dbVersion:t,modelDefinitions:n,internalDefinitions:o,externalDefinitions:a,scriptFormat:T})),h=[].concat((B=(M=(P=(y=s.properties)==null?void 0:y.modelDefinitions)==null?void 0:P.properties)==null?void 0:M.deleted)==null?void 0:B.items).filter(Boolean).map(te=>Object.values(te.properties)[0]).map(te=>({...te,...Cs.omit(te.role,"properties")||{}})).filter(te=>{var we;return(we=te.compMod)==null?void 0:we.deleted}).map(f2(e,T)),A=[].concat((se=(j=($=(F=s.properties)==null?void 0:F.modelDefinitions)==null?void 0:$.properties)==null?void 0:j.added)==null?void 0:se.items).filter(Boolean).map(te=>Object.values(te.properties)[0]).filter(te=>!te.compMod).map(te=>({...te,...Cs.omit(te.role,"properties")||{}})).filter(te=>te.childType==="object_udt").flatMap(d2({app:e,dbVersion:t,modelDefinitions:n,internalDefinitions:o,externalDefinitions:a,scriptFormat:T})),N=[].concat((U=(ne=(x=(ue=s.properties)==null?void 0:ue.modelDefinitions)==null?void 0:x.properties)==null?void 0:ne.deleted)==null?void 0:U.items).filter(Boolean).map(te=>Object.values(te.properties)[0]).filter(te=>!te.compMod).map(te=>({...te,...Cs.omit(te.role,"properties")||{}})).filter(te=>te.childType==="object_udt").flatMap(p2(e,T)),R=[].concat((Se=(pe=(Z=(G=s.properties)==null?void 0:G.modelDefinitions)==null?void 0:Z.properties)==null?void 0:pe.modified)==null?void 0:Se.items).filter(Boolean).map(te=>Object.values(te.properties)[0]).filter(te=>!te.compMod).map(te=>({...te,...Cs.omit(te.role,"properties")||{}})).filter(te=>te.childType==="object_udt").flatMap(m2(e,T));return[...h,...u,...A,...N,...R].filter(Boolean)},"getAlterModelDefinitionsScriptDtos"),Y2=_(({collection:s,app:e,scriptFormat:t})=>{var N,R,g,I,p,m,y,P,M,B,F,$;let n=fn()(null,{targetScriptOptions:{keyword:t}},e),o=[].concat((I=(g=(R=(N=s.properties)==null?void 0:N.relationships)==null?void 0:R.properties)==null?void 0:g.added)==null?void 0:I.items).filter(Boolean).map(j=>Object.values(j.properties)[0]).filter(j=>{var se,ue;return(ue=(se=j==null?void 0:j.role)==null?void 0:se.compMod)==null?void 0:ue.created}),a=[].concat((P=(y=(m=(p=s.properties)==null?void 0:p.relationships)==null?void 0:m.properties)==null?void 0:y.deleted)==null?void 0:P.items).filter(Boolean).map(j=>Object.values(j.properties)[0]).filter(j=>{var se,ue;return(ue=(se=j==null?void 0:j.role)==null?void 0:se.compMod)==null?void 0:ue.deleted}),T=[].concat(($=(F=(B=(M=s.properties)==null?void 0:M.relationships)==null?void 0:B.properties)==null?void 0:F.modified)==null?void 0:$.items).filter(Boolean).map(j=>Object.values(j.properties)[0]).filter(j=>{var se,ue;return(ue=(se=j==null?void 0:j.role)==null?void 0:se.compMod)==null?void 0:ue.modified}),u=D2(n,Cs,t)(a),h=g2(n,Cs)(o),A=I2(n,Cs,t)(T);return[...u,...h,...A].filter(Boolean)},"getAlterRelationshipsScriptDtos"),M2=_(s=>{if(!s)return;let e=s.scripts.map(t=>({...t,script:(t.script||"").trim()})).filter(t=>!!t.script);if(e.length)return{...s,scripts:e}},"prettifyAlterScriptDto"),x2=_(({collection:s,app:e,dbVersion:t})=>{var A,N,R,g,I,p,m,y,P,M,B,F;let n=(g=(R=(N=(A=s.properties)==null?void 0:A.containers)==null?void 0:N.properties)==null?void 0:R.added)==null?void 0:g.items,o=(y=(m=(p=(I=s.properties)==null?void 0:I.containers)==null?void 0:p.properties)==null?void 0:m.deleted)==null?void 0:y.items,a=(F=(B=(M=(P=s.properties)==null?void 0:P.containers)==null?void 0:M.properties)==null?void 0:B.modified)==null?void 0:F.items,T=[].concat(n).filter(Boolean).map($=>Object.values($.properties)[0]).flatMap($=>y2({app:e})({container:$,dbVersion:t})),u=[].concat(o).filter(Boolean).map($=>Object.values($.properties)[0]).flatMap($=>O2({app:e})({container:$,dbVersion:t})),h=[].concat(a).filter(Boolean).map($=>Object.values($.properties)[0]).flatMap($=>C2({app:e})({container:$,dbVersion:t}));return[...T,...u,...h].filter(Boolean)},"getAlterContainersSequencesScriptDtos"),V2=_((s,e)=>{var p,m,y;let t=JSON.parse(s.jsonSchema);if(!t)throw new Error('"comparisonModelCollection" is not found. Alter script can be generated only from Delta model');let n=(m=(p=s.options)==null?void 0:p.targetScriptOptions)==null?void 0:m.keyword,o=JSON.parse(s.modelDefinitions),a=JSON.parse(s.internalDefinitions),T=JSON.parse(s.externalDefinitions),u=(y=s.modelData[0])==null?void 0:y.dbVersion,h=L2({collection:t,app:e,scriptFormat:n}),A=w2({collection:t,app:e,dbVersion:u,modelDefinitions:o,internalDefinitions:a,externalDefinitions:T,scriptFormat:n}),N=B2(t,e,u,n),R=U2({collection:t,app:e,dbVersion:u,modelDefinitions:o,internalDefinitions:a,externalDefinitions:T,scriptFormat:n}),g=Y2({collection:t,app:e,scriptFormat:n}),I=x2({collection:t,app:e,dbVersion:u});return[...h,...I,...R,...A,...N,...g].filter(Boolean).map(P=>M2(P)).filter(Boolean)},"getAlterScriptDtos");Wg.exports={getAlterScriptDtos:V2}});var jg=Y((OK,Jg)=>{"use strict";var{getAlterScriptDtos:q_}=$g(),{AlterScriptDto:CK}=nn(),zg=Ct(),Xg=_(s=>(e,t)=>{let{commentIfDeactivated:n}=ke()(s);return e.map(o=>o.isActivated===!1?o.scripts.map(a=>n(a.script,{isActivated:!1,isPartOfLine:!1})):t?o.scripts.map(a=>a.script):o.scripts.map(a=>n(a.script,{isActivated:!a.isDropScript,isPartOfLine:!1}))).flat().filter(Boolean).map(o=>o.trim()).filter(Boolean).join(`

`)},"joinAlterScriptDtosIntoScript"),b2=_((s,e)=>{var o,a;let t=q_(s,e),n=(a=(o=s.options)==null?void 0:o.additionalOptions)==null?void 0:a.some(T=>T.id==="applyDropStatements"&&T.value);return Xg(zg)(t,n)},"buildEntityLevelAlterScript"),F2=_((s,e)=>q_(s,e).some(n=>n.isActivated&&n.scripts.some(o=>o.isDropScript)),"doesEntityLevelAlterScriptContainDropStatements"),Qg=_(s=>({...s,jsonSchema:s.collections[0],internalDefinitions:Object.values(s.internalDefinitions)[0]}),"mapCoreDataForContainerLevelScripts"),v2=_((s,e)=>{var a,T;let t=Qg(s),n=q_(t,e),o=(T=(a=t.options)==null?void 0:a.additionalOptions)==null?void 0:T.some(u=>u.id==="applyDropStatements"&&u.value);return Xg(zg)(n,o)},"buildContainerLevelAlterScript"),k2=_((s,e)=>{let t=Qg(s);return q_(t,e).some(o=>o.isActivated&&o.scripts.some(a=>a.isDropScript))},"doesContainerLevelAlterScriptContainDropStatements");Jg.exports={buildEntityLevelAlterScript:b2,doesEntityLevelAlterScriptContainDropStatements:F2,buildContainerLevelAlterScript:v2,doesContainerLevelAlterScriptContainDropStatements:k2}});var Zg=ND(),q2=AD(),{doesContainerLevelAlterScriptContainDropStatements:G2,doesEntityLevelAlterScriptContainDropStatements:H2,buildContainerLevelAlterScript:K2,buildEntityLevelAlterScript:W2}=jg();module.exports={generateScript(s,e,t,n){try{let o=W2(s,n);t(null,o)}catch(o){e.log("error",{message:o.message,stack:o.stack},"Oracle Forward-Engineering Error"),t({message:o.message,stack:o.stack})}},generateViewScript(s,e,t,n){t(new Error("Forward-Engineering of delta model on view level is not supported"))},generateContainerScript(s,e,t,n){try{let o=K2(s,n);t(null,o)}catch(o){e.log("error",{message:o.message,stack:o.stack},"Oracle Forward-Engineering Error"),t({message:o.message,stack:o.stack})}},getDatabases(s,e,t,n){e.progress({message:"Find all schemas"}),Zg.getSchemaNames(s,e,t,n)},applyToInstance(s,e,t,n){e.clear(),e.log("info",s,"connectionInfo",s.hiddenKeys),q2.applyToInstance(s,e,n).then(o=>{t(null,o)}).catch(o=>{let a={message:o.message,stack:o.stack};e.log("error",a,"Error when applying to instance"),t(a)})},testConnection(s,e,t,n){Zg.testConnection(s,e,t,n)},isDropInStatements(s,e,t,n){try{if(s.level==="container"){let o=G2(s,n);t(null,o)}else{let o=H2(s,n);t(null,o)}}catch(o){t({message:o.message,stack:o.stack})}}};
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
