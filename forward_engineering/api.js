"use strict";var tm=Object.defineProperty;var _=(r,e)=>tm(r,"name",{value:e,configurable:!0});var R=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var wl=R((gO,sm)=>{sm.exports={name:"Oracle",version:"0.2.11",author:"hackolade",engines:{hackolade:"6.11.1",hackoladePlugin:"1.2.0"},contributes:{target:{applicationTarget:"Oracle",title:"Oracle",versions:["12c","18c","19c","21c","23ai"]},features:{nestedCollections:!1,disablePatternField:!0,disableMultipleTypes:!0,enableForwardEngineering:!0,disableReverseEngineering:!1,disableChoices:!0,enableJsonType:!0,useJsonTypesWithComplexTypes:!0,reverseSchemaIntoOneColumn:!0,disableDenormalization:!0,enableComplexTypesNormalization:!0,restrictNestedFieldsAsPrimaryKey:!1,views:{enabled:!0,viewLevel:"model",disablePipelines:!0},relationships:{compositeRelationships:!0},enableFetchSystemEntitiesCheckbox:!0,discoverRelationships:!0}},description:"Hackolade plugin for Oracle and Autonomous databases",disabled:!1,dependencies:{"adm-zip":"0.5.9",lodash:"4.17.21",oracledb:"6.0.3",perplex:"0.11.0"},"lint-staged":{"*.{js,json}":"prettier --write"},"simple-git-hooks":{"pre-commit":"npx lint-staged","pre-push":"npx eslint ."},scripts:{lint:"eslint . --max-warnings=0",package:"node esbuild.package.js"},devDependencies:{"@hackolade/hck-esbuild-plugins-pack":"0.0.1","@typescript-eslint/eslint-plugin":"7.11.0","@typescript-eslint/parser":"7.11.0",esbuild:"0.20.2","esbuild-plugin-clean":"1.0.1","esbuild-plugin-copy":"2.1.1",eslint:"8.57.0","eslint-config-prettier":"9.1.0","eslint-formatter-teamcity":"^1.0.0","eslint-plugin-import":"^2.26.0","eslint-plugin-prettier":"5.1.3","eslint-plugin-unused-imports":"3.2.0","lint-staged":"14.0.1",prettier:"3.2.5","simple-git-hooks":"2.11.1"}}});var Ml=R((OO,Ul)=>{"use strict";var Zt=require("os"),rm=wl(),nm=_(r=>r<10?"0"+r:r,"prefixZero"),im=_(r=>r.reduce((e,t)=>Math.max(e,t.speed),0),"maxClock"),om=_(r=>Math.floor(r/3600)+":"+nm(parseInt((r/3600-Math.floor(r/3600))*60)),"toTime"),am=_(()=>rm.version,"getPluginVersion"),_m=_(r=>`Date: ${new Date}
Application version: ${r}
Plugin version: ${am()}

System information:
 Hostname:  ${Zt.hostname()}
 Platform:  ${Zt.platform()} ${Zt.arch()}
 Release:   ${Zt.release()}
 Uptime:    ${om(Zt.uptime())}
 Total RAM: ${(Zt.totalmem()/1073741824).toFixed(2)} GB
 CPU Model: ${Zt.cpus()[0].model}
 CPU Clock: ${im(Zt.cpus())} MHZ
 CPU Cores: ${Zt.cpus().length} cores

`,"getSystemInfo"),cm=_((r,e,t)=>{t.clear(),t.log("info",_m(e.appVersion),r),t.log("info",e,"connectionInfo",e.hiddenKeys)},"logInfo");Ul.exports=cm});var xl=R((LO,Vl)=>{Vl.exports={VERSION_MAJOR:6,VERSION_MINOR:0,VERSION_PATCH:3,VERSION_SUFFIX:""}});var ot=R((BO,Fl)=>{"use strict";var Ns=xl(),bl=Ns.VERSION_MAJOR+"."+Ns.VERSION_MINOR+"."+Ns.VERSION_PATCH+Ns.VERSION_SUFFIX;Fl.exports={VERSION_MAJOR:Ns.VERSION_MAJOR,VERSION_MINOR:Ns.VERSION_MINOR,VERSION_PATCH:Ns.VERSION_PATCH,VERSION_SUFFIX:Ns.VERSION_SUFFIX,VERSION_STRING:bl,DEFAULT_DRIVER_NAME:"node-oracledb : "+bl,DEFAULT_ERROR_URL:"https://node-oracledb.readthedocs.io/en/latest/user_guide/installation.html",DEFAULT_MAX_SIZE_FOR_OUT_BINDS:200,CSFRM_IMPLICIT:1,CSFRM_NCHAR:2,CQN_OPCODE_ALL_OPS:0,CQN_OPCODE_ALL_ROWS:1,CQN_OPCODE_ALTER:16,CQN_OPCODE_DELETE:8,CQN_OPCODE_DROP:32,CQN_OPCODE_INSERT:2,CQN_OPCODE_UPDATE:4,DEFAULT:0,STMT_TYPE_UNKNOWN:0,STMT_TYPE_SELECT:1,STMT_TYPE_UPDATE:2,STMT_TYPE_DELETE:3,STMT_TYPE_INSERT:4,STMT_TYPE_CREATE:5,STMT_TYPE_DROP:6,STMT_TYPE_ALTER:7,STMT_TYPE_BEGIN:8,STMT_TYPE_DECLARE:9,STMT_TYPE_CALL:10,STMT_TYPE_EXPLAIN_PLAN:15,STMT_TYPE_MERGE:16,STMT_TYPE_ROLLBACK:17,STMT_TYPE_COMMIT:21,SHUTDOWN_MODE_DEFAULT:0,SHUTDOWN_MODE_TRANSACTIONAL:1,SHUTDOWN_MODE_TRANSACTIONAL_LOCAL:2,SHUTDOWN_MODE_IMMEDIATE:3,SHUTDOWN_MODE_ABORT:4,SHUTDOWN_MODE_FINAL:5,STARTUP_MODE_DEFAULT:0,STARTUP_MODE_FORCE:1,STARTUP_MODE_RESTRICT:2,SUBSCR_EVENT_TYPE_SHUTDOWN:2,SUBSCR_EVENT_TYPE_SHUTDOWN_ANY:3,SUBSCR_EVENT_TYPE_STARTUP:1,SUBSCR_EVENT_TYPE_DEREG:5,SUBSCR_EVENT_TYPE_OBJ_CHANGE:6,SUBSCR_EVENT_TYPE_QUERY_CHANGE:7,SUBSCR_EVENT_TYPE_AQ:100,SUBSCR_GROUPING_CLASS_TIME:1,SUBSCR_GROUPING_TYPE_SUMMARY:1,SUBSCR_GROUPING_TYPE_LAST:2,SUBSCR_NAMESPACE_AQ:1,SUBSCR_NAMESPACE_DBCHANGE:2,SUBSCR_QOS_BEST_EFFORT:16,SUBSCR_QOS_DEREG_NFY:2,SUBSCR_QOS_QUERY:8,SUBSCR_QOS_RELIABLE:1,SUBSCR_QOS_ROWIDS:4,SYSASM:32768,SYSBACKUP:131072,SYSDBA:2,SYSDG:262144,SYSKM:524288,SYSOPER:4,SYSPRELIM:8,SYSRAC:1048576,BIND_IN:3001,BIND_INOUT:3002,BIND_OUT:3003,OUT_FORMAT_ARRAY:4001,OUT_FORMAT_OBJECT:4002,SODA_COLL_MAP_MODE:5001,POOL_STATUS_OPEN:6e3,POOL_STATUS_DRAINING:6001,POOL_STATUS_CLOSED:6002,POOL_STATUS_RECONFIGURING:6003,PURITY_DEFAULT:0,PURITY_NEW:1,PURITY_SELF:2,AQ_DEQ_NO_WAIT:0,AQ_DEQ_WAIT_FOREVER:4294967295,AQ_DEQ_MODE_BROWSE:1,AQ_DEQ_MODE_LOCKED:2,AQ_DEQ_MODE_REMOVE:3,AQ_DEQ_MODE_REMOVE_NO_DATA:4,AQ_DEQ_NAV_FIRST_MSG:1,AQ_DEQ_NAV_NEXT_TRANSACTION:2,AQ_DEQ_NAV_NEXT_MSG:3,AQ_MSG_DELIV_MODE_PERSISTENT:1,AQ_MSG_DELIV_MODE_BUFFERED:2,AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED:3,AQ_MSG_STATE_READY:0,AQ_MSG_STATE_WAITING:1,AQ_MSG_STATE_PROCESSED:2,AQ_MSG_STATE_EXPIRED:3,AQ_VISIBILITY_IMMEDIATE:1,AQ_VISIBILITY_ON_COMMIT:2,TPC_BEGIN_JOIN:2,TPC_BEGIN_NEW:1,TPC_BEGIN_PROMOTE:8,TPC_BEGIN_RESUME:4,TPC_END_NORMAL:0,TPC_END_SUSPEND:1048576}});var W=R((YO,ku)=>{"use strict";var Tm=require("util"),kl="NJS",ql=2,Gl=3,Ai=4,di=5,pi=7,mi=9,Hl=10,vl=11,Kl=12,Wl=13,$l=15,zl=16,Xl=17,jl=18,Ql=19,Jl=21,Zl=22,eE=23,tE=24,sE=34,rE=35,nE=36,iE=37,oE=40,aE=41,_E=42,cE=43,TE=44,lE=45,EE=46,uE=47,NE=52,SE=55,hE=56,AE=57,dE=58,pE=59,mE=60,fE=61,PE=62,RE=63,IE=64,DE=65,CE=66,gE=67,fi=68,OE=69,yE=70,LE=75,BE=76,YE=78,wE=80,UE=81,ME=82,VE=83,xE=84,bE=85,FE=86,Pi=87,Ri=89,kE=90,qE=91,GE=92,Ii=95,HE=97,vE=98,KE=99,WE=100,$E=101,zE=102,XE=103,Di=104,Ci=105,jE=106,gi=107,Oi=108,QE=109,JE=110,ZE=111,eu=112,tu=113,su=114,yi=115,ru=116,nu=117,iu=118,ou=119,au=120,_u=121,cu=122,Li=123,Tu=125,lu=126,Eu=127,uu=128,Bi=129,Nu=130,Yi=131,wi=132,Ui=133,Su=134,hu=135,Au=136,du=137,pu=138,Bs=500,mu=501,fu=503,Pu=504,Ru=505,Iu=506,Du=507,Cu=508,gu=509,Ou=510,yu=511,Lu=512,Bu=513,Yu=514,wu=515,Uu=516,Mu=517,Vu=518,xu=519,bu=520,Fu=521,ze=new Map;ze.set("DPI-1010",Bs);ze.set("DPI-1024",[wi,"at index ([0-9]+) does"]);ze.set("DPI-1040",Oi);ze.set("DPI-1044",yi);ze.set("DPI-1055",Ci);ze.set("DPI-1063",Ii);ze.set("DPI-1067",[Li,"call timeout of ([0-9]+) ms"]);ze.set("DPI-1080",Bs);ze.set("OCI-22303",[Bi,'type "([^"]*"."[^"]*)"']);ze.set("OCI-22164",Ui);ze.set("OCI-22165",[Yi,/index \[([0-9]+)\] must be in the range of \[([0-9]+)\] to \[([0-9]+)\]/]);ze.set("ORA-00028",Bs);ze.set("ORA-00600",Bs);ze.set("ORA-24338",gi);ze.set("ORA-24422",Di);ze.set("ORA-25708",Pi);var O=new Map;O.set(ql,"invalid pool");O.set(Gl,"invalid connection");O.set(Ai,'invalid value for property "%s"');O.set(di,"invalid value for parameter %d");O.set(pi,'invalid value for "%s" in parameter %d');O.set(mi,"invalid number of parameters");O.set(Hl,"unsupported data type %d in column %d");O.set(vl,"encountered bind value and type mismatch");O.set(Kl,"encountered invalid bind data type in parameter %d");O.set(Wl,"invalid bind direction");O.set($l,"type was not specified for conversion");O.set(zl,"buffer is too small for OUT binds");O.set(Xl,"concurrent operations on ResultSet are not allowed");O.set(jl,"invalid ResultSet");O.set(Ql,"ResultSet cannot be returned for non-query statements");O.set(Jl,"invalid type for conversion specified");O.set(Zl,"invalid Lob");O.set(eE,"concurrent operations on a Lob are not allowed");O.set(tE,"memory allocation failed");O.set(sE,"data type is unsupported for array bind");O.set(rE,"maxArraySize is required for IN OUT array bind");O.set(nE,'length of given array is greater than "maxArraySize"');O.set(iE,'invalid data type at array index %d for bind ":%s"');O.set(oE,'connection request timeout. Request exceeded "queueTimeout" of %d');O.set(aE,"cannot convert ResultSet to QueryStream after invoking methods");O.set(_E,"cannot invoke ResultSet methods after converting to QueryStream");O.set(cE,"ResultSet already converted to QueryStream");O.set(TE,'bind object must contain one of the following attributes: "dir", "type", "maxSize", or "val"');O.set(lE,"cannot load a node-oracledb Thick mode binary for Node.js. Please try using Thin mode. %s");O.set(EE,'pool alias "%s" already exists in the connection pool cache');O.set(uE,'pool alias "%s" not found in connection pool cache');O.set(NE,"invalid data type at array index %d for bind position %d");O.set(SE,"binding by position and name cannot be mixed");O.set(hE,"maxSize for bind position %d must be specified and be greater than zero");O.set(AE,'maxSize for bind "%s" must be specified and greater than zero');O.set(dE,"maxSize of %d is too small for value of length %d in row %d");O.set(pE,"type must be specified for bind position %d");O.set(mE,'type must be specified for bind "%s"');O.set(fE,"invalid subscription");O.set(PE,"subscription notification callback missing");O.set(RE,"subscription notification SQL missing");O.set(IE,"connection pool is closing");O.set(DE,"connection pool was closed");O.set(CE,"invalid SODA document cursor");O.set(gE,"a pre-built node-oracledb Thick mode binary was not found for %s");O.set(fi,"invalid error number %d supplied");O.set(OE,"node-oracledb %s requires Node.js %s or later");O.set(yE,"message must be a string, buffer, database object or an object containing a payload property which itself is a string, buffer or database object");O.set(LE,'only one of "connectString" and "connectionString" can be used');O.set(BE,'connection request rejected. Pool queue length "queueMax" %d reached');O.set(YE,"unsupported data type %d in JSON value");O.set(wE,'only one of "user" and "username" can be used');O.set(UE,"concurrent operations on a connection are disabled");O.set(ME,"connection pool is being reconfigured");O.set(VE,"pool statistics are not enabled");O.set(xE,"invalid access token");O.set(bE,'invalid connection pool configuration with token-based authentication. The "homogeneous" and "externalAuth" attributes must be set to true');O.set(FE,'invalid standalone configuration with token-based authentication. The "externalAuth" attribute must be set to true');O.set(Pi,"access token has expired");O.set(Ri,"%s is not supported by node-oracledb in Thin mode");O.set(kE,"initOracleClient() was already called with different arguments");O.set(qE,"file %s is missing");O.set(GE,'"poolMax" %d must be greater than or equal to "poolMin" %d');O.set(Ii,'setting "batchErrors" or "dmlRowCounts" to true is only permitted for DML statements');O.set(HE,'no bind placeholder named ":%s" was found in the statement text');O.set(vE,"%s positional bind values are required but %s were provided");O.set(KE,"internal error: buffer of length %s insufficient to hold %s bytes");O.set(WE,"national character set id %d is not supported by node-oracledb in Thin mode");O.set($E,"no credentials specified");O.set(zE,"unexpected end of data: want %d bytes but only %d bytes are available");O.set(XE,"unexpected message type %d received at position %d of packet %d");O.set(Di,"connection pool cannot be closed because connections are busy");O.set(Ci,"value is not a number (NaN) and cannot be used in Oracle Database numbers");O.set(jE,"internal error: %s");O.set(gi,"invalid cursor");O.set(Oi,"LOB was already closed");O.set(QE,"invalid type number %d");O.set(JE,"invalid Oracle type number %d [csfrm: %d]");O.set(ZE,"internal error: read a negative integer when expecting a positive integer at position %d of packet %d");O.set(eu,"internal error: read integer of length %d when expecting integer of no more than length %d at position %d of packet %d");O.set(tu,"unexpected data received: %s");O.set(su,"OSON field names may not exceed 255 UTF-8 encoded bytes");O.set(yi,"value cannot be represented as an Oracle Database number");O.set(ru,"password verifier type 0x%s is not supported by node-oracledb in Thin mode");O.set(nu,"invalid private key. Headers and footers are not allowed");O.set(iu,"node-oracledb Thick mode cannot be enabled because a Thin mode connection has already been created");O.set(ou,"conversion from type %s to type %s is not supported");O.set(au,"fetchTypeHandler return value must be an object");O.set(_u,'fetchTypeHandler return value attribute "type" must be a valid database type');O.set(cu,'fetchTypeHandler return value attribute "converter" must be a function');O.set(Li,"call timeout of %d ms exceeded");O.set(Tu,'"connectString" cannot be empty or undefined. Bequeath connections are not supported in Thin mode');O.set(lu,"OSON version %s is not supported");O.set(Eu,"internal error: unknown server side piggyback opcode %s");O.set(uu,'internal error: unknown column type name "%s"');O.set(Bi,'invalid object type name: "%s"');O.set(Nu,"Oracle TDS data type %d is not supported");O.set(Yi,"given index %d must be in the range of %d to %d");O.set(wi,"element at index %d does not exist");O.set(Ui,"cannot delete elements of a VARRAY");O.set(Su,"value is of wrong type for attribute %s of object %s");O.set(hu,"value is of wrong type for an element of object %s");O.set(Au,"user name and password cannot be set when using external authentication");O.set(du,'a bind variable replacement value for placeholder ":%s" was not provided');O.set(pu,"connections to this database server version are not supported by node-oracledb in Thin mode");O.set(Bs,"connection to the Oracle Database was broken");O.set(mu,`connection to host %s port %d terminated unexpectedly. (CONNECTION_ID=%s)
%s`);O.set(fu,`connection to host %s port %d could not be established. (CONNECTION_ID=%s)
%s`);O.set(Pu,`connection establishment through a web proxy at host %s port %d failed. (CONNECTION_ID=%s)
%s`);O.set(Ru,"unable to initiate TLS connection. Please check if wallet credentials are valid");O.set(Iu,`connection to host %s port %d encountered TLS handshake failure. (CONNECTION_ID=%s)
%s`);O.set(Du,"TLS detected an invalid certificate. Server DN in certificate does not match the specified DN");O.set(Cu,"TLS detected an invalid certificate. %s not present in certificate");O.set(gu,"internal error: invalid packet type or malformed packet received");O.set(Ou,'connection to host %s port %d timed out. Request exceeded "%s" of %d seconds. (CONNECTION_ID=%s)');O.set(yu,`connection to listener at host %s port %d was refused. (CONNECTION_ID=%s)
Cause: %s`);O.set(Lu,`invalid connection string parameters.
%s`);O.set(Bu,"error received through in-band notification: %s");O.set(Yu,"syntax error in connection string");O.set(wu,"error in Easy Connect connection string: %s: %s");O.set(Uu,"no configuration directory set or available to search for tnsnames.ora");O.set(Mu,'cannot connect to Oracle Database. Unable to find "%s" in "%s"');O.set(Vu,'cannot connect to Oracle Database. Service "%s" is not registered with the listener at host %s port %s. (CONNECTION_ID=%s)');O.set(xu,'cannot connect to Oracle Database. SID "%s" is not registered with the listener at host %s port %s. (CONNECTION_ID=%s)');O.set(bu,"cannot connect to Oracle Database. File tnsnames.ora not found in %s");O.set(Fu,"connection to host %s port %d received end-of-file on communication channel. (CONNECTION_ID=%s)");function hr(r){if(!r){let e=Array.prototype.slice.call(arguments,1);Mi(...e)}}_(hr,"assert");function lm(r,e,t){hr(r.length>=e&&r.length<=t,mi)}_(lm,"assertArgCount");function Em(r,e,t){r[t]!==void 0&&Ws(typeof r[t]=="boolean",e,t)}_(Em,"assertParamPropBool");function um(r,e,t){r[t]!==void 0&&Ws(typeof r[t]=="function",e,t)}_(um,"assertParamPropFunction");function Nm(r,e,t){r[t]!==void 0&&Ws(Number.isInteger(r[t]),e,t)}_(Nm,"assertParamPropInt");function Sm(r,e,t){r[t]!==void 0&&Ws(Number.isInteger(r[t])&&r[t]>=0,e,t)}_(Sm,"assertParamPropUnsignedInt");function hm(r,e,t){r[t]!==void 0&&Ws(typeof r[t]=="string",e,t)}_(hm,"assertParamPropString");function Ws(r,e,t){hr(r,pi,t,e)}_(Ws,"assertParamPropValue");function Am(r,e){hr(r,di,e)}_(Am,"assertParamValue");function dm(r,e){hr(r,Ai,e)}_(dm,"assertPropValue");function jr(r){let e=O.get(r),t=[...arguments];e||(t=[void 0,r],r=fi,e=O.get(r));let s=r.toString().padStart(3,"0"),n=`${kl}-${s}`;t[0]=`${n}: ${e}`;let i=new Error(Tm.format(...t));return i.code=n,Error.captureStackTrace(i,jr),i}_(jr,"getErr");function Mi(){throw jr(...arguments)}_(Mi,"throwErr");function pm(r){Mi(Ri,r)}_(pm,"throwNotImplemented");function mm(r,e){if(!r.code){let t=r.message.indexOf(":");if(t>0&&(r.code=r.message.substr(0,t),ze.has(r.code))){let s=[],n,i=ze.get(r.code);if(typeof i=="number")n=i;else{n=i[0];let c=i[1],T=r.message.match(c);T&&(s=T.slice(1))}let a=jr(n,...s);r.code=a.code,r.message=a.message+`
`+r.message}}return r.requiresStackCapture&&(delete r.requiresStackCapture,Error.captureStackTrace(r,e)),r}_(mm,"transformErr");ku.exports={ERR_INVALID_POOL:ql,ERR_INVALID_CONNECTION:Gl,ERR_INVALID_PROPERTY_VALUE:Ai,ERR_INVALID_PARAMETER_VALUE:di,ERR_INVALID_PROPERTY_VALUE_IN_PARAM:pi,ERR_INVALID_NUMBER_OF_PARAMETERS:mi,ERR_UNSUPPORTED_DATA_TYPE:Hl,ERR_BIND_VALUE_AND_TYPE_MISMATCH:vl,ERR_INVALID_BIND_DATA_TYPE:Kl,ERR_INVALID_BIND_DIRECTION:Wl,ERR_NO_TYPE_FOR_CONVERSION:$l,ERR_INSUFFICIENT_BUFFER_FOR_BINDS:zl,ERR_BUSY_RS:Xl,ERR_INVALID_RS:jl,ERR_NOT_A_QUERY:Ql,ERR_INVALID_TYPE_FOR_CONVERSION:Jl,ERR_INVALID_LOB:Zl,ERR_BUSY_LOB:eE,ERR_INSUFFICIENT_MEMORY:tE,ERR_INVALID_TYPE_FOR_ARRAY_BIND:sE,ERR_REQUIRED_MAX_ARRAY_SIZE:rE,ERR_INVALID_ARRAY_SIZE:nE,ERR_INCOMPATIBLE_TYPE_ARRAY_BIND:iE,ERR_CONN_REQUEST_TIMEOUT:oE,ERR_CANNOT_CONVERT_RS_TO_STREAM:aE,ERR_CANNOT_INVOKE_RS_METHODS:_E,ERR_RS_ALREADY_CONVERTED:cE,ERR_INVALID_BIND_UNIT:TE,ERR_CANNOT_LOAD_BINARY:lE,ERR_POOL_WITH_ALIAS_ALREADY_EXISTS:EE,ERR_POOL_WITH_ALIAS_NOT_FOUND:uE,ERR_INCOMPATIBLE_TYPE_ARRAY_INDEX_BIND:NE,ERR_MIXED_BIND:SE,ERR_MISSING_MAX_SIZE_BY_POS:hE,ERR_MISSING_MAX_SIZE_BY_NAME:AE,ERR_MAX_SIZE_TOO_SMALL:dE,ERR_MISSING_TYPE_BY_POS:pE,ERR_MISSING_TYPE_BY_NAME:mE,ERR_INVALID_SUBSCR:fE,ERR_MISSING_SUBSCR_CALLBACK:PE,ERR_MISSING_SUBSCR_SQL:RE,ERR_POOL_CLOSING:IE,ERR_POOL_CLOSED:DE,ERR_INVALID_SODA_DOC_CURSOR:CE,ERR_NO_BINARY_AVAILABLE:gE,ERR_INVALID_ERR_NUM:fi,ERR_NODE_TOO_OLD:OE,ERR_INVALID_AQ_MESSAGE:yE,ERR_DBL_CONNECT_STRING:LE,ERR_QUEUE_MAX_EXCEEDED:BE,ERR_UNSUPPORTED_DATA_TYPE_IN_JSON:YE,ERR_DBL_USER:wE,ERR_CONCURRENT_OPS:UE,ERR_POOL_RECONFIGURING:ME,ERR_POOL_STATISTICS_DISABLED:VE,ERR_TOKEN_BASED_AUTH:xE,ERR_POOL_TOKEN_BASED_AUTH:bE,ERR_CONN_TOKEN_BASED_AUTH:FE,ERR_TOKEN_HAS_EXPIRED:Pi,ERR_NOT_IMPLEMENTED:Ri,ERR_INIT_ORACLE_CLIENT_ARGS:kE,ERR_MISSING_FILE:qE,ERR_INVALID_NUMBER_OF_CONNECTIONS:GE,ERR_EXEC_MODE_ONLY_FOR_DML:Ii,ERR_CONNECTION_CLOSED:Bs,ERR_CONNECTION_LOSTCONTACT:mu,ERR_CONNECTION_INCOMPLETE:fu,ERR_PROXY_CONNECTION_FAILURE:Pu,ERR_TLS_INIT_FAILURE:Ru,ERR_TLS_AUTH_FAILURE:Iu,ERR_TLS_DNMATCH_FAILURE:Du,ERR_TLS_HOSTMATCH_FAILURE:Cu,ERR_INVALID_PACKET:gu,ERR_CONNECTION_TIMEDOUT:Ou,ERR_CONNECTION_REFUSED:yu,ERR_INVALID_CONNECT_STRING_PARAMETERS:Lu,ERR_CONNECTION_INBAND:Bu,ERR_INVALID_CONNECT_STRING_SYNTAX:Yu,ERR_INVALID_EZCONNECT_SYNTAX:wu,ERR_NO_CONFIG_DIR:Uu,ERR_TNS_ENTRY_NOT_FOUND:Mu,ERR_CONNECTION_EOF:Fu,ERR_INVALID_BIND_NAME:HE,ERR_WRONG_NUMBER_OF_POSITIONAL_BINDS:vE,ERR_BUFFER_LENGTH_INSUFFICIENT:KE,ERR_NCHAR_CS_NOT_SUPPORTED:WE,ERR_MISSING_CREDENTIALS:$E,ERR_UNEXPECTED_END_OF_DATA:zE,ERR_UNEXPECTED_MESSAGE_TYPE:XE,ERR_POOL_HAS_BUSY_CONNECTIONS:Di,ERR_INTERNAL:jE,ERR_INVALID_REF_CURSOR:gi,ERR_UNSUPPORTED_VERIFIER_TYPE:ru,ERR_NAN_VALUE:Ci,ERR_LOB_CLOSED:Oi,ERR_ORACLE_NUMBER_NO_REPR:yi,ERR_INVALID_SERVICE_NAME:Vu,ERR_INVALID_SID:xu,ERR_TNS_NAMES_FILE_MISSING:bu,ERR_INVALID_TYPE_NUM:QE,ERR_INVALID_ORACLE_TYPE_NUM:JE,ERR_UNEXPECTED_NEGATIVE_INTEGER:ZE,ERR_INTEGER_TOO_LARGE:eu,ERR_UNEXPECTED_DATA:tu,ERR_OSON_FIELD_NAME_LIMITATION:su,ERR_OSON_VERSION_NOT_SUPPORTED:lu,ERR_INVALID_PRIVATE_KEY:nu,ERR_THIN_CONNECTION_ALREADY_CREATED:iu,ERR_UNSUPPORTED_CONVERSION:ou,ERR_FETCH_TYPE_HANDLER_RETURN_VALUE:au,ERR_FETCH_TYPE_HANDLER_TYPE:_u,ERR_FETCH_TYPE_HANDLER_CONVERTER:cu,ERR_CALL_TIMEOUT_EXCEEDED:Li,ERR_EMPTY_CONNECT_STRING:Tu,ERR_UNKOWN_SERVER_SIDE_PIGGYBACK:Eu,ERR_UNKNOWN_COLUMN_TYPE_NAME:uu,ERR_INVALID_OBJECT_TYPE_NAME:Bi,ERR_TDS_TYPE_NOT_SUPPORTED:Nu,ERR_INVALID_COLL_INDEX_SET:Yi,ERR_INVALID_COLL_INDEX_GET:wi,ERR_DELETE_ELEMENTS_OF_VARRAY:Ui,ERR_WRONG_VALUE_FOR_DBOBJECT_ATTR:Su,ERR_WRONG_VALUE_FOR_DBOBJECT_ELEM:hu,ERR_WRONG_CRED_FOR_EXTAUTH:Au,ERR_MISSING_BIND_VALUE:du,ERR_SERVER_VERSION_NOT_SUPPORTED:pu,ERR_CONNECTION_CLOSED_CODE:`${kl}-${Bs}`,assert:hr,assertArgCount:lm,assertParamPropBool:Em,assertParamPropFunction:um,assertParamPropInt:Nm,assertParamPropString:hm,assertParamPropUnsignedInt:Sm,assertParamPropValue:Ws,assertParamValue:Am,assertPropValue:dm,getErr:jr,throwErr:Mi,throwNotImplemented:pm,transformErr:mm}});var At=R((UO,Hu)=>{"use strict";var ps=ot(),js=W(),fm=require("util"),qu=new Map,Gu=new Map,Ot=new Map,qi=class qi{constructor(e,t,s,n){this.num=e,this.name=t,this.columnTypeName=s,this._bufferSizeFactor=n.bufferSizeFactor||0,this._oraTypeNum=n.oraTypeNum||0,this._csfrm=n.csfrm||0,qu.set(e,this);let i=(n.csfrm||0)*256+n.oraTypeNum;Gu.set(i,this),Ot.set(s,this)}[Symbol.toPrimitive](e){switch(e){case"number":return this.num;default:return this.toString()}}[fm.inspect.custom](){return this.toString()}toString(){return`[DbType ${this.name}]`}};_(qi,"DbType");var le=qi;function Pm(r){let e=Ot.get(r);return e||js.throwErr(js.ERR_UNKNOWN_COLUMN_TYPE_NAME,r),e}_(Pm,"getTypeByColumnTypeName");function Rm(r){let e=qu.get(r);return e||js.throwErr(js.ERR_INVALID_TYPE_NUM,r),e}_(Rm,"getTypeByNum");function Im(r,e){let t=(e||0)*256+r,s=Gu.get(t);return s||js.throwErr(js.ERR_INVALID_ORACLE_TYPE_NUM,r,e),s}_(Im,"getTypeByOraTypeNum");var Vi=new le(2020,"DB_TYPE_BFILE","BFILE",{oraTypeNum:114,bufferSizeFactor:112}),Qr=new le(2008,"DB_TYPE_BINARY_DOUBLE","BINARY_DOUBLE",{oraTypeNum:101,bufferSizeFactor:8}),Jr=new le(2007,"DB_TYPE_BINARY_FLOAT","BINARY_FLOAT",{oraTypeNum:100,bufferSizeFactor:4}),Ar=new le(2009,"DB_TYPE_BINARY_INTEGER","BINARY_INTEGER",{oraTypeNum:3,bufferSizeFactor:22}),Zr=new le(2019,"DB_TYPE_BLOB","BLOB",{oraTypeNum:113,bufferSizeFactor:112}),en=new le(2022,"DB_TYPE_BOOLEAN","BOOLEAN",{oraTypeNum:252,bufferSizeFactor:4}),$s=new le(2003,"DB_TYPE_CHAR","CHAR",{oraTypeNum:96,csfrm:ps.CSFRM_IMPLICIT,bufferSizeFactor:4}),tn=new le(2017,"DB_TYPE_CLOB","CLOB",{oraTypeNum:112,csfrm:ps.CSFRM_IMPLICIT,bufferSizeFactor:112}),xi=new le(2021,"DB_TYPE_CURSOR","CURSOR",{oraTypeNum:102,bufferSizeFactor:4}),sn=new le(2011,"DB_TYPE_DATE","DATE",{oraTypeNum:12,bufferSizeFactor:7}),bi=new le(2015,"DB_TYPE_INTERVAL_DS","INTERVAL DAY TO SECOND",{oraTypeNum:183,bufferSizeFactor:11}),Fi=new le(2016,"DB_TYPE_INTERVAL_YM","INTERVAL YEAR TO MONTH",{oraTypeNum:182}),rn=new le(2027,"DB_TYPE_JSON","JSON",{oraTypeNum:119}),es=new le(2024,"DB_TYPE_LONG","LONG",{oraTypeNum:8,csfrm:ps.CSFRM_IMPLICIT,bufferSizeFactor:2**31-1}),Ss=new le(2031,"DB_TYPE_LONG_NVARCHAR","LONG",{oraTypeNum:8,csfrm:ps.CSFRM_NCHAR,bufferSizeFactor:2**31-1}),hs=new le(2025,"DB_TYPE_LONG_RAW","LONG RAW",{oraTypeNum:24,bufferSizeFactor:2**31-1}),As=new le(2004,"DB_TYPE_NCHAR","NCHAR",{oraTypeNum:96,csfrm:ps.CSFRM_NCHAR,bufferSizeFactor:4}),nn=new le(2018,"DB_TYPE_NCLOB","NCLOB",{oraTypeNum:112,csfrm:ps.CSFRM_NCHAR,bufferSizeFactor:112}),ss=new le(2010,"DB_TYPE_NUMBER","NUMBER",{oraTypeNum:2,bufferSizeFactor:22}),ts=new le(2002,"DB_TYPE_NVARCHAR","NVARCHAR2",{oraTypeNum:1,csfrm:ps.CSFRM_NCHAR,bufferSizeFactor:4}),ki=new le(2023,"DB_TYPE_OBJECT","OBJECT",{oraTypeNum:109}),zs=new le(2006,"DB_TYPE_RAW","RAW",{oraTypeNum:23,bufferSizeFactor:1}),Xs=new le(2005,"DB_TYPE_ROWID","ROWID",{oraTypeNum:11,bufferSizeFactor:18}),on=new le(2012,"DB_TYPE_TIMESTAMP","TIMESTAMP",{oraTypeNum:180,bufferSizeFactor:11}),vt=new le(2014,"DB_TYPE_TIMESTAMP_LTZ","TIMESTAMP WITH LOCAL TIME ZONE",{oraTypeNum:231,bufferSizeFactor:11}),ds=new le(2013,"DB_TYPE_TIMESTAMP_TZ","TIMESTAMP WITH TIME ZONE",{oraTypeNum:181,bufferSizeFactor:13}),an=new le(2030,"DB_TYPE_UROWID","UROWID",{oraTypeNum:208}),ue=new le(2001,"DB_TYPE_VARCHAR","VARCHAR2",{oraTypeNum:1,csfrm:ps.CSFRM_IMPLICIT,bufferSizeFactor:4}),Dm=new Map([[Qr,new Map([[ue,ue]])],[Jr,new Map([[ue,ue]])],[Zr,new Map([[zs,hs],[hs,hs]])],[$s,new Map([[ue,ue]])],[tn,new Map([[ue,es],[es,es]])],[sn,new Map([[ue,ue],[vt,vt]])],[rn,new Map([[ue,ue]])],[es,new Map([[ue,es]])],[hs,new Map([[zs,hs]])],[As,new Map([[$s,As],[ue,ts],[ts,ts]])],[nn,new Map([[ue,Ss],[ts,Ss],[es,Ss],[Ss,Ss]])],[ss,new Map([[ue,ue]])],[ts,new Map([[$s,As],[As,As],[ue,ts]])],[zs,new Map([[ue,ue]])],[Xs,new Map([[ue,Xs]])],[on,new Map([[ue,ue],[vt,vt]])],[vt,new Map([[ue,ue],[ds,ds]])],[ds,new Map([[ue,ue],[vt,vt]])],[an,new Map([[ue,Xs]])]]),Cm=new Map([[Vi,Vi],[Qr,Qr],[Jr,Jr],[Ar,Ar],[Zr,Zr],[en,en],[$s,$s],[tn,tn],[xi,xi],[sn,sn],[bi,bi],[Fi,Fi],[rn,rn],[es,es],[Ss,Ss],[hs,hs],[As,As],[nn,nn],[ss,ss],[ts,ts],[ki,ki],[zs,zs],[Xs,Xs],[on,on],[vt,ds],[ds,ds],[an,an],[ue,ue]]);Ot.set("DOUBLE PRECISION",ss);Ot.set("FLOAT",ss);Ot.set("INTEGER",ss);Ot.set("PL/SQL BOOLEAN",en);Ot.set("PL/SQL BINARY INTEGER",Ar);Ot.set("PL/SQL PLS INTEGER",Ar);Ot.set("REAL",ss);Ot.set("SMALLINT",ss);Ot.set("TIMESTAMP WITH LOCAL TZ",vt);Ot.set("TIMESTAMP WITH TZ",ds);Hu.exports={DbType:le,DB_TYPE_BFILE:Vi,DB_TYPE_BINARY_DOUBLE:Qr,DB_TYPE_BINARY_FLOAT:Jr,DB_TYPE_BINARY_INTEGER:Ar,DB_TYPE_BLOB:Zr,DB_TYPE_BOOLEAN:en,DB_TYPE_CHAR:$s,DB_TYPE_CLOB:tn,DB_TYPE_CURSOR:xi,DB_TYPE_DATE:sn,DB_TYPE_INTERVAL_DS:bi,DB_TYPE_INTERVAL_YM:Fi,DB_TYPE_JSON:rn,DB_TYPE_LONG:es,DB_TYPE_LONG_NVARCHAR:Ss,DB_TYPE_LONG_RAW:hs,DB_TYPE_NCHAR:As,DB_TYPE_NCLOB:nn,DB_TYPE_NUMBER:ss,DB_TYPE_NVARCHAR:ts,DB_TYPE_OBJECT:ki,DB_TYPE_RAW:zs,DB_TYPE_ROWID:Xs,DB_TYPE_TIMESTAMP:on,DB_TYPE_TIMESTAMP_LTZ:vt,DB_TYPE_TIMESTAMP_TZ:ds,DB_TYPE_UROWID:an,DB_TYPE_VARCHAR:ue,DB_TYPE_CONVERSION_MAP:Dm,DB_TYPE_FETCH_TYPE_MAP:Cm,getTypeByColumnTypeName:Pm,getTypeByNum:Rm,getTypeByOraTypeNum:Im}});var vu=R((VO,gm)=>{gm.exports={name:"oracledb",version:"6.0.3",description:"A Node.js module for Oracle Database access from JavaScript and TypeScript",license:"(Apache-2.0 OR UPL-1.0)",homepage:"http://oracle.github.io/node-oracledb/",keywords:["Oracle","Database","official","DB","SQL","JSON","PL/SQL","SODA","OCI","API","client","library","driver","add-on","extension","binding","interface","adapter","module"],repository:{type:"git",url:"git://github.com/oracle/node-oracledb.git"},scripts:{install:"node package/install.js",prune:"node package/prunebinaries.js"},engines:{node:">=14.6"},maintainers:[{name:"Oracle Corp."}],bugs:{url:"https://github.com/oracle/node-oracledb/issues"},main:"./index.js"}});var pt=R((xO,ju)=>{"use strict";var{Buffer:dr}=require("buffer"),ke=W(),dt=require("process"),Om=require("util"),ym=At(),Ku;try{Ku=vu()}catch{ke.throwErr(ke.ERR_MISSING_FILE,"package.json")}var Wu=Ku.version,Lm="build/Release",Bm="oracledb-"+Wu+"-"+dt.platform+"-"+dt.arch+".node",Ym="package/Staging";function $u(){return"Node-oracledb installation instructions: https://node-oracledb.readthedocs.io/en/latest/user_guide/installation.html"}_($u,"getInstallURL");function wm(){let r,e,t=$u()+`
`;return dt.platform==="linux"?(dt.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html
`,r="64-bit"):dt.arch==="x32"?(e=`https://www.oracle.com/database/technologies/instant-client/linux-x86-32-downloads.html
`,r="32-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,r=dt.arch),t+="You must have Linux "+r+` Oracle Client libraries configured with ldconfig, or in LD_LIBRARY_PATH.
`,t+=`If you do not have Oracle Database on this computer, then install the Instant Client Basic or Basic Light package from 
`,t+=e):dt.platform==="darwin"?(dt.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/macos-intel-x86-downloads.html
`,r="64-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,r=dt.arch),t+="You must have macOS "+r+` Oracle Instant Client Basic or Basic Light package libraries in
`,t+=`/usr/local/lib or set by calling oracledb.initOracleClient({libDir: "/my/instant_client_directory"}).
`,t+="Oracle Instant Client can be downloaded from "+e):dt.platform==="win32"?(dt.arch==="x64"?(e=`https://www.oracle.com/database/technologies/instant-client/winx64-64-downloads.html
`,r="64-bit"):dt.arch==="x32"?(e=`https://www.oracle.com/database/technologies/instant-client/microsoft-windows-32-downloads.html
`,r="32-bit"):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,r=dt.arch),t+="You must have Windows "+r+` Oracle Client libraries in your PATH environment variable.
`,t+=`If you do not have Oracle Database on this computer, then install the Instant Client Basic or Basic Light package from
`,t+=e,t+=`A Microsoft Visual Studio Redistributable suitable for your Oracle client library version must be available.
`):(e=`https://www.oracle.com/database/technologies/instant-client.html
`,t+="You must have "+dt.arch+` Oracle Client libraries in your operating system library search path.
`,t+=`If you do not have Oracle Database on this computer, then install an Instant Client Basic or Basic Light package from: 
`,t+=e),t}_(wm,"getInstallHelp");function Gi(r){let e=_(function(){if(typeof arguments[arguments.length-1]!="function")return r.apply(this,arguments).catch(_(function n(i){throw ke.transformErr(i,n)},"stackCapture"));let t=Array.prototype.slice.call(arguments,0,arguments.length-1),s=arguments[arguments.length-1];r.apply(this,t).then(function(n){s(null,n)},_(function n(i){s(ke.transformErr(i,n))},"stackCapture"))},"wrapper");return r.name&&Object.defineProperty(e,"name",{value:r.name}),e}_(Gi,"callbackify");function Hi(r){return async function(){let e;this._impl&&(e=this._impl._getConnImpl(),await e._acquireLock());try{return await r.apply(this,arguments)}finally{e&&e._releaseLock()}}}_(Hi,"serialize");function zu(r,e){return async function(){this._isActive&&ke.throwErr(e),this._isActive=!0;try{return await r.apply(this,arguments)}finally{this._isActive=!1}}}_(zu,"preventConcurrent");function Um(r){let e=1,t;typeof arguments[1]=="number"&&(e=2,t=arguments[1]);for(let s=e;s<arguments.length;s++){let n=arguments[s],i=r[n];t?r[n]=Gi(zu(Hi(i),t)):r[n]=Gi(Hi(i))}}_(Um,"wrapFns");function Mm(r){if(!Array.isArray(r))return!1;for(let e=0;e<r.length;e++)if(typeof r[e]!="string")return!1;return!0}_(Mm,"isArrayOfStrings");function Ki(r){return r!==null&&typeof r=="object"}_(Ki,"isObject");function Vm(r){return r!==null&&typeof r=="object"||Array.isArray(r)}_(Vm,"isObjectOrArray");function xm(r){if(!Array.isArray(r))return!1;for(let e=0;e<r.length;e++){let t=r[e];if(!(typeof t=="string"||typeof t=="number"||dr.isBuffer(t)||Om.isDate(t)))return!1}return!0}_(xm,"isShardingKey");function Xu(r){return r!=null&&r._sodaDocumentMarker}_(Xu,"isSodaDocument");function bm(r){return Ki(r)&&Number.isInteger(r.formatId)&&(dr.isBuffer(r.globalTransactionId)||typeof r.globalTransactionId=="string")&&(dr.isBuffer(r.branchQualifier)||typeof r.branchQualifier=="string")}_(bm,"isXid");function Fm(r){return Xu(r)?r._impl:(ke.assertParamValue(Ki(r),1),dr.from(JSON.stringify(r)))}_(Fm,"verifySodaDoc");function vi(r){ke.assert(typeof r=="string",ke.ERR_TOKEN_BASED_AUTH),r.split(".")[1]===void 0&&ke.throwErr(ke.ERR_TOKEN_BASED_AUTH);let t=r.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=dr.from(t,"base64").toString("ascii"),i=JSON.parse(n).exp;return ke.assert(i!=null,ke.ERR_TOKEN_BASED_AUTH),i=i*1e3,new Date().getTime()>i}_(vi,"isTokenExpired");function km(r){switch(typeof r){case"string":return r===""&&ke.throwErr(ke.ERR_TOKEN_BASED_AUTH),!vi(r);case"object":return(r.token===void 0||r.token===""||r.privateKey===void 0||r.privateKey==="")&&ke.throwErr(ke.ERR_TOKEN_BASED_AUTH),!vi(r.token);default:ke.throwErr(ke.ERR_TOKEN_BASED_AUTH)}}_(km,"isTokenValid");function qm(r){return ke.assert(typeof r.privateKey=="string",ke.ERR_TOKEN_BASED_AUTH),!(r.privateKey.startsWith("-----BEGIN PRIVATE KEY-----")||r.privateKey.endsWith("-----END PRIVATE KEY-----"))}_(qm,"isPrivateKeyValid");function Gm(r,e){let t=e+"Class",s=e+"Name",n=r[t],i=r[e];typeof i=="number"&&(i=r[e]=ym.getTypeByNum(i)),n?r[s]=n.prototype.fqn:i&&(r[s]=i.columnTypeName)}_(Gm,"addTypeProperties");ju.exports={BINARY_FILE:Bm,PACKAGE_JSON_VERSION:Wu,RELEASE_DIR:Lm,STAGING_DIR:Ym,addTypeProperties:Gm,callbackify:Gi,getInstallURL:$u,getInstallHelp:wm,isArrayOfStrings:Mm,isObject:Ki,isObjectOrArray:Vm,isPrivateKeyValid:qm,isShardingKey:xm,isSodaDocument:Xu,isTokenExpired:vi,isTokenValid:km,isXid:bm,preventConcurrent:zu,serialize:Hi,verifySodaDoc:Fm,wrapFns:Um}});var Ju=R((FO,Qu)=>{"use strict";var Xe=W(),$i=class $i{getCondition(){Xe.throwNotImplemented("getting condition (dequeue options)")}getConsumerName(){Xe.throwNotImplemented("getting consumer name (dequeue options)")}getCorrelation(){Xe.throwNotImplemented("getting correlation (dequeue options)")}getMode(){Xe.throwNotImplemented("getting mode (dequeue options)")}getMsgId(){Xe.throwNotImplemented("getting message id (dequeue options)")}getNavigation(){Xe.throwNotImplemented("getting navigation (dequeue options)")}getTransformation(){Xe.throwNotImplemented("getting transformation (dequeue options)")}getVisibility(){Xe.throwNotImplemented("getting visibility (dequeue options)")}getWait(){Xe.throwNotImplemented("getting wait (dequeue options)")}setCondition(){Xe.throwNotImplemented("setting condition (dequeue options)")}setConsumerName(){Xe.throwNotImplemented("setting consumer name (dequeue options)")}setCorrelation(){Xe.throwNotImplemented("setting correlation (dequeue options)")}setMode(){Xe.throwNotImplemented("setting mode (dequeue options)")}setMsgId(){Xe.throwNotImplemented("setting message id (dequeue options)")}setNavigation(){Xe.throwNotImplemented("setting navigation (dequeue options)")}setTransformation(){Xe.throwNotImplemented("setting transformation (dequeue options)")}setVisibility(){Xe.throwNotImplemented("setting visibility (dequeue options)")}setWait(){Xe.throwNotImplemented("setting wait (dequeue options)")}};_($i,"AqDeqOptionsImpl");var Wi=$i;Qu.exports=Wi});var eN=R((qO,Zu)=>{"use strict";var Qs=W(),Xi=class Xi{getDeliveryMode(){Qs.throwNotImplemented("getting delivery mode (enqueue options)")}getTransformation(){Qs.throwNotImplemented("getting transformation (enqueue options)")}getVisibility(){Qs.throwNotImplemented("getting visibility (enqueue options)")}setDeliveryMode(){Qs.throwNotImplemented("setting delivery mode (enqueue options)")}setTransformation(){Qs.throwNotImplemented("setting transformation (enqueue options)")}setVisibility(){Qs.throwNotImplemented("setting visibility (enqueue options)")}};_(Xi,"AqEnqOptionsImpl");var zi=Xi;Zu.exports=zi});var sN=R((HO,tN)=>{"use strict";var Vt=W(),Qi=class Qi{getCorrelation(){Vt.throwNotImplemented("getting correlation (message)")}getDelay(){Vt.throwNotImplemented("getting delay (message)")}getDeliveryMode(){Vt.throwNotImplemented("getting delivery mode (message)")}getExceptionQueue(){Vt.throwNotImplemented("getting exception queue (message)")}getExpiration(){Vt.throwNotImplemented("getting expiration (message)")}getMsgId(){Vt.throwNotImplemented("getting message id (message)")}getNumAttempts(){Vt.throwNotImplemented("getting number of attempts (message)")}getOriginalMsgId(){Vt.throwNotImplemented("getting original message id (message)")}getPayload(){Vt.throwNotImplemented("getting payload (message)")}getPriority(){Vt.throwNotImplemented("getting priority (message)")}getState(){Vt.throwNotImplemented("getting state (message)")}};_(Qi,"AqMessageImpl");var ji=Qi;tN.exports=ji});var nN=R((KO,rN)=>{"use strict";var _n=W(),Zi=class Zi{_getConnImpl(){return this._connection}deqMany(){_n.throwNotImplemented("dequeuing multiple items from a queue")}deqOne(){_n.throwNotImplemented("dequeuing a single item from a queue")}enqMany(){_n.throwNotImplemented("enqueuing multiple items from a queue")}enqOne(){_n.throwNotImplemented("enqueuing a single item from a queue")}};_(Zi,"AqQueueImpl");var Ji=Zi;rN.exports=Ji});var cn=R(($O,iN)=>{"use strict";var It=W(),to=class to{constructor(e){this._objType=e}append(){It.throwNotImplemented("appending element to collection")}copy(){It.throwNotImplemented("copying an object")}deleteElement(){It.throwNotImplemented("deleting an element from a collection")}getElement(){It.throwNotImplemented("getting an element from a collection")}getFirstIndex(){It.throwNotImplemented("getting the first index in a collection")}getKeys(){It.throwNotImplemented("returning the keys of a collection")}getLastIndex(){It.throwNotImplemented("getting the last index in a collection")}getNextIndex(){It.throwNotImplemented("getting the next index in a collection")}getPrevIndex(){It.throwNotImplemented("getting the previous index in a collection")}getValues(){It.throwNotImplemented("getting the values in a collection")}hasElement(){It.throwNotImplemented("getting if value exists in a collection")}setElement(){It.throwNotImplemented("setting an element in a collection")}trim(){It.throwNotImplemented("trimming elements from a collection")}};_(to,"DbObjectImpl");var eo=to;iN.exports=eo});var yt=R((XO,oN)=>{"use strict";var Hm=ot(),Tn=W(),ae=At(),ro=class ro{constructor(){this.autoCommit=!1,this.connectionClass="",this.dbObjectAsPojo=!1,this.edition="",this.errorOnConcurrentExecute=!1,this.events=!1,this.externalAuth=!1,this.fetchArraySize=100,this.fetchAsBuffer=[],this.fetchAsString=[],this.lobPrefetchSize=16384,this.maxRows=0,this.outFormat=Hm.OUT_FORMAT_ARRAY,this.poolIncrement=1,this.poolMax=4,this.poolMaxPerShard=0,this.poolMin=0,this.poolPingInterval=60,this.poolTimeout=60,this.prefetchRows=2,this.queueTimeout=6e4,this.queueMax=500,this.stmtCacheSize=30,this.thin=!0,this.thinDriverInitialized=!1,this.createFetchTypeMap(this.fetchAsString,this.fetchAsBuffer),this.fetchTypeHandler=void 0}_getDateComponents(e,t){return e?[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()*1e3*1e3]:[t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()*1e3*1e3]}_makeDate(e,t,s,n,i,a,c,T,E){return e?new Date(t,s-1,n,i,a,c,T):new Date(Date.UTC(t,s-1,n,i,a,c,T)-E*6e4)}addToOptions(e){for(let t=1;t<arguments.length;t++){let s=arguments[t];e[s]===void 0&&(e[s]=this[s])}}createFetchTypeMap(e,t){let s=new Map(ae.DB_TYPE_FETCH_TYPE_MAP);for(let n of e)switch(n){case ae.DB_TYPE_NUMBER:s.set(ae.DB_TYPE_BINARY_DOUBLE,ae.DB_TYPE_VARCHAR),s.set(ae.DB_TYPE_BINARY_FLOAT,ae.DB_TYPE_VARCHAR),s.set(ae.DB_TYPE_BINARY_INTEGER,ae.DB_TYPE_VARCHAR),s.set(ae.DB_TYPE_NUMBER,ae.DB_TYPE_VARCHAR);break;case ae.DB_TYPE_TIMESTAMP:s.set(ae.DB_TYPE_DATE,ae.DB_TYPE_VARCHAR),s.set(ae.DB_TYPE_TIMESTAMP,ae.DB_TYPE_VARCHAR),s.set(ae.DB_TYPE_TIMESTAMP_TZ,ae.DB_TYPE_VARCHAR),s.set(ae.DB_TYPE_TIMESTAMP_LTZ,ae.DB_TYPE_VARCHAR);break;case ae.DB_TYPE_CLOB:case ae.DB_TYPE_NCLOB:s.set(ae.DB_TYPE_CLOB,ae.DB_TYPE_LONG),s.set(ae.DB_TYPE_NCLOB,ae.DB_TYPE_LONG_NVARCHAR);break;case ae.DB_TYPE_RAW:s.set(ae.DB_TYPE_RAW,ae.DB_TYPE_VARCHAR);break;case ae.DB_TYPE_JSON:s.set(ae.DB_TYPE_JSON,ae.DB_TYPE_VARCHAR);break;default:Tn.throwErr(Tn.ERR_INVALID_TYPE_FOR_CONVERSION)}for(let n of t)switch(n){case ae.DB_TYPE_BLOB:s.set(ae.DB_TYPE_BLOB,ae.DB_TYPE_LONG_RAW);break;default:Tn.throwErr(Tn.ERR_INVALID_TYPE_FOR_CONVERSION)}this.fetchTypeMap=s}};_(ro,"Settings");var so=ro;oN.exports=new so});var ln=R((QO,aN)=>{"use strict";var vm=yt(),J=W(),Km=require("util"),io=class io{constructor(){this._inProgress=!1,this._dbObjectTypes=new Map,this._requestQueue=[]}async _acquireLock(){this._inProgress&&(vm.errorOnConcurrentExecute&&J.throwErr(J.ERR_CONCURRENT_OPS),await new Promise((e,t)=>{let s={resolve:e,reject:t};this._requestQueue.push(s)})),this._inProgress=!0}_getConnImpl(){return this}_getDbObjectType(e,t,s,n){let i;if(n&&(i=this._dbObjectTypes.get(n),i))return i;let a=s?`${e}.${s}.${t}`:`${e}.${t}`;return i=this._dbObjectTypes.get(a),i||(i={oid:n,fqn:a,schema:e,name:t,packageName:s,partial:!0,isXmlType:e==="SYS"&&t==="XMLTYPE"},this._dbObjectTypes.set(a,i)),n&&!i.oid&&(i.oid=n,this._dbObjectTypes.set(n,i)),i}_isDate(e){return Km.isDate(e)}_releaseLock(){this._requestQueue.length>0?this._requestQueue.shift().resolve():this._inProgress=!1}breakExecution(){J.throwNotImplemented("getting Oracle Server version number")}changePassword(){J.throwNotImplemented("changing the password")}close(){J.throwNotImplemented("closing the connection")}commit(){J.throwNotImplemented("committing the transaction")}createLob(){J.throwNotImplemented("creating a temporary LOB")}execute(){J.throwNotImplemented("executing a SQL statement")}executeMany(){J.throwNotImplemented("executing a SQL statement multiple times")}getCallTimeout(){J.throwNotImplemented("getting call timeout")}getCurrentSchema(){J.throwNotImplemented("getting current schema")}getDbObjectClass(){J.throwNotImplemented("getting a database object class")}getExternalName(){J.throwNotImplemented("getting the external name")}getInternalName(){J.throwNotImplemented("getting the internal name")}getOracleServerVersion(){J.throwNotImplemented("getting Oracle Server version number")}getOracleServerVersionString(){J.throwNotImplemented("getting Oracle Server version as a string")}getQueue(){J.throwNotImplemented("getting a queue")}getSodaDatabase(){J.throwNotImplemented("getting a SODA database")}getStatementInfo(){J.throwNotImplemented("getting information about a statement")}getStmtCacheSize(){J.throwNotImplemented("getting the statement cache size")}getTag(){J.throwNotImplemented("getting the tag for the connection")}isHealthy(){J.throwNotImplemented("getting the health of the connection")}ping(){J.throwNotImplemented("sending a ping to the database")}rollback(){J.throwNotImplemented("rolling back a transaction")}setAction(){J.throwNotImplemented("setting end-to-end attribute 'action'")}setCallTimeout(){J.throwNotImplemented("setting call timeout")}setClientId(){J.throwNotImplemented("setting end-to-end attribute 'clientId'")}setClientInfo(){J.throwNotImplemented("setting end-to-end attribute 'clientInfo'")}setCurrentSchema(){J.throwNotImplemented("setting the current schema")}setDbOp(){J.throwNotImplemented("setting end-to-end attribute 'dbOp'")}setECID(){J.throwNotImplemented("setting end-to-end attribute 'ecid'")}setExternalName(){J.throwNotImplemented("setting the external name")}setInternalName(){J.throwNotImplemented("setting the internal name")}setStmtCacheSize(){J.throwNotImplemented("setting the size of the statement cache")}setModule(){J.throwNotImplemented("setting end-to-end attribute 'module'")}setTag(){J.throwNotImplemented("setting the tag for the connection")}shutdown(){J.throwNotImplemented("shutting down the database instance")}startup(){J.throwNotImplemented("starting up the database instance")}subscribe(){J.throwNotImplemented("subscribing to events in the database")}tpcBegin(){J.throwNotImplemented("starting a two-phase transaction")}tpcCommit(){J.throwNotImplemented("committing a two-phase transaction")}tpcEnd(){J.throwNotImplemented("ending a two-phase transaction")}tpcForget(){J.throwNotImplemented("forgetting a two-phase transaction")}tpcPrepare(){J.throwNotImplemented("preparing a two-phase transaction")}tpcRollback(){J.throwNotImplemented("rolling back a two-phase transaction")}unsubscribe(){J.throwNotImplemented("unsubscribing from events")}};_(io,"ConnectionImpl");var no=io;aN.exports=no});var _o=R((ZO,_N)=>{"use strict";var Wm=ln(),En=W(),ao=class ao{_getConnImpl(){let e=this._parentObj;for(;!(e instanceof Wm);)e=e._parentObj;return e}close(){En.throwNotImplemented("closing a LOB")}getData(){En.throwNotImplemented("getting all of the data from a LOB")}read(){En.throwNotImplemented("reading from a LOB")}write(){En.throwNotImplemented("writing to a LOB")}};_(ao,"LobImpl");var oo=ao;_N.exports=oo});var lo=R((ty,cN)=>{"use strict";var Ze=W(),$m=pt(),To=class To{async _accessTokenHandler(e,t,s){let n;try{let i=e(s);i instanceof Promise&&(i=await i),$m.isTokenValid(i)||Ze.throwErr(Ze.ERR_TOKEN_HAS_EXPIRED),n=i}finally{this.returnAccessToken(t,n)}}close(){Ze.throwNotImplemented("closing the pool")}create(){Ze.throwNotImplemented("creating the pool")}getConnection(){Ze.throwNotImplemented("getting a connection from the pool")}getConnectionsInUse(){Ze.throwNotImplemented("getting num connection in use")}getConnectionsOpen(){Ze.throwNotImplemented("getting num connection open")}getPoolIncrement(){Ze.throwNotImplemented("getting the pool increment")}getPoolMax(){Ze.throwNotImplemented("getting the pool max")}getPoolMaxPerShard(){Ze.throwNotImplemented("getting the pool max per shard")}getPoolMin(){Ze.throwNotImplemented("getting the pool min")}getPoolPingInterval(){Ze.throwNotImplemented("getting the pool ping interval")}getPoolTimeout(){Ze.throwNotImplemented("getting the pool timeout")}getStmtCacheSize(){Ze.throwNotImplemented("getting the pool statement cache size")}getSodaMetaDataCache(){Ze.throwNotImplemented("getting the SODA metadata cache flag")}reconfigure(){Ze.throwNotImplemented("reconfiguring the pool")}setAccessToken(){Ze.throwNotImplemented("sets the access token")}};_(To,"PoolImpl");var co=To;cN.exports=co});var No=R((ry,lN)=>{"use strict";var zm=ot(),Kt=W(),Xm=pt(),TN=yt(),et=At(),uo=class uo{_determineFetchType(e,t){if(delete e.fetchType,delete e.converter,t.fetchTypeHandler){let s=t.fetchTypeHandler(e);s!==void 0&&(Kt.assert(typeof s=="object",Kt.ERR_FETCH_TYPE_HANDLER_RETURN_VALUE),s.type!==void 0&&Kt.assert(s.type instanceof et.DbType,Kt.ERR_FETCH_TYPE_HANDLER_TYPE),s.converter!==void 0&&Kt.assert(typeof s.converter=="function",Kt.ERR_FETCH_TYPE_HANDLER_CONVERTER),e.fetchType=s.type,e.converter=s.converter)}if(e.fetchType||(t.fetchTypeMap&&t.fetchTypeMap.has(e.name)?(e.fetchType=t.fetchTypeMap.get(e.name),e.fetchType===zm.DEFAULT&&(e.fetchType=et.DB_TYPE_FETCH_TYPE_MAP.get(e.dbType))):e.fetchType=TN.fetchTypeMap.get(e.dbType)),e.fetchType!==e.dbType){let s=et.DB_TYPE_CONVERSION_MAP.get(e.dbType),n=s&&s.get(e.fetchType);n||Kt.throwErr(Kt.ERR_UNSUPPORTED_CONVERSION,e.dbType.name,e.fetchType.name),e.fetchType=n}if(TN.thin){let s,n=e.converter;if(e.dbType===et.DB_TYPE_NUMBER&&e.fetchType===et.DB_TYPE_NUMBER?s=_(i=>i===null?null:parseFloat(i),"converter"):e.fetchType===et.DB_TYPE_VARCHAR&&(e.dbType===et.DB_TYPE_BINARY_DOUBLE||e.dbType===et.DB_TYPE_BINARY_FLOAT||e.dbType===et.DB_TYPE_DATE||e.dbType===et.DB_TYPE_TIMESTAMP||e.dbType===et.DB_TYPE_TIMESTAMP_LTZ||e.dbType===et.DB_TYPE_TIMESTAMP_TZ)&&(s=_(i=>i===null?null:i.toString(),"converter")),n&&s){let i=s;s=_(a=>n(i(a)),"converter")}s&&(e.converter=s)}}_getConnImpl(){return this._parentObj}_setup(e,t){this._parentObj=e.connection._impl,this.metaData=t,this.lobIndices=[],this.dbObjectIndices=[],this.nestedCursorIndices=[],this.converterIndices=[],this.outFormat=e.outFormat,this.fetchArraySize=e.fetchArraySize,this.dbObjectAsPojo=e.dbObjectAsPojo,this.maxRows=e.maxRows;let s=new Map;for(let n=0;n<t.length;n++){let i=t[n].name;s.has(i)||s.set(i,n)}for(let n=0;n<t.length;n++){let i=t[n];if(i.dbTypeClass){let c=e.connection._getDbObjectClass(i.dbTypeClass);i.dbTypeClass=c}Xm.addTypeProperties(i,"dbType"),this._determineFetchType(i,e),i.fetchType===et.DB_TYPE_CURSOR?this.nestedCursorIndices.push(n):i.fetchType===et.DB_TYPE_CLOB||i.fetchType===et.DB_TYPE_NCLOB||i.fetchType===et.DB_TYPE_BLOB?this.lobIndices.push(n):i.fetchType===et.DB_TYPE_OBJECT&&this.dbObjectIndices.push(n),i.converter&&this.converterIndices.push(n);let a=i.name;if(s.get(a)!==n){let c=0;for(;s.has(a);)c=c+1,a=`${i.name}_${c}`;s.set(a,n),i.name=a}}}close(){Kt.throwNotImplemented("closing a result set")}getRows(){Kt.throwNotImplemented("getting rows")}};_(uo,"ResultSetImpl");var Eo=uo;lN.exports=Eo});var uN=R((iy,EN)=>{"use strict";var mt=W(),ho=class ho{_getConnImpl(){return this._database._connection}createIndex(){mt.throwNotImplemented("creating an index on a SODA collection")}drop(){mt.throwNotImplemented("dropping a SODA collection")}dropIndex(){mt.throwNotImplemented("dropping an index on a SODA collection")}find(){mt.throwNotImplemented("creating a SODA operation")}getDataGuide(){mt.throwNotImplemented("getting the data guide for the collection")}getMetaData(){mt.throwNotImplemented("getting the metadata for the collection")}getName(){mt.throwNotImplemented("getting the name of the collection")}insertMany(){mt.throwNotImplemented("inserting multiple docs into a collection")}insertManyAndGet(){mt.throwNotImplemented("insert/return many docs in a collection")}insertOne(){mt.throwNotImplemented("inserting a single doc into a collection")}insertOneAndGet(){mt.throwNotImplemented("insert/return a single doc in a collection")}save(){mt.throwNotImplemented("saving a single doc in a collection")}saveAndGet(){mt.throwNotImplemented("saving a single doc in a collection")}truncate(){mt.throwNotImplemented("removing all docs from a collection")}};_(ho,"SodaCollectionImpl");var So=ho;EN.exports=So});var SN=R((ay,NN)=>{"use strict";var un=W(),po=class po{_getConnImpl(){return this._connection}createCollection(){un.throwNotImplemented("creating a SODA collection")}createDocument(){un.throwNotImplemented("creating a SODA document")}getCollectionNames(){un.throwNotImplemented("getting a list of SODA collection names")}openCollection(){un.throwNotImplemented("getting a list of SODA collection names")}};_(po,"SodaDatabaseImpl");var Ao=po;NN.exports=Ao});var dN=R((cy,AN)=>{"use strict";var hN=W(),fo=class fo{_getConnImpl(){return this._operation._getConnImpl()}close(){hN.throwNotImplemented("closing a SODA document cursor")}getNext(){hN.throwNotImplemented("getting a document from a SODA doc cursor")}};_(fo,"SodaDocCursorImpl");var mo=fo;AN.exports=mo});var mN=R((ly,pN)=>{"use strict";var Ys=W(),Ro=class Ro{getContentAsBuffer(){Ys.throwNotImplemented("getting doc content as a buffer")}getContentAsString(){Ys.throwNotImplemented("getting doc content as a string")}getCreatedOn(){Ys.throwNotImplemented("getting the created date of a document")}getKey(){Ys.throwNotImplemented("getting the key of a document")}getLastModified(){Ys.throwNotImplemented("getting the last modified date of a doc")}getMediaType(){Ys.throwNotImplemented("getting the media type of a document")}getVersion(){Ys.throwNotImplemented("getting the version of a document")}};_(Ro,"SodaDocumentImpl");var Po=Ro;pN.exports=Po});var PN=R((uy,fN)=>{"use strict";var ws=W(),Do=class Do{_getConnImpl(){return this._collection._database._connection}count(){ws.throwNotImplemented("getting a count of documents")}getCursor(){ws.throwNotImplemented("getting a cursor for documents")}getDocuments(){ws.throwNotImplemented("getting a cursor for documents")}getOne(){ws.throwNotImplemented("getting a single document")}remove(){ws.throwNotImplemented("removing documents from a collection")}replaceOne(){ws.throwNotImplemented("replacing a single document")}replaceOneAndGet(){ws.throwNotImplemented("replacing/returning a single document")}};_(Do,"SodaOperationImpl");var Io=Do;fN.exports=Io});var Js=R((Sy,RN)=>{"use strict";var jm=Ju(),Qm=eN(),Jm=sN(),Zm=nN(),ef=cn(),tf=ln(),sf=_o(),rf=lo(),nf=No(),of=uN(),af=SN(),_f=dN(),cf=mN(),Tf=PN();RN.exports={AqDeqOptionsImpl:jm,AqEnqOptionsImpl:Qm,AqMessageImpl:Jm,AqQueueImpl:Zm,DbObjectImpl:ef,ConnectionImpl:tf,LobImpl:sf,PoolImpl:rf,ResultSetImpl:nf,SodaCollectionImpl:of,SodaDatabaseImpl:af,SodaDocCursorImpl:_f,SodaDocumentImpl:cf,SodaOperationImpl:Tf}});var Oo=R((hy,IN)=>{"use strict";var{Buffer:lf}=require("buffer"),rs=ot(),ns=W(),go=class go{get condition(){return this._impl.getCondition()}set condition(e){ns.assertPropValue(typeof e=="string","condition"),this._impl.setCondition(e)}get consumerName(){return this._impl.getConsumerName()}set consumerName(e){ns.assertPropValue(typeof e=="string","consumerName"),this._impl.setConsumerName(e)}get correlation(){return this._impl.getCorrelation()}set correlation(e){ns.assertPropValue(typeof e=="string","correlation"),this._impl.setCorrelation(e)}get mode(){return this._impl.getMode()}set mode(e){ns.assertPropValue(e===rs.AQ_DEQ_MODE_BROWSE||e===rs.AQ_DEQ_MODE_LOCKED||e===rs.AQ_DEQ_MODE_REMOVE||e===rs.AQ_DEQ_MODE_REMOVE_NO_DATA,"mode"),this._impl.setMode(e)}get msgId(){return this._impl.getMsgId()}set msgId(e){ns.assertPropValue(lf.isBuffer(e),"msgId"),this._impl.setMsgId(e)}get navigation(){return this._impl.getNavigation()}set navigation(e){ns.assertPropValue(e===rs.AQ_DEQ_NAV_FIRST_MSG||e===rs.AQ_DEQ_NAV_NEXT_TRANSACTION||e===rs.AQ_DEQ_NAV_NEXT_MSG,"navigation"),this._impl.setNavigation(e)}get transformation(){return this._impl.getTransformation()}set transformation(e){ns.assertPropValue(typeof e=="string","transformation"),this._impl.setTransformation(e)}get visibility(){return this._impl.getVisibility()}set visibility(e){ns.assertPropValue(e===rs.AQ_VISIBILITY_IMMEDIATE||e===rs.AQ_VISIBILITY_ON_COMMIT,"visibility"),this._impl.setVisibility(e)}get wait(){return this._impl.getWait()}set wait(e){ns.assertPropValue(Number.isInteger(e)&&e>=0,"wait"),this._impl.setWait(e)}};_(go,"AqDeqOptions");var Co=go;IN.exports=Co});var Yo=R((dy,DN)=>{"use strict";var pr=ot(),yo=W(),Bo=class Bo{get deliveryMode(){return this._impl.getDeliveryMode()}set deliveryMode(e){yo.assertPropValue(e===pr.AQ_MSG_DELIV_MODE_PERSISTENT||e===pr.AQ_MSG_DELIV_MODE_BUFFERED||e===pr.AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED,"deliveryMode"),this._impl.setDeliveryMode(e)}get transformation(){return this._impl.getTransformation()}set transformation(e){yo.assertPropValue(typeof e=="string","transformation"),this._impl.setTransformation(e)}get visibility(){return this._impl.getVisibility()}set visibility(e){yo.assertPropValue(e===pr.AQ_VISIBILITY_IMMEDIATE||e===pr.AQ_VISIBILITY_ON_COMMIT,"visibility"),this._impl.setVisibility(e)}};_(Bo,"AqEnqOptions");var Lo=Bo;DN.exports=Lo});var Mo=R((my,CN)=>{"use strict";var Ef=cn(),Uo=class Uo{get correlation(){return this._impl.getCorrelation()}get delay(){return this._impl.getDelay()}get deliveryMode(){return this._impl.getDeliveryMode()}get exceptionQueue(){return this._impl.getExceptionQueue()}get expiration(){return this._impl.getExpiration()}get msgId(){return this._impl.getMsgId()}get numAttempts(){return this._impl.getNumAttempts()}get originalMsgId(){return this._impl.getOriginalMsgId()}get payload(){let e=this._impl.getPayload();if(e instanceof Ef){let t=Object.create(this._payloadTypeClass.prototype);return t._impl=e,t}return e}get priority(){return this._impl.getPriority()}get state(){return this._impl.getState()}};_(Uo,"AqMessage");var wo=Uo;CN.exports=wo});var Zs=R((Py,ON)=>{"use strict";var{Buffer:Vo}=require("buffer"),{Duplex:uf}=require("stream"),gN=ot(),ft=W(),xo=pt(),Nf=At(),bo=class bo extends uf{constructor(){super({decodeStrings:!1}),this.offset=1,this._isActive=!1,this.once("finish",function(){this._autoCloseLob&&this.destroy()})}async _destroy(e,t){if(e&&e.message.startsWith("NJS-108:")&&delete this._impl,this._impl){let s=this._impl;delete this._impl;try{await s.close()}catch(n){t(n);return}}t(e)}async _read(){try{let e=await this._serializedRead(this.offset);e?(this.offset+=e.length,this.push(e)):(this.push(null),this._autoCloseLob&&this.destroy())}catch(e){throw this._autoCloseLob&&this.destroy(e),e}}async _readData(e){ft.assert(this._impl,ft.ERR_INVALID_LOB);try{return await this._impl.read(e)}catch(t){throw ft.transformErr(t,this._readData)}}_setup(e,t){this._impl=e,this._chunkSize=e.getChunkSize(),this._pieceSize=e.getPieceSize(),this._length=e.getLength(),this._type=e.getType(),typeof this._type=="number"&&(this._type=Nf.getTypeByNum(this._type)),this._autoCloseLob=t}async _write(e,t,s){this.type==gN.DB_TYPE_BLOB&&!Vo.isBuffer(e)?e=Vo.from(e):this.type==gN.DB_TYPE_CLOB&&Vo.isBuffer(e)&&(e=e.toString());try{await this._serializedWrite(this.offset,e)}catch(n){this._autoCloseLob&&this.destroy(n),s(n);return}this.offset+=e.length,s(null)}async _writeData(e,t){ft.assert(this._impl,ft.ERR_INVALID_LOB);try{await this._impl.write(e,t)}catch(s){throw ft.transformErr(s,this._writeData)}}get chunkSize(){return this._chunkSize}async close(){if(ft.assertArgCount(arguments,0,0),this._impl){let e=this._impl;delete this._impl;try{await e.close(),this.emit("close")}catch(t){this.destroy(t)}}}async getData(){return ft.assertArgCount(arguments,0,0),ft.assert(this._impl,ft.ERR_INVALID_LOB),await this._impl.getData()}get length(){return this._length}get pieceSize(){return this._pieceSize}set pieceSize(e){ft.assertPropValue(Number.isInteger(e)&&e>=0,"pieceSize"),ft.assert(this._impl,ft.ERR_INVALID_LOB),this._impl.setPieceSize(e),this._pieceSize=e}get type(){return this._type}};_(bo,"Lob");var ms=bo;xo.wrapFns(ms.prototype,ft.ERR_BUSY_LOB,"close","getData");ms.prototype._serializedRead=xo.serialize(ms.prototype._readData);ms.prototype._serializedWrite=xo.serialize(ms.prototype._writeData);ON.exports=ms});var qo=R((Iy,yN)=>{"use strict";var Sf=require("process"),{Readable:hf}=require("stream"),ko=class ko extends hf{constructor(e){super({objectMode:!0}),this._fetching=!1,this._numRows=0,e&&Sf.nextTick(()=>{this._open(e)})}async _destroy(e,t){if(this._resultSet){let s=this._resultSet;this._resultSet=null,this._fetching&&await new Promise(n=>this.once("_doneFetching",n));try{await s._impl.close()}catch(n){t(n);return}}t(e)}_open(e){this._resultSet=e,this.emit("open"),this.emit("metadata",e.metaData)}async _read(){if(!this._resultSet){this.once("open",this._read);return}try{this._fetching=!0,this._resultSet._allowGetRowCall=!0;let e=await this._resultSet.getRow();e?this.push(e):this.push(null)}catch(e){this.destroy(e)}finally{this._fetching=!1,this._resultSet?this._resultSet._allowGetRowCall=!1:this.emit("_doneFetching")}}};_(ko,"QueryStream");var Fo=ko;yN.exports=Fo});var hn=R((Cy,LN)=>{"use strict";var Af=qo(),df=er(),pf=pt(),mf=ot(),ff=Zs(),we=W(),Sn=class Sn{constructor(){this._rowCache=[],this._processingStarted=!1,this._convertedToStream=!1,this._allowGetRowCall=!1,this._isActive=!1}async _getAllRows(){try{let e=this._impl.maxRows,t=this._impl.fetchArraySize,s=[];for(;;){e>0&&t>=e&&(t=e);let n=await this._getRows(t);if(n&&(await this._processRows(n,!0),s=s.concat(n)),n.length==e||n.length<t)break;e>0&&(e-=n.length)}return s}finally{await this._impl.close(),delete this._impl}}async _getRows(e){let t={};return this._impl.nestedCursorIndices.length>0&&(t={connection:this._connection,outFormat:this._impl.outFormat,fetchArraySize:this._impl.fetchArraySize,dbObjectAsPojo:this._impl.dbObjectAsPojo,maxRows:this._impl.maxRows,fetchTypeMap:this._impl.fetchTypeMap}),await this._impl.getRows(e,t)}async _processRows(e,t){for(let s of this._impl.nestedCursorIndices)for(let n=0;n<e.length;n++){let i=e[n][s];if(i){let a=new Sn;a._setup(this._connection,i),this._impl.metaData[s].metaData=i.metaData,t?e[n][s]=await a._getAllRows():e[n][s]=a}}for(let s of this._impl.lobIndices)for(let n=0;n<e.length;n++){let i=e[n][s];i&&(e[n][s]=new ff)._setup(i,!0)}for(let s of this._impl.dbObjectIndices){let n=this._impl.metaData[s].dbTypeClass;for(let i=0;i<e.length;i++){let a=e[i][s];if(a){let c=e[i][s]=Object.create(n.prototype);c._impl=a,this._impl.dbObjectAsPojo?e[i][s]=c._toPojo():c.isCollection&&(e[i][s]=new Proxy(c,df._collectionProxyHandler))}}}for(let s of this._impl.converterIndices){let n=this._impl.metaData[s].converter;this._connection._impl._inProgress=!1;try{for(let i=0;i<e.length;i++){let a=n(e[i][s]);a instanceof Promise&&(a=await a),e[i][s]=a}}finally{this._connection._impl._inProgress=!0}}if(this._impl.outFormat===mf.OUT_FORMAT_OBJECT)for(let s=0;s<e.length;s++){let n=e[s],i=e[s]={},a=this._impl.metaData;for(let c=0;c<a.length;c++)i[a[c].name]=n[c]}}_setup(e,t){this._connection=e,this._impl=t}async close(){we.assertArgCount(arguments,0,0),we.assert(this._impl&&this._connection._impl,we.ERR_INVALID_RS),this._convertedToStream&&we.throwErr(we.ERR_CANNOT_INVOKE_RS_METHODS),this._processingStarted=!0;let e=this._impl;delete this._impl,await e.close()}async getRow(){if(we.assertArgCount(arguments,0,0),we.assert(this._impl&&this._connection._impl,we.ERR_INVALID_RS),this._convertedToStream&&!this._allowGetRowCall&&we.throwErr(we.ERR_CANNOT_INVOKE_RS_METHODS),this._allowGetRowCall=!1,this._processingStarted=!0,this._rowCache.length==0){let e=await this._getRows(this._impl.fetchArraySize);await this._processRows(e,!1),this._rowCache=e}return this._rowCache.shift()}async getRows(e){let t;we.assertArgCount(arguments,0,1),we.assert(this._impl&&this._connection._impl,we.ERR_INVALID_RS),arguments.length==0?e=0:we.assertParamValue(Number.isInteger(e)&&e>=0,1),this._convertedToStream&&we.throwErr(we.ERR_CANNOT_INVOKE_RS_METHODS),this._processingStarted=!0;let s;if(e==0){s=this._rowCache;let n=this._impl.fetchArraySize;for(;;){let i=await this._getRows(n);if(i&&(await this._processRows(i,!1),s=s.concat(i)),i.length<n)break}return s}if(this._rowCache.length===0)s=await this._getRows(e),await this._processRows(s,!1);else if(t=e-this._rowCache.length,t<=0)s=this._rowCache.splice(0,e);else{let n=await this._getRows(t);await this._processRows(n,!1),s=this._rowCache.concat(n),this._rowCache=[]}return s}get metaData(){if(this._impl)return this._impl.metaData}toQueryStream(){return we.assertArgCount(arguments,0,0),this._processingStarted&&we.throwErr(we.ERR_CANNOT_CONVERT_RS_TO_STREAM),this._convertedToStream&&we.throwErr(we.ERR_RS_ALREADY_CONVERTED),this._convertedToStream=!0,new Af(this)}[Symbol.asyncIterator](){let e=this;return{async next(){let t=await e.getRow();return{value:t,done:t===void 0}},return(){return{done:!0}}}}};_(Sn,"ResultSet");var Nn=Sn;pf.wrapFns(Nn.prototype,we.ERR_BUSY_RS,"close","getRow","getRows");LN.exports=Nn});var Ko=R((Oy,wN)=>{"use strict";var Go=er(),{Buffer:Ho}=require("buffer"),Pf=Zs(),Rf=hn(),If=ot(),Ue=W(),BN=require("util"),Re=At();function is(r,e){if(r.type===void 0&&arguments.length>2)r.type=arguments[2];else{let t=!1;for(let s=2;s<arguments.length;s++)if(r.type===arguments[s]){t=!0;break}t||(r.attrName?Ue.throwErr(Ue.ERR_WRONG_VALUE_FOR_DBOBJECT_ATTR,r.attrName,r.fqn):r.fqn?Ue.throwErr(Ue.ERR_WRONG_VALUE_FOR_DBOBJECT_ELEM,r.fqn):r.isArray&&r.name?Ue.throwErr(Ue.ERR_INCOMPATIBLE_TYPE_ARRAY_BIND,e.pos,r.name):r.isArray?Ue.throwErr(Ue.ERR_INCOMPATIBLE_TYPE_ARRAY_INDEX_BIND,e.pos,r.pos):Ue.throwErr(Ue.ERR_BIND_VALUE_AND_TYPE_MISMATCH))}}_(is,"checkType");function vo(r){if(r==null||typeof r=="number"||typeof r=="string"||typeof r=="boolean"||Ho.isBuffer(r)||BN.isDate(r))return r;if(Array.isArray(r)){let t=new Array(r.length);for(let s=0;s<r.length;s++)t[s]=vo(r[s]);return t}if(r instanceof Go)return{fields:[],values:[]};let e={};e.fields=Object.getOwnPropertyNames(r),e.values=new Array(e.fields.length);for(let t=0;t<e.fields.length;t++)e.values[t]=vo(r[e.fields[t]]);return e}_(vo,"transformJsonValue");function YN(r,e,t){if(e!=null){if(r.type===Re.DB_TYPE_OBJECT){let s=e;return e instanceof Go||(s=new r.typeClass(e)),s._impl}else{if(r.type===Re.DB_TYPE_JSON)return vo(e);if(typeof e=="string"){if(is(r,t,Re.DB_TYPE_VARCHAR,Re.DB_TYPE_NVARCHAR,Re.DB_TYPE_CHAR,Re.DB_TYPE_NCHAR,Re.DB_TYPE_CLOB,Re.DB_TYPE_NCLOB),r.type!==Re.DB_TYPE_CLOB&&r.type!==Re.DB_TYPE_NCLOB){let s=Ho.byteLength(e);(r.maxSize===void 0||s>r.maxSize)&&(r.checkSize&&Ue.throwErr(Ue.ERR_MAX_SIZE_TOO_SMALL,r.maxSize,s,t.pos),r.maxSize=s)}return e}else{if(typeof e=="number")return is(r,t,Re.DB_TYPE_NUMBER,Re.DB_TYPE_BINARY_INTEGER,Re.DB_TYPE_BINARY_FLOAT,Re.DB_TYPE_BINARY_DOUBLE),Number.isNaN(e)&&r.type===Re.DB_TYPE_NUMBER&&Ue.throwErr(Ue.ERR_NAN_VALUE),e;if(typeof e=="boolean")return is(r,t,Re.DB_TYPE_BOOLEAN),e;if(BN.isDate(e))return is(r,t,Re.DB_TYPE_TIMESTAMP,Re.DB_TYPE_TIMESTAMP_TZ,Re.DB_TYPE_TIMESTAMP_LTZ,Re.DB_TYPE_DATE),e;if(Ho.isBuffer(e))return is(r,t,Re.DB_TYPE_RAW,Re.DB_TYPE_BLOB),r.type===Re.DB_TYPE_RAW&&(r.maxSize===void 0||e.length>r.maxSize)&&(r.checkSize&&Ue.throwErr(Ue.ERR_MAX_SIZE_TOO_SMALL,r.maxSize,e.length,t.pos),r.maxSize=e.length),e;if(e instanceof Rf)return is(r,t,Re.DB_TYPE_CURSOR),e._impl;if(e instanceof Pf)return is(r,t,e.type),e._impl;if(e instanceof Go)return is(r,t,Re.DB_TYPE_OBJECT),e._impl;if(t.allowArray&&Array.isArray(e)){r.isArray=!0,r.dir===If.BIND_IN?r.maxArraySize=e.length||1:r.maxArraySize===void 0?Ue.throwErr(Ue.ERR_REQUIRED_MAX_ARRAY_SIZE):e.length>r.maxArraySize&&Ue.throwErr(Ue.ERR_INVALID_ARRAY_SIZE),t.allowArray=!1;let s=new Array(e.length);for(let n=0;n<e.length;n++)t.pos=n,s[n]=YN(r,e[n],t);return s}}}r.type===void 0&&Ue.throwErr(Ue.ERR_INVALID_BIND_DATA_TYPE,2),is(r,t)}}_(YN,"transformValueIn");wN.exports={transformValueIn:YN}});var er=R((Ly,MN)=>{"use strict";var Df=Zs(),UN=Js(),xe=W(),Cf=At(),Wo=require("util"),mr=class mr{_getAttrValue(e){let t=this._impl.getAttrValue(e);return this._transformValueOut(t,e.typeClass)}_setAttrValue(e,t){let s={fqn:this._objType.fqn,attrName:e.name,type:e.type,typeClass:e.typeClass},n={allowArray:!1};t=$o.transformValueIn(s,t,n),this._impl.setAttrValue(e,t)}_toPojo(){if(this.isCollection){let t=this.getValues();if(this.elementType===Cf.DB_TYPE_OBJECT)for(let s=0;s<t.length;s++)t[s]=t[s]._toPojo();return t}let e={};for(let t in this.attributes){let s=this[t];s instanceof mr&&(s=s._toPojo()),e[t]=s}return e}_transformValueOut(e,t){let s=e;return e instanceof UN.LobImpl?(s=new Df,s._setup(e,!0)):e instanceof UN.DbObjectImpl&&(s=Object.create(t.prototype),s._impl=e,s.isCollection&&(s=new Proxy(s,mr._collectionProxyHandler))),s}append(e){xe.assertArgCount(arguments,1,1);let t={fqn:this._objType.fqn,type:this._objType.elementType,typeClass:this._objType.elementTypeClass},s={allowArray:!1};e=$o.transformValueIn(t,e,s),this._impl.append(e)}get attributes(){if(!this._attributes){let e=this._objType.attributes||[],t={};for(let s=0;s<e.length;s++){let n=e[s],i={type:n.type,typeName:n.typeName};n.typeClass&&(i.typeClass=n.typeClass),t[n.name]=i}this._attributes=t}return this._attributes}deleteElement(e){return xe.assertArgCount(arguments,1,1),xe.assertParamValue(Number.isInteger(e),1),this._impl.deleteElement(e)}get elementType(){return this._objType.elementType}get elementTypeClass(){return this._objType.elementTypeClass}get elementTypeName(){return this._objType.elementTypeName}get fqn(){return this._objType.fqn}getElement(e){xe.assertArgCount(arguments,1,1),xe.assertParamValue(Number.isInteger(e),1);let t=this._impl.getElement(e);return this._transformValueOut(t,this.elementTypeClass)}getKeys(){return xe.assertArgCount(arguments,0,0),this._impl.getKeys()}getFirstIndex(){return xe.assertArgCount(arguments,0,0),this._impl.getFirstIndex()}getLastIndex(){return xe.assertArgCount(arguments,0,0),this._impl.getLastIndex()}getNextIndex(e){return xe.assertArgCount(arguments,1,1),xe.assertParamValue(Number.isInteger(e),1),this._impl.getNextIndex(e)}getPrevIndex(e){return xe.assertArgCount(arguments,1,1),xe.assertParamValue(Number.isInteger(e),1),this._impl.getPrevIndex(e)}getValues(){xe.assertArgCount(arguments,0,0);let e=this._impl.getValues();for(let t=0;t<e.length;t++)e[t]=this._transformValueOut(e[t],this.elementTypeClass);return e}hasElement(e){return xe.assertArgCount(arguments,1,1),xe.assertParamValue(Number.isInteger(e),1),this._impl.hasElement(e)}get isCollection(){return this._objType.isCollection}get name(){return this._objType.name}get schema(){return this._objType.schema}setElement(e,t){xe.assertArgCount(arguments,2,2),xe.assertParamValue(Number.isInteger(e),1);let s={fqn:this._objType.fqn,type:this._objType.elementType,typeClass:this._objType.elementTypeClass},n={allowArray:!1};t=$o.transformValueIn(s,t,n),this._impl.setElement(e,t)}trim(e){xe.assertArgCount(arguments,1,1),xe.assertParamValue(Number.isInteger(e)&&e>=0,1),this._impl.trim(e)}[Wo.inspect.custom](e,t){return"["+this.fqn+"] "+Wo.inspect(this._toPojo(),t)}[Symbol.iterator](){if(this.isCollection)return this.getValues()[Symbol.iterator]();throw TypeError("obj is not iterable")}[Symbol.toPrimitive](e){switch(e){case"number":return NaN;default:return"["+this.fqn+"] "+Wo.inspect(this._toPojo(),{})}}get[Symbol.toStringTag](){return this.fqn}toJSON(){return this._toPojo()}};_(mr,"BaseDbObject");var fr=mr;function gf(r){return function(){try{return r.apply(this,arguments)}catch(e){throw xe.transformErr(e,xe.transformErr)}}}_(gf,"transformErr");function Of(r){for(let e=1;e<arguments.length;e++){let t=arguments[e];r[t]=gf(r[t])}}_(Of,"wrapFns");Of(fr.prototype,"_getAttrValue","_setAttrValue","append","deleteElement","getElement","getKeys","getFirstIndex","getLastIndex","getNextIndex","getPrevIndex","getValues","hasElement","setElement","trim");fr._collectionProxyHandler={deleteProperty(r,e){if(typeof e=="string"){let t=+e;if(!isNaN(t))return r.deleteElement(t)}return delete r[e]},get(r,e){if(typeof e=="string"){let s=+e;if(!isNaN(s))return r.getElement(s)}let t=r[e];return typeof t=="function"?t.bind(r):t},set(r,e,t){if(typeof e=="string"){let s=+e;if(!isNaN(s))return r.setElement(s,t),!0}return r[e]=t,!0}};MN.exports=fr;var $o=Ko()});var Qo=R((Yy,FN)=>{"use strict";var{Buffer:zo}=require("buffer"),VN=ot(),Nt=W(),Xo=pt(),yf=Oo(),Lf=Yo(),xN=Mo(),bN=er(),jo=class jo{_isPayload(e){return typeof e=="string"||zo.isBuffer(e)||e instanceof bN}_verifyMessage(e){let t;return this._isPayload(e)?(t=e,e={}):(e={...e},this._isPayload(e.payload)?t=e.payload:this._payloadTypeClass?t=new this._payloadTypeClass(e.payload):Nt.throwErr(Nt.ERR_INVALID_AQ_MESSAGE)),typeof t=="string"?e.payload=zo.from(t):zo.isBuffer(t)?e.payload=t:e.payload=t._impl,e.correlation!==void 0&&Nt.assertParamPropValue(typeof e.correlation=="string",1,"correlation"),e.delay!==void 0&&Nt.assertParamPropValue(Number.isInteger(e.delay),1,"delay"),e.exceptionQueue!==void 0&&Nt.assertParamPropValue(typeof e.exceptionQueue=="string",1,"exceptionQueue"),e.expiration!==void 0&&Nt.assertParamPropValue(Number.isInteger(e.expiration),1,"expiration"),e.priority!==void 0&&Nt.assertParamPropValue(Number.isInteger(e.priority),1,"priority"),e.recipients!==void 0&&Nt.assertParamPropValue(Xo.isArrayOfStrings(e.recipients),1,"recipients"),e}async create(e,t,s){if(s.payloadType){if(typeof s.payloadType=="string"){let n=await e._getDbObjectClassForName(s.payloadType);this._payloadTypeClass=n,s.payloadType=n}else Nt.assertParamPropValue(Xo.isObject(s.payloadType)&&s.payloadType.prototype instanceof bN,2,"payloadType"),this._payloadTypeClass=s.payloadType;this._payloadType=VN.DB_TYPE_OBJECT,this._payloadTypeName=this._payloadTypeClass.prototype.name}else this._payloadType=VN.DB_TYPE_RAW,this._payloadTypeName="RAW";this._name=t,this._impl=await e._impl.getQueue(t,s)}async deqMany(e){Nt.assertArgCount(arguments,1,1),Nt.assertParamValue(Number.isInteger(e)&&e>0,1);let t=await this._impl.deqMany(e),s=new Array(t.length);for(let n=0;n<t.length;n++){let i=new xN;i._impl=t[n],i._payloadTypeClass=this._payloadTypeClass,s[n]=i}return s}async deqOne(){Nt.assertArgCount(arguments,0,0);let e=await this._impl.deqOne();if(e){let t=new xN;return t._impl=e,t._payloadTypeClass=this._payloadTypeClass,t}}get deqOptions(){if(!this._deqOptions){let e=new yf;e._impl=this._impl.deqOptions,this._deqOptions=e}return this._deqOptions}async enqMany(e){Nt.assertArgCount(arguments,1,1),Nt.assertParamValue(Array.isArray(e)&&e.length>0,1);let t=new Array(e.length);for(let s=0;s<e.length;s++)t[s]=this._verifyMessage(e[s]);return await this._impl.enqMany(t)}async enqOne(e){return Nt.assertArgCount(arguments,1,1),e=this._verifyMessage(e),await this._impl.enqOne(e)}get enqOptions(){if(!this._enqOptions){let e=new Lf;e._impl=this._impl.enqOptions,this._enqOptions=e}return this._enqOptions}get name(){return this._name}get payloadType(){return this._payloadType}get payloadTypeName(){return this._payloadTypeName}get payloadTypeClass(){return this._payloadTypeClass}};_(jo,"AqQueue");var An=jo;Xo.wrapFns(An.prototype,"deqOne","deqMany","enqOne","enqMany");FN.exports=An});var tr=R((Uy,kN)=>{"use strict";var Jo=class Jo{get createdOn(){return this._impl.getCreatedOn()}getContent(){return JSON.parse(this._impl.getContentAsString())}getContentAsBuffer(){return this._impl.getContentAsBuffer()}getContentAsString(){return this._impl.getContentAsString()}get key(){return this._impl.getKey()}get lastModified(){return this._impl.getLastModified()}get mediaType(){return this._impl.getMediaType()}get version(){return this._impl.getVersion()}};_(Jo,"SodaDocument");var dn=Jo;dn.prototype._sodaDocumentMarker=!0;kN.exports=dn});var ea=R((Vy,qN)=>{"use strict";var sr=W(),Bf=pt(),Yf=tr(),Zo=class Zo{async close(){sr.assertArgCount(arguments,0,0),sr.assert(this._impl,sr.ERR_INVALID_SODA_DOC_CURSOR),await this._impl.close(),delete this._impl}async getNext(){sr.assertArgCount(arguments,0,0),sr.assert(this._impl,sr.ERR_INVALID_SODA_DOC_CURSOR);let e=await this._impl.getNext();if(e){let t=new Yf;return t._impl=e,t}}};_(Zo,"SodaDocCursor");var pn=Zo;Bf.wrapFns(pn.prototype,"close","getNext");qN.exports=pn});var ra=R((by,HN)=>{"use strict";var wf=ea(),ta=tr(),Oe=W(),mn=pt(),GN=yt(),sa=class sa{constructor(){this._options={autoCommit:GN.autoCommit,fetchArraySize:GN.fetchArraySize}}async count(){return Oe.assertArgCount(arguments,0,0),await this._impl.count(this._options)}async getCursor(){Oe.assertArgCount(arguments,0,0);let e=new wf;return e._impl=await this._impl.getCursor(this._options),e}async getDocuments(){Oe.assertArgCount(arguments,0,0);let e=await this._impl.getDocuments(this._options),t=new Array(e.length);for(let s=0;s<e.length;s++)t[s]=new ta,t[s]._impl=e[s];return t}async getOne(){Oe.assertArgCount(arguments,0,0);let e=await this._impl.getOne(this._options);if(e){let t=new ta;return t._impl=e,t}}async replaceOne(e){return Oe.assertArgCount(arguments,1,1),e=mn.verifySodaDoc(e),await this._impl.replaceOne(this._options,e)}async replaceOneAndGet(e){Oe.assertArgCount(arguments,1,1),e=mn.verifySodaDoc(e);let t=await this._impl.replaceOneAndGet(this._options,e);if(t){let s=new ta;return s._impl=t,s}}async remove(){return Oe.assertArgCount(arguments,0,0),await this._impl.remove(this._options)}fetchArraySize(e){return Oe.assertArgCount(arguments,1,1),Oe.assertParamValue(Number.isInteger(e)&&e>=0,1),this._options.fetchArraySize=e,this}filter(e){return Oe.assertArgCount(arguments,1,1),Oe.assertParamValue(mn.isObject(e),1),this._options.filter=JSON.stringify(e),this}hint(e){return Oe.assertArgCount(arguments,1,1),Oe.assertParamValue(typeof e=="string",1),this._options.hint=e,this}key(e){return Oe.assertArgCount(arguments,1,1),Oe.assertParamValue(typeof e=="string",1),this._options.key=e,this._options.keys=void 0,this}keys(e){Oe.assertArgCount(arguments,1,1),Oe.assertParamValue(Array.isArray(e),1);for(let t=0;t<e.length;t++)Oe.assertParamValue(typeof e[t]=="string",1);return this._options.keys=e,this._options.key=void 0,this}limit(e){return Oe.assertArgCount(arguments,1,1),Oe.assertParamValue(typeof e=="number",1),this._options.limit=e,this}skip(e){return Oe.assertArgCount(arguments,1,1),Oe.assertParamValue(typeof e=="number",1),this._options.skip=e,this}version(e){return Oe.assertArgCount(arguments,1,1),Oe.assertParamValue(typeof e=="string",1),this._options.version=e,this}};_(sa,"SodaOperation");var fn=sa;mn.wrapFns(fn.prototype,"count","getCursor","getDocuments","getOne","remove","replaceOne","replaceOneAndGet");HN.exports=fn});var ia=R((ky,vN)=>{"use strict";var Pn=tr(),Uf=ra(),ye=W(),xt=pt(),os=yt(),na=class na{async createIndex(e){ye.assertArgCount(arguments,1,1),ye.assertParamValue(xt.isObject(e),1);let t={autoCommit:os.autoCommit};return await this._impl.createIndex(JSON.stringify(e),t)}async drop(){ye.assertArgCount(arguments,0,0);let e={autoCommit:os.autoCommit};return await this._impl.drop(e)}async dropIndex(e,t){let s={autoCommit:os.autoCommit};return ye.assertArgCount(arguments,1,2),ye.assertParamValue(typeof e=="string",1),arguments.length==2&&(ye.assertParamValue(typeof t=="object",2),t.force!==void 0&&(ye.assertParamPropValue(typeof t.force=="boolean",2,"force"),s.force=t.force)),await this._impl.dropIndex(e,s)}find(){ye.assertArgCount(arguments,0,0);let e=new Uf;return e._impl=this._impl.find(),e}async getDataGuide(){ye.assertArgCount(arguments,0,0);let e=new Pn;return e._impl=await this._impl.getDataGuide(),e}async insertMany(e){ye.assertArgCount(arguments,1,1),ye.assertParamValue(Array.isArray(e)&&e.length>0,1);let t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=xt.verifySodaDoc(e[n]);let s={autoCommit:os.autoCommit};await this._impl.insertMany(t,s)}async insertManyAndGet(e,t){let s={autoCommit:os.autoCommit};ye.assertArgCount(arguments,1,2),ye.assertParamValue(Array.isArray(e)&&e.length>0,1),arguments.length==2&&(ye.assertParamValue(xt.isObject(t),2),t.hint!==void 0&&(ye.assertParamPropValue(typeof t.hint=="string",2,"hint"),s.hint=t.hint));let n=Array(e.length);for(let a=0;a<e.length;a++)n[a]=xt.verifySodaDoc(e[a]);let i=await this._impl.insertManyAndGet(n,s);for(let a=0;a<e.length;a++){let c=n[a]=new Pn;c._impl=i[a]}return n}async insertOne(e){ye.assertArgCount(arguments,1,1),e=xt.verifySodaDoc(e);let t={autoCommit:os.autoCommit};await this._impl.insertOne(e,t)}async insertOneAndGet(e,t){let s={autoCommit:os.autoCommit};ye.assertArgCount(arguments,1,2),e=xt.verifySodaDoc(e),arguments.length==2&&(ye.assertParamValue(xt.isObject(t),2),t.hint!==void 0&&(ye.assertParamPropValue(typeof t.hint=="string",2,"hint"),s.hint=t.hint));let n=new Pn;return n._impl=await this._impl.insertOneAndGet(e,s),n}get metaData(){return JSON.parse(this._impl.getMetaData())}get name(){return this._impl.getName()}async save(e){ye.assertArgCount(arguments,1,1),e=xt.verifySodaDoc(e);let t={autoCommit:os.autoCommit};await this._impl.save(e,t)}async saveAndGet(e,t){ye.assertArgCount(arguments,1,2),e=xt.verifySodaDoc(e);let s={autoCommit:os.autoCommit};arguments.length==2&&(ye.assertParamValue(xt.isObject(t),2),t.hint!==void 0&&(ye.assertParamPropValue(typeof t.hint=="string",2,"hint"),s.hint=t.hint));let n=new Pn;return n._impl=await this._impl.saveAndGet(e,s),n}async truncate(){ye.assertArgCount(arguments,0,0),await this._impl.truncate()}};_(na,"SodaCollection");var Rn=na;xt.wrapFns(Rn.prototype,"createIndex","drop","dropIndex","getDataGuide","insertMany","insertManyAndGet","insertOne","insertOneAndGet","save","saveAndGet","truncate");vN.exports=Rn});var _a=R((Gy,$N)=>{"use strict";var{Buffer:oa}=require("buffer"),KN=ia(),Mf=tr(),at=W(),Us=pt(),WN=yt(),aa=class aa{_getConnection(){return this._connection}async createCollection(e,t){let s={autoCommit:WN.autoCommit};at.assertArgCount(arguments,1,2),at.assertParamValue(typeof e=="string",1),arguments.length==2&&(at.assertParamValue(Us.isObject(t),2),t.mode!==void 0&&(at.assertParamPropValue(Number.isInteger(t.mode)&&t.mode>0,2,"mode"),s.mode=t.mode),t.metaData!==void 0&&(at.assertParamPropValue(Us.isObject(t.metaData),2,"metaData"),s.metaData=JSON.stringify(t.metaData)));let n=new KN;return n._impl=await this._impl.createCollection(e,s),n}createDocument(e,t){let s={};at.assertArgCount(arguments,1,2),at.assertParamValue(oa.isBuffer(e)||typeof e=="string"||Us.isObject(e),1),arguments.length>1&&(at.assertParamValue(Us.isObject(t),2),s=t,at.assertParamPropString(s,2,"key"),at.assertParamPropString(s,2,"mediaType")),typeof e=="string"?e=oa.from(e):Us.isObject(e)&&(e=oa.from(JSON.stringify(e)));let n=new Mf;return n._impl=this._impl.createDocument(e,s),n}async getCollectionNames(e){let t={};return at.assertArgCount(arguments,0,1),arguments.length==1&&(at.assertParamValue(Us.isObject(e),1),t=e,t.startsWith!==void 0&&at.assertParamPropValue(typeof t.startsWith=="string",1,"startsWith"),t.limit!==void 0&&at.assertParamPropValue(Number.isInteger(t.limit),1,"limit")),await this._impl.getCollectionNames(t)}async openCollection(e){at.assertArgCount(arguments,1,1),at.assertParamValue(typeof e=="string",1);let t={autoCommit:WN.autoCommit},s=await this._impl.openCollection(e,t);if(s){let n=new KN;return n._impl=s,n}}};_(aa,"SodaDatabase");var In=aa;Us.wrapFns(In.prototype,"createCollection","getCollectionNames","openCollection");$N.exports=In});var Ea=R((vy,zN)=>{"use strict";var Vf=Qo(),rr=er(),{Buffer:xf}=require("buffer"),ca=Zs(),Dn=hn(),bf=_a(),Ff=require("events"),kf=qo(),p=W(),be=pt(),Cn=Js(),qf=require("process"),Gf=require("util"),Ke=ot(),Ta=yt(),Hf=Ko(),de=At(),Pr=new Map,la=class la extends Ff{constructor(){super(),this._dbObjectClasses=new Map,this._closing=!1}_addDefaultsToExecOpts(e){e.connection=this,e.keepInStmtCache===void 0&&(e.keepInStmtCache=!0),Ta.addToOptions(e,"autoCommit","dbObjectAsPojo","fetchArraySize","fetchTypeHandler","maxRows","outFormat","prefetchRows")}_buildDbObjectClass(e){let t=_(function(s){if(this._impl=new Cn.DbObjectImpl(e),this.isCollection){let n=new Proxy(this,rr._collectionProxyHandler);if(s!==void 0)for(let i=0;i<s.length;i++)this.append(s[i]);return n}else s!==void 0&&Object.assign(this,s)},"DbObject");if(t.prototype=Object.create(rr.prototype),t.prototype.constructor=t,t.prototype._objType=e,e.elementTypeClass){let s=this._getDbObjectClass(e.elementTypeClass);e.elementTypeClass=s}if(be.addTypeProperties(e,"elementType"),e.attributes){let s={};for(let n of e.attributes){n.typeClass&&(n.typeClass=this._getDbObjectClass(n.typeClass)),be.addTypeProperties(n,"type");let i={get(){return this._getAttrValue(n)},set(a){this._setAttrValue(n,a)}};s[n.name]=i}Object.defineProperties(t.prototype,s)}return t.toString=function(){return"DbObjectClass ["+e.fqn+"]"},t}_getDbObjectClass(e){if(e.prototype instanceof rr)return e;let t=this._dbObjectClasses.get(e);return t||(t=this._buildDbObjectClass(e),t._connection=this,t._objType=e,e._connection=this._impl,this._dbObjectClasses.set(e,t)),t}async _getDbObjectClassForName(e){let t=this._dbObjectClasses.get(e);if(!t){let s=await this._impl.getDbObjectClass(e);t=this._getDbObjectClass(s),this._dbObjectClasses.set(e,t)}return t}_isBindDir(e){return e===Ke.BIND_IN||e===Ke.BIND_OUT||e===Ke.BIND_INOUT}_isBindValue(e){return e==null||typeof e=="number"||typeof e=="string"||typeof e=="boolean"||Array.isArray(e)||xf.isBuffer(e)||Gf.isDate(e)||e instanceof ca||e instanceof Dn||e instanceof rr}async _processBindUnit(e,t,s){let n=!1;if(t.dir===void 0?e.dir=Ke.BIND_IN:(p.assert(this._isBindDir(t.dir),p.ERR_INVALID_BIND_DIRECTION),e.dir=t.dir,n=!0),t.type!==void 0?(typeof t.type=="string"?(e.type=de.DB_TYPE_OBJECT,e.typeClass=await this._getDbObjectClassForName(t.type),e.objType=e.typeClass._objType):t.type.prototype instanceof rr?(e.type=de.DB_TYPE_OBJECT,e.typeClass=t.type,e.objType=e.typeClass._objType):(p.assert(t.type instanceof de.DbType,p.ERR_INVALID_BIND_DATA_TYPE,2),e.type=t.type),n=!0):s&&(e.name&&p.throwErr(p.ERR_MISSING_TYPE_BY_NAME,e.name),p.throwErr(p.ERR_MISSING_TYPE_BY_POS,e.pos)),(e.dir!==Ke.BIND_IN||s)&&(t.maxSize!==void 0?(p.assertParamPropValue(Number.isInteger(t.maxSize)&&t.maxSize>0,2,"maxSize"),e.maxSize=t.maxSize,e.checkSize=!0,n=!0):s?(e.type===de.DB_TYPE_VARCHAR||e.type===de.DB_TYPE_RAW)&&(e.name&&p.throwErr(p.ERR_MISSING_MAX_SIZE_BY_NAME,e.name),p.throwErr(p.ERR_MISSING_MAX_SIZE_BY_POS,e.pos)):e.maxSize=Ke.DEFAULT_MAX_SIZE_FOR_OUT_BINDS),e.isArray=!1,s||t.maxArraySize!==void 0&&(p.assertParamPropValue(Number.isInteger(t.maxArraySize)&&t.maxArraySize>0,2,"maxArraySize"),e.maxArraySize=t.maxArraySize,e.isArray=!0),!s&&t.val!==void 0)return t.val;n||p.throwErr(p.ERR_INVALID_BIND_UNIT)}async _processBindValue(e,t,s){let n=Hf.transformValueIn(e,t,s);e.isArray?e.values=n.concat(e.values.slice(n.length)):e.values[s.pos]=n,e.type===de.DB_TYPE_OBJECT&&e.typeClass===void 0&&(e.typeClass=await this._getDbObjectClass(t._objType),e.objType=e.typeClass._objType)}async _processExecuteBind(e,t){e.isArray=!1;let s;if(this._isBindValue(t)?(e.dir=Ke.BIND_IN,s=t):s=await this._processBindUnit(e,t,!1),e.dir!==Ke.BIND_OUT){let n={pos:0,allowArray:!0};await this._processBindValue(e,s,n)}e.type===void 0&&(e.type=de.DB_TYPE_VARCHAR,e.maxSize===void 0&&(e.maxSize=1)),e.isArray&&e.type!==de.DB_TYPE_VARCHAR&&e.type!==de.DB_TYPE_NVARCHAR&&e.type!==de.DB_TYPE_CHAR&&e.type!==de.DB_TYPE_NCHAR&&e.type!==de.DB_TYPE_NUMBER&&e.type!==de.DB_TYPE_BINARY_FLOAT&&e.type!==de.DB_TYPE_BINARY_DOUBLE&&e.type!==de.DB_TYPE_DATE&&e.type!==de.DB_TYPE_TIMESTAMP&&e.type!==de.DB_TYPE_TIMESTAMP_LTZ&&e.type!==de.DB_TYPE_TIMESTAMP_TZ&&e.type!==de.DB_TYPE_RAW&&p.throwErr(p.ERR_INVALID_TYPE_FOR_ARRAY_BIND)}async _processExecuteBinds(e){let t=[];if(Array.isArray(e))for(let s=0;s<e.length;s++){let n=t[s]={pos:s+1,values:[]};await this._processExecuteBind(n,e[s])}else{p.assertParamValue(be.isObject(e),2);let s=Object.getOwnPropertyNames(e);for(let n=0;n<s.length;n++){let i=t[n]={name:s[n],values:[]};await this._processExecuteBind(i,e[s[n]])}}return t}async _processExecuteManyBinds(e,t){let s=[],n;if(t!==void 0)if(Array.isArray(t)){n=!0;for(let i=0;i<t.length;i++){let a=s[i]={pos:i+1,values:[]};await this._processBindUnit(a,t[i],!0)}}else{n=!1;let i=Object.getOwnPropertyNames(t);for(let a=0;a<i.length;a++){let c=s[a]={name:i[a],values:[]};await this._processBindUnit(c,t[i[a]],!0)}}else{let i=e[0];if(p.assertParamValue(be.isObjectOrArray(i),2),Array.isArray(i)){n=!0;for(let a=0;a<i.length;a++)s[a]={pos:a+1}}else{n=!1;let a=Object.getOwnPropertyNames(i);for(let c=0;c<a.length;c++)s[c]={name:a[c]}}for(let a=0;a<s.length;a++)s[a].dir=Ke.BIND_IN,s[a].isArray=!1,s[a].values=[]}for(let i=0;i<e.length;i++){let a=e[i],c={pos:i,allowArray:!1};p.assert(n&&Array.isArray(a)||!n&&be.isObject(a),p.ERR_MIXED_BIND);for(let T=0;T<s.length;T++){let E=s[T],l=n?a[T]:a[E.name];await this._processBindValue(E,l,c)}}for(let i=0;i<s.length;i++){let a=s[i];a.type===void 0&&(a.type=de.DB_TYPE_VARCHAR,a.maxSize=1)}return s}_transformOutBind(e,t){let s=e;if(Array.isArray(e)){s=[];for(let n=0;n<e.length;n++)s.push(this._transformOutBind(e[n],t))}else if(e instanceof Cn.ResultSetImpl)s=new Dn,s._setup(this,e);else if(e instanceof Cn.LobImpl)s=new ca,s._setup(e,!0);else if(e instanceof Cn.DbObjectImpl){let n=this._dbObjectClasses.get(e._objType);s=Object.create(n.prototype),s._impl=e,t.dbObjectAsPojo?s=s._toPojo():s.isCollection&&(s=new Proxy(s,rr._collectionProxyHandler))}return s}_verifyExecOpts(e,t){let s={};if(p.assertParamValue(be.isObject(e),3),e.autoCommit!==void 0&&(p.assertParamPropValue(typeof e.autoCommit=="boolean",3,"autoCommit"),s.autoCommit=e.autoCommit),e.dbObjectAsPojo!==void 0&&(p.assertParamPropValue(typeof e.dbObjectAsPojo=="boolean",3,"dbObjectAsPojo"),s.dbObjectAsPojo=e.dbObjectAsPojo),e.keepInStmtCache!==void 0&&(p.assertParamPropValue(typeof e.keepInStmtCache=="boolean",3,"keepInStmtCache"),s.keepInStmtCache=e.keepInStmtCache),t)e.bindDefs!==void 0&&(p.assertParamPropValue(be.isObjectOrArray(e.bindDefs),3,"bindDefs"),s.bindDefs=e.bindDefs),e.batchErrors!==void 0&&(p.assertParamPropValue(typeof e.batchErrors=="boolean",3,"batchErrors"),s.batchErrors=e.batchErrors),e.dmlRowCounts!==void 0&&(p.assertParamPropValue(typeof e.dmlRowCounts=="boolean",3,"dmlRowCounts"),s.dmlRowCounts=e.dmlRowCounts);else{if(e.fetchArraySize!==void 0&&(p.assertParamPropValue(Number.isInteger(e.fetchArraySize)&&e.fetchArraySize>0,3,"fetchArraySize"),s.fetchArraySize=e.fetchArraySize),e.fetchInfo!==void 0){p.assertParamPropValue(be.isObject(e.fetchInfo),3,"fetchInfo");let n=Object.getOwnPropertyNames(e.fetchInfo),i=new Map(Ta.fetchTypeMap);for(let a of n){let c=e.fetchInfo[a];c.type===void 0&&p.throwErr(p.ERR_NO_TYPE_FOR_CONVERSION),c.type!==Ke.DEFAULT&&c.type!==de.DB_TYPE_VARCHAR&&c.type!==de.DB_TYPE_RAW&&p.throwErr(p.ERR_INVALID_TYPE_FOR_CONVERSION),i.set(a,c.type)}s.fetchTypeMap=i}if(e.fetchTypeHandler!==void 0){let n=typeof e.fetchTypeHandler;p.assertParamPropValue(n==="function",3,"fetchTypeHandler"),s.fetchTypeHandler=e.fetchTypeHandler}e.maxRows!==void 0&&(p.assertParamPropValue(Number.isInteger(e.maxRows)&&e.maxRows>=0,3,"maxRows"),s.maxRows=e.maxRows),e.outFormat!==void 0&&(p.assertParamPropValue(e.outFormat===Ke.OUT_FORMAT_ARRAY||e.outFormat===Ke.OUT_FORMAT_OBJECT,3,"outFormat"),s.outFormat=e.outFormat),e.prefetchRows!==void 0&&(p.assertParamPropValue(Number.isInteger(e.prefetchRows)&&e.prefetchRows>=0,3,"prefetchRows"),s.prefetchRows=e.prefetchRows),e.resultSet!==void 0&&(p.assertParamPropValue(typeof e.resultSet=="boolean",3,"resultSet"),s.resultSet=e.resultSet)}return s}get action(){return null}set action(e){p.assertPropValue(typeof e=="string","action"),p.assert(this._impl,p.ERR_INVALID_CONNECTION),this._impl.setAction(e)}async breakExecution(){p.assertArgCount(arguments,0,0),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.breakExecution()}get callTimeout(){if(this._impl)return this._impl.getCallTimeout()}set callTimeout(e){p.assertPropValue(Number.isInteger(e)&&e>=0,"callTimeout"),p.assert(this._impl,p.ERR_INVALID_CONNECTION),this._impl.setCallTimeout(e)}async changePassword(e,t,s){p.assertArgCount(arguments,3,3),p.assertParamValue(typeof e=="string",1),p.assertParamValue(typeof t=="string",2),p.assertParamValue(typeof s=="string",3),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.changePassword(e,t,s)}get clientId(){return null}set clientId(e){p.assertPropValue(typeof e=="string","clientId"),p.assert(this._impl,p.ERR_INVALID_CONNECTION),this._impl.setClientId(e)}get clientInfo(){return null}set clientInfo(e){p.assertPropValue(typeof e=="string","clientInfo"),p.assert(this._impl,p.ERR_INVALID_CONNECTION),this._impl.setClientInfo(e)}async close(e){let t={};p.assertArgCount(arguments,0,1),arguments.length==1&&(p.assertParamValue(be.isObject(e),1),t=e,p.assertParamPropBool(t,1,"drop")),p.assert(this._impl&&!this._closing,p.ERR_INVALID_CONNECTION),this._closing=!0;try{await this._impl.close(t)}finally{this._closing=!1}delete this._impl,this._dbObjectClasses.clear(),this.emit("_afterConnClose")}async commit(){p.assertArgCount(arguments,0,0),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.commit()}async createLob(e){p.assertArgCount(arguments,1,1),p.assertParamValue(e===de.DB_TYPE_CLOB||e===de.DB_TYPE_BLOB||e===de.DB_TYPE_NCLOB,1),p.assert(this._impl,p.ERR_INVALID_CONNECTION);let t=new ca;return t._setup(await this._impl.createLob(e),!1),t}get currentSchema(){if(this._impl)return this._impl.getCurrentSchema()}set currentSchema(e){p.assertPropValue(typeof e=="string","currentSchema"),p.assert(this._impl,p.ERR_INVALID_CONNECTION),this._impl.setCurrentSchema(e)}get dbOp(){return null}set dbOp(e){p.assertPropValue(typeof e=="string","dbOp"),p.assert(this._impl,p.ERR_INVALID_CONNECTION),this._impl.setDbOp(e)}get thin(){return Ta.thin}get ecid(){return null}set ecid(e){p.assertPropValue(typeof e=="string","ecid"),p.assert(this._impl,p.ERR_INVALID_CONNECTION),this._impl.setECID(e)}async execute(e,t,s){let i=[],a={};p.assertArgCount(arguments,1,3),p.assertParamValue(typeof e=="string",1),arguments.length>=2&&(i=await this._processExecuteBinds(t)),arguments.length==3&&(a=this._verifyExecOpts(s,!1)),this._addDefaultsToExecOpts(a),p.assert(this._impl,p.ERR_INVALID_CONNECTION);let c;try{c=await this._impl.execute(e,1,i,a,!1)}catch(T){throw T.errorNum===1406&&p.throwErr(p.ERR_INSUFFICIENT_BUFFER_FOR_BINDS),T}if(c.resultSet!==void 0){let T=new Dn;T._setup(this,c.resultSet),c.metaData=T._impl.metaData,a.resultSet?c.resultSet=T:(c.rows=await T._getAllRows(),delete c.resultSet)}if(c.outBinds!==void 0)for(let T in c.outBinds){let E=this._transformOutBind(c.outBinds[T],a);c.outBinds[T]=E}if(c.implicitResults)for(let T in c.implicitResults){let E=c.implicitResults[T],l=new Dn;l._setup(this,E),a.resultSet?c.implicitResults[T]=l:c.implicitResults[T]=await l._getAllRows()}return c}async executeMany(e,t,s){let n={},i=[],a;p.assertArgCount(arguments,2,3),p.assertParamValue(typeof e=="string",1),arguments.length==3&&(n=this._verifyExecOpts(s,!0)),this._addDefaultsToExecOpts(n),typeof t=="number"?(p.assertParamValue(Number.isInteger(t)&&t>0,2),a=t,n.bindDefs!==void 0&&(i=await this._processExecuteManyBinds([],n.bindDefs))):(p.assertParamValue(Array.isArray(t)&&t.length>0,2),a=t.length,i=await this._processExecuteManyBinds(t,n.bindDefs)),p.assert(this._impl,p.ERR_INVALID_CONNECTION);let c=await this._impl.execute(e,a,i,n,!0);if(c.outBinds!==void 0)for(let T=0;T<c.outBinds.length;T++){let E=c.outBinds[T];for(let l in E)E[l]=this._transformOutBind(E[l],n)}return c}get externalName(){if(this._impl)return this._impl.getExternalName()}set externalName(e){p.assertPropValue(typeof e=="string","externalName"),p.assert(this._impl,p.ERR_INVALID_CONNECTION),this._impl.setExternalName(e)}async getDbObjectClass(e){return p.assertArgCount(arguments,1,1),p.assertParamValue(typeof e=="string",1),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._getDbObjectClassForName(e)}async getQueue(e,t){let s={};p.assertArgCount(arguments,1,2),p.assertParamValue(typeof e=="string",1),arguments.length==2&&(p.assertParamValue(be.isObject(t),2),s={...t}),p.assert(this._impl,p.ERR_INVALID_CONNECTION);let n=new Vf;return await n.create(this,e,s),n}getSodaDatabase(){p.assertArgCount(arguments,0,0),p.assert(this._impl,p.ERR_INVALID_CONNECTION);let e=new bf;return e._impl=this._impl.getSodaDatabase(),e}async getStatementInfo(e){p.assertArgCount(arguments,1,1),p.assertParamValue(typeof e=="string",1),p.assert(this._impl,p.ERR_INVALID_CONNECTION);let t=await this._impl.getStatementInfo(e);if(t.metaData)for(let s=0;s<t.metaData.length;s++){let n=t.metaData[s];be.addTypeProperties(n,"dbType"),n.fetchType=de.DB_TYPE_FETCH_TYPE_MAP.get(n.dbType)}return t}get internalName(){if(this._impl)return this._impl.getInternalName()}set internalName(e){p.assertPropValue(typeof e=="string","internalName"),p.assert(this._impl,p.ERR_INVALID_CONNECTION),this._impl.setInternalName(e)}isHealthy(){return this._impl!==void 0&&!this._closing&&this._impl.isHealthy()}get module(){return null}set module(e){p.assertPropValue(typeof e=="string","module"),p.assert(this._impl,p.ERR_INVALID_CONNECTION),this._impl.setModule(e)}get oracleServerVersion(){if(this._impl)return this._impl.getOracleServerVersion()}get oracleServerVersionString(){if(this._impl)return this._impl.getOracleServerVersionString()}async ping(){p.assertArgCount(arguments,0,0),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.ping()}queryStream(e,t,s){p.assertArgCount(arguments,1,3),p.assertParamValue(typeof e=="string",1),arguments.length==3?(p.assertParamValue(be.isObject(s),3),s={...s}):s={},s.resultSet=!0;let n=new kf;return qf.nextTick(async()=>{try{let i=await this.execute(e,t||[],s);i.resultSet||p.throwErr(p.ERR_NOT_A_QUERY),n._open(i.resultSet)}catch(i){n.destroy(i);return}}),n}async rollback(){p.assertArgCount(arguments,0,0),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.rollback()}async shutdown(e){let t=Ke.SHUTDOWN_MODE_DEFAULT;p.assertArgCount(arguments,0,1),e!==void 0&&(p.assertParamValue(typeof t=="number",1),t=e),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.shutdown(t)}async startup(e){let t={};p.assertArgCount(arguments,0,1),arguments.length==1&&(p.assertParamValue(typeof t=="object",1),t=e,p.assertParamPropBool(t,1,"force"),p.assertParamPropBool(t,1,"restrict"),p.assertParamPropString(t,1,"pfile")),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.startup(t)}get stmtCacheSize(){if(this._impl)return this._impl.getStmtCacheSize()}set stmtCacheSize(e){p.assertPropValue(Number.isInteger(e)&&e>=0,"stmtCacheSize"),p.assert(this._impl,p.ERR_INVALID_CONNECTION),this._impl.setStmtCacheSize(e)}async subscribe(e,t){p.assertArgCount(arguments,2,2),p.assertParamValue(typeof e=="string",1),p.assertParamValue(be.isObject(t),2),t={...t},p.assertParamPropUnsignedInt(t,2,"namespace"),t.namespace===void 0&&(t.namespace=Ke.SUBSCR_NAMESPACE_DBCHANGE),p.assertParamPropString(t,2,"ipAddress"),p.assertParamPropUnsignedInt(t,2,"port"),p.assertParamPropUnsignedInt(t,2,"timeout"),p.assertParamPropUnsignedInt(t,2,"operations"),p.assertParamPropUnsignedInt(t,2,"qos"),p.assertParamPropUnsignedInt(t,2,"groupingClass"),p.assertParamPropUnsignedInt(t,2,"groupingValue"),p.assertParamPropUnsignedInt(t,2,"groupingType"),p.assertParamPropBool(t,2,"clientInitiated"),p.assertParamPropFunction(t,2,"callback"),p.assert(t.callback,p.ERR_MISSING_SUBSCR_CALLBACK),t.namespace===Ke.SUBSCR_NAMESPACE_DBCHANGE&&(p.assertParamPropString(t,2,"sql"),p.assert(t.sql&&t.sql.length>0,p.ERR_MISSING_SUBSCR_SQL),t.binds!==void 0&&(t.binds=await this._processExecuteBinds(t.binds))),p.assert(this._impl,p.ERR_INVALID_CONNECTION);let s=Pr.get(e),n=await this._impl.subscribe(s,t),i;return t.namespace===Ke.SUBSCR_NAMESPACE_DBCHANGE?(i=n.subscription,delete n.subscription):(i=n,n=void 0),Pr.set(e,i),n}get tag(){if(this._impl)return this._impl.getTag()}set tag(e){p.assertPropValue(typeof e=="string","tag"),p.assert(this._impl,p.ERR_INVALID_CONNECTION),this._impl.setTag(e)}async tpcBegin(e,t,s){p.assertArgCount(arguments,1,3),p.assertParamValue(be.isXid(e),1),arguments.length<3?s=60:p.assertParamValue(typeof s=="number",3),arguments.length<2?t=Ke.TPC_BEGIN_NEW:p.assertParamValue(typeof t=="number",2),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.tpcBegin(e,t,s)}async tpcCommit(e,t){p.assertArgCount(arguments,0,2),arguments.length<2?t=!1:p.assertParamValue(typeof t=="boolean",2),arguments.length>=1&&p.assertParamValue(be.isXid(e),1),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.tpcCommit(e,t)}async tpcEnd(e,t){p.assertArgCount(arguments,0,2),arguments.length<2?t=Ke.TPC_END_NORMAL:p.assertParamValue(typeof t=="number",2),arguments.length>=1&&p.assertParamValue(be.isXid(e),1),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.tpcEnd(e,t)}async tpcForget(e){p.assertArgCount(arguments,1,1),p.assertParamValue(be.isXid(e),1),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.tpcForget(e)}async tpcPrepare(e){return p.assertArgCount(arguments,0,1),arguments.length>=1&&p.assertParamValue(be.isXid(e),1),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.tpcPrepare(e)}async tpcRecover(e){p.assertArgCount(arguments,0,1),arguments.length==1?p.assertParamValue(typeof e=="boolean",1):e=!0;let t=`
      SELECT
          formatid as "formatId",
          UTL_RAW.CAST_TO_VARCHAR2(globalid) as "globalTransactionId",
          UTL_RAW.CAST_TO_VARCHAR2(branchid) as "branchQualifier"
      FROM DBA_PENDING_TRANSACTIONS`,s=`
      SELECT
          formatid as "formatId",
          globalid as "globalTransactionId",
          branchid as "branchQualifier"
      FROM DBA_PENDING_TRANSACTIONS`,n={outFormat:Ke.OUT_FORMAT_OBJECT,resultSet:!1};return(await this.execute(e?t:s,{},n)).rows}async tpcRollback(e){p.assertArgCount(arguments,0,1),arguments.length==1&&p.assertParamValue(be.isXid(e),1),p.assert(this._impl,p.ERR_INVALID_CONNECTION),await this._impl.tpcRollback(e)}async unsubscribe(e){p.assertArgCount(arguments,1,1),p.assertParamValue(typeof e=="string",1),p.assert(this._impl,p.ERR_INVALID_CONNECTION),p.assert(Pr.has(e),p.ERR_INVALID_SUBSCR),await this._impl.unsubscribe(Pr.get(e)),Pr.delete(e)}};_(la,"Connection");var fs=la;fs.prototype.break=be.callbackify(fs.prototype.breakExecution);be.wrapFns(fs.prototype,"changePassword","close","commit","createLob","execute","executeMany","getDbObjectClass","getQueue","getStatementInfo","ping","rollback","shutdown","startup","subscribe","tpcBegin","tpcCommit","tpcEnd","tpcForget","tpcPrepare","tpcRecover","tpcRollback","unsubscribe");fs.prototype.release=fs.prototype.close;zN.exports=fs});var Sa=R((Wy,XN)=>{"use strict";var vf=require("process"),Kf=yt(),Na=class Na{constructor(e){let t=0;e._totalRequestsEnqueued!==0&&(t=Math.round(e._totalTimeInQueue/e._totalRequestsEnqueued)),this.gatheredDate=Date.now(),this.upTime=this.gatheredDate-e._createdDate,this.upTimeSinceReset=this.gatheredDate-e._timeOfReset,this.connectionRequests=e._totalConnectionRequests,this.requestsEnqueued=e._totalRequestsEnqueued,this.requestsDequeued=e._totalRequestsDequeued,this.failedRequests=e._totalFailedRequests,this.rejectedRequests=e._totalRequestsRejected,this.requestTimeouts=e._totalRequestTimeouts,this.maximumQueueLength=e._maximumQueueLength,this.currentQueueLength=e._connRequestQueue.length,this.timeInQueue=e._totalTimeInQueue,this.minimumTimeInQueue=e._minTimeInQueue,this.maximumTimeInQueue=e._maxTimeInQueue,this.averageTimeInQueue=t,this.connectionsInUse=e.connectionsInUse,this.connectionsOpen=e.connectionsOpen,this.connectString=e.connectString,this.edition=e.edition,this.events=e.events,this.externalAuth=e.externalAuth,this.homogeneous=e.homogeneous,this.poolAlias=e.poolAlias,this.poolIncrement=e.poolIncrement,this.poolMax=e.poolMax,this.poolMaxPerShard=e.poolMaxPerShard,this.poolMin=e.poolMin,this.poolPingInterval=e.poolPingInterval,this.poolTimeout=e.poolTimeout,this.queueMax=e.queueMax,this.queueTimeout=e.queueTimeout,this.sodaMetaDataCache=e.sodaMetaDataCache,this.stmtCacheSize=e.stmtCacheSize,this.user=e.user,this.threadPoolSize=vf.env.UV_THREADPOOL_SIZE,this.thin=Kf.thin}logStatistics(){console.log(`
Driver:`),console.log("...thin mode:",this.thin),console.log("Pool statistics:"),console.log("...gathered at:",new Date(this.gatheredDate).toISOString()),console.log("...up time (milliseconds):",this.upTime),console.log("...up time from last reset (milliseconds)",this.upTimeSinceReset),console.log("...connection requests:",this.connectionRequests),console.log("...requests enqueued:",this.requestsEnqueued),console.log("...requests dequeued:",this.requestsDequeued),console.log("...requests failed:",this.failedRequests),console.log("...requests exceeding queueMax:",this.rejectedRequests),console.log("...requests exceeding queueTimeout:",this.requestTimeouts),console.log("...current queue length:",this.currentQueueLength),console.log("...maximum queue length:",this.maximumQueueLength),console.log("...sum of time in queue (milliseconds):",this.timeInQueue),console.log("...minimum time in queue (milliseconds):",this.minimumTimeInQueue),console.log("...maximum time in queue (milliseconds):",this.maximumTimeInQueue),console.log("...average time in queue (milliseconds):",this.averageTimeInQueue),console.log("...pool connections in use:",this.connectionsInUse),console.log("...pool connections open:",this.connectionsOpen),console.log("Pool attributes:"),console.log("...connectString:",this.connectString),console.log("...edition:",this.edition),console.log("...events:",this.events),console.log("...externalAuth:",this.externalAuth),console.log("...homogeneous:",this.homogeneous),console.log("...poolAlias:",this.poolAlias),console.log("...poolIncrement:",this.poolIncrement),console.log("...poolMax:",this.poolMax),console.log("...poolMaxPerShard:",this.poolMaxPerShard),console.log("...poolMin:",this.poolMin),console.log("...poolPingInterval (seconds):",this.poolPingInterval),console.log("...poolTimeout (seconds):",this.poolTimeout),console.log("...queueMax:",this.queueMax),console.log("...queueTimeout (milliseconds):",this.queueTimeout),console.log("...sessionCallback:",this.sessionCallback),console.log("...sodaMetaDataCache:",this.sodaMetaDataCache),console.log("...stmtCacheSize:",this.stmtCacheSize),console.log("...user:",this.user),console.log("Related environment variables:"),console.log("...UV_THREADPOOL_SIZE:",this.threadPoolSize)}};_(Na,"PoolStatistics");var ua=Na;XN.exports=ua});var JN=R((zy,QN)=>{"use strict";var Wf=Ea(),$f=require("events"),as=ot(),ee=W(),jN=yt(),_s=pt(),zf=Js(),Xf=Sa(),ha=class ha extends $f{constructor(){super(),this._impl=new zf.PoolImpl,this._queueMax=0,this._queueTimeout=0,this._enableStatistics=!1,this._timeOfReset=this._createdDate=Date.now(),this._sessionCallback=void 0,this._connRequestQueue=[],this._connectionClass=jN.connectionClass}_checkPoolOpen(e){this.status===as.POOL_STATUS_DRAINING?ee.throwErr(ee.ERR_POOL_CLOSING):this.status===as.POOL_STATUS_CLOSED?ee.throwErr(ee.ERR_POOL_CLOSED):e||this.status===as.POOL_STATUS_RECONFIGURING&&ee.throwErr(ee.ERR_POOL_RECONFIGURING)}_checkRequestQueue(){let e=this._connectionsOut;for(;this._connRequestQueue.length>0&&e<this.poolMax;){e+=1;let t=this._connRequestQueue.shift();this._enableStatistics&&(this._totalRequestsDequeued+=1,this._updateWaitStatistics(t)),t.timeoutHandle&&clearTimeout(t.timeoutHandle),t.resolve()}}get _enableStats(){return this._enableStatistics}_resetStatistics(){this._timeOfReset=Date.now(),this._totalConnectionRequests=0,this._totalRequestsEnqueued=0,this._totalRequestsDequeued=0,this._totalFailedRequests=0,this._totalRequestsRejected=0,this._totalRequestTimeouts=0,this._maximumQueueLength=this._connRequestQueue.length,this._totalTimeInQueue=0,this._minTimeInQueue=0,this._maxTimeInQueue=0}_setup(e,t){this._queueTimeout=e.queueTimeout,this._queueMax=e.queueMax,this._enableStatistics=e.enableStatistics,this._edition=e.edition,this._eventsFlag=e.events,this._externalAuth=e.externalAuth,this._homogeneous=e.homogeneous,this._user=e.user,this._connectString=e.connectString,this._status=as.POOL_STATUS_OPEN,this._connectionsOut=0,this._poolAlias=t,this.on("_checkRequestQueue",this._checkRequestQueue),this._resetStatistics()}_updateWaitStatistics(e){let t=Date.now()-e.enqueuedTime;this._totalTimeInQueue+=t,this._minTimeInQueue===0?this._minTimeInQueue=t:this._minTimeInQueue=Math.min(this._minTimeInQueue,t),this._maxTimeInQueue=Math.max(this._maxTimeInQueue,t)}_verifyGetConnectionOptions(e){let t={};if(e.user!==void 0&&(ee.assertParamPropValue(typeof e.user=="string",1,"user"),t.user=e.user),e.username!==void 0&&(ee.assert(t.user===void 0,ee.ERR_DBL_USER),ee.assertParamPropValue(typeof e.username=="string",1,"username"),t.user=e.username),e.password!==void 0&&(ee.assertParamPropValue(typeof e.password=="string",1,"password"),t.password=e.password),e.tag!==void 0&&(ee.assertParamPropValue(typeof e.tag=="string",1,"tag"),t.tag=e.tag),e.matchAnyTag!==void 0&&(ee.assertParamPropValue(typeof e.matchAnyTag=="boolean",1,"matchAnyTag"),t.matchAnyTag=e.matchAnyTag),e.shardingKey!==void 0){let s=e.shardingKey;ee.assertParamPropValue(_s.isShardingKey(s),1,"shardingKey"),t.shardingKey=e.shardingKey}if(e.superShardingKey!==void 0){let s=e.superShardingKey;ee.assertParamPropValue(_s.isShardingKey(s),1,"superShardingKey"),t.superShardingKey=e.superShardingKey}return t}async close(e){let t=0,s=!1;ee.assertArgCount(arguments,0,1),arguments.length==1&&(ee.assertParamValue(typeof e=="number",1),(e<0||isNaN(e)||e>2**31)&&ee.throwErr(ee.ERR_INVALID_PARAMETER_VALUE,1),s=!0,this._connectionsOut>0&&(t=e*1e3)),this._checkPoolOpen(!1),t>0&&(this._status=as.POOL_STATUS_DRAINING,await new Promise(n=>{let i=setTimeout(()=>{this.removeAllListeners("_allCheckedIn"),n()},t);this.once("_allCheckedIn",()=>{clearTimeout(i),n()})})),await this._impl.close({forceClose:s}),this._status=as.POOL_STATUS_CLOSED,this.emit("_afterPoolClose")}get connectionsInUse(){return this._impl.getConnectionsInUse()}get connectionsOpen(){return this._impl.getConnectionsOpen()}get connectString(){return this._connectString}get thin(){return jN.thin}get edition(){return this._edition}get enableStatistics(){return this._enableStatistics}get events(){return this._eventsFlag}get externalAuth(){return this._externalAuth}async getConnection(e){let t,s={};ee.assertArgCount(arguments,0,1),arguments.length==1&&(ee.assertParamValue(_s.isObject(e),1),s=this._verifyGetConnectionOptions(e)),s.connectionClass=this._connectionClass,this._checkPoolOpen(!0),this._enableStatistics&&(this._totalConnectionRequests+=1);try{t=this.poolMax}catch(n){throw this._enableStatistics&&(this._totalFailedRequests+=1),n}(this._connectionsOut>=t||this.status===as.POOL_STATUS_RECONFIGURING)&&(this._connRequestQueue.length>=this._queueMax&&this._queueMax>=0&&(this._enableStatistics&&(this._totalRequestsRejected+=1),ee.throwErr(ee.ERR_QUEUE_MAX_EXCEEDED,this._queueMax)),await new Promise((n,i)=>{let a={resolve:n,reject:i};this._queueTimeout!==0&&(a.timeoutHandle=setTimeout(()=>{let c=this._connRequestQueue.indexOf(a);c>=0&&this._connRequestQueue.splice(c,1),this._enableStatistics&&(this._totalRequestTimeouts+=1,this._updateWaitStatistics(a));try{ee.throwErr(ee.ERR_CONN_REQUEST_TIMEOUT,this._queueTimeout)}catch(T){i(T)}},this._queueTimeout)),this._connRequestQueue.push(a),this._enableStatistics&&(a.enqueuedTime=Date.now(),this._totalRequestsEnqueued+=1,this._maximumQueueLength=Math.max(this._maximumQueueLength,this._connRequestQueue.length))}),this._checkPoolOpen(!0)),this._connectionsOut+=1;try{let n=new Wf;n._impl=await this._impl.getConnection(s),n._pool=this;let i=s.tag||"";if(typeof this.sessionCallback=="function"&&(n._impl._newSession||n.tag!=i))try{await new Promise((a,c)=>{this.sessionCallback(n,i,function(T){T?c(T):a()})})}catch(a){throw await n.close({drop:!0}),a}return n.on("_afterConnClose",()=>{this._connectionsOut-=1,this.emit("_checkRequestQueue"),this._connectionsOut==0&&this.emit("_allCheckedIn")}),n}catch(n){throw this._connectionsOut-=1,this._enableStatistics&&(this._totalFailedRequests+=1),this.emit("_checkRequestQueue"),n}}getStatistics(){return this._checkPoolOpen(!1),this._enableStatistics!==!0?null:new Xf(this)}get homogeneous(){return this._homogeneous}logStatistics(){let e=this.getStatistics();e===null&&ee.throwErr(ee.ERR_POOL_STATISTICS_DISABLED),e.logStatistics()}get poolAlias(){return this._poolAlias}get poolIncrement(){return this._impl.getPoolIncrement()}get poolMax(){return this._impl.getPoolMax()}get poolMaxPerShard(){return this._impl.getPoolMaxPerShard()}get poolMin(){return this._impl.getPoolMin()}get poolPingInterval(){return this._impl.getPoolPingInterval()}get poolTimeout(){return this._impl.getPoolTimeout()}get queueMax(){return this._queueMax}get queueTimeout(){return this._queueTimeout}async reconfigure(e){ee.assertArgCount(arguments,1,1),ee.assertParamValue(_s.isObject(e)),ee.assertParamPropUnsignedInt(e,1,"queueMax"),ee.assertParamPropUnsignedInt(e,1,"queueTimeout"),ee.assertParamPropBool(e,1,"enableStatistics"),ee.assertParamPropBool(e,1,"resetStatistics"),ee.assertParamPropUnsignedInt(e,1,"poolMin"),ee.assertParamPropUnsignedInt(e,1,"poolMax"),ee.assertParamPropUnsignedInt(e,1,"poolMaxPerShard"),ee.assertParamPropUnsignedInt(e,1,"poolIncrement"),ee.assertParamPropInt(e,1,"poolPingInterval"),ee.assertParamPropUnsignedInt(e,1,"poolTimeout"),ee.assertParamPropUnsignedInt(e,1,"stmtCacheSize"),ee.assertParamPropBool(e,1,"sodaMetaDataCache"),this._checkPoolOpen(!1),this._status=as.POOL_STATUS_RECONFIGURING;try{await this._impl.reconfigure(e),(e.resetStatistics==!0||e.enableStatistics==!0&&this._enableStatistics==!1)&&this._resetStatistics(),e.queueMax!==void 0&&(this._queueMax=e.queueMax),e.queueTimeout!==void 0&&(this._queueTimeout=e.queueTimeout),e.enableStatistics!==void 0&&(this._enableStatistics=e.enableStatistics)}finally{this._status=as.POOL_STATUS_OPEN}this.emit("_checkRequestQueue")}get sessionCallback(){return this._sessionCallback}async setAccessToken(e){ee.assertArgCount(arguments,1,1),ee.assertParamValue(_s.isObject(e),1),ee.assertParamPropString(e,1,"token"),ee.assertParamPropString(e,1,"privateKey"),await this._impl.setAccessToken(e)}get sodaMetaDataCache(){return this._impl.getSodaMetaDataCache()}get status(){return this._status}get stmtCacheSize(){return this._impl.getStmtCacheSize()}get user(){return this._user}};_(ha,"Pool");var St=ha;St.prototype.close=_s.callbackify(St.prototype.close);St.prototype.getConnection=_s.callbackify(St.prototype.getConnection);St.prototype.reconfigure=_s.callbackify(St.prototype.reconfigure);St.prototype.setAccessToken=_s.callbackify(St.prototype.setAccessToken);St.prototype.terminate=St.prototype.close;St.prototype._logStats=St.prototype.logStatistics;QN.exports=St});var Be=R((jy,eS)=>{"use strict";var{Buffer:ZN}=require("buffer"),We=ot();eS.exports={BIND_IN:We.BIND_IN,BIND_INOUT:We.BIND_INOUT,BIND_OUT:We.BIND_OUT,CLIENT_VERSION:We.VERSION_MAJOR<<24|We.VERSION_MINOR<<20|We.VERSION_PATCH<<12,CSFRM_IMPLICIT:We.CSFRM_IMPLICIT,CSFRM_NCHAR:We.CSFRM_NCHAR,DRIVER_NAME:We.DEFAULT_DRIVER_NAME+" thn",PURITY_DEFAULT:We.PURITY_DEFAULT,PURITY_NEW:We.PURITY_NEW,PURITY_SELF:We.PURITY_SELF,SYSASM:We.SYSASM,SYSBKP:We.SYSBKP,SYSDBA:We.SYSDBA,SYSDG:We.SYSDG,SYSKM:We.SYSKM,SYSOPER:We.SYSOPER,SYSRAC:We.SYSRAC,AUTH_MODE_DEFAULT:0,AUTH_MODE_PRELIM:8,AUTH_MODE_SYSASM:32768,AUTH_MODE_SYSBKP:131072,AUTH_MODE_SYSDBA:2,AUTH_MODE_SYSDGD:262144,AUTH_MODE_SYSKMT:524288,AUTH_MODE_SYSOPER:4,AUTH_MODE_SYSRAC:1048576,TNS_AUTH_MODE_LOGON:1,TNS_AUTH_MODE_CHANGE_PASSWORD:2,TNS_AUTH_MODE_SYSDBA:32,TNS_AUTH_MODE_SYSOPER:64,TNS_AUTH_MODE_PRELIM:128,TNS_AUTH_MODE_WITH_PASSWORD:256,TNS_AUTH_MODE_SYSASM:4194304,TNS_AUTH_MODE_SYSBKP:16777216,TNS_AUTH_MODE_SYSDGD:33554432,TNS_AUTH_MODE_SYSKMT:67108864,TNS_AUTH_MODE_SYSRAC:134217728,TNS_AUTH_MODE_IAM_TOKEN:536870912,TNS_PACKET_TYPE_CONNECT:1,TNS_PACKET_TYPE_ACCEPT:2,TNS_PACKET_TYPE_REFUSE:4,TNS_PACKET_TYPE_REDIRECT:5,TNS_PACKET_TYPE_DATA:6,TNS_PACKET_TYPE_RESEND:11,TNS_PACKET_TYPE_MARKER:12,TNS_PACKET_TYPE_CONTROL:14,TNS_MARKER_TYPE_BREAK:1,TNS_MARKER_TYPE_RESET:2,TNS_DATA_TYPE_DEFAULT:0,TNS_DATA_TYPE_VARCHAR:1,TNS_DATA_TYPE_NUMBER:2,TNS_DATA_TYPE_BINARY_INTEGER:3,TNS_DATA_TYPE_FLOAT:4,TNS_DATA_TYPE_STR:5,TNS_DATA_TYPE_VNU:6,TNS_DATA_TYPE_PDN:7,TNS_DATA_TYPE_LONG:8,TNS_DATA_TYPE_VCS:9,TNS_DATA_TYPE_TIDDEF:10,TNS_DATA_TYPE_ROWID:11,TNS_DATA_TYPE_DATE:12,TNS_DATA_TYPE_VBI:15,TNS_DATA_TYPE_RAW:23,TNS_DATA_TYPE_LONG_RAW:24,TNS_DATA_TYPE_UB2:25,TNS_DATA_TYPE_UB4:26,TNS_DATA_TYPE_SB1:27,TNS_DATA_TYPE_SB2:28,TNS_DATA_TYPE_SB4:29,TNS_DATA_TYPE_SWORD:30,TNS_DATA_TYPE_UWORD:31,TNS_DATA_TYPE_PTRB:32,TNS_DATA_TYPE_PTRW:33,TNS_DATA_TYPE_OER8:290,TNS_DATA_TYPE_FUN:291,TNS_DATA_TYPE_AUA:292,TNS_DATA_TYPE_RXH7:293,TNS_DATA_TYPE_NA6:294,TNS_DATA_TYPE_OAC:39,TNS_DATA_TYPE_AMS:40,TNS_DATA_TYPE_BRN:41,TNS_DATA_TYPE_BRP:298,TNS_DATA_TYPE_BRV:299,TNS_DATA_TYPE_KVA:300,TNS_DATA_TYPE_CLS:301,TNS_DATA_TYPE_CUI:302,TNS_DATA_TYPE_DFN:303,TNS_DATA_TYPE_DQR:304,TNS_DATA_TYPE_DSC:305,TNS_DATA_TYPE_EXE:306,TNS_DATA_TYPE_FCH:307,TNS_DATA_TYPE_GBV:308,TNS_DATA_TYPE_GEM:309,TNS_DATA_TYPE_GIV:310,TNS_DATA_TYPE_OKG:311,TNS_DATA_TYPE_HMI:312,TNS_DATA_TYPE_INO:313,TNS_DATA_TYPE_LNF:315,TNS_DATA_TYPE_ONT:316,TNS_DATA_TYPE_OPE:317,TNS_DATA_TYPE_OSQ:318,TNS_DATA_TYPE_SFE:319,TNS_DATA_TYPE_SPF:320,TNS_DATA_TYPE_VSN:321,TNS_DATA_TYPE_UD7:322,TNS_DATA_TYPE_DSA:323,TNS_DATA_TYPE_UIN:68,TNS_DATA_TYPE_PIN:327,TNS_DATA_TYPE_PFN:328,TNS_DATA_TYPE_PPT:329,TNS_DATA_TYPE_STO:331,TNS_DATA_TYPE_ARC:333,TNS_DATA_TYPE_MRS:334,TNS_DATA_TYPE_MRT:335,TNS_DATA_TYPE_MRG:336,TNS_DATA_TYPE_MRR:337,TNS_DATA_TYPE_MRC:338,TNS_DATA_TYPE_VER:339,TNS_DATA_TYPE_LON2:340,TNS_DATA_TYPE_INO2:341,TNS_DATA_TYPE_ALL:342,TNS_DATA_TYPE_UDB:343,TNS_DATA_TYPE_AQI:344,TNS_DATA_TYPE_ULB:345,TNS_DATA_TYPE_ULD:346,TNS_DATA_TYPE_SLS:91,TNS_DATA_TYPE_SID:348,TNS_DATA_TYPE_NA7:349,TNS_DATA_TYPE_LVC:94,TNS_DATA_TYPE_LVB:95,TNS_DATA_TYPE_CHAR:96,TNS_DATA_TYPE_AVC:97,TNS_DATA_TYPE_AL7:354,TNS_DATA_TYPE_K2RPC:355,TNS_DATA_TYPE_BINARY_FLOAT:100,TNS_DATA_TYPE_BINARY_DOUBLE:101,TNS_DATA_TYPE_CURSOR:102,TNS_DATA_TYPE_RDD:104,TNS_DATA_TYPE_XDP:359,TNS_DATA_TYPE_OSL:106,TNS_DATA_TYPE_OKO8:363,TNS_DATA_TYPE_EXT_NAMED:108,TNS_DATA_TYPE_INT_NAMED:109,TNS_DATA_TYPE_EXT_REF:110,TNS_DATA_TYPE_INT_REF:111,TNS_DATA_TYPE_CLOB:112,TNS_DATA_TYPE_BLOB:113,TNS_DATA_TYPE_BFILE:114,TNS_DATA_TYPE_CFILE:115,TNS_DATA_TYPE_RSET:116,TNS_DATA_TYPE_CWD:117,TNS_DATA_TYPE_JSON:119,TNS_DATA_TYPE_NEW_OAC:120,TNS_DATA_TYPE_UD12:380,TNS_DATA_TYPE_AL8:381,TNS_DATA_TYPE_LFOP:382,TNS_DATA_TYPE_FCRT:383,TNS_DATA_TYPE_DNY:384,TNS_DATA_TYPE_OPR:385,TNS_DATA_TYPE_PLS:386,TNS_DATA_TYPE_XID:387,TNS_DATA_TYPE_TXN:388,TNS_DATA_TYPE_DCB:389,TNS_DATA_TYPE_CCA:390,TNS_DATA_TYPE_WRN:391,TNS_DATA_TYPE_TLH:393,TNS_DATA_TYPE_TOH:394,TNS_DATA_TYPE_FOI:395,TNS_DATA_TYPE_SID2:396,TNS_DATA_TYPE_TCH:397,TNS_DATA_TYPE_PII:398,TNS_DATA_TYPE_PFI:399,TNS_DATA_TYPE_PPU:400,TNS_DATA_TYPE_PTE:401,TNS_DATA_TYPE_CLV:146,TNS_DATA_TYPE_RXH8:404,TNS_DATA_TYPE_N12:405,TNS_DATA_TYPE_AUTH:406,TNS_DATA_TYPE_KVAL:407,TNS_DATA_TYPE_DTR:152,TNS_DATA_TYPE_DUN:153,TNS_DATA_TYPE_DOP:154,TNS_DATA_TYPE_VST:155,TNS_DATA_TYPE_ODT:156,TNS_DATA_TYPE_FGI:413,TNS_DATA_TYPE_DSY:414,TNS_DATA_TYPE_DSYR8:415,TNS_DATA_TYPE_DSYH8:416,TNS_DATA_TYPE_DSYL:417,TNS_DATA_TYPE_DSYT8:418,TNS_DATA_TYPE_DSYV8:419,TNS_DATA_TYPE_DSYP:420,TNS_DATA_TYPE_DSYF:421,TNS_DATA_TYPE_DSYK:422,TNS_DATA_TYPE_DSYY:423,TNS_DATA_TYPE_DSYQ:424,TNS_DATA_TYPE_DSYC:425,TNS_DATA_TYPE_DSYA:426,TNS_DATA_TYPE_OT8:427,TNS_DATA_TYPE_DOL:172,TNS_DATA_TYPE_DSYTY:429,TNS_DATA_TYPE_AQE:430,TNS_DATA_TYPE_KV:431,TNS_DATA_TYPE_AQD:432,TNS_DATA_TYPE_AQ8:433,TNS_DATA_TYPE_TIME:178,TNS_DATA_TYPE_TIME_TZ:179,TNS_DATA_TYPE_TIMESTAMP:180,TNS_DATA_TYPE_TIMESTAMP_TZ:181,TNS_DATA_TYPE_INTERVAL_YM:182,TNS_DATA_TYPE_INTERVAL_DS:183,TNS_DATA_TYPE_EDATE:184,TNS_DATA_TYPE_ETIME:185,TNS_DATA_TYPE_ETTZ:186,TNS_DATA_TYPE_ESTAMP:187,TNS_DATA_TYPE_ESTZ:188,TNS_DATA_TYPE_EIYM:189,TNS_DATA_TYPE_EIDS:190,TNS_DATA_TYPE_RFS:449,TNS_DATA_TYPE_RXH10:450,TNS_DATA_TYPE_DCLOB:195,TNS_DATA_TYPE_DBLOB:196,TNS_DATA_TYPE_DBFILE:197,TNS_DATA_TYPE_DJSON:198,TNS_DATA_TYPE_KPN:454,TNS_DATA_TYPE_KPDNR:455,TNS_DATA_TYPE_DSYD:456,TNS_DATA_TYPE_DSYS:457,TNS_DATA_TYPE_DSYR:458,TNS_DATA_TYPE_DSYH:459,TNS_DATA_TYPE_DSYT:460,TNS_DATA_TYPE_DSYV:461,TNS_DATA_TYPE_AQM:462,TNS_DATA_TYPE_OER11:463,TNS_DATA_TYPE_UROWID:208,TNS_DATA_TYPE_AQL:466,TNS_DATA_TYPE_OTC:467,TNS_DATA_TYPE_KFNO:468,TNS_DATA_TYPE_KFNP:469,TNS_DATA_TYPE_KGT8:470,TNS_DATA_TYPE_RASB4:471,TNS_DATA_TYPE_RAUB2:472,TNS_DATA_TYPE_RAUB1:473,TNS_DATA_TYPE_RATXT:474,TNS_DATA_TYPE_RSSB4:475,TNS_DATA_TYPE_RSUB2:476,TNS_DATA_TYPE_RSUB1:477,TNS_DATA_TYPE_RSTXT:478,TNS_DATA_TYPE_RIDL:479,TNS_DATA_TYPE_GLRDD:480,TNS_DATA_TYPE_GLRDG:481,TNS_DATA_TYPE_GLRDC:482,TNS_DATA_TYPE_OKO:483,TNS_DATA_TYPE_DPP:484,TNS_DATA_TYPE_DPLS:485,TNS_DATA_TYPE_DPMOP:486,TNS_DATA_TYPE_TIMESTAMP_LTZ:231,TNS_DATA_TYPE_ESITZ:232,TNS_DATA_TYPE_UB8:233,TNS_DATA_TYPE_STAT:490,TNS_DATA_TYPE_RFX:491,TNS_DATA_TYPE_FAL:492,TNS_DATA_TYPE_CKV:493,TNS_DATA_TYPE_DRCX:494,TNS_DATA_TYPE_KGH:495,TNS_DATA_TYPE_AQO:496,TNS_DATA_TYPE_PNTY:241,TNS_DATA_TYPE_OKGT:498,TNS_DATA_TYPE_KPFC:499,TNS_DATA_TYPE_FE2:500,TNS_DATA_TYPE_SPFP:501,TNS_DATA_TYPE_DPULS:502,TNS_DATA_TYPE_BOOLEAN:252,TNS_DATA_TYPE_AQA:509,TNS_DATA_TYPE_KPBF:510,TNS_DATA_TYPE_TSM:513,TNS_DATA_TYPE_MSS:514,TNS_DATA_TYPE_KPC:516,TNS_DATA_TYPE_CRS:517,TNS_DATA_TYPE_KKS:518,TNS_DATA_TYPE_KSP:519,TNS_DATA_TYPE_KSPTOP:520,TNS_DATA_TYPE_KSPVAL:521,TNS_DATA_TYPE_PSS:522,TNS_DATA_TYPE_NLS:523,TNS_DATA_TYPE_ALS:524,TNS_DATA_TYPE_KSDEVTVAL:525,TNS_DATA_TYPE_KSDEVTTOP:526,TNS_DATA_TYPE_KPSPP:527,TNS_DATA_TYPE_KOL:528,TNS_DATA_TYPE_LST:529,TNS_DATA_TYPE_ACX:530,TNS_DATA_TYPE_SCS:531,TNS_DATA_TYPE_RXH:532,TNS_DATA_TYPE_KPDNS:533,TNS_DATA_TYPE_KPDCN:534,TNS_DATA_TYPE_KPNNS:535,TNS_DATA_TYPE_KPNCN:536,TNS_DATA_TYPE_KPS:537,TNS_DATA_TYPE_APINF:538,TNS_DATA_TYPE_TEN:539,TNS_DATA_TYPE_XSSCS:540,TNS_DATA_TYPE_XSSSO:541,TNS_DATA_TYPE_XSSAO:542,TNS_DATA_TYPE_KSRPC:543,TNS_DATA_TYPE_KVL:560,TNS_DATA_TYPE_SESSGET:563,TNS_DATA_TYPE_SESSREL:564,TNS_DATA_TYPE_XSSDEF:565,TNS_DATA_TYPE_PDQCINV:572,TNS_DATA_TYPE_PDQIDC:573,TNS_DATA_TYPE_KPDQCSTA:574,TNS_DATA_TYPE_KPRS:575,TNS_DATA_TYPE_KPDQIDC:576,TNS_DATA_TYPE_RTSTRM:578,TNS_DATA_TYPE_SESSRET:579,TNS_DATA_TYPE_SCN6:580,TNS_DATA_TYPE_KECPA:581,TNS_DATA_TYPE_KECPP:582,TNS_DATA_TYPE_SXA:583,TNS_DATA_TYPE_KVARR:584,TNS_DATA_TYPE_KPNGN:585,TNS_DATA_TYPE_XSNSOP:590,TNS_DATA_TYPE_XSATTR:591,TNS_DATA_TYPE_XSNS:592,TNS_DATA_TYPE_TXT:593,TNS_DATA_TYPE_XSSESSNS:594,TNS_DATA_TYPE_XSATTOP:595,TNS_DATA_TYPE_XSCREOP:596,TNS_DATA_TYPE_XSDETOP:597,TNS_DATA_TYPE_XSDESOP:598,TNS_DATA_TYPE_XSSETSP:599,TNS_DATA_TYPE_XSSIDP:600,TNS_DATA_TYPE_XSPRIN:601,TNS_DATA_TYPE_XSKVL:602,TNS_DATA_TYPE_XSSSDEF2:603,TNS_DATA_TYPE_XSNSOP2:604,TNS_DATA_TYPE_XSNS2:605,TNS_DATA_TYPE_IMPLRES:611,TNS_DATA_TYPE_OER:612,TNS_DATA_TYPE_UB1ARRAY:613,TNS_DATA_TYPE_SESSSTATE:614,TNS_DATA_TYPE_AC_REPLAY:615,TNS_DATA_TYPE_AC_CONT:616,TNS_DATA_TYPE_KPDNREQ:622,TNS_DATA_TYPE_KPDNRNF:623,TNS_DATA_TYPE_KPNGNC:624,TNS_DATA_TYPE_KPNRI:625,TNS_DATA_TYPE_AQENQ:626,TNS_DATA_TYPE_AQDEQ:627,TNS_DATA_TYPE_AQJMS:628,TNS_DATA_TYPE_KPDNRPAY:629,TNS_DATA_TYPE_KPDNRACK:630,TNS_DATA_TYPE_KPDNRMP:631,TNS_DATA_TYPE_KPDNRDQ:632,TNS_DATA_TYPE_CHUNKINFO:636,TNS_DATA_TYPE_SCN:637,TNS_DATA_TYPE_SCN8:638,TNS_DATA_TYPE_UDS:639,TNS_DATA_TYPE_TNP:640,TNS_TYPE_REP_NATIVE:0,TNS_TYPE_REP_UNIVERSAL:1,TNS_TYPE_REP_ORACLE:10,TNS_MSG_TYPE_PROTOCOL:1,TNS_MSG_TYPE_DATA_TYPES:2,TNS_MSG_TYPE_FUNCTION:3,TNS_MSG_TYPE_ERROR:4,TNS_MSG_TYPE_ROW_HEADER:6,TNS_MSG_TYPE_ROW_DATA:7,TNS_MSG_TYPE_PARAMETER:8,TNS_MSG_TYPE_STATUS:9,TNS_MSG_TYPE_IO_VECTOR:11,TNS_MSG_TYPE_LOB_DATA:14,TNS_MSG_TYPE_WARNING:15,TNS_MSG_TYPE_DESCRIBE_INFO:16,TNS_MSG_TYPE_PIGGYBACK:17,TNS_MSG_TYPE_FLUSH_OUT_BINDS:19,TNS_MSG_TYPE_BIT_VECTOR:21,TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK:23,TNS_MSG_TYPE_IMPLICIT_RESULTSET:27,TNS_MSG_TYPE_ONEWAY_FN:26,TNS_KEYWORD_NUM_CURRENT_SCHEMA:168,TNS_KEYWORD_NUM_EDITION:172,TNS_BIND_USE_INDICATORS:1,TNS_BIND_USE_LENGTH:2,TNS_BIND_ARRAY:64,TNS_BIND_DIR_OUTPUT:16,TNS_BIND_DIR_INPUT:32,TNS_BIND_DIR_INPUT_OUTPUT:48,TNS_EXEC_OPTION_PARSE:1,TNS_EXEC_OPTION_BIND:8,TNS_EXEC_OPTION_DEFINE:16,TNS_EXEC_OPTION_EXECUTE:32,TNS_EXEC_OPTION_FETCH:64,TNS_EXEC_OPTION_COMMIT:256,TNS_EXEC_OPTION_COMMIT_REEXECUTE:1,TNS_EXEC_OPTION_PLSQL_BIND:1024,TNS_EXEC_OPTION_DML_ROWCOUNTS:16384,TNS_EXEC_OPTION_NOT_PLSQL:32768,TNS_EXEC_OPTION_IMPLICIT_RESULTSET:32768,TNS_EXEC_OPTION_DESCRIBE:131072,TNS_EXEC_OPTION_NO_COMPRESSED_FETCH:262144,TNS_EXEC_OPTION_BATCH_ERRORS:524288,TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION:1,TNS_SERVER_PIGGYBACK_OS_PID_MTS:2,TNS_SERVER_PIGGYBACK_TRACE_EVENT:3,TNS_SERVER_PIGGYBACK_SESS_RET:4,TNS_SERVER_PIGGYBACK_SYNC:5,TNS_SERVER_PIGGYBACK_LTXID:7,TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT:8,TNS_SERVER_PIGGYBACK_EXT_SYNC:9,TNS_SESSGET_SESSION_CHANGED:4,TNS_LOB_OP_GET_LENGTH:1,TNS_LOB_OP_READ:2,TNS_LOB_OP_TRIM:32,TNS_LOB_OP_WRITE:64,TNS_LOB_OP_GET_CHUNK_SIZE:16384,TNS_LOB_OP_CREATE_TEMP:272,TNS_LOB_OP_FREE_TEMP:273,TNS_LOB_OP_OPEN:32768,TNS_LOB_OP_CLOSE:65536,TNS_LOB_OP_IS_OPEN:69632,TNS_LOB_OP_ARRAY:524288,TNS_LOB_LOC_OFFSET_FLAG_1:4,TNS_LOB_LOC_OFFSET_FLAG_3:6,TNS_LOB_LOC_OFFSET_FLAG_4:7,TNS_LOB_QLOCATOR_VERSION:4,TNS_LOB_LOC_FLAGS_BLOB:1,TNS_LOB_LOC_FLAGS_VALUE_BASED:32,TNS_LOB_LOC_FLAGS_ABSTRACT:64,TNS_LOB_LOC_FLAGS_INIT:8,TNS_LOB_LOC_FLAGS_TEMP:1,TNS_LOB_LOC_FLAGS_VAR_LENGTH_CHARSET:128,TNS_LOB_OPEN_READ_WRITE:2,TNS_LOB_PREFETCH_FLAG:33554432,TNS_JSON_MAX_LENGTH:32*1024*1024,TNS_JSON_MAGIC_BYTE_1:255,TNS_JSON_MAGIC_BYTE_2:74,TNS_JSON_MAGIC_BYTE_3:90,TNS_JSON_VERSION:1,TNS_JSON_FLAG_HASH_ID_UINT8:256,TNS_JSON_FLAG_HASH_ID_UINT16:512,TNS_JSON_FLAG_NUM_FNAMES_UINT16:1024,TNS_JSON_FLAG_FNAMES_SEG_UINT32:2048,TNS_JSON_FLAG_TINY_NODES_STAT:8192,TNS_JSON_FLAG_TREE_SEG_UINT32:4096,TNS_JSON_FLAG_REL_OFFSET_MODE:1,TNS_JSON_FLAG_INLINE_LEAF:2,TNS_JSON_FLAG_LEN_IN_PCODE:4,TNS_JSON_FLAG_NUM_FNAMES_UINT32:8,TNS_JSON_FLAG_IS_SCALAR:16,TNS_JSON_TYPE_NULL:48,TNS_JSON_TYPE_TRUE:49,TNS_JSON_TYPE_FALSE:50,TNS_JSON_TYPE_STRING_LENGTH_UINT8:51,TNS_JSON_TYPE_NUMBER_LENGTH_UINT8:52,TNS_JSON_TYPE_BINARY_DOUBLE:54,TNS_JSON_TYPE_STRING_LENGTH_UINT16:55,TNS_JSON_TYPE_STRING_LENGTH_UINT32:56,TNS_JSON_TYPE_TIMESTAMP:57,TNS_JSON_TYPE_BINARY_LENGTH_UINT16:58,TNS_JSON_TYPE_BINARY_LENGTH_UINT32:59,TNS_JSON_TYPE_DATE:60,TNS_JSON_TYPE_INTERVAL_YM:61,TNS_JSON_TYPE_INTERVAL_DS:62,TNS_JSON_TYPE_TIMESTAMP_TZ:124,TNS_JSON_TYPE_TIMESTAMP7:125,TNS_JSON_TYPE_BINARY_FLOAT:127,TNS_JSON_TYPE_OBJECT:132,TNS_JSON_TYPE_ARRAY:192,TNS_END_TO_END_ACTION:16,TNS_END_TO_END_CLIENT_IDENTIFIER:1,TNS_END_TO_END_CLIENT_INFO:256,TNS_END_TO_END_DBOP:512,TNS_END_TO_END_MODULE:8,TNS_VERSION_DESIRED:316,TNS_VERSION_MINIMUM:300,TNS_VERSION_MIN_ACCEPTED:315,TNS_VERSION_MIN_LARGE_SDU:315,TNS_SERVICE_OPTIONS:3073,TNS_PROTOCOL_CHARACTERISTICS:20376,TNS_CONNECT_FLAGS:32896,TNS_CAN_RECV_ATTENTION:1024,TNS_CHECK_OOB:1,TNS_FUNC_AUTH_PHASE_ONE:118,TNS_FUNC_AUTH_PHASE_TWO:115,TNS_FUNC_CLOSE_CURSORS:105,TNS_FUNC_COMMIT:14,TNS_FUNC_EXECUTE:94,TNS_FUNC_FETCH:5,TNS_FUNC_LOB_OP:96,TNS_FUNC_LOGOFF:9,TNS_FUNC_PING:147,TNS_FUNC_ROLLBACK:15,TNS_FUNC_SET_END_TO_END_ATTR:135,TNS_FUNC_REEXECUTE:4,TNS_FUNC_REEXECUTE_AND_FETCH:78,TNS_FUNC_SET_SCHEMA:152,TNS_FUNC_SESSION_GET:162,TNS_FUNC_SESSION_RELEASE:163,TNS_FUNC_SESSION_STATE:176,TNS_FUNC_CANCEL_ALL:120,TNS_CHARSET_UTF8:873,TNS_CHARSET_UTF16:2e3,TNS_ENCODING_UTF8:"UTF-8",TNS_ENCODING_UTF16:"UTF-16LE",TNS_ENCODING_MULTI_BYTE:1,TNS_ENCODING_CONV_LENGTH:2,TNS_CCAP_SQL_VERSION:0,TNS_CCAP_LOGON_TYPES:4,TNS_CCAP_FIELD_VERSION:7,TNS_CCAP_SERVER_DEFINE_CONV:8,TNS_CCAP_TTC1:15,TNS_CCAP_OCI1:16,TNS_CCAP_TDS_VERSION:17,TNS_CCAP_RPC_VERSION:18,TNS_CCAP_RPC_SIG:19,TNS_CCAP_DBF_VERSION:21,TNS_CCAP_LOB:23,TNS_CCAP_TTC2:26,TNS_CCAP_UB2_DTY:27,TNS_CCAP_OCI2:31,TNS_CCAP_CLIENT_FN:34,TNS_CCAP_TTC3:37,TNS_CCAP_TTC4:40,TNS_CCAP_LOB2:42,TNS_CCAP_MAX:45,TNS_CCAP_SQL_VERSION_MAX:6,TNS_CCAP_FIELD_VERSION_11_2:6,TNS_CCAP_FIELD_VERSION_12_1:7,TNS_CCAP_FIELD_VERSION_12_2:8,TNS_CCAP_FIELD_VERSION_12_2_EXT1:9,TNS_CCAP_FIELD_VERSION_18_1:10,TNS_CCAP_FIELD_VERSION_18_1_EXT_1:11,TNS_CCAP_FIELD_VERSION_19_1:12,TNS_CCAP_FIELD_VERSION_19_1_EXT_1:13,TNS_CCAP_FIELD_VERSION_20_1:14,TNS_CCAP_FIELD_VERSION_20_1_EXT_1:15,TNS_CCAP_FIELD_VERSION_21_1:16,TNS_CCAP_FIELD_VERSION_23_1:17,TNS_CCAP_FIELD_VERSION_23_1_EXT_1:18,TNS_CCAP_FIELD_VERSION_MAX:18,TNS_CCAP_O5LOGON:8,TNS_CCAP_O5LOGON_NP:2,TNS_CCAP_O7LOGON:32,TNS_CCAP_O8LOGON_LONG_IDENTIFIER:64,TNS_CCAP_O9LOGON_LONG_PASSWORD:128,TNS_CCAP_END_OF_CALL_STATUS:1,TNS_CCAP_IND_RCD:8,TNS_CCAP_FAST_BVEC:32,TNS_CCAP_FAST_SESSION_PROPAGATE:16,TNS_CCAP_APP_CTX_PIGGYBACK:128,TNS_CCAP_TDS_VERSION_MAX:3,TNS_CCAP_RPC_VERSION_MAX:7,TNS_CCAP_RPC_SIG_VALUE:3,TNS_CCAP_DBF_VERSION_MAX:1,TNS_CCAP_IMPLICIT_RESULTS:16,TNS_CCAP_BIG_CHUNK_CLR:32,TNS_CCAP_KEEP_OUT_ORDER:128,TNS_CCAP_LOB_UB8_SIZE:1,TNS_CCAP_LOB_ENCS:2,TNS_CCAP_LOB_PREFETCH:64,TNS_CCAP_DRCP:16,TNS_CCAP_ZLNP:4,TNS_CCAP_INBAND_NOTIFICATION:4,TNS_CCAP_CLIENT_FN_MAX:12,TNS_CCAP_LOB2_QUASI:1,TNS_CCAP_LOB2_2GB_PREFETCH:4,TNS_RCAP_COMPAT:0,TNS_RCAP_TTC:6,TNS_RCAP_MAX:7,TNS_RCAP_COMPAT_81:2,TNS_RCAP_TTC_ZERO_COPY:1,TNS_RCAP_TTC_32K:4,TNS_VERIFIER_TYPE_11G_1:45394,TNS_VERIFIER_TYPE_11G_2:6949,TNS_VERIFIER_TYPE_12C:18453,TNS_MAX_SHORT_LENGTH:252,TNS_ESCAPE_CHAR:253,TNS_LONG_LENGTH_INDICATOR:254,TNS_NULL_LENGTH_INDICATOR:255,TNS_MAX_ROWID_LENGTH:18,TNS_DURATION_MID:2147483648,TNS_DURATION_OFFSET:60,TNS_DURATION_SESSION:10,TNS_MAX_LONG_LENGTH:2147483647,TNS_SDU:8192,TNS_TDU:65535,TNS_TXN_IN_PROGRESS:2,TNS_MAX_CONNECT_DATA:230,TNS_CHUNK_SIZE:32767,TNS_MAX_UROWID_LENGTH:3950,TNS_HAS_REGION_ID:128,TZ_HOUR_OFFSET:20,TZ_MINUTE_OFFSET:60,DRCP_DEAUTHENTICATE:2,TNS_OBJ_IS_VERSION_81:128,TNS_OBJ_IS_DEGENERATE:16,TNS_OBJ_IS_COLLECTION:8,TNS_OBJ_NO_PREFIX_SEG:4,TNS_OBJ_IMAGE_VERSION:1,TNS_OBJ_MAX_SHORT_LENGTH:245,TNS_OBJ_ATOMIC_NULL:253,TNS_OBJ_NON_NULL_OID:2,TNS_OBJ_HAS_EXTENT_OID:8,TNS_OBJ_TOP_LEVEL:1,TNS_OBJ_HAS_INDEXES:16,TNS_OBJ_PLSQL_INDEX_TABLE:1,TNS_OBJ_NESTED_TABLE:2,TNS_OBJ_VARRAY:3,TNS_OBJ_TDS_TYPE_CHAR:1,TNS_OBJ_TDS_TYPE_DATE:2,TNS_OBJ_TDS_TYPE_FLOAT:5,TNS_OBJ_TDS_TYPE_NUMBER:6,TNS_OBJ_TDS_TYPE_VARCHAR:7,TNS_OBJ_TDS_TYPE_BOOLEAN:8,TNS_OBJ_TDS_TYPE_RAW:19,TNS_OBJ_TDS_TYPE_TIMESTAMP:21,TNS_OBJ_TDS_TYPE_TIMESTAMP_TZ:23,TNS_OBJ_TDS_TYPE_OBJ:27,TNS_OBJ_TDS_TYPE_COLL:28,TNS_OBJ_TDS_TYPE_CLOB:29,TNS_OBJ_TDS_TYPE_BLOB:30,TNS_OBJ_TDS_TYPE_TIMESTAMP_LTZ:33,TNS_OBJ_TDS_TYPE_BINARY_FLOAT:37,TNS_OBJ_TDS_TYPE_BINARY_DOUBLE:45,TNS_XML_TYPE_LOB:1,TNS_XML_TYPE_STRING:4,TNS_XML_TYPE_FLAG_SKIP_NEXT_4:1048576,TNS_ERR_VAR_NOT_IN_SELECT_LIST:1007,TNS_ERR_INBAND_MESSAGE:12573,TNS_ERR_INVALID_SERVICE_NAME:12514,TNS_ERR_INVALID_SID:12505,TNS_ERR_NO_DATA_FOUND:1403,TNS_ERR_SESSION_SHUTDOWN:12572,PACKET_HEADER_SIZE:8,NUMBER_AS_TEXT_CHARS:172,NUMBER_MAX_DIGITS:40,BUFFER_CHUNK_SIZE:65536,CHUNKED_BYTES_CHUNK_SIZE:65536,TNS_BASE64_ALPHABET_ARRAY:ZN.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),TNS_EXTENT_OID:ZN.from("00000000000000000000000000010001","hex")}});var Ir=R((Qy,sS)=>{"use strict";var{Buffer:Rr}=require("buffer"),tS=Be(),jf=require("crypto"),da=class da extends Error{};_(da,"OutOfPacketsError");var Aa=da;function gn(r,e,t,s){for(let n=0;n<t;n++)r[s+t-n-1]=tS.TNS_BASE64_ALPHABET_ARRAY[e&63],e=e>>6;return s+t}_(gn,"_convertBase64");function Qf(r){let e=0;if(r.rba!==0||r.partitionID!==0||r.blockNum!==0||r.slotNum!=0){let t=Rr.alloc(tS.TNS_MAX_ROWID_LENGTH);return e=gn(t,r.rba,6,e),e=gn(t,r.partitionID,3,e),e=gn(t,r.blockNum,6,e),gn(t,r.slotNum,3,e),t.toString("utf8")}}_(Qf,"encodeRowID");function Jf(r){let e=jf.randomBytes(Rr.byteLength(r)),t=Rr.from(r,"utf8"),s=Rr.byteLength(r),n=[];for(let i=0;i<s;i++)n.push(e[i]^t[i]);return t.fill(0),{obfuscatedValue:e,value:n}}_(Jf,"setObfuscatedValue");function Zf(r,e){let t=[];for(let i=0;i<r.length;i++)t.push(r[i]^e[i]);let s=Rr.from(t);t.fill(0);let n=s.toString();return s.fill(0),n}_(Zf,"getDeobfuscatedValue");sS.exports={encodeRowID:Qf,getDeobfuscatedValue:Zf,OutOfPacketsError:Aa,setObfuscatedValue:Jf}});var bt=R((Zy,rS)=>{"use strict";var{Buffer:pa}=require("buffer"),re=Be(),On=W(),Ra=class Ra{constructor(){this.num=0,this.cursorId=0,this.pos=0,this.rowCount=0,this.message="",this.rowID=null,this.batchErrors}};_(Ra,"OracleErrorInfo");var ma=Ra,Ia=class Ia{constructor(e,t="",s="",n=!1,i=!1,a=0,c=0){this.num=e,this.message=t,this.context=s,this.isRecoverable=n,this.isWarning=i,this.code=a,this.offset=c}};_(Ia,"Error");var fa=Ia,Da=class Da{constructor(e){this.errorInfo=new ma,this.connection=e,this.messageType=re.TNS_MSG_TYPE_FUNCTION,this.functionCode=0,this.callStatus=0,this.flushOutBinds=!1,this.endToEndSeqNum=0,this.errorOccurred=!1,this.isWarning=!1,this.flushOutBinds=!1,this.processedError=!1}preProcess(){}async postProcess(){}writeFunctionHeader(e){e.writeUInt8(this.messageType),e.writeUInt8(this.functionCode),e.writeSeqNum(),e.caps.ttcFieldVersion>=re.TNS_CCAP_FIELD_VERSION_23_1_EXT_1&&e.writeUB8(0)}processErrorInfo(e){this.callStatus=e.readUB4(),e.skipUB2(),e.skipUB4(),e.skipUB2(),e.skipUB2(),e.skipUB2(),this.errorInfo.cursorId=e.readUB2(),this.errorInfo.pos=e.readUB2(),e.skipUB1(),e.skipUB1(),e.skipUB2(),e.skipUB2(),e.skipUB1(),e.skipUB1(),this.errorInfo.rowID=e.readRowID(),e.skipUB4(),e.skipUB1(),e.skipUB1(),e.skipUB2(),e.skipUB4(),e.readUB4()>0&&e.skipBytesChunked();let s=e.readUB2();if(s>0){this.errorInfo.batchErrors=[];let n=e.readUInt8();for(let i=0;i<s;i++){n===re.TNS_LONG_LENGTH_INDICATOR&&e.skipUB4();let a=e.readUB2();this.errorInfo.batchErrors.push(new fa(a))}n===re.TNS_LONG_LENGTH_INDICATOR&&e.skipBytes(1)}if(s=e.readUB2(),s>0){let n=e.readUInt8();for(let i=0;i<s;i++)n===re.TNS_LONG_LENGTH_INDICATOR&&e.skipUB4(),this.errorInfo.batchErrors[i].offset=e.readUB4();n===re.TNS_LONG_LENGTH_INDICATOR&&e.skipBytes(1)}if(s=e.readUB2(),s>0){e.skipBytes(1);for(let n=0;n<s;n++)e.skipUB2(),this.errorInfo.batchErrors[n].message=e.readStr(re.CSFRM_IMPLICIT),e.skipBytes(2)}this.errorInfo.num=e.readUB4(),this.errorInfo.rowCount=e.readUB8(),this.errorInfo.num!==0&&(this.errorOccurred=!0,this.errorInfo.message=e.readStr(re.CSFRM_IMPLICIT),this.errorInfo.message=this.errorInfo.message.replace(/\n+$/,"")),this.errorInfo.isWarning=!1,this.processedError=!0}processReturnParameter(){}processWarningInfo(e){this.errorInfo.num=e.readUB2();let t=e.readUB2();e.skipUB2(),this.errorInfo.num!=0&&t>0&&(this.errorInfo.message=e.readStr(re.CSFRM_IMPLICIT)),this.errorInfo.isWarning=!0}hasMoreData(e){return e.numBytesLeft()>0&&!this.flushOutBinds}decode(e){this.process(e)}process(e){this.flushOutBinds=!1,this.processedError=!1;do{this.savePoint(e);let t=e.readUInt8();this.processMessage(e,t)}while(this.hasMoreData(e))}savePoint(e){e.savePoint()}processMessage(e,t){t===re.TNS_MSG_TYPE_ERROR?this.processErrorInfo(e):t===re.TNS_MSG_TYPE_WARNING?this.processWarningInfo(e):t===re.TNS_MSG_TYPE_STATUS?(this.callStatus=e.readUB4(),this.endToEndSeqNum=e.readUB2()):t===re.TNS_MSG_TYPE_PARAMETER?this.processReturnParameter(e):t===re.TNS_MSG_TYPE_SERVER_SIDE_PIGGYBACK?this.processServerSidePiggyBack(e):On.throwErr(On.ERR_UNEXPECTED_MESSAGE_TYPE,t,e.pos,e.packetNum)}processServerSidePiggyBack(e){let t=e.readUInt8();if(t===re.TNS_SERVER_PIGGYBACK_LTXID){let s=e.readUB4();s>0&&e.skipBytes(s)}else if(!(t===re.TNS_SERVER_PIGGYBACK_QUERY_CACHE_INVALIDATION||t===re.TNS_SERVER_PIGGYBACK_TRACE_EVENT))if(t===re.TNS_SERVER_PIGGYBACK_OS_PID_MTS)e.skipUB2(),e.skipBytesChunked();else if(t===re.TNS_SERVER_PIGGYBACK_SYNC){e.skipUB2(),e.skipUB1();let s=e.readUB2();e.skipBytes(1);for(let n=0;n<s;n++){let i=e.readUB2();i>0&&e.skipBytesChunked(),i=e.readUB2(),i>0&&e.skipBytesChunked(),e.skipUB2(),e.skipUB4()}}else if(t===re.TNS_SERVER_PIGGYBACK_EXT_SYNC)e.skipUB2(),e.skipUB1();else if(t===re.TNS_SERVER_PIGGYBACK_AC_REPLAY_CONTEXT){e.skipUB2(),e.skipUB1(1),e.skipUB4(),e.skipUB4(),e.skipUB1();let s=e.readUB4();s>0&&e.skipBytes(s)}else if(t===re.TNS_SERVER_PIGGYBACK_SESS_RET){e.skipUB2(),e.skipUB1();let s=e.readUB2();if(s>0){e.skipUB1();for(let i=0;i<s;++i){let a=e.readUB2();a>0&&e.skipBytesChunked(),a=e.readUB2(),a>0&&e.skipBytesChunked(),e.skipUB2()}}e.readUB4()&re.TNS_SESSGET_SESSION_CHANGED&&this.connection._drcpEstablishSession&&this.connection.resetStatmentCache(),this.connection._drcpEstablishSession=!1,e.skipUB4(),e.skipUB2()}else On.throwErr(On.ERR_UNKOWN_SERVER_SIDE_PIGGYBACK,t)}writePiggybacks(e){this.connection._currentSchemaModified&&this._writeCurrentSchemaPiggyback(e),this.connection._cursorsToClose.size>0&&!this.connection._drcpEstablishSession&&this.writeCloseCursorsPiggyBack(e),(this.connection._actionModified||this.connection._clientIdentifierModified||this.connection._dbopModified||this.connection._clientInfoModified||this.connection._moduleModified)&&this._writeEndToEndPiggybacks(e),this.connection._tempLobsTotalSize>0&&this.writeCloseTempLobsPiggyback(e)}writePiggybackHeader(e,t){e.writeUInt8(re.TNS_MSG_TYPE_PIGGYBACK),e.writeUInt8(t),e.writeSeqNum(),e.caps.ttcFieldVersion>=re.TNS_CCAP_FIELD_VERSION_23_1_EXT_1&&e.writeUB8(0)}writeCloseCursorsPiggyBack(e){this.writePiggybackHeader(e,re.TNS_FUNC_CLOSE_CURSORS),e.writeUInt8(1),e.writeUB4(this.connection._cursorsToClose.size);for(let t of this.connection._cursorsToClose.keys())e.writeUB4(t);this.connection._cursorsToClose.clear()}writeCloseTempLobsPiggyback(e){let t=this.connection._tempLobsToClose,s=re.TNS_LOB_OP_FREE_TEMP|re.TNS_LOB_OP_ARRAY;this.writePiggybackHeader(e,re.TNS_FUNC_LOB_OP),e.writeUInt8(1),e.writeUB4(this.connection._tempLobsTotalSize),e.writeUInt8(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(s),e.writeUInt8(0),e.writeUB4(0),e.writeUB8(0),e.writeUB8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);for(let n of t)e.writeBytes(n);this.connection._tempLobsToClose=[],this.connection._tempLobsTotalSize=0}_writeCurrentSchemaPiggyback(e){this.writePiggybackHeader(e,re.TNS_FUNC_SET_SCHEMA),e.writeUInt8(1);let t=pa.byteLength(this.connection.currentSchema);e.writeUB4(t),e.writeBytesWithLength(pa.from(this.connection.currentSchema))}_writeEndToEndPiggybacks(e){let t=0;this.connection._actionModified&&(t|=re.TNS_END_TO_END_ACTION),this.connection._clientIdentifierModified&&(t|=re.TNS_END_TO_END_CLIENT_IDENTIFIER),this.connection._clientInfoModified&&(t|=re.TNS_END_TO_END_CLIENT_INFO),this.connection._moduleModified&&(t|=re.TNS_END_TO_END_MODULE),this.connection._dbOpModified&&(t|=re.TNS_END_TO_END_DBOP),this.writePiggybackHeader(e,re.TNS_FUNC_SET_END_TO_END_ATTR),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(t);let s=this.writeEndEndTraceValue(e,this.connection._clientIdentifier,this.connection._clientIdentifierModified),n=this.writeEndEndTraceValue(e,this.connection._module,this.connection._moduleModified),i=this.writeEndEndTraceValue(e,this.connection._action,this.connection._actionModified);e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);let a=this.writeEndEndTraceValue(e,this.connection._clientInfo,this.connection._clientInfoModified);e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0);let c=this.writeEndEndTraceValue(e,this.connection._dbOp,this.connection._dbOpModified);this.connection._clientIdentifierModified&&this.connection._clientIdentifier&&e.writeBytesWithLength(s),this.connection._moduleModified&&this.connection._module&&e.writeBytesWithLength(n),this.connection._actionModified&&this.connection._action&&e.writeBytesWithLength(i),this.connection._clientInfoModified&&this.connection._clientInfo&&e.writeBytesWithLength(a),this.connection._dbOpModified&&this.connection._dbOp&&e.writeBytesWithLength(c),this.connection._actionModified=!1,this.connection._action="",this.connection._clientIdentifierModified=!1,this.connection._clientIdentifier="",this.connection._clientInfoModified=!1,this.connection._clientInfo="",this.connection._dbOpModified=!1,this.connection._dbOp="",this.connection._moduleModified=!1,this.connection._module=""}writeEndEndTraceValue(e,t,s){let n;return s?(e.writeUInt8(1),t?(n=pa.from(t),e.writeUB4(n.length)):e.writeUB4(0)):(e.writeUInt8(0),e.writeUB4(0)),n}};_(Da,"Message");var Pa=Da;rS.exports=Pa});var Dr=R((tL,iS)=>{"use strict";var{Buffer:Wt}=require("buffer"),tt=Be(),Lt=W(),eP=yt(),nS=At(),ga=class ga{constructor(e){typeof e=="number"?(this.buf=Wt.alloc(e),this.size=0,this.maxSize=e):(this.buf=e,this.size=this.maxSize=e.length),this.pos=0}_grow(e){Lt.throwErr(Lt.ERR_BUFFER_LENGTH_INSUFFICIENT,this.numBytesLeft(),e)}_readBytesWithLength(e){return this.readBytes(e)}_readInteger(e,t,s){let n=!1,i=this.readUInt8();if(i===0)return 0;if(i&128&&(t||Lt.throwErr(Lt.ERR_UNEXPECTED_NEGATIVE_INTEGER,this.pos,this.packetNum),n=!0,i=i&127),i>e&&Lt.throwErr(Lt.ERR_INTEGER_TOO_LARGE,i,e,this.pos,this.packetNum),s)this.skipBytes(i);else{let c=this.readBytes(i).readUIntBE(0,i);return n?-c:c}}numBytesLeft(){return this.size-this.pos}parseBinaryDouble(e){return e=Wt.from(e),e[0]&128?e[0]&=127:(e[0]^=255,e[1]^=255,e[2]^=255,e[3]^=255,e[4]^=255,e[5]^=255,e[6]^=255,e[7]^=255),e.readDoubleBE()}parseBinaryFloat(e){return e=Wt.from(e),e[0]&128?e[0]&=127:(e[0]^=255,e[1]^=255,e[2]^=255,e[3]^=255),e.readFloatBE()}parseOracleDate(e,t=!0){let s=0;e.length>=11&&(s=Math.floor(e.readUInt32BE(7)/(1e3*1e3)));let n=(e[0]-100)*100+e[1]-100;return eP._makeDate(t,n,e[2],e[3],e[4]-1,e[5]-1,e[6]-1,s,0)}parseOracleNumber(e){let t=e[0],s=!!(t&128);s||(t=t^255),t-=193;let n=t*2+2;if(e.length===1)return s?"0":"-1e126";let i=e.length;!s&&e[e.length-1]===102&&(i-=1);let a,c=[];for(let E=1;E<i;E++){s?a=e[E]-1:a=101-e[E];let l=Math.floor(a/10);l===0&&E===1?n-=1:l===10?(c.push("1"),c.push("0"),n+=1):(l!==0||E>1)&&c.push(l.toString()),l=a%10,(l!==0||E<i-1)&&c.push(l.toString())}let T=[];s||T.push("-"),n<=0&&(T.push("."),n<0&&T.push("0".repeat(-n)));for(let E=0;E<c.length;E++)E>0&&E===n&&T.push("."),T.push(c[E]);if(n>c.length)for(let E=c.length;E<n;E++)T.push("0");return T.join("")}readBinaryDouble(){let e=this.readBytesWithLength();return e?this.parseBinaryDouble(e):null}readBinaryFloat(){let e=this.readBytesWithLength();return e?this.parseBinaryFloat(e):null}readBool(){let e=this.readBytesWithLength();return e?e[e.length-1]===1:null}readBytes(e){let t=this.numBytesLeft();e>t&&Lt.throwErr(Lt.ERR_UNEXPECTED_END_OF_DATA,e,t);let s=this.buf.subarray(this.pos,this.pos+e);return this.pos+=e,s}readBytesWithLength(){let e=this.readUInt8();return e===0||e===tt.TNS_NULL_LENGTH_INDICATOR?null:this._readBytesWithLength(e)}readDbObject(){let e={},t=this.readUB4();return t>0&&(e.toid=Wt.from(this.readBytesWithLength())),t=this.readUB4(),t>0&&(e.oid=Wt.from(this.readBytesWithLength())),t=this.readUB4(),t>0&&(e.snapshot=Wt.from(this.readBytesWithLength())),this.skipUB2(),t=this.readUB4(),this.skipUB2(),t>0&&(e.packedData=Wt.from(this.readBytesWithLength())),e}readInt8(){return this.readBytes(1).readInt8()}readOracleDate(e){let t=this.readBytesWithLength();return t?this.parseOracleDate(t,e):null}readOracleNumber(){let e=this.readBytesWithLength();return e?this.parseOracleNumber(e):null}readSB2(){return this._readInteger(2,!0,!1)}readSB4(){return this._readInteger(4,!0,!1)}readSB8(){return this._readInteger(8,!0,!1)}readStr(e){let t=this.readBytesWithLength();return t?e===tt.CSFRM_IMPLICIT?t.toString():Wt.from(t).swap16().toString("utf16le"):null}readUB2(){return this._readInteger(2,!1,!1)}readUB4(){return this._readInteger(4,!1,!1)}readUB8(){return this._readInteger(8,!1,!1)}readUInt8(){return this.readBytes(1)[0]}readUInt16BE(){return this.readBytes(2).readUInt16BE()}readUInt16LE(){return this.readBytes(2).readUInt16LE()}readUInt32BE(){return this.readBytes(4).readUInt32BE()}reserveBytes(e){e>this.numBytesLeft()&&this._grow(this.pos+e);let t=this.buf.subarray(this.pos,this.pos+e);return this.pos+=e,t}skipBytes(e){e>this.numBytesLeft()&&Lt.throwErr(Lt.ERR_UNEXPECTED_END_OF_DATA),this.pos+=e}skipSB4(){return this._readInteger(4,!0,!0)}skipUB1(){this.skipBytes(1)}skipUB2(){return this._readInteger(2,!1,!0)}skipUB4(){return this._readInteger(4,!1,!0)}skipUB8(){return this._readInteger(8,!1,!0)}writeBinaryDouble(e){this.writeUInt8(8);let t=this.reserveBytes(8);t.writeDoubleBE(e),t[0]&128?(t[0]^=255,t[1]^=255,t[2]^=255,t[3]^=255,t[4]^=255,t[5]^=255,t[6]^=255,t[7]^=255):t[0]|=128}writeBinaryFloat(e){this.writeUInt8(4);let t=this.reserveBytes(4);t.writeFloatBE(e),t[0]&128?(t[0]^=255,t[1]^=255,t[2]^=255,t[3]^=255):t[0]|=128}writeBytes(e){let t=0,s=e.length;for(;s>0;){let n=this.numBytesLeft();n===0&&this._grow(this.pos+s);let i=Math.min(n,s);e.copy(this.buf,this.pos,t,t+i),this.pos+=i,t+=i,s-=i}}writeBytesWithLength(e){let t=e.length;if(t<=tt.TNS_MAX_SHORT_LENGTH)this.writeUInt8(t),t>0&&this.writeBytes(e);else{let s=0;for(this.writeUInt8(tt.TNS_LONG_LENGTH_INDICATOR);t>0;){let n=Math.min(t,tt.BUFFER_CHUNK_SIZE);this.writeUB4(n),this.writeBytes(e.subarray(s,s+n)),t-=n,s+=n}this.writeUB4(0)}}writeDbObject(e){this.writeUB4(e.toid.length),this.writeBytesWithLength(e.toid),e.oid?(this.writeUB4(e.oid.length),this.writeBytesWithLength(e.oid)):this.writeUB4(0),this.writeUB4(0),this.writeUB4(0);let t=e._getPackedData();this.writeUB4(t.length),this.writeUB4(e.flags),this.writeBytesWithLength(t)}writeOracleDate(e,t,s=!0){let n,i=t._bufferSizeFactor;i>7&&(n=e.getUTCMilliseconds()*1e3*1e3,n===0&&i<=11&&(i=7)),s&&this.writeUInt8(i);let a=this.reserveBytes(i);if(t===nS.DB_TYPE_DATE||t==nS.DB_TYPE_TIMESTAMP){let c=e.getFullYear();a[0]=Math.trunc(c/100)+100,a[1]=c%100+100,a[2]=e.getMonth()+1,a[3]=e.getDate(),a[4]=e.getHours()+1,a[5]=e.getMinutes()+1,a[6]=e.getSeconds()+1}else{let c=e.getUTCFullYear();a[0]=Math.trunc(c/100)+100,a[1]=c%100+100,a[2]=e.getUTCMonth()+1,a[3]=e.getUTCDate(),a[4]=e.getUTCHours()+1,a[5]=e.getUTCMinutes()+1,a[6]=e.getUTCSeconds()+1}i>7&&(a.writeInt32BE(n,7),i>11&&(a[11]=tt.TZ_HOUR_OFFSET,a[12]=tt.TZ_MINUTE_OFFSET))}writeOracleNumber(e){let t=!1;e[0]==="-"&&(t=!0,e=e.substring(1));let s=0,n=e.indexOf("e");n>0&&(s=Number(e.substring(n+1)),e=e.substring(0,n));let i=e.indexOf(".");if(i>0&&(s-=e.length-i-1,e=e.substring(0,i)+e.substring(i+1)),e[0]==="0"&&(e=e.replace(/^0+/,"")),e.length>0&&e[e.length-1]==="0"){let l=e.replace(/0+$/,"");s+=e.length-l.length,e=l}(e.length>tt.NUMBER_MAX_DIGITS||s>126||s<-129)&&Lt.throwErr(Lt.ERR_ORACLE_NUMBER_NO_REPR),(s>0&&s%2===1||s<0&&s%2===-1)&&(s--,e+="0"),e.length%2===1&&(e="0"+e);let a=t&&e.length<tt.NUMBER_MAX_DIGITS,c=e.length/2,T=(s+e.length)/2+192;t?T=T^255:e.length===0&&s===0&&(T=128);let E=this.reserveBytes(c+2+a);E[0]=c+1+a,E[1]=T;for(let l=0,h=2;l<e.length;l+=2,h++){let d=Number(e.substring(l,l+2));t?E[h]=101-d:E[h]=d+1}a&&(E[E.length-1]=102)}writeQLocator(e){this.writeUB4(40),this.writeUInt8(40),this.writeUInt16BE(38),this.writeUInt16BE(tt.TNS_LOB_QLOCATOR_VERSION),this.writeUInt8(tt.TNS_LOB_LOC_FLAGS_VALUE_BASED|tt.TNS_LOB_LOC_FLAGS_BLOB|tt.TNS_LOB_LOC_FLAGS_ABSTRACT),this.writeUInt8(tt.TNS_LOB_LOC_FLAGS_INIT),this.writeUInt16BE(0),this.writeUInt16BE(1),this.writeUInt64BE(e),this.writeUInt16BE(0),this.writeUInt16BE(0),this.writeUInt16BE(0),this.writeUInt64BE(0),this.writeUInt64BE(0)}writeStr(e){this.writeBytes(Wt.from(e))}writeInt32BE(e){this.reserveBytes(4).writeInt32BE(e)}writeUB4(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):e<=65535?(this.writeUInt8(2),this.writeUInt16BE(e)):(this.writeUInt8(4),this.writeUInt32BE(e))}writeUB8(e){e===0?this.writeUInt8(0):e<=255?(this.writeUInt8(1),this.writeUInt8(e)):e<=65535?(this.writeUInt8(2),this.writeUInt16BE(e)):e<=4294967295?(this.writeUInt8(4),this.writeUInt32BE(e)):(this.writeUInt8(8),this.writeUInt64BE(e))}writeUInt8(e){let t=this.reserveBytes(1);t[0]=e}writeUInt16BE(e){this.reserveBytes(2).writeUInt16BE(e)}writeUInt32BE(e){this.reserveBytes(4).writeUInt32BE(e)}writeUInt64BE(e){let t=this.reserveBytes(8);t.writeUInt32BE(0),t.writeUInt32BE(e,4)}writeUInt16LE(e){this.reserveBytes(2).writeUInt16LE(e)}};_(ga,"BaseBuffer");var yn=ga,Oa=class Oa extends yn{constructor(e){e?super(e):(super(tt.BUFFER_CHUNK_SIZE),this.size=this.maxSize)}_grow(e){let t=e%tt.BUFFER_CHUNK_SIZE;t>0&&(e+=tt.BUFFER_CHUNK_SIZE-t);let s=Wt.alloc(e);this.buf.copy(s),this.buf=s,this.maxSize=this.size=e}};_(Oa,"GrowableBuffer");var Ca=Oa;iS.exports={BaseBuffer:yn,GrowableBuffer:Ca}});var Ba=R((rL,oS)=>{"use strict";var{Buffer:nr}=require("buffer"),pe=Be(),Bt=W(),Ne=At(),tP=cn(),{GrowableBuffer:sP}=Dr(),La=class La extends sP{_readBytesWithLength(e){return e===pe.TNS_LONG_LENGTH_INDICATOR&&(e=this.readUInt32BE()),this.readBytes(e)}getIsAtomicNull(){let e=this.readUInt8();return e===pe.TNS_OBJ_ATOMIC_NULL||e===pe.TNS_NULL_LENGTH_INDICATOR?!0:(this.pos-=1,!1)}readHeader(e){if(e.imageFlags=this.readUInt8(),e.imageVersion=this.readUInt8(),this.readLength(),!(e.imageFlags&pe.TNS_OBJ_NO_PREFIX_SEG)){let t=this.readLength();this.skipBytes(t)}}readLength(){let e=this.readUInt8();return e!==pe.TNS_LONG_LENGTH_INDICATOR?e:this.readUInt32BE()}writeHeader(e){this.writeUInt8(e.imageFlags),this.writeUInt8(e.imageVersion),this.writeUInt8(pe.TNS_LONG_LENGTH_INDICATOR),this.writeUInt32BE(0),e._objType.isCollection&&(this.writeUInt8(1),this.writeUInt8(1))}writeLength(e){e<=pe.TNS_OBJ_MAX_SHORT_LENGTH?this.writeUInt8(e):(this.writeUInt8(pe.TNS_LONG_LENGTH_INDICATOR),this.writeUInt32BE(e))}};_(La,"DbObjectPickleBuffer");var Ln=La,Bn=class Bn extends tP{constructor(e,t){if(typeof e=="function"&&(e=e.prototype._objType),super(e),this.packedData=t,this.unpackedAttrs=new Map,t)this.unpackedAssocArray=new Map,this.unpackedAssocKeys=void 0;else if(e){let s=nr.from([0,34,pe.TNS_OBJ_NON_NULL_OID,pe.TNS_OBJ_HAS_EXTENT_OID]);this.toid=nr.concat([s,e.oid,pe.TNS_EXTENT_OID]),this.flags=pe.TNS_OBJ_TOP_LEVEL,this.imageFlags=pe.TNS_OBJ_IS_VERSION_81,this.imageVersion=pe.TNS_OBJ_IMAGE_VERSION,e.isCollection?(this.imageFlags|=pe.TNS_OBJ_IS_COLLECTION,e.collectionType===pe.TNS_OBJ_PLSQL_INDEX_TABLE?this.unpackedAssocArray=new Map:this.unpackedArray=[]):this.imageFlags|=pe.TNS_OBJ_NO_PREFIX_SEG}}_ensureAssocKeys(){this.unpackedAssocKeys||(this.unpackedAssocKeys=[...this.unpackedAssocArray.keys()].sort())}_ensureUnpacked(){this.packedData&&this._unpackData()}_getPackedData(){if(this.packedData)return this.packedData;let e=new Ln;e.writeHeader(this),this._packData(e);let t=e.pos;return e.pos=3,e.writeUInt32BE(t),e.buf.subarray(0,t)}_packData(e){let t=this._objType;if(t.isCollection)if(e.writeUInt8(t.collectionFlags),t.collectionType===pe.TNS_OBJ_PLSQL_INDEX_TABLE){this._ensureAssocKeys(),e.writeLength(this.unpackedAssocKeys.length);for(let s of this.unpackedAssocKeys)e.writeInt32BE(s),this._packValue(e,t.elementType,t.elementTypeClass,this.unpackedAssocArray.get(s))}else{e.writeLength(this.unpackedArray.length);for(let s of this.unpackedArray)this._packValue(e,t.elementType,t.elementTypeClass,s)}else for(let s of t.attributes)this._packValue(e,s.type,s.typeClass,this.unpackedAttrs.get(s.name))}_packValue(e,t,s,n){if(n==null)s&&!s.prototype.isCollection?e.writeUInt8(pe.TNS_OBJ_ATOMIC_NULL):e.writeUInt8(pe.TNS_NULL_LENGTH_INDICATOR);else switch(t){case Ne.DB_TYPE_CHAR:case Ne.DB_TYPE_VARCHAR:e.writeBytesWithLength(nr.from(n));break;case Ne.DB_TYPE_NCHAR:case Ne.DB_TYPE_NVARCHAR:e.writeBytesWithLength(nr.from(n,"utf16le").swap16());break;case Ne.DB_TYPE_NUMBER:e.writeOracleNumber(n.toString());break;case Ne.DB_TYPE_BINARY_INTEGER:case Ne.DB_TYPE_BOOLEAN:e.writeUInt8(4),e.writeUInt32BE(n);break;case Ne.DB_TYPE_RAW:e.writeBytesWithLength(n);break;case Ne.DB_TYPE_BINARY_DOUBLE:e.writeBinaryDouble(n);break;case Ne.DB_TYPE_BINARY_FLOAT:e.writeBinaryFloat(n);break;case Ne.DB_TYPE_DATE:case Ne.DB_TYPE_TIMESTAMP:case Ne.DB_TYPE_TIMESTAMP_LTZ:case Ne.DB_TYPE_TIMESTAMP_TZ:e.writeOracleDate(n,t);break;case Ne.DB_TYPE_OBJECT:this._objType.isCollection||n._objType.isCollection?e.writeBytesWithLength(n._getPackedData()):n._packData(e);break;default:Bt.throwErr(Bt.ERR_NOT_IMPLEMENTED,t)}}_unpackData(){let e=new Ln(this.packedData);e.readHeader(this),this._unpackDataFromBuf(e),this.packedData=void 0}_unpackDataFromBuf(e){let t,s,n,i,a=this._objType;if(a.isCollection){a.collectionType===pe.TNS_OBJ_PLSQL_INDEX_TABLE?s=new Map:t=[],this.collectionFlags=e.readUInt8();let c=e.readLength();for(let T=0;T<c;T++){a.collectionType===pe.TNS_OBJ_PLSQL_INDEX_TABLE&&(n=e.readUInt32BE());let E=this._unpackValue(e,a.elementType,a.elementTypeClass);a.collectionType===pe.TNS_OBJ_PLSQL_INDEX_TABLE?s.set(n,E):t.push(E)}}else{i=new Map;for(let c of a.attributes){let T=this._unpackValue(e,c.type,c.typeClass);i.set(c.name,T)}}this.unpackedAttrs=i,this.unpackedArray=t,this.unpackedAssocArray=s}_unpackValue(e,t,s){let n,i,a;switch(t){case Ne.DB_TYPE_NUMBER:return a=e.readOracleNumber(),a!==null&&(a=parseFloat(a)),a;case Ne.DB_TYPE_BINARY_INTEGER:return e.readBinaryInteger();case Ne.DB_TYPE_VARCHAR:case Ne.DB_TYPE_CHAR:return e.readStr(pe.CSFRM_IMPLICIT);case Ne.DB_TYPE_NVARCHAR:case Ne.DB_TYPE_NCHAR:return e.readStr(pe.CSFRM_NCHAR);case Ne.DB_TYPE_RAW:return nr.from(e.readBytesWithLength());case Ne.DB_TYPE_BINARY_DOUBLE:return e.readBinaryDouble();case Ne.DB_TYPE_BINARY_FLOAT:return e.readBinaryFloat();case Ne.DB_TYPE_DATE:case Ne.DB_TYPE_TIMESTAMP:return e.readOracleDate(!0);case Ne.DB_TYPE_TIMESTAMP_LTZ:case Ne.DB_TYPE_TIMESTAMP_TZ:return e.readOracleDate(!1);case Ne.DB_TYPE_BOOLEAN:return e.readBool();case Ne.DB_TYPE_OBJECT:return n=e.getIsAtomicNull(),n?null:(i=new Bn(s),i._objType.isCollection||this._objType.isCollection?i.packedData=nr.from(e.readBytesWithLength()):i._unpackDataFromBuf(e),i);default:Bt.throwErr(Bt.ERR_NOT_IMPLEMENTED,t)}}append(e){if(this._ensureUnpacked(),this.unpackedArray){let t=this._objType;t.maxNumElements>0&&this.unpackedArray.length>=t.maxNumElements&&Bt.throwErr(Bt.ERR_INVALID_COLL_INDEX_SET,this.unpackedArray.length,0,t.maxNumElements),this.unpackedArray.push(e)}else{this._ensureAssocKeys();let t;if(this.unpackedAssocKeys.length===0)t=0;else{let s=this.unpackedAssocKeys.length-1;t=this.unpackedAssocKeys[s]+1}this.unpackedAssocArray.set(t,e),this.unpackedAssocKeys.push(t)}}deleteElement(e){this._ensureUnpacked(),this.unpackedArray?(this._objType.collectionType==pe.TNS_OBJ_VARRAY&&Bt.throwErr(Bt.ERR_DELETE_ELEMENTS_OF_VARRAY),this.unpackedArray.splice(e,1)):(this._unpackedAssocKeys=void 0,this.unpackedAssocArray.delete(e))}getAttrValue(e){this._ensureUnpacked();let t=this.unpackedAttrs.get(e.name);return t===void 0?null:t}getElement(e){let t;return this._ensureUnpacked(),this.unpackedArray?t=this.unpackedArray[e]:t=this.unpackedAssocArray.get(e),t===void 0&&Bt.throwErr(Bt.ERR_INVALID_COLL_INDEX_GET,e),t}getFirstIndex(){if(this._ensureUnpacked(),this.unpackedArray)return 0;if(this.unpackedAssocArray)return this._ensureAssocKeys(),this.unpackedAssocKeys[0]}getKeys(){return this._ensureUnpacked(),this.unpackedArray?Array.from(this.unpackedArray.keys()):this.unpackedAssocArray?(this._ensureAssocKeys(),Array.from(this.unpackedAssocKeys)):[]}getLastIndex(){if(this._ensureUnpacked(),this.unpackedArray){if(this.unpackedArray.length>0)return this.unpackedArray.length-1}else if(this.unpackedAssocArray)return this._ensureAssocKeys(),this.unpackedAssocKeys[this.unpackedAssocKeys.length-1]}getNextIndex(e){if(this._ensureUnpacked(),this.unpackedArray){if(e+1<this.unpackedArray.length)return e+1}else if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys)if(t>e)return t}}getPrevIndex(e){if(this._ensureUnpacked(),this.unpackedArray){if(e>0)return e-1}else if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys.reverse())if(t<e)return t}}getValues(){let e=[];if(this._ensureUnpacked(),this.unpackedArray)return Array.from(this.unpackedArray);if(this.unpackedAssocArray){this._ensureAssocKeys();for(let t of this.unpackedAssocKeys)e.push(this.unpackedAssocArray.get(t))}return e}hasElement(e){return this._ensureUnpacked(),this.unpackedArray?e>=0&&e<this.unpackedArray.length:this.unpackedAssocArray.has(e)}setAttrValue(e,t){this._ensureUnpacked(),this.unpackedAttrs.set(e.name,t)}setElement(e,t){if(this._ensureUnpacked(),this.unpackedArray){let s=Math.max(this.unpackedArray.length-1,0);e>s&&Bt.throwErr(Bt.ERR_INVALID_COLL_INDEX_SET,e,0,s),this.unpackedArray[e]=t}else this.unpackedAssocArray.has(e)||(this.unpackedAssocKeys=void 0),this.unpackedAssocArray.set(e,t)}trim(e){this._ensureUnpacked(),e>0&&(this.unpackedArray=this.unpackedArray.slice(0,this.unpackedArray.length-e))}};_(Bn,"ThinDbObjectImpl");var ya=Bn;oS.exports=ya});var Ua=R((iL,aS)=>{"use strict";var{Buffer:Cr}=require("buffer"),je=Be(),rP=bt(),wa=class wa extends rP{constructor(e,t){super(e),this.sourceLobImpl=t.sourceLobImpl||null,this.operation=t.operation,this.destLobImpl=t.destLobImpl||null,this.sourceOffset=t.sourceOffset||0,this.destOffset=t.destOffset||0,this.boolFlag=!1,t.data&&(this.data=t.data),this.functionCode=je.TNS_FUNC_LOB_OP,this.sendAmount=t.sendAmount,this.amount=t.amount||0}encode(e){this.writeFunctionHeader(e),this.sourceLobImpl===null?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(this.sourceLobImpl._locator.length)),this.destLobImpl===null?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(this.destLobImpl._locator.length)),e.writeUB4(0),e.writeUB4(0),this.operation===je.TNS_LOB_OP_CREATE_TEMP?e.writeUInt8(1):e.writeUInt8(0),e.writeUInt8(0),this.operation===je.TNS_LOB_OP_CREATE_TEMP||this.operation===je.TNS_LOB_OP_IS_OPEN?e.writeUInt8(1):e.writeUInt8(0),e.writeUB4(this.operation),e.writeUInt8(0),e.writeUInt8(0),e.writeUB8(this.sourceOffset),e.writeUB8(this.destOffset),this.sendAmount?e.writeUInt8(1):e.writeUInt8(0);for(let t=0;t<3;t++)e.writeUInt16BE(0);if(this.sourceLobImpl&&e.writeBytes(this.sourceLobImpl._locator),this.destLobImpl&&e.writeBytes(this.destLobImpl._locator),this.operation===je.TNS_LOB_OP_CREATE_TEMP&&(this.sourceLobImpl.dbType._csfrm===je.CSFRM_NCHAR?(e.caps.checkNCharsetId(),e.writeUB4(je.TNS_CHARSET_UTF16)):e.writeUB4(je.TNS_CHARSET_UTF8)),this.data){let t;e.writeUInt8(je.TNS_MSG_TYPE_LOB_DATA),this.sourceLobImpl.dbType._oraTypeNum===je.TNS_DATA_TYPE_BLOB?t=this.data:this.sourceLobImpl.getCsfrm()===je.CSFRM_NCHAR?(t=this.data,Cr.isBuffer(this.data)&&(t=t.toString()),t=Cr.from(t,je.TNS_ENCODING_UTF16).swap16()):t=Cr.from(this.data),e.writeBytesWithLength(t)}this.sendAmount&&e.writeUB8(this.amount)}processMessage(e,t){if(t===je.TNS_MSG_TYPE_LOB_DATA){let s=this.sourceLobImpl.dbType._oraTypeNum,n=e.readBytesWithLength();n!==null&&(s===je.TNS_DATA_TYPE_BLOB?n=Cr.from(n):this.sourceLobImpl.getCsfrm()===je.CSFRM_NCHAR?n=Cr.from(n).swap16().toString("utf16le"):n=n.toString()),this.data=n}else super.processMessage(e,t)}processReturnParameter(e){let t,s,n,i;this.sourceLobImpl!==null&&(i=this.sourceLobImpl._locator.length,t=e.readBytes(i),s=t.slice(0,i),s.copy(this.sourceLobImpl._locator)),this.destLobImpl!==null&&(i=this.destLobImpl._locator.length,t=e.readBytes(i),s=t.slice(0,i),s.copy(this.destLobImpl._locator)),this.operation===je.TNS_LOB_OP_CREATE_TEMP&&e.skipUB2(),this.sendAmount&&(this.amount=e.readSB8()),(this.operation===je.TNS_LOB_OP_CREATE_TEMP||this.operation===je.TNS_LOB_OP_IS_OPEN)&&(n=e.readUB2(),this.boolFlag=n>0)}};_(wa,"LobOpMessage");var Ya=wa;aS.exports=Ya});var wn=R((aL,_S)=>{"use strict";var{Buffer:nP}=require("buffer"),iP=_o(),_t=Be(),oP=Ua(),Yn=W(),Va=class Va extends iP{_getConnImpl(){return this.conn}async _sendMessage(e){let t=new oP(this.conn,e);return await this.conn._protocol._processMessage(t),e.operation===_t.TNS_LOB_OP_READ?t.data?t.data:null:t.amount}getChunkSize(){return this._chunkSize}async _getChunkSizeAsync(){this.checkConn();let e={operation:_t.TNS_LOB_OP_GET_CHUNK_SIZE,sourceLobImpl:this,sendAmount:!0};this._chunkSize=this._pieceSize=await this._sendMessage(e)}getLength(){return this._length}getPieceSize(){return this._pieceSize}setPieceSize(e){this._pieceSize=e}getType(){return this.dbType}async getData(){return this._length<0&&Yn.throwErr(Yn.ERR_INVALID_LOB),await this.read(1,this._length)}async read(e,t){this.checkConn();let s={operation:_t.TNS_LOB_OP_READ,sourceLobImpl:this,sourceOffset:e,sendAmount:!0,amount:t||this._pieceSize};return await this._sendMessage(s)}async write(e,t){this.checkConn();let s={operation:_t.TNS_LOB_OP_WRITE,sourceLobImpl:this,sourceOffset:e,data:t};await this._sendMessage(s),this._length+=t.length}getCsfrm(){return this.dbType._csfrm!==_t.CSFRM_NCHAR&&this._locator[_t.TNS_LOB_LOC_OFFSET_FLAG_3]&_t.TNS_LOB_LOC_FLAGS_VAR_LENGTH_CHARSET?_t.CSFRM_NCHAR:this.dbType._csfrm}async create(e,t){this.dirtyLength=!1,this.conn=e,this.dbType=t,this._locator=nP.alloc(40),this._isTempLob=!0,this._length=0;let s={operation:_t.TNS_LOB_OP_CREATE_TEMP,sourceLobImpl:this,amount:_t.TNS_DURATION_SESSION,destOffset:t._oraTypeNum,sourceOffset:t._csfrm,sendAmount:!0};await this._sendMessage(s),await this._getChunkSizeAsync()}checkConn(){this.conn.nscon.connected||Yn.throwErr(Yn.ERR_LOB_CLOSED)}close(){this.checkConn(),this._isTempLob&&(this.conn._tempLobsToClose.push(this._locator),this.conn._tempLobsTotalSize+=this._locator.length)}init(e,t,s,n,i){this.dirtyLength=!1,this.conn=e,this._locator=t,this._isTempLob=!1,(this._locator[_t.TNS_LOB_LOC_OFFSET_FLAG_4]&_t.TNS_LOB_LOC_FLAGS_TEMP===_t.TNS_LOB_LOC_FLAGS_TEMP||this._locator[_t.TNS_LOB_LOC_OFFSET_FLAG_1]&_t.TNS_LOB_LOC_FLAGS_ABSTRACT===_t.TNS_LOB_LOC_FLAGS_ABSTRACT)&&(this._isTempLob=!0),this.dbType=s,this._length=n,this._chunkSize=i,this._pieceSize=i}};_(Va,"ThinLobImpl");var Ma=Va;_S.exports=Ma});var Fa=R((cL,lS)=>{"use strict";var{Buffer:Ms}=require("buffer"),cS=Ir(),Y=Be(),aP=bt(),_P=Ba(),cP=wn(),Ps=W(),qe=At(),ba=class ba extends aP{constructor(e,t=null,s=null){super(e),this.statement=t,this.options=s,this.offset=0,this.numExecs=1,this.arrayDmlRowCounts=!1,this.requiresDefine=!1,this.rowIndex=t.bufferRowCount||0,this.dmlRowCounts=[],this.batchErrors=!1,this.outVariables=[],this.inFetch=!1,this.parseOnly=!1,this.resultSetsToSetup=[]}processMessage(e,t){t===Y.TNS_MSG_TYPE_DESCRIBE_INFO?(e.skipBytesChunked(),this.statement.queryVars=[],this.statement.numQueryVars=0,this.statement.bufferRowCount=0,this.statement.bufferRowIndex=0,this.processDescribeInfo(e,this.resultSet),this.outVariables=this.statement.queryVars):t===Y.TNS_MSG_TYPE_ROW_HEADER?this.processRowHeader(e):t===Y.TNS_MSG_TYPE_ROW_DATA?this.processRowData(e):t===Y.TNS_MSG_TYPE_IMPLICIT_RESULTSET?this.processImplicitResultSet(e):t===Y.TNS_MSG_TYPE_BIT_VECTOR?this.processBitVector(e):t===Y.TNS_MSG_TYPE_IO_VECTOR?this.processIOVector(e):t===Y.TNS_MSG_TYPE_FLUSH_OUT_BINDS?this.flushOutBinds=!0:t===Y.TNS_MSG_TYPE_ERROR?this.processErrorInfo(e):super.processMessage(e,t)}hasMoreData(){return!this.processedError&&!this.flushOutBinds}processErrorInfo(e){super.processErrorInfo(e),this.errorInfo.cursorId!==0&&(this.statement.cursorId=this.errorInfo.cursorId),this.statement.isPlSql||(this.statement.rowCount=this.errorInfo.rowCount),this.errorInfo.rowCount>0&&(this.statement.lastRowid=cS.encodeRowID(this.errorInfo.rowID)),this.options.batchErrors=this.errorInfo.batchErrors,this.batchErrors&&this.options.batchErrors===null&&(this.options.batchErrors=[]),this.errorInfo.num===Y.TNS_ERR_NO_DATA_FOUND&&this.statement.isQuery?(this.errorInfo.num=0,this.errorOccurred=!1,this.statement.moreRowsToFetch=!1):this.errorInfo.num!==0&&this.errorInfo.cursorId!==0&&(this.connection._addCursorToClose(this.statement.cursorId),this.connection.statementCache.delete(this.statement.sql)),this.errorInfo.batchErrors&&(this.errorOccurred=!1)}processDescribeInfo(e,t){let s=t.statement;e.skipUB4(),s.numQueryVars=e.readUB4(),s.numQueryVars>0&&e.skipUB1(),t.metadata=[];for(let i=0;i<s.numQueryVars;i++){let a=this.processColumnInfo(e,i+1);s.queryVars.push(a),t.metadata.push(a.fetchInfo)}let n=e.readUB4();n>0&&e.skipBytesChunked(),e.skipUB4(),e.skipUB4(),e.skipUB4(),e.skipUB4(),n=e.readUB4(),n>0&&e.skipBytesChunked(),this.resultSetsToSetup.push(t)}processColumnInfo(e,t){let s=e.readUInt8();e.skipUB1();let n=e.readInt8(),i;s===Y.TNS_DATA_TYPE_NUMBER||s===Y.TNS_DATA_TYPE_INTERVAL_DS||s===Y.TNS_DATA_TYPE_TIMESTAMP||s===Y.TNS_DATA_TYPE_TIMESTAMP_LTZ||s===Y.TNS_DATA_TYPE_TIMESTAMP_TZ?i=e.readSB2():i=e.readInt8();let a=e.readUB4();e.skipUB4(),e.skipUB4();let c,T=e.readUB4();T>0&&(c=Ms.from(e.readBytesWithLength())),e.skipUB2(),e.skipUB2();let E=e.readUInt8(),l=e.readUB4();s===Y.TNS_DATA_TYPE_RAW&&(l=a),e.caps.ttcFieldVersion>=Y.TNS_CCAP_FIELD_VERSION_12_2&&e.skipUB4();let h=!!e.readUInt8();e.skipUB1();let d;T=e.readUB4(),T>0&&(d=e.readStr(Y.CSFRM_IMPLICIT));let A;T=e.readUB4(),T>0&&(A=e.readStr(Y.CSFRM_IMPLICIT)),T=e.readUB4();let u;T>0&&(u=e.readStr(Y.CSFRM_IMPLICIT)),e.skipUB2(),e.skipUB4();let N={name:d,dbType:qe.getTypeByOraTypeNum(s,E),nullable:h};switch(N.dbType){case qe.DB_TYPE_VARCHAR:case qe.DB_TYPE_NVARCHAR:case qe.DB_TYPE_CHAR:case qe.DB_TYPE_NCHAR:case qe.DB_TYPE_RAW:N.byteSize=l;break;case qe.DB_TYPE_NUMBER:N.precision=n;break;case qe.DB_TYPE_TIMESTAMP:case qe.DB_TYPE_TIMESTAMP_TZ:case qe.DB_TYPE_TIMESTAMP_LTZ:N.precision=i;break;case qe.DB_TYPE_OBJECT:N.dbTypeClass=this.connection._getDbObjectType(A,u,void 0,c),N.dbTypeClass.partial&&this.connection._partialDbObjectTypes.push(N.dbTypeClass);break;default:break}return N.dbType===qe.DB_TYPE_NUMBER&&(N.scale=i),{fetchInfo:N,type:N.dbType,maxSize:a,columnNum:t,values:new Array(this.options.fetchArraySize)}}processRowHeader(e){e.skipUB1(),e.skipUB2(),e.skipUB4(),e.skipUB4(),e.skipUB2();let t=e.readUB4();t>0&&(e.skipUB1(),this.getBitVector(e,t)),t=e.readUB4(),t>0&&e.skipBytesChunked()}isDuplicateData(e){if(this.bitVector===null||this.bitVector===void 0)return!1;let t=Math.floor(e/8),s=e%8;return(this.bitVector[t]&1<<s)===0}processRowData(e){let t;for(let[s,n]of this.outVariables.entries())if(n.isArray){n.numElementsInArray=e.readUB4();let i=new Array(n.numElementsInArray).fill(null);for(let a=0;a<n.numElementsInArray;a++)t=this.processColumnData(e,n,a),i[a]=t;n.values[this.rowIndex]=i}else if(this.statement.isReturning){let i=e.readUB4(),a=Array(i).fill(null);for(let c=0;c<i;c++)a[c]=this.processColumnData(e,n,c);n.values[this.rowIndex]=a}else this.isDuplicateData(s)?(this.rowIndex===0&&n.outConverter?t=n.lastRawValue:t=n.values[this.statement.lastRowIndex],n.values[this.rowIndex]=t):(t=this.processColumnData(e,n,this.rowIndex),n.values[this.rowIndex]=t);this.rowIndex++,this.inFetch&&(this.statement.lastRowIndex=this.rowIndex-1,this.statement.bufferRowCount++,this.bitVector=null)}processIOVector(e){let t;e.skipUB1();let s=e.readUB2(),i=e.readUB4()*256+s;e.skipUB4(),e.skipUB2(),t=e.readUB2(),t>0&&e.skipBytes(t),t=e.readUB2(),t>0&&e.skipBytes(t),this.outVariables=[];for(let a=0;a<i;a++){let c=this.statement.bindInfoList[a];c.bindDir=e.readUInt8(),c.bindDir!==Y.TNS_BIND_DIR_INPUT&&this.outVariables.push(c.bindVar)}}processColumnData(e,t){let s=t.type,n=s._oraTypeNum,i=s._csfrm,a=t.maxSize,c=null;if(a===0&&n!==Y.TNS_DATA_TYPE_LONG&&n!==Y.TNS_DATA_TYPE_LONG_RAW&&n!==Y.TNS_DATA_TYPE_UROWID)c=null;else if(n===Y.TNS_DATA_TYPE_VARCHAR||n===Y.TNS_DATA_TYPE_CHAR||n===Y.TNS_DATA_TYPE_LONG)i===Y.CSFRM_NCHAR&&e.caps.checkNCharsetId(),c=e.readStr(i);else if(n===Y.TNS_DATA_TYPE_RAW||n===Y.TNS_DATA_TYPE_LONG_RAW)c=e.readBytesWithLength(),c!==null&&(c=Ms.from(c));else if(n===Y.TNS_DATA_TYPE_NUMBER)c=e.readOracleNumber(),!this.inFetch&&c!==null&&(c=parseFloat(c));else if(n===Y.TNS_DATA_TYPE_DATE||n===Y.TNS_DATA_TYPE_TIMESTAMP||n===Y.TNS_DATA_TYPE_TIMESTAMP_LTZ||n===Y.TNS_DATA_TYPE_TIMESTAMP_TZ){let T=n===Y.TNS_DATA_TYPE_DATE||n===Y.TNS_DATA_TYPE_TIMESTAMP;c=e.readOracleDate(T)}else if(n===Y.TNS_DATA_TYPE_ROWID)if(!this.inFetch)c=e.readStr(Y.CSFRM_IMPLICIT);else{let T=e.readUInt8();if(TS(T))c=null;else{let E=e.readRowID();c=cS.encodeRowID(E)}}else if(n===Y.TNS_DATA_TYPE_UROWID)this.inFetch?c=e.readURowID():c=e.readStr(Y.CSFRM_IMPLICIT);else if(n===Y.TNS_DATA_TYPE_BINARY_DOUBLE)c=e.readBinaryDouble();else if(n===Y.TNS_DATA_TYPE_BINARY_FLOAT)c=e.readBinaryFloat();else if(n===Y.TNS_DATA_TYPE_BINARY_INTEGER)c=e.readOracleNumber(),c!==null&&(c=parseFloat(c));else if(n===Y.TNS_DATA_TYPE_CURSOR){let T=e.readUInt8();TS(T)?c=null:(c=this.createCursorFromDescribe(e),c.statement.cursorId=e.readUB2(),c.statement.cursorId===0&&t.dir!==Y.BIND_IN&&(this.options.nullifyInvalidCursor?c=null:Ps.throwErr(Ps.ERR_INVALID_REF_CURSOR)))}else if(n===Y.TNS_DATA_TYPE_BOOLEAN)c=e.readBool();else if(n===Y.TNS_DATA_TYPE_CLOB||n===Y.TNS_DATA_TYPE_BLOB){if(e.readUB4()>0){c=new cP;let E=e.readUB8(),l=e.readUB4(),h=Ms.from(e.readBytesWithLength());c.init(this.connection,h,s,E,l)}}else if(n===Y.TNS_DATA_TYPE_JSON)c=e.readOson();else if(n===Y.TNS_DATA_TYPE_INT_NAMED){let T=e.readDbObject();if(T.packedData){let E=t.fetchInfo?t.fetchInfo.dbTypeClass:t.typeClass;c=new _P(E,T.packedData),c.toid=T.toid,c.oid=T.oid}}else Ps.throwErr(Ps.ERR_UNSUPPORTED_DATA_TYPE,s.num,t.columnNum);if(this.inFetch)(n===Y.TNS_DATA_TYPE_LONG||n===Y.TNS_DATA_TYPE_LONG_RAW||t.maxSize>e.caps.maxStringSize)&&(e.skipSB4(),e.skipUB4());else{let T=e.readSB4();T<0&&n===Y.TNS_DATA_TYPE_BOOLEAN?c=null:T!==0&&c!==null&&Ps.throwErr(Ps.ERR_INSUFFICIENT_BUFFER_FOR_BINDS)}return c}processReturnParameter(e){let t=0,s,n=e.readUB2();for(let a=0;a<n;a++)e.skipUB4();let i=e.readUB2();i>0&&e.skipBytes(i),n=e.readUB2();for(let a=0;a<n;a++)i=e.readUB2(),i>0&&(s=e.readStr(Y.CSFRM_IMPLICIT)),i=e.readUB2(),i>0&&e.skipBytesChunked(),t=e.readUB2(),t===Y.TNS_KEYWORD_NUM_CURRENT_SCHEMA?this.connection.currentSchema=s:t===Y.TNS_KEYWORD_NUM_EDITION&&(this.connection._edition=s);if(i=e.readUB2(),i>0&&e.skip(i),this.arrayDmlRowCounts){let a=e.readUB4(),c=this.options.dmlRowCounts=[];for(let T=0;T<a;T++){let E=e.readUB8();c.push(E)}}}process(e){this.bitVector=this.savedBitVector,super.process(e)}savePoint(e){this.savedBitVector=this.bitVector,super.savePoint(e)}async postProcess(){if(this.outVariables)for(let e of this.outVariables)if(e.isArray)for(let t=0;t<e.numElementsInArray;t++)e.outConverter&&(e.values[0][t]=await e.outConverter(e.values[0][t]));else e.outConverter&&(e.values[0]=await e.outConverter(e.values[0]));await this.connection._populatePartialDbObjectTypes();for(let e of this.resultSetsToSetup){e._setup(this.options,e.metadata);for(let t of e.statement.queryVars)(t.type===qe.DB_TYPE_CLOB||t.type===qe.DB_TYPE_NCLOB||t.type===qe.DB_TYPE_BLOB||t.type===qe.DB_TYPE_JSON)&&(t.type!==t.fetchInfo.fetchType&&(t.type=t.fetchInfo.fetchType,t.maxSize=Y.TNS_MAX_LONG_LENGTH),e.statement.requiresDefine=!0,e.statement.noPrefetch=!0)}}preProcess(){if(this.statement.isReturning&&!this.parseOnly){this.outVariables=[];for(let e of this.statement.bindInfoList)e.isReturnBind&&this.outVariables.push(e.bindVar)}if(this.statement.isQuery&&(this.inFetch=!0,this.statement.queryVars)){this.outVariables=[];for(let e=0;e<this.statement.queryVars.length;e++)this.outVariables.push(this.statement.queryVars[e])}}processBitVector(e){this.numColumnsSent=e.readUB2();let t=Math.floor(this.statement.numQueryVars/8);this.statement.numQueryVars%8>0&&(t+=1),this.getBitVector(e,t)}getBitVector(e,t){this.bitVector=Ms.from(e.readBytes(t))}processBindParams(e,t){let s=[],n=[];for(let i of t)i.isReturnBind||n.push(i),s.push(i.bindVar);return this.writeColumnMetadata(e,s),n}writeColumnMetadata(e,t){for(let s of t){let n=s.type._oraTypeNum,i=s.maxSize||s.type._bufferSizeFactor,a=0;s.type._csfrm===Y.CSFRM_NCHAR&&(i*=s.type._bufferSizeFactor),[Y.TNS_DATA_TYPE_ROWID,Y.TNS_DATA_TYPE_UROWID].includes(n)&&(n=Y.TNS_DATA_TYPE_VARCHAR,i=Y.TNS_MAX_UROWID_LENGTH);let c=Y.TNS_BIND_USE_INDICATORS;s.isArray&&(c|=Y.TNS_BIND_ARRAY);let T=0;if(s.type===qe.DB_TYPE_BLOB||s.type===qe.DB_TYPE_CLOB||s.type===qe.DB_TYPE_NCLOB?T=Y.TNS_LOB_PREFETCH_FLAG:s.type===qe.DB_TYPE_JSON&&(T=Y.TNS_LOB_PREFETCH_FLAG,i=a=Y.TNS_JSON_MAX_LENGTH),e.writeUInt8(n),e.writeUInt8(c),e.writeUInt8(0),e.writeUInt8(0),i>e.caps.maxStringSize?e.writeUB4(Y.TNS_MAX_LONG_LENGTH):e.writeUB4(i),s.isArray?e.writeUB4(s.maxArraySize):e.writeUB4(0),e.writeUB4(T),s.objType){let E=s.objType;e.writeUB4(E.oid.length),e.writeBytesWithLength(E.oid),e.writeUB4(E.version)}else e.writeUB4(0),e.writeUB4(0);s.type._csfrm!==0?e.writeUB4(Y.TNS_CHARSET_UTF8):e.writeUB4(0),e.writeUInt8(s.type._csfrm),e.writeUB4(a),e.caps.ttcFieldVersion>=Y.TNS_CCAP_FIELD_VERSION_12_2&&e.writeUB4(0)}}writeBindParamsRow(e,t,s){let n=this.offset,i=!1;for(let a of t){if(a.isReturnBind)continue;let c=a.bindVar;if(c.isArray){let T=c.values.length;e.writeUB4(T);for(let E=0;E<T;E++)this.writeBindParamsColumn(e,c,c.values[E])}else c.maxSize>e.caps.maxStringSize?i=!0:this.writeBindParamsColumn(e,c,c.values[s+n])}if(i)for(let a of t){if(a.isReturnBind)continue;let c=a.bindVar;c.maxSize>e.caps.maxStringSize&&this.writeBindParamsColumn(e,c,c.values[s+n])}}writeBindParamsColumn(e,t,s){let n=t.type._oraTypeNum,i;if(s==null&&n!==Y.TNS_DATA_TYPE_CURSOR&&n!==Y.TNS_DATA_TYPE_JSON)n===Y.TNS_DATA_TYPE_BOOLEAN?(e.writeUInt8(Y.TNS_ESCAPE_CHAR),e.writeUInt8(1)):n===Y.TNS_DATA_TYPE_INT_NAMED?(e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(Y.TNS_OBJ_TOP_LEVEL)):e.writeUInt8(0);else if(n===Y.TNS_DATA_TYPE_NUMBER||n===Y.TNS_DATA_TYPE_BINARY_INTEGER)typeof s=="boolean"?i=s?"1":"0":i=s.toString(),e.writeOracleNumber(i);else if(n===Y.TNS_DATA_TYPE_VARCHAR||n===Y.TNS_DATA_TYPE_CHAR||n===Y.TNS_DATA_TYPE_LONG||n===Y.TNS_DATA_TYPE_RAW||n===Y.TNS_DATA_TYPE_LONG_RAW)t.type._csfrm===Y.CSFRM_NCHAR?(e.caps.checkNCharsetId(),s=Ms.from(s,Y.TNS_ENCODING_UTF16).swap16()):s=Ms.from(s),e.writeBytesWithLength(s);else if(n===Y.TNS_DATA_TYPE_DATE||n===Y.TNS_DATA_TYPE_TIMESTAMP||n===Y.TNS_DATA_TYPE_TIMESTAMP_TZ||n===Y.TNS_DATA_TYPE_TIMESTAMP_LTZ)e.writeOracleDate(s,t.type);else if(n===Y.TNS_DATA_TYPE_BINARY_DOUBLE)e.writeBinaryDouble(s);else if(n===Y.TNS_DATA_TYPE_BINARY_FLOAT)e.writeBinaryFloat(s);else if(n===Y.TNS_DATA_TYPE_CURSOR){let a=s;s||(a=this.connection._createResultSet()),a.statement.cursorId===0?(e.writeUInt8(1),e.writeUInt8(0)):(e.writeUB4(1),e.writeUB4(a.statement.cursorId))}else if(n===Y.TNS_DATA_TYPE_BOOLEAN)s?(e.writeUInt8(2),e.writeUInt16BE(257)):e.writeUInt16BE(256);else if(n===Y.TNS_DATA_TYPE_CLOB||n===Y.TNS_DATA_TYPE_BLOB)e.writeUB4(s._locator.length),e.writeBytesWithLength(s._locator);else if([Y.TNS_DATA_TYPE_ROWID,Y.TNS_DATA_TYPE_UROWID].includes(n))e.writeBytesWithLength(Ms.from(s));else if(n===Y.TNS_DATA_TYPE_JSON)e.writeOson(s);else if(n===Y.TNS_DATA_TYPE_INT_NAMED)e.writeDbObject(s);else{let a=`Binding data of type ${t.type}`;Ps.throwErr(Ps.ERR_NOT_IMPLEMENTED,a)}}createCursorFromDescribe(e){let t=this.connection._createResultSet(this.options);return t.options.moreRowsToFetch=!0,t.statement.isQuery=!0,t.statement.requiresFullExecute=!0,this.processDescribeInfo(e,t),t}processImplicitResultSet(e){this.options.implicitResultSet=[];let t=e.readUB4();for(let s=0;s<t;s++){let n=e.readUInt8();e.skipBytes(n);let i=this.createCursorFromDescribe(e);i.statement.cursorId=e.readUB2(),this.options.implicitResultSet.push(i)}}};_(ba,"MessageWithData");var xa=ba,TS=_(r=>r===0||r===Y.TNS_NULL_LENGTH_INDICATOR,"isNullLength");lS.exports=xa});var Ga=R((lL,uS)=>{"use strict";var TP=Fa(),Ie=Be(),ES=W(),qa=class qa extends TP{constructor(e,t,s,n){super(e,t,s),!n&&t.isQuery&&(n=e._createResultSet(s,t)),this.resultSet=n,this.functionCode=Ie.TNS_FUNC_EXECUTE,this.bindParams=void 0,this.currentRow=0}writeExecuteMessage(e){let t=0,s=0,n=0,i=1,a=this.statement,c=a.bindInfoList;if(!a.requiresDefine&&!this.parseOnly&&c&&(n=c.length),a.requiresDefine?t|=Ie.TNS_EXEC_OPTION_DEFINE:!this.parseOnly&&a.sql&&(s=Ie.TNS_EXEC_OPTION_IMPLICIT_RESULTSET,t|=Ie.TNS_EXEC_OPTION_EXECUTE),(a.cursorId===0||a.isDdl)&&(t|=Ie.TNS_EXEC_OPTION_PARSE),a.isQuery&&(this.parseOnly?t|=Ie.TNS_EXEC_OPTION_DESCRIBE:(a.cursorId===0||a.requiresDefine?i=this.options.prefetchRows:i=this.options.fetchArraySize,i>0&&!a.noPrefetch&&(t|=Ie.TNS_EXEC_OPTION_FETCH))),!a.isPlSql&&!this.parseOnly?t|=Ie.TNS_EXEC_OPTION_NOT_PLSQL:a.isPlSql&&n>0&&(t|=Ie.TNS_EXEC_OPTION_PLSQL_BIND),n>0&&(t|=Ie.TNS_EXEC_OPTION_BIND),this.batchErrors&&(t|=Ie.TNS_EXEC_OPTION_BATCH_ERRORS),this.arrayDmlRowCounts&&(s=Ie.TNS_EXEC_OPTION_DML_ROWCOUNTS),this.options.autoCommit&&(t|=Ie.TNS_EXEC_OPTION_COMMIT),this.writePiggybacks(e),this.writeFunctionHeader(e),e.writeUB4(t),e.writeUB4(a.cursorId),a.cursorId===0||a.isDdl?(e.writeUInt8(1),e.writeUB4(a.sqlLength)):(e.writeUInt8(0),e.writeUB4(0)),e.writeUInt8(1),e.writeUB4(13),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(i),e.writeUB4(Ie.TNS_MAX_LONG_LENGTH),n===0?(e.writeUInt8(0),e.writeUB4(0)):(e.writeUInt8(1),e.writeUB4(n)),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),e.writeUInt8(0),a.requiresDefine?(e.writeUInt8(1),e.writeUB4(this.statement.queryVars.length)):(e.writeUInt8(0),e.writeUB4(0)),e.writeUB4(0),e.writeUInt8(0),e.writeUInt8(1),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUB4(0),this.arrayDmlRowCounts?(e.writeUInt8(1),e.writeUB4(this.numExecs),e.writeUInt8(1)):(e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0)),e.caps.ttcFieldVersion>=Ie.TNS_CCAP_FIELD_VERSION_12_2&&(e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.writeUB4(0),e.writeUInt8(0),e.caps.ttcFieldVersion>=Ie.TNS_CCAP_FIELD_VERSION_12_2_EXT1&&(e.writeUInt8(0),e.writeUB4(0))),a.cursorId===0||a.isDdl?a.sql?(e.writeBytesWithLength(a.sqlBytes),e.writeUB4(1)):ES.throwErr(ES.ERR_INVALID_REF_CURSOR):e.writeUB4(0),a.isQuery?a.cursorId===0?e.writeUB4(0):e.writeUB4(i):e.writeUB4(this.numExecs),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),e.writeUB4(a.isQuery?1:0),e.writeUB4(0),e.writeUB4(s),e.writeUB4(0),e.writeUB4(0),e.writeUB4(0),a.requiresDefine)this.writeColumnMetadata(e,this.statement.queryVars);else if(n>0)return this.processBindParams(e,c)}writeReExecuteMessage(e){let t=this.statement,s=t.bindInfoList,n=0,i=0,a;if(s!==void 0){t.isQuery||(this.outVariables=[],s.forEach(T=>{T.bindDir!==Ie.TNS_BIND_DIR_INPUT&&this.outVariables.push(T.bindVar)}));let c=[];s.forEach(T=>{T.bindDir!==Ie.TNS_BIND_DIR_OUTPUT&&!T.isReturnBind&&c.push(T)}),s=c}return this.functionCode===Ie.TNS_FUNC_REEXECUTE_AND_FETCH?(n|=Ie.TNS_EXEC_OPTION_EXECUTE,a=this.options.prefetchRows):(this.options.autoCommit&&(i|=Ie.TNS_EXEC_OPTION_COMMIT_REEXECUTE),a=this.numExecs),this.writePiggybacks(e),this.writeFunctionHeader(e),e.writeUB4(t.cursorId),e.writeUB4(a),e.writeUB4(n),e.writeUB4(i),s}encode(e){if(this.currentRow===0){let t=this.statement;t.cursorId!==0&&!t.requiresFullExecute&&!this.parseOnly&&!t.requiresDefine&&!t.isDdl&&!this.batchErrors?(t.isQuery&&!t.requiresDefine&&!t.noPrefetch&&this.options.prefetchRows>0?this.functionCode=Ie.TNS_FUNC_REEXECUTE_AND_FETCH:this.functionCode=Ie.TNS_FUNC_REEXECUTE,this.bindParams=this.writeReExecuteMessage(e)):(this.functionCode=Ie.TNS_FUNC_EXECUTE,this.bindParams=this.writeExecuteMessage(e))}if(this.bindParams&&this.bindParams.length>0){let t=e.nsi.ntAdapter;for(;this.currentRow<this.numExecs;)if(e.writeUInt8(Ie.TNS_MSG_TYPE_ROW_DATA),this.writeBindParamsRow(e,this.bindParams,this.currentRow),this.currentRow++,this.currentRow<this.numExecs&&t.shouldPauseWrite())return!0}this.currentRow=0,this.bindParams=void 0}};_(qa,"ExecuteMessage");var ka=qa;uS.exports=ka});var Ka=R((uL,NS)=>{"use strict";var lP=Be(),EP=Fa(),va=class va extends EP{constructor(e,t,s,n){super(e,t,s),this.resultSet=n,this.functionCode=lP.TNS_FUNC_FETCH}encode(e){this.writeFunctionHeader(e),e.writeUB4(this.statement.cursorId),e.writeUB4(this.options.fetchArraySize)}};_(va,"FetchMessage");var Ha=va;NS.exports=Ha});var za=R((SL,SS)=>{"use strict";var uP=No(),NP=Ga(),SP=Ka(),$a=class $a extends uP{async _fetchMoreRows(e){let t=this.statement.requiresFullExecute?NP:SP,s=new t(this.connection,this.statement,e,this);await this.connection._protocol._processMessage(s),this.statement.requiresFullExecute=!1}_resultSetNew(e,t,s){this.connection=e,this.statement=t,this._nestedCursorIndices=[],this.options=s,this.prefetchRowsProcessed=!1,this.statement.bufferRowIndex=0}close(){this.connection._returnStatement(this.statement)}_processRows(e){let t=[],s=this.statement.bufferRowIndex;for(let n=s;n<s+e;n++){let i=[];for(let a=0;a<this.statement.numQueryVars;a++)i.push(this.statement.queryVars[a].values[n]);t.push(i)}return this.statement.bufferRowIndex+=e,this.statement.bufferRowIndex===this.statement.bufferRowCount&&(this.statement.bufferRowCount=0,this.statement.bufferRowIndex=0),t}async getRows(e,t){if(t.fetchArraySize=e||this.options.fetchArraySize,t.prefetchRows=this.options.prefetchRows,this.statement.bufferRowCount-this.statement.bufferRowIndex>=t.fetchArraySize)return this._processRows(t.fetchArraySize);{t.fetchArraySize=t.fetchArraySize-(this.statement.bufferRowCount-this.statement.bufferRowIndex);let n=this.statement.bufferRowCount;if(this.statement.moreRowsToFetch&&t.fetchArraySize>0&&await this._fetchMoreRows(t),t.fetchArraySize=e||this.options.fetchArraySize,n===this.statement.bufferRowCount){let i=this.statement.bufferRowCount-this.statement.bufferRowIndex;return this.statement.bufferRowCount=0,i>0?this._processRows(i):[]}}let s=this.statement.bufferRowCount-this.statement.bufferRowIndex;return this._processRows(s)}};_($a,"ThinResultSetImpl");var Wa=$a;SS.exports=Wa});var pS=R((AL,dS)=>{"use strict";var{Buffer:hS}=require("buffer"),H=Be(),AS=W(),ja=class ja{constructor(e){this.protocolVersion=e,this.ttcFieldVersion=H.TNS_CCAP_FIELD_VERSION_MAX,this.supports12cLogon=!0,this.supportsOob=!1,this.nCharsetId=H.TNS_CHARSET_UTF16,this.compileCaps=hS.alloc(H.TNS_CCAP_MAX),this.runtimeCaps=hS.alloc(H.TNS_RCAP_MAX),this.initCompileCaps(),this.initRuntimeCaps(),this.maxStringSize=0}adjustForServerCompileCaps(e){e[H.TNS_CCAP_FIELD_VERSION]<this.ttcFieldVersion&&(this.ttcFieldVersion=e[H.TNS_CCAP_FIELD_VERSION],this.compileCaps[H.TNS_CCAP_FIELD_VERSION]=this.ttcFieldVersion)}adjustForServerRuntimeCaps(e){e[H.TNS_RCAP_TTC]&H.TNS_RCAP_TTC_32K?this.maxStringSize=32767:this.maxStringSize=4e3}initCompileCaps(){this.compileCaps[H.TNS_CCAP_SQL_VERSION]=H.TNS_CCAP_SQL_VERSION_MAX,this.compileCaps[H.TNS_CCAP_LOGON_TYPES]=H.TNS_CCAP_O5LOGON|H.TNS_CCAP_O5LOGON_NP|H.TNS_CCAP_O7LOGON|H.TNS_CCAP_O8LOGON_LONG_IDENTIFIER|H.TNS_CCAP_O9LOGON_LONG_PASSWORD,this.compileCaps[H.TNS_CCAP_FIELD_VERSION]=this.ttcFieldVersion,this.compileCaps[H.TNS_CCAP_SERVER_DEFINE_CONV]=1,this.compileCaps[H.TNS_CCAP_TTC1]=H.TNS_CCAP_FAST_BVEC|H.TNS_CCAP_END_OF_CALL_STATUS|H.TNS_CCAP_IND_RCD,this.compileCaps[H.TNS_CCAP_OCI1]=H.TNS_CCAP_FAST_SESSION_PROPAGATE|H.TNS_CCAP_APP_CTX_PIGGYBACK,this.compileCaps[H.TNS_CCAP_TDS_VERSION]=H.TNS_CCAP_TDS_VERSION_MAX,this.compileCaps[H.TNS_CCAP_RPC_VERSION]=H.TNS_CCAP_RPC_VERSION_MAX,this.compileCaps[H.TNS_CCAP_RPC_SIG]=H.TNS_CCAP_RPC_SIG_VALUE,this.compileCaps[H.TNS_CCAP_DBF_VERSION]=H.TNS_CCAP_DBF_VERSION_MAX,this.compileCaps[H.TNS_CCAP_LOB]=H.TNS_CCAP_LOB_UB8_SIZE|H.TNS_CCAP_LOB_ENCS|H.TNS_CCAP_LOB_PREFETCH,this.compileCaps[H.TNS_CCAP_UB2_DTY]=1,this.compileCaps[H.TNS_CCAP_LOB2]=H.TNS_CCAP_LOB2_QUASI|H.TNS_CCAP_LOB2_2GB_PREFETCH,this.compileCaps[H.TNS_CCAP_TTC3]=H.TNS_CCAP_IMPLICIT_RESULTS|H.TNS_CCAP_BIG_CHUNK_CLR|H.TNS_CCAP_KEEP_OUT_ORDER,this.compileCaps[H.TNS_CCAP_TTC2]=H.TNS_CCAP_ZLNP,this.compileCaps[H.TNS_CCAP_OCI2]=H.TNS_CCAP_DRCP,this.compileCaps[H.TNS_CCAP_CLIENT_FN]=H.TNS_CCAP_CLIENT_FN_MAX,this.compileCaps[H.TNS_CCAP_TTC4]=H.TNS_CCAP_INBAND_NOTIFICATION}initRuntimeCaps(){this.runtimeCaps[H.TNS_RCAP_COMPAT]=H.TNS_RCAP_COMPAT_81,this.runtimeCaps[H.TNS_RCAP_TTC]=H.TNS_RCAP_TTC_ZERO_COPY|H.TNS_RCAP_TTC_32K}checkNCharsetId(){this.nCharsetId!==H.TNS_CHARSET_UTF16&&AS.throwErr(AS.ERR_NCHAR_CS_NOT_SUPPORTED,this.nCharsetId)}};_(ja,"Capabilities");var Xa=ja;dS.exports=Xa});var PS=R((pL,fS)=>{"use strict";var{BaseBuffer:hP,GrowableBuffer:s_}=Dr(),{Buffer:gr}=require("buffer"),$=Be(),Rs=W(),mS=At(),AP=require("util"),r_=class r_ extends hP{_decodeContainerNode(e){let t,s,n,i=this._getNumChildren(e),a=(e&64)===0;if(i===void 0){let c=this._getOffset(e);s=this.pos,this.pos=this.treeSegPos+c;let T=this.readUInt8();i=this._getNumChildren(T),t=a?{}:new Array(i),n=this.pos}else a?(t={},n=this.pos,s=this.pos+this.fieldIdLength*i):(t=new Array(i),s=this.pos);for(let c=0;c<i;c++){let T;if(a){let l;this.fieldIdLength===1?l=this.buf[n]:this.fieldIdLength==2?l=this.buf.readUInt16BE(n):l=this.buf.readUInt32BE(n),T=this.fieldNames[l-1],n+=this.fieldIdLength}this.pos=s;let E=this._getOffset(e);s=this.pos,this.pos=this.treeSegPos+E,a?t[T]=this._decodeNode():t[c]=this._decodeNode()}return t}_decodeNode(){let e=this.readUInt8();if(e&128)return this._decodeContainerNode(e);if(e===$.TNS_JSON_TYPE_NULL)return null;if(e===$.TNS_JSON_TYPE_TRUE)return!0;if(e===$.TNS_JSON_TYPE_FALSE)return!1;if(e===$.TNS_JSON_TYPE_DATE||e===$.TNS_JSON_TYPE_TIMESTAMP7)return this.parseOracleDate(this.readBytes(7));if(e===$.TNS_JSON_TYPE_TIMESTAMP)return this.parseOracleDate(this.readBytes(11));if(e===$.TNS_JSON_TYPE_TIMESTAMP_TZ)return this.parseOracleDate(this.readBytes(13));if(e===$.TNS_JSON_TYPE_BINARY_FLOAT)return this.parseBinaryFloat(this.readBytes(4));if(e===$.TNS_JSON_TYPE_BINARY_DOUBLE)return this.parseBinaryDouble(this.readBytes(8));if(e===$.TNS_JSON_TYPE_STRING_LENGTH_UINT8)return this.readBytes(this.readUInt8()).toString();if(e===$.TNS_JSON_TYPE_STRING_LENGTH_UINT16)return this.readBytes(this.readUInt16BE()).toString();if(e===$.TNS_JSON_TYPE_STRING_LENGTH_UINT32)return this.readBytes(this.readUInt32BE()).toString();if(e===$.TNS_JSON_TYPE_NUMBER_LENGTH_UINT8)return parseFloat(this.readOracleNumber());if(e===$.TNS_JSON_TYPE_BINARY_LENGTH_UINT16)return gr.from(this.readBytes(this.readUInt16BE()));if(e===$.TNS_JSON_TYPE_BINARY_LENGTH_UINT32)return gr.from(this.readBytes(this.readUInt32BE()));let t=e&240;if(t===32||t===96){let s=e&15;return parseFloat(this.parseOracleNumber(this.readBytes(s+1)))}else if(t===64||t===80){let s=e&15;return parseFloat(this.parseOracleNumber(this.readBytes(s)))}else if(!(e&224))return e===0?"":this.readBytes(e).toString();Rs.throwErr(Rs.ERR_UNSUPPORTED_DATA_TYPE_IN_JSON,e)}_getNumChildren(e){let t=e&24;if(t===0)return this.readUInt8();if(t===8)return this.readUInt16BE();if(t===16)return this.readUInt32BE()}_getOffset(e){return e&32?this.readUInt32BE():this.readUInt16BE()}decode(){let e=this.readBytes(3);(e[0]!==$.TNS_JSON_MAGIC_BYTE_1||e[1]!==$.TNS_JSON_MAGIC_BYTE_2||e[2]!==$.TNS_JSON_MAGIC_BYTE_3)&&Rs.throwErr(Rs.ERR_UNEXPECTED_DATA,e.toString("hex"));let t=this.readUInt8();t!==$.TNS_JSON_VERSION&&Rs.throwErr(Rs.ERR_OSON_VERSION_NOT_SUPPORTED,t);let s=this.readUInt16BE();if(s&$.TNS_JSON_FLAG_IS_SCALAR)return s&$.TNS_JSON_FLAG_TREE_SEG_UINT32?this.skipBytes(4):this.skipBytes(2),this._decodeNode();let n;s&$.TNS_JSON_FLAG_NUM_FNAMES_UINT32?(n=this.readUInt32BE(),this.fieldIdLength=4):s&$.TNS_JSON_FLAG_NUM_FNAMES_UINT16?(n=this.readUInt16BE(),this.fieldIdLength=2):(n=this.readUInt8(),this.fieldIdLength=1);let i,a;s&$.TNS_JSON_FLAG_FNAMES_SEG_UINT32?(i=4,a=this.readUInt32BE()):(i=2,a=this.readUInt16BE()),s&$.TNS_JSON_FLAG_TREE_SEG_UINT32?this.skipBytes(4):this.skipBytes(2),this.skipBytes(2);let c;s&$.TNS_JSON_FLAG_HASH_ID_UINT8?c=1:s&$.TNS_JSON_FLAG_HASH_ID_UINT16?c=2:c=4,this.skipBytes(n*c);let T=this.pos;this.skipBytes(n*i);let E=this.pos;this.skipBytes(a),this.fieldNames=new Array(n);for(let l=0;l<n;l++){let h=E;s&$.TNS_JSON_FLAG_FNAMES_SEG_UINT32?(h+=this.buf.readUInt32BE(T),T+=4):(h+=this.buf.readUInt16BE(T),T+=2);let d=this.buf[h],A=this.buf.subarray(h+1,h+d+1).toString();this.fieldNames[l]=A}return this.treeSegPos=this.pos,this._decodeNode()}};_(r_,"OsonDecoder");var Qa=r_,n_=class n_{constructor(e){this.name=e,this.nameBytes=gr.from(e),this.nameBytes.length>255&&Rs.throwErr(Rs.ERR_OSON_FIELD_NAME_LIMITATION),this.hashId=BigInt(2166136261);let t=BigInt(16777619),s=BigInt(4294967295);for(let n=0;n<this.nameBytes.length;n++){let i=BigInt(this.nameBytes[n]);this.hashId=(this.hashId^i)*t&s}this.hashId=Number(this.hashId)&255}};_(n_,"OsonFieldName");var Ja=n_,i_=class i_ extends s_{constructor(e){super(),this.fieldNamesMap=new Map,this.fieldNames=[],this._examineNode(e),this._processFieldNames()}_examineNode(e){if(Array.isArray(e))for(let t of e)this._examineNode(t);else if(e&&Array.isArray(e.fields))for(let t=0;t<e.fields.length;t++){let s=e.fields[t],n=e.values[t];if(!this.fieldNamesMap.has(s)){let i=new Ja(s);this.fieldNamesMap.set(s,i),this.fieldNames.push(i),i.offset=this.pos,this.writeUInt8(i.nameBytes.length),this.writeBytes(i.nameBytes)}this._examineNode(n)}}_processFieldNames(){this.fieldNames.sort((e,t)=>e.hashId<t.hashId?-1:e.hashId>t.hashId?1:e.nameBytes.length<t.nameBytes.length?-1:e.nameBytes.length>t.nameBytes.length?1:e.name<t.name?-1:e.name>t.name?1:0);for(let e=0;e<this.fieldNames.length;e++)this.fieldNames[e].fieldId=e+1;this.fieldNames.length<256?this.fieldIdSize=1:this.fieldNames.length<65536?this.fieldIdSize=2:this.fieldIdSize=4}};_(i_,"OsonFieldNamesSegment");var Za=i_,o_=class o_ extends s_{_encodeArray(e,t){this._encodeContainer($.TNS_JSON_TYPE_ARRAY,e.length);let s=0,n=this.reserveBytes(e.length*4);for(let i of e)n.writeUInt32BE(this.pos,s),s+=4,this.encodeNode(i,t)}_encodeContainer(e,t){e|=32,t>65535?e|=16:t>255&&(e|=8),this.writeUInt8(e),t<256?this.writeUInt8(t):t<65536?this.writeUInt16BE(t):this.writeUInt32BE(t)}_encodeObject(e,t){let s=e.values.length;this._encodeContainer($.TNS_JSON_TYPE_OBJECT,s);let n=0,i=s*t.fieldIdSize,a=this.reserveBytes(s*(t.fieldIdSize+4));for(let c=0;c<e.fields.length;c++){let T=t.fieldNamesMap.get(e.fields[c]);t.fieldIdSize==1?a[n]=T.fieldId:t.fieldIdSize==2?a.writeUInt16BE(T.fieldId,n):a.writeUInt32BE(T.fieldId,n),a.writeUInt32BE(this.pos,i),n+=t.fieldIdSize,i+=4,this.encodeNode(e.values[c],t)}}encodeNode(e,t){if(e==null)this.writeUInt8($.TNS_JSON_TYPE_NULL);else if(typeof e=="boolean")e?this.writeUInt8($.TNS_JSON_TYPE_TRUE):this.writeUInt8($.TNS_JSON_TYPE_FALSE);else if(typeof e=="number")this.writeUInt8($.TNS_JSON_TYPE_NUMBER_LENGTH_UINT8),this.writeOracleNumber(e.toString());else if(typeof e=="string"){let s=gr.from(e);s.length<256?(this.writeUInt8($.TNS_JSON_TYPE_STRING_LENGTH_UINT8),this.writeUInt8(s.length)):s.length<65536?(this.writeUInt8($.TNS_JSON_TYPE_STRING_LENGTH_UINT16),this.writeUInt16BE(s.length)):(this.writeUInt8($.TNS_JSON_TYPE_STRING_LENGTH_UINT32),this.writeUInt32BE(s.length)),s.length>0&&this.writeBytes(s)}else AP.isDate(e)?e.getUTCMilliseconds()===0?(this.writeUInt8($.TNS_JSON_TYPE_TIMESTAMP7),this.writeOracleDate(e,mS.DB_TYPE_DATE,!1)):(this.writeUInt8($.TNS_JSON_TYPE_TIMESTAMP),this.writeOracleDate(e,mS.DB_TYPE_TIMESTAMP,!1)):gr.isBuffer(e)?(e.length<65536?(this.writeUInt8($.TNS_JSON_TYPE_BINARY_LENGTH_UINT16),this.writeUInt16BE(e.length)):(this.writeUInt8($.TNS_JSON_TYPE_BINARY_LENGTH_UINT32),this.writeUInt32BE(e.length)),this.writeBytes(e)):Array.isArray(e)?this._encodeArray(e,t):this._encodeObject(e,t)}};_(o_,"OsonTreeSegment");var e_=o_,a_=class a_ extends s_{encode(e){let t,s=$.TNS_JSON_FLAG_INLINE_LEAF;Array.isArray(e)||e&&Array.isArray(e.fields)?(s|=$.TNS_JSON_FLAG_HASH_ID_UINT8|$.TNS_JSON_FLAG_TINY_NODES_STAT,t=new Za(e),t.fieldNames.length>65535?s|=$.TNS_JSON_FLAG_NUM_FNAMES_UINT32:t.fieldNames.length>255&&(s|=$.TNS_JSON_FLAG_NUM_FNAMES_UINT16),t.pos>65535&&(s|=$.TNS_JSON_FLAG_FNAMES_SEG_UINT32)):s|=$.TNS_JSON_FLAG_IS_SCALAR;let n=new e_;if(n.encodeNode(e,t),n.pos>65535&&(s|=$.TNS_JSON_FLAG_TREE_SEG_UINT32),this.writeUInt8($.TNS_JSON_MAGIC_BYTE_1),this.writeUInt8($.TNS_JSON_MAGIC_BYTE_2),this.writeUInt8($.TNS_JSON_MAGIC_BYTE_3),this.writeUInt8($.TNS_JSON_VERSION),this.writeUInt16BE(s),t&&(t.fieldNames.length<256?this.writeUInt8(t.fieldNames.length):t.fieldNames.length<65536?this.writeUInt16BE(t.fieldNames.length):this.writeUInt32BE(t.fieldNames.length),t.pos<65536?this.writeUInt16BE(t.pos):this.writeUInt32BE(t.pos)),n.pos<65536?this.writeUInt16BE(n.pos):this.writeUInt32BE(n.pos),t){this.writeUInt16BE(0);for(let i of t.fieldNames)this.writeUInt8(i.hashId);for(let i of t.fieldNames)t.pos<65536?this.writeUInt16BE(i.offset):this.writeUInt32BE(i.offset);t.pos>0&&this.writeBytes(t.buf.subarray(0,t.pos))}return this.writeBytes(n.buf.subarray(0,n.pos)),this.buf.subarray(0,this.pos)}};_(a_,"OsonEncoder");var t_=a_;fS.exports={OsonDecoder:Qa,OsonEncoder:t_}});var gS=R((fL,CS)=>{"use strict";var{BaseBuffer:IS}=Dr(),{Buffer:cs}=require("buffer"),Ts=Be(),DS=PS(),RS=Ir(),ir=cs.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/","utf8"),l_=class l_{constructor(e){this.allocLen=e;let t=e%Ts.CHUNKED_BYTES_CHUNK_SIZE;t>0&&(this.allocLen+=Ts.CHUNKED_BYTES_CHUNK_SIZE-t),this.buf=cs.alloc(this.allocLen),this.actualLen=0}};_(l_,"BytesChunk");var Un=l_,E_=class E_{constructor(){this.chunks=[]}endChunkedRead(){if(this.chunks.length>1){let t=0;for(let i of this.chunks)t+=i.actualLen;let s=0,n=new Un(t);for(let i of this.chunks)i.buf.copy(n.buf,s,0,i.actualLen),s+=i.actualLen;n.actualLen=t,this.chunks=[n]}let e=this.chunks[0];return e.buf.subarray(0,e.actualLen)}getBuf(e){let t;this.chunks.length>0&&(t=this.chunks[this.chunks.length-1],t.allocLen-t.actualLen<e&&(t=void 0)),t||(t=new Un(e),this.chunks.push(t));let s=t.buf.subarray(t.actualLen,t.actualLen+e);return t.actualLen+=e,s}startChunkedRead(){this.chunks.length>0&&(this.chunks=this.chunks.splice(0,1),this.chunks[0].actualLen=0)}};_(E_,"ChunkedBytesBuffer");var __=E_,u_=class u_ extends IS{constructor(e,t){super(e.sAtts.sdu),this.nsi=e,this.caps=t,this.chunkedBytesBuf=new __}_readBytesWithLength(e){if(e!==Ts.TNS_LONG_LENGTH_INDICATOR)return this.readBytes(e);for(this.chunkedBytesBuf.startChunkedRead();;){let t=this.readUB4();if(t===0)break;this.readBytes(t,!0)}return this.chunkedBytesBuf.endChunkedRead()}skipBytes(e){this.pos===this.size&&this.receivePacket();let t=this.numBytesLeft();if(e<=t){this.pos+=e;return}for(e-=t;e>0;){this.receivePacket();let s=Math.min(e,this.size-this.pos);this.pos+=s,e-=s}}readBytes(e,t=!1){this.pos===this.size&&this.receivePacket();let s=this.numBytesLeft();if(e<=s){let a;return t?(a=this.chunkedBytesBuf.getBuf(e),this.buf.copy(a,0,this.pos,this.pos+e)):a=this.buf.subarray(this.pos,this.pos+e),this.pos+=e,a}let n;t?n=this.chunkedBytesBuf.getBuf(e):n=cs.alloc(e);let i=0;for(this.buf.copy(n,i,this.pos,this.pos+s),i+=s,e-=s;e>0;){this.receivePacket();let a=Math.min(e,this.size-this.pos);this.buf.copy(n,i,this.pos,this.pos+a),this.pos+=a,i+=a,e-=a}return n}receivePacket(){if(this.savedPacketPos===this.savedPackets.length){let e=this.nsi.syncRecvPacket();if(!e||this.nsi.isBreak)throw new RS.OutOfPacketsError;this.savedPackets.push(e)}this.startPacket(this.savedPackets[this.savedPacketPos++])}restorePoint(){this.savedPacketPos=0,this.startPacket(this.savedPackets[this.savedPacketPos++]),this.pos=this.savedPos}savePoint(){this.savedPackets?this.savedPackets=this.savedPackets.splice(this.savedPacketPos-1):this.savedPackets=[this.packet],this.savedPacketPos=1,this.savedPos=this.pos}startPacket(e){this.packet=e,this.buf=e.buf,this.pos=10,this.size=e.buf.length,this.packetNum=e.num}async waitForPackets(){let e=await this.nsi.recvPacket();this.savedPackets?this.savedPackets.push(e):(this.savedPackets=[e],this.savedPacketPos=0),this.startPacket(this.savedPackets[this.savedPacketPos++])}readOson(){if(this.readUB4()===0)return null;this.skipUB8(),this.skipUB4();let t=new DS.OsonDecoder(this.readBytesWithLength());return this.skipBytesChunked(),t.decode()}readURowID(){let e=0,t=1,s=this.readBytesWithLength();if(s===null)return null;s=this.readBytesWithLength();let n=s.length;if(s&&s[0]===1){let T=s.readUInt32BE(1),E=s.readUInt16BE(5),l=s.readUInt32BE(7),h=s.readUInt16BE(11);return RS.encodeRowID({rba:T,partitionID:E,blockNum:l,slotNum:h})}let i=Math.floor(n/3)*4,a=n%3;a===1?i+=1:a===2&&(i+=3);let c=cs.alloc(i);for(n-=1,c[0]=42,e+=1;n>0;){let T=s[t]>>2;if(c[e]=ir[T],e+=1,T=(s[t]&3)<<4,n==1){c[e]=ir[T];break}if(t+=1,T|=(s[t]&240)>>4,c[e]=ir[T],e+=1,T=(s[t]&15)<<2,n==2){c[e]=ir[T];break}t+=1,T|=(s[t]&192)>>6,c[e]=ir[T],e+=1,T=s[t]&63,c[e]=ir[T],e+=1,t+=1,n-=3}return c.toString("utf-8")}readRowID(){let e=this.readUB4(),t=this.readUB2();this.skipUB1();let s=this.readUB4(),n=this.readUB2();return{rba:e,partitionID:t,blockNum:s,slotNum:n}}skipBytesChunked(){let e=this.readUInt8();if(e!==Ts.TNS_LONG_LENGTH_INDICATOR)this.skipBytes(e);else for(;;){let t=this.readUB4();if(t===0)break;this.skipBytes(t)}}};_(u_,"ReadPacket");var c_=u_,N_=class N_ extends IS{constructor(e,t,s){super(e.sAtts.sdu),this.size=this.maxSize,this.isLargeSDU=e.sAtts.version>=Ts.TNS_VERSION_MIN_LARGE_SDU,this.protocol=s,this.packetType=Ts.TNS_PACKET_TYPE_DATA,this.caps=t,this.nsi=e}_grow(){this._sendPacket()}_sendPacket(e=!1){let t=this.pos;this.pos=0,this.isLargeSDU?this.writeUInt32BE(t):(this.writeUInt16BE(t),this.writeUInt16BE(0)),this.writeUInt8(this.packetType),this.writeUInt8(0),this.writeUInt16BE(0);let s=this.buf.subarray(0,t);e||(s=cs.from(s),this.startPacket()),this.nsi.ntAdapter.send(s)}startPacket(e=0){this.pos=Ts.PACKET_HEADER_SIZE,this.packetType===Ts.TNS_PACKET_TYPE_DATA&&this.writeUInt16BE(e)}startRequest(e,t=0){this.packetType=e,this.startPacket(t)}endRequest(){this.pos>Ts.PACKET_HEADER_SIZE&&this._sendPacket(!0)}writeKeyValue(e,t,s=0){let n=cs.byteLength(e),i=cs.byteLength(t);this.writeUB4(n),this.writeBytesWithLength(cs.from(e)),this.writeUB4(i),i>0&&this.writeBytesWithLength(cs.from(t)),this.writeUB4(s)}writeOson(e){let s=new DS.OsonEncoder().encode(e);this.writeQLocator(s.length),this.writeBytesWithLength(s)}writeSeqNum(){this.writeUInt8(this.protocol.sequenceId),this.protocol.sequenceId=(this.protocol.sequenceId+1)%256}};_(N_,"WritePacket");var T_=N_;CS.exports={ReadPacket:c_,WritePacket:T_}});var yS=R((RL,OS)=>{"use strict";var Or=Be(),dP=pS(),{WritePacket:pP,ReadPacket:mP}=gS(),Vs=W(),fP=Ir(),h_=class h_{constructor(e){this._breakInProgress=!1,this.txnInProgress=!1,this.connInProgress=!0,this.nsi=e.nscon,this.sequenceId=1,this.caps=new dP(e.nscon.sAtts.version),this.writeBuf=new pP(e.nscon,this.caps,this),this.readBuf=new mP(e.nscon,this.caps),this.callTimeout=0}async _decodeMessage(e){for(e.preProcess(),await this.readBuf.waitForPackets();;){this.nsi.isBreak&&(await this.resetMessage(),delete this.readBuf.savedBuffers,await this.readBuf.waitForPackets());try{e.decode(this.readBuf);break}catch(t){if(t instanceof fP.OutOfPacketsError){this.nsi.isBreak||(await this.readBuf.waitForPackets(),this.readBuf.restorePoint());continue}throw t}}await e.postProcess()}async _encodeMessage(e){let t=this.nsi.ntAdapter;for(this.writeBuf.startRequest(Or.TNS_PACKET_TYPE_DATA);e.encode(this.writeBuf);)await t.pauseWrite();this.writeBuf.endRequest()}async _recoverFromError(e,t){try{this.breakMessage(),this._breakInProgress=!1,await this.resetMessage(),await this.readBuf.waitForPackets(),t.decode(this.readBuf)}catch(s){this.nsi.disconnect();let n=Vs.getErr(Vs.ERR_CONNECTION_CLOSED);throw e.message=n.message+`
Error recovery failed: `+s.message+`
Original error: `+e.message,e}}async _processMessage(e){let t,s=!1;try{this.callTimeout>0&&(t=setTimeout(()=>{s=!0,this.breakMessage()},this.callTimeout)),await this._encodeMessage(e),e.messageType!==Or.TNS_MSG_TYPE_ONEWAY_FN&&await this._decodeMessage(e)}catch(n){throw!this.connInProgress&&n.code!==Vs.ERR_CONNECTION_CLOSED_CODE&&await this._recoverFromError(n,e),n}finally{clearTimeout(t)}if(e.flushOutBinds&&await this.flushOutBindMessage(e),this.txnInProgress=e.callStatus&Or.TNS_TXN_IN_PROGRESS,e.errorOccurred){s&&Vs.throwErr(Vs.ERR_CALL_TIMEOUT_EXCEEDED,this.callTimeout);let n=new Error(e.errorInfo.message);throw n.offset=e.errorInfo.pos,n.errorNum=e.errorInfo.num,n=Vs.transformErr(n),n.code===Vs.ERR_CONNECTION_CLOSED_CODE&&this.nsi.disconnect(),n}}async flushOutBindMessage(e){this.writeBuf.startRequest(Or.TNS_PACKET_TYPE_DATA),this.writeBuf.writeUInt8(Or.TNS_MSG_TYPE_FLUSH_OUT_BINDS),this.writeBuf.endRequest(),await this._decodeMessage(e)}breakMessage(){this._breakInProgress=!0,this.nsi.sendBreak()}async resetMessage(){await this.nsi.reset()}};_(h_,"Protocol");var S_=h_;OS.exports=S_});var or=R((DL,LS)=>{LS.exports={NSPTCN:1,NSPTAC:2,NSPTAK:3,NSPTRF:4,NSPTRD:5,NSPTDA:6,NSPTNL:7,NSPTAB:9,NSPTRS:11,NSPTMK:12,NSPTAT:13,NSPTCNL:14,NSPTDD:15,NSPTHI:19,NSPHDLEN:0,NSPHDPSM:2,NSPHDTYP:4,NSPHDFLGS:5,NSPHDHSM:6,NSPSIZHD:8,NSPFSID:1,NSPFRDS:2,NSPFRDR:4,NSPFLSD:32,NO_HEADER_FLAGS:0,NSPFSRN:8,NSPCNVSN:8,NSPCNLOV:10,NSPCNOPT:12,NSPCNSDU:14,NSPCNTDU:16,NSPCNNTC:18,NSPCNTNA:20,NSPCNONE:22,NSPCNLEN:24,NSPCNOFF:26,NSPCNMXC:28,NSPCNFL0:32,NSPCNFL1:33,NSPCNTMO:50,NSPCNTCK:52,NSPCNADL:54,NSPCNAOF:56,NSPCNLSD:58,NSPCNLTD:62,NSPCNCFL:66,NSPCNCFL2:70,NSPCNDAT:74,NSPMXCDATA:230,NSINAWANTED:1,NSINAINTCHG:2,NSINADISABLEDFORCONNECTION:4,NSINANOSERVICES:8,NSINAREQUIRED:16,NSINAAUTHWANTED:32,NSISUPSECRENEG:128,NSGDONTCARE:1,NSGHDX:2,NSGFDX:4,NSGHDRCHKSUM:8,NSGPAKCHKSUM:16,NSGBROKEN:32,NSGUSEVIO:64,NSGOSAUTHOK:128,NSGSENDATTN:512,NSGRECVATTN:1024,NSGNOATTNPR:2048,NSGRAW:4096,TNS_VERSION_DESIRED:319,TNS_VERSION_MINIMUM:300,NSPACVSN:8,NSPACOPT:10,NSPACSDU:12,NSPACTDU:14,NSPACONE:16,NSPACLEN:18,NSPACOFF:20,NSPACFL0:22,NSPACFL1:23,NSPACTMO:24,NSPACTCK:26,NSPACADL:28,NSPACAOF:30,NSPACLSD:32,NSPACLTD:36,NSPACCFL:40,NSPACFL2:41,NSPACV310DAT:32,NSPACV315DAT:41,NSPRFURS:8,NSPRFSRS:9,NSPRFLEN:10,NSPRFDAT:12,NSPACCFON:128,NSPACCFAT:64,NSPACCFNT:2,NSPACOOB:1,NSGPCHKSCMD:16777216,NSPRDLEN:8,NSPRDDAT:10,NSPDAFLG:8,NSPDADAT:10,NSPDAFEOF:64,NSPMKTYP:8,NSPMKODT:9,NSPMKDAT:10,NSPMKTD0:0,NSPMKTD1:1,NSPMKTAT:2,NIQBMARK:1,NIQRMARK:2,NIQIMARK:3,NSPCTLCMD:8,NSPCTLDAT:10,NSPCTL_SERR:8,NSPCTL_CLRATTN:9,NSPDFSDULN:8192,NSPABSSDULN:2097152,NSPMXSDULN:65535,NSPMNSDULN:512,NSPDFTDULN:2097152,NSPMXTDULN:2097152,NSPMNTDULN:255,NSFIMM:64,DISABLE_OOB_STR:"DISABLE_OOB",EXPIRE_TIME:"EXPIRE_TIME",PEM_WALLET_FILE_NAME:"ewallet.pem",NT_MOREDATA:1,NS_MOREDATA:2,SVCNAME:3,SERVERTYPE:4,REMOTEADDR:5,HEALTHCHECK:6,CONNCLASS:7,PURITY:8,SID:9,NSNOBLOCK:1}});var wS=R((CL,YS)=>{"use strict";var Mn=require("buffer").Buffer,b=or(),Is=W(),PP=230,BS=74;function RP(r,e,t=0){this.connectData=r,this.connectDataLen=r.length,this.overflow=!1;let s,n;this.connectDataLen<=PP?s=BS+this.connectDataLen:(s=BS,this.overflow=!0),this.buf=Mn.allocUnsafe(s).fill(0),this.buf.writeUInt16BE(s,b.NSPHDLEN),this.buf.writeUInt8(t,b.NSPHDFLGS),this.buf.writeUInt8(b.NSPTCN,b.NSPHDTYP),this.buf.writeUInt16BE(b.TNS_VERSION_DESIRED,b.NSPCNVSN),this.buf.writeUInt16BE(b.TNS_VERSION_MINIMUM,b.NSPCNLOV),n=b.NSGDONTCARE,this.buf.writeUInt16BE(n,b.NSPCNOPT),e.sdu>b.NSPMXSDULN?this.buf.writeUInt16BE(b.NSPMXSDULN,b.NSPCNSDU):this.buf.writeUInt16BE(e.sdu,b.NSPCNSDU),e.tdu>b.NSPMXSDULN?this.buf.writeUInt16BE(b.NSPMXSDULN,b.NSPCNTDU):this.buf.writeUInt16BE(e.tdu,b.NSPCNTDU),this.buf.writeUInt16BE(e.ntCha,b.NSPCNNTC),this.buf.writeUInt16BE(1,b.NSPCNONE),this.buf.writeUInt16BE(this.connectDataLen,b.NSPCNLEN),this.buf.writeUInt16BE(b.NSPCNDAT,b.NSPCNOFF),this.buf.writeUInt8(b.NSISUPSECRENEG|b.NSINADISABLEDFORCONNECTION,b.NSPCNFL0),this.buf.writeUInt8(b.NSISUPSECRENEG|b.NSINADISABLEDFORCONNECTION,b.NSPCNFL1),this.buf.writeUInt16BE(0,b.NSPCNTMO),this.buf.writeUInt16BE(0,b.NSPCNTCK),this.buf.writeUInt16BE(0,b.NSPCNADL),this.buf.writeUInt16BE(0,b.NSPCNAOF),this.buf.writeUInt32BE(e.sdu,b.NSPCNLSD),this.buf.writeUInt32BE(e.tdu,b.NSPCNLTD),this.buf.writeUInt32BE(0,b.NSPCNCFL),this.buf.writeUInt32BE(0,b.NSPCNCFL2),!this.overflow&&this.connectDataLen&&this.buf.write(r.toString("ascii"),b.NSPCNDAT,this.connectDataLen,"ascii")}_(RP,"ConnectPacket");function IP(r){this.dataPtr=0,this.dataLen=0,this.offset=0,this.len=0,this.bufLen=0,this.createPacket=function(e){this.dataPtr=b.NSPDADAT,this.dataLen=b.NSPDADAT,this.buf=Mn.allocUnsafe(e).fill(0),this.buf.writeUInt8(0,b.NSPHDFLGS),this.buf.writeUInt8(b.NSPTDA,b.NSPHDTYP),this.bufLen=e},this.fillBuf=function(e,t,s,n=0){let i;return this.buf||this.createPacket(s+b.NSPDADAT),s>this.bufLen-this.dataLen?i=this.bufLen-this.dataLen:i=s,i&&e.copy(this.buf,this.dataLen,t,t+i),this.dataLen+=i,this.prepare2Send(n),i},this.prepare2Send=function(e=0){r?this.buf.writeUInt32BE(this.dataLen,b.NSPHDLEN):this.buf.writeUInt16BE(this.dataLen,b.NSPHDLEN),this.buf.writeUInt16BE(e,b.NSPDAFLG),this.dataBuf=this.buf.subarray(0,this.dataLen)},this.fromPacket=function(e){this.buf=e.buf,this.dataLen=e.buf.length,this.dataPtr=b.NSPDADAT,this.offset=this.dataPtr,this.len=this.dataLen,e.dataOffset=this.dataPtr}}_(IP,"DataPacket");function DP(r,e){this.buf=r.buf,this.len=r.buf.length,e.version=r.buf.readUInt16BE(b.NSPACVSN),e.options=r.buf.readUInt16BE(b.NSPACOPT),e.sdu=r.buf.readUInt16BE(b.NSPACSDU),e.tdu=r.buf.readUInt16BE(b.NSPACTDU),e.version>=315&&(e.sdu=r.buf.readUInt32BE(b.NSPACLSD),e.tdu=r.buf.readUInt32BE(b.NSPACLTD),e.largeSDU=!0),this.flag0=r.buf.readUInt8(b.NSPACFL0),this.flag1=r.buf.readUInt8(b.NSPACFL1)}_(DP,"AcceptPacket");function CP(r){this.buf=r.buf,this.len=r.buf.length,this.userReason=r.buf.readUInt8(b.NSPRFURS),this.systemReason=r.buf.readUInt8(b.NSPRFURS),this.dataLen=r.buf.readUInt16BE(b.NSPRFLEN),this.dataOff=b.NSPRFDAT,this.len>this.dataOff?(this.dataBuf=this.buf.toString("ascii",this.dataOff,this.len),this.overflow=!1):this.overflow=!0}_(CP,"RefusePacket");function gP(r){this.buf=r.buf,this.len=r.buf.length,this.flags=r.flags,this.dataLen=r.buf.readUInt16BE(b.NSPRDLEN),this.dataOff=b.NSPRDDAT,this.len>this.dataOff?(this.dataBuf=this.buf.subarray(this.dataOff,this.len),this.overflow=!1):this.overflow=!0}_(gP,"RedirectPacket");function OP(r){this.len=b.NSPMKDAT+1,this.buf=Mn.alloc(b.NSPMKDAT+1),r?this.buf.writeUInt32BE(this.len,b.NSPHDLEN):this.buf.writeUInt16BE(this.len,b.NSPHDLEN),this.buf.writeUInt8(0,b.NSPHDFLGS),this.buf.writeUInt8(b.NSPTMK,b.NSPHDTYP),this.prepare=function(e,t){this.buf.writeUInt8(e,b.NSPMKTYP),this.buf.writeUInt8(t,b.NSPMKDAT)},this.fromPacket=function(e,t){switch(this.type=e.buf.readUInt8(b.NSPMKTYP),this.type){case b.NSPMKTD0:t.isBreak=!0;break;case b.NSPMKTD1:this.data=e.buf.readUInt8(b.NSPMKDAT),t.isBreak=!0,this.data==b.NIQRMARK&&(t.isReset=!0,t.isBreak=!0);break;default:Is.throwErr(Is.ERR_INVALID_PACKET)}}}_(OP,"MarkerPacket");function yP(){this.clear=function(){this.errno=0,this.notif=null,this.notifLen=0,this.cmd=0},this.fromPacket=function(r){let n,i,a;switch(this.cmd=r.buf.readUInt16BE(b.NSPCTLCMD),this.cmd){case b.NSPCTL_SERR:n=r.buf.readUInt32BE(b.NSPCTLDAT),i=r.buf.readUInt32BE(b.NSPCTLDAT+4),a=r.buf.readUInt32BE(b.NSPCTLDAT+8),i==12572?this.errno=i:i==12573?(this.errno=i,this.notifLen=a,this.notif=Mn.allocUnsafe(a+1).fill(0),this.buf.copy(this.notif,0,b.NSPCTLDAT+12,b.NSPCTLDAT+12+a)):(this.errno=i,n==22?Is.throwErr(Is.ERR_CONNECTION_INBAND,"ORA-"+i):Is.throwErr(Is.ERR_CONNECTION_INBAND,"TNS-"+i));break;default:Is.throwErr(Is.ERR_INVALID_PACKET)}}}_(yP,"ControlPacket");YS.exports={ConnectPacket:RP,DataPacket:IP,AcceptPacket:DP,RefusePacket:CP,RedirectPacket:gP,MarkerPacket:OP,ControlPacket:yP}});var VS=R((OL,MS)=>{"use strict";var{Buffer:LP}=require("buffer"),BP=require("net"),US=require("process"),yr=require("tls"),YP=require("http"),wP=require("timers"),A_=or(),Ge=W(),UP=8,MP=1521,VP=80,xP=4878,bP=1,p_=class p_{constructor(e){this.atts=e,this.cha=xP,this.connected=!1,this.err=!1,this.needsDrain=!1,this.numPacketsSinceLastWait=0,this.secure=!1,this.largeSDU=!1,this.streamNum=bP++,this.packetNum=1}dnMatch(e,t){if(this.atts.sslServerDNMatch){let s=_(n=>n.split(",").map(i=>i.split("=").map(a=>a.trim())).reduce((i,a)=>(i[a[0]]=a[1],i),{}),"toObject");if(this.atts.sslServerCertDN){let n=s(this.atts.sslServerCertDN);for(let i in n)if(n[i]!=t.subject[i])return Ge.getErr(Ge.ERR_TLS_DNMATCH_FAILURE)}else if(yr.checkServerIdentity(this.hostName,t)&&(!this.originHost||yr.checkServerIdentity(this.originHost,t))){let n=this.hostName+" "+(this.originHost?"or "+this.originHost:"");return Ge.getErr(Ge.ERR_TLS_HOSTMATCH_FAILURE,n)}}}async tlsConnect(e,t){this.stream.removeAllListeners();let s,n={host:this.host,socket:t,rejectUnauthorized:!0,secureContext:e,enableTrace:!1,checkServerIdentity:this.dnMatch.bind(this)};await new Promise(i=>{this.stream=yr.connect(n,()=>{this.stream.authorized||(s="server certificate unauthorized"),i()}).on("error",a=>{s=a.message,i()})}),s&&Ge.throwErr(Ge.ERR_TLS_AUTH_FAILURE,this.host,this.port,this.atts.connectionId,s),this.connStream=t}async ntConnect(e){e.port||(e.port=MP);let t,s,n,i=e.httpsProxy||this.atts.httpsProxy,a=e.httpsProxyPort||this.atts.httpsProxyPort;await new Promise(c=>{i?(a||(a=VP),n=YP.request({host:i,port:a,method:"CONNECT",path:e.host+":"+e.port}),n.once("connect",(T,E)=>{T.statusCode==200?(this.connected=!0,this.stream=E):s=T.statusCode,c()}),n.once("error",T=>{s=T.message,c()}),n.end()):(this.stream=BP.connect(e.port,e.host,()=>{this.connected=!0,c()}),this.stream.once("error",T=>{t=T.message,c()}))}),n&&n.removeAllListeners(),this.connected||(s?Ge.throwErr(Ge.ERR_PROXY_CONNECTION_FAILURE,i,a,this.atts.connectionId,s):Ge.throwErr(Ge.ERR_CONNECTION_INCOMPLETE,this.host,this.port,this.atts.connectionId,t))}async connect(e){this.originHost=e.originHost,this.host=e.host,this.hostName=e.hostname,this.port=e.port;try{if(await this.ntConnect(e),(this.atts.expireTime||this.atts.enableDCD)&&(this.atts.expireTime?this.stream.setKeepAlive(!0,this.atts.expireTime):this.stream.setKeepAlive(!0)),this.atts.tcpNoDelay&&this.stream.setNoDelay(!0),e.protocol.toUpperCase()=="TCPS"){let t;this.secure=!0;try{t=yr.createSecureContext({cert:this.atts.wallet,key:this.atts.wallet,passphrase:this.atts.walletPassword,ca:this.atts.wallet})}catch{Ge.throwErr(Ge.ERR_TLS_INIT_FAILURE)}await this.tlsConnect(t,this.stream)}}finally{this.stream&&this.setupEventHandlers()}}disconnect(e){this.connected&&!this.err&&(e==A_.NSFIMM?this.stream.destroy():this.stream.end()),this.stream=null,this.connected=!1,this.drainWaiter=null,this.readWaiter=null}getPacketDump(e){let t=[];for(let s=0;s<e.length;s+=8){let n=s.toString().padStart(4,"0"),i=e.slice(s,s+8),a=[],c=[];for(let l of i)a.push(l.toString(16).toUpperCase().padStart(2,"0")),l>32&&l<127?c.push(String.fromCharCode(l)):c.push(".");for(;a.length<8;)a.push("  "),c.push(" ");let T=a.join(" "),E=c.join("");t.push(`${n} : ${T} |${E}|`)}return t.join(`
`)}printPacket(e,t){let s=new Date,n=`${s.getFullYear()}-${s.getMonth().toString().padStart(2,"0")}-${s.getDay().toString().padStart(2,"0")} ${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}:${s.getSeconds().toString().padStart(2,"0")}.${s.getMilliseconds().toString().padStart(3,"0")}`,i=this.getPacketDump(t);console.log(`${n} ${e}:
${i}
`)}checkErr(){if(!this.connected||this.err){let e,t;throw this.savedErr?e=Ge.getErr(Ge.ERR_CONNECTION_LOSTCONTACT,this.host,this.port,this.atts.connectionId,this.savedErr.message):e=Ge.getErr(Ge.ERR_CONNECTION_EOF,this.host,this.port,this.atts.connectionId),t=Ge.getErr(Ge.ERR_CONNECTION_CLOSED),t.message=t.message+`
`+e.message,t}}send(e){this.checkErr(),US.env.NODE_ORACLEDB_DEBUG_PACKETS&&this.printPacket(`Sending packet ${this.packetNum} on stream ${this.streamNum}`,e),this.stream.write(e,s=>{s&&(this.savedErr=s,this.err=!0,this._notifyWaiters())})||(this.needsDrain=!0),this.numPacketsSinceLastWait++,this.packetNum++}shouldPauseWrite(){return this.needsDrain||this.numPacketsSinceLastWait>=100}async pauseWrite(){this.checkErr(),this.needsDrain?(await new Promise(e=>{this.drainWaiter=e}),this.checkErr()):await new Promise(e=>wP.setImmediate(e)),this.numPacketsSinceLastWait=0}startRead(){let e;this.packets=[],this.stream.on("data",t=>{for(e?e=LP.concat([e,t]):e=t;e.length>=UP;){let s;if(this.largeSDU?s=e.readUInt32BE():s=e.readUInt16BE(),s>e.length)break;let n={buf:e.subarray(0,s),type:e[4],flags:e[5],num:this.packetNum++};if(this.packets.push(n),this.readWaiter&&(this.readWaiter(),this.readWaiter=null),US.env.NODE_ORACLEDB_DEBUG_PACKETS&&this.printPacket(`Receiving packet ${n.num} on stream ${this.streamNum}`,n.buf),s===e.length){e=null;break}else e=e.subarray(s)}})}syncReceive(){return this.packets.shift()}async receive(){return this.packets.length===0&&(this.checkErr(),await new Promise(e=>{this.readWaiter=e,this.numPacketsSinceLastWait=0}),this.checkErr()),this.packets.shift()}async renegTLS(){try{this.checkErr();let e=yr.createSecureContext({cert:this.atts.wallet,key:this.atts.wallet,passphrase:this.atts.walletPassword,ca:this.atts.wallet});await this.tlsConnect(e,this.connStream)}finally{this.setupEventHandlers()}}setupEventHandlers(){this.stream.removeAllListeners(),this.stream.on("error",e=>{this.savedErr=e,this.err=!0,this._notifyWaiters()}),this.stream.on("end",()=>{this.err=!0,this._notifyWaiters()}),this.stream.on("close",()=>{this.connected=!1,this._notifyWaiters()}),this.stream.on("drain",()=>{this.needsDrain=!1,this.drainWaiter&&(this.drainWaiter(),this.drainWaiter=null)})}getOption(e){switch(this.checkErr(),e){case A_.NT_MOREDATA:return this.packets.length>0;case A_.REMOTEADDR:{let t=this.secure?this.connStream:this.stream;return t.remoteAddress+":"+t.remotePort}default:Ge.throwErr(Ge.ERR_INTERNAL,"getOption not supported for opcode "+e)}}_notifyWaiters(){this.drainWaiter&&(this.drainWaiter(),this.drainWaiter=null),this.readWaiter&&(this.readWaiter(),this.readWaiter=null)}};_(p_,"NTTCP");var d_=p_;MS.exports=d_});var FS=R((LL,bS)=>{"use strict";var FP=require("crypto"),kP=require("path"),xS=or(),qP=require("fs");async function GP(){return await new Promise((r,e)=>{FP.randomBytes(16,(t,s)=>{t?e(t):r(s)})})}_(GP,"genuuid");var f_=class f_{constructor(e){this.largeSDU=!1,this.tdu=xS.NSPDFTDULN,this.nt={},this.nt.tcpNoDelay=!0,this.uuid=e,this.nt.sslServerDNMatch=!0}setFrom(e){e&&(e.sdu>0&&(this.sdu=parseInt(e.sdu)),typeof e.walletLocation=="string"&&(this.nt.walletFile=kP.join(e.walletLocation,xS.PEM_WALLET_FILE_NAME)),typeof e.walletPassword=="string"&&(this.nt.walletPassword=e.walletPassword),e.expireTime>0&&(this.nt.expireTime=e.expireTime*1e3*60),e.connectTimeout>0&&(this.connectTimeout=e.connectTimeout*1e3),e.transportConnectTimeout>0&&(this.transportConnectTimeout=e.transportConnectTimeout*1e3),e.recvTimeout>0&&(this.recvTimeout=e.recvTimeout*1e3),e.sendTimeout>0&&(this.sendTimeout=e.sendTimeout*1e3),typeof e.connectionIdPrefix=="string"&&(this.connectionIdPrefix=e.connectionIdPrefix),typeof e.tcpNoDelay=="boolean"&&(this.nt.tcpNoDelay=e.tcpNoDelay),typeof e.sslServerDNMatch=="boolean"&&(this.nt.sslServerDNMatch=e.sslServerDNMatch),typeof e.sslServerCertDN=="string"&&(this.nt.sslServerCertDN=e.sslServerCertDN),typeof e.enable=="string"&&e.enable.toUpperCase()=="BROKEN"&&(this.nt.enabledDCD=!0),typeof e.httpsProxy=="string"&&(this.nt.httpsProxy=e.httpsProxy),e.httpsProxyPort>=0&&(this.nt.httpsProxyPort=parseInt(e.httpsProxyPort)))}readWalletFile(){return new Promise((e,t)=>{qP.readFile(this.nt.walletFile,(s,n)=>{s?t(s):e(n)})})}async prepare(e){this.uuid||(this.uuid=await GP(),this.uuid=this.uuid.toString("base64")),this.connectionIdPrefix?this.connectionId=this.connectionIdPrefix+this.uuid:this.connectionId=this.uuid,this.nt.connectionId=this.connectionId,e&&e.toUpperCase()=="TCPS"&&this.nt.walletFile&&(this.nt.wallet=await this.readWalletFile()),!this.connectTimeout&&!this.transportConnectTimeout&&(this.transportConnectTimeout=60*1e3)}};_(f_,"SessionAtts");var m_=f_;bS.exports=m_});var Br=R((YL,WS)=>{"use strict";var he=W(),kS=0,Lr=1,P_=2,R_=3,Vn=4,Y_=class Y_{constructor(e){this.name=e,this.listType=R_,this.rhsType=kS}set setAtom(e){this._containsComment(e)&&he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX),this.rhsType=Lr,this.list=null,this.atom=e}_containsComment(e){for(let t=0;t<e.length;t++)if(e.charAt(t)=="#")if(t!=0){if(e.charAt(t-1)=="\\")continue;return!0}else return!0;return!1}getListSize(){return this.list==null?0:this.list.length}getListElement(e){return this.list==null?null:this.list[e]}addListElement(e){this.list==null&&(this.rhsType=P_,this.list=new Array,this.atom=null),this.list.push(e),e.parent=this}removeListElement(e){this.list!=null&&(this.list.splice(e,1),this.getListSize==0&&(this.list=null,this.rhsType=kS))}_space(e){var t="";for(let s=0;s<e;s++)t+=" ";return t}valueToString(){let e="";if(this.rhsType==Lr)e=e+this.atom;else if(this.rhsType==P_){if(this.listType==R_)for(let t=0;t<this.getListSize();t++)e=e+this.getListElement(t).toString();else if(this.listType==Vn)for(let t=0;t<this.getListSize();t++){let s=this.getListElement(t);e=e+s.name,t!=this.getListSize()-1&&(e=e+", ")}}return e}toString(){let e="("+this.name+"=";if(this.rhsType==Lr)e=e+this.atom;else if(this.rhsType==P_){if(this.listType==R_)for(let t=0;t<this.getListSize();t++)e=e+this.getListElement(t).toString();else if(this.listType==Vn){e=e+" (";for(let t=0;t<this.getListSize();t++){let s=this.getListElement(t);e=e+s.name,t!=this.getListSize()-1&&(e=e+", ")}e=e+")"}}return e=e+")",e}};_(Y_,"NVPair");var xn=Y_,HP=0,bn=1,O_=2,Ds=3,GS=4,Fn=8,vP=9,I_="(",D_=")",C_=",",g_="=",KP="\\",qS='"',WP="'",$P="%",zP=" ",XP="	",jP=`
`,QP="\r",w_=class w_{constructor(){this.tkType=null,this.tkValue=null,this.numTokens=0,this.tkPos=0}_isWhiteSpace(e){return e==zP||e==XP||e==jP||e==QP}_trimWhiteSpace(e){let t=e.length,s=0,n=t;for(;s<t&&this._isWhiteSpace(e.charAt(s));)s++;for(;s<n&&this._isWhiteSpace(e.charAt(n-1));)n--;return e.substring(s,n)}parseTokens(e){this.numTokens=0,this.tkPos=0,this.tkType=new Array,this.tkValue=new Array;let t=e.length,s=!1,n=new Array;n=Array.from(e);let i=0;for(;i<t;){for(;i<t&&this._isWhiteSpace(n[i]);)i++;if(i<t)switch(n[i]){case I_:s=!1,this._addToken(bn,I_),i++;break;case g_:s=!0,this._addToken(GS,g_),i++;break;case D_:s=!1,this._addToken(O_,D_),i++;break;case C_:s=!1,this._addToken(Ds,C_),i++;break;default:{let a=i,c=-1,T=!1,E=qS;for((n[i]==WP||n[i]==qS)&&(T=!0,E=n[i],i++,a=i);i<t;){if(n[i]==KP){i+=2;continue}if(T){if(n[i]==E){i++,c=i-1;break}}else if(n[i]==I_||n[i]==D_||n[i]==C_&&!s||n[i]==g_&&!s){c=i;break}i++}c==-1&&(c=i),this._addToken(Fn,e.substring(a,c).trim());break}}}return this._addToken(vP,$P),!0}getToken(){if(this.tkType==null&&he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens)return Number(this.tkType[this.tkPos]);he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX)}popToken(){let e=HP;return this.tkType==null&&he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=Number(this.tkType[this.tkPos++]):he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX),e}getLiteral(){let e=null;return this.tkValue==null&&he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=String(this.tkValue[this.tkPos]):he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX),e}popLiteral(){let e=null;return this.tkValue==null&&he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX),this.tkPos<this.numTokens?e=String(this.tkValue[this.tkPos++]):he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX),e}eatToken(){this.tkPos<this.numTokens&&this.tkPos++}toString(){if(this.tkType==null)return"*NO TOKENS*";let e="Tokens";for(let t=0;t<this.numTokens;t++)e=e+" : "+this.tkValue[t];return e}_addToken(e,t){this.tkType.push(Number(e)),this.tkValue.push(String(t)),this.numTokens++}};_(w_,"NVTokens");var y_=w_;function JP(r){let e=new y_;return e.parseTokens(r),ZP(e)}_(JP,"createNVPair");function ZP(r){let e=r.getToken();r.eatToken(),e!=bn&&he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=B_(r),s=new xn(t);if((e=r.getToken())==Ds){for(;e==Fn||e==Ds;)t+=r.popLiteral(),e=r.getToken();return s.name=t,L_(s,r)}return L_(s,r)}_(ZP,"readTopLevelNVPair");function eR(r){let e=r.getToken();r.eatToken(),e==bn||e==Ds||he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=B_(r),s=new xn(t);return L_(s,r)}_(eR,"readNVPair");function L_(r,e){let t=e.getToken();switch(t){case GS:if(e.eatToken(),t=e.getToken(),t==Fn){let s=B_(e);r.setAtom=s}else HS(e,r);break;case Ds:case O_:r.setAtom=r.name;break;default:he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX)}return t=e.getToken(),t==O_?e.eatToken():t!=Ds&&he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX),r}_(L_,"readRightHandSide");function B_(r){return r.getToken()!=Fn&&he.throwErr(he.ERR_INVALID_CONNECT_STRING_SYNTAX),r.popLiteral()}_(B_,"readNVLiteral");function HS(r,e){let t=r.getToken();if(!(t==bn||t==Ds))return;let s=eR(r);e.addListElement(s),(t==Ds||s.name==s.atom)&&e.getListType!=Vn&&(e.setListType=Vn),HS(r,e)}_(HS,"readNVList");function vS(r,e){if(!r)return null;if(e.toUpperCase()==r.name.toUpperCase())return r;if(r.getRHSType==Lr)return null;for(let t=0;t<r.getListSize();t++){let s=vS(r.getListElement(t),e);if(s!==null)return s}return null}_(vS,"findNVPairRecurse");function KS(r,e){if(!r||r.getRHSType==Lr)return null;for(let t=0;t<r.getListSize();t++){let s=r.getListElement(t);if(e.toUpperCase()==s.name.toUpperCase())return s}return null}_(KS,"findNVPair");function tR(r,e){if(!r||e[0].toUpperCase()!=r.name.toUpperCase())return null;let t=r,s=e.length;for(let n=1;n<s;n++)if(t=KS(t,e[n]),!t)return null;return t.atom==null?t.list==null?null:t.list.toString():t.atom.toString()}_(tR,"findValue");WS.exports={findNVPairRecurse:vS,createNVPair:JP,findNVPair:KS,findValue:tR}});var ar=R((UL,jS)=>{"use strict";var zS=ot(),kn=W(),$S=require("os");function sR(){this.program=process.argv0,this.terminal="unknown",this.pid=process.pid.toString();try{this.userName=$S.userInfo().username}catch{this.userName="unknown"}this.hostName=$S.hostname()}_(sR,"populateClientInfo");var rR=new sR;function nR(r){let e=[];for(let t of r)e.push(t.fetchInfo);return e}_(nR,"getMetadataMany");function U_(r,e){let t=r[0].name===void 0,s;t?s=[]:s={};for(let n=0;n<r.length;n++)r[n].dir!==zS.BIND_IN&&(t?s.push(r[n].values[e]):s[r[n].name]=r[n].values[e]);return s}_(U_,"getOutBinds");function iR(r,e){if(XS(r)===0)return;let s=new Array(e).fill(null);for(let n=0;n<e;n++)s[n]=U_(r,n);return s}_(iR,"getExecuteManyOutBinds");function XS(r){let e=0;for(let t=0;t<r.length;t++)r[t].dir!==zS.BIND_IN&&e++;return e}_(XS,"getNumOutBinds");function oR(r){if(XS(r)!==0)return U_(r,0)}_(oR,"getExecuteOutBinds");function aR(r){return r=r.trim(),r=r.replace(/\--.*(\n|$)/g,""),r=r.replace(/\/\\*[\S\n ]+\\*\//g,""),r=r.replace(/\s+/g," "),r}_(aR,"cleanSql");function _R(r){let e=[];for(let t of r.bindInfoList)e.push(t.bindVar);return e}_(_R,"getBindVars");function cR(r){let e="",t="",s=!1,n=!1,i=0,a,c={status:-1,proxyUser:"",schemaUser:""},T=r.length,E=0,l,h;for(;E<T;){if(r.charAt(E)==='"'&&(s=!s,i=E),r.charAt(E)==="["&&!s){if(n=!0,i!=0){for(l=i+1;l<E;l++)if(r.charAt(l)!==" ")return c;for(l=0;l<=i;l++)t+=r.charAt(l)}else for(l=0;l<E&&r.charAt(l)!==" ";l++)t+=r.charAt(l);break}E++}if(t.length===0)return c;for(c.proxyUser=t,E=E+1,s=!1,a=E,i=0;E<T;){if(r.charAt(E)==='"'&&(s=!s,i=E),r.charAt(E)==="["&&!s&&n)return c;if(r.charAt(E)==="]"&&!s){if(i!=a&&i!=0){for(l=a;l<=i;l++)e+=r.charAt(l);for(l=i+1;l<E;l++)if(r.charAt(l)!=" ")return c}else{for(l=a;l<E&&r.charAt(l)==" ";l++);if(l==E)return c;for(h=l;h<E;h++)e+=r[h]}for(l=E+1;l<T;l++)if(r[l]!=" ")return c}E++}return e.length===0||(c.schemaUser=e,c.status=0),c}_(cR,"checkProxyUserValidity");function TR(r){r.token===void 0&&(r.externalAuth===!0&&kn.throwErr(kn.ERR_NOT_IMPLEMENTED,"External Authentication"),r.password===void 0&&kn.throwErr(kn.ERR_MISSING_CREDENTIALS))}_(TR,"checkCredentials");jS.exports={getMetadataMany:nR,cleanSql:aR,CLIENT_INFO:rR,getExecuteOutBinds:oR,getExecuteManyOutBinds:iR,getOutBinds:U_,getBindVars:_R,checkProxyUserValidity:cR,checkCredentials:TR}});var eh=R((VL,ZS)=>{"use strict";var{findNVPairRecurse:Yr,createNVPair:vn}=Br(),ct=W(),lR=require("os"),ER=require("net"),uR=require("dns"),QS=uR.promises,M_=ar().CLIENT_INFO,Kn={ADDR:0,ADDR_LIST:1,DESC:2,DESC_LIST:3},k_=class k_{isS(){return Kn.ADDR}initFromString(e){let t=vn(e);this.initFromNVPair(t)}initFromNVPair(e){(e==null||e.name.toUpperCase()!="ADDRESS")&&ct.throwErr(ct.ERR_INVALID_CONNECT_STRING_SYNTAX);let t=Yr(e,"protocol"),s=Yr(e,"port"),n=Yr(e,"host"),i=Yr(e,"https_proxy"),a=Yr(e,"https_proxy_port");s&&(this.port=s.atom),n&&(this.host=n.atom),t&&(this.prot=t.atom),i&&(this.httpsProxy=i.atom),a&&(this.httpsProxyPort=a.atom),this.addr=e.toString()}toString(){return this.addr}};_(k_,"Address");var V_=k_,q_=class q_{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!1,this.failover=!0}isS(){return Kn.ADDR_LIST}initFromString(e){let t=vn(e);this.initFromNVPair(t)}initFromNVPair(e){this.children=[];let t,s,n=e.getListSize();n==0&&ct.throwErr(ct.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let i=0;i<n;i++)t=e.getListElement(i),t.name.toUpperCase()=="SOURCE_ROUTE"?this.sourceRoute=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="LOAD_BALANCE"?this.loadBalance=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="FAILOVER"?this.failover=t.atom.toLowerCase()=="yes"||t.atom.toLowerCase()=="on"||t.atom.toLowerCase()=="true":t.name.toUpperCase()=="ADDRESS"?(s=new wr,s.initFromNVPair(t),this.children.push(s)):t.name.toUpperCase()=="ADDRESS_LIST"?(s=new Ur,s.initFromNVPair(t),this.children.push(s)):ct.throwErr(ct.ERR_INVALID_CONNECT_STRING_SYNTAX);this.children.length==0&&ct.throwErr(ct.ERR_INVALID_CONNECT_STRING_SYNTAX)}toString(){let e=new String("");if(this.children.size()<1)return e;e+="(ADDRESS_LIST=";for(let t=0;t<this.children.size();t++)e+=this.children[t].toString();return this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"+_r.HC),this.loadBalance&&(e+="(LOAD_BALANCE=yes)"),this.failover||(e+="(FAILOVER=false)"),e+=")",e}};_(q_,"AddressList");var x_=q_,G_=class G_{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!1,this.failover=!0,this.delayInMillis=-1,this.params={}}isS(){return Kn.DESC}initFromString(e){let t=vn(e);this.initFromNVPair(t)}initFromNVPair(e){let t=e.getListSize(),s,n;t==0&&ct.throwErr(ct.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let i=0;i<t;i++)if(s=e.getListElement(i),s.name.toUpperCase()=="SOURCE_ROUTE")this.sourceRoute=s.atom.toLowerCase()=="yes"||s.atom.toLowerCase()=="on"||s.atom.toLowerCase()=="true";else if(s.name.toUpperCase()=="LOAD_BALANCE")this.loadBalance=s.atom.toLowerCase()=="yes"||s.atom.toLowerCase()=="on"||s.atom.toLowerCase()=="true";else if(s.name.toUpperCase()=="FAILOVER")this.failover=s.atom.toLowerCase()=="yes"||s.atom.toLowerCase()=="on"||s.atom.toLowerCase()=="true";else if(s.name.toUpperCase()=="ADDRESS_LIST")n=new Ur,n.initFromNVPair(s),this.children.push(n);else if(s.name.toUpperCase()=="ADDRESS")n=new wr,n.initFromNVPair(s),this.children.push(n);else if(s.name.toUpperCase()=="CONNECT_DATA"){let a,c=s.getListSize();for(let T=0;T<c;T++)if(a=s.getListElement(T),a.name.toUpperCase()=="CONNECTION_ID_PREFIX"){this.params.connectionIdPrefix=a.atom,s.removeListElement(T);break}this.connectData=s.valueToString()}else if(s.name.toUpperCase()=="RETRY_DELAY")s.atom>0&&(this.delayInMillis=s.atom*1e3);else if(s.name.toUpperCase()=="RETRY_COUNT")this.retryCount=s.atom;else if(s.name.toUpperCase()=="CONNECTION_ID_PREFIX")this.conidPrefix=s.atom;else if(s.name.toUpperCase()=="CONNECT_TIMEOUT")s.atom>0&&(this.params.connectTimeout=s.atom);else if(s.name.toUpperCase()=="TRANSPORT_CONNECT_TIMEOUT")s.atom>0&&(this.params.transportConnectTimeout=s.atom);else if(s.name.toUpperCase()=="ENABLE")this.params.enable=s.atom;else if(s.name.toUpperCase()=="RECV_TIMEOUT")s.atom>0&&(this.params.recvTimeout=s.atom);else if(s.name.toUpperCase()=="SDU")this.params.sdu=s.atom;else if(s.name.toUpperCase()=="EXPIRE_TIME")s.atom>0&&(this.params.expireTime=s.atom);else if(s.name.toUpperCase()=="SECURITY"){let a=s.getListSize(),c;for(let T=0;T<a;T++)c=s.getListElement(T),c.name.toUpperCase()=="SSL_SERVER_CERT_DN"?this.params.sslServerCertDN=c.valueToString():c.name.toUpperCase()=="SSL_SERVER_DN_MATCH"?this.params.sslServerDNMatch=c.atom.toLowerCase()=="yes"||c.atom.toLowerCase()=="on"||c.atom.toLowerCase()=="true":(c.name.toUpperCase()=="WALLET_LOCATION"||c.name.toUpperCase()=="MY_WALLET_DIRECTORY")&&(this.params.walletLocation=c.atom)}}toString(){let e=new String(""),t;t=new String("");for(let s=0;s<this.children.size();s++)t=this.children[s].toString(),!t==""&&(e+=t);return!e==""&&this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"),!e==""&&this.loadBalance&&(e+="(LOAD_BALANCE=yes)"),!e==""&&!this.failover&&(e+="(FAILOVER=false)"),e.equals("")||(e="(DESCRIPTION="+e+")"),e}};_(G_,"Description");var b_=G_,H_=class H_{constructor(){this.children=new Array,this.sourceRoute=!1,this.loadBalance=!0,this.failover=!0}isS(){return Kn.ADDR_LIST}initFromString(e){let t=vn(e);this.initFromNVPair(t)}initFromNVPair(e){let t=e.getListSize(),s,n;t==0&&ct.throwErr(ct.ERR_INVALID_CONNECT_STRING_SYNTAX);for(let i=0;i<t;i++)n=e.getListElement(i),n.name.toUpperCase()=="SOURCE_ROUTE"?this.sourceRoute=n.atom.toLowerCase()=="yes"||n.atom.toLowerCase()=="on"||n.atom.toLowerCase=="true":n.name.toUpperCase()=="LOAD_BALANCE"?this.loadBalance=n.atom.toLowerCase()=="yes"||n.atom.toLowerCase()=="on"||n.atom.toLowerCase()=="true":n.name.toUpperCase()=="FAILOVER"?this.failover=n.atom.toLowerCase()=="yes"||n.atom.toLowerCase()=="on"||n.atom.toLowerCase()=="true":n.name.toUpperCase()=="DESCRIPTION"?(s=new Gn,s.initFromNVPair(n),this.children.push(s)):ct.throwErr(ct.ERR_INVALID_CONNECT_STRING_SYNTAX);this.children.length==0&&ct.throwErr(ct.ERR_INVALID_CONNECT_STRING_SYNTAX)}toString(){let e=new String("");if(this.children.size()<1)return e;let t=new String("");for(let s=0;s<this.children.size();s++)t=this.children[s].toString(),t.equals("")||(e+=t);return e.equals("")&&this.sourceRoute&&(e+="(SOURCE_ROUTE=yes)"),e.equals("")&&!this.loadBalance&&(e+="(LOAD_BALANCE=no)"),e.equals("")&&!this.failover&&(e+="(FAILOVER=false)"),e.equals("")||(e="(DESCRIPTION_LIST="+e+")"),e}};_(H_,"DescriptionList");var F_=H_,v_=class v_{constructor(){this.CNdata=new Array}};_(v_,"ConnOption");var qn=v_,_r={DEBUG:!1,SR:"(SOURCE_ROUTE=yes)",HC:"(HOP_COUNT=0)",LB:"(LOAD_BALANCE=yes)",NFO:"(FAILOVER=false)",CD:"(CONNECT_DATA=",CONID:"(CONNECTION_ID="},JS={all:!0},K_=class K_ extends V_{constructor(){super()}async navigate(e){let t,s=0,n=!1;if(!this.host){s=1,this.host=lR.hostname();try{await QS.lookup(this.host,JS)}catch{this.host="localhost"}}if(e.getcurrentDescription()==null&&(e.newConnectionDescription(),n=!0),ER.isIP(this.host)){let i=new qn;i.hostname=this.host,i.port=this.port,i.protocol=this.prot,i.httpsProxy=this.httpsProxy,i.httpsProxyPort=this.httpsProxyPort,i.desc=e.getcurrentDescription(),i.CNdata.push(e.sBuf.join("")),i.CNdata.push(this.toString()),i.host=this.host,i.addr=this.addr,e.getcurrentDescription().addConnectOption(i)}else try{t=await QS.lookup(this.host,JS);for(let i in t){let a=new qn;a.hostname=this.host,a.port=this.port,a.protocol=this.prot,a.httpsProxy=this.httpsProxy,a.httpsProxyPort=this.httpsProxyPort,a.desc=e.getcurrentDescription(),a.CNdata.push(e.sBuf.join("")),s==1?a.CNdata.push("(address=(protocol="+this.prot+")(host="+this.host+")(port="+this.port+"))"):a.CNdata.push(this.toString()),a.host=t[i].address,a.addr=this.addr,e.getcurrentDescription().addConnectOption(a)}}catch{}n&&e.closeDescription()}addToString(e){let t=this.toString(),s=new Array;s=e.getcurrentDescription().getConnectOptions();for(let n=0;n<s.length;n++)s[n].done||s[n].CNdata.push(t)}};_(K_,"NavAddress");var wr=K_,W_=class W_ extends x_{constructor(){super(),this.activeChildren=new Array,this.sBuflength=0}async navigate(e){await this.navigate2(e,0)}async navigate2(e,t){if(t++,this.sBuflength=e.sBuf.length,e.sBuf.push("(ADDRESS_LIST="),this.sourceRoute){this.activeChildren=this.children,await this.activeChildren[0].navigate(e);for(let s=1;s<this.activeChildren.length;s++)this.activeChildren[s].addToString(e)}else{this.activeChildren=Mr.setActiveChildren(this.children,this.failover,this.loadBalance);for(let s=0;s<this.activeChildren.length;s++)this.getChildrenType(s)==1?await this.activeChildren[s].navigate2(e,t):await this.activeChildren[s].navigate(e)}this.closeNVPair(e),e.sBuf.length=this.sBuflength}addToString(e){let t=this.toString(),s=new Array;s=e.getcurrentDescription().getConnectOptions();for(let n=0;n<s.length;n++)s[n].done||s[n].CNdata.push(t)}getChildrenSize(){let e=0;for(let t=0;t<this.activeChildren.length;t++)if(this.getChildrenType(t)==1?e+=this.activeChildren[t].getChildrenSize():e++,this.sourceRoute)return e;return e}getChildrenType(e){return this.activeChildren[e].isS()}getChild(e){return this.children[e]}closeNVPair(e){let t=new Array,s=this.getChildrenSize();if(e.getcurrentDescription()!=null){t=e.getcurrentDescription().getConnectOptions();let n=0,i=null,a=null;for(let c=t.length-1;c>=0&&!t[c].done&&((t[c].hostname!=i||t[c].port!=a)&&n++,i=t[c].hostname,a=t[c].port,!(n>s));c--)this.sourceRoute&&(t[c].CNdata.push(_r.SR),t[c].CNdata.push(_r.HC),t[c].done=!0),t[c].CNdata.push(")")}}};_(W_,"NavAddressList");var Ur=W_,$_=class $_ extends b_{constructor(){super(),this.activeChildren=new Array,this.descProcessed=0}async navigate(e){e.sBuf.length=0,e.sBuf.push("(DESCRIPTION=");let t=e.newConnectionDescription();if(this.retryCount!=null&&(e.retryCount=this.getIntValue(this.retryCount,e.retryCount),t.retryCount=e.retryCount),this.delayInMillis!=-1&&(t.delayInMillis=this.delayInMillis),t.params=this.params,"connectTimeout"in this.params&&e.sBuf.push("(CONNECT_TIMEOUT="+this.params.connectTimeout+")"),"transportConnectTimeout"in this.params&&e.sBuf.push("(TRANSPORT_CONNECT_TIMEOUT="+this.params.transportConnectTimeout+")"),"recvTimeout"in this.params&&e.sBuf.push("(RECV_TIMEOUT="+this.params.recvTimeout+")"),"sdu"in this.params&&e.sBuf.push("(SDU="+this.params.sdu+")"),"expireTime"in this.params&&e.sBuf.push("(EXPIRE_TIME="+this.params.expireTime+")"),"enable"in this.params&&e.sBuf.push("(ENABLE="+this.params.enable+")"),("sslServerCertDN"in this.params||"sslServerDNMatch"in this.params||"walletLocation"in this.params)&&(e.sBuf.push("(SECURITY="),"sslServerCertDN"in this.params&&e.sBuf.push("(SSL_SERVER_CERT_DN="+this.params.sslServerCertDN+")"),"sslServerDNMatch"in this.params&&e.sBuf.push("(SSL_SERVER_DN_MATCH="+this.params.sslServerDNMatch+")"),"walletLocation"in this.params&&e.sBuf.push("(WALLET_LOCATION="+this.params.walletLocation+")"),e.sBuf.push(")")),"httpsProxyPort"in this.params&&e.sBuf.push("(HTTPS_PROXY_PORT="+this.params.httpsProxyPort+")"),"httpsProxy"in this.params&&e.sBuf.push("(HTTPS_PROXY="+this.params.httpsProxy+")"),this.failover||e.sBuf.push(_r.NFO),this.sourceRoute){this.activeChildren=this.children,await this.activeChildren[0].navigate(e);for(let s=1;s<this.activeChildren.length;s++)this.activeChildren[s].addToString(e);this.closeNVPair(e)}else{this.activeChildren=Mr.setActiveChildren(this.children,this.failover,this.loadBalance);for(let s=0;s<this.activeChildren.length;s++)await this.activeChildren[s].navigate(e);this.closeNVPair(e)}e.closeDescription()}closeNVPair(e){if(e.getcurrentDescription()==null)return;let t=new Array;t=e.getcurrentDescription().getConnectOptions();for(let s=0;s<t.length;++s){this.sourceRoute&&t[s].CNdata.push(_r.SR),this.connectData==null&&(this.connectData="(SERVICE_NAME=)");let n=`(CID=(PROGRAM=${M_.program})(HOST=${M_.hostName})(USER=${M_.userName}))`;t[s].CNdata.push(_r.CD),t[s].CNdata.push(this.connectData),t[s].CNdata.push(n),t[s].CNdata.push(")"),this.SID!=null&&(t[s].sid=this.SID),this.serviceName!=null&&(t[s].service_name=this.serviceName),this.instanceName!=null&&(t[s].instance_name=this.instanceName),t[s].CNdata.push(")"),t[s].done=!0}}getIntValue(e,t){try{return parseInt(e)}catch{return t}}};_($_,"NavDescription");var Gn=$_,Hn=class Hn extends F_{constructor(e=new Array,t=0,s=0){super(),this.activeChildren=e,this.descProcessed=t,this.done=s}async navigate(e){for(e.sBuf.push("(DESCRIPTION_LIST="),this.activeChildren=Hn.setActiveChildren(this.children,this.failover,this.loadBalance);this.descProcessed<this.activeChildren.length;)await this.activeChildren[this.descProcessed].navigate(e),this.descProcessed++}static setActiveChildren(e,t,s){let n,i=e.length,a=new Array,c=Math.floor(Math.random()*10),T=new Array(i).fill(!1);if(t)if(s)for(let E=0;E<i;E++){do n=Math.abs(Math.floor(Math.random()*10))%i;while(T[n]);T[n]=!0,a.push(e[n])}else a=e;else s?(n=Math.abs(c)%i,a.push(e[n])):a.push(e[0]);return a}};_(Hn,"NavDescriptionList");var Mr=Hn;ZS.exports={NavAddress:wr,NavAddressList:Ur,NavDescription:Gn,NavDescriptionList:Mr}});var rh=R((bL,sh)=>{"use strict";var{NavAddress:NR,NavAddressList:SR,NavDescription:hR,NavDescriptionList:AR}=eh(),{createNVPair:dR}=Br(),th=W(),j_=class j_{constructor(){this.cOpts=new Array}addConnectOption(e){this.cOpts.push(e)}getConnectOptions(){return this.cOpts}};_(j_,"ConnectDescription");var z_=j_,Q_=class Q_{constructor(){this.nextOptToTry=0,this.retryCount=0,this.lastRetryCounter=0,this.lastRetryConnectDescription=0,this.currentDescription=null,this.descriptionList=new Array,this.sBuf=new Array}hasMoreOptions(){let e=0;for(let t=0;t<this.descriptionList.length;++t)e+=this.descriptionList[t].getConnectOptions().length;return this.nextOptToTry<e}newConnectionDescription(){return this.currentDescription=new z_,this.currentDescription}getcurrentDescription(){return this.currentDescription}closeDescription(){this.descriptionList.push(this.currentDescription),this.currentDescription=null}async execute(e){e!=null&&this.retryCount==0&&e.retryCount>0&&(this.retryCount=e.retryCount);for(let t=this.lastRetryConnectDescription;t<this.descriptionList.length;t++){let s=this.descriptionList[t],n=new Array;n=s.getConnectOptions();let i=s.delayInMillis;e!=null&&(i==0||i==null)&&e.retryDelay>0&&(i=e.retryDelay*1e3);for(let a=this.lastRetryCounter;a<=this.retryCount;++a){for(;this.nextOptToTry<n.length;){let c=n[this.nextOptToTry];return this.lastRetryCounter=a,this.lastRetryConnectDescription=t,this.nextOptToTry++,c}this.nextOptToTry=0,i>0&&a<this.retryCount&&await pR(i)}this.lastRetryCounter=0}throw this.nextOptToTry=1e3,this.lastRetryCounter=1e3,new Error("All options tried")}};_(Q_,"ConnStrategy");var X_=Q_;function pR(r){return new Promise(e=>setTimeout(e,r))}_(pR,"sleep");async function mR(r){let e;typeof r=="string"?e=dR(r):e=r;let t=e.name.toUpperCase(),s=null;switch(t){case"ADDRESS":s=new NR;break;case"ADDRESS_LIST":s=new SR;break;case"DESCRIPTION":s=new hR;break;case"DESCRIPTION_LIST":s=new AR;break;default:th.throwErr(th.ERR_INVALID_CONNECT_STRING_PARAMETERS,`unknown top element ${t}`)}s.initFromNVPair(e);let n=new X_;return await s.navigate(n),n}_(mR,"createNode");sh.exports={createNode:mR}});var ah=R((kL,oh)=>{"use strict";var{lookup:fR}=require("dns").promises,$t=W(),ih=new RegExp("((?=(?<hostnames>(((\\[[A-z0-9:]+\\])|([A-z0-9][A-z0-9._-]+))[,]?)+)))\\k<hostnames>(:(?<port>\\d+)?)?","g"),PR=new RegExp("^(((?<protocol>[A-z0-9]+):)?//)?(?<hostinfo>("+ih.source+"(?=([,]|[;]|[/]|[:]|$))([,]|[;])?)+)(/(?<servicename>[A-z0-9][A-z0-9,-.]+)?)?(:(?<servermode>dedicated|shared|pooled))?(/(?<instance>[A-z0-9][A-z0-9]+))?$","ig"),nh='"',RR="=",IR="&",DR=["ENABLE","FAILOVER","LOAD_BALANCE","RECV_BUF_SIZE","SEND_BUF_SIZE","SDU","SOURCE_ROUTE","RETRY_COUNT","RETRY_DELAY","CONNECT_TIMEOUT","TRANSPORT_CONNECT_TIMEOUT","RECV_TIMEOUT"],Z_=class Z_{constructor(e){this.URL_PROPS_ALIAS=this.initializeUrlAlias();let t=e.indexOf("@");t!=-1?(this.url=e.substring(t+1),this.urlPrefix=e.substring(0,t+1)):(this.url=e,this.urlPrefix=""),this.resolvedUrl="",this.connectionProps=new Map,this.urlProps=new Map,this.lb=!1}async getResolvedUrl(){return await this.parse(),this.resolvedUrl}async parse(){let e=this.parseExtendedSettings(this.url);this.connectionProps.size===0&&this.urlProps.size===0&&(e=this.url),e.startsWith("(")?this.resolvedUrl=this.urlPrefix+e:this.resolvedUrl=this.urlPrefix+await this.resolveToLongURLFormat(e)}async resolveToLongURLFormat(e){let t=e.replace(/\s/g,""),s=0,n=null,i=null,a=null,c=null,T=null;for(let u of t.matchAll(PR))s=1,n=u.groups.protocol,i=u.groups.hostinfo,a=u.groups.servicename,c=u.groups.servermode,T=u.groups.instance;s||$t.throwErr($t.ERR_INVALID_EZCONNECT_SYNTAX,"input string not in easy connect format",t),n==null?e.includes("//")||(n="TCP"):n.toLowerCase()!="tcp"&&n.toLowerCase()!="tcps"&&$t.throwErr($t.ERR_INVALID_EZCONNECT_SYNTAX,"Unsupported protocol in thin mode",n);let E=this.urlProps.get("HTTPS_PROXY"),l=this.urlProps.get("HTTPS_PROXY_PORT"),h=await this.buildAddressList(i,n,E,l),d=this.urlProps.get("CONNECTION_ID_PREFIX"),A=[];return this.lb&&A.push("(LOAD_BALANCE=ON)"),A.push(this.buildDescriptionParams()),A.push(h),A.push(this.buildConnectData(a,c,T,d)),A.push(this.buildSecurityInfo(n)),`(DESCRIPTION=${A.join("")})`}buildConnectData(e,t,s,n){let i=this.urlProps.get("POOL_CONNECTION_CLASS"),a=this.urlProps.get("POOL_PURITY"),c=this.urlProps.get("SERVICE_TAG"),T=[];return e?T.push(`(SERVICE_NAME=${e})`):T.push("(SERVICE_NAME=)"),t&&T.push(`(SERVER=${t})`),s&&T.push(`(INSTANCE_NAME=${s})`),i&&T.push(`(POOL_CONNECTION_CLASS=${i})`),a&&T.push(`(POOL_PURITY=${a})`),c&&T.push(`(SERVICE_TAG=${c})`),n&&T.push(`(CONNECTION_ID_PREFIX=${n})`),`(CONNECT_DATA=${T.join("")})`}async buildAddressList(e,t,s,n){let i="",a=0,c=new Array,T="";s!=null&&(n!=null?T=`(HTTPS_PROXY=${s})(HTTPS_PROXY_PORT=${n})`:T=`(HTTPS_PROXY=${s})`),t==null&&(t="TCP");let E=0,l=e.split(";");for(let h in l){let d=0,A=new Array;for(let N of l[h].matchAll(ih)){let m=N.groups.hostnames.split(","),S=N.groups.port;S==null&&(S="1521");for(let I in m)A.push(this.getAddrStr(m[I],S,t,T)),i=m[I],d++}E+=d;let u=[];l.length>1&&d>1&&u.push("(LOAD_BALANCE=ON)"),u.push(A.join("")),l.length>1?c.push(`(ADDRESS_LIST=${u.join("")})`):c.push(u.join(""))}if(E==1){i=i.trim(),i.startsWith("[")&&i.endsWith("]")&&(i=i.substring(1,i.length-1));try{await fR(i),a++}catch{}a==0&&$t.throwErr($t.ERR_INVALID_EZCONNECT_SYNTAX,"could not resolve hostname",i)}return l.length<2&&E>1&&(this.lb=!0),c.join("")}getAddrStr(e,t,s,n){let i=e.trim();return i.startsWith("[")&&i.endsWith("]")&&(i=i.substring(1,i.length-1)),`(ADDRESS=(PROTOCOL=${s})(HOST=${i})(PORT=${t})${n})`}buildDescriptionParams(){if(this.urlProps.size===0)return"";let e=new Array;return this.urlProps.forEach(function(t,s){DR.includes(s)&&e.push(`(${s}=${t})`)}),e.join("")}buildSecurityInfo(e){let t=new Array;if(e!=null&&e.toLowerCase()=="tcps"){let s=this.urlProps.get("SSL_SERVER_DN_MATCH")||"TRUE",n=this.urlProps.get("SSL_SERVER_CERT_DN"),i=this.urlProps.get("MY_WALLET_DIRECTORY");t.push(`(SSL_SERVER_DN_MATCH=${s})`),n!=null&&t.push(`(SSL_SERVER_CERT_DN=${n}})`),i!=null&&t.push(`(MY_WALLET_DIRECTORY=${i})`)}return t.length===0?"":`(SECURITY=${t.join("")})`}parseExtendedSettings(e){let t=Array.from(e.trim()),s=this.findExtendedSettingPosition(t);return s==-1?e:(this.parseExtendedProperties(t,s+1),e.substring(0,s))}parseExtendedProperties(e,t){let s=null,n=null,i=new Array(e.length),a=0,c="";for(let T=t;T<e.length;T++)if(e[T].trim()!="")switch(e[T]){case nh:c=this.parseQuotedString(T,e,a,i),a=c[1],T=c[0];break;case RR:s!=null&&$t.throwErr($t.ERR_INVALID_EZCONNECT_SYNTAX,"unable to parse, invalid syntax",this.url),s=i.join("").substring(0,a).trim(),a=0;break;case IR:s==null&&$t.throwErr($t.ERR_INVALID_EZCONNECT_SYNTAX,"unable to parse, invalid syntax",this.url),n=i.join("").substring(0,a).trim(),this.addParam(s,n),s=null,n=null,a=0;break;default:i[a++]=e[T]}s!=null&&(n=i.join("").substring(0,a).trim(),this.addParam(s,n))}parseQuotedString(e,t,s,n){let i=e+1;for(;i<t.length;){let a=t[i];if(a==nh)return[i,s];n[s++]=a,i++}}addParam(e,t){let s=e.toLowerCase(),n=this.URL_PROPS_ALIAS.get(s);n!=null?this.urlProps.set(n,t):this.connectionProps.set(n,t)}findExtendedSettingPosition(e){let t=0;for(let s=0;s<e.length;s++)if(e[s]=="(")t++;else if(e[s]==")")t--;else if(e[s]=="?"&&t==0)return s;return-1}initializeUrlAlias(){let e=new Map;return e.set("enable","ENABLE"),e.set("failover","FAILOVER"),e.set("load_balance","LOAD_BALANCE"),e.set("recv_buf_size","RECV_BUF_SIZE"),e.set("send_buf_size","SEND_BUF_SIZE"),e.set("sdu","SDU"),e.set("source_route","SOURCE_ROUTE"),e.set("retry_count","RETRY_COUNT"),e.set("retry_delay","RETRY_DELAY"),e.set("https_proxy","HTTPS_PROXY"),e.set("https_proxy_port","HTTPS_PROXY_PORT"),e.set("connect_timeout","CONNECT_TIMEOUT"),e.set("transport_connect_timeout","TRANSPORT_CONNECT_TIMEOUT"),e.set("recv_timeout","RECV_TIMEOUT"),e.set("ssl_server_cert_dn","SSL_SERVER_CERT_DN"),e.set("ssl_server_dn_match","SSL_SERVER_DN_MATCH"),e.set("wallet_location","MY_WALLET_DIRECTORY"),e.set("pool_connection_class","POOL_CONNECTION_CLASS"),e.set("pool_purity","POOL_PURITY"),e.set("service_tag","SERVICE_TAG"),e.set("connection_id_prefix","CONNECTION_ID_PREFIX"),e}};_(Z_,"EZConnectResolver");var J_=Z_;oh.exports=J_});var lh=R((GL,Th)=>{"use strict";var{createNVPair:CR,findValue:gR}=Br(),Wn=require("fs"),ch=require("process"),OR=require("readline"),cr=W();function yR(r){let e=null,t=ch.env.TNS_ADMIN;if(r){if(e=r+"/tnsnames.ora",Wn.existsSync(e))return e;cr.throwErr(cr.ERR_TNS_NAMES_FILE_MISSING,r)}else return t?(e=t,e+="/tnsnames.ora",Wn.existsSync(e)||cr.throwErr(cr.ERR_TNS_NAMES_FILE_MISSING,t)):cr.throwErr(cr.ERR_NO_CONFIG_DIR),e}_(yR,"tnsnamesFilePath");var _h=0,tc=class tc{async initializeNlpa(e){let t=Wn.statSync(e);if(!(t.mtime-_h))return this.ht;let s=OR.createInterface({input:Wn.createReadStream(e),output:ch.stdout,terminal:!1});return this.ht=new Map,await _(async()=>{let i="";for await(let a of s)if(a.length!=0){if(a[0]=="#")continue;if(a[0]==" "||a[0]=="	"||a[0]==")"||a[0]=="("){if(a=a.replace(/\s+/g,""),a=this.checkNLPforComments(a),a.length==0)continue;i=i+a}else i.length==0?(a=this.checkNLPforComments(a),i=i+a):i.length!=0&&(this.addNLPListElement(i),i="",a=this.checkNLPforComments(a),i=i+a)}return i.length!=0&&(this.addNLPListElement(i),i=""),_h=t.mtime,this.ht},"start")()}checkNLPforComments(e){let t=new Array(e.length);for(let s=0;s<e.length;s++){let n=e[s];if(n=="#"){if(s!=0)break;return""}else t.push(n)}return t.join("")}addNLPListElement(e){let t=e.split(/\r?\n/).filter(s=>s);for(let s=0;s<t.length;s++){t[s].charAt(0)!="("&&(t[s]="("+t[s]+")");let n=CR(t[s]),a=n.name.toUpperCase();n.name=a;let c=a.split(",");for(let T=0;T<c.length;T++)this.ht.set(c[T],n)}}toString(){let e="";return this.ht.forEach(t=>{e=e+t.toString()+`
`}),e}findValueOf(e){let t=e.split("/");return gR(this.ht.get(t[0].toUpperCase()),t)}};_(tc,"NLParamParser");var ec=tc;Th.exports={NLParamParser:ec,tnsnamesFilePath:yR}});var oc=R((vL,Nh)=>{"use strict";var Ft=wS(),LR=VS(),BR=FS(),Q=or(),{createNode:YR}=rh(),De=W(),{findNVPairRecurse:wR,createNVPair:$n,findValue:zt}=Br(),{Buffer:Eh}=require("buffer"),UR=ah(),{NLParamParser:MR,tnsnamesFilePath:VR}=lh(),xR=require("process");async function bR(r){let e=await uh(r.connectString,r.configDir),t;typeof e=="string"?t=$n(e):t=e;let s=zt(t,["DESCRIPTION","CONNECT_DATA","SERVER"]),n=zt(t,["DESCRIPTION","CONNECT_DATA","POOL_CONNECTION_CLASS"]),i=zt(t,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"]),a=zt(t,["DESCRIPTION","CONNECT_DATA","POOL_PURITY"]);return[s,n,i,a]}_(bR,"getConnectionInfo");var FR=new MR;async function uh(r,e){let t=r.trim(),s=t;if(t.indexOf(")")==-1||t.indexOf("(")!=0)try{s=await new UR(t).getResolvedUrl()}catch(n){try{let i=VR(e);s=(await FR.initializeNlpa(i)).get(t.toUpperCase()),s||De.throwErr(De.ERR_TNS_ENTRY_NOT_FOUND,t,e?e+"/tnsnames.ora":xR.env.TNS_ADMIN+"/tnsnames.ora"),s=s.getListElement(0)}catch(i){throw t.indexOf(":")!=-1||t.indexOf("/")!=-1?n:i}}return s}_(uh,"resolveConnectStr");async function rc(r,e){let t=await uh(r,e);return YR(t)}_(rc,"resolveAddress");function sc(r,e,t,s,n){let i,a=new Promise((c,T)=>{e>2147483647&&(e=2147483647),i=setTimeout(()=>T(De.getErr(De.ERR_CONNECTION_TIMEDOUT,s.host,s.port,t,e/1e3,n)),e)});return Promise.race([r,a]).then(c=>(clearTimeout(i),c)).catch(c=>{throw clearTimeout(i),c})}_(sc,"timeout");var ic=class ic{constructor(){this.connected=!1,this.isBreak=!1,this.isReset=!1,this.breakPosted=!1}async getAddress(e,t){let s=await e.execute(t),n=this.sAtts?this.sAtts.uuid:null;this.sAtts=new BR(n),this.sAtts.setFrom(t),this.sAtts.setFrom(s.desc.params),await this.sAtts.prepare(s.protocol);let i=$n(s.CNdata.join("")),a=wR(i,"CONNECT_DATA"),c=`(CONNECTION_ID=${this.sAtts.connectionId})`,T=$n(c);return a.addListElement(T),this.cData=Eh.from(i.toString(),"ascii"),this.cDataNVPair=i,s}async transportConnect(e){e.protocol.toUpperCase()=="TCP"&&e.httpsProxy&&De.throwErr(De.ERR_INVALID_CONNECT_STRING_PARAMETERS,"https proxy requires protocol as","tcps "),e.protocol&&(e.protocol.toUpperCase()=="TCP"||e.protocol.toUpperCase()=="TCPS")?this.ntAdapter=new LR(this.sAtts.nt):De.throwErr(De.ERR_INVALID_CONNECT_STRING_PARAMETERS,e.protocol+" protocol not supported"),await this.ntAdapter.connect(e),this.ntAdapter.startRead(),this.sAtts.ntCha=this.ntAdapter.cha,this.sndDatapkt=new Ft.DataPacket(this.sAtts.largeSDU),this.rcvDatapkt=new Ft.DataPacket(this.sAtts.largeSDU)}_sendConnect(e){this._sendPacket(e.buf),e.overflow&&(this._send(e.connectData,0,e.connectDataLen),this.flush())}async connect2(e){if(this.sAtts.sdu?this.sAtts.sdu>Q.NSPABSSDULN?this.sAtts.sdu=Q.NSPABSSDULN:this.sAtts.sdu<Q.NSPMNSDULN&&(this.sAtts.sdu=Q.NSPMNSDULN):this.sAtts.sdu=Q.NSPDFSDULN,this.sAtts.transportConnectTimeout){let s=this.transportConnect(e);await sc(s,this.sAtts.transportConnectTimeout,"transportConnectTimeout",e,this.sAtts.connectionId)}else await this.transportConnect(e);let t=new Ft.ConnectPacket(this.cData,this.sAtts);for(this._sendConnect(t);;){let s=await this._recvPacket();if(s.type===Q.NSPTAC)break;if(s.type===Q.NSPTRF){this.refusePkt.overflow&&(await this._recvPacket(),this.refusePkt.dataBuf=this.rcvDatapkt.buf.subarray(this.rcvDatapkt.offset,this.rcvDatapkt.len).toString());let n=$n(this.refusePkt.dataBuf);this.refusePkt=null;let i=zt(n,["DESCRIPTION","ERR"]);i=="12514"?De.throwErr(De.ERR_INVALID_SERVICE_NAME,this.getOption(Q.SVCNAME),e.host,e.port,this.sAtts.connectionId):i=="12505"?De.throwErr(De.ERR_INVALID_SID,this.getOption(Q.SID),e.host,e.port,this.sAtts.connectionId):i?De.throwErr(De.ERR_CONNECTION_REFUSED,e.host,e.port,this.sAtts.connectionId,"ORA-"+i):De.throwErr(De.ERR_CONNECTION_REFUSED,e.host,e.port,this.sAtts.connectionId,"refused")}else if(s.type===Q.NSPTRS)(s.flags&Q.NSPFSRN)==Q.NSPFSRN&&(await this.ntAdapter.renegTLS(),this.ntAdapter.startRead()),this._sendConnect(t);else if(s.type===Q.NSPTRD){let n,i,a,c;this.redirectPkt.overflow&&(await this._recvPacket(),this.redirectPkt.dataBuf=this.rcvDatapkt.buf.subarray(this.rcvDatapkt.offset,this.rcvDatapkt.len)),this.redirectPkt.flags&Q.NSPFRDS?(n=this.redirectPkt.dataBuf.indexOf("\0",0,"ascii"),i=this.redirectPkt.dataBuf.toString("ascii",0,n),c=this.redirectPkt.dataBuf.subarray(n+1,this.redirectPkt.dataLen)):(i=this.redirectPkt.dataBuf.toString("ascii"),c=this.cData),a=await rc(i);let T=e.host;if(e=await a.execute(),e.desc&&this.sAtts.setFrom(e.desc.params),e.originHost=T,this.redirectPkt=null,this.ntAdapter.disconnect(Q.NSFIMM),this.sAtts.transportConnectTimeout){let E=this.transportConnect(e);await sc(E,this.sAtts.transportConnectTimeout,"transportConnectTimeout",e,this.sAtts.connectionId)}else await this.transportConnect(e);t=new Ft.ConnectPacket(c,this.sAtts,Q.NSPFRDR),this.sndDatapkt=new Ft.DataPacket(this.sAtts.largeSDU),this._sendConnect(t)}}return this.connected=!0,this.cData=null,this.sndDatapkt=new Ft.DataPacket(this.sAtts.largeSDU),this.sndDatapkt.createPacket(Q.NSPDADAT),this.sndDatapkt.offset=this.sndDatapkt.dataPtr,this.sndDatapkt.len=this.sndDatapkt.bufLen,this.markerPkt=new Ft.MarkerPacket(this.sAtts.largeSDU),this.controlPkt=new Ft.ControlPacket,this.ntAdapter.largeSDU=this.sAtts.largeSDU,this.sAtts.nt.wallet=null,this.sAtts.nt.walletPassword=null,!0}async connect1(e,t,s){let n,i;do try{if(this.sAtts.connectTimeout){let a=this.connect2(e);n=await sc(a,this.sAtts.connectTimeout,"connectTimeout",e,this.sAtts.connectionId)}else n=await this.connect2(e)}catch(a){a.message.startsWith("NJS-510")&&(this.ntAdapter.connected=!0),this.ntAdapter&&(this.ntAdapter.disconnect(Q.NSFIMM),this.ntAdapter=null),n=!1,i=a;try{e=await this.getAddress(t,s)}catch{break}}while(!n);if(!n)throw i}_processPacket(e){switch(e.type){case Q.NSPTDA:this.rcvDatapkt.fromPacket(e);break;case Q.NSPTMK:this.markerPkt.fromPacket(e,this);break;case Q.NSPTCNL:this.controlPkt.fromPacket(e);break;case Q.NSPTAC:Ft.AcceptPacket(e,this.sAtts);break;case Q.NSPTRF:this.refusePkt=new Ft.RefusePacket(e);break;case Q.NSPTRS:break;case Q.NSPTRD:this.redirectPkt=new Ft.RedirectPacket(e);break;default:De.throwErr(De.ERR_CONNECTION_INVALID_PACKET)}}async _recvPacket(){for(;;){let e=await this.ntAdapter.receive();if(!e)break;if(this._processPacket(e),e.type!==Q.NSPTCNL)return e}}_sendPacket(e){this.ntAdapter.send(e)}sendBreak(){if(!this.isBreak){if(!this.connected){this.isBreak=!0,this.breakPosted=!0;return}this.isBreak=!0,this.markerPkt.prepare(Q.NSPMKTD1,Q.NIQIMARK),this._sendPacket(this.markerPkt.buf)}}async reset(){for(this.breakPosted&&(this.markerPkt.prepare(Q.NSPMKTD1,Q.NIQBMARK),this._sendPacket(this.markerPkt.buf),this.breakPosted=!1),this.markerPkt.prepare(Q.NSPMKTD1,Q.NIQRMARK),this._sendPacket(this.markerPkt.buf);!this.isReset;)await this._recvPacket();this.sndDatapkt.dataPtr=this.sndDatapkt.dataLen=Q.NSPDADAT,this.sndDatapkt.offset=this.sndDatapkt.dataPtr,this.sndDatapkt.len=this.sndDatapkt.bufLen,this.isBreak=this.isReset=!1}async recvPacket(){return await this._recvPacket()}syncRecvPacket(){for(;this.ntAdapter.packets.length>0;){let e=this.ntAdapter.syncReceive();if(!e)break;if(this._processPacket(e),e.type!==Q.NSPTCNL)return e}}_send(e,t,s){if(this.isBreak)return;let n=0;for(this.sndDatapkt.dataLen=this.sndDatapkt.offset,(this.sndDatapkt.dataLen<this.sndDatapkt.bufLen||!this.sndDatapkt.bufLen)&&(n=this.sndDatapkt.fillBuf(e,t,s),s-=n,t+=n,this.sndDatapkt.offset=this.sndDatapkt.dataLen);s;){if(this._sendPacket(this.sndDatapkt.dataBuf),this.isBreak)return;this.sndDatapkt.dataLen=this.sndDatapkt.dataPtr,this.sndDatapkt.offset=this.sndDatapkt.dataPtr,n=this.sndDatapkt.fillBuf(e,t,s),s-=n,t+=n,this.sndDatapkt.offset=this.sndDatapkt.dataLen}}flush(){this.isBreak||(this.sndDatapkt.dataLen=this.sndDatapkt.offset,this.sndDatapkt.prepare2Send(),this._sendPacket(Eh.from(this.sndDatapkt.dataBuf)),this.sndDatapkt.dataLen=this.sndDatapkt.dataPtr,this.sndDatapkt.offset=this.sndDatapkt.dataPtr)}async connect(e){let t=e.connectString?e.connectString:e.connectionString,s=await rc(t,e.configDir),n;try{n=await this.getAddress(s,e)}catch(i){i.message=="All options tried"?De.throwErr(De.ERR_INVALID_CONNECT_STRING_PARAMETERS,"Ensure the ADDRESS parameters have been entered correctly, the most likely incorrect parameter is the host name"):De.throwErr(De.ERR_INVALID_CONNECT_STRING_PARAMETERS,i.message)}await this.connect1(n,s,e)}disconnect(e){this.connected&&(e!=Q.NSFIMM&&!this.ntAdapter.err&&(this.sndDatapkt.dataLen=this.sndDatapkt.offset,this.sndDatapkt.prepare2Send(Q.NSPDAFEOF),this._sendPacket(this.sndDatapkt.dataBuf)),this.ntAdapter.disconnect(e),this.ntAdapter=null,this.connected=!1)}getOption(e){switch(e){case Q.NS_MOREDATA:return this.ntAdapter.packets.length>0;case Q.SVCNAME:return zt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVICE_NAME"]);case Q.SID:return zt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SID"]);case Q.SERVERTYPE:return zt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","SERVER"]);case Q.REMOTEADDR:return this.ntAdapter?this.ntAdapter.getOption(e):null;case Q.CONNCLASS:return zt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","POOL_CONNECTION_CLASS"]);case Q.PURITY:return zt(this.cDataNVPair,["DESCRIPTION","CONNECT_DATA","POOL_PURITY"]);case Q.HEALTHCHECK:return this.connected&&this.ntAdapter.connected&&!this.ntAdapter.err;default:De.throwErr(De.ERR_INTERNAL,"getOption not supported for opcode "+e)}}recvInbandNotif(){let e=0;if(this.controlPkt.errno)return e=this.controlPkt.errno,e;if(this.getOption(Q.HEALTHCHECK))if(this.getOption(Q.NS_MOREDATA)){let t=this.ntAdapter.syncReceive();return t.type==Q.NSPTCNL?(this.controlPkt.fromPacket(t),e=this.controlPkt.errno,e):(this.ntAdapter.packets.unshift(t),0)}else return 0;else return De.ERR_CONNECTION_CLOSED}};_(ic,"NetworkSession");var nc=ic;Nh.exports={NetworkSession:nc,resolveAddress:rc,getConnectionInfo:bR}});var Sh=R((WL,_c)=>{"use strict";var{Buffer:kR}=require("buffer"),st=ot(),qR=ar(),GR=new RegExp('(?<=:)\\s*((?:".*?")|(?:[\\p{L}][\\p{L}\\p{Nd}_\\$#]*)|\\p{Nd}+)',"gu"),HR=/(?<=\bRETURN(?:ING)?\b)/si,vR=/(?<=\bINTO\b)/gsi,KR=/--.*/g,WR=/\/\*.*?\*\//sg,$R=/'.*?'/sg,cc=class cc{constructor(e,t=!1){this.bindName=e,this.isReturnBind=t,this.maxSize=0,this.numElements=0,this.maxArraySize=0,this.type=null,this.isArray=!1,this.dir=st.BIND_IN,this.bindVar=null}};_(cc,"BindInfo");var Vr=cc;_c.exports.BindInfo=Vr;var zn=class zn{constructor(){this.sql="",this.sqlBytes=[],this.sqlLength=0,this.cursorId=0,this.requiresDefine=!1,this.isQuery=!1,this.isPlSql=!1,this.isDml=!1,this.isDdl=!1,this.isReturning=!1,this.bindInfoList=[],this.queryVars=[],this.bindInfoDict=new Map,this.requiresFullExecute=!1,this.noPrefetch=!1,this.returnToCache=!1,this.numColumns=0,this.lastRowIndex,this.lastRowid,this.moreRowsToFetch=!0,this.inUse=!1,this.bufferRowIndex=0,this.bufferRowCount=0,this.statementType=st.STMT_TYPE_UNKNOWN}_copy(){let e=new zn;e.sql=this.sql,e.sqlBytes=this.sqlBytes,e.sqlLength=this.sqlLength,e.isQuery=this.isQuery,e.isPlSql=this.isPlSql,e.isDml=this.isDml,e.isDdl=this.isDdl,e.isReturning=this.isReturning,e.bindInfoList=[];for(let s of this.bindInfoList){let n=new Vr(s.bindName,s.isReturnBind);e.bindInfoList.push(n)}let t=e.bindInfoDict=new Map;for(let s of e.bindInfoList)t.has(s.bindName)?t.get(s.bindName).push(s):t.set(s.bindName,[s]);return e.returnToCache=!1,e}_determineStatementType(e){e=qR.cleanSql(e);let t=e.trim().trimStart("(").substring(0,10).split(" ");if(t.length>0){let s=t[0].toUpperCase();["DECLARE","BEGIN","CALL"].includes(s)?(this.isPlSql=!0,s==="DECLARE"?this.statementType=st.STMT_TYPE_DECLARE:s==="BEGIN"?this.statementType=st.STMT_TYPE_BEGIN:s==="CALL"&&(this.statementType=st.STMT_TYPE_CALL)):["SELECT","WITH"].includes(s)?(this.isQuery=!0,s==="SELECT"&&(this.statementType=st.STMT_TYPE_SELECT)):["INSERT","UPDATE","DELETE","MERGE"].includes(s)?(this.isDml=!0,s==="INSERT"?this.statementType=st.STMT_TYPE_INSERT:s==="UPDATE"?this.statementType=st.STMT_TYPE_UPDATE:s==="DELETE"?this.statementType=st.STMT_TYPE_DELETE:s==="MERGE"&&(this.statementType=st.STMT_TYPE_MERGE)):["CREATE","ALTER","DROP","TRUNCATE"].includes(s)?(this.isDdl=!0,s==="CREATE"?this.statementType=st.STMT_TYPE_CREATE:s==="ALTER"?this.statementType=st.STMT_TYPE_ALTER:s==="DROP"&&(this.statementType=st.STMT_TYPE_DROP)):s==="COMMIT"?this.statementType=st.STMT_TYPE_COMMIT:s==="ROLLBACK"?this.statementType=st.STMT_TYPE_ROLLBACK:s==="MERGE"?this.statementType=st.STMT_TYPE_MERGE:this.statementType=st.STMT_TYPE_UNKNOWN}}_prepare(e){this.sql=e,this.sqlBytes=kR.from(this.sql,"utf8"),this.sqlLength=this.sqlBytes.length,e=e.replace($R,"'S'"),e=e.replace(KR,""),e=e.replace(WR,""),this._determineStatementType(e);let t;if(this.isQuery||this.isDml||this.isPlSql){let s=e;if(this.isDml){let n,i=-1,a=e.search(HR),c=vR;for(;(n=c.exec(e.slice(a)))!=null;)i=n.index,c.lastIndex=n.index+1;a>-1&&i>-1&&(i=a+i,s=e.slice(0,i),t=e.slice(i))}this._addBinds(s,!1),t&&(this.isReturning=!0,this._addBinds(t,!0))}}_addBinds(e,t){let s=[...e.matchAll(GR)],n;s.forEach(i=>{if(i[0].startsWith('"')&&i[0].endsWith('"')?n=i[0].substring(1,i[0].length-1):n=i[0].trim().toUpperCase(),this.isPlSql&&this.bindInfoDict.has(n))return;let a=new Vr(n,t);this.bindInfoList.push(a),this.bindInfoDict.has(a.bindName)?this.bindInfoDict.get(a.bindName).push(a):this.bindInfoDict.set(a.bindName,[a])})}_setVariable(e,t){(t.maxSize!==e.maxSize||t.dir!==e.dir||t.isArray!==e.isArray||t.values.length>e.numElements||t.type!=e.type||t.maxArraySize!=e.maxArraySize)&&(e.isArray=t.isArray,e.numElements=t.values.length,e.maxSize=t.maxSize,e.type=t.type,e.dir=t.dir,e.maxArraySize=t.maxArraySize,this.requiresFullExecute=!0),e.bindVar=t}};_(zn,"Statement");var ac=zn;_c.exports.Statement=ac});var Ah=R((zL,hh)=>{"use strict";var{Buffer:Se}=require("buffer"),kt=require("crypto"),Xn="aes-256-cbc",zR=Se.from([0,1]),lc=class lc{_decrypt(e,t){let s=Se.alloc(16,0),n=kt.createDecipheriv(Xn,e,s);n.setAutoPadding(!1);let i=n.update(t);return i=Se.concat([i,n.final()]),i}_encrypt(e,t,s){let n=16,i=Se.alloc(n,0),a=n-t.length%n,c=Se.alloc(a,a);a>0&&(s?t+=Se.alloc(a):t=Se.concat([t,c]));let T=kt.createCipheriv(Xn,e,i),E=T.update(t);return E=Se.concat([E,T.final()]),s||(E=E.slice(0,t.length)),t.fill(0),E}_setEncryptedPasswordBuffers(e,t,s,n){let i=Se.alloc(16);kt.randomFillSync(i,0,16);let a=Se.concat([i,e]);if(n.encodedPassword=this._encrypt(s,a),a.fill(0),n.encodedPassword=n.encodedPassword.slice().toString("hex").toUpperCase(),t){let c=Se.concat([i,t]);n.encodedNewPassword=this._encrypt(s,c),c.fill(0),n.encodedNewPassword=n.encodedNewPassword.slice().toString("hex").toUpperCase()}e.fill(0),t&&t.fill(0)}updateVerifierData(e,t,s,n,i){let a=32,c="sha512",T=Se.from(e.AUTH_VFR_DATA,"hex"),E=Se.from(e.AUTH_SESSKEY,"hex"),l=Number(e.AUTH_PBKDF2_VGEN_COUNT),h=Se.from(t,"utf8"),d,A;if(n){Xn="aes-192-cbc",a=24,c="sha1";let f=kt.createHash(c);f.update(h),f.update(T);let g=f.digest();d=Se.alloc(g.length+4),g.copy(d,0,0,g.length)}else{Xn="aes-256-cbc";let f=Se.from("AUTH_PBKDF2_SPEEDY_KEY","utf8"),g=Se.concat([T,f]);A=kt.pbkdf2Sync(h,g,l,64,"sha512");let w=kt.createHash(c);w.update(A),w.update(T),d=w.digest().slice(0,a)}let u;s&&(u=Se.from(s,"utf8"));let N=this._decrypt(d,E),m=Se.alloc(N.length);kt.randomFillSync(m);let S=this._encrypt(d,m);if(N.length===48){i.sessionKey=S.slice().toString("hex").toUpperCase().slice(0,96);let f=Se.alloc(24);for(let V=16;V<=40;V++)f[V-16]=N[V]^m[V];let g=kt.createHash("md5").update(f.subarray(0,16)).digest(),w=kt.createHash("md5").update(f.subarray(16)).digest();i.comboKey=Se.concat([g,w]).slice(0,a)}else{i.sessionKey=S.slice().toString("hex").toUpperCase().slice(0,64);let f=Se.from(e.AUTH_PBKDF2_CSK_SALT,"hex");l=Number(e.AUTH_PBKDF2_SDER_COUNT);let w=Se.concat([m.slice(0,a),N.slice(0,a)]).toString("hex").toUpperCase(),V=Se.from(w,"utf8");i.comboKey=kt.pbkdf2Sync(V,f,l,a,"sha512")}let I=Se.alloc(16);if(!n){kt.randomFillSync(I,0,16);let f=Se.concat([I,A]);i.speedyKey=this._encrypt(i.comboKey,f),i.speedyKey=i.speedyKey.slice(0,80).toString("hex").toUpperCase()}this._setEncryptedPasswordBuffers(h,u,i.comboKey,i)}getEncryptedJSWPData(e,t){let s=this._encrypt(e,t,!0);return s=s.slice().toString("hex").toUpperCase(),s=Se.concat([s,zR]),s}updatePasswordsWithComboKey(e,t,s,n){let i=Se.from(e,"utf8"),a;t&&(a=Se.from(t,"utf8")),this._setEncryptedPasswordBuffers(i,a,s,n)}};_(lc,"EncryptDecrypt");var Tc=lc,XR=new Tc;hh.exports=XR});var Ph=R((jL,fh)=>{"use strict";var{Buffer:Ec}=require("buffer"),ce=Be(),dh=W(),ph=require("process"),uc=Ah(),jR=bt(),mh=ar(),jn=mh.CLIENT_INFO,QR=require("crypto"),Sc=class Sc extends jR{constructor(e,t){super(e),this.functionCode=ce.TNS_FUNC_AUTH_PHASE_ONE,this.messageType=ce.TNS_MSG_TYPE_FUNCTION,this.sessionData={},this.conn=e,this.sessionKey="",this.encodedPassword="",this.changePassword=!1,Object.defineProperty(this,"password",{enumerable:!1,value:t.password}),this.username=t.user,this.username===void 0?this.username="":this.username=this.username.trim(),this.schemaUser="",this.proxyUser="",this.proxyStatus=-1,this.username.length!==0&&(this.proxyStatusObj=mh.checkProxyUserValidity(this.username),this.proxyStatusObj.status===0&&(this.proxyStatus=0,this.proxyUser=this.proxyStatusObj.proxyUser,this.schemaUser=this.proxyStatusObj.schemaUser,this.username=this.proxyUser)),this.newPassword=t.newPassword,t.changePassword&&(this.changePassword=!0,this.functionCode=ce.TNS_FUNC_AUTH_PHASE_TWO),this.username?this.userByteLen=Ec.byteLength(this.username):this.userByteLen=0,this.token=t.token,this.token&&(this.functionCode=ce.TNS_FUNC_AUTH_PHASE_TWO),this.privateKey=t.privateKey,this.privateKey&&(this.privateKey=`-----BEGIN PRIVATE KEY-----
`+this.privateKey,this.privateKey=this.privateKey+`
-----END PRIVATE KEY-----`),this.serviceName=this.conn.serviceName,this.remoteAddress=this.conn.remoteAddress,this.setAuthMode()}setAuthMode(){this.newPassword||(this.authMode=ce.TNS_AUTH_MODE_LOGON),this.conn.privilege&ce.SYSDBA&&(this.authMode|=ce.TNS_AUTH_MODE_SYSDBA),this.conn.privilege&ce.SYSOPER&&(this.authMode|=ce.TNS_AUTH_MODE_SYSOPER),this.conn.privilege&ce.SYSASM&&(this.authMode|=ce.TNS_AUTH_MODE_SYSASM),this.conn.privilege&ce.SYSBKP&&(this.authMode|=ce.TNS_AUTH_MODE_SYSBKP),this.conn.privilege&ce.SYSDG&&(this.authMode|=ce.TNS_AUTH_MODE_SYSDGD),this.conn.privilege&ce.SYSKM&&(this.authMode|=ce.TNS_AUTH_MODE_SYSKMT),this.conn.privilege&ce.SYSRAC&&(this.authMode|=ce.TNS_AUTH_MODE_SYSRAC),this.privateKey&&(this.authMode|=ce.TNS_AUTH_MODE_IAM_TOKEN),this.newPassword&&(this.authMode|=ce.TNS_AUTH_MODE_CHANGE_PASSWORD),this.token||(this.authMode|=ce.TNS_AUTH_MODE_WITH_PASSWORD)}getAlterTimezoneStatement(){let e,t;if(ph.env.ORA_SDTZ)t=ph.env.ORA_SDTZ;else{let n=new Date().getTimezoneOffset(),i=Math.trunc(n/60),a=Math.abs((n-i*60)%60);i<0?(e="+",i=-i):e="-",i=i.toLocaleString("en-US",{minimumIntegerDigits:2}),t=`${e}${i}:${a}`}return`ALTER SESSION SET TIME_ZONE ='${t}'\0`}encode(e){let t=!1;if(this.writeFunctionHeader(e),this.userByteLen>0?e.writeUInt8(1):e.writeUInt8(0),e.writeUB4(this.userByteLen),e.writeUB4(this.authMode),this.functionCode===ce.TNS_FUNC_AUTH_PHASE_ONE)e.writeUInt8(1),e.writeUB4(5),e.writeUInt8(0),e.writeUInt8(1),this.userByteLen>0&&e.writeBytesWithLength(Ec.from(this.username)),e.writeKeyValue("AUTH_TERMINAL","unknown"),e.writeKeyValue("AUTH_PROGRAM_NM",jn.program),e.writeKeyValue("AUTH_MACHINE",jn.hostName),e.writeKeyValue("AUTH_PID",jn.pid),e.writeKeyValue("AUTH_SID",jn.userName);else{let s=0;if(this.changePassword?(uc.updatePasswordsWithComboKey(this.password,this.newPassword,this.conn.comboKey,this),s=2):(s=4,this.token?s+=1:(s+=2,this.verifierType===ce.TNS_VERIFIER_TYPE_11G_1||this.verifierType===ce.TNS_VERIFIER_TYPE_11G_2?t=!0:this.verifierType!==ce.TNS_VERIFIER_TYPE_12C?dh.throwErr(dh.ERR_UNSUPPORTED_VERIFIER_TYPE,this.verifierType.toString(16)):s+=1,uc.updateVerifierData(this.sessionData,this.password,this.newPassword,t,this),this.conn.comboKey=this.comboKey,this.newPassword&&(s+=1)),this.privateKey&&(s+=2),this.conn.connClass&&(s+=1),this.conn.purity&&(s+=1),this.conn.jdwpData&&(this.encryptedJDWPData=uc.getEncryptedJSWPData(this.sessionKey,this.conn.jdwpData),s+=1),this.schemaUser.length!==0&&(s+=1)),e.writeUInt8(1),e.writeUB4(s),e.writeUInt8(1),e.writeUInt8(1),this.userByteLen>0&&e.writeBytesWithLength(Ec.from(this.username)),this.token?e.writeKeyValue("AUTH_TOKEN",this.token):this.changePassword||(e.writeKeyValue("AUTH_SESSKEY",this.sessionKey,1),t||e.writeKeyValue("AUTH_PBKDF2_SPEEDY_KEY",this.speedyKey)),this.changePassword||(e.writeKeyValue("SESSION_CLIENT_CHARSET","873"),e.writeKeyValue("SESSION_CLIENT_DRIVER_NAME",ce.DRIVER_NAME),e.writeKeyValue("SESSION_CLIENT_VERSION",ce.CLIENT_VERSION.toString()),e.writeKeyValue("AUTH_ALTER_SESSION",this.getAlterTimezoneStatement(),1)),this.encodedPassword&&e.writeKeyValue("AUTH_PASSWORD",this.encodedPassword),this.proxyStatus===0&&e.writeKeyValue("PROXY_CLIENT_NAME",this.schemaUser),this.encodedNewPassword&&e.writeKeyValue("AUTH_NEWPASSWORD",this.encodedNewPassword),this.conn.connClass&&e.writeKeyValue("AUTH_KPPL_CONN_CLASS",this.conn.connClass),this.conn.purity&&e.writeKeyValue("AUTH_KPPL_PURITY",""+this.conn.purity),this.privateKey){let a="date: "+new Date().toGMTString()+`
(request-target): `+this.serviceName+`
host: `+this.remoteAddress,c=QR.createSign("RSA-SHA256").update(a).sign(this.privateKey,"base64");e.writeKeyValue("AUTH_HEADER",a),e.writeKeyValue("AUTH_SIGNATURE",c)}this.conn.jdwpData&&e.writeKeyValue("AUTH_ORA_DEBUG_JDWP",this.encryptedJDWPData)}}processReturnParameter(e){let t=e.readUB2();for(let s=0;s<t;s++){e.skipUB4();let n=e.readStr(ce.CSFRM_IMPLICIT),i="";e.readUB4()>0&&(i=e.readStr(ce.CSFRM_IMPLICIT));let c=e.readUB4();n==="AUTH_VFR_DATA"&&(this.verifierType=c),this.sessionData[n]=i}if(this.functionCode===ce.TNS_FUNC_AUTH_PHASE_ONE)this.functionCode=ce.TNS_FUNC_AUTH_PHASE_TWO;else{let s,n,i,a,c;this.conn.sessionID=this.sessionData.AUTH_SESSION_ID,this.conn.serialNum=this.sessionData.AUTH_SERIAL_NUM;let T=Number(this.sessionData.AUTH_VERSION_NO);s=T>>24&255,e.caps.ttcFieldVersion>=ce.TNS_CCAP_FIELD_VERSION_18_1_EXT_1?(n=T>>16&255,i=T>>12&15,a=T>>4&255,c=T&15):(n=T>>20&15,i=T>>12&255,a=T>>8&15,c=T&255),this.conn.serverVersionString=s+"."+n+"."+i+"."+a+"."+c,this.conn.serverVersion=s*1e8+n*1e6+i*1e4+a*100+c*1}}};_(Sc,"AuthMessage");var Nc=Sc;fh.exports=Nc});var Ih=R((JL,Rh)=>{"use strict";var JR=bt(),ZR=Be(),Ac=class Ac extends JR{constructor(e){super(e),this.functionCode=ZR.TNS_FUNC_COMMIT}encode(e){this.writeFunctionHeader(e)}};_(Ac,"CommitMessage");var hc=Ac;Rh.exports=hc});var Ch=R((e0,Dh)=>{"use strict";var o=Be(),eI=bt(),pc=class pc extends eI{processMessage(e){for(;e.readUInt16BE()!==0;)e.readUInt16BE()!==0&&e.skipBytes(4)}encode(e){e.writeUInt8(o.TNS_MSG_TYPE_DATA_TYPES),e.writeUInt16LE(o.TNS_CHARSET_UTF8),e.writeUInt16LE(o.TNS_CHARSET_UTF8),e.writeUInt8(o.TNS_ENCODING_MULTI_BYTE|o.TNS_ENCODING_CONV_LENGTH),e.writeBytesWithLength(e.caps.compileCaps),e.writeBytesWithLength(e.caps.runtimeCaps);for(let t of tI)e.writeUInt16BE(t[0]),e.writeUInt16BE(t[1]),e.writeUInt16BE(t[2]),e.writeUInt16BE(0);e.writeUInt16BE(0)}};_(pc,"DataTypeMessage");var dc=pc,tI=[[o.TNS_DATA_TYPE_VARCHAR,o.TNS_DATA_TYPE_VARCHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_NUMBER,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_LONG,o.TNS_DATA_TYPE_LONG,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DATE,o.TNS_DATA_TYPE_DATE,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_RAW,o.TNS_DATA_TYPE_RAW,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_LONG_RAW,o.TNS_DATA_TYPE_LONG_RAW,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UB2,o.TNS_DATA_TYPE_UB2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UB4,o.TNS_DATA_TYPE_UB4,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SB1,o.TNS_DATA_TYPE_SB1,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SB2,o.TNS_DATA_TYPE_SB2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SB4,o.TNS_DATA_TYPE_SB4,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SWORD,o.TNS_DATA_TYPE_SWORD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UWORD,o.TNS_DATA_TYPE_UWORD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PTRB,o.TNS_DATA_TYPE_PTRB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PTRW,o.TNS_DATA_TYPE_PTRW,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TIDDEF,o.TNS_DATA_TYPE_TIDDEF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ROWID,o.TNS_DATA_TYPE_ROWID,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AMS,o.TNS_DATA_TYPE_AMS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BRN,o.TNS_DATA_TYPE_BRN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CWD,o.TNS_DATA_TYPE_CWD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_NEW_OAC,o.TNS_DATA_TYPE_NEW_OAC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OER8,o.TNS_DATA_TYPE_OER8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FUN,o.TNS_DATA_TYPE_FUN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AUA,o.TNS_DATA_TYPE_AUA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RXH7,o.TNS_DATA_TYPE_RXH7,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_NA6,o.TNS_DATA_TYPE_NA6,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BRP,o.TNS_DATA_TYPE_BRP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BRV,o.TNS_DATA_TYPE_BRV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KVA,o.TNS_DATA_TYPE_KVA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CLS,o.TNS_DATA_TYPE_CLS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CUI,o.TNS_DATA_TYPE_CUI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DFN,o.TNS_DATA_TYPE_DFN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DQR,o.TNS_DATA_TYPE_DQR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSC,o.TNS_DATA_TYPE_DSC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_EXE,o.TNS_DATA_TYPE_EXE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FCH,o.TNS_DATA_TYPE_FCH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_GBV,o.TNS_DATA_TYPE_GBV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_GEM,o.TNS_DATA_TYPE_GEM,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_GIV,o.TNS_DATA_TYPE_GIV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OKG,o.TNS_DATA_TYPE_OKG,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_HMI,o.TNS_DATA_TYPE_HMI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_INO,o.TNS_DATA_TYPE_INO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_LNF,o.TNS_DATA_TYPE_LNF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ONT,o.TNS_DATA_TYPE_ONT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OPE,o.TNS_DATA_TYPE_OPE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OSQ,o.TNS_DATA_TYPE_OSQ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SFE,o.TNS_DATA_TYPE_SFE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SPF,o.TNS_DATA_TYPE_SPF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_VSN,o.TNS_DATA_TYPE_VSN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UD7,o.TNS_DATA_TYPE_UD7,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSA,o.TNS_DATA_TYPE_DSA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PIN,o.TNS_DATA_TYPE_PIN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PFN,o.TNS_DATA_TYPE_PFN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PPT,o.TNS_DATA_TYPE_PPT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_STO,o.TNS_DATA_TYPE_STO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ARC,o.TNS_DATA_TYPE_ARC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_MRS,o.TNS_DATA_TYPE_MRS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_MRT,o.TNS_DATA_TYPE_MRT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_MRG,o.TNS_DATA_TYPE_MRG,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_MRR,o.TNS_DATA_TYPE_MRR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_MRC,o.TNS_DATA_TYPE_MRC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_VER,o.TNS_DATA_TYPE_VER,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_LON2,o.TNS_DATA_TYPE_LON2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_INO2,o.TNS_DATA_TYPE_INO2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ALL,o.TNS_DATA_TYPE_ALL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UDB,o.TNS_DATA_TYPE_UDB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQI,o.TNS_DATA_TYPE_AQI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ULB,o.TNS_DATA_TYPE_ULB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ULD,o.TNS_DATA_TYPE_ULD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SID,o.TNS_DATA_TYPE_SID,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_NA7,o.TNS_DATA_TYPE_NA7,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AL7,o.TNS_DATA_TYPE_AL7,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_K2RPC,o.TNS_DATA_TYPE_K2RPC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XDP,o.TNS_DATA_TYPE_XDP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OKO8,o.TNS_DATA_TYPE_OKO8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UD12,o.TNS_DATA_TYPE_UD12,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AL8,o.TNS_DATA_TYPE_AL8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_LFOP,o.TNS_DATA_TYPE_LFOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FCRT,o.TNS_DATA_TYPE_FCRT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DNY,o.TNS_DATA_TYPE_DNY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OPR,o.TNS_DATA_TYPE_OPR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PLS,o.TNS_DATA_TYPE_PLS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XID,o.TNS_DATA_TYPE_XID,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TXN,o.TNS_DATA_TYPE_TXN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DCB,o.TNS_DATA_TYPE_DCB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CCA,o.TNS_DATA_TYPE_CCA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_WRN,o.TNS_DATA_TYPE_WRN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TLH,o.TNS_DATA_TYPE_TLH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TOH,o.TNS_DATA_TYPE_TOH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FOI,o.TNS_DATA_TYPE_FOI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SID2,o.TNS_DATA_TYPE_SID2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TCH,o.TNS_DATA_TYPE_TCH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PII,o.TNS_DATA_TYPE_PII,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PFI,o.TNS_DATA_TYPE_PFI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PPU,o.TNS_DATA_TYPE_PPU,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PTE,o.TNS_DATA_TYPE_PTE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RXH8,o.TNS_DATA_TYPE_RXH8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_N12,o.TNS_DATA_TYPE_N12,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AUTH,o.TNS_DATA_TYPE_AUTH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KVAL,o.TNS_DATA_TYPE_KVAL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FGI,o.TNS_DATA_TYPE_FGI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSY,o.TNS_DATA_TYPE_DSY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYR8,o.TNS_DATA_TYPE_DSYR8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYH8,o.TNS_DATA_TYPE_DSYH8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYL,o.TNS_DATA_TYPE_DSYL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYT8,o.TNS_DATA_TYPE_DSYT8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYV8,o.TNS_DATA_TYPE_DSYV8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYP,o.TNS_DATA_TYPE_DSYP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYF,o.TNS_DATA_TYPE_DSYF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYK,o.TNS_DATA_TYPE_DSYK,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYY,o.TNS_DATA_TYPE_DSYY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYQ,o.TNS_DATA_TYPE_DSYQ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYC,o.TNS_DATA_TYPE_DSYC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYA,o.TNS_DATA_TYPE_DSYA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OT8,o.TNS_DATA_TYPE_OT8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYTY,o.TNS_DATA_TYPE_DSYTY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQE,o.TNS_DATA_TYPE_AQE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KV,o.TNS_DATA_TYPE_KV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQD,o.TNS_DATA_TYPE_AQD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQ8,o.TNS_DATA_TYPE_AQ8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RFS,o.TNS_DATA_TYPE_RFS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RXH10,o.TNS_DATA_TYPE_RXH10,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPN,o.TNS_DATA_TYPE_KPN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNR,o.TNS_DATA_TYPE_KPDNR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYD,o.TNS_DATA_TYPE_DSYD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYS,o.TNS_DATA_TYPE_DSYS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYR,o.TNS_DATA_TYPE_DSYR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYH,o.TNS_DATA_TYPE_DSYH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYT,o.TNS_DATA_TYPE_DSYT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DSYV,o.TNS_DATA_TYPE_DSYV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQM,o.TNS_DATA_TYPE_AQM,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OER11,o.TNS_DATA_TYPE_OER11,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQL,o.TNS_DATA_TYPE_AQL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OTC,o.TNS_DATA_TYPE_OTC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KFNO,o.TNS_DATA_TYPE_KFNO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KFNP,o.TNS_DATA_TYPE_KFNP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KGT8,o.TNS_DATA_TYPE_KGT8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RASB4,o.TNS_DATA_TYPE_RASB4,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RAUB2,o.TNS_DATA_TYPE_RAUB2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RAUB1,o.TNS_DATA_TYPE_RAUB1,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RATXT,o.TNS_DATA_TYPE_RATXT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RSSB4,o.TNS_DATA_TYPE_RSSB4,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RSUB2,o.TNS_DATA_TYPE_RSUB2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RSUB1,o.TNS_DATA_TYPE_RSUB1,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RSTXT,o.TNS_DATA_TYPE_RSTXT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RIDL,o.TNS_DATA_TYPE_RIDL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_GLRDD,o.TNS_DATA_TYPE_GLRDD,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_GLRDG,o.TNS_DATA_TYPE_GLRDG,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_GLRDC,o.TNS_DATA_TYPE_GLRDC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OKO,o.TNS_DATA_TYPE_OKO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DPP,o.TNS_DATA_TYPE_DPP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DPLS,o.TNS_DATA_TYPE_DPLS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DPMOP,o.TNS_DATA_TYPE_DPMOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_STAT,o.TNS_DATA_TYPE_STAT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RFX,o.TNS_DATA_TYPE_RFX,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FAL,o.TNS_DATA_TYPE_FAL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CKV,o.TNS_DATA_TYPE_CKV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DRCX,o.TNS_DATA_TYPE_DRCX,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KGH,o.TNS_DATA_TYPE_KGH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQO,o.TNS_DATA_TYPE_AQO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OKGT,o.TNS_DATA_TYPE_OKGT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPFC,o.TNS_DATA_TYPE_KPFC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_FE2,o.TNS_DATA_TYPE_FE2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SPFP,o.TNS_DATA_TYPE_SPFP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DPULS,o.TNS_DATA_TYPE_DPULS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQA,o.TNS_DATA_TYPE_AQA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPBF,o.TNS_DATA_TYPE_KPBF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TSM,o.TNS_DATA_TYPE_TSM,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_MSS,o.TNS_DATA_TYPE_MSS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPC,o.TNS_DATA_TYPE_KPC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CRS,o.TNS_DATA_TYPE_CRS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KKS,o.TNS_DATA_TYPE_KKS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KSP,o.TNS_DATA_TYPE_KSP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KSPTOP,o.TNS_DATA_TYPE_KSPTOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KSPVAL,o.TNS_DATA_TYPE_KSPVAL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PSS,o.TNS_DATA_TYPE_PSS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_NLS,o.TNS_DATA_TYPE_NLS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ALS,o.TNS_DATA_TYPE_ALS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KSDEVTVAL,o.TNS_DATA_TYPE_KSDEVTVAL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KSDEVTTOP,o.TNS_DATA_TYPE_KSDEVTTOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPSPP,o.TNS_DATA_TYPE_KPSPP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KOL,o.TNS_DATA_TYPE_KOL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_LST,o.TNS_DATA_TYPE_LST,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ACX,o.TNS_DATA_TYPE_ACX,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SCS,o.TNS_DATA_TYPE_SCS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RXH,o.TNS_DATA_TYPE_RXH,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNS,o.TNS_DATA_TYPE_KPDNS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDCN,o.TNS_DATA_TYPE_KPDCN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPNNS,o.TNS_DATA_TYPE_KPNNS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPNCN,o.TNS_DATA_TYPE_KPNCN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPS,o.TNS_DATA_TYPE_KPS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_APINF,o.TNS_DATA_TYPE_APINF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TEN,o.TNS_DATA_TYPE_TEN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSCS,o.TNS_DATA_TYPE_XSSCS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSSO,o.TNS_DATA_TYPE_XSSSO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSAO,o.TNS_DATA_TYPE_XSSAO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KSRPC,o.TNS_DATA_TYPE_KSRPC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KVL,o.TNS_DATA_TYPE_KVL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSDEF,o.TNS_DATA_TYPE_XSSDEF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PDQCINV,o.TNS_DATA_TYPE_PDQCINV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PDQIDC,o.TNS_DATA_TYPE_PDQIDC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDQCSTA,o.TNS_DATA_TYPE_KPDQCSTA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPRS,o.TNS_DATA_TYPE_KPRS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDQIDC,o.TNS_DATA_TYPE_KPDQIDC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RTSTRM,o.TNS_DATA_TYPE_RTSTRM,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SESSGET,o.TNS_DATA_TYPE_SESSGET,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SESSREL,o.TNS_DATA_TYPE_SESSREL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SESSRET,o.TNS_DATA_TYPE_SESSRET,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SCN6,o.TNS_DATA_TYPE_SCN6,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KECPA,o.TNS_DATA_TYPE_KECPA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KECPP,o.TNS_DATA_TYPE_KECPP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SXA,o.TNS_DATA_TYPE_SXA,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KVARR,o.TNS_DATA_TYPE_KVARR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPNGN,o.TNS_DATA_TYPE_KPNGN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BINARY_INTEGER,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_FLOAT,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_STR,o.TNS_DATA_TYPE_VARCHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_VNU,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_PDN,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_VCS,o.TNS_DATA_TYPE_VARCHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_VBI,o.TNS_DATA_TYPE_VARCHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OAC,o.TNS_DATA_TYPE_NEW_OAC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UIN,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_SLS,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_LVC,o.TNS_DATA_TYPE_VARCHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_LVB,o.TNS_DATA_TYPE_RAW,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CHAR,o.TNS_DATA_TYPE_CHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AVC,o.TNS_DATA_TYPE_CHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BINARY_FLOAT,o.TNS_DATA_TYPE_BINARY_FLOAT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BINARY_DOUBLE,o.TNS_DATA_TYPE_BINARY_DOUBLE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CURSOR,o.TNS_DATA_TYPE_CURSOR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RDD,o.TNS_DATA_TYPE_ROWID,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OSL,o.TNS_DATA_TYPE_OSL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_EXT_NAMED,o.TNS_DATA_TYPE_INT_NAMED,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_INT_NAMED,o.TNS_DATA_TYPE_INT_NAMED,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_EXT_REF,o.TNS_DATA_TYPE_INT_REF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_INT_REF,o.TNS_DATA_TYPE_INT_REF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CLOB,o.TNS_DATA_TYPE_CLOB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BLOB,o.TNS_DATA_TYPE_BLOB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BFILE,o.TNS_DATA_TYPE_BFILE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CFILE,o.TNS_DATA_TYPE_CFILE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_RSET,o.TNS_DATA_TYPE_CURSOR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_JSON,o.TNS_DATA_TYPE_JSON,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DJSON,o.TNS_DATA_TYPE_DJSON,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CLV,o.TNS_DATA_TYPE_CLV,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DTR,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_DUN,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_DOP,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_VST,o.TNS_DATA_TYPE_VARCHAR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ODT,o.TNS_DATA_TYPE_DATE,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_DOL,o.TNS_DATA_TYPE_NUMBER,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_TIME,o.TNS_DATA_TYPE_TIME,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TIME_TZ,o.TNS_DATA_TYPE_TIME_TZ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TIMESTAMP,o.TNS_DATA_TYPE_TIMESTAMP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TIMESTAMP_TZ,o.TNS_DATA_TYPE_TIMESTAMP_TZ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_INTERVAL_YM,o.TNS_DATA_TYPE_INTERVAL_YM,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_INTERVAL_DS,o.TNS_DATA_TYPE_INTERVAL_DS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_EDATE,o.TNS_DATA_TYPE_DATE,o.TNS_TYPE_REP_ORACLE],[o.TNS_DATA_TYPE_ETIME,o.TNS_DATA_TYPE_ETIME,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ETTZ,o.TNS_DATA_TYPE_ETTZ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ESTAMP,o.TNS_DATA_TYPE_ESTAMP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ESTZ,o.TNS_DATA_TYPE_ESTZ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_EIYM,o.TNS_DATA_TYPE_EIYM,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_EIDS,o.TNS_DATA_TYPE_EIDS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DCLOB,o.TNS_DATA_TYPE_CLOB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DBLOB,o.TNS_DATA_TYPE_BLOB,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_DBFILE,o.TNS_DATA_TYPE_BFILE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UROWID,o.TNS_DATA_TYPE_UROWID,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TIMESTAMP_LTZ,o.TNS_DATA_TYPE_TIMESTAMP_LTZ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_ESITZ,o.TNS_DATA_TYPE_TIMESTAMP_LTZ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UB8,o.TNS_DATA_TYPE_UB8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_PNTY,o.TNS_DATA_TYPE_INT_NAMED,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_BOOLEAN,o.TNS_DATA_TYPE_BOOLEAN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSNSOP,o.TNS_DATA_TYPE_XSNSOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSATTR,o.TNS_DATA_TYPE_XSATTR,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSNS,o.TNS_DATA_TYPE_XSNS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UB1ARRAY,o.TNS_DATA_TYPE_UB1ARRAY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SESSSTATE,o.TNS_DATA_TYPE_SESSSTATE,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AC_REPLAY,o.TNS_DATA_TYPE_AC_REPLAY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AC_CONT,o.TNS_DATA_TYPE_AC_CONT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_IMPLRES,o.TNS_DATA_TYPE_IMPLRES,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_OER,o.TNS_DATA_TYPE_OER,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TXT,o.TNS_DATA_TYPE_TXT,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSESSNS,o.TNS_DATA_TYPE_XSSESSNS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSATTOP,o.TNS_DATA_TYPE_XSATTOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSCREOP,o.TNS_DATA_TYPE_XSCREOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSDETOP,o.TNS_DATA_TYPE_XSDETOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSDESOP,o.TNS_DATA_TYPE_XSDESOP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSETSP,o.TNS_DATA_TYPE_XSSETSP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSIDP,o.TNS_DATA_TYPE_XSSIDP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSPRIN,o.TNS_DATA_TYPE_XSPRIN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSKVL,o.TNS_DATA_TYPE_XSKVL,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSSSDEF2,o.TNS_DATA_TYPE_XSSSDEF2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSNSOP2,o.TNS_DATA_TYPE_XSNSOP2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_XSNS2,o.TNS_DATA_TYPE_XSNS2,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNREQ,o.TNS_DATA_TYPE_KPDNREQ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNRNF,o.TNS_DATA_TYPE_KPDNRNF,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPNGNC,o.TNS_DATA_TYPE_KPNGNC,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPNRI,o.TNS_DATA_TYPE_KPNRI,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQENQ,o.TNS_DATA_TYPE_AQENQ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQDEQ,o.TNS_DATA_TYPE_AQDEQ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_AQJMS,o.TNS_DATA_TYPE_AQJMS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNRPAY,o.TNS_DATA_TYPE_KPDNRPAY,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNRACK,o.TNS_DATA_TYPE_KPDNRACK,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNRMP,o.TNS_DATA_TYPE_KPDNRMP,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_KPDNRDQ,o.TNS_DATA_TYPE_KPDNRDQ,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SCN,o.TNS_DATA_TYPE_SCN,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_SCN8,o.TNS_DATA_TYPE_SCN8,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_CHUNKINFO,o.TNS_DATA_TYPE_CHUNKINFO,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_UDS,o.TNS_DATA_TYPE_UDS,o.TNS_TYPE_REP_UNIVERSAL],[o.TNS_DATA_TYPE_TNP,o.TNS_DATA_TYPE_TNP,o.TNS_TYPE_REP_UNIVERSAL]];Dh.exports=dc});var Oh=R((s0,gh)=>{"use strict";var sI=bt(),rI=Be(),fc=class fc extends sI{constructor(e){super(e),this.functionCode=rI.TNS_FUNC_LOGOFF}encode(e){this.writePiggybacks(e),this.writeFunctionHeader(e)}};_(fc,"LogOffMessage");var mc=fc;gh.exports=mc});var Lh=R((n0,yh)=>{"use strict";var nI=bt(),iI=Be(),Rc=class Rc extends nI{constructor(e){super(e),this.functionCode=iI.TNS_FUNC_PING}encode(e){this.writeFunctionHeader(e)}};_(Rc,"PingMessage");var Pc=Rc;yh.exports=Pc});var wh=R((o0,Yh)=>{"use strict";var Bh=Be(),oI=bt(),Dc=class Dc extends oI{encode(e){e.writeUInt8(Bh.TNS_MSG_TYPE_PROTOCOL),e.writeUInt8(6),e.writeUInt8(0),e.writeStr("node-oracledb"),e.writeUInt8(0)}decode(e){if(e.readUInt8()===Bh.TNS_MSG_TYPE_PROTOCOL){e.skipBytes(2);let s=e.readUInt8();for(;s!==0;)s=e.readUInt8();e.skipBytes(2),e.skipUB1(1);let n=e.readUInt16LE();n>0&&e.skipBytes(n*5);let i=e.readUInt16BE(),a=e.readBytes(i),c=6+a[5]+a[6];e.caps.nCharsetId=(a[c+3]<<8)+a[c+4],e.caps.adjustForServerCompileCaps(e.readBytesWithLength()),e.caps.adjustForServerRuntimeCaps(e.readBytesWithLength())}}};_(Dc,"ProtocolMessage");var Ic=Dc;Yh.exports=Ic});var Mh=R((_0,Uh)=>{"use strict";var aI=bt(),_I=Be(),gc=class gc extends aI{constructor(e){super(e),this.functionCode=_I.TNS_FUNC_ROLLBACK}encode(e){this.writeFunctionHeader(e)}};_(gc,"RollbackMessage");var Cc=gc;Uh.exports=Cc});var bh=R((T0,xh)=>{"use strict";var cI=bt(),Vh=Be(),yc=class yc extends cI{constructor(e){super(e),this.functionCode=Vh.TNS_FUNC_SESSION_RELEASE,this.messageType=Vh.TNS_MSG_TYPE_ONEWAY_FN,this.sessReleaseMode=0}encode(e){this.writeFunctionHeader(e),e.writeUInt8(0),e.writeUInt8(0),e.writeUB4(this.sessReleaseMode)}decode(){}};_(yc,"SessionReleaseMessage");var Oc=yc;xh.exports=Oc});var kh=R((E0,Fh)=>{"use strict";var TI=Ph(),lI=Ih(),EI=Ch(),uI=Ga(),NI=Ka(),SI=Ua(),hI=Oh(),AI=Lh(),dI=wh(),pI=Mh(),mI=bh();Fh.exports={AuthMessage:TI,CommitMessage:lI,DataTypeMessage:EI,ExecuteMessage:uI,FetchMessage:NI,LobOpMessage:SI,LogOffMessage:hI,PingMessage:AI,ProtocolMessage:dI,RollbackMessage:pI,SessionReleaseMessage:mI}});var Mc=R((u0,vh)=>{"use strict";var{Buffer:qh}=require("buffer"),fI=ln(),PI=za(),Lc=wn(),RI=yS(),{BaseBuffer:II}=Dr(),{NetworkSession:DI,getConnectionInfo:CI}=oc(),{Statement:Gh}=Sh(),xs=ar(),gI=or(),se=Be(),Hh=require("process"),_e=At(),Qe=W(),Yt=kh(),OI=new global.FinalizationRegistry(r=>{r.disconnect()}),wc=class wc extends II{};_(wc,"TDSBuffer");var Bc=wc,Uc=class Uc extends fI{async close(){if(this._protocol.txnInProgress&&await this.rollback(),this._protocol.callTimeout=0,this._drcpEnabled&&(await this._sessRelease(),this._drcpEstablishSession=!0),this._pool&&!this._dropSess)await this._pool.release(this);else{if(!this._drcpEnabled){let e=new Yt.LogOffMessage(this);await this._protocol._processMessage(e)}this.nscon.disconnect()}}async _sessRelease(){let e=new Yt.SessionReleaseMessage(this);this.isPooled()||(e.sessReleaseMode=se.DRCP_DEAUTHENTICATE),await this._protocol._processMessage(e)}async _determineElementObjType(e){let t=[{name:"owner",type:_e.DB_TYPE_VARCHAR,dir:se.BIND_IN,maxSize:128,values:[e.schema]},{name:"name",type:_e.DB_TYPE_VARCHAR,dir:se.BIND_IN,maxSize:128,values:[e.name]},{name:"package_name",type:_e.DB_TYPE_VARCHAR,dir:se.BIND_IN,maxSize:128,values:[e.packageName]}],s;e.packageName?s=`
        select
            elem_type_owner,
            elem_type_name,
            elem_type_package
        from all_plsql_coll_types
        where owner = :owner
          and type_name = :name
          and package_name = :package_name`:(t.pop(),s=`
        select
            elem_type_owner,
            elem_type_name
        from all_coll_types
        where owner = :owner
          and type_name = :name`);let n={connection:{_impl:this},prefetchRows:2},i=await this.execute(s,1,t,n,!1),a=await i.resultSet.getRows(1,n);await i.resultSet.close();let c=a[0];e.elementTypeClass=this._getDbObjectType(c[0],c[1],c[2]),e.elementTypeClass.partial&&this._partialDbObjectTypes.push(e.elementTypeClass)}async _parseElementType(e,t){let s,n,i=e.readUInt8();switch(i){case se.TNS_OBJ_TDS_TYPE_NUMBER:case se.TNS_OBJ_TDS_TYPE_FLOAT:t.elementType=_e.DB_TYPE_NUMBER;break;case se.TNS_OBJ_TDS_TYPE_VARCHAR:case se.TNS_OBJ_TDS_TYPE_CHAR:t.maxSize=e.readUInt16BE(),s=i===se.TNS_OBJ_TDS_TYPE_VARCHAR?se.TNS_DATA_TYPE_VARCHAR:se.TNS_DATA_TYPE_CHAR,n=e.readUInt8(),t.elementType=_e.getTypeByOraTypeNum(s,n);break;case se.TNS_OBJ_TDS_TYPE_RAW:t.elementType=_e.DB_TYPE_RAW;break;case se.TNS_OBJ_TDS_TYPE_BINARY_FLOAT:t.elementType=_e.DB_TYPE_BINARY_FLOAT;break;case se.TNS_OBJ_TDS_TYPE_BINARY_DOUBLE:t.elementType=_e.DB_TYPE_BINARY_DOUBLE;break;case se.TNS_OBJ_TDS_TYPE_DATE:t.elementType=_e.DB_TYPE_DATE;break;case se.TNS_OBJ_TDS_TYPE_TIMESTAMP:t.elementType=_e.DB_TYPE_TIMESTAMP;break;case se.TNS_OBJ_TDS_TYPE_TIMESTAMP_LTZ:t.elementType=_e.DB_TYPE_TIMESTAMP_LTZ;break;case se.TNS_OBJ_TDS_TYPE_TIMESTAMP_TZ:t.elementType=_e.DB_TYPE_TIMESTAMP_TZ;break;case se.TNS_OBJ_TDS_TYPE_BOOLEAN:t.elementType=_e.DB_TYPE_BOOLEAN;break;case se.TNS_OBJ_TDS_TYPE_CLOB:this._determineElementTypeCharsetForm(t);break;case se.TNS_OBJ_TDS_TYPE_BLOB:t.elementType=_e.DB_TYPE_BLOB;break;case se.TNS_OBJ_TDS_TYPE_OBJ:t.elementType=_e.DB_TYPE_OBJECT,await this._determineElementObjType(t);break;default:Qe.throwErr(Qe.ERR_TDS_TYPE_NOT_SUPPORTED,i)}}async _parseTDS(e,t){let s=new Bc(e);if(s.skipBytes(4),s.skipBytes(2),s.skipBytes(2),s.readUInt16BE()>1){t.isCollection=!1;return}s.skipBytes(1),s.skipBytes(1),s.skipBytes(2),s.skipBytes(4);let i=s.readUInt8();if(t.isCollection=i===se.TNS_OBJ_TDS_TYPE_COLL,!t.isCollection)return;let a=s.readUInt32BE();t.maxNumElements=s.readUInt32BE(),t.collectionType=s.readUInt8(),t.collectionType===se.TNS_OBJ_PLSQL_INDEX_TABLE&&(t.collectionFlags=se.TNS_OBJ_HAS_INDEXES),s.pos=a,await this._parseElementType(s,t)}async _populateDbObjectTypeInfo(e){let t=`
      declare
          t_Instantiable              varchar2(3);
          t_SuperTypeOwner            varchar2(128);
          t_SuperTypeName             varchar2(128);
          t_SubTypeRefCursor          sys_refcursor;
          t_Pos                       pls_integer;
      begin
          :ret_val := dbms_pickler.get_type_shape(:full_name, :oid,
              :version, :tds, t_Instantiable, t_SuperTypeOwner,
              t_SuperTypeName, :attrs_rc, t_SubTypeRefCursor);
          :package_name := null;
          if substr(:full_name, length(:full_name) - 7) = '%ROWTYPE' then
              t_Pos := instr(:full_name, '.');
              :schema := substr(:full_name, 1, t_Pos - 1);
              :name := substr(:full_name, t_Pos + 1);
          else
              begin
                  select owner, type_name
                  into :schema, :name
                  from all_types
                  where type_oid = :oid;
              exception
              when no_data_found then
                  begin
                      select owner, package_name, type_name
                      into :schema, :package_name, :name
                      from all_plsql_types
                      where type_oid = :oid;
                  exception
                  when no_data_found then
                      null;
                  end;
              end;
          end if;
      end;`,s=[{name:"full_name",type:_e.DB_TYPE_VARCHAR,dir:se.BIND_INOUT,maxSize:500,values:[e]},{name:"ret_val",type:_e.DB_TYPE_BINARY_INTEGER,dir:se.BIND_OUT,values:[]},{name:"oid",type:_e.DB_TYPE_RAW,maxSize:16,dir:se.BIND_OUT,values:[]},{name:"version",type:_e.DB_TYPE_BINARY_INTEGER,dir:se.BIND_OUT,values:[]},{name:"tds",type:_e.DB_TYPE_RAW,maxSize:2e3,dir:se.BIND_OUT,values:[]},{name:"attrs_rc",type:_e.DB_TYPE_CURSOR,dir:se.BIND_OUT,values:[]},{name:"package_name",type:_e.DB_TYPE_VARCHAR,maxSize:128,dir:se.BIND_OUT,values:[]},{name:"schema",type:_e.DB_TYPE_VARCHAR,maxSize:128,dir:se.BIND_OUT,values:[]},{name:"name",type:_e.DB_TYPE_VARCHAR,maxSize:128,dir:se.BIND_OUT,values:[]}],n={connection:{_impl:this},nullifyInvalidCursor:!0},i=await this.execute(t,1,s,n,!1);i.outBinds.ret_val!==0&&Qe.throwErr(Qe.ERR_INVALID_OBJECT_TYPE_NAME,e);let a=this._getDbObjectType(i.outBinds.schema,i.outBinds.name,i.outBinds.package_name,i.outBinds.oid);if(!a.partial)return a;a.version=i.outBinds.version,await this._parseTDS(i.outBinds.tds,a);let c=await i.outBinds.attrs_rc.getRows(1e3,{});if(c.length>0){a.attributes=[];for(let T of c){let E={name:T[1]};T[4]?(E.type=_e.DB_TYPE_OBJECT,E.typeClass=this._getDbObjectType(T[4],T[3],T[5],T[6]),E.typeClass.partial&&this._partialDbObjectTypes.push(E.typeClass)):E.type=_e.getTypeByColumnTypeName(T[3]),a.attributes.push(E)}}return a.partial=!1,a}async _populatePartialDbObjectTypes(){for(;this._partialDbObjectTypes.length>0;){let e=this._partialDbObjectTypes.pop(),t="%ROWTYPE",s=e.name;s.endsWith(t)?s=s.substring(0,s.length-t.length):t="";let n;e.packageName?n=`"${e.schema}"."${e.packageName}"."${s}"${t}`:n=`"${e.schema}"."${s}"${t}`,await this._populateDbObjectTypeInfo(n)}}async commit(){let e=new Yt.CommitMessage(this);await this._protocol._processMessage(e)}async breakExecution(){await this._protocol.breakMessage()}_healthStatus(){return this.nscon.recvInbandNotif()}isHealthy(){try{return this.nscon.recvInbandNotif()===0}catch{return!1}}isPooled(){return!!this._pool}async connect(e){e.connectString||Qe.throwErr(Qe.ERR_EMPTY_CONNECT_STRING),xs.checkCredentials(e),this.sessionID=0,this.serialNum=0,this.autoCommit=!1,this.serverVersion="",this.statementCache=null,this.currentSchema="",this.invokeSessionCallback=!0,this.statementCache=new Map,this.statementCacheSize=e.stmtCacheSize,this._numCursorsToClose=0,this._currentSchemaModified=!1,this._cursorsToClose=new Set,this._tempLobsToClose=[],this._tempLobsTotalSize=0,this._drcpEstablishSession=!1,this._cclass=null,this._clientIdentifier="",this._clientIdentifierModified=!1,this._action="",this._actionModified=!1,this._dbOp="",this._dbOpModified=!1,this._clientInfo="",this._clientInfoModified=!1,this._module="",this._moduleModified=!1,this.serviceName="",this.remoteAddress="",this.privilege=e.privilege,this.comboKey=null,this.nscon=new DI,OI.register(this,this.nscon),await this.nscon.connect(e),this._connInfo=this.isPooled()?e._connInfo.map(t=>t):await CI(e),this._drcpEnabled=String(this._connInfo[0]).toLowerCase()==="pooled",this.serviceName=this._connInfo[2],this.purity=this._connInfo[3]|se.PURITY_DEFAULT,this.remoteAddress=this.nscon.getOption(gI.REMOTEADDR),this.connClass=e.connectionClass,this.purity===se.PURITY_DEFAULT&&this._drcpEnabled&&(this.isPooled()?this.purity=se.PURITY_SELF:this.purity=se.PURITY_NEW),this._protocol=new RI(this),this._protocol.caps.protocolVersion<se.TNS_VERSION_MIN_ACCEPTED&&Qe.throwErr(Qe.ERR_SERVER_VERSION_NOT_SUPPORTED);try{let t=new Yt.ProtocolMessage(this);await this._protocol._processMessage(t),t=new Yt.DataTypeMessage(this),await this._protocol._processMessage(t),t=new Yt.AuthMessage(this,e),await this._protocol._processMessage(t),await this._protocol._processMessage(t)}catch(t){throw this.nscon.disconnect(),t}this._partialDbObjectTypes=[],e.debugJDWP?this.jdwpData=qh.from(e.debugJDWP):Hh.env.ORA_DEBUG_JDWP&&(this.jdwpData=qh.from(Hh.env.ORA_DEBUG_JDWP)),this._protocol.connInProgress=!1}_returnStatement(e){e.bindInfoList&&e.bindInfoList.forEach(t=>{t.bindVar=null}),e.queryVars&&e.queryVars.forEach(t=>{t.values.fill(null)}),e.returnToCache?e.inUse=!1:e.cursorId!==0&&this._addCursorToClose(e.cursorId)}_addCursorToClose(e){if(this._cursorsToClose.has(e)){let t=`attempt to close cursor ${e} twice`;Qe.throwErr(Qe.ERR_INTERNAL,t)}this._cursorsToClose.add(e)}_adjustStatementCache(){for(;this.statementCache.size>this.statementCacheSize;){let e=this.statementCache.keys().next().value,t=this.statementCache.get(e);this.statementCache.delete(e),t.inUse?t.returnToCache=!1:t.cursorId!==0&&this._addCursorToClose(t.cursorId)}}_prepare(e,t){let s=this._getStatement(e,t.keepInStmtCache);return s.bufferRowIndex=0,s.bufferRowCount=0,s.lastRowIndex=0,s.moreRowsToFetch=!0,s}async _bind(e,t,s=0){let n=e.bindInfoDict,i=e.bindInfoList;if(e.isPlSql&&t.maxSize>32767){t.type===_e.DB_TYPE_RAW||t.type===_e.DB_TYPE_LONG_RAW?t.type=_e.DB_TYPE_BLOB:t.type._csfrm===se.CSFRM_NCHAR?t.type=_e.DB_TYPE_NCLOB:t.type=_e.DB_TYPE_CLOB;let a=t.maxSize;delete t.maxSize,t.outConverter=async function(c){if(c===null)return null;let T=await c.getData(),E=c._length;return T&&E>a&&Qe.throwErr(Qe.ERR_INSUFFICIENT_BUFFER_FOR_BINDS),T}}if(t.type===_e.DB_TYPE_CLOB||t.type===_e.DB_TYPE_NCLOB||t.type===_e.DB_TYPE_BLOB){for(let[a,c]of t.values.entries())if(!(c instanceof Lc))if(c&&c.length>0){let T=new Lc;await T.create(this,t.type),await T.write(1,c),t.values[a]=T}else t.values[a]=null}if(t.name){let a;t.name.startsWith('"')&&t.name.endsWith('"')?a=t.name.substring(1,t.name.length-1):a=t.name.toUpperCase(),a.startsWith(":")&&(a=t.name.substring(1)),n.has(a)||Qe.throwErr(Qe.ERR_INVALID_BIND_NAME,a),n.get(a).forEach(c=>{e._setVariable(c,t)})}else{let a=i[s-1];e._setVariable(a,t)}}_createResultSet(e,t){let s=new PI;if(t||(t=new Gh),s._resultSetNew(this,t,e),t.queryVars.length>0){let n=xs.getMetadataMany(t.queryVars);s._setup(e,n)}return s}async _prepareAndBind(e,t,s,n=!1){let i=this._prepare(e,s),a=0;if(!n){let c=i.bindInfoList.length,T=t.length;c!==T&&(T===0||!t[0].name)&&Qe.throwErr(Qe.ERR_WRONG_NUMBER_OF_POSITIONAL_BINDS,c,T);for(let E of t)await this._bind(i,E,a+1),a+=1}return i}resetStatmentCache(){this.statementCache.clear(),this._cursorsToClose.clear()}async getDbObjectClass(e){let t=await this._populateDbObjectTypeInfo(e);return await this._populatePartialDbObjectTypes(),t}async getStatementInfo(e){let t={},s={},n=await this._prepareAndBind(e,null,t,!0);if(t.connection=this,!n.isDdl){let i=new Yt.ExecuteMessage(this,n,t);i.parseOnly=!0,await this._protocol._processMessage(i)}return n.numQueryVars>0&&(s.metaData=xs.getMetadataMany(n.queryVars)),s.bindNames=Array.from(n.bindInfoDict.keys()),s.statementType=n.statementType,s}async execute(e,t,s,n,i){let a={};if(i)return await this.executeMany(e,t,s,n);let c=await this._prepareAndBind(e,s,n),T=new Yt.ExecuteMessage(this,c,n);if(T.numExecs=1,await this._protocol._processMessage(T),c.requiresFullExecute=!1,c.requiresDefine&&c.sql&&(c.requiresFullExecute=!0,await this._protocol._processMessage(T),c.requiresFullExecute=!1,c.requiresDefine=!1),c.numQueryVars>0)a.resultSet=T.resultSet;else{c.bufferRowIndex=0;let E=xs.getBindVars(c),l=xs.getExecuteOutBinds(E);l&&(a.outBinds=l),c.isPlSql&&n.implicitResultSet&&(a.implicitResults=n.implicitResultSet),c.lastRowid&&(a.lastRowid=c.lastRowid,delete c.lastRowid),c.isPlSql?c.rowCount&&(a.rowsAffected=c.rowCount):a.rowsAffected=c.rowCount||0,c.rowCount&&delete c.rowCount,this._returnStatement(c)}return a}async executeMany(e,t,s,n){let i=await this._prepareAndBind(e,s,n);i.isPlSql&&(n.batchErrors||n.dmlRowCounts)&&Qe.throwErr(Qe.ERR_EXEC_MODE_ONLY_FOR_DML);let a=new Yt.ExecuteMessage(this,i,n);a.numExecs=t,a.arrayDmlRowCounts=n.dmlRowCounts,a.batchErrors=n.batchErrors,i.isPlSql&&i.requiresFullExecute&&(a.numExecs=1,await this._protocol._processMessage(a),i.requiresFullExecute=!1,a.numExecs=t-1,a.offset=1),a.numExecs>0&&await this._protocol._processMessage(a);let c={};i.bufferRowIndex=0;let T=xs.getBindVars(i),E=xs.getExecuteManyOutBinds(T,t);E&&(c.outBinds=E);let l=i.isPlSql?void 0:i.rowCount;return l&&(c.rowsAffected=l,delete i.rowCount),n.dmlRowCounts&&(c.dmlRowCounts=n.dmlRowCounts),n.batchErrors&&(c.batchErrors=n.batchErrors),this._returnStatement(i),c}_getStatement(e,t=!1){let s=this.statementCache.get(e);return s?s.inUse||!t||this._drcpEstablishSession?(t||(this.statementCache.delete(e),s.returnToCache=!1),(s.inUse||this._drcpEstablishSession)&&(s=s._copy())):(this.statementCache.delete(e),this.statementCache.set(e,s)):(s=new Gh,s._prepare(e),t&&!this._drcpEstablishSession&&!s.isDdl&&this.statementCacheSize>0&&(s.returnToCache=!0,this.statementCache.set(e,s),this._adjustStatementCache())),s.inUse=!0,s}async ping(){let e=new Yt.PingMessage(this);await this._protocol._processMessage(e)}async rollback(){let e=new Yt.RollbackMessage(this);await this._protocol._processMessage(e)}getOracleServerVersion(){return this.serverVersion}getOracleServerVersionString(){return this.serverVersionString}setCurrentSchema(e){this._currentSchemaModified=!0,this.currentSchema=e}getCurrentSchema(){return this.currentSchema}setClientId(e){this._clientIdentifierModified=!0,this._clientIdentifier=e}setDbOp(e){this._dbOpModified=!0,this._dbOp=e}setClientInfo(e){this._clientInfoModified=!0,this._clientInfo=e}setModule(e){this._moduleModified=!0,this._module=e,this._actionModified=!0}setAction(e){this._actionModified=!0,this._action=e}async changePassword(e,t,s){let n={user:e,newPassword:s,password:t,changePassword:!0},i=new Yt.AuthMessage(this,n);await this._protocol._processMessage(i)}async createLob(e){let t=new Lc;return await t.create(this,e),t}getStmtCacheSize(){return this.statementCacheSize}setCallTimeout(e){this._protocol.callTimeout=e}getCallTimeout(){return this._protocol.callTimeout}getTag(){return""}};_(Uc,"ThinConnectionImpl");var Yc=Uc;vh.exports=Yc});var Wh=R((S0,Kh)=>{"use strict";var yI=lo(),LI=Mc(),Dt=Ir(),Xt=W(),BI=yt(),Vc=pt(),YI=ar(),{getConnectionInfo:wI}=oc(),UI=require("crypto"),MI=require("events"),bc=class bc extends yI{_init(e){if(e.homogeneous||Xt.throwErr(Xt.ERR_NOT_IMPLEMENTED,"Heterogeneous Pooling"),YI.checkCredentials(e),this._availableObjects=[],this._name="node-thin",this._poolMin=e.poolMin,this._poolMax=e.poolMax,this._poolIncrement=e.poolIncrement,this._poolTimeout=e.poolTimeout,this._poolPingInterval=e.poolPingInterval,this._stmtCacheSize=e.stmtCacheSize,this._userConfig=e,this._freeConnectionList=[],this._usedConnectionList=new Set,this._password=e.password,this._walletPassword=e.walletPassword,this._obfuscatedPassword=[],this._obfuscatedWalletPassword=[],this._token=e.token,this._obfuscatedToken=[],this._privateKey=e.privateKey,this._obfuscatedPrivateKey=[],this._schedulerJob=null,this._password!==void 0){let t=Dt.setObfuscatedValue(this._password);this._password=t.value,this._obfuscatedPassword=t.obfuscatedValue,this._userConfig.password=null}if(this._walletPassword!==void 0){let t=Dt.setObfuscatedValue(this._walletPassword);this._walletPassword=t.value,this._obfuscatedWalletPassword=t.obfuscatedValue,this._userConfig.walletPassword=null}if(this._token!==void 0){let t=Dt.setObfuscatedValue(this._token);this._token=t.value,this._obfuscatedToken=t.obfuscatedValue,this._userConfig.token=null}if(this._privateKey!==void 0){let t=Dt.setObfuscatedValue(this._privateKey);this._privateKey=t.value,this._obfuscatedPrivateKey=t.obfuscatedValue,this._userConfig.privateKey=null}this._accessTokenFn=e.accessTokenFn,this._isDRCPEnabled=!1,this.eventEmitter=new MI,this.eventEmitter.on("_removePoolConnection",async t=>{await this._destroy(t)})}async create(e){this._init(e),this._userConfig._connInfo=await wI(e),this._isDRCPEnabled=String(this._userConfig._connInfo[0]).toLowerCase()==="pooled",this._isDRCPEnabled&&BI.connectionClass===""&&this._generateConnectionClass(),await this._growPool(this._poolMin)}setAccessToken(e){if(e.token){this._token=e.token;let t=Dt.setObfuscatedValue(this._token);this._token=t.value,this._obfuscatedToken=t.obfuscatedValue}if(e.privateKey){this._privateKey=e.privateKey;let t=Dt.setObfuscatedValue(this._privateKey);this._privateKey=t.value,this._obfuscatedPrivateKey=t.obfuscatedValue}}async _getConnAttrs(){let e,t=Object.assign({},this._userConfig);if(t.password===null&&(t.password=Dt.getDeobfuscatedValue(this._password,this._obfuscatedPassword)),t.walletPassword===null&&(t.walletPassword=Dt.getDeobfuscatedValue(this._walletPassword,this._obfuscatedWalletPassword)),t.token===null&&(t.token=Dt.getDeobfuscatedValue(this._token,this._obfuscatedToken),Vc.isTokenExpired(t.token)))if(typeof this._accessTokenFn=="function"){if(e=await this._accessTokenFn(!0),typeof e=="string")if(t.token=e,Vc.isTokenExpired(t.token))Xt.throwErr(Xt.ERR_TOKEN_HAS_EXPIRED);else{let s=Dt.setObfuscatedValue(t.token);this._token=s.value,this._obfuscatedToken=s.obfuscatedValue}else if(typeof e=="object")if(t.token=e.token,t.privateKey=e.privateKey,Vc.isTokenExpired(t.token))Xt.throwErr(Xt.ERR_TOKEN_HAS_EXPIRED);else{let s=Dt.setObfuscatedValue(t.token);this._token=s.value,this._obfuscatedToken=s.obfuscatedValue;let n=Dt.setObfuscatedValue(t.privateKey);this._privateKey=n.value,this._obfuscatedPrivateKey=n.obfuscatedValue}}else Xt.throwErr(Xt.ERR_TOKEN_HAS_EXPIRED);return t.privateKey===null&&(t.privateKey=Dt.getDeobfuscatedValue(this._privateKey,this._obfuscatedPrivateKey)),t}async getConnection(){return await this.acquire()}async _destroy(e){e.nscon.ntAdapter.connected&&(e._dropSess=!0,await e.close())}async close(e){return this._schedulerJob&&(clearTimeout(this._schedulerJob),this._schedulerJob=null),await this.destroyAllNow(e)}getPoolMax(){return this._poolMax}getPoolMin(){return this._poolMin}getConnectionsInUse(){return this._usedConnectionList.size}getConnectionsOpen(){return this._freeConnectionList.length+this._usedConnectionList.size}getPoolIncrement(){return this._poolIncrement}getPoolMaxPerShard(){}getPoolPingInterval(){return this._poolPingInterval}getPoolTimeout(){return this._poolTimeout}getSodaMetaDataCache(){}getStmtCacheSize(){return this._stmtCacheSize}async _growPool(e){let t=await this._getConnAttrs();for(;e>0;){let s=new LI;s._pool=this,await s.connect(t),s._newSession=!0,s._dropSess=!1,s._lastTimeUsed=Date.now(),this._freeConnectionList.push(s),e--}}_setScheduler(){!this._schedulerJob&&this._poolTimeout>0&&this._freeConnectionList.length>0&&this._freeConnectionList.length+this._usedConnectionList.size>this._poolMin&&(this._schedulerJob=setTimeout(()=>{this._scanIdleConnection()},this._poolTimeout*1e3))}_scanIdleConnection(){for(;this._usedConnectionList.size+this._freeConnectionList.length>this._poolMin&&this._freeConnectionList.length>0;){let e=this._freeConnectionList[this._freeConnectionList.length-1];if(Date.now()-e._lastTimeUsed<this._poolTimeout*1e3)break;this.eventEmitter.emit("_removePoolConnection",e),this._freeConnectionList.pop()}this._schedulerJob=null,this._setScheduler()}async acquire(){for(;this._freeConnectionList.length>0;){let t=this._freeConnectionList.pop();if(!t.isHealthy()){this.eventEmitter.emit("_removePoolConnection",t);continue}let s=!1;if((this._poolPingInterval===0||this._poolPingInterval>0&&Date.now()-t._lastTimeUsed>this._poolPingInterval*1e3)&&(s=!0),s)try{await t.ping()}catch{this.eventEmitter.emit("_removePoolConnection",t);continue}return this._usedConnectionList.add(t),t}if(this._usedConnectionList.size<this._poolMin)await this._growPool(this._poolMin-this._usedConnectionList.size);else{let t=this._poolMax-this._usedConnectionList.size;await this._growPool(Math.min(this._poolIncrement,t)),this._poolIncrement>1&&t>1&&this._setScheduler()}let e=this._freeConnectionList.pop();return this._usedConnectionList.add(e),e}release(e){this._usedConnectionList.delete(e),e.nscon.connected&&(e._lastTimeUsed=Date.now(),e._newSession=!1,this._freeConnectionList.push(e)),this._setScheduler()}async destroyAllNow(e){let t;for(;this._freeConnectionList.length!==0;)t=this._freeConnectionList.pop(),await this._destroy(t);if(e.forceClose)for(let s of this._usedConnectionList)await this._destroy(s),this._usedConnectionList.delete(s);this._usedConnectionList.size!==0&&Xt.throwErr(Xt.ERR_POOL_HAS_BUSY_CONNECTIONS),this.eventEmitter.removeAllListeners()}_generateConnectionClass(){this._userConfig.connectionClass=UI.randomBytes(16).toString("base64"),this._userConfig.connectionClass="NJS:"+this._userConfig.connectionClass}};_(bc,"ThinPoolImpl");var xc=bc;Kh.exports=xc});var $h=R(()=>{"use strict";var VI=Mc(),xI=za(),bI=Wh(),FI=wn(),kI=Ba(),xr=Js();xr.ConnectionImpl=VI;xr.ResultSetImpl=xI;xr.PoolImpl=bI;xr.LobImpl=FI;xr.DbObjectImpl=kI});var eA=R((p0,Zh)=>{"use strict";var B=ot(),Me=pt(),y=W(),ne=At(),zh=Js(),qI=require("process"),GI=require("util"),Fc=qI.version.substring(1).split(".").map(Number);y.assert(Fc[0]>14||Fc[0]===14&&Fc[1]>=6,y.ERR_NODE_TOO_OLD,Me.PACKAGE_JSON_VERSION,"14.6");var HI=Oo(),vI=Yo(),KI=Mo(),WI=Qo(),$I=er(),Xh=Ea(),zI=Zs(),jh=JN(),XI=Sa(),jI=hn(),v=yt(),QI=_a(),JI=ia(),ZI=ea(),eD=tr(),tD=ra(),Tr={},Qn={},br="default",Cs,sD=!1;function rD(){let r=typeof __non_webpack_require__=="function"?__non_webpack_require__:require,e=["../"+Me.RELEASE_DIR+"/"+Me.BINARY_FILE,"../"+Me.RELEASE_DIR+"/oracledb.node","../build/Debug/oracledb.node","./node_modules/oracledb/"+Me.RELEASE_DIR+"/"+Me.BINARY_FILE,"./node_modules/oracledb/"+Me.RELEASE_DIR+"/oracledb.node"],t;for(let s=0;s<e.length;s++)try{t=r(e[s]);break}catch(n){if(n.code!=="MODULE_NOT_FOUND"||s==e.length-1){let i;n.code==="MODULE_NOT_FOUND"?i=`
  Looked for ${e.map(a=>require("path").resolve(__dirname,a)).join(", ")}
  ${Me.getInstallURL()}
`:i=`
  Node.js require('oracledb') error was:
  ${n.message}
  ${Me.getInstallHelp()}
`,y.throwErr(y.ERR_CANNOT_LOAD_BINARY,i)}}return t}_(rD,"_initCLib");function Qh(){$h()}_(Qh,"_initializeThinDriver");function nD(r){return r===B.SYSASM||r===B.SYSBACKUP||r===B.SYSDBA||r===B.SYSDG||r===B.SYSKM||r===B.SYSOPER||r===B.SYSPRELIM||r===B.SYSRAC}_(nD,"_isPrivilege");async function Jh(r,e){let t={};if(r.user!==void 0&&(y.assertParamPropValue(typeof r.user=="string",1,"user"),t.user=r.user),r.username!==void 0&&(y.assert(t.user===void 0,y.ERR_DBL_USER),y.assertParamPropValue(typeof r.username=="string",1,"username"),t.user=r.username),r.password!==void 0&&(y.assertParamPropValue(typeof r.password=="string",1,"password"),t.password=r.password),r.connectString!==void 0&&(y.assertParamPropValue(typeof r.connectString=="string",1,"connectString"),t.connectString=r.connectString),r.connectionString!==void 0&&(y.assert(t.connectString===void 0,y.ERR_DBL_CONNECT_STRING),y.assertParamPropValue(typeof r.connectionString=="string",1,"connectionString"),t.connectString=r.connectionString),r.walletPassword!==void 0&&(y.assertParamPropValue(typeof r.walletPassword=="string",1,"walletPassword"),t.walletPassword=r.walletPassword),r.walletLocation!==void 0&&(y.assertParamPropValue(typeof r.walletLocation=="string",1,"walletLocation"),t.walletLocation=r.walletLocation),r.edition!==void 0&&(y.assertParamPropValue(typeof r.edition=="string",1,"edition"),t.edition=r.edition),r.stmtCacheSize!==void 0&&(y.assertParamPropValue(Number.isInteger(r.stmtCacheSize)&&r.stmtCacheSize>=0,1,"stmtCacheSize"),t.stmtCacheSize=r.stmtCacheSize),t.externalAuth=v.externalAuth,r.externalAuth!==void 0&&(y.assertParamPropValue(typeof r.externalAuth=="boolean",1,"externalAuth"),t.externalAuth=r.externalAuth),r.events!==void 0&&(y.assertParamPropValue(typeof r.events=="boolean",1,"events"),t.events=r.events),r.poolAlias!==void 0&&(y.assertParamPropValue(typeof r.poolAlias=="string"&&r.poolAlias.length>0,1,"poolAlias"),t.poolAlias=r.poolAlias),r.configDir!==void 0&&(y.assertParamPropValue(typeof r.configDir=="string",1,"configDir"),t.configDir=r.configDir),r.sslServerCertDN!==void 0&&(y.assertParamPropValue(typeof r.sslServerCertDN=="string",1,"sslServerCertDN"),t.sslServerCertDN=r.sslServerCertDN),r.sslServerDNMatch!==void 0&&(y.assertParamPropValue(typeof r.sslServerDNMatch=="boolean",1,"sslServerDNMatch"),t.sslServerDNMatch=r.sslServerDNMatch),r.httpsProxy!==void 0&&(y.assertParamPropValue(typeof r.httpsProxy=="string",1,"httpsProxy"),t.httpsProxy=r.httpsProxy),r.httpsProxyPort!==void 0&&(y.assertParamPropValue(Number.isInteger(r.httpsProxyPort)&&r.httpsProxyPort>=0,1,"httpsProxyPort"),t.httpsProxyPort=r.httpsProxyPort),r.retryCount!==void 0&&(y.assertParamPropValue(Number.isInteger(r.retryCount)&&r.retryCount>=0,1,"retryCount"),t.retryCount=r.retryCount),r.retryDelay!==void 0&&(y.assertParamPropValue(Number.isInteger(r.retryDelay)&&r.retryDelay>=0,1,"retryDelay"),t.retryDelay=r.retryDelay),r.connectTimeout!==void 0&&(y.assertParamPropValue(Number.isInteger(r.connectTimeout)&&r.connectTimeout>=0,1,"connectTimeout"),t.connectTimeout=r.connectTimeout),r.transportConnectTimeout!==void 0&&(y.assertParamPropValue(Number.isInteger(r.transportConnectTimeout)&&r.transportConnectTimeout>=0,1,"transportConnectTimeout"),t.transportConnectTimeout=r.transportConnectTimeout),r.expireTime!==void 0&&(y.assertParamPropValue(Number.isInteger(r.expireTime)&&r.expireTime>=0,1,"expireTime"),t.expireTime=r.expireTime),r.sdu!==void 0&&(y.assertParamPropValue(Number.isInteger(r.sdu)&&r.sdu>0,1,"sdu"),t.sdu=r.sdu),r.connectionIdPrefix!==void 0&&(y.assertParamPropValue(typeof r.connectionIdPrefix=="string",1,"connectionIdPrefix"),t.connectionIdPrefix=r.connectionIdPrefix),e)r.poolMax!==void 0&&(y.assertParamPropValue(Number.isInteger(r.poolMax)&&r.poolMax>0,1,"poolMax"),t.poolMax=r.poolMax),r.poolMaxPerShard!==void 0&&(y.assertParamPropValue(Number.isInteger(r.poolMaxPerShard)&&r.poolMaxPerShard>=0,1,"poolMaxPerShard"),t.poolMaxPerShard=r.poolMaxPerShard),r.poolMin!==void 0&&(y.assertParamPropValue(Number.isInteger(r.poolMin)&&r.poolMin>=0,1,"poolMin"),t.poolMin=r.poolMin),r.poolIncrement!==void 0&&(y.assertParamPropValue(Number.isInteger(r.poolIncrement)&&r.poolIncrement>=0,1,"poolIncrement"),t.poolIncrement=r.poolIncrement),r.poolTimeout!==void 0&&(y.assertParamPropValue(Number.isInteger(r.poolTimeout)&&r.poolTimeout>=0,1,"poolTimeout"),t.poolTimeout=r.poolTimeout),r.poolPingInterval!==void 0&&(y.assertParamPropValue(Number.isInteger(r.poolPingInterval)&&r.poolPingInterval>=-2147483648&&r.poolPingInterval<=2147483647,1,"poolPingInterval"),t.poolPingInterval=r.poolPingInterval),t.homogeneous=!0,r.homogeneous!==void 0&&(y.assertParamPropValue(typeof r.homogeneous=="boolean",1,"homogeneous"),t.homogeneous=r.homogeneous),r.queueTimeout!==void 0&&(y.assertParamPropValue(Number.isInteger(r.queueTimeout)&&r.queueTimeout>=0,1,"queueTimeout"),t.queueTimeout=r.queueTimeout),r.queueMax!==void 0&&(y.assertParamPropValue(Number.isInteger(r.queueMax),1,"queueMax"),t.queueMax=r.queueMax),t.sodaMetaDataCache=!1,r.sodaMetaDataCache!==void 0&&(y.assertParamPropValue(typeof r.sodaMetaDataCache=="boolean",1,"sodaMetaDataCache"),t.sodaMetaDataCache=r.sodaMetaDataCache),r.sessionCallback!==void 0&&(y.assertParamPropValue(typeof r.sessionCallback=="string"||typeof r.sessionCallback=="function",1,"sessionCallback"),t.sessionCallback=r.sessionCallback),t.enableStatistics=!1,r.enableStatistics!==void 0&&(y.assertParamPropValue(typeof r.enableStatistics=="boolean",1,"enableStatistics"),t.enableStatistics=r.enableStatistics),!t.enableStatistics&&r._enableStats!==void 0&&(y.assertParamPropValue(typeof r._enableStats=="boolean",1,"_enableStats"),t.enableStatistics=r._enableStats);else{if(r.newPassword!==void 0&&(y.assertParamPropValue(typeof r.newPassword=="string",1,"newPassword"),t.newPassword=r.newPassword),r.privilege!==void 0&&(y.assertParamPropValue(nD(r.privilege),1,"privilege"),t.privilege=r.privilege),r.shardingKey!==void 0){let s=r.shardingKey;y.assertParamPropValue(Me.isShardingKey(s),1,"shardingKey"),t.shardingKey=r.shardingKey}if(r.superShardingKey!==void 0){let s=r.superShardingKey;y.assertParamPropValue(Me.isShardingKey(s),1,"superShardingKey"),t.superShardingKey=r.superShardingKey}}if(r.accessToken!==void 0){y.assert(t.user===void 0&&t.password===void 0,y.ERR_TOKEN_BASED_AUTH),e?y.assert(t.homogeneous&&t.externalAuth,y.ERR_POOL_TOKEN_BASED_AUTH):y.assert(t.externalAuth,y.ERR_CONN_TOKEN_BASED_AUTH);let s;typeof r.accessToken=="function"?(t.accessTokenFn=r.accessToken,s=await r.accessToken(!1),Me.isTokenValid(s)||(s=await r.accessToken(!0))):s=r.accessToken,y.assert(Me.isTokenValid(s),y.ERR_TOKEN_HAS_EXPIRED),s.privateKey!==void 0&&y.assert(Me.isPrivateKeyValid(s),y.ERR_INVALID_PRIVATE_KEY),typeof s=="string"?t.token=s:(t.token=s.token,t.privateKey=s.privateKey)}return t.token===void 0&&t.externalAuth&&(t.user||t.password)&&y.throwErr(y.ERR_WRONG_CRED_FOR_EXTAUTH),t}_(Jh,"_verifyOptions");async function iD(r){let e;y.assertArgCount(arguments,1,1),y.assertParamValue(Me.isObject(r),1),r=await Jh(r,!0);let t=r.sessionCallback;typeof t=="function"&&delete r.sessionCallback,r.poolAlias!==void 0?e=r.poolAlias:r.poolAlias===void 0&&!Tr[br]&&!Qn[br]&&(e=br),(Tr[e]||Qn[e])&&y.throwErr(y.ERR_POOL_WITH_ALIAS_ALREADY_EXISTS,e),v.addToOptions(r,"connectionClass","edition","events","externalAuth","stmtCacheSize","poolMax","poolMaxPerShard","poolMin","poolIncrement","poolTimeout","poolPingInterval","queueMax","queueTimeout"),r.poolMin>r.poolMax&&y.throwErr(y.ERR_INVALID_NUMBER_OF_CONNECTIONS,r.poolMax,r.poolMin),Cs===void 0&&!sD&&Qh(),e&&(Qn[e]=!0);let s=new jh;try{await s._impl.create(r)}finally{e&&delete Qn[e]}return e&&(Tr[e]=s),s._setup(r,e),s._sessionCallback=t,s.on("_afterPoolClose",()=>{s.poolAlias&&delete Tr[s.poolAlias]}),s}_(iD,"createPool");async function oD(r){let e={},t;if(y.assertArgCount(arguments,0,1),arguments.length==0?t=br:typeof r=="string"?t=r:(e=r,y.assertParamValue(Me.isObject(e),1),t=e.poolAlias),t){let n=Tr[t];return y.assert(n,y.ERR_POOL_WITH_ALIAS_NOT_FOUND,t),await n.getConnection(e)}e=await Jh(e,!1),v.addToOptions(e,"connectionClass","edition","events","externalAuth","stmtCacheSize"),Cs===void 0&&!v.thinDriverInitialized&&Qh();let s=new Xh;return s._impl=new zh.ConnectionImpl,await s._impl.connect(e),Cs===void 0&&(v.thinDriverInitialized=!0),s}_(oD,"getConnection");function aD(r){let e;return y.assertArgCount(arguments,0,1),r&&y.assertParamValue(typeof r=="string"||typeof r=="number",1),r=r||br,e=Tr[r],e||y.throwErr(y.ERR_POOL_WITH_ALIAS_NOT_FOUND,r),e}_(aD,"getPool");function _D(r){let e={};if(y.assertArgCount(arguments,0,1),r!==void 0&&(y.assertParamValue(Me.isObject(r),1),e={...r},y.assertParamPropString(e,1,"libDir"),y.assertParamPropString(e,1,"configDir"),y.assertParamPropString(e,1,"errorUrl"),y.assertParamPropString(e,1,"driverName")),v.thinDriverInitialized&&y.throwErr(y.ERR_THIN_CONNECTION_ALREADY_CREATED),Cs===void 0){let t=rD();e.driverName===void 0&&(e.driverName=B.DEFAULT_DRIVER_NAME+" thk"),e.errorUrl===void 0&&(e.errorUrl=B.DEFAULT_ERROR_URL);try{t.initOracleClient(e,zh,v)}catch(s){let n=y.transformErr(s);throw n.code==="DPI-1047"&&(n.message+=`
`+Me.getInstallHelp()),n}Cs=r||{}}else GI.isDeepStrictEqual(Cs,e)||y.throwErr(y.ERR_INIT_ORACLE_CLIENT_ARGS);v.thin=!1}_(_D,"initOracleClient");async function cD(r,e){let t={},s=B.SHUTDOWN_MODE_DEFAULT;y.assertArgCount(arguments,0,2),arguments.length==2?(y.assertParamValue(typeof r=="object",1),y.assertParamValue(typeof e=="number",2),t=r,s=e):arguments.length==1&&(y.assertParamValue(typeof r=="object",1),t=r);let n={user:t.user,password:t.password,connectString:t.connectString,connectionString:t.connectionString,externalAuth:t.externalAuth,privilege:B.SYSOPER},i=await this.getConnection(n);await i.shutdown(s),s!=this.SHUTDOWN_MODE_ABORT&&(await i.execute("ALTER DATABASE CLOSE"),await i.execute("ALTER DATABASE DISMOUNT"),await i.shutdown(this.SHUTDOWN_MODE_FINAL)),await i.close()}_(cD,"shutdown");async function TD(r,e){let t={},s={};y.assertArgCount(arguments,0,2),arguments.length==2?(y.assertParamValue(typeof r=="object",1),y.assertParamValue(typeof e=="object",2),t=r,s=e):arguments.length==1&&(y.assertParamValue(typeof r=="object",1),t=r);let n={user:t.user,password:t.password,connectString:t.connectString,connectionString:t.connectionString,externalAuth:t.externalAuth,privilege:this.SYSOPER|this.SYSPRELIM},i=await this.getConnection(n);await i.startup(s),await i.close(),n.privilege=this.SYSOPER,i=await this.getConnection(n),await i.execute("ALTER DATABASE MOUNT"),await i.execute("ALTER DATABASE OPEN"),await i.close()}_(TD,"startup");Zh.exports={AqDeqOptions:HI,AqEnqOptions:vI,AqMessage:KI,AqQueue:WI,BaseDbObject:$I,Connection:Xh,Lob:zI,Pool:jh,PoolStatistics:XI,ResultSet:jI,SodaDatabase:QI,SodaCollection:JI,SodaDocCursor:ZI,SodaDocument:eD,SodaOperation:tD,getConnection:Me.callbackify(oD),createPool:Me.callbackify(iD),getPool:aD,initOracleClient:_D,shutdown:Me.callbackify(cD),startup:Me.callbackify(TD),CQN_OPCODE_ALL_OPS:B.CQN_OPCODE_ALL_OPS,CQN_OPCODE_ALL_ROWS:B.CQN_OPCODE_ALL_ROWS,CQN_OPCODE_ALTER:B.CQN_OPCODE_ALTER,CQN_OPCODE_DELETE:B.CQN_OPCODE_DELETE,CQN_OPCODE_DROP:B.CQN_OPCODE_DROP,CQN_OPCODE_INSERT:B.CQN_OPCODE_INSERT,CQN_OPCODE_UPDATE:B.CQN_OPCODE_UPDATE,DB_TYPE_BFILE:ne.DB_TYPE_BFILE,DB_TYPE_BINARY_DOUBLE:ne.DB_TYPE_BINARY_DOUBLE,DB_TYPE_BINARY_FLOAT:ne.DB_TYPE_BINARY_FLOAT,DB_TYPE_BINARY_INTEGER:ne.DB_TYPE_BINARY_INTEGER,DB_TYPE_BLOB:ne.DB_TYPE_BLOB,DB_TYPE_BOOLEAN:ne.DB_TYPE_BOOLEAN,DB_TYPE_CHAR:ne.DB_TYPE_CHAR,DB_TYPE_CLOB:ne.DB_TYPE_CLOB,DB_TYPE_CURSOR:ne.DB_TYPE_CURSOR,DB_TYPE_DATE:ne.DB_TYPE_DATE,DB_TYPE_INTERVAL_DS:ne.DB_TYPE_INTERVAL_DS,DB_TYPE_INTERVAL_YM:ne.DB_TYPE_INTERVAL_YM,DB_TYPE_JSON:ne.DB_TYPE_JSON,DB_TYPE_LONG:ne.DB_TYPE_LONG,DB_TYPE_LONG_NVARCHAR:ne.DB_TYPE_LONG_NVARCHAR,DB_TYPE_LONG_RAW:ne.DB_TYPE_LONG_RAW,DB_TYPE_NCHAR:ne.DB_TYPE_NCHAR,DB_TYPE_NCLOB:ne.DB_TYPE_NCLOB,DB_TYPE_NUMBER:ne.DB_TYPE_NUMBER,DB_TYPE_NVARCHAR:ne.DB_TYPE_NVARCHAR,DB_TYPE_OBJECT:ne.DB_TYPE_OBJECT,DB_TYPE_RAW:ne.DB_TYPE_RAW,DB_TYPE_ROWID:ne.DB_TYPE_ROWID,DB_TYPE_TIMESTAMP:ne.DB_TYPE_TIMESTAMP,DB_TYPE_TIMESTAMP_LTZ:ne.DB_TYPE_TIMESTAMP_LTZ,DB_TYPE_TIMESTAMP_TZ:ne.DB_TYPE_TIMESTAMP_TZ,DB_TYPE_VARCHAR:ne.DB_TYPE_VARCHAR,DEFAULT:B.DEFAULT,STMT_TYPE_UNKNOWN:B.STMT_TYPE_UNKNOWN,STMT_TYPE_SELECT:B.STMT_TYPE_SELECT,STMT_TYPE_UPDATE:B.STMT_TYPE_UPDATE,STMT_TYPE_DELETE:B.STMT_TYPE_DELETE,STMT_TYPE_INSERT:B.STMT_TYPE_INSERT,STMT_TYPE_CREATE:B.STMT_TYPE_CREATE,STMT_TYPE_DROP:B.STMT_TYPE_DROP,STMT_TYPE_ALTER:B.STMT_TYPE_ALTER,STMT_TYPE_BEGIN:B.STMT_TYPE_BEGIN,STMT_TYPE_DECLARE:B.STMT_TYPE_DECLARE,STMT_TYPE_CALL:B.STMT_TYPE_CALL,STMT_TYPE_EXPLAIN_PLAN:B.STMT_TYPE_EXPLAIN_PLAN,STMT_TYPE_MERGE:B.STMT_TYPE_MERGE,STMT_TYPE_ROLLBACK:B.STMT_TYPE_ROLLBACK,STMT_TYPE_COMMIT:B.STMT_TYPE_COMMIT,SHUTDOWN_MODE_DEFAULT:B.SHUTDOWN_MODE_DEFAULT,SHUTDOWN_MODE_TRANSACTIONAL:B.SHUTDOWN_MODE_TRANSACTIONAL,SHUTDOWN_MODE_TRANSACTIONAL_LOCAL:B.SHUTDOWN_MODE_TRANSACTIONAL_LOCAL,SHUTDOWN_MODE_IMMEDIATE:B.SHUTDOWN_MODE_IMMEDIATE,SHUTDOWN_MODE_ABORT:B.SHUTDOWN_MODE_ABORT,SHUTDOWN_MODE_FINAL:B.SHUTDOWN_MODE_FINAL,STARTUP_MODE_DEFAULT:B.STARTUP_MODE_DEFAULT,STARTUP_MODE_FORCE:B.STARTUP_MODE_FORCE,STARTUP_MODE_RESTRICT:B.STARTUP_MODE_RESTRICT,SUBSCR_EVENT_TYPE_SHUTDOWN:B.SUBSCR_EVENT_TYPE_SHUTDOWN,SUBSCR_EVENT_TYPE_SHUTDOWN_ANY:B.SUBSCR_EVENT_TYPE_SHUTDOWN_ANY,SUBSCR_EVENT_TYPE_STARTUP:B.SUBSCR_EVENT_TYPE_STARTUP,SUBSCR_EVENT_TYPE_DEREG:B.SUBSCR_EVENT_TYPE_DEREG,SUBSCR_EVENT_TYPE_OBJ_CHANGE:B.SUBSCR_EVENT_TYPE_OBJ_CHANGE,SUBSCR_EVENT_TYPE_QUERY_CHANGE:B.SUBSCR_EVENT_TYPE_QUERY_CHANGE,SUBSCR_EVENT_TYPE_AQ:B.SUBSCR_EVENT_TYPE_AQ,SUBSCR_GROUPING_CLASS_TIME:B.SUBSCR_GROUPING_CLASS_TIME,SUBSCR_GROUPING_TYPE_SUMMARY:B.SUBSCR_GROUPING_TYPE_SUMMARY,SUBSCR_GROUPING_TYPE_LAST:B.SUBSCR_GROUPING_TYPE_LAST,SUBSCR_NAMESPACE_AQ:B.SUBSCR_NAMESPACE_AQ,SUBSCR_NAMESPACE_DBCHANGE:B.SUBSCR_NAMESPACE_DBCHANGE,SUBSCR_QOS_BEST_EFFORT:B.SUBSCR_QOS_BEST_EFFORT,SUBSCR_QOS_DEREG_NFY:B.SUBSCR_QOS_DEREG_NFY,SUBSCR_QOS_QUERY:B.SUBSCR_QOS_QUERY,SUBSCR_QOS_RELIABLE:B.SUBSCR_QOS_RELIABLE,SUBSCR_QOS_ROWIDS:B.SUBSCR_QOS_ROWIDS,SYSASM:B.SYSASM,SYSBACKUP:B.SYSBACKUP,SYSDBA:B.SYSDBA,SYSDG:B.SYSDG,SYSKM:B.SYSKM,SYSOPER:B.SYSOPER,SYSPRELIM:B.SYSPRELIM,SYSRAC:B.SYSRAC,BIND_IN:B.BIND_IN,BIND_INOUT:B.BIND_INOUT,BIND_OUT:B.BIND_OUT,OUT_FORMAT_ARRAY:B.OUT_FORMAT_ARRAY,OUT_FORMAT_OBJECT:B.OUT_FORMAT_OBJECT,SODA_COLL_MAP_MODE:B.SODA_COLL_MAP_MODE,POOL_STATUS_OPEN:B.POOL_STATUS_OPEN,POOL_STATUS_DRAINING:B.POOL_STATUS_DRAINING,POOL_STATUS_CLOSED:B.POOL_STATUS_CLOSED,POOL_STATUS_RECONFIGURING:B.POOL_STATUS_RECONFIGURING,AQ_DEQ_NO_WAIT:B.AQ_DEQ_NO_WAIT,AQ_DEQ_WAIT_FOREVER:B.AQ_DEQ_WAIT_FOREVER,AQ_DEQ_MODE_BROWSE:B.AQ_DEQ_MODE_BROWSE,AQ_DEQ_MODE_LOCKED:B.AQ_DEQ_MODE_LOCKED,AQ_DEQ_MODE_REMOVE:B.AQ_DEQ_MODE_REMOVE,AQ_DEQ_MODE_REMOVE_NO_DATA:B.AQ_DEQ_MODE_REMOVE_NO_DATA,AQ_DEQ_NAV_FIRST_MSG:B.AQ_DEQ_NAV_FIRST_MSG,AQ_DEQ_NAV_NEXT_TRANSACTION:B.AQ_DEQ_NAV_NEXT_TRANSACTION,AQ_DEQ_NAV_NEXT_MSG:B.AQ_DEQ_NAV_NEXT_MSG,AQ_MSG_DELIV_MODE_PERSISTENT:B.AQ_MSG_DELIV_MODE_PERSISTENT,AQ_MSG_DELIV_MODE_BUFFERED:B.AQ_MSG_DELIV_MODE_BUFFERED,AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED:B.AQ_MSG_DELIV_MODE_PERSISTENT_OR_BUFFERED,AQ_MSG_STATE_READY:B.AQ_MSG_STATE_READY,AQ_MSG_STATE_WAITING:B.AQ_MSG_STATE_WAITING,AQ_MSG_STATE_PROCESSED:B.AQ_MSG_STATE_PROCESSED,AQ_MSG_STATE_EXPIRED:B.AQ_MSG_STATE_EXPIRED,AQ_VISIBILITY_IMMEDIATE:B.AQ_VISIBILITY_IMMEDIATE,AQ_VISIBILITY_ON_COMMIT:B.AQ_VISIBILITY_ON_COMMIT,TPC_BEGIN_JOIN:B.TPC_BEGIN_JOIN,TPC_BEGIN_NEW:B.TPC_BEGIN_NEW,TPC_BEGIN_PROMOTE:B.TPC_BEGIN_PROMOTE,TPC_BEGIN_RESUME:B.TPC_BEGIN_RESUME,TPC_END_NORMAL:B.TPC_END_NORMAL,TPC_END_SUSPEND:B.TPC_END_SUSPEND,BLOB:ne.DB_TYPE_BLOB,BUFFER:ne.DB_TYPE_RAW,CLOB:ne.DB_TYPE_CLOB,CURSOR:ne.DB_TYPE_CURSOR,DATE:ne.DB_TYPE_TIMESTAMP,NCLOB:ne.DB_TYPE_NCLOB,NUMBER:ne.DB_TYPE_NUMBER,STRING:ne.DB_TYPE_VARCHAR,ARRAY:B.OUT_FORMAT_ARRAY,OBJECT:B.OUT_FORMAT_OBJECT,get autoCommit(){return v.autoCommit},get connectionClass(){return v.connectionClass},get dbObjectAsPojo(){return v.dbObjectAsPojo},get edition(){return v.edition},get errorOnConcurrentExecute(){return v.errorOnConcurrentExecute},get events(){return v.events},get externalAuth(){return v.externalAuth},get fetchArraySize(){return v.fetchArraySize},get fetchAsBuffer(){return v.fetchAsBuffer},get fetchAsString(){return v.fetchAsString},get fetchTypeHandler(){return v.fetchTypeHandler},get lobPrefetchSize(){return v.lobPrefetchSize},get maxRows(){return v.maxRows},get oracleClientVersion(){return Cs===void 0&&y.throwNotImplemented("getting the Oracle Client version"),v.oracleClientVersion},get oracleClientVersionString(){return Cs===void 0&&y.throwNotImplemented("getting the Oracle Client version"),v.oracleClientVersionString},get outFormat(){return v.outFormat},get poolIncrement(){return v.poolIncrement},get poolMax(){return v.poolMax},get poolMaxPerShard(){return v.poolMaxPerShard},get poolMin(){return v.poolMin},get poolPingInterval(){return v.poolPingInterval},get poolTimeout(){return v.poolTimeout},get prefetchRows(){return v.prefetchRows},get stmtCacheSize(){return v.stmtCacheSize},get thin(){return v.thin},get version(){return B.VERSION_MAJOR*1e4+B.VERSION_MINOR*100+B.VERSION_PATCH},get versionString(){return B.VERSION_STRING},get versionSuffix(){return B.VERSION_SUFFIX},set autoCommit(r){y.assertPropValue(typeof r=="boolean","autoCommit"),v.autoCommit=r},set connectionClass(r){y.assertPropValue(typeof r=="string","connectionClass"),v.connectionClass=r},set dbObjectAsPojo(r){y.assertPropValue(typeof r=="boolean","dbObjectAsPojo"),v.dbObjectAsPojo=r},set edition(r){y.assertPropValue(typeof r=="string","edition"),v.edition=r},set errorOnConcurrentExecute(r){y.assertPropValue(typeof r=="boolean","errorOnConcurrentExecute"),v.errorOnConcurrentExecute=r},set events(r){y.assertPropValue(typeof r=="boolean","events"),v.events=r},set externalAuth(r){y.assertPropValue(typeof r=="boolean","externalAuth"),v.externalAuth=r},set fetchArraySize(r){y.assertPropValue(Number.isInteger(r)&&r>0,"fetchArraySize"),v.fetchArraySize=r},set fetchAsBuffer(r){y.assertPropValue(Array.isArray(r),"fetchAsBuffer"),v.createFetchTypeMap(v.fetchAsString,r),v.fetchAsBuffer=r},set fetchAsString(r){y.assertPropValue(Array.isArray(r),"fetchAsString"),v.createFetchTypeMap(r,v.fetchAsBuffer),v.fetchAsString=r},set fetchTypeHandler(r){r!==void 0&&y.assertPropValue(typeof r=="function","fetchTypeHandler"),v.fetchTypeHandler=r},set lobPrefetchSize(r){y.assertPropValue(Number.isInteger(r)&&r>=0,"lobPrefetchSize"),v.lobPrefetchSize=r},set maxRows(r){y.assertPropValue(Number.isInteger(r)&&r>=0,"maxRows"),v.maxRows=r},set outFormat(r){r!==B.OUT_FORMAT_ARRAY&&r!==B.OUT_FORMAT_OBJECT&&y.throwErr(y.ERR_INVALID_PROPERTY_VALUE,"outFormat"),v.outFormat=r},set poolIncrement(r){y.assertPropValue(Number.isInteger(r)&&r>=0,"poolIncrement"),v.poolIncrement=r},set poolMax(r){y.assertPropValue(Number.isInteger(r)&&r>=0,"poolMax"),v.poolMax=r},set poolMaxPerShard(r){y.assertPropValue(Number.isInteger(r)&&r>=0,"poolMaxPerShard"),v.poolMaxPerShard=r},set poolMin(r){y.assertPropValue(Number.isInteger(r)&&r>=0,"poolMin"),v.poolMin=r},set poolPingInterval(r){y.assertPropValue(Number.isInteger(r)&&r<2**31&&r>=(-2)**31,"poolPingInterval"),v.poolPingInterval=r},set poolTimeout(r){y.assertPropValue(Number.isInteger(r)&&r>=0,"poolTimeout"),v.poolTimeout=r},set prefetchRows(r){y.assertPropValue(Number.isInteger(r)&&r>=0,"prefetchRows"),v.prefetchRows=r},set stmtCacheSize(r){y.assertPropValue(Number.isInteger(r)&&r>=0,"stmtCacheSize"),v.stmtCacheSize=r}}});var sA=R((f0,tA)=>{tA.exports=eA()});var kc=R(rA=>{rA.require=function(){if(typeof process=="object"&&process.versions&&process.versions.electron)try{let r=require("original-fs");if(Object.keys(r).length>0)return r}catch{}return require("fs")}});var qc=R((R0,nA)=>{nA.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var _A=R((I0,aA)=>{var lD=kc().require(),ht=require("path"),iA=qc(),ED=typeof process=="object"&&process.platform==="win32",oA=_(r=>r&&typeof r=="object","is_Obj"),Gc=new Uint32Array(256).map((r,e)=>{for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e>>>=1;return e>>>0});function rt(r){this.sep=ht.sep,this.fs=lD,oA(r)&&oA(r.fs)&&typeof r.fs.statSync=="function"&&(this.fs=r.fs)}_(rt,"Utils");aA.exports=rt;rt.prototype.makeDir=function(r){let e=this;function t(s){let n=s.split(e.sep)[0];s.split(e.sep).forEach(function(i){if(!(!i||i.substr(-1,1)===":")){n+=e.sep+i;var a;try{a=e.fs.statSync(n)}catch{e.fs.mkdirSync(n)}if(a&&a.isFile())throw Errors.FILE_IN_THE_WAY.replace("%s",n)}})}_(t,"mkdirSync"),t(r)};rt.prototype.writeFileTo=function(r,e,t,s){let n=this;if(n.fs.existsSync(r)){if(!t)return!1;var i=n.fs.statSync(r);if(i.isDirectory())return!1}var a=ht.dirname(r);n.fs.existsSync(a)||n.makeDir(a);var c;try{c=n.fs.openSync(r,"w",438)}catch{n.fs.chmodSync(r,438),c=n.fs.openSync(r,"w",438)}if(c)try{n.fs.writeSync(c,e,0,e.length,0)}finally{n.fs.closeSync(c)}return n.fs.chmodSync(r,s||438),!0};rt.prototype.writeFileToAsync=function(r,e,t,s,n){typeof s=="function"&&(n=s,s=void 0);let i=this;i.fs.exists(r,function(a){if(a&&!t)return n(!1);i.fs.stat(r,function(c,T){if(a&&T.isDirectory())return n(!1);var E=ht.dirname(r);i.fs.exists(E,function(l){l||i.makeDir(E),i.fs.open(r,"w",438,function(h,d){h?i.fs.chmod(r,438,function(){i.fs.open(r,"w",438,function(A,u){i.fs.write(u,e,0,e.length,0,function(){i.fs.close(u,function(){i.fs.chmod(r,s||438,function(){n(!0)})})})})}):d?i.fs.write(d,e,0,e.length,0,function(){i.fs.close(d,function(){i.fs.chmod(r,s||438,function(){n(!0)})})}):i.fs.chmod(r,s||438,function(){n(!0)})})})})})};rt.prototype.findFiles=function(r){let e=this;function t(s,n,i){typeof n=="boolean"&&(i=n,n=void 0);let a=[];return e.fs.readdirSync(s).forEach(function(c){var T=ht.join(s,c);e.fs.statSync(T).isDirectory()&&i&&(a=a.concat(t(T,n,i))),(!n||n.test(T))&&a.push(ht.normalize(T)+(e.fs.statSync(T).isDirectory()?e.sep:""))}),a}return _(t,"findSync"),t(r,void 0,!0)};rt.prototype.getAttributes=function(){};rt.prototype.setAttributes=function(){};rt.crc32update=function(r,e){return Gc[(r^e)&255]^r>>>8};rt.crc32=function(r){typeof r=="string"&&(r=Buffer.from(r,"utf8")),Gc.length||genCRCTable();let e=r.length,t=-1;for(let s=0;s<e;)t=rt.crc32update(t,r[s++]);return~t>>>0};rt.methodToString=function(r){switch(r){case iA.STORED:return"STORED ("+r+")";case iA.DEFLATED:return"DEFLATED ("+r+")";default:return"UNSUPPORTED ("+r+")"}};rt.canonical=function(r){if(!r)return"";var e=ht.posix.normalize("/"+r.split("\\").join("/"));return ht.join(".",e)};rt.sanitize=function(r,e){r=ht.resolve(ht.normalize(r));for(var t=e.split("/"),s=0,n=t.length;s<n;s++){var i=ht.normalize(ht.join(r,t.slice(s,n).join(ht.sep)));if(i.indexOf(r)===0)return i}return ht.normalize(ht.join(r,ht.basename(e)))};rt.toBuffer=_(function(e){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?Buffer.from(e,"utf8"):Buffer.alloc(0)},"toBuffer");rt.readBigUInt64LE=function(r,e){var t=Buffer.from(r.slice(e,e+8));return t.swap64(),parseInt(`0x${t.toString("hex")}`)};rt.isWin=ED;rt.crcTable=Gc});var TA=R((C0,cA)=>{cA.exports={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed",FILE_IN_THE_WAY:"There is a file in the way: %s",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:"File not found: %s",NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found"}});var uA=R((g0,EA)=>{var Jn=kc().require(),lA=require("path");Jn.existsSync=Jn.existsSync||lA.existsSync;EA.exports=function(r){var e=r||"",t=n(),s=null;function n(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return _(n,"newAttr"),e&&Jn.existsSync(e)?(s=Jn.statSync(e),t.directory=s.isDirectory(),t.mtime=s.mtime,t.atime=s.atime,t.executable=(73&s.mode)!==0,t.readonly=(128&s.mode)===0,t.hidden=lA.basename(e)[0]==="."):console.warn("Invalid path: "+e),{get directory(){return t.directory},get readOnly(){return t.readonly},get hidden(){return t.hidden},get mtime(){return t.mtime},get atime(){return t.atime},get executable(){return t.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:e,isDirectory:t.directory,isReadOnly:t.readonly,isHidden:t.hidden,isExecutable:t.executable,mTime:t.mtime,aTime:t.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var lr=R((y0,Fr)=>{Fr.exports=_A();Fr.exports.Constants=qc();Fr.exports.Errors=TA();Fr.exports.FileAttr=uA()});var SA=R((L0,NA)=>{var kr=lr(),G=kr.Constants;NA.exports=function(){var r=20,e=10,t=0,s=0,n=0,i=0,a=0,c=0,T=0,E=0,l=0,h=0,d=0,A=0,u=0;r|=kr.isWin?2560:768,t|=G.FLG_EFS;var N={};function m(S){S=new Date(S),n=(S.getFullYear()-1980&127)<<25|S.getMonth()+1<<21|S.getDate()<<16|S.getHours()<<11|S.getMinutes()<<5|S.getSeconds()>>1}return _(m,"setTime"),m(+new Date),{get made(){return r},set made(S){r=S},get version(){return e},set version(S){e=S},get flags(){return t},set flags(S){t=S},get method(){return s},set method(S){switch(S){case G.STORED:this.version=10;case G.DEFLATED:default:this.version=20}s=S},get time(){return new Date((n>>25&127)+1980,(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(n&31)<<1)},set time(S){m(S)},get crc(){return i},set crc(S){i=Math.max(0,S)>>>0},get compressedSize(){return a},set compressedSize(S){a=Math.max(0,S)>>>0},get size(){return c},set size(S){c=Math.max(0,S)>>>0},get fileNameLength(){return T},set fileNameLength(S){T=S},get extraLength(){return E},set extraLength(S){E=S},get commentLength(){return l},set commentLength(S){l=S},get diskNumStart(){return h},set diskNumStart(S){h=Math.max(0,S)>>>0},get inAttr(){return d},set inAttr(S){d=Math.max(0,S)>>>0},get attr(){return A},set attr(S){A=Math.max(0,S)>>>0},get fileAttr(){return A?(A>>>0|0)>>16&4095:0},get offset(){return u},set offset(S){u=Math.max(0,S)>>>0},get encripted(){return(t&1)===1},get entryHeaderSize(){return G.CENHDR+T+E+l},get realDataOffset(){return u+G.LOCHDR+N.fnameLen+N.extraLen},get dataHeader(){return N},loadDataHeaderFromBinary:function(S){var I=S.slice(u,u+G.LOCHDR);if(I.readUInt32LE(0)!==G.LOCSIG)throw new Error(kr.Errors.INVALID_LOC);N={version:I.readUInt16LE(G.LOCVER),flags:I.readUInt16LE(G.LOCFLG),method:I.readUInt16LE(G.LOCHOW),time:I.readUInt32LE(G.LOCTIM),crc:I.readUInt32LE(G.LOCCRC),compressedSize:I.readUInt32LE(G.LOCSIZ),size:I.readUInt32LE(G.LOCLEN),fnameLen:I.readUInt16LE(G.LOCNAM),extraLen:I.readUInt16LE(G.LOCEXT)}},loadFromBinary:function(S){if(S.length!==G.CENHDR||S.readUInt32LE(0)!==G.CENSIG)throw new Error(kr.Errors.INVALID_CEN);r=S.readUInt16LE(G.CENVEM),e=S.readUInt16LE(G.CENVER),t=S.readUInt16LE(G.CENFLG),s=S.readUInt16LE(G.CENHOW),n=S.readUInt32LE(G.CENTIM),i=S.readUInt32LE(G.CENCRC),a=S.readUInt32LE(G.CENSIZ),c=S.readUInt32LE(G.CENLEN),T=S.readUInt16LE(G.CENNAM),E=S.readUInt16LE(G.CENEXT),l=S.readUInt16LE(G.CENCOM),h=S.readUInt16LE(G.CENDSK),d=S.readUInt16LE(G.CENATT),A=S.readUInt32LE(G.CENATX),u=S.readUInt32LE(G.CENOFF)},dataHeaderToBinary:function(){var S=Buffer.alloc(G.LOCHDR);return S.writeUInt32LE(G.LOCSIG,0),S.writeUInt16LE(e,G.LOCVER),S.writeUInt16LE(t,G.LOCFLG),S.writeUInt16LE(s,G.LOCHOW),S.writeUInt32LE(n,G.LOCTIM),S.writeUInt32LE(i,G.LOCCRC),S.writeUInt32LE(a,G.LOCSIZ),S.writeUInt32LE(c,G.LOCLEN),S.writeUInt16LE(T,G.LOCNAM),S.writeUInt16LE(E,G.LOCEXT),S},entryHeaderToBinary:function(){var S=Buffer.alloc(G.CENHDR+T+E+l);return S.writeUInt32LE(G.CENSIG,0),S.writeUInt16LE(r,G.CENVEM),S.writeUInt16LE(e,G.CENVER),S.writeUInt16LE(t,G.CENFLG),S.writeUInt16LE(s,G.CENHOW),S.writeUInt32LE(n,G.CENTIM),S.writeUInt32LE(i,G.CENCRC),S.writeUInt32LE(a,G.CENSIZ),S.writeUInt32LE(c,G.CENLEN),S.writeUInt16LE(T,G.CENNAM),S.writeUInt16LE(E,G.CENEXT),S.writeUInt16LE(l,G.CENCOM),S.writeUInt16LE(h,G.CENDSK),S.writeUInt16LE(d,G.CENATT),S.writeUInt32LE(A,G.CENATX),S.writeUInt32LE(u,G.CENOFF),S.fill(0,G.CENHDR),S},toJSON:function(){let S=_(function(I){return I+" bytes"},"bytes");return{made:r,version:e,flags:t,method:kr.methodToString(s),time:this.time,crc:"0x"+i.toString(16).toUpperCase(),compressedSize:S(a),size:S(c),fileNameLength:S(T),extraLength:S(E),commentLength:S(l),diskNumStart:h,inAttr:d,attr:A,offset:u,entryHeaderSize:S(G.CENHDR+T+E+l)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var AA=R((Y0,hA)=>{var Er=lr(),Ye=Er.Constants;hA.exports=function(){var r=0,e=0,t=0,s=0,n=0;return{get diskEntries(){return r},set diskEntries(i){r=e=i},get totalEntries(){return e},set totalEntries(i){e=r=i},get size(){return t},set size(i){t=i},get offset(){return s},set offset(i){s=i},get commentLength(){return n},set commentLength(i){n=i},get mainHeaderSize(){return Ye.ENDHDR+n},loadFromBinary:function(i){if((i.length!==Ye.ENDHDR||i.readUInt32LE(0)!==Ye.ENDSIG)&&(i.length<Ye.ZIP64HDR||i.readUInt32LE(0)!==Ye.ZIP64SIG))throw new Error(Er.Errors.INVALID_END);i.readUInt32LE(0)===Ye.ENDSIG?(r=i.readUInt16LE(Ye.ENDSUB),e=i.readUInt16LE(Ye.ENDTOT),t=i.readUInt32LE(Ye.ENDSIZ),s=i.readUInt32LE(Ye.ENDOFF),n=i.readUInt16LE(Ye.ENDCOM)):(r=Er.readBigUInt64LE(i,Ye.ZIP64SUB),e=Er.readBigUInt64LE(i,Ye.ZIP64TOT),t=Er.readBigUInt64LE(i,Ye.ZIP64SIZ),s=Er.readBigUInt64LE(i,Ye.ZIP64OFF),n=0)},toBinary:function(){var i=Buffer.alloc(Ye.ENDHDR+n);return i.writeUInt32LE(Ye.ENDSIG,0),i.writeUInt32LE(0,4),i.writeUInt16LE(r,Ye.ENDSUB),i.writeUInt16LE(e,Ye.ENDTOT),i.writeUInt32LE(t,Ye.ENDSIZ),i.writeUInt32LE(s,Ye.ENDOFF),i.writeUInt16LE(n,Ye.ENDCOM),i.fill(" ",Ye.ENDHDR),i},toJSON:function(){let i=_(function(a,c){let T=a.toString(16).toUpperCase();for(;T.length<c;)T="0"+T;return"0x"+T},"offset");return{diskEntries:r,totalEntries:e,size:t+" bytes",offset:i(s,4),commentLength:n}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var vc=R(Hc=>{Hc.EntryHeader=SA();Hc.MainHeader=AA()});var pA=R((M0,dA)=>{dA.exports=function(r){var e=require("zlib"),t={chunkSize:(parseInt(r.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(r,t)},deflateAsync:function(s){var n=e.createDeflateRaw(t),i=[],a=0;n.on("data",function(c){i.push(c),a+=c.length}),n.on("end",function(){var c=Buffer.alloc(a),T=0;c.fill(0);for(var E=0;E<i.length;E++){var l=i[E];l.copy(c,T),T+=l.length}s&&s(c)}),n.end(r)}}}});var fA=R((V0,mA)=>{mA.exports=function(r){var e=require("zlib");return{inflate:function(){return e.inflateRawSync(r)},inflateAsync:function(t){var s=e.createInflateRaw(),n=[],i=0;s.on("data",function(a){n.push(a),i+=a.length}),s.on("end",function(){var a=Buffer.alloc(i),c=0;a.fill(0);for(var T=0;T<n.length;T++){var E=n[T];E.copy(a,c),c+=E.length}t&&t(a)}),s.end(r)}}}});var CA=R((x0,DA)=>{"use strict";var{randomFillSync:PA}=require("crypto"),uD=new Uint32Array(256).map((r,e)=>{for(let t=0;t<8;t++)e&1?e=e>>>1^3988292384:e>>>=1;return e>>>0}),IA=_((r,e)=>Math.imul(r,e)>>>0,"uMul"),RA=_((r,e)=>uD[(r^e)&255]^r>>>8,"crc32update"),qr=_(()=>typeof PA=="function"?PA(Buffer.alloc(12)):qr.node(),"genSalt");qr.node=()=>{let r=Buffer.alloc(12),e=r.length;for(let t=0;t<e;t++)r[t]=Math.random()*256&255;return r};var Zn={genSalt:qr};function ei(r){let e=Buffer.isBuffer(r)?r:Buffer.from(r);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let t=0;t<e.length;t++)this.updateKeys(e[t])}_(ei,"Initkeys");ei.prototype.updateKeys=function(r){let e=this.keys;return e[0]=RA(e[0],r),e[1]+=e[0]&255,e[1]=IA(e[1],134775813)+1,e[2]=RA(e[2],e[1]>>>24),r};ei.prototype.next=function(){let r=(this.keys[2]|2)>>>0;return IA(r,r^1)>>8&255};function ND(r){let e=new ei(r);return function(t){let s=Buffer.alloc(t.length),n=0;for(let i of t)s[n++]=e.updateKeys(i^e.next());return s}}_(ND,"make_decrypter");function SD(r){let e=new ei(r);return function(t,s,n=0){s||(s=Buffer.alloc(t.length));for(let i of t){let a=e.next();s[n++]=i^a,e.updateKeys(i)}return s}}_(SD,"make_encrypter");function hD(r,e,t){if(!r||!Buffer.isBuffer(r)||r.length<12)return Buffer.alloc(0);let s=ND(t);if(s(r.slice(0,12))[11]!==e.crc>>>24)throw"ADM-ZIP: Wrong Password";return s(r.slice(12))}_(hD,"decrypt");function AD(r){Buffer.isBuffer(r)&&r.length>=12?Zn.genSalt=function(){return r.slice(0,12)}:r==="node"?Zn.genSalt=qr.node:Zn.genSalt=qr}_(AD,"_salter");function dD(r,e,t,s=!1){r==null&&(r=Buffer.alloc(0)),Buffer.isBuffer(r)||(r=Buffer.from(r.toString()));let n=SD(t),i=Zn.genSalt();i[11]=e.crc>>>24&255,s&&(i[10]=e.crc>>>16&255);let a=Buffer.alloc(r.length+12);return n(i,a),n(r,a,12)}_(dD,"encrypt");DA.exports={decrypt:hD,encrypt:dD,_salter:AD}});var gA=R(ti=>{ti.Deflater=pA();ti.Inflater=fA();ti.ZipCrypto=CA()});var Wc=R((k0,OA)=>{var He=lr(),pD=vc(),Ct=He.Constants,Kc=gA();OA.exports=function(r){var e=new pD.EntryHeader,t=Buffer.alloc(0),s=Buffer.alloc(0),n=!1,i=null,a=Buffer.alloc(0);function c(){return!r||!Buffer.isBuffer(r)?Buffer.alloc(0):(e.loadDataHeaderFromBinary(r),r.slice(e.realDataOffset,e.realDataOffset+e.compressedSize))}_(c,"getCompressedDataFromZip");function T(u){return!((e.flags&8)!==8&&He.crc32(u)!==e.dataHeader.crc)}_(T,"crc32OK");function E(u,N,m){if(typeof N>"u"&&typeof u=="string"&&(m=u,u=void 0),n)return u&&N&&N(Buffer.alloc(0),He.Errors.DIRECTORY_CONTENT_ERROR),Buffer.alloc(0);var S=c();if(S.length===0)return u&&N&&N(S),S;if(e.encripted){if(typeof m!="string"&&!Buffer.isBuffer(m))throw new Error("ADM-ZIP: Incompatible password parameter");S=Kc.ZipCrypto.decrypt(S,e,m)}var I=Buffer.alloc(e.size);switch(e.method){case He.Constants.STORED:if(S.copy(I),T(I))return u&&N&&N(I),I;throw u&&N&&N(I,He.Errors.BAD_CRC),new Error(He.Errors.BAD_CRC);case He.Constants.DEFLATED:var f=new Kc.Inflater(S);if(u)f.inflateAsync(function(g){g.copy(g,0),N&&(T(g)?N(g):N(g,He.Errors.BAD_CRC))});else{if(f.inflate(I).copy(I,0),!T(I))throw new Error(He.Errors.BAD_CRC+" "+t.toString());return I}break;default:throw u&&N&&N(Buffer.alloc(0),He.Errors.UNKNOWN_METHOD),new Error(He.Errors.UNKNOWN_METHOD)}}_(E,"decompress");function l(u,N){if((!i||!i.length)&&Buffer.isBuffer(r))return u&&N&&N(c()),c();if(i.length&&!n){var m;switch(e.method){case He.Constants.STORED:return e.compressedSize=e.size,m=Buffer.alloc(i.length),i.copy(m),u&&N&&N(m),m;default:case He.Constants.DEFLATED:var S=new Kc.Deflater(i);if(u)S.deflateAsync(function(f){m=Buffer.alloc(f.length),e.compressedSize=f.length,f.copy(m),N&&N(m)});else{var I=S.deflate();return e.compressedSize=I.length,I}S=null;break}}else if(u&&N)N(Buffer.alloc(0));else return Buffer.alloc(0)}_(l,"compress");function h(u,N){return(u.readUInt32LE(N+4)<<4)+u.readUInt32LE(N)}_(h,"readUInt64LE");function d(u){for(var N=0,m,S,I;N<u.length;)m=u.readUInt16LE(N),N+=2,S=u.readUInt16LE(N),N+=2,I=u.slice(N,N+S),N+=S,Ct.ID_ZIP64===m&&A(I)}_(d,"parseExtra");function A(u){var N,m,S,I;u.length>=Ct.EF_ZIP64_SCOMP&&(N=h(u,Ct.EF_ZIP64_SUNCOMP),e.size===Ct.EF_ZIP64_OR_32&&(e.size=N)),u.length>=Ct.EF_ZIP64_RHO&&(m=h(u,Ct.EF_ZIP64_SCOMP),e.compressedSize===Ct.EF_ZIP64_OR_32&&(e.compressedSize=m)),u.length>=Ct.EF_ZIP64_DSN&&(S=h(u,Ct.EF_ZIP64_RHO),e.offset===Ct.EF_ZIP64_OR_32&&(e.offset=S)),u.length>=Ct.EF_ZIP64_DSN+4&&(I=u.readUInt32LE(Ct.EF_ZIP64_DSN),e.diskNumStart===Ct.EF_ZIP64_OR_16&&(e.diskNumStart=I))}return _(A,"parseZip64ExtendedInformation"),{get entryName(){return t.toString()},get rawEntryName(){return t},set entryName(u){t=He.toBuffer(u);var N=t[t.length-1];n=N===47||N===92,e.fileNameLength=t.length},get extra(){return a},set extra(u){a=u,e.extraLength=u.length,d(u)},get comment(){return s.toString()},set comment(u){s=He.toBuffer(u),e.commentLength=s.length},get name(){var u=t.toString();return n?u.substr(u.length-1).split("/").pop():u.split("/").pop()},get isDirectory(){return n},getCompressedData:function(){return l(!1,null)},getCompressedDataAsync:function(u){l(!0,u)},setData:function(u){i=He.toBuffer(u),!n&&i.length?(e.size=i.length,e.method=He.Constants.DEFLATED,e.crc=He.crc32(u),e.changed=!0):e.method=He.Constants.STORED},getData:function(u){return e.changed?i:E(!1,null,u)},getDataAsync:function(u,N){e.changed?u(i):E(!0,u,N)},set attr(u){e.attr=u},get attr(){return e.attr},set header(u){e.loadFromBinary(u)},get header(){return e},packHeader:function(){var u=e.entryHeaderToBinary(),N=He.Constants.CENHDR;return t.copy(u,N),N+=t.length,e.extraLength&&(a.copy(u,N),N+=e.extraLength),e.commentLength&&s.copy(u,N),u},toJSON:function(){let u=_(function(N){return"<"+(N&&N.length+" bytes buffer"||"null")+">"},"bytes");return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:e.toJSON(),compressedData:u(r),data:u(i)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var BA=R((G0,LA)=>{var yA=Wc(),mD=vc(),Tt=lr();LA.exports=function(r,e){var t=[],s={},n=Buffer.alloc(0),i=new mD.MainHeader,a=!1;let c=Object.assign(Object.create(null),e),{noSort:T}=c;r?h(c.readEntries):a=!0;function E(A){let u=i.diskEntries,N=i.offset;for(let m=0;m<u;m++){let S=N,I=new yA(r);I.header=r.slice(S,S+=Tt.Constants.CENHDR),I.entryName=r.slice(S,S+=I.header.fileNameLength),N+=I.header.entryHeaderSize,A(I)}}_(E,"iterateEntries");function l(){a=!0,s={},t=new Array(i.diskEntries);for(var A=i.offset,u=0;u<t.length;u++){var N=A,m=new yA(r);m.header=r.slice(N,N+=Tt.Constants.CENHDR),m.entryName=r.slice(N,N+=m.header.fileNameLength),m.header.extraLength&&(m.extra=r.slice(N,N+=m.header.extraLength)),m.header.commentLength&&(m.comment=r.slice(N,N+m.header.commentLength)),A+=m.header.entryHeaderSize,t[u]=m,s[m.entryName]=m}}_(l,"readEntries");function h(A){var u=r.length-Tt.Constants.ENDHDR,N=Math.max(0,u-65535),m=N,S=r.length,I=-1,f=0;for(u;u>=m;u--)if(r[u]===80){if(r.readUInt32LE(u)===Tt.Constants.ENDSIG){I=u,f=u,S=u+Tt.Constants.ENDHDR,m=u-Tt.Constants.END64HDR;continue}if(r.readUInt32LE(u)===Tt.Constants.END64SIG){m=N;continue}if(r.readUInt32LE(u)===Tt.Constants.ZIP64SIG){I=u,S=u+Tt.readBigUInt64LE(r,u+Tt.Constants.ZIP64SIZE)+Tt.Constants.ZIP64LEAD;break}}if(!~I)throw new Error(Tt.Errors.INVALID_FORMAT);i.loadFromBinary(r.slice(I,S)),i.commentLength&&(n=r.slice(f+Tt.Constants.ENDHDR)),A&&l()}_(h,"readMainHeader");function d(){t.length>1&&!T&&t.sort((A,u)=>A.entryName.toLowerCase().localeCompare(u.entryName.toLowerCase()))}return _(d,"sortEntries"),{get entries(){return a||l(),t},get comment(){return n.toString()},set comment(A){n=Tt.toBuffer(A),i.commentLength=n.length},getEntryCount:function(){return a?t.length:i.diskEntries},forEach:function(A){if(!a){E(A);return}t.forEach(A)},getEntry:function(A){return a||l(),s[A]||null},setEntry:function(A){a||l(),t.push(A),s[A.entryName]=A,i.totalEntries=t.length},deleteEntry:function(A){a||l();var u=s[A];if(u&&u.isDirectory){var N=this;this.getEntryChildren(u).forEach(function(m){m.entryName!==A&&N.deleteEntry(m.entryName)})}t.splice(t.indexOf(u),1),delete s[A],i.totalEntries=t.length},getEntryChildren:function(A){if(a||l(),A&&A.isDirectory){let u=[],N=A.entryName,m=N.length;return t.forEach(function(S){S.entryName.substr(0,m)===N&&u.push(S)}),u}return[]},compressToBuffer:function(){a||l(),d();let A=[],u=[],N=0,m=0;i.size=0,i.offset=0;for(let f of t){let g=f.getCompressedData();f.header.offset=m;let w=f.header.dataHeaderToBinary(),V=f.rawEntryName.length,q=Buffer.alloc(V+f.extra.length);f.rawEntryName.copy(q,0),q.copy(f.extra,V);let K=w.length+q.length+g.length;m+=K,A.push(w),A.push(q),A.push(g);let D=f.packHeader();u.push(D),i.size+=D.length,N+=K+D.length}N+=i.mainHeaderSize,i.offset=m,m=0;let S=Buffer.alloc(N);for(let f of A)f.copy(S,m),m+=f.length;for(let f of u)f.copy(S,m),m+=f.length;let I=i.toBinary();return n&&n.copy(I,Tt.Constants.ENDHDR),I.copy(S,m),S},toAsyncBuffer:function(A,u,N,m){try{a||l(),d();let S=[],I=[],f=0,g=0;i.size=0,i.offset=0;let w=_(function(V){if(V.length){let q=V.pop(),K=q.entryName+q.extra.toString();N&&N(K),q.getCompressedDataAsync(function(D){m&&m(K),q.header.offset=g;let F=q.header.dataHeaderToBinary(),P=Buffer.alloc(K.length,K),L=F.length+P.length+D.length;g+=L,S.push(F),S.push(P),S.push(D);let x=q.packHeader();I.push(x),i.size+=x.length,f+=L+x.length,w(V)})}else{f+=i.mainHeaderSize,i.offset=g,g=0;let q=Buffer.alloc(f);S.forEach(function(D){D.copy(q,g),g+=D.length}),I.forEach(function(D){D.copy(q,g),g+=D.length});let K=i.toBinary();n&&n.copy(K,Tt.Constants.ENDHDR),K.copy(q,g),A(q)}},"compress2Buffer");w(t)}catch(S){u(S)}}}}});var wA=R((v0,YA)=>{var $e=lr(),jt=require("path"),fD=Wc(),PD=BA(),bs=_((r,e)=>typeof r=="boolean"?r:e,"get_Bool"),$c=_((r,e)=>typeof r=="string"?r:e,"get_Str"),RD={noSort:!1,readEntries:!1,method:$e.Constants.NONE,fs:null};YA.exports=function(r,e){let t=null,s=Object.assign(Object.create(null),RD);r&&typeof r=="object"&&(r instanceof Uint8Array||(Object.assign(s,r),r=s.input?s.input:void 0,s.input&&delete s.input),Buffer.isBuffer(r)&&(t=r,s.method=$e.Constants.BUFFER,r=void 0)),Object.assign(s,e);let n=new $e(s);if(r&&typeof r=="string")if(n.fs.existsSync(r))s.method=$e.Constants.FILE,s.filename=r,t=n.fs.readFileSync(r);else throw new Error($e.Errors.INVALID_FILENAME);let i=new PD(t,s),{canonical:a,sanitize:c}=$e;function T(l){if(l&&i){var h;if(typeof l=="string"&&(h=i.getEntry(l)),typeof l=="object"&&typeof l.entryName<"u"&&typeof l.header<"u"&&(h=i.getEntry(l.entryName)),h)return h}return null}_(T,"getEntry");function E(l){let{join:h,normalize:d,sep:A}=jt.posix;return h(".",d(A+l.split("\\").join(A)+A))}return _(E,"fixPath"),{readFile:function(l,h){var d=T(l);return d&&d.getData(h)||null},readFileAsync:function(l,h){var d=T(l);d?d.getDataAsync(h):h(null,"getEntry failed for:"+l)},readAsText:function(l,h){var d=T(l);if(d){var A=d.getData();if(A&&A.length)return A.toString(h||"utf8")}return""},readAsTextAsync:function(l,h,d){var A=T(l);A?A.getDataAsync(function(u,N){if(N){h(u,N);return}u&&u.length?h(u.toString(d||"utf8")):h("")}):h("")},deleteFile:function(l){var h=T(l);h&&i.deleteEntry(h.entryName)},addZipComment:function(l){i.comment=l},getZipComment:function(){return i.comment||""},addZipEntryComment:function(l,h){var d=T(l);d&&(d.comment=h)},getZipEntryComment:function(l){var h=T(l);return h&&h.comment||""},updateFile:function(l,h){var d=T(l);d&&d.setData(h)},addLocalFile:function(l,h,d,A){if(n.fs.existsSync(l)){h=h?E(h):"";var u=l.split("\\").join("/").split("/").pop();h+=d||u;let N=n.fs.statSync(l);this.addFile(h,n.fs.readFileSync(l),A,N)}else throw new Error($e.Errors.FILE_NOT_FOUND.replace("%s",l))},addLocalFolder:function(l,h,d){if(d instanceof RegExp?d=function(A){return function(u){return A.test(u)}}(d):typeof d!="function"&&(d=_(function(){return!0},"filter")),h=h?E(h):"",l=jt.normalize(l),n.fs.existsSync(l)){let A=n.findFiles(l),u=this;A.length&&A.forEach(function(N){var m=jt.relative(l,N).split("\\").join("/");if(d(m)){var S=n.fs.statSync(N);S.isFile()?u.addFile(h+m,n.fs.readFileSync(N),"",S):u.addFile(h+m+"/",Buffer.alloc(0),"",S)}})}else throw new Error($e.Errors.FILE_NOT_FOUND.replace("%s",l))},addLocalFolderAsync:function(l,h,d,A){A instanceof RegExp?A=function(N){return function(m){return N.test(m)}}(A):typeof A!="function"&&(A=_(function(){return!0},"filter")),d=d?E(d):"",l=jt.normalize(l);var u=this;n.fs.open(l,"r",function(N){if(N&&N.code==="ENOENT")h(void 0,$e.Errors.FILE_NOT_FOUND.replace("%s",l));else if(N)h(void 0,N);else{var m=n.findFiles(l),S=-1,I=_(function(){if(S+=1,S<m.length){var f=m[S],g=jt.relative(l,f).split("\\").join("/");g=g.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),A(g)?n.fs.stat(f,function(w,V){w&&h(void 0,w),V.isFile()?n.fs.readFile(f,function(q,K){q?h(void 0,q):(u.addFile(d+g,K,"",V),I())}):(u.addFile(d+g+"/",Buffer.alloc(0),"",V),I())}):I()}else h(!0,void 0)},"next");I()}})},addLocalFolderPromise:function(l,h){return new Promise((d,A)=>{let{filter:u,zipPath:N}=Object.assign({},h);this.addLocalFolderAsync(l,(m,S)=>{S&&A(S),m&&d(this)},N,u)})},addFile:function(l,h,d,A){let u=T(l),N=u!=null;N||(u=new fD,u.entryName=l),u.comment=d||"";let m=typeof A=="object"&&A instanceof n.fs.Stats;m&&(u.header.time=A.mtime);var S=u.isDirectory?16:0;if(!$e.isWin){let I=u.isDirectory?16384:32768;m?I|=4095&A.mode:typeof A=="number"?I|=4095&A:I|=u.isDirectory?493:420,S=(S|I<<16)>>>0}u.attr=S,u.setData(h),N||i.setEntry(u)},getEntries:function(){return i?i.entries:[]},getEntry:function(l){return T(l)},getEntryCount:function(){return i.getEntryCount()},forEach:function(l){return i.forEach(l)},extractEntryTo:function(l,h,d,A,u,N){A=bs(A,!1),u=bs(u,!1),d=bs(d,!0),N=$c(N,$c(u,void 0));var m=T(l);if(!m)throw new Error($e.Errors.NO_ENTRY);var S=a(m.entryName),I=c(h,N&&!m.isDirectory?N:d?S:jt.basename(S));if(m.isDirectory){var f=i.getEntryChildren(m);return f.forEach(function(V){if(V.isDirectory)return;var q=V.getData();if(!q)throw new Error($e.Errors.CANT_EXTRACT_FILE);var K=a(V.entryName),D=c(h,d?K:jt.basename(K));let F=u?V.header.fileAttr:void 0;n.writeFileTo(D,q,A,F)}),!0}var g=m.getData();if(!g)throw new Error($e.Errors.CANT_EXTRACT_FILE);if(n.fs.existsSync(I)&&!A)throw new Error($e.Errors.CANT_OVERRIDE);let w=u?l.header.fileAttr:void 0;return n.writeFileTo(I,g,A,w),!0},test:function(l){if(!i)return!1;for(var h in i.entries)try{if(h.isDirectory)continue;var d=i.entries[h].getData(l);if(!d)return!1}catch{return!1}return!0},extractAllTo:function(l,h,d,A){if(h=bs(h,!1),A=$c(d,A),d=bs(d,!1),!i)throw new Error($e.Errors.NO_ZIP);i.entries.forEach(function(u){var N=c(l,a(u.entryName.toString()));if(u.isDirectory){n.makeDir(N);return}var m=u.getData(A);if(!m)throw new Error($e.Errors.CANT_EXTRACT_FILE);let S=d?u.header.fileAttr:void 0;n.writeFileTo(N,m,h,S);try{n.fs.utimesSync(N,u.header.time,u.header.time)}catch{throw new Error($e.Errors.CANT_EXTRACT_FILE)}})},extractAllToAsync:function(l,h,d,A){if(A||(A=_(function(){},"callback")),h=bs(h,!1),typeof d=="function"&&!A&&(A=d),d=bs(d,!1),!i){A(new Error($e.Errors.NO_ZIP));return}l=jt.resolve(l);let u=_(f=>c(l,jt.normalize(a(f.entryName.toString()))),"getPath"),N=_((f,g)=>new Error(f+': "'+g+'"'),"getError"),m=[],S=new Set;i.entries.forEach(f=>{f.isDirectory?m.push(f):S.add(f)});for(let f of m){let g=u(f),w=d?f.header.fileAttr:void 0;try{n.makeDir(g),w&&n.fs.chmodSync(g,w),n.fs.utimesSync(g,f.header.time,f.header.time)}catch{A(N("Unable to create folder",g))}}let I=_(()=>{S.size===0&&A()},"done");for(let f of S.values()){let g=jt.normalize(a(f.entryName.toString())),w=c(l,g);f.getDataAsync(function(V,q){if(q){A(new Error(q));return}if(!V)A(new Error($e.Errors.CANT_EXTRACT_FILE));else{let K=d?f.header.fileAttr:void 0;n.writeFileToAsync(w,V,h,K,function(D){if(!D){A(N("Unable to write file",w));return}n.fs.utimes(w,f.header.time,f.header.time,function(F){if(F){A(N("Unable to set times",w));return}S.delete(f),I()})})}})}I()},writeZip:function(l,h){if(arguments.length===1&&typeof l=="function"&&(h=l,l=""),!l&&s.filename&&(l=s.filename),!!l){var d=i.compressToBuffer();if(d){var A=n.writeFileTo(l,d,!0);typeof h=="function"&&h(A?null:new Error("failed"),"")}}},writeZipPromise:function(l,h){let{overwrite:d,perm:A}=Object.assign({overwrite:!0},h);return new Promise((u,N)=>{!l&&s.filename&&(l=s.filename),l||N("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(m=>{let S=_(I=>I?u(I):N("ADM-ZIP: Wasn't able to write zip file"),"ret");n.writeFileToAsync(l,m,d,A,S)},N)})},toBufferPromise:function(){return new Promise((l,h)=>{i.toAsyncBuffer(l,h)})},toBuffer:function(l,h,d,A){return this.valueOf=2,typeof l=="function"?(i.toAsyncBuffer(l,h,d,A),null):i.compressToBuffer()}}}});var VA=R((W0,MA)=>{"use strict";var ID=require("crypto"),ur=require("fs"),UA=require("path"),DD=wA(),CD=_((r,e)=>new Promise((t,s)=>{try{let n=new DD(r);if(!n)return s(new Error("Link to zip file is broken or system has no permissions to "+r+" folder"));let i=n.getEntries();return Object.keys(i).length===0?s(new Error("Zip file is empty")):(n.extractAllTo(e,!0),t(e))}catch(n){s(n)}}),"extractZip"),gD=_((r,e)=>{if(!ur.existsSync(r))return;let t=/DIRECTORY\=\".+?\"/i,s=ur.readFileSync(r).toString();t.test(s)&&(s=s.replace(t,`DIRECTORY="${e}"`),ur.writeFileSync(r,s))},"replaceSqlNetOraDirectoryPath"),OD=_(r=>new Promise((e,t)=>{let s=_(a=>ID.createHash("md5").update(a,"utf-8").digest("hex"),"getHash"),n=ur.createReadStream(r),i="";n.on("data",a=>{i+=a}),n.on("error",a=>{t(a)}),n.on("end",function(){e(s(i))})}),"getHashByFile"),yD=_(async({walletFile:r,tempFolder:e,name:t})=>{if(!ur.existsSync(r))return;let s=await OD(r),n=UA.join(e,t+"_"+s);if(ur.existsSync(n))return n;await CD(r,n);let i=UA.join(n,"sqlnet.ora");return gD(i,n),n},"extractWallet");MA.exports=yD});var xA=R(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});var LD=function(){function r(e,t){t===void 0&&(t=0),this.source=e,this.position=t}return _(r,"LexerState"),r.prototype.copy=function(){return new r(this.source,this.position)},r}();zc.default=LD});var kA=R(Fs=>{"use strict";var BD=Fs&&Fs.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])};return function(e,t){r(e,t);function s(){this.constructor=e}_(s,"__"),e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}();Object.defineProperty(Fs,"__esModule",{value:!0});var bA=function(){function r(e,t,s,n,i,a){this.type=e,this.match=t,this.groups=s,this.start=n,this.end=i,this.lexer=a}return _(r,"Token"),r.prototype.strpos=function(){var e=this.lexer.strpos(this.start),t=this.lexer.strpos(this.end);return{start:e,end:t}},r.prototype.isEof=function(){return!1},r}();Fs.default=bA;var FA=function(r){BD(e,r);function e(t){var s=this,n=t.source.length;return s=r.call(this,null,"(eof)",[],n,n,t)||this,s}return _(e,"EOFToken"),e.prototype.isEof=function(){return!0},e}(bA);Fs.EOFToken=FA;Fs.EOF=function(r){return new FA(r)}});var qA=R(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});function YD(r){return new RegExp(r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"))}_(YD,"toRegExp");function wD(r){return typeof r=="string"&&(r=YD(r)),r.source.startsWith("^")?r:new RegExp("^"+r.source,r.flags)}_(wD,"normalize");function UD(r,e){for(var t=0,s=0,n=r;s<n.length;s++){var i=n[s],a=e(i,t++);if(a)return{item:i,result:a}}}_(UD,"first");var MD=function(){function r(){this.tokenTypes=[]}return _(r,"TokenTypes"),r.prototype.disable=function(e){return this.enable(e,!1)},r.prototype.enable=function(e,t){return t===void 0&&(t=!0),this.tokenTypes.filter(function(s){return s.type==e}).forEach(function(s){return s.enabled=t}),this},r.prototype.isEnabled=function(e){var t=this.tokenTypes.filter(function(s){return s.type==e});if(t.length==0)throw new Error("Token of type "+e+" does not exists");return t[0].enabled},r.prototype.peek=function(e,t){var s=e.substr(t);return UD(this.tokenTypes.filter(function(n){return n.enabled}),function(n){return n.regex.lastIndex=0,n.regex.exec(s)})},r.prototype.token=function(e,t,s){return s===void 0&&(s=!1),this.tokenTypes.push({type:e,regex:wD(t),enabled:!0,skip:s}),this},r}();Xc.default=MD});var HA=R(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});var jc=xA();ks.LexerState=jc.default;var si=kA();ks.Token=si.default;ks.EOF=si.EOF;var GA=qA();ks.TokenTypes=GA.default;var VD=function(){function r(e){e===void 0&&(e=""),this._state=new jc.default(e),this._tokenTypes=new GA.default}return _(r,"Lexer"),Object.defineProperty(r.prototype,"position",{get:function(){return this._state.position},set:function(e){this._state.position=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"source",{get:function(){return this._state.source},set:function(e){this._state=new jc.default(e)},enumerable:!0,configurable:!0}),r.prototype.attachTo=function(e){this._state=e._state},r.prototype.disable=function(e){return this._tokenTypes.disable(e),this},r.prototype.enable=function(e,t){return this._tokenTypes.enable(e,t),this},r.prototype.expect=function(e){var t=this.next();if(t.type!=e){var s=t.strpos();throw new Error("Expected "+e+(t?", got "+t.type:"")+" at "+s.start.line+":"+s.start.column)}return t},r.prototype.isEnabled=function(e){return this._tokenTypes.isEnabled(e)},r.prototype.next=function(){try{var e=this.peek();return this._state.position=e.end,e}catch(t){throw this._state.position=t.end,t}},r.prototype.peek=function(e){var t=this;e===void 0&&(e=this._state.position);var s=_(function(l){if(l===void 0&&(l=e),l>=t._state.source.length)return si.EOF(t);var h=t._tokenTypes.peek(t._state.source,l);return h?h.item.skip?s(l+h.result[0].length):new si.default(h.item.type,h.result[0],h.result.map(function(d){return d}),l,l+h.result[0].length,t):null},"read"),n=s();if(n)return n;var i=this._state.source.substring(e,e+1);try{this.peek(e+1)}catch(l){i+=l.unexpected}var a=this.strpos(e),c=a.line,T=a.column,E=new Error("Unexpected input: "+i+" at ("+c+":"+T+")");throw E.unexpected=i,E.end=e+i.length,E},r.prototype.strpos=function(e){var t=this._state.source.substring(0,e).split(/\r?\n/);Array.isArray(t)||(t=[t]);var s=t.length,n=t[t.length-1].length+1;return{line:s,column:n}},r.prototype.toArray=function(){var e=this._state.copy();this._state.position=0;for(var t=[],s;!(s=this.next()).isEof();)t.push(s);return this._state=e,t},r.prototype.token=function(e,t,s){return this._tokenTypes.token(e,t,s),this},r.prototype.keyword=function(e){return this.token(e,new RegExp(e+"(?=\\W|$)"))},r.prototype.operator=function(e){var t=new String(e).valueOf();return this.token(e,t)},r}();ks.default=VD});var KA=R((sB,vA)=>{vA.exports=HA()});var zA=R((rB,$A)=>{"use strict";var xD=KA().default;function WA(r,e={}){r.expect("(");let t=r.expect("WORD").match;r.expect("=");let s;if(r.peek().type==="("){s={};do Object.assign(s,WA(r,e));while(r.peek().type==="(")}else s=r.expect("WORD").match;return r.expect(")"),{...e,[t]:s}}_(WA,"parseObject");var bD=_(r=>{let e=r.expect("WORD").match;return r.expect("="),{name:e,data:WA(r)}},"parseConnection"),FD=_(r=>{let e=new xD(r).token("$SKIP_COMMENT",/#[^\n]*/,!0).token("$SKIP_WS",/\s+/,!0).token("WORD",/([a-z0-9._-]+|["'][\s\S]*?["'])/i).token("(",/\(/).token(")",/\)/).token("=",/=/),t={};for(;e.peek().type!==null;){let s=bD(e);t[s.name]=s}return t},"parseTns");$A.exports=FD});var ri=R((iB,XA)=>{"use strict";var Zc=class Zc{cache;cacheValue;cycle;ifNotExist;increment;maxValue;minValue;sequenceName;start;sharing;order;keep;scale;scaleExtend;shard;shardExtend;type};_(Zc,"Sequence");var Qc=Zc,eT=class eT{sharing;ddlScript;sequenceName;minValue;maxValue;increment;cycle;order;cacheValue;scale;extend;shard;type;keep};_(eT,"SequenceDto");var Jc=eT;XA.exports={Sequence:Qc,SequenceDto:Jc}});var JA=R((cB,QA)=>{"use strict";var{Sequence:aB,SequenceDto:_B}=ri(),kD=/(?<=START WITH)(\s+)([\w]+)(?=\s+)?/,qD=/\s+LINK$/,lt={true:"Y",false:"N"},me={cache:"cache",cycle:"cycle",extend:"extend",global:"global",keep:"keep",noCache:"nocache",noCycle:"nocycle",noExtend:"noextend",noKeep:"nokeep",noOrder:"noorder",noScale:"noscale",noShard:"noshard",order:"order",scale:"scale",scaleExtend:"scaleExtend",session:"session",shard:"shard",sharing:"sharing",type:"type"},jA={[me.cycle]:{[lt.true]:me.cycle,[lt.false]:me.noCycle},[me.order]:{[lt.true]:me.order,[lt.false]:me.noOrder},[me.shard]:{[lt.true]:me.shard,[lt.false]:""},[me.scale]:{[lt.true]:me.scale,[lt.false]:me.noScale},[me.type]:{[lt.true]:me.session,[lt.false]:me.global},[me.keep]:{[lt.true]:me.keep,[lt.false]:me.noKeep},[me.extend]:{[lt.true]:me.extend,[lt.false]:me.noExtend}},GD=_(async({schema:r,execute:e,logger:t})=>{try{let s=await e(`
      SELECT JSON_OBJECT(
          'sharing'      VALUE SHARING,
          'sequenceName' VALUE SEQUENCE_NAME,
          'minValue'     VALUE MIN_VALUE,
          'maxValue'     VALUE MAX_VALUE,
          'increment'    VALUE INCREMENT_BY,
          'cycle'        VALUE CYCLE_FLAG,
          'order'        VALUE ORDER_FLAG,
          'cacheValue'   VALUE CACHE_SIZE,
          'scale'        VALUE SCALE_FLAG,
          'extend'       VALUE EXTEND_FLAG,
          'shard'        VALUE SHARDED_FLAG,
          'type'         VALUE SESSION_FLAG,
          'keep'         VALUE KEEP_VALUE
      )
      FROM ALL_OBJECTS
      LEFT JOIN ALL_SEQUENCES
                ON ALL_SEQUENCES.SEQUENCE_OWNER = ALL_OBJECTS.OWNER
                AND ALL_SEQUENCES.SEQUENCE_NAME = ALL_OBJECTS.OBJECT_NAME
      WHERE OBJECT_TYPE = 'SEQUENCE'
      AND OWNER = '${r}'
      `);if(!(s!=null&&s.length))return[];let n=await HD({schema:r,execute:e,logger:t});return s.map(([i])=>{let a=JSON.parse(i),c=n[a.sequenceName]||"";return{...a,ddlScript:c}})}catch(s){let{message:n,stack:i,...a}=s;return t.log("error",{message:"Cannot get sequences",error:{message:n,stack:i,err:a}},"Getting sequences"),[]}},"getSchemaSequenceDtos"),HD=_(async({schema:r,execute:e,logger:t})=>{try{let s=await e(`
      SELECT JSON_OBJECT(
          'sequenceName' VALUE OBJECT_NAME,
          'ddlScript'    VALUE DBMS_METADATA.GET_DDL(OBJECT_TYPE, OBJECT_NAME, OWNER)
      )
      FROM ALL_OBJECTS
      WHERE OBJECT_TYPE = 'SEQUENCE'
      AND OWNER = '${r}'
      `);return s!=null&&s.length?s.reduce((n,[i])=>{let{sequenceName:a,ddlScript:c}=JSON.parse(i);return{...n,[a]:c}},{}):{}}catch(s){let{message:n,stack:i,...a}=s;return t.log("error",{message:"Cannot get sequences DDL",error:{message:n,stack:i,err:a}},"Getting sequences"),{}}},"getSchemaSequenceDdl"),vD=_(({execute:r})=>async({schema:e,logger:t})=>(await GD({schema:e,execute:r,logger:t})).map(n=>{let i=KD({sequenceDto:n}),a=$D({sequenceDto:n}),c=zD({sequenceDto:n}),T=WD({sequenceDto:n}),E=n.cacheValue?me.cache:me.noCache;return{sequenceName:n.sequenceName,minValue:n.minValue,maxValue:n.maxValue,increment:n.increment,cacheValue:n.cacheValue,cache:E,sharing:i,...a,...c,...T}}),"getSchemaSequences"),KD=_(({sequenceDto:r})=>{var e,t;return(t=(e=r.sharing)==null?void 0:e.replace(qD,""))==null?void 0:t.toLowerCase()},"getSequenceSharing"),WD=_(({sequenceDto:r})=>{let e=r[me.scale],t=r[me.shard],s=r[me.extend],n=jA[me.extend][s],i=e===lt.true?n:"",a=t===lt.true?n:"";return{scaleExtend:i,shardExtend:a}},"getExtendOptions"),$D=_(({sequenceDto:r})=>Object.entries(jA).reduce((e,[t,s])=>({...e,[t]:s[r[t]]}),{}),"getBooleanOptions"),zD=_(({sequenceDto:r})=>({start:XD({sequenceDto:r})}),"getOptionsFromDdl"),XD=_(({sequenceDto:r})=>{var s;let e=r.ddlScript;if(!e.includes("START WITH"))return r.minValue<r.maxValue?r.minValue:r.maxValue;let t=(s=e.match(kD))==null?void 0:s[2];return isNaN(Number(t))?t:Number(t)},"getStartOptionFromDdl");QA.exports={getSchemaSequences:vD}});var iT=R((lB,nd)=>{"use strict";var Gr=sA(),jD=VA(),tT=require("path"),ii=require("fs"),QD=zA(),{getSchemaSequences:JD}=JA(),Ae=require("lodash"),ed={message:"Connection error"},ls,sT,ZD=_((r="")=>{let e=r.match(/http:\/\/(?:.*?:.*?@)?(.*?):(\d+)/i);return e?{httpsProxy:e[1],httpsProxyPort:e[2]}:{}},"parseProxyOptions"),td=_(r=>[r,process.env.TNS_ADMIN,tT.join(process.env.ORACLE_HOME||"","network","admin"),tT.join(process.env.LD_LIBRARY_PATH||"","network","admin")].reduce((e,t)=>{if(e)return e;let s=tT.join(t,"tnsnames.ora");return ii.existsSync(s)?s:e},""),"getTnsNamesOraFile"),sd=_(r=>{let e=ii.readFileSync(r).toString();return QD(e)},"parseTnsNamesOra"),eC=_((r,e,t,s)=>{var E,l,h,d,A,u,N,m,S,I,f;let n=td(r);if(!ii.existsSync(n))return e;s({message:"Found tnsnames.ora file: "+n});let i=sd(n);if(s({message:"tnsnames.ora successfully parsed"}),!i[e])return s({message:'Cannot find "'+e+'" in tnsnames.ora'}),e;let a=(h=(l=(E=i[e])==null?void 0:E.data)==null?void 0:l.description)==null?void 0:h.address,c=(N=(u=(A=(d=i[e])==null?void 0:d.data)==null?void 0:A.description)==null?void 0:u.connect_data)==null?void 0:N.service_name,T=(f=(I=(S=(m=i[e])==null?void 0:m.data)==null?void 0:S.description)==null?void 0:I.connect_data)==null?void 0:f.sid;return s({message:"tnsnames.ora",address:a,service:c}),rT(Ae.omitBy({...a,...t,protocol:(a==null?void 0:a.protocol)||"tcps",service:c||e,sid:T},Ae.isUndefined),s)},"getConnectionStringByTnsNames"),ni=_((r,e)=>r?e:"","combine"),rT=_(({protocol:r,host:e,port:t,sid:s,service:n,httpsProxy:i,httpsProxyPort:a},c)=>{let T=`(DESCRIPTION=
		(ADDRESS=
			(PROTOCOL=${r||"tcp"})
			(HOST=${e})
			(PORT=${t}))
			${ni(i,`(HTTPS_PROXY=${i})`)}
			${ni(a,`(HTTPS_PROXY_PORT=${a})`)}
		(CONNECT_DATA=
					${ni(s,`(SID=${s})`)}
					${ni(n,`(SERVICE_NAME=${n})`)}
		)
	)`;return c({message:"connectionString",connectionString:T}),T},"getConnectionDescription"),tC=_(async(r,e,t)=>{var i,a,c,T,E,l,h,d,A,u,N;let s={protocol:"",host:"",port:"",service:""};if(["Wallet","TNS"].includes(r.connectionMethod)){let m=td(r.configDir);if(!ii.existsSync(m))throw new Error("Cannot find tnsnames.ora file. Please, specify tnsnames folder or use Base connection method.");t({message:"Found tnsnames.ora file: "+m});let S=sd(m);if(!S[r.serviceName])throw new Error('Cannot find "'+r.serviceName+'" in tnsnames.ora');let I=(c=(a=(i=S[r.serviceName])==null?void 0:i.data)==null?void 0:a.description)==null?void 0:c.address,f=(h=(l=(E=(T=S[r.serviceName])==null?void 0:T.data)==null?void 0:E.description)==null?void 0:l.connect_data)==null?void 0:h.service_name,g=(N=(u=(A=(d=S[r.serviceName])==null?void 0:d.data)==null?void 0:A.description)==null?void 0:u.connect_data)==null?void 0:N.sid;t({message:"tnsnames.ora",address:I,service:f}),s.protocol=I==null?void 0:I.protocol,s.host=I==null?void 0:I.host,s.port=I==null?void 0:I.port,s.service=f||r.serviceName,s.sid=g}else s.host=r.host,s.port=r.port,s.service=r.serviceName,s.sid=r.sid;let{options:n}=await e.openTunnel({sshAuthMethod:r.sshConfig.ssh_method==="privateKey"?"IDENTITY_FILE":"USER_PASSWORD",sshTunnelHostname:r.sshConfig.ssh_host,sshTunnelPort:r.sshConfig.ssh_port,sshTunnelUsername:r.sshConfig.ssh_user,sshTunnelPassword:r.sshConfig.ssh_password,sshTunnelIdentityFile:r.sshConfig.ssh_key_file,sshTunnelPassphrase:r.sshConfig.ssh_key_passphrase,host:s.host,port:s.port});return rT({...s,host:n.host,port:n.port.toString()},t)},"getSshConnectionString"),sC=_(async({walletFile:r,tempFolder:e,name:t,connectionMethod:s,TNSpath:n,host:i,port:a,userName:c,userPassword:T,serviceName:E,clientPath:l,clientType:h,queryRequestTimeout:d,authMethod:A,options:u,sid:N,ssh:m,ssh_user:S,ssh_host:I,ssh_port:f,ssh_method:g,ssh_key_file:w,ssh_key_passphrase:V,ssh_password:q,authRole:K,mode:D},F,P)=>{if(ls)return ls;let L={thin:"thin",thick:"thick"},x,Z,te={},k="";s==="Wallet"&&(x=await jD({walletFile:r,tempFolder:e,name:t})),s==="TNS"&&(x=n),h==="InstantClient"&&(Z=l),u!=null&&u.proxy&&(k=ZD(u==null?void 0:u.proxy)),D!==L.thin&&Gr.initOracleClient({libDir:Z,configDir:x});let ie="";return["Wallet","TNS"].includes(s)?k?ie=eC(x,E,k,P):ie=E:ie=rT({host:i,port:a,sid:N,service:E},P),m&&(sT=!0,ie=await tC({host:i,port:a,configDir:x,serviceName:E,sid:N,connectionMethod:s,sshConfig:{ssh_user:S,ssh_host:I,ssh_port:f,ssh_method:g,ssh_key_file:w,ssh_password:q,ssh_key_passphrase:V}},F,P)),A==="OS"?te.externalAuth=!0:A==="Kerberos"?(te.username=c,te.password=T,te.externalAuth=!0):(te.username=c,te.password=T),nC({connectString:ie,username:c,password:T,queryRequestTimeout:d,authRole:K})},"connect"),rC=_(async r=>ls?(sT&&(sT=!1,await r.closeConsumer()),new Promise((e,t)=>{ls.close(s=>{if(ls=null,s)return t(s);e()})})):Promise.reject(ed),"disconnect"),nC=_(({connectString:r,username:e,password:t,queryRequestTimeout:s,authRole:n})=>new Promise((i,a)=>{Gr.getConnection({username:e,password:t,connectString:r,privilege:n==="default"?void 0:Gr[n]},(c,T)=>{if(c)return ls=null,a(c);try{T.callTimeout=Number(s||0),ls=T,i()}catch(E){a(E)}})}),"authByCredentials"),iC=_(async({includeSystemCollection:r,schemaName:e},t)=>{let s="SELECT USERNAME FROM ALL_USERS",n,i="";return e&&(i=`USERNAME = '${e}'`),r?n=`${s}${i?` WHERE ${i}`:""}`:n=`${s} WHERE ORACLE_MAINTAINED = 'N'${i?` AND ${i}`:""}`,await Et(n).catch(a=>(t.info({message:"Cannot retrieve schema names"}),t.error(a),[]))},"getSchemaNames"),oC=_(r=>Ae.reduce(r,(e,t)=>({...e,[t[0]]:[...e[t[0]]||[],t[1]]}),{}),"pairToObj"),oi=_((r,e,t)=>{let s="";return t&&(s=`T.OWNER = '${t}'`),Et(e?`${r}${s?` WHERE ${s}`:""}`:`${r} INNER JOIN ALL_USERS U ON T.OWNER = U.USERNAME WHERE U.ORACLE_MAINTAINED = 'N'${s?` AND ${s}`:""}`)},"selectEntities"),aC=_(({includeSystemCollection:r,schemaName:e})=>oi("SELECT T.OWNER, T.TABLE_NAME FROM ALL_TABLES T",r,e),"tableNamesByUser"),_C=_(({includeSystemCollection:r,schemaName:e})=>oi("SELECT T.OWNER, T.TABLE_NAME FROM ALL_EXTERNAL_TABLES T",r,e),"externalTableNamesByUser"),cC=_(({includeSystemCollection:r,schemaName:e})=>oi("SELECT T.OWNER, T.VIEW_NAME || ' (v)' FROM ALL_VIEWS T",r,e),"viewNamesByUser"),TC=_(({includeSystemCollection:r,schemaName:e})=>oi("SELECT T.OWNER, T.MVIEW_NAME || ' (v)' FROM ALL_MVIEWS T",r,e),"materializedViewNamesByUser"),lC=_(async(r,e)=>{let t=await TC(r).catch(T=>(e.info({message:"Cannot retrieve materialized views"}),e.error(T),[]));e.info({materializedViews:t});let s=t.map(T=>Ae.join(T,".").slice(0,-4)),n=await aC(r).then(T=>Ae.reject(T,E=>s.includes(Ae.join(E,".")))).catch(T=>(e.info({message:"Cannot retrieve tables"}),e.error(T),[]));e.info({tables:n});let i=await _C(r).catch(T=>(e.info({message:"Cannot retrieve external tables"}),e.error(T),[]));e.info({externalTables:i});let a=await cC(r).catch(T=>(e.info({message:"Cannot retrieve views"}),e.error(T),[]));e.info({views:a});let c=oC([...n,...i,...a,...t]);return Object.keys(c).reduce((T,E)=>[...T,{dbName:E,dbCollections:c[E],isEmpty:!c[E].length}],[])},"getEntitiesNames"),Et=_((r,e={},t=[])=>ls?new Promise((s,n)=>{ls.execute(r,t,e,(i,a)=>{if(i)return n(i);s(a.rows)})}):Promise.reject(ed),"execute"),EC=_(async r=>{var s,n;let e=["12c","18c","19c","21c","23ai"],t="21c";try{let i=await Et("SELECT VERSION FROM PRODUCT_COMPONENT_VERSION WHERE product LIKE 'Oracle Database%'");r.log("info",i,"DB Version");let a=(n=(s=i==null?void 0:i[0])==null?void 0:s[0])==null?void 0:n.split(".").shift();return a&&e.find(T=>T.startsWith(a))||t}catch(i){return r.log("error",{message:i.message,stack:i.stack},"Error of getting DB Version"),t}},"getDbVersion"),uC=_(r=>r.slice(-4)===" (v)","isView"),NC=_(r=>{let e=Ae.partition(r,uC);return{views:e[0].map(t=>t.slice(0,-4)),tables:e[1]}},"splitEntityNames"),nT=_(()=>Et(`BEGIN
		DBMS_METADATA.SET_TRANSFORM_PARAM(DBMS_METADATA.SESSION_TRANSFORM,'SQLTERMINATOR', TRUE);
	END;`),"setSQLTerminator"),SC=_(async(r,e,t)=>{var s;try{await nT();let n=await Et(`
			SELECT JSON_OBJECT(
			'tableDDL' VALUE DBMS_METADATA.GET_DDL('TABLE', T.TABLE_NAME, T.OWNER),
			'countOfRecords' VALUE (SELECT COUNT(*) FROM ALL_TABLES WHERE TABLE_NAME='${r}'),
			'indexDDLs' VALUE (
				SELECT JSON_ARRAYAGG(DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME, OWNER) RETURNING CLOB)
				FROM ALL_INDEXES
				WHERE TABLE_OWNER=T.OWNER
					AND TABLE_NAME=T.TABLE_NAME
					AND INDEX_NAME NOT IN (
						SELECT CONSTRAINT_NAME
						FROM ALL_CONSTRAINTS
						WHERE CONSTRAINT_TYPE='P'
						AND OWNER=T.OWNER
						AND TABLE_NAME=T.TABLE_NAME
					)
				),
			'jsonColumns' VALUE (
				SELECT JSON_ARRAYAGG(JSON_OBJECT('name' VALUE COLUMN_NAME, 'datatype' VALUE DATA_TYPE) RETURNING CLOB)
				FROM ALL_TAB_COLUMNS
				WHERE TABLE_NAME=T.TABLE_NAME
				AND OWNER=T.OWNER
				AND DATA_TYPE IN ('CLOB', 'BLOB', 'NVARCHAR2', 'JSON')
			),
			'tableComment' VALUE (
				SELECT COMMENTS
				FROM ALL_TAB_COMMENTS
				WHERE OWNER = T.OWNER AND TABLE_NAME = T.TABLE_NAME AND COMMENTS IS NOT NULL
			),
			'columnComments' VALUE (
				SELECT JSON_ARRAYAGG(JSON_OBJECT('name' VALUE COLUMN_NAME, 'comment' VALUE COMMENTS) RETURNING CLOB)
				FROM ALL_COL_COMMENTS
				WHERE OWNER = T.OWNER AND TABLE_NAME = T.TABLE_NAME  AND COMMENTS IS NOT NULL
			) RETURNING CLOB
			)
			FROM ALL_TABLES T
			WHERE T.OWNER='${e}' AND T.TABLE_NAME='${r}'
		`),i=await((s=Ae.first(Ae.first(n)))==null?void 0:s.getData());try{let a=JSON.parse(i);t.log("info",a,`Getting DDL from "${e}"."${r}"`);let c=a.tableComment?`COMMENT ON TABLE ${gs(e)}.${gs(r)} IS ${ZA(a.tableComment)};`:"",T=Ae.map(a.columnComments,l=>`COMMENT ON COLUMN ${gs(e)}.${gs(r)}.${gs(l.name)}  IS ${ZA(l.comment)};`);return{ddl:`${a.tableDDL}
				${Ae.join(a.indexDDLs,`
`)}
				${c}

				${Ae.join(T,`
`)}`,jsonColumns:a.jsonColumns,countOfRecords:a.countOfRecords}}catch(a){return t.log("error",{message:`Cannot parse query result: 

`+i,error:{message:a.message,stack:a.stack,err:Ae.omit(a,["message","stack"])}},`Getting DDL from "${e}"."${r}"`),{ddl:"",jsonColumns:[],countOfRecords:0}}}catch(n){if((n==null?void 0:n.errorNum)===31603&&!await rd(t))throw n;return t.log("error",{message:"Cannot get DDL for table: "+r,error:{message:n.message,stack:n.stack,err:Ae.omit(n,["message","stack"])}},`Getting DDL from "${e}"."${r}"`),{ddl:"",jsonColumns:[],countOfRecords:0}}},"getDDL"),hC=_(r=>Object.keys(r).reduce(async(e,t)=>{let s=await e,n=r[t];return n instanceof Gr.Lob&&(n=await n.getData()),n instanceof Buffer&&(n=n.toString()),s[t]=n,s},Promise.resolve({})),"readLobs"),AC=_(async r=>await r.reduce(async(e,t)=>{let s=await e,n=await hC(t);return s.concat(n)},Promise.resolve([])),"readRecordsValues"),gs=_(r=>/[\s\da-z]/.test(r)?`"${r}"`:r,"escapeName"),ZA=_(r=>`'${r.replaceAll("'","''")}'`,"escapeComment"),dC=_((r,e)=>e.map(t=>r.reduce((s,n)=>(s[n]=t[n],s),{})),"replaceNames"),pC=_(async({tableName:r,limit:e,jsonColumns:t,schema:s})=>{let n=Ae.map(t,c=>c.name),i=await Et(`SELECT ${n.map(c=>gs(c)).join(", ")} FROM ${gs(s)}.${gs(r)} FETCH NEXT ${e} ROWS ONLY`,{outFormat:Gr.OBJECT});return await AC(dC(n,i))},"selectRecords"),mC=_((r,e)=>{let t={number:"number",boolean:"boolean",string:"string"};return r.reduce((s,n)=>{if(s)return s;let i=n[e];return Array.isArray(i)?"array":typeof i=="object"?i?"object":"null":t[typeof i]??s},"")},"getJsonType"),fC=_(r=>`json${r.charAt(0).toUpperCase()}${r.slice(1)}`,"getJsonTypeName"),PC=_(async(r,e)=>{let t={CLOB:{type:"lobs",mode:"clob"},BLOB:{type:"lobs",mode:"blob"},NVARCHAR2:{type:"char",mode:"nvarchar2"},JSON:{type:"json"}};return{properties:r.reduce((n,i)=>{let a=i.name,c=i.datatype,T=t[c];if(!T)return n;let E=mC(e,a);if(!E)return n;let l=fC(E);return{...n,[a]:{...T,subtype:E,childType:"json",type:l}}},{})}},"getJsonSchema"),RC=_(async(r,e,t)=>{try{let s=await IC(r);if(await nT(),s){t.log("info",{viewName:r,schema:e},'Is materialized view"');let a=await Et(`SELECT JSON_OBJECT(
					'viewDDL' VALUE DBMS_METADATA.GET_DDL('MATERIALIZED_VIEW', MV.MVIEW_NAME, MV.OWNER),
					'indexDDLs' VALUE (
						SELECT JSON_ARRAYAGG(DBMS_METADATA.GET_DDL('INDEX', INDEX_NAME, OWNER) RETURNING CLOB)
						FROM ALL_INDEXES
						WHERE TABLE_OWNER=MV.OWNER
							AND TABLE_NAME=MV.MVIEW_NAME
							AND INDEX_NAME NOT IN (
								SELECT CONSTRAINT_NAME
								FROM ALL_CONSTRAINTS
								WHERE CONSTRAINT_TYPE='P'
								AND OWNER=MV.OWNER
								AND TABLE_NAME=MV.MVIEW_NAME
							)
						)
					)
					FROM ALL_MVIEWS MV
					WHERE MV.OWNER='${e}' AND MV.MVIEW_NAME='${r}'`),c=Ae.first(Ae.first(a)),T=JSON.parse(c);return t.log("info",{viewName:r,schema:e},`Getting DDL from "${e}"."${r}"`),`${T.viewDDL}
${Ae.join(T.indexDDLs,`
`)}`}let n=await Et(`SELECT DBMS_METADATA.GET_DDL('VIEW', VIEW_NAME, OWNER) FROM ALL_VIEWS WHERE VIEW_NAME='${r}'`);return await Ae.first(Ae.first(n)).getData()}catch(s){if((s==null?void 0:s.errorNum)===31603&&!await rd(t))throw s;return t.log("error",{message:"Cannot get DDL for view: "+r,error:{message:s.message,stack:s.stack,err:Ae.omit(s,["message","stack"])}},"Getting DDL"),""}},"getViewDDL"),IC=_(async r=>{await nT();let e=await Et(`SELECT * FROM ALL_MVIEWS WHERE MVIEW_NAME = '${r}'`);return!Ae.isEmpty(e)},"checkEntityMaterializedView"),rd=_(async r=>{var e;try{let t=await Et("SELECT sys_context('USERENV', 'CURRENT_USER') FROM dual"),s=Ae.first(Ae.first(t));return((e=await Et(`SELECT GRANTED_ROLE FROM USER_ROLE_PRIVS WHERE USERNAME = '${s}'`))==null?void 0:e.map(([i])=>i)).includes("SELECT_CATALOG_ROLE")}catch(t){return r.log("error",{message:"Checking user privileges error",error:{message:t.message,stack:t.stack,err:Ae.omit(t,["message","stack"])}},"Getting DDL"),!1}},"checkUserHaveRequiredRole"),DC=_(r=>{r.log("info",{TNS_ADMIN:process.env.TNS_ADMIN??"",ORACLE_HOME:process.env.ORACLE_HOME??"",LD_LIBRARY_PATH:process.env.LD_LIBRARY_PATH??"",ORACLE_BASE:process.env.ORACLE_BASE??""},"Environment variables")},"logEnvironment"),CC=_(async r=>{try{let e=await Et("SELECT OWNER, SYNONYM_NAME, TABLE_OWNER, TABLE_NAME, DB_LINK FROM ALL_SYNONYMS WHERE ORIGIN_CON_ID > 1");if(Ae.isEmpty(e))return[];let t=e.map(([a,c,T,E])=>({synonymSchemaName:T,synonymPublic:a==="PUBLIC",synonymName:c,synonymEntityId:E}));r.log("info",t,"Getting synonyms");let s=await gC(),n=t.map(a=>{var E;let c=s.find(({name:l})=>l===a.synonymName),T=!((E=c==null?void 0:c.ddl)!=null&&E.toUpperCase().includes("NONEDITIONABLE"));return{...a,synonymEditionable:T?"EDITIONABLE":"NONEDITIONABLE"}});return Ae.groupBy(n,"synonymSchemaName")}catch(e){r.log("error",{message:"Cannot get synonyms",error:{message:e.message,stack:e.stack,err:Ae.omit(e,["message","stack"])}},"Getting synonyms")}},"getDbSynonyms"),gC=_(async()=>{let r=await Et("SELECT SYNONYM_NAME, DBMS_METADATA.GET_DDL('SYNONYM', SYNONYM_NAME, OWNER) FROM ALL_SYNONYMS WHERE ORIGIN_CON_ID > 1");return await Promise.all(r.map(async([t,s])=>{let n=await s.getData();return{name:t,ddl:n}}))},"getSynonymsDDL");nd.exports={connect:sC,disconnect:rC,getEntitiesNames:lC,getSchemaNames:iC,splitEntityNames:NC,getDDL:SC,getJsonSchema:PC,getViewDDL:RC,getDbVersion:EC,selectRecords:pC,logEnvironment:DC,execute:Et,getDbSynonyms:CC,getSchemaSequences:JD({execute:Et})}});var _d=R((uB,ad)=>{"use strict";var ai=require("lodash"),id=Ml(),gt=iT();ad.exports={async connect(r,e,t,s){let n=s.require("@hackolade/ssh-service");id("Connect to instance",r,e),gt.logEnvironment(e);try{await gt.connect(r,n,i=>{e.log("info",i,"Connection")}),t()}catch(i){throw od(e,i,t),i}},async disconnect(r,e,t,s){try{let n=s.require("@hackolade/ssh-service");await gt.disconnect(n),t(null)}catch(n){od(e,n,t)}},async testConnection(r,e,t,s){try{await this.connect(r,e,()=>{},s),t(null)}catch(n){e.log("error",{message:n.message,stack:n.stack,error:n},"Test connection"),t({message:n.message,stack:n.stack})}},async getSchemaNames(r,e,t,s){try{id("Get schemas",r,e),await this.connect(r,e,()=>{},s);let n=await gt.getSchemaNames();return e.log("info",n,"All schemas list",r.hiddenKeys),t(null,n)}catch(n){return e.log("error",{message:n.message,stack:n.stack,error:n},"Get schemas"),t({message:n.message,stack:n.stack})}},async getDbCollectionsNames(r,e,t,s){try{await this.connect(r,e,()=>{},s);let n=await gt.getEntitiesNames(r,{info:i=>{e.log("info",i,"Retrieving table and view names")},error:i=>{e.log("error",{message:i.message,stack:i.stack,error:i},"Retrieving databases and tables information")}});t(null,n)}catch(n){e.log("error",{message:n.message,stack:n.stack,error:n},"Retrieving databases and tables information"),t({message:n.message,stack:n.stack})}},async getDbCollectionsData(r,e,t,s){try{let n=_(({message:h,containerName:d="",entityName:A=""})=>{e.log("info",{message:h,schema:d,table:A},"Retrieving schema"),e.progress({message:h,containerName:d,entityName:A})},"progress");e.log("info",r,"Retrieving schema",r.hiddenKeys),n({message:"Start reverse-engineering process",containerName:"",entityName:""});let i=r.collectionData,a=i.collections,c=i.dataBaseNames,T=await gt.getDbVersion(e),E=await gt.getDbSynonyms(e),l=await c.reduce(async(h,d)=>{let A=await h,u=gt.splitEntityNames(a[d]),N=await gt.getSchemaSequences({schema:d,logger:e}),m=await u.tables.reduce(async(f,g)=>{let w=await f;n({message:"Start getting data from table",containerName:d,entityName:g});let{ddl:V,countOfRecords:q,jsonColumns:K}=await gt.getDDL(g,d,e),D=[],F={};if(!ai.isEmpty(K)){let P=OC(q,r.recordSamplingSettings);n({message:`Fetching columns for JSON schema inference: ${JSON.stringify(K)}`,containerName:d,entityName:g}),D=await gt.selectRecords({tableName:g,limit:P,jsonColumns:K,schema:d}),F=await gt.getJsonSchema(K,D)}return n({message:"Data retrieved successfully",containerName:d,entityName:g}),w.concat({dbName:d,collectionName:g,entityLevel:{},documents:D,views:[],ddl:{script:V,type:"oracle",takeAllDdlProperties:!0},emptyBucket:!1,validation:{jsonSchema:F},bucketInfo:{database:d,synonyms:(E==null?void 0:E[d])||[],sequences:N}})},Promise.resolve([])),S=await u.views.reduce(async(f,g)=>{let w=await f;n({message:"Start getting data from view",containerName:d,entityName:g});let V=await gt.getViewDDL(g,d,e);return n({message:"Data retrieved successfully",containerName:d,entityName:g}),w.concat({name:g,data:{},ddl:{script:V,type:"oracle",takeAllDdlProperties:!0}})},Promise.resolve([]));if(ai.isEmpty(S))return[...A,...m];let I={dbName:d,entityLevel:{},views:S,emptyBucket:!1,bucketInfo:{indexes:[],database:d,synonyms:(E==null?void 0:E[d])||[],sequences:N}};return[...A,...m,I]},Promise.resolve([]));n({message:"Start processing the retrieved data in the application ..."}),t(null,l.filter(Boolean),{version:T})}catch(n){if((n==null?void 0:n.errorNum)===31603)return e.log("error",{message:"Missing required role \u201CSELECT_CATALOG_ROLE\u201D to perform this operation",stack:n.stack,error:n},"Reverse-engineering process failed"),t({message:"Missing required role \u201CSELECT_CATALOG_ROLE\u201D to perform this operation",type:"simpleError"});e.log("error",{message:n.message,stack:n.stack,error:n},"Reverse-engineering process failed"),t({message:n.message,stack:n.stack})}}};var od=_((r,e,t)=>{let s=ai.isString(e)?e:ai.get(e,"message","Reverse Engineering error");r.log("error",{error:e},"Reverse Engineering error"),t(s)},"handleError"),OC=_((r,e)=>{if(e.active==="absolute")return Number(e.absolute.value);let t=Math.ceil(r*e.relative.value/100);return Math.min(t,e.maxValue)},"getSampleDocSize")});var Td=R((SB,cd)=>{"use strict";var oT=iT(),aT=require("lodash"),yC=_(async(r,e,t)=>{let s=t.require("async"),n=t.require("@hackolade/ssh-service");oT.logEnvironment(e),await oT.connect(r,n,c=>{e.log("info",c,"Connection")});let i=r.script.split(`

`).filter(Boolean).map(c=>aT.trim(aT.trim(aT.trim(c),"/"),";")),a;if(await s.mapSeries(i,async c=>{try{c.endsWith("END")&&(c+=";");let T="Query: "+c.split(`
`).shift().substr(0,150);e.progress({message:T}),e.log("info",{message:T},"Apply to instance"),await oT.execute(c)}catch(T){let E=T.errorNum===955,l=T.errorNum===1920;if(E||l)return;a=T,e.progress({message:"[color:red]Not executed..."}),e.log("error",{message:T.message,stack:T.stack,query:c},"Error applying to instance")}}),a)throw new Error(`Not all statements executed successfully.
Please, see HackoladeFE.log for more details.`)},"applyToInstance");cd.exports={applyToInstance:yC}});var wt=R((AB,ld)=>{"use strict";var TT=class TT{script;isDropScript};_(TT,"ModificationScript");var _T=TT,lT=class lT{isActivated;scripts;static getInstances(e,t,s){return(e||[]).filter(Boolean).map(n=>({isActivated:t,scripts:[{isDropScript:s,script:n}]}))}static getInstance(e,t,s){var n;if((n=e==null?void 0:e.filter(Boolean))!=null&&n.length)return{isActivated:t,scripts:e.filter(Boolean).map(i=>({isDropScript:s,script:i}))}}static getDropAndRecreateInstance(e,t,s){let n=[];if(e&&n.push({isDropScript:!0,script:e}),t&&n.push({isDropScript:!1,script:t}),!!(n!=null&&n.length))return{isActivated:s,scripts:n}}};_(lT,"AlterScriptDto");var cT=lT;ld.exports={ModificationScript:_T,AlterScriptDto:cT}});var Te=R((mB,Ed)=>{"use strict";var pB=require("lodash");Ed.exports=r=>{let e=_(P=>r.get(P,"[0].code")||r.get(P,"[0].name",""),"getDbName"),t=_(P=>P&&(P.code||P.collectionName)||"","getEntityName"),s=_(P=>P&&(P.code||P.name)||"","getViewName"),n=_(P=>P&&(P.code||P.name)||"","getBucketName"),i=_(P=>({...r.get(P,"[0]",{}),name:e(P)}),"getDbData"),a=_(P=>r.get(P,"[0].viewOn"),"getViewOn"),c=_(P=>L=>L.primaryTableId===P&&L.primaryTableId!==L.foreignTableId,"isRecursiveRelationship"),T=_(P=>Object.keys(P).reduce((L,x)=>{let Z=P[x].filter(te=>{let k=P[te.primaryTableId];return Array.isArray(k)?!k.some(c(x)):!0});return r.isEmpty(Z)?L:{...L,[x]:Z}},{}),"rejectRecursiveRelationships"),E=_(P=>Object.keys(P).reduce((L,x)=>{let Z=P[x].filter(te=>{let k=P[te.primaryTableId];return Array.isArray(k)?k.some(c(x)):!1});return L.concat(Z)},[]),"filterRecursiveRelationships"),l=_((P,L="	")=>P.split(`
`).map(x=>L+x).join(`
`),"tab"),h=_((P,L)=>Object.keys(P).map(r.toLower).includes(r.toLower(L)),"hasType"),d=_(P=>Object.entries(P).filter(([L,x])=>!r.isNil(x)).reduce((L,[x,Z])=>({...L,[x]:Z}),{}),"clean"),A=_(P=>P.every(L=>r.get(L,"isActivated",!0)),"checkAllKeysActivated"),u=_(P=>P.length?P.every(L=>!r.get(L,"isActivated",!0)):!1,"checkAllKeysDeactivated"),N=_((P,L)=>{let x=P.filter(te=>r.get(te,"isActivated",!0)).map(L),Z=P.filter(te=>!r.get(te,"isActivated",!0)).map(L);return{activatedItems:x,deactivatedItems:Z}},"divideIntoActivatedAndDeactivated"),m=_((P,{isActivated:L,isPartOfLine:x,inlineComment:Z="--"})=>L!==!1?P:x?"/* "+P+" */":P.includes(`
`)?`/*
`+P+` */
`:Z+" "+P,"commentIfDeactivated"),S=_((P,L="'",x="'")=>{let Z=P[0];return P[P.length-1]===L&&Z===x?P:`${L}${P}${x}`},"wrap"),I=_(P=>`"${P}"`,"wrapInQuotes"),f=_(P=>L=>P==="nonquotedIdentifier"?L:I(L),"prepareNameForScriptFormat"),g=_(P=>`'${P}'`,"wrapComment"),w=_(P=>(L,x)=>x?`${f(P)(x)}.${f(P)(L)}`:f(P)(L),"getNamePrefixedWithSchemaNameForScriptFormat"),V=_((P,L)=>L.some(x=>(P==null?void 0:P.oldField[x])!==(P==null?void 0:P.newField[x])),"checkFieldPropertiesChanged"),q=_(({name:P})=>I(P),"columnMapToString");return{getDbName:e,getBucketName:n,getDbData:i,getEntityName:t,getViewName:s,getViewOn:a,rejectRecursiveRelationships:T,filterRecursiveRelationships:E,tab:l,hasType:h,clean:d,checkAllKeysActivated:A,checkAllKeysDeactivated:u,divideIntoActivatedAndDeactivated:N,commentIfDeactivated:m,wrap:S,wrapComment:g,wrapInQuotes:I,getNamePrefixedWithSchemaNameForScriptFormat:w,checkFieldPropertiesChanged:V,getColumnsList:_((P,L,x,Z=q)=>{var ie;let te=N(P,Z),k=(ie=te==null?void 0:te.deactivatedItems)!=null&&ie.length?m(te.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"";return!L&&x?" ("+te.activatedItems.join(", ")+k+")":" ("+P.map(Z).join(", ")+")"},"getColumnsList"),escapeSingleQuote:_(P=>P.replaceAll("'","''"),"escapeSingleQuote"),getGroupItemsByCompMode:_(({newItems:P=[],oldItems:L=[]})=>{let x=P.filter(k=>!L.some(ie=>ie.id===k.id)),Z=[],te=[];return L.forEach(k=>{let ie=P.find(M=>M.id===k.id);ie?r.isEqual(ie,k)||te.push(ie):Z.push(k)}),{added:x,removed:Z,modified:te}},"getGroupItemsByCompMode"),prepareNameForScriptFormat:f}}});var hd=R((PB,Sd)=>{"use strict";var{AlterScriptDto:ud}=wt(),Nd=require("lodash"),LC=_((r,e)=>t=>{let{prepareNameForScriptFormat:s}=Te()(Nd),i=`CREATE USER ${s(e)(t)} NO AUTHENTICATION;`;return ud.getInstance([i],!0,!1)},"getAddContainerScriptDto"),BC=_((r,e)=>t=>{let{prepareNameForScriptFormat:s}=Te()(Nd),i=`DROP USER ${s(e)(t)};`;return ud.getInstance([i],!0,!0)},"getDeleteContainerScriptDto");Sd.exports={getAddContainerScriptDto:LC,getDeleteContainerScriptDto:BC}});var dd=R((IB,Ad)=>{"use strict";var{AlterScriptDto:YC}=wt(),wC=_((r,e,t)=>s=>{var d;let{checkFieldPropertiesChanged:n,prepareNameForScriptFormat:i,getNamePrefixedWithSchemaNameForScriptFormat:a,getEntityName:c}=Te()(r),T={...s,...r.omit(s==null?void 0:s.role,"properties")||{}},E=c(T),l=(d=T.compMod)==null?void 0:d.keyspaceName,h=a(t)(E,l);return r.toPairs(s.properties).filter(([A,u])=>n(u.compMod,["type","mode"])).map(([A,u])=>`ALTER TABLE ${h} MODIFY (${i(t)(A)} ${r.toUpper(u.compMod.newField.mode||u.compMod.newField.type)});`).map(A=>YC.getInstance([A],!0,!1))},"getUpdateTypesScriptDtos");Ad.exports={getUpdateTypesScriptDtos:wC}});var md=R((CB,pd)=>{"use strict";var{AlterScriptDto:UC}=wt(),MC=_((r,e,t)=>s=>{var d;let{checkFieldPropertiesChanged:n,getEntityName:i,getNamePrefixedWithSchemaNameForScriptFormat:a,prepareNameForScriptFormat:c}=Te()(r),T={...s,...r.omit(s==null?void 0:s.role,"properties")||{}},E=i(T),l=(d=T.compMod)==null?void 0:d.keyspaceName,h=a(t)(E,l);return r.values(s.properties).filter(A=>n(A.compMod,["name"])).map(A=>{let u=c(t)(A.compMod.oldField.name),N=c(t)(A.compMod.newField.name);return e.renameColumn(h,u,N)}).map(A=>UC.getInstance([A],!0,!1))},"getRenameColumnScriptDtos");pd.exports={getRenameColumnScriptDtos:MC}});var _i=R((OB,fd)=>{"use strict";var NT=class NT{type;keyId};_(NT,"AlterIndexKeyDto");var ET=NT,ST=class ST{id;indxName;isActivated;ifNotExist;indxType;indxKey;column_expression;tablespace;index_properties;index_attributes;index_compression;logging_clause;indxComments};_(ST,"AlterIndexDto");var uT=ST;fd.exports={AlterIndexDto:uT,AlterIndexKeyDto:ET}});var Rd=R((BB,Pd)=>{"use strict";var{AlterIndexDto:LB}=_i(),PT=class PT{id;constraintName;indexStorageParameters;indexTablespace;indexInclude};_(PT,"AlterCollectionColumnPrimaryKeyOptionDto");var hT=PT,RT=class RT{type;isActivated;primaryKey;unique;mode;length;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;primaryKeyOptions;triggerUpdateColumns;compMod;GUID};_(RT,"AlterCollectionColumnDto");var AT=RT,IT=class IT extends hT{compositePrimaryKey};_(IT,"AlterCollectionRoleCompModPKDto");var dT=IT,DT=class DT{new;old};_(DT,"AlterCollectionRoleCompModPrimaryKey");var pT=DT,CT=class CT{id;type;collectionName;properties;definitions;isActivated;additionalProperties;memory_optimized;collectionUsers;ifNotExist;on_commit;table_tablespace_name;bucketId;compMod;name;roleType;patternProperties};_(CT,"AlterCollectionRoleDto");var mT=CT,gT=class gT{type;isActivated;unique;subtype;properties;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;triggerUpdateColumns;role;GUID};_(gT,"AlterCollectionDto");var fT=gT;Pd.exports={AlterCollectionDto:fT,AlterCollectionRoleDto:mT,AlterCollectionColumnDto:AT,AlterCollectionRoleCompModPrimaryKey:pT,AlterCollectionRoleCompModPKDto:dT}});var gd=R((MB,Cd)=>{"use strict";var{AlterScriptDto:Nr}=wt(),{AlterCollectionDto:wB}=Rd(),{AlterIndexDto:UB}=_i(),{prepareNameForScriptFormat:OT}=Te()(),VC=["index_compression","tablespace","logging_clause"],xC=["indxType","indxKey","column_expression","index_properties","index_attributes"],bC=_(({_:r})=>({oldIndex:e,newIndex:t})=>xC.some(s=>!r.isEqual(e[s],t[s])),"shouldDropAndRecreateIndex"),FC=_(({oldIndex:r,newIndex:e})=>VC.some(t=>r[t]!==e[t]),"shouldAlterIndexRebuild"),yT=_(({oldIndex:r,newIndex:e})=>r.id===e.id||r.indxName===e.indxName,"areOldIndexDtoAndNewIndexDtoDescribingSameDatabaseIndex"),Id=_(({index:r,collection:e})=>{var t;return(t=r==null?void 0:r.indxKey)!=null&&t.length?{...r,indxKey:r.indxKey.map(s=>{var T,E,l,h,d,A;if(!(s!=null&&s.keyId))return s;let n=Object.entries(((T=e==null?void 0:e.role)==null?void 0:T.properties)||(e==null?void 0:e.properties)||{}).map(([u,N])=>({...N,name:u})),i=(((l=(E=e==null?void 0:e.role)==null?void 0:E.compMod)==null?void 0:l.oldProperties)||[]).map(u=>({...u,GUID:u.id})),c=(n.length>0?n:i).find(u=>(u==null?void 0:u.GUID)===(s==null?void 0:s.keyId));return c?(h=c==null?void 0:c.compMod)!=null&&h.newField?{...s,name:((A=(d=c==null?void 0:c.compMod)==null?void 0:d.newField)==null?void 0:A.name)||null}:{...s,name:c.name}:s})}:r},"addNameToIndexKey"),kC=_(({_:r,ddlProvider:e,scriptFormat:t})=>({collection:s})=>{var c,T,E,l,h,d;let n=((E=(T=(c=s==null?void 0:s.role)==null?void 0:c.compMod)==null?void 0:T.Indxs)==null?void 0:E.new)||[];return(((d=(h=(l=s==null?void 0:s.role)==null?void 0:l.compMod)==null?void 0:h.Indxs)==null?void 0:d.old)||[]).filter(A=>!n.find(N=>yT({oldIndex:A,newIndex:N}))).map(A=>qC({ddlProvider:e,scriptFormat:t})({index:A,collection:s}))},"getDeletedIndexesScriptDtos"),qC=_(({ddlProvider:r,scriptFormat:e})=>({index:t})=>{let s=OT(e)(t.indxName),n=r.dropIndex({name:s});return Nr.getInstance([n],t.isActivated,!0)},"getDeleteIndexScriptDto"),Dd=_(({_:r,ddlProvider:e})=>({collection:t})=>{var a,c,T,E;let s=((a=t==null?void 0:t.role)==null?void 0:a.Indxs)||[],n=((E=(T=(c=t==null?void 0:t.role)==null?void 0:c.compMod)==null?void 0:T.Indxs)==null?void 0:E.old)||[];return s.filter(l=>!n.find(d=>yT({oldIndex:d,newIndex:l}))).map(l=>GC({ddlProvider:e})({index:l,collection:t}))},"getAddedIndexesScriptDtos"),GC=_(({ddlProvider:r})=>({index:e,collection:t})=>{var a,c,T,E,l,h,d;let s=Id({index:e,collection:t}),n=((T=(c=(a=t==null?void 0:t.role)==null?void 0:a.compMod)==null?void 0:c.collectionName)==null?void 0:T.new)||((E=t==null?void 0:t.role)==null?void 0:E.name),i=r.createIndex(n,{...s,schemaName:(d=(h=(l=t==null?void 0:t.role)==null?void 0:l.compMod)==null?void 0:h.bucketProperties)==null?void 0:d.name});return Nr.getInstance([i],e.isActivated,!1)},"getAddIndexScriptDto"),HC=_(({_:r,ddlProvider:e,scriptFormat:t})=>({collection:s})=>{var c,T,E,l,h,d;let n=((E=(T=(c=s==null?void 0:s.role)==null?void 0:c.compMod)==null?void 0:T.Indxs)==null?void 0:E.new)||[],i=((d=(h=(l=s==null?void 0:s.role)==null?void 0:l.compMod)==null?void 0:h.Indxs)==null?void 0:d.old)||[];return n.map(A=>{let u=i.find(N=>yT({oldIndex:N,newIndex:A}));if(u)return{newIndex:A,oldIndex:u}}).filter(Boolean).flatMap(A=>vC({_:r,ddlProvider:e,scriptFormat:t})({modifiedIndex:A,collection:s}))},"getModifiedIndexesScriptDtos"),vC=_(({_:r,ddlProvider:e,scriptFormat:t})=>({modifiedIndex:{oldIndex:s,newIndex:n},collection:i})=>{var l,h,d,A,u,N;let a=OT(t)(s.indxName),c=OT(t)(n.indxName),T=[];if(bC({_:r})({oldIndex:s,newIndex:n})){let m=Nr.getInstance([e.dropIndex({name:a})],n.isActivated,!0),S=Id({index:n,collection:i}),I=Nr.getInstance([e.createIndex((d=(h=(l=i==null?void 0:i.role)==null?void 0:l.compMod)==null?void 0:h.collectionName)==null?void 0:d.new,{...S,schemaName:(N=(u=(A=i==null?void 0:i.role)==null?void 0:A.compMod)==null?void 0:u.bucketProperties)==null?void 0:N.name})],n.isActivated,!1);return T.push(m,I),T}if(s.indxName!==n.indxName){let m=Nr.getInstance([e.alterIndexRename({oldName:a,newName:c})],n.isActivated,!1);T.push(m)}if(FC({oldIndex:s,newIndex:n})){let m=Nr.getInstance([e.alterIndexRebuild({name:c,indexData:n})],n.isActivated,!1);T.push(m)}return T},"getModifyIndexScriptDto"),KC=_(({_:r,ddlProvider:e,scriptFormat:t})=>({collection:s})=>{let n=kC({_:r,ddlProvider:e,scriptFormat:t})({collection:s}),i=Dd({_:r,ddlProvider:e})({collection:s}),a=HC({_:r,ddlProvider:e,scriptFormat:t})({collection:s});return[...n,...i,...a].filter(Boolean)},"getModifyIndexesScriptDtos");Cd.exports={getModifyIndexesScriptDtos:KC,getAddedIndexesScriptDtos:Dd}});var Hr=R((xB,Od)=>{"use strict";Od.exports=r=>{let e=require("lodash"),{createColumnDefinition:t}=r.require("@hackolade/ddl-fe-utils"),s=_(i=>i.$ref?i.$ref.split("/").pop():e.toUpper(i.mode||i.childType||i.type),"getType");return{createColumnDefinitionBySchema:_(({name:i,jsonSchema:a,parentJsonSchema:c,ddlProvider:T,schemaData:E,definitionJsonSchema:l})=>t({name:i,jsonSchema:a,parentJsonSchema:c,ddlProvider:T,schemaData:E,definitionJsonSchema:l,getType:s}),"createColumnDefinitionBySchema")}}});var Ld=R((FB,yd)=>{"use strict";yd.exports={number:"numeric",string:"nvarchar2",date:"date",timestamp:"timestamp",binary:"raw",boolean:"numeric",document:"bfile",array:"json",objectId:"char",default:"nvarchar2"}});var Yd=R((kB,Bd)=>{"use strict";Bd.exports={character:{type:"char"},"character varying":{type:"varchar"},"char varying":{type:"varchar"},"national char":{type:"nchar"},"national character":{type:"nchar"},"national char varying":{type:"nvarchar2"},"national character varying":{type:"nvarchar2"},"nchar varying":{type:"nvarchar2"},tinyint:{type:"number",precision:5},"small int":{type:"number",precision:5},shortinteger:{type:"number",precision:5},shortint:{type:"number",precision:5},smallint:{type:"number",precision:5},int:{type:"number",precision:10},integer:{type:"number",precision:10},shortdecimal:{type:"number",precision:5,scale:0},decimal:{type:"number",precision:5,scale:0},longinteger:{type:"number",precision:20},bigint:{type:"number",precision:20},int8:{type:"number",precision:20},bit:{type:"number",precision:1},real:{type:"float",length:23},"double precision":{type:"number"},"small money":{type:"float",precision:16,scale:2},money:{type:"float",precision:16,scale:2},"long varchar":{type:"long"},text:{type:"long"},ntext:{type:"long"},uniqueidentifier:{type:"char",length:36},uuid:{type:"char",length:36},datetime:{type:"date"},"small datetime":{type:"date"},image:{type:"long raw"},binary:{type:"raw"},varbinary:{type:"raw"},string:{type:"nvarchar2"}}});var LT=R((qB,wd)=>{"use strict";wd.exports={createSchema:"CREATE USER${ifNotExists} ${schemaName} NO AUTHENTICATION",comment:"\nCOMMENT ON ${object} ${objectName} IS ${comment};\n",createTable:"CREATE${tableType} TABLE${ifNotExists} ${name}${tableProps}\n${options}",createTableProps:"${columnDefinitions}${keyConstraints}${checkConstraints}${foreignKeyConstraints}",columnDefinition:"${name}${type}${default}${encrypt}${constraints}",createKeyConstraint:"${constraintName}${keyType}${columns}${options}",createForeignKeyConstraint:"${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${onDelete}",checkConstraint:"${name}CHECK (${expression})",createForeignKey:"ALTER TABLE ${foreignTable} ADD CONSTRAINT ${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${onDelete};",dropForeignKey:"ALTER TABLE ${tableName} DROP CONSTRAINT ${fkConstraintName};",createIndex:"CREATE${indexType} INDEX${ifNotExists}${name} ON ${tableName}${keys}${options};\n",dropIndex:"DROP INDEX ${name};",alterIndexRename:"ALTER INDEX ${oldName} RENAME TO ${newName};",alterIndexRebuild:"ALTER INDEX ${name} REBUILD ${options};",createView:"CREATE${orReplace}${force}${viewType}${materialized} VIEW${ifNotExists} ${name} ${sharing}${viewProperties}\n	AS ${selectStatement}",viewSelectStatement:"SELECT ${keys}\n	FROM ${tableName}",createObjectType:`CREATE OR REPLACE TYPE \${name} AS OBJECT 
(
	\${properties}
);
`,objectTypeColumnDefinition:"${name} ${type}",createCollectionType:"CREATE OR REPLACE TYPE ${name} IS ${collectionType}${size} OF (${datatype})${notPersistable};\n",ifNotExists:`DECLARE
BEGIN
	EXECUTE IMMEDIATE '\${statement}';
	EXCEPTION WHEN OTHERS THEN
		IF SQLCODE = -\${errorCode} THEN NULL; ELSE RAISE; END IF;
END;
/
`,createSynonym:"CREATE${orReplace}${editionable}${public} SYNONYM ${name}\n	FOR ${objectName};\n",renameColumn:"ALTER TABLE ${tableName} RENAME COLUMN ${oldColumnName} TO ${newColumnName};",createSequence:"CREATE SEQUENCE${ifNotExists} ${name}${sharing}${options}",dropSequence:"DROP SEQUENCE${ifExists} ${name};\n",renameSequence:"RENAME ${name} TO ${newName};\n",alterSequence:"ALTER SEQUENCE${ifExists} ${name}${options};\n",dualityView:{createJsonRelationalDualityViewHeading:"CREATE${orReplaceStatement}${forceStatement}${editionableStatement} JSON RELATIONAL DUALITY VIEW ${viewName} AS",sql:{tableTagsStatement:"WITH${checkStatement}${etagStatement}${insertStatement}${updateStatement}${deleteStatement}",columnTagsStatement:"WITH${checkStatement}${etagStatement}${updateStatement}",fromTableStatement:"FROM ${tableName}${tableAlias}${tableTagsStatement}${whereClauseStatement}"}},alterSession:"ALTER SESSION SET CURRENT_SCHEMA=${schemaName};\n"}});var BT=R((GB,Ud)=>{"use strict";var WC=Object.freeze({SQL:"SQL",GRAPHQL:"GRAPHQL"});Ud.exports={DualityViewSyntaxType:WC}});var YT=R((HB,Md)=>{"use strict";var $C=Object.freeze({JOIN_SUBQUERY_TYPE:"joinSubquery",COLLECTION_REFERENCE:"collectionReference"});Md.exports={DualityViewPropertiesType:$C}});var bd=R((vB,xd)=>{"use strict";var{DualityViewPropertiesType:Vd}=YT(),qt=class qt{constructor(e,t,s,n,i){if(this.constructor===qt)throw new Error("Abstract classes can't be instantiated.");this._ddlTemplates=e,this._assignTemplates=t,this._lodash=s,this._prepareName=n,this._getNamePrefixedWithSchemaName=i}static padInFront(e){return` ${e}`}static padInFrontAndUppercaseIfExists(e){return e?qt.padInFront(e).toUpperCase():""}static isDualityView(e={}){return e.viewOn&&e.duality}static isJoinSubquery(e={}){return(e==null?void 0:e.type)===Vd.JOIN_SUBQUERY_TYPE}static isFlexColumn(e={}){return e.flexColumn}static isRegularDualityViewFieldOnRootLevelOrInObjectSubquery(e={}){let{ref:t,refIdPath:s,refType:n}=e;return t&&(s||[]).length===2&&n===Vd.COLLECTION_REFERENCE}static isRegularDualityViewFieldInArraySubquery(e={}){let{ref:t,refId:s}=e;return t&&s}static isRegularDualityViewField(e={}){return qt.isRegularDualityViewFieldOnRootLevelOrInObjectSubquery(e)||qt.isRegularDualityViewFieldInArraySubquery(e)}static getPathToReferencedColumn(e,t){let s=[];return qt.isRegularDualityViewFieldOnRootLevelOrInObjectSubquery(e)?s=e.refIdPath:qt.isRegularDualityViewFieldInArraySubquery(e)&&(s=[...t.joinedCollectionRefIdPath||[],e.ref]),s}static getRegularFieldNameFromCollection(e,t){if(e.length<2)throw new Error("Cannot extract referenced column name");let s=e[0],n=e[1],i=t[s],a=(i==null?void 0:i.properties)||{};for(let c of Object.keys(a))if(a[c].GUID===n)return c;return""}static getKeyValueFrontPadding(e){return"	".repeat(e)}_getForceStatement(e){return qt.padInFrontAndUppercaseIfExists(e.force)}_getOrReplaceStatement(e){return e.orReplace?" OR REPLACE":""}_getEditionableStatement(e){return qt.padInFrontAndUppercaseIfExists(e.editionable)}static getRegularFieldName(e,t){return t.code||e||t.referencedColumnName}getCreateJsonRelationalDualityViewHeadingDdl(e){var d,A;let{jsonSchema:t,view:s}=e,{getViewName:n}=Te()(this._lodash),i=((A=(d=this._ddlTemplates)==null?void 0:d.dualityView)==null?void 0:A.createJsonRelationalDualityViewHeading)||"",a=this._getOrReplaceStatement(s),c=this._getForceStatement(t),T=this._getEditionableStatement(t),E=n(s),l=this._getNamePrefixedWithSchemaName(E,s.schemaName),h={orReplaceStatement:a,forceStatement:c,editionableStatement:T,viewName:l};return this._assignTemplates(i,h)}getDualityViewBodyDdl(e){throw new Error("Not implemented")}convertDualityViewToDdl(e){let t=this.getCreateJsonRelationalDualityViewHeadingDdl(e),s=this.getDualityViewBodyDdl(e);return t+`
`+s+`
`}};_(qt,"AbstractDualityViewFeDdlCreator");var wT=qt;xd.exports={AbstractDualityViewFeDdlCreator:wT}});var kd=R((WB,Fd)=>{"use strict";var{AbstractDualityViewFeDdlCreator:fe}=bd(),MT=class MT extends fe{_getFromRootTableAliasStatement(e){if(e.rootTableAlias){let t=this._prepareName(e.rootTableAlias);return fe.padInFront(t)}return""}_getFromChildTableAliasStatement(e){if(e.childTableAlias){let t=this._prepareName(e.childTableAlias);return fe.padInFront(t)}return""}_getCheckStatement(e){return fe.padInFrontAndUppercaseIfExists(e.check)}_getEtagStatement(e){let t=e.etag?"etag":"";return fe.padInFrontAndUppercaseIfExists(t)}_getDeleteStatement(e){return fe.padInFrontAndUppercaseIfExists(e.delete)}_getInsertStatement(e){return fe.padInFrontAndUppercaseIfExists(e.insert)}_getUpdateStatement(e){return fe.padInFrontAndUppercaseIfExists(e.update)}_getTableTagsStatement(e){let t=e.tableTagsClause||{},s=this._getCheckStatement(t),n="";s&&(n=this._getEtagStatement(t));let i=this._getInsertStatement(t),a=this._getUpdateStatement(t),c=this._getDeleteStatement(t),T={checkStatement:s,etagStatement:n,insertStatement:i,updateStatement:a,deleteStatement:c};if(Object.values(T).some(l=>l==null?void 0:l.length)){let l=this._ddlTemplates.dualityView.sql.tableTagsStatement,h=this._assignTemplates(l,T);return fe.padInFront(h)}return""}_getColumnTagsStatement(e){let t=e.columnTagsClause||{},s=this._getCheckStatement(t),n="";s&&(n=this._getEtagStatement(t));let i=this._getUpdateStatement(t),a={checkStatement:s,etagStatement:n,updateStatement:i};if(Object.values(a).some(T=>T==null?void 0:T.length)){let T=this._ddlTemplates.dualityView.sql.columnTagsStatement,E=this._assignTemplates(T,a);return fe.padInFront(E)}return""}_getFromRootTableStatement(e){var T;let t=this._getNamePrefixedWithSchemaName(e.tableName,e.schemaName),s=this._getFromRootTableAliasStatement(e),n=this._getTableTagsStatement(e),i=(T=e.whereClause)==null?void 0:T.trim(),a=i?`
WHERE ${i} WITH CHECK OPTION`:"",c=this._ddlTemplates.dualityView.sql.fromTableStatement;return this._assignTemplates(c,{tableName:t,tableAlias:s,tableTagsStatement:n,whereClauseStatement:a})}_getFromChildTableStatement({joinSubqueryJsonSchema:e,relatedSchemas:t,bodyPadding:s}){let n=this._lodash.first(e.joinedCollectionRefIdPath);if(!n)throw new Error("Specify child table for all join subqueries");let i=t[n],{getEntityName:a}=Te()(this._lodash),c=a(i),T=i.bucketName,E=this._getNamePrefixedWithSchemaName(c,T),l=this._getFromChildTableAliasStatement(e),h=this._getTableTagsStatement(e),d=this._ddlTemplates.dualityView.sql.fromTableStatement,u=[this._assignTemplates(d,{tableName:E,tableAlias:l,tableTagsStatement:h})];return e.whereClause&&u.push(`WHERE ${e.whereClause}`),u.map(N=>`${s}${N}`).join(`
`)}_getNameOfReferencedColumnForDdl(e,t,s){let{getEntityName:n}=Te()(this._lodash);if(fe.isDualityView(e)){let i=e.rootTableAlias||e.tableName;return this._getNamePrefixedWithSchemaName(t,i)}if(fe.isJoinSubquery(e)){if(e.childTableAlias){let a=e.childTableAlias;return this._getNamePrefixedWithSchemaName(t,a)}let i=this._lodash.first(e.joinedCollectionRefIdPath);if(i){let a=s[i],c=n(a);return this._getNamePrefixedWithSchemaName(t,c)}}return""}_getRegularFieldKeyValueStatement({propertyName:e,propertyJsonSchema:t,parent:s,paddingFactor:n,relatedSchemas:i}){let{wrap:a}=Te()(this._lodash),c=fe.getKeyValueFrontPadding(n),T=fe.getRegularFieldName(e,t),E=a(T,"'","'"),l=fe.getPathToReferencedColumn(t,s),h=fe.getRegularFieldNameFromCollection(l,i),d=this._getNameOfReferencedColumnForDdl(s,h,i),A=this._getColumnTagsStatement(t);return`${c}${E}: ${d}${A}`}_getJoinSubqueryValueStatement({propertyJsonSchema:e,paddingFactor:t,relatedSchemas:s}){let n=t+1,i=t+2,a=this._getObjectGenStatement({paddingFactor:i,relatedSchemas:s,jsonSchema:e}),c=fe.getKeyValueFrontPadding(n),E=[`${c}SELECT${a}`],l=this._getFromChildTableStatement({joinSubqueryJsonSchema:e,relatedSchemas:s,bodyPadding:c});return E.push(l),E.join(`
`)}_shouldUnnestJoinSubquery(e){let t=this._lodash.toUpper(e.sqlJsonFunction),s=this._lodash.toLower(e.subtype);return t==="JSON_OBJECT"||s==="object"?!!e.unnestSubquery:!1}_getJoinSubqueryKeyValueStatement({propertyName:e,propertyJsonSchema:t,paddingFactor:s,relatedSchemas:n}){let{wrap:i}=Te()(this._lodash),a=this._getJoinSubqueryValueStatement({relatedSchemas:n,paddingFactor:s,propertyJsonSchema:t}),c=fe.getKeyValueFrontPadding(s),T=this._getObjectGenStatementJsonKeywordConfig(t),E=T.surroundingBrackets[0],l=T.surroundingBrackets[1];if(this._shouldUnnestJoinSubquery(t))return`${c}UNNEST ${E}
${a}
${c}${l}`;let d=this._getJoinSubqueryName(e,t),A=i(d,"'","'");return`${c}${A} : ${E}
${a}
${c}${l}`}_getJoinSubqueryName(e,t){return t.name||e}_buildKeyValueStatement({propertyName:e,propertyJsonSchema:t,parent:s,paddingFactor:n,relatedSchemas:i}){return fe.isFlexColumn(t)?this._getFlexColumnStatement({propertyName:e,propertyJsonSchema:t,paddingFactor:n}):fe.isRegularDualityViewField(t)?this._getRegularFieldKeyValueStatement({propertyName:e,propertyJsonSchema:t,parent:s,paddingFactor:n,relatedSchemas:i}):fe.isJoinSubquery(t)?this._getJoinSubqueryKeyValueStatement({propertyName:e,propertyJsonSchema:t,paddingFactor:n,relatedSchemas:i}):""}_getKeyValueStatement({jsonSchema:e,relatedSchemas:t,paddingFactor:s}){var T;let n=[],i=e.properties||((T=e.items)==null?void 0:T.properties)||{},a=this._lodash.toPairs(i);for(let[E,l]of a){let h=this._buildKeyValueStatement({propertyName:E,propertyJsonSchema:l,parent:e,paddingFactor:s,relatedSchemas:t});n.push(h)}return`
${n.join(`,
`)}
`}_getObjectGenStatementJsonKeywordConfig(e){if(!fe.isJoinSubquery(e))return{jsonKeyword:"JSON",surroundingBrackets:["",""],jsonKeywordBrackets:["{","}"]};let t=this._lodash.toUpper(e.sqlJsonFunction);return t==="JSON_OBJECT"?{jsonKeyword:t,surroundingBrackets:["(",")"],jsonKeywordBrackets:["(",")"]}:t==="JSON_ARRAYAGG"?{jsonKeyword:t,surroundingBrackets:["(",")"],jsonKeywordBrackets:["( JSON {","})"]}:this._lodash.toLower(e.subtype)==="array"?{jsonKeyword:"JSON",surroundingBrackets:["[","]"],jsonKeywordBrackets:["{","}"]}:{jsonKeyword:"JSON",surroundingBrackets:["(",")"],jsonKeywordBrackets:["{","}"]}}_getObjectGenStatement({relatedSchemas:e,paddingFactor:t,jsonSchema:s}){let n=this._getKeyValueStatement({relatedSchemas:e,paddingFactor:t,jsonSchema:s}),i=fe.getKeyValueFrontPadding(t-1),a=this._getObjectGenStatementJsonKeywordConfig(s),c=a.jsonKeywordBrackets[0],T=a.jsonKeywordBrackets[1],E=`${a.jsonKeyword} ${c}\${keyValueStatement}${i}${T}`,l=this._assignTemplates(E,{keyValueStatement:n});return fe.padInFront(l)}getDualityViewBodyDdl(e){let{view:t,jsonSchema:s,relatedSchemas:n}=e,c=[`SELECT${this._getObjectGenStatement({jsonSchema:s,paddingFactor:1,relatedSchemas:n})}`],T=this._getFromRootTableStatement(t);return c.push(T+";"),c.join(`
`)}_getFlexColumnStatement({propertyName:e,propertyJsonSchema:t,paddingFactor:s}){let{wrap:n}=Te()(this._lodash),i=fe.getKeyValueFrontPadding(s),a=fe.getRegularFieldName(e,t),c=n(a,'"','"');return`${i}${c} AS FLEX COLUMN`}};_(MT,"SqlDualityViewDdlCreator");var UT=MT;Fd.exports={SqlDualityViewDdlCreator:UT}});var Gd=R((zB,qd)=>{"use strict";var{DualityViewSyntaxType:zC}=BT(),{SqlDualityViewDdlCreator:XC}=kd(),xT=class xT{static getCreatorInstance(e,{ddlTemplates:t,assignTemplates:s,lodash:n,prepareName:i,getNamePrefixedWithSchemaName:a}){switch(e==null?void 0:e.toUpperCase()){case zC.SQL:return new XC(t,s,n,i,a);default:throw new Error(`Unknown syntax config: ${e}`)}}};_(xT,"DualityViewDdlCreatorFactory");var VT=xT;qd.exports={DualityViewDdlCreatorFactory:VT}});var bT=R((jB,Hd)=>{"use strict";var jC=Object.freeze({IF_NOT_EXISTS_SINCE:23,JSON_TYPE_SINCE:21});Hd.exports={DbVersion:jC}});var Wd=R((QB,Kd)=>{"use strict";var vd=_((r="")=>new RegExp("\\$\\{(.*?)\\}",r),"template"),QC=_(r=>r.match(vd("gi"))||[],"getAllTemplates"),JC=_(r=>(r.match(vd("i"))||[])[1],"parseTemplate");Kd.exports=({_:r})=>({assignTemplates:_((t,s)=>QC(t).reduce((n,i)=>{let a=JC(i);return n.replace(i,()=>s[a]||s[a]===0?s[a]:"")},t),"assignTemplates")})});var zd=R((eY,$d)=>{"use strict";var ZB=require("lodash");$d.exports=(r,e)=>{let t=_((N,m)=>Object.entries(N.properties).map(m),"mapProperties"),s=_(N=>N.compositeUniqueKey?!1:!!N.unique,"isUniqueKey"),n=_(N=>{var m;return s(N)&&!((m=N.uniqueKeyOptions)!=null&&m.constraintName)},"isInlineUnique"),i=_(N=>N.compositeUniqueKey||N.compositePrimaryKey?!1:!!N.primaryKey,"isPrimaryKey"),a=_(N=>{var m;return i(N)&&!((m=N.primaryKeyOptions)!=null&&m.constraintName)},"isInlinePrimaryKey"),c=_((N,m,S)=>e({keyType:"UNIQUE",columns:[{name:m,isActivated:S}],...N}),"hydrateUniqueOptions"),T=_((N,m,S)=>e({keyType:"PRIMARY KEY",columns:[{name:m,isActivated:S}],...N}),"hydratePrimaryKeyOptions"),E=_((N,m)=>Object.keys(m).find(S=>m[S].GUID===N),"findName"),l=_((N,m)=>r.get(Object.values(m).find(S=>S.GUID===N),"isActivated",!0),"checkIfActivated"),h=_((N,m)=>r.map(N,S=>({name:E(S.keyId,m.properties),isActivated:l(S.keyId,m.properties)})),"getKeys"),d=_(N=>Array.isArray(N.primaryKey)?N.primaryKey.filter(m=>!r.isEmpty(m.compositePrimaryKey)).map(m=>({...T(m,null,null),columns:h(m.compositePrimaryKey,N)})):[],"getCompositePrimaryKeys"),A=_(N=>Array.isArray(N.uniqueKey)?N.uniqueKey.filter(m=>!r.isEmpty(m.compositeUniqueKey)).map(m=>({...c(m,null,null),columns:h(m.compositeUniqueKey,N)})):[],"getCompositeUniqueKeys");return{getTableKeyConstraints:_(N=>{if(!N.properties)return[];let m=t(N,([I,f])=>{if(!(!s(f)||n(f)))return c(f.uniqueKeyOptions,I,f.isActivated)}).filter(Boolean);return[...t(N,([I,f])=>{if(!(!i(f)||a(f)))return T(f.primaryKeyOptions,I,f.isActivated)}).filter(Boolean),...d(N),...m,...A(N)]},"getTableKeyConstraints"),isInlineUnique:n,isInlinePrimaryKey:a,getKeys:h}}});var FT=R((rY,Xd)=>{"use strict";var sY=require("lodash");Xd.exports=({prepareName:r,_:e})=>({getOptionsString:_(({constraintName:s,deferClause:n,rely:i,validate:a,indexClause:c,exceptionClause:T})=>{let E=s?` CONSTRAINT ${r(e.trim(s))}`:"",l=[n,i,c,a,T].filter(Boolean).join(" ");return{constraintString:E,statement:l&&` ${l}`}},"getOptionsString")})});var Qd=R((oY,jd)=>{"use strict";var iY=require("lodash"),{DbVersion:ZC}=bT(),eg=_(r=>Number.parseInt(r,10)<ZC.JSON_TYPE_SINCE,"shouldUseClobForJsonColumns");jd.exports=({_:r,wrap:e,assignTemplates:t,templates:s,commentIfDeactivated:n,wrapComment:i,prepareName:a})=>{let{getOptionsString:c}=FT()({_:r,prepareName:a}),T=_((M,X)=>r.chain(X).filter("comment").map(oe=>{let Ce=t(s.comment,{object:"COLUMN",objectName:`${M}.${a(oe.name)}`,comment:i(oe.comment)});return n(Ce,oe)}).join(`
`).value(),"getColumnComments"),E=_(({nullable:M,unique:X,primaryKey:oe,primaryKeyOptions:Ce,uniqueKeyOptions:ve})=>{let{constraintString:Je,statement:Ut}=c(l({primaryKey:oe,unique:X,primaryKeyOptions:Ce,uniqueKeyOptions:ve}));return`${M?"":" NOT NULL"}${Je}${oe?" PRIMARY KEY":""}${X?" UNIQUE":""}${Ut}`},"getColumnConstraints"),l=_(({primaryKey:M,unique:X,primaryKeyOptions:oe,uniqueKeyOptions:Ce})=>M?oe||{}:X?Ce||{}:{},"getOptions"),h=_((M,X)=>M==="JSON"&&eg(X)?"CLOB":M,"replaceTypeByVersion"),d=_(({default:M,identity:X})=>{if(!r.isEmpty(X)&&X.generated){let oe=_(({generated:ve,generatedOnNull:Je})=>ve==="BY DEFAULT"?` ${ve} ${Je?" ON NULL":""}`:" ALWAYS","getGenerated"),Ce=_(({identityStart:ve,identityIncrement:Je,numberToCache:Ut})=>{let Ht=ve?` START WITH ${ve}`:"",Es=Je?` INCREMENT BY ${Je}`:"",Hs=Ut?` CACHE ${Ut}`:" NOCACHE";return`${Ht}${Es}${Hs}`},"getOptions");return` GENERATED${oe(X)} AS IDENTITY (${r.trim(Ce(X))})`}else if(M)return` DEFAULT ${M}`;return""},"getColumnDefault"),A=_(({encryption:M})=>{if(r.isPlainObject(M)&&!r.isEmpty(r.omit(M,"id"))){let{ENCRYPTION_ALGORITHM:X,INTEGRITY_ALGORITHM:oe,noSalt:Ce}=M,ve=X?` USING '${X}'`:"",Je=oe?` '${oe}'`:"";return` ENCRYPT${ve}${Je}${Ce?" NO SALT":""}`}return""},"getColumnEncrypt"),u=_((M,X,oe)=>` ${M}(${X} ${r.toUpper(oe)})`,"addByteLength"),N=_((M,X)=>` ${M}(${X})`,"addLength"),m=_((M,X,oe)=>r.isNumber(oe)?` ${M}(${X||"*"},${oe})`:r.isNumber(X)?` ${M}(${X})`:` ${M}`,"addScalePrecision"),S=_((M,X)=>r.isNumber(X)?` ${M}(${X})`:` ${M}`,"addPrecision"),I=_((M,X,oe)=>` TIMESTAMP${r.isNumber(M)?`(${M})`:""}${X?` WITH${oe?" LOCAL":""} TIME ZONE`:""}`,"timestamp"),f=_(M=>` INTERVAL YEAR${r.isNumber(M)?`(${M})`:""} TO MONTH`,"intervalYear"),g=_((M,X)=>{let oe=r.isNumber(M)?`(${M})`:"",Ce=r.isNumber(X)?`(${X})`:"";return` INTERVAL DAY${oe} TO SECOND${Ce}`},"intervalDay"),w=_((M,X,oe)=>{let Ce={"vector<int8>":"int8","vector<float32>":"float32","vector<float64>":"float64"}[oe],ve=X||"*",Je=r.toUpper(Ce||"*");return` ${M}(${ve}, ${Je})`},"decorateVector"),V=_((M,X)=>["object","array"].includes(X)?" "+M+"("+r.toUpper(X)+")":" "+M,"decorateJson"),q=_(M=>["CHAR","VARCHAR2"].includes(M),"canHaveByte"),K=_(M=>["CHAR","VARCHAR2","NCHAR","NVARCHAR2","RAW","UROWID"].includes(M),"canHaveLength"),D=_(M=>["NUMBER","FLOAT"].includes(M),"canHavePrecision"),F=_(M=>M==="NUMBER","canHaveScale"),P=_(M=>M==="INTERVAL YEAR","isIntervalYear"),L=_(M=>M==="INTERVAL DAY","isIntervalDay"),x=_(M=>M==="TIMESTAMP","isTimezone"),Z=_((M,X,oe)=>M==="VECTOR"&&(X||oe),"canDecorateVector"),te=_(M=>M==="JSON","isJson");return{getColumnComments:T,getColumnConstraints:E,replaceTypeByVersion:h,getColumnDefault:d,getColumnEncrypt:A,decorateType:_((M,X)=>{let{lengthSemantics:oe,length:Ce,precision:ve,scale:Je,fractSecPrecision:Ut,withTimeZone:Ht,localTimeZone:Es,yearPrecision:Hs,dayPrecision:Ni,isUDTRef:Si,schemaName:Kr,dimension:Sr,subtype:vs}=X;return oe&&q(M)&&K(M)&&r.isNumber(Ce)?u(M,Ce,oe):K(M)&&r.isNumber(Ce)?N(M,Ce):D(M)&&F(M)?m(M,ve,Je):D(M)&&r.isNumber(ve)?S(M,ve):x(M)?I(Ut,Ht,Es):P(M)?f(Hs):L(M)?g(Ni,Ut):Si&&Kr?` "${Kr}"."${M}"`:Z(M,Sr,vs)?w(M,Sr,vs):te(M)?V(M,vs):` ${M}`},"decorateType"),canHaveIdentity:_(M=>["number"].includes(M),"canHaveIdentity")}}});var Zd=R((cY,Jd)=>{"use strict";var _Y=require("lodash");Jd.exports=({_:r,getColumnsList:e,checkAllKeysDeactivated:t,commentIfDeactivated:s,prepareName:n,assignTemplates:i})=>{let{getOptionsString:a}=FT()({_:r,prepareName:n}),c=_(({duplicated:D,external:F,immutable:P,sharded:L,temporary:x,temporaryType:Z,blockchain_table_clauses:te})=>{let k=!r.isEmpty(te);switch(!0){case x:return` ${r.toUpper(Z)} TEMPORARY`;case L:return" SHARDED";case D:return" DUPLICATED";case P:return" IMMUTABLE";case k:return`${te.immutable?" IMMUTABLE":""} BLOCKCHAIN`;default:return""}},"getTableType"),T=_(D=>{let F=_(L=>L?`${L}
`:"","wrap"),P=[{key:"blockchain_table_clauses",getValue:E(D==null?void 0:D.tableProperties)},{key:"storage",getValue:l(D==null?void 0:D.tableProperties)},{key:"external_table_clause",getValue:h},{key:"partitioning",getValue:d},{key:"selectStatement",getValue:f("AS")},{key:"tableProperties",getValue:L=>L}].map(L=>D[L.key]?F(L.getValue(D[L.key],D)):"").filter(Boolean).join("");return r.trim(P)?` ${r.trim(P)}`:""},"getTableOptions"),E=_(D=>({blockchain_table_retention_clause:F,blockchain_row_retention_clause:P,blockchain_hash_and_data_format_clause:L})=>r.includes(D,F)||r.includes(D,P)||r.includes(D,L)?"":r.trim(` ${F||""} ${P||""} ${L||""}`),"getBlockChainClause"),l=_(D=>({organization:F,tablespace:P,logging:L})=>r.includes(D,"TABLESPACE")?"":F==="external"?"ORGANIZATION EXTERNAL":`ORGANIZATION ${r.toUpper(F)||"HEAP"}${P?` TABLESPACE ${n(P)}`:""} ${L?"LOGGING":"NOLOGGING"}`,"getStorage"),h=_(D=>{if(!(D!=null&&D.access_driver_type))return"";let{access_driver_type:F,default_directory:P,access_parameter_type:L,opaque_format_spec:x,clob_subquery:Z,reject_limit:te,location:k}=D,ie=`(${r.map(k,({location_directory:oe,location_specifier:Ce})=>`${oe?`${oe}:`:""}'${Ce}'`).join(", ")})`,M=L==="NONE"?"":`ACCESS PARAMETERS ${Z?`USING CLOB ${Z}`:x}`,X=`${P&&!r.isEmpty(P)?` DEFAULT DIRECTORY ${P}`:""}`+M+`${k&&!r.isEmpty(k)?` LOCATION ${ie}`:""}`;return` (TYPE ${r.toUpper(F)} ${X}) REJECT LIMIT ${te||"UNLIMITED"} `},"getExternalTableClause"),d=_((D,{isActivated:F})=>{if(D!=null&&D.partitionBy){let P=A(D,F),L=u(D,F);return`PARTITION BY ${r.toUpper(r.startsWith(D.partitionBy,"composite")?r.last(D.partitionBy.split(" ")):D.partitionBy)} ${P}${L}`}return""},"getPartitioning"),A=_((D,F)=>{let P=t(D.partitionKey);return r.isEmpty(D.partitionKey)?"":e(D.partitionKey,P,F,({name:L})=>n(L))},"getPartitionKeys"),u=_((D,F)=>{switch(D.partitionBy){case"range":return`${D.interval?`
INTERVAL (${D.interval})`:""}`+S(D.store_in_tablespaces)+N(D.range_partitions,"range_partition_clause");case"list":return`${D.automatic?" AUTOMATIC":""}`+S(D.store_in_tablespaces)+N(D.list_partitions,"list_partition_clause");case"hash":return I(D);case"reference":return`${D.constraint?` (${D.constraint})`:""}`+N(D.reference_partition_descs,"reference_partition_desc");case"system":return D.system_partitioning_quantity?` PARTITIONS ${D.system_partitioning_quantity}`:N(D.system_partition_descs,"system_partition_desc");case"composite range":{let P=m(D,F);return`${D.interval?` INTERVAL (${D.interval})`:""}`+S(D.store_in_tablespaces)+P+N(D.range_subpartition_descs,"range_subpartition_desc")}case"composite list":{let P=m(D,F);return S(D.store_in_tablespaces,"AUTOMATIC")+P+N(D.list_subpartition_descs,"list_subpartition_description")}case"composite hash":{let P=m(D,F),L=I(D);return`${P}${L}`}default:return""}},"getPartitionClause"),N=_((D,F)=>D&&r.isArray(D)&&!r.isEmpty(D)?`
(
	${(F?r.map(D,P=>P[F]):D).join(`,
	`)}
)
`:"","partitionsToString"),m=_(({subpartitionType:D,subpartitionDescription:F,compositePartitionKey:P},L)=>{if(D){let x=t(P),Z=F?`
${F}`:"";return` SUBPARTITION BY ${r.toUpper(D)} ${e(P,x,L,({name:te})=>n(te))} ${Z}`}return""},"getSubpartition"),S=_((D,F,P="store_in_tablespace")=>r.isEmpty(D)?"":`${F?` ${F}`:""} STORE IN (${r.map(D,L=>L[P]).join(", ")})`,"getTablespaceList"),I=_(({hash_partition_quantity:D,store_in_tablespaces:F,overflow_store_in_tablespaces:P,individual_hash_partitions:L})=>D?` PARTITIONS ${D}`+S(F)+S(P,"OVERFLOW","overflow_store_in_tablespace"):N(L,"individual_hash_partition"),"getHashPartition"),f=_(D=>F=>{if(F)return`${D} ${F}`},"getBasicValue");return{getTableOptions:T,getTableType:c,generateConstraintsString:_((D,F)=>{var Z,te;let P=s(((D==null?void 0:D.deactivatedItems)||[]).join(`,
	`),{isActivated:!F,isPartOfLine:!0}),L=(Z=D==null?void 0:D.activatedItems)!=null&&Z.length?`,
	`+D.activatedItems.join(`,
	`):"",x=(te=D==null?void 0:D.deactivatedItems)!=null&&te.length?`
	`+P:"";return L+x},"generateConstraintsString"),foreignKeysToString:_(D=>{if(Array.isArray(D)){let F=D.filter(x=>r.get(x,"isActivated",!0)).map(x=>n(r.trim(x.name))),P=D.filter(x=>!r.get(x,"isActivated",!0)).map(x=>n(r.trim(x.name))),L=P.length?s(P,{isActivated:!1,isPartOfLine:!0}):"";return F.join(", ")+L}return D},"foreignKeysToString"),foreignActiveKeysToString:_(D=>D.map(F=>r.trim(F.name)).join(", "),"foreignActiveKeysToString"),createKeyConstraint:_((D,F)=>P=>{let L=t(P.columns),x=e(P.columns,L,F,({name:te})=>n(te)),Z=a(P).statement;return{statement:i(D.createKeyConstraint,{constraintName:P.constraintName?`CONSTRAINT ${n(P.constraintName)} `:"",keyType:P.keyType,columns:x,options:Z}),isActivated:!L}},"createKeyConstraint"),customPropertiesForForeignKey:_(D=>({foreignOnDelete:r.get(D,"relationshipOnDelete","")}),"customPropertiesForForeignKey")}}});var tp=R((EY,ep)=>{"use strict";var lY=require("lodash");ep.exports=({_:r,assignTemplates:e,templates:t,getNamePrefixedWithSchemaName:s})=>{let n=["OBJECT_UDT","VARRAY","TABLE","COLLECTION_UDT"],i=_((T,E)=>{let l=s(T.name,T.schemaName);switch(T.type){case"OBJECT_UDT":return e(t.createObjectType,{name:l,properties:r.map(T.properties,h=>E(h,t.objectTypeColumnDefinition)).join(`,
	`)});case"VARRAY":case"TABLE":{let h=T.type==="VARRAY"?"(64)":"";return e(t.createCollectionType,{name:l,collectionType:T.type,size:r.isNumber(T.size)?`(${T.size})`:h,datatype:`${T.ofType}${T.nullable?"":" NOT NULL"}`,notPersistable:`${T.notPersistable?" NOT PERSISTABLE":""}`})}default:return""}},"getPlainUdt");return{getUserDefinedType:_((T,E)=>i(T,E),"getUserDefinedType"),isNotPlainType:_(T=>{let E=r.toUpper(T.mode||T.type);return n.includes(E)},"isNotPlainType")}}});var rp=R((NY,sp)=>{"use strict";sp.exports=({_:r,prepareName:e})=>{let t=_(({editioning:i,editionable:a})=>`${a?" EDITIONABLE":""}${i?" EDITIONING":""}`,"getViewType"),s=_(i=>i?i.alias?`${e(i.name)} as ${e(i.alias)}`:e(i.name):"","getKeyWithAlias");return{getViewType:t,getViewData:_(i=>Array.isArray(i)?i.reduce((a,c)=>{if(!c.tableName)return a.columns.push(s(c)),a;let T=`${e(c.dbName)}.${e(c.tableName)}`;return a.tables.includes(T)||a.tables.push(T),a.columns.push({statement:`${T}.${s(c)}`,isActivated:c.isActivated}),a},{tables:[],columns:[]}):{tables:[],columns:[]},"getViewData")}}});var ip=R((AY,np)=>{"use strict";var hY=require("lodash");np.exports=({_:r,prepareName:e})=>({getIndexType:_(a=>a?` ${r.toUpper(a)}`:"","getIndexType"),getIndexKeys:_(({indxKey:a,column_expression:c})=>{let{escapeSingleQuote:T}=Te()();return c?`
(
	${T(c)}
)
	`:r.isArray(a)&&!r.isEmpty(a)?`
(
	${r.map(a,({name:l,type:h})=>`${e(l)} ${r.toUpper(h)}`).join(`,
	`)}
)
	`:""},"getIndexKeys"),getIndexOptions:_(({indxDescription:a,comments:c,tablespace:T,index_properties:E,index_attributes:l,index_compression:h,logging_clause:d,indxKey:A,column_expression:u})=>{let N=d?` ${r.toUpper(d)}`:"",m=T?` TABLESPACE ${T}`:"",S=h?` ${h}`:"",I=`${N}${m}${S}`;return E?I=` ${E}`:l&&(I=` ${l}`),r.isEmpty(A)&&r.isEmpty(u)?I:r.trim(I)},"getIndexOptions"),getIndexName:_(a=>a?` ${e(a)}`:"","getIndexName")})});var ap=R((pY,op)=>{"use strict";op.exports=({prepareName:r,templates:e,assignTemplates:t,getNamePrefixedWithSchemaName:s})=>{let n=_(a=>{let c=s(a.synonymName,a.schemaName);return t(e.createSynonym,{name:a.synonymPublic?r(a.synonymName):c,orReplace:a.synonymOrReplace?" OR REPLACE":"",editionable:a.synonymEditionable?" "+a.synonymEditionable:"",public:a.synonymPublic?" PUBLIC":"",objectName:a.synonymEntityName})},"generateSynonymCreateStatement");return{generateSynonymStatements:_((a,c,T)=>a!=null&&a.length?`
`+a.map(E=>n({...E,synonymEntityName:c,schemaName:T})).join(`
`):"","generateSynonymStatements")}}});var cp=R((RY,_p)=>{"use strict";var fY=require("lodash"),{Sequence:PY}=ri();_p.exports=({_:r,templates:e,assignTemplates:t,getNamePrefixedWithSchemaName:s,wrapIfNotExists:n})=>{let i=_(({schemaName:f,sequences:g,usingTryCatchWrapper:w})=>r.map(g,V=>a({schemaName:f,sequence:V,usingTryCatchWrapper:w})).join(`

`),"getSequencesScript"),a=_(({schemaName:f,sequence:g,usingTryCatchWrapper:w})=>{let V=I({schemaName:f,sequence:g}),q=s(g.sequenceName,V),K=w?"":u({sequence:g}),D=E({sequence:g,schemaName:f}),F=m({sequence:g}),P=t(e.createSequence,{name:q,ifNotExists:K,sharing:F,options:D});return w?n(P,g.ifNotExist):P+";"},"createSequenceScript"),c=_(({schemaName:f,sequence:g,oldSequence:w,usingTryCatchWrapper:V})=>{let q=w.sequenceName||g.sequenceName,K=I({schemaName:f,sequence:g}),D=s(q),F=s(q,K),P=S({sequence:g,oldSequence:w}),L=E({schemaName:f,sequence:P}),x=P.sequenceName?s(P.sequenceName):"",Z=N({usingTryCatchWrapper:V});if(P.hasOwnProperty("sharing")){let ie=T({schemaName:f,sequence:w,usingTryCatchWrapper:V}),M=a({schemaName:f,sequence:g,usingTryCatchWrapper:V});return ie+`
`+M+`
`}return[{key:"options",value:L,name:F,template:e.alterSequence},{key:"newName",value:x,name:D,template:e.renameSequence}].filter(ie=>ie.value).map(ie=>t(ie.template,{[ie.key]:ie.value,name:ie.name,ifExists:Z})).join(`
`)},"alterSequenceScript"),T=_(({schemaName:f,sequence:g,usingTryCatchWrapper:w})=>{let V=I({schemaName:f,sequence:g}),q=s(g.sequenceName,V),K=N({usingTryCatchWrapper:w});return t(e.dropSequence,{name:q,ifExists:K})},"dropSequenceScript"),E=_(({schemaName:f,sequence:g})=>{let V=[{getOption:l,key:"increment",clause:"INCREMENT BY"},{getOption:l,key:"start",clause:"START WITH"},{getOption:l,key:"restart",clause:"RESTART WITH"},{getOption:l,key:"minValue",clause:"MINVALUE"},{getOption:l,key:"maxValue",clause:"MAXVALUE"},{getOption:h,key:"cache",extendedKey:"cacheValue"},{getOption:h,key:"cycle",extendedKey:""},{getOption:h,key:"order",extendedKey:""},{getOption:h,key:"keep",extendedKey:""},{getOption:h,key:"scale",extendedKey:"scaleExtend"},{getOption:h,key:"shard",extendedKey:"shardExtend"},{getOption:h,key:"type",extendedKey:""}].map(q=>{let K=q.getOption({sequence:g,schemaName:f,config:q});return d({option:K})}).filter(Boolean).join("");return V&&A({options:V})},"getSequenceOptions"),l=_(({sequence:f,config:g})=>{let w=Number(f[g.key]);return isNaN(w)?"":`${g.clause} ${w}`},"getNumberOption"),h=_(({sequence:f,config:g})=>{let w=r.toUpper(f[g.key]);return w?w.startsWith("NO")||!f[g.extendedKey]?w:w+" "+h({sequence:f,config:{key:g.extendedKey}}):""},"getLiteralOption"),d=_(({option:f})=>f?`	${f}
`:"","wrapOption"),A=_(({options:f})=>`
`+f.replace(/\n$/,""),"wrapOptionsBlock"),u=_(({sequence:f})=>f.ifNotExist?" IF NOT EXISTS":"","getIfNotExists"),N=_(({usingTryCatchWrapper:f})=>f?"":" IF EXISTS","getIfExists"),m=_(({sequence:f})=>f.sharing?" SHARING="+r.toUpper(f.sharing):"","getSharing"),S=_(({sequence:f,oldSequence:g})=>{let w=r.omitBy(f,(V,q)=>r.isEqual(V,g[q]));return f.minValue>g.minValue?{...w,restart:f.start}:w},"getModifiedSequence"),I=_(({schemaName:f,sequence:g})=>g.type==="session"?"":f,"getSequenceSchemaName");return{getSequencesScript:i,createSequenceScript:a,alterSequenceScript:c,dropSequenceScript:T}}});var Gt=R((gY,lp)=>{"use strict";var Ee=require("lodash"),tg=Ld(),Tp=Yd(),Pe=LT(),{DualityViewDdlCreatorFactory:sg}=Gd(),{DualityViewSyntaxType:rg}=BT(),{DbVersion:ng}=bT(),{AlterIndexDto:DY}=_i(),{Sequence:CY}=ri(),qs=_(r=>Number.parseInt(r,10)<ng.IF_NOT_EXISTS_SINCE,"shouldUseTryCatchIfNotExistsWrapper");lp.exports=(r,e,t)=>{var Sr,vs;let s=_(C=>Ee.isArray(C)?C:[C],"toArray"),{tab:n,commentIfDeactivated:i,checkAllKeysDeactivated:a,divideIntoActivatedAndDeactivated:c,hasType:T,wrap:E,clean:l,getNamePrefixedWithSchemaNameForScriptFormat:h,wrapComment:d,getColumnsList:A,prepareNameForScriptFormat:u}=Te()(Ee),N=u((Sr=e==null?void 0:e.targetScriptOptions)==null?void 0:Sr.keyword),m=h((vs=e==null?void 0:e.targetScriptOptions)==null?void 0:vs.keyword),{assignTemplates:S}=Wd()({_:Ee}),I=zd()(Ee,l),{getColumnComments:f,getColumnConstraints:g,replaceTypeByVersion:w,getColumnDefault:V,getColumnEncrypt:q,decorateType:K,canHaveIdentity:D}=Qd()({_:Ee,wrap:E,assignTemplates:S,templates:Pe,commentIfDeactivated:i,wrapComment:d,prepareName:N}),{getTableType:F,getTableOptions:P,generateConstraintsString:L,foreignKeysToString:x,foreignActiveKeysToString:Z,createKeyConstraint:te,customPropertiesForForeignKey:k}=Zd()({_:Ee,checkAllKeysDeactivated:a,getColumnsList:A,commentIfDeactivated:i,prepareName:N,assignTemplates:S}),{getUserDefinedType:ie,isNotPlainType:M}=tp()({_:Ee,commentIfDeactivated:i,assignTemplates:S,templates:Pe,getNamePrefixedWithSchemaName:m}),{getViewType:X,getViewData:oe}=rp()({_:Ee,prepareName:N}),{getIndexType:Ce,getIndexKeys:ve,getIndexOptions:Je,getIndexName:Ut}=ip()({_:Ee,prepareName:N}),Ht=_((C,U,z=955)=>{if(U){let j=n(n(C)),Le=Ee.trim(j).replace(/;$/,"");return S(Pe.ifNotExists,{statement:Le,errorCode:z})}return C+";"},"wrapIfNotExists"),{generateSynonymStatements:Es}=ap()({prepareName:N,templates:Pe,assignTemplates:S,getNamePrefixedWithSchemaName:m}),{getSequencesScript:Hs,createSequenceScript:Ni,dropSequenceScript:Si,alterSequenceScript:Kr}=cp()({_:Ee,templates:Pe,assignTemplates:S,getNamePrefixedWithSchemaName:m,wrapIfNotExists:Ht});return{getDefaultType(C){return tg[C]},getTypesDescriptors(){return Tp},hasType(C){return T(Tp,C)},hydrateSchema(C,U){let z=Ee.get(U,"modelData.0.dbVersion");return{schemaName:C.name,ifNotExist:C.ifNotExist,dbVersion:z,synonyms:U.synonyms,sequences:U.sequences}},createSchema({schemaName:C,ifNotExist:U,dbVersion:z,sequences:j}){let ge=`

`,Le=";",Fe=N(C),Ve=qs(z),nt=S(Pe.createSchema,{schemaName:Fe,ifNotExists:!Ve&&U?" IF NOT EXISTS":""}),Pt=Hs({schemaName:C,sequences:j,usingTryCatchWrapper:Ve}),Mt=Pt?ge+Pt:"",it=S(Pe.alterSession,{schemaName:Fe});return Ve?Ht(nt,U,1920)+Mt:nt+Le+ge+it+Mt},hydrateColumn({columnDefinition:C,jsonSchema:U,schemaData:z,definitionJsonSchema:j={}}){var Ve;let ge=z.dbVersion,Le=!!U.$ref,Fe=Le?C.type:Ee.toUpper(U.mode||U.type);return{name:C.name,type:Fe,ofType:U.ofType,notPersistable:U.notPersistable,size:U.size,primaryKey:I.isInlinePrimaryKey(U),primaryKeyOptions:U.primaryKeyOptions,unique:I.isInlineUnique(U),uniqueKeyOptions:U.uniqueKeyOptions,nullable:C.nullable,default:C.default,comment:U.refDescription||U.description||j.description,isActivated:C.isActivated,scale:C.scale,precision:C.precision,length:C.length,schemaName:z.schemaName,checkConstraints:U.checkConstraints,dbVersion:ge,fractSecPrecision:U.fractSecPrecision,withTimeZone:U.withTimeZone,localTimeZone:U.localTimeZone,yearPrecision:U.yearPrecision,dayPrecision:U.dayPrecision,lengthSemantics:U.lengthSemantics,encryption:U.encryption,synonyms:((Ve=z==null?void 0:z.synonyms)==null?void 0:Ve.filter(nt=>nt.synonymEntityId===U.GUID))||[],isUDTRef:Le,dimension:U.dimension,subtype:U.subtype,...D(U.mode)&&{identity:U.identity}}},hydrateJsonSchemaColumn(C,U){return!C.$ref||Ee.isEmpty(U)||M(U)?C:(C=Ee.omit(C,"$ref"),{...U,...C})},convertColumnDefinition(C,U=Pe.columnDefinition){let z=w(C.type,C.dbVersion);return i(S(U,{name:N(C.name),type:K(z,C),default:V(C),encrypt:q(C),constraints:g(C)}),{isActivated:C.isActivated})},hydrateCheckConstraint(C){return{name:C.chkConstrName,expression:C.constrExpression,comments:C.constrComments,description:C.constrDescription}},createCheckConstraint({name:C,expression:U,comments:z,description:j}){return S(Pe.checkConstraint,{name:C?`CONSTRAINT ${N(C)} `:"",expression:Ee.trim(U).replace(/^\(([\s\S]*)\)$/,"$1")})},createForeignKeyConstraint({name:C,foreignKey:U,primaryTable:z,primaryKey:j,primaryTableActivated:ge,foreignTableActivated:Le,foreignSchemaName:Fe,primarySchemaName:Ve,customProperties:nt},Pt,Mt){let it=a(j),Rt=a(U),Jt=!it&&!Rt&&ge&&Le,us=s(U),ys=s(j),{foreignOnDelete:Ls}=k(nt),Ks=S(Pe.createForeignKeyConstraint,{primaryTable:m(z,Ve||Mt.schemaName),name:C?`CONSTRAINT ${N(C)}`:"",foreignKey:Jt?x(us):Z(us),primaryKey:Jt?x(ys):Z(ys),onDelete:Ls?` ON DELETE ${Ls}`:""});return{statement:Ee.trim(Ks),isActivated:Jt}},createForeignKey({name:C,foreignTable:U,foreignKey:z,primaryTable:j,primaryKey:ge,primaryTableActivated:Le,foreignTableActivated:Fe,foreignSchemaName:Ve,primarySchemaName:nt,customProperties:Pt},Mt,it){let Rt=a(ge),Jt=a(z),us=!Rt&&!Jt&&Le&&Fe,ys=s(z),Ls=s(ge),{foreignOnDelete:Ks}=k(Pt),Wr=S(Pe.createForeignKey,{primaryTable:m(j,nt||it.schemaName),foreignTable:m(U,Ve||it.schemaName),name:C?N(C):"",foreignKey:us?x(ys):Z(ys),primaryKey:us?x(Ls):Z(Ls),onDelete:Ks?` ON DELETE ${Ks}`:""});return{statement:Ee.trim(Wr)+`
`,isActivated:us}},dropForeignKey(C,U){let z={tableName:C,fkConstraintName:U};return S(Pe.dropForeignKey,z)},hydrateTable({tableData:C,entityData:U,jsonSchema:z}){var Fe,Ve;let j=U[0],ge=Ee.first(j.partitioning)||{},Le=I.getKeys(ge.compositePartitionKey,z);return{...C,keyConstraints:I.getTableKeyConstraints(z),selectStatement:Ee.trim(j.selectStatement),partitioning:Ee.assign({},ge,{compositePartitionKey:Le}),...Ee.pick(j,"blockchain_table_clauses","duplicated","external","external_table_clause","immutable","sharded","storage","temporary","temporaryType","description","ifNotExist","tableProperties"),synonyms:((Ve=(Fe=C==null?void 0:C.schemaData)==null?void 0:Fe.synonyms)==null?void 0:Ve.filter(nt=>nt.synonymEntityId===z.GUID))||[]}},createTable({blockchain_table_clauses:C,checkConstraints:U,columnDefinitions:z,columns:j,duplicated:ge,external:Le,external_table_clause:Fe,foreignKeyConstraints:Ve,keyConstraints:nt,immutable:Pt,name:Mt,partitioning:it,schemaData:Rt,selectStatement:Jt,sharded:us,storage:ys,temporary:Ls,temporaryType:Ks,description:Wr,ifNotExist:Ol,tableProperties:Wp,synonyms:$p},$r){let zr=m(Mt,Rt.schemaName),yl=Wr?S(Pe.comment,{object:"TABLE",objectName:zr,comment:d(Wr)}):"",zp=c(nt.map(te(Pe,$r)),hi=>hi.statement),Xp=L(zp,$r),jp=c(Ve,hi=>hi.statement),Qp=L(jp,$r),Ll=f(zr,z),Bl=S(Pe.createTableProps,{columnDefinitions:Ee.join(j,`,
	`),foreignKeyConstraints:Qp,keyConstraints:Xp,checkConstraints:Ee.isEmpty(U)?"":`,
	`+Ee.join(U,`,
	`)}),Jp=Es($p,zr,Rt.schemaName),Zp=yl||Ll?`
`+yl+Ll:"",em=Rt.dbVersion||"",Yl=qs(em),Xr=S(Pe.createTable,{name:zr,ifNotExists:!Yl&&Ol?" IF NOT EXISTS":"",tableProps:Bl?`
(
	${Bl}
)`:"",tableType:F({duplicated:ge,external:Le,immutable:Pt,sharded:us,temporary:Ls,temporaryType:Ks,blockchain_table_clauses:C}),options:P({blockchain_table_clauses:C,external_table_clause:Fe,storage:ys,partitioning:it,selectStatement:Jt,tableProperties:Wp})});return Yl?Xr=Ht(Xr,Ol):Xr+=";",i(Xr+`${Zp}
`+Jp,{isActivated:$r})},hydrateIndex(C,U,z){return{...C,schemaName:z.schemaName}},createIndex(C,U,z,j=!0){let ge=Ut(U.indxName),Le=Ce(U.indxType),Fe=ve(U),Ve=Je(U),nt=e.dbVersion||"",Pt=qs(nt),Mt=U.ifNotExist&&!Pt,it=S(Pe.createIndex,{indexType:Le,ifNotExists:Mt?" IF NOT EXISTS":"",name:ge,keys:Fe,options:Ve,tableName:m(C,U.schemaName)});return U.ifNotExist&&Pt&&(it=Ht(it,!0)),Pt?i(it,{isActivated:U.isActivated}):i(it,{isActivated:U.isActivated})},dropIndex({name:C}){return S(Pe.dropIndex,{name:C})},alterIndexRename({oldName:C,newName:U}){return S(Pe.alterIndexRename,{oldName:C,newName:U})},alterIndexRebuild({name:C,indexData:U}){let z=Je(U);return S(Pe.alterIndexRebuild,{name:C,options:z})},hydrateViewColumn(C){return{name:C.name,tableName:C.entityName,alias:C.alias,isActivated:C.isActivated,dbName:C.dbName}},hydrateView({viewData:C,entityData:U,jsonSchema:z}){var ge,Le;let j=U[0];return{name:C.name,keys:C.keys,orReplace:j.or_replace,editionable:j.editionable,editioning:j.editioning,force:j.force,selectStatement:j.selectStatement,tableName:C.tableName,schemaName:C.schemaData.schemaName,description:j.description,ifNotExist:j.ifNotExist,materialized:j.materialized,sharing:j.sharing,duality:j.duality,rootTableAlias:j.rootTableAlias,tableTagsClause:j.tableTagsClause,viewProperties:j.materialized?j.mviewProperties:j.viewProperties,synonyms:((Le=(ge=C.schemaData)==null?void 0:ge.synonyms)==null?void 0:Le.filter(Fe=>Fe.synonymEntityId===z.GUID))||[],modelInfo:{dbVersion:Ee.get(C,"schemaData.dbVersion")},whereClause:j.whereClause}},hydrateViewIndex(C,U,z){var j;return{...C,schemaName:U.schemaName,materialized:(j=Ee.first(z))==null?void 0:j.materialized}},createViewIndex(C,U,z,j){let ge=Ut(U.indxName),Le=Ce(U.indxType),Fe=ve(U),Ve=Je(U,j);if(U.materialized)return i(S(Pe.createIndex,{indexType:Le,name:ge,keys:Fe,options:Ve,tableName:m(C,U.schemaName)}),{isActivated:U.isActivated})},createView(C,U,z){let j=m(C.name,C.schemaName),{columns:ge,tables:Le}=oe(C.keys),Fe=ge.map(Jt=>Jt.statement).join(`,
		`),Ve=C.description?`
`+S(Pe.comment,{object:"TABLE",objectName:j,comment:d(C.description)})+`
`:`
`,nt=Ee.trim(C.selectStatement)?Ee.trim(n(C.selectStatement)):S(Pe.viewSelectStatement,{tableName:Le.join(", "),keys:Fe}),Pt=Es(C.synonyms,j,C.schemaName),Mt=Ee.get(C,"modelInfo.dbVersion",""),it=qs(Mt),Rt=S(Pe.createView,{name:j,ifNotExists:!it&&C.ifNotExist?" IF NOT EXISTS":"",orReplace:C.orReplace&&!C.materialized?" OR REPLACE":"",force:C.force&&!C.materialized?" FORCE":"",materialized:C.materialized?" MATERIALIZED":"",viewType:C.materialized?"":X(C),viewProperties:C.viewProperties?` 
`+n(C.viewProperties):"",sharing:C.sharing&&!C.materialized?` SHARING=${C.sharing}`:"",selectStatement:nt});return it?Rt=Ht(Rt,C.ifNotExist):Rt+=";",i(Rt+Ve+Pt,{isActivated:z})},createDualityView({jsonSchema:C,view:U,relatedSchemas:z}){return sg.getCreatorInstance(rg.SQL,{ddlTemplates:Pe,assignTemplates:S,lodash:Ee,prepareName:N,getNamePrefixedWithSchemaName:m}).convertDualityViewToDdl({view:U,jsonSchema:C,relatedSchemas:z})},createUdt(C){let U=Es(C.synonyms,m(C.name,C.schemaName),C.schemaName);return i(ie(C,this.convertColumnDefinition)+U,{isActivated:C.isActivated})},commentIfDeactivated(C,U,z){return C},renameColumn(C,U,z){return S(Pe.renameColumn,{tableName:C,oldColumnName:U,newColumnName:z})},createSchemaSequence({schemaName:C,sequence:U}){let z=qs(e==null?void 0:e.dbVersion);return Ni({schemaName:C,sequence:U,usingTryCatchWrapper:z})},dropSchemaSequence({schemaName:C,sequence:U}){let z=qs(e==null?void 0:e.dbVersion);return Si({schemaName:C,sequence:U,usingTryCatchWrapper:z})},alterSchemaSequence({schemaName:C,sequence:U,oldSequence:z}){let j=qs(e==null?void 0:e.dbVersion);return Kr({schemaName:C,sequence:U,oldSequence:z,usingTryCatchWrapper:j})}}}});var Np=R((yY,up)=>{"use strict";var{AlterScriptDto:ci}=wt(),{getUpdateTypesScriptDtos:ig}=dd(),{getRenameColumnScriptDtos:og}=md(),{getModifyIndexesScriptDtos:ag,getAddedIndexesScriptDtos:_g}=gd(),ut=require("lodash"),cg=_(({app:r,dbVersion:e,modelDefinitions:t,internalDefinitions:s,externalDefinitions:n,scriptFormat:i})=>a=>{let{getEntityName:c}=Te()(ut),{createColumnDefinitionBySchema:T}=Hr()(r),E=Gt()(null,{dbVersion:e,targetScriptOptions:{keyword:i}},r),{getDefinitionByReference:l}=r.require("@hackolade/ddl-fe-utils"),d={schemaName:a.compMod.keyspaceName,dbVersion:e},A={...a,...ut.omit(a==null?void 0:a.role,"properties")||{}},u=ut.toPairs(A.properties).map(([g,w])=>{let V=l({propertySchema:w,modelDefinitions:t,internalDefinitions:s,externalDefinitions:n});return T({name:g,jsonSchema:w,parentJsonSchema:A,ddlProvider:E,schemaData:d,definitionJsonSchema:V})}),N=(A.chkConstr||[]).map(g=>E.createCheckConstraint(E.hydrateCheckConstraint(g))),m={name:c(A),columns:u.map(g=>E.convertColumnDefinition(g)),checkConstraints:N,foreignKeyConstraints:[],schemaData:d,columnDefinitions:u},S=E.hydrateTable({tableData:m,entityData:[A],jsonSchema:A}),I=Ep({_:ut,ddlProvider:E,collection:a,dbVersion:e}).flatMap(({scripts:g})=>g.map(({script:w})=>w)),f=E.createTable(S,A.isActivated);return ci.getInstance([f,...I],!0,!1)},"getAddCollectionScriptDto"),Tg=_((r,e)=>t=>{let{getEntityName:s,getNamePrefixedWithSchemaNameForScriptFormat:n}=Te()(ut),i={...t,...ut.omit(t==null?void 0:t.role,"properties")||{}},a=s(i),c=t.compMod.keyspaceName,E=`DROP TABLE ${n(e)(a,c)};`;return ci.getInstance([E],!0,!0)},"getDeleteCollectionScriptDto"),lg=_(({app:r,dbVersion:e,scriptFormat:t})=>s=>{let n=Gt()(null,{dbVersion:e,targetScriptOptions:{keyword:t}},r);return[...ag({_:ut,ddlProvider:n,scriptFormat:t})({collection:s})].filter(Boolean)},"getModifyCollectionScriptDtos"),Eg=_(({app:r,dbVersion:e,modelDefinitions:t,internalDefinitions:s,externalDefinitions:n,scriptFormat:i})=>a=>{var f;let{getEntityName:c,getNamePrefixedWithSchemaNameForScriptFormat:T}=Te()(ut),{createColumnDefinitionBySchema:E}=Hr()(r),l=Gt()(null,{dbVersion:e,targetScriptOptions:{keyword:i}},r),{getDefinitionByReference:h}=r.require("@hackolade/ddl-fe-utils"),d={...a,...ut.omit(a==null?void 0:a.role,"properties")||{}},A=c(d),u=(f=d.compMod)==null?void 0:f.keyspaceName,N=T(i)(A,u),m={schemaName:u,dbVersion:e},S=ut.toPairs(a.properties).filter(([g,w])=>!w.compMod).map(([g,w])=>{let V=h({propertySchema:w,modelDefinitions:t,internalDefinitions:s,externalDefinitions:n});return E({name:g,jsonSchema:w,parentJsonSchema:d,ddlProvider:l,schemaData:m,definitionJsonSchema:V})}).map(g=>l.convertColumnDefinition(g)).map(g=>`ALTER TABLE ${N} ADD (${g});`).map(g=>ci.getInstance([g],!0,!1)).filter(Boolean),I=Ep({_:ut,ddlProvider:l,collection:a});return S.concat(I).filter(Boolean)},"getAddColumnScriptDtos"),Ep=_(({_:r,ddlProvider:e,collection:t})=>{var c,T;let s=((c=t==null?void 0:t.role)==null?void 0:c.Indxs)||[],n={...t==null?void 0:t.properties,...(T=t==null?void 0:t.role)==null?void 0:T.properties},i=Object.values(n).map(({GUID:E})=>E);return s.length===0||i.length===0?[]:s.some(({indxKey:E})=>E.find(({keyId:l})=>i.includes(l)))?_g({_:r,ddlProvider:e})({collection:t}):[]},"getNewlyCreatedIndexesScripts"),ug=_((r,e)=>t=>{var l;let{getEntityName:s,getNamePrefixedWithSchemaNameForScriptFormat:n,prepareNameForScriptFormat:i}=Te()(ut),a={...t,...ut.omit(t==null?void 0:t.role,"properties")||{}},c=s(a),T=(l=a.compMod)==null?void 0:l.keyspaceName,E=n(e)(c,T);return ut.toPairs(t.properties).filter(([h,d])=>!d.compMod).map(([h])=>`ALTER TABLE ${E} DROP COLUMN ${i(e)(h)};`).map(h=>ci.getInstance([h],!0,!0)).filter(Boolean)},"getDeleteColumnScriptDtos"),Ng=_((r,e,t)=>s=>{let n=Gt()(null,{dbVersion:e,targetScriptOptions:{keyword:t}},r),i=og(ut,n,t)(s),a=ig(ut,n,t)(s);return[...i,...a].filter(Boolean)},"getModifyColumnScriptDtos");up.exports={getAddCollectionScriptDto:cg,getDeleteCollectionScriptDto:Tg,getModifyCollectionScriptDtos:lg,getAddColumnScriptDtos:Eg,getDeleteColumnScriptDtos:ug,getModifyColumnScriptDtos:Ng}});var Ap=R((BY,hp)=>{"use strict";var{checkFieldPropertiesChanged:Sp}=Te()(),Sg=LT(),{AlterScriptDto:Gs}=wt(),Qt=require("lodash"),hg=_(({app:r,dbVersion:e,modelDefinitions:t,internalDefinitions:s,externalDefinitions:n,scriptFormat:i})=>a=>{let{createColumnDefinitionBySchema:c}=Hr()(r),T=Gt()(null,{dbVersion:e,targetScriptOptions:{keyword:i}},r),{getDefinitionByReference:E}=r.require("@hackolade/ddl-fe-utils"),l={dbVersion:e},h=Qt.toPairs(a.properties||{}).map(([N,m])=>{let S=E({propertySchema:m,modelDefinitions:t,internalDefinitions:s,externalDefinitions:n});return c({name:N,jsonSchema:m,parentJsonSchema:a,ddlProvider:T,schemaData:l,definitionJsonSchema:S})}),A={...c({name:a.code||a.name,jsonSchema:a,parentJsonSchema:{required:[]},definitionJsonSchema:{},ddlProvider:T,schemaData:l}),properties:h},u=T.createUdt(A);return Gs.getInstance([u],!0,!1)},"getCreateUdtScriptDto"),Ag=_((r,e)=>t=>{let{prepareNameForScriptFormat:s}=Te()(Qt),i=`DROP TYPE ${s(e)(t.code||t.name)};`;return Gs.getInstance([i],!0,!0)},"getDeleteUdtScriptDto"),dg=_(({app:r,dbVersion:e,modelDefinitions:t,internalDefinitions:s,externalDefinitions:n,scriptFormat:i})=>a=>{let{createColumnDefinitionBySchema:c}=Hr()(r),{prepareNameForScriptFormat:T}=Te()(Qt),E=Gt()(null,{dbVersion:e,targetScriptOptions:{keyword:i}},r),{getDefinitionByReference:l}=r.require("@hackolade/ddl-fe-utils"),h=T(i)(a.code||a.name),d={dbVersion:e};return Qt.toPairs(a.properties).filter(([A,u])=>!u.compMod).map(([A,u])=>{let N=l({propertySchema:u,modelDefinitions:t,internalDefinitions:s,externalDefinitions:n});return c({name:A,jsonSchema:u,parentJsonSchema:{required:[]},ddlProvider:E,schemaData:d,definitionJsonSchema:N})}).map(A=>E.convertColumnDefinition(A,Sg.objectTypeColumnDefinition)).map(A=>`ALTER TYPE ${h} ADD ATTRIBUTE ${A};`).map(A=>Gs.getInstance([A],!0,!1))},"getAddColumnToTypeScriptDtos"),pg=_((r,e)=>t=>{let{prepareNameForScriptFormat:s}=Te()(Qt),n=s(e)(t.code||t.name);return Qt.toPairs(t.properties).filter(([i,a])=>!a.compMod).map(([i])=>`ALTER TYPE ${n} DROP ATTRIBUTE ${s(e)(i)};`).map(i=>Gs.getInstance([i],!0,!0))},"getDeleteColumnFromTypeScriptDtos"),mg=_((r,e)=>t=>{let{prepareNameForScriptFormat:s}=Te()(Qt),n=s(e)(t.code||t.name),i=Qt.values(t.properties).filter(c=>Sp(c.compMod,["name"])).flatMap(c=>{let T=s(e)(c.compMod.oldField.name),E=`ALTER TYPE ${n} DROP ATTRIBUTE ${T};`,l=s(e)(c.compMod.newField.name),h=`ALTER TYPE ${n} ADD ATTRIBUTE ${l};`;return[Gs.getInstance([E],!0,!0),Gs.getInstance([h],!0,!1)]}),a=Qt.toPairs(t.properties).filter(([c,T])=>Sp(T.compMod,["type","mode"])).map(([c,T])=>{let E=s(e)(c),l=Qt.toUpper(T.compMod.newField.mode||T.compMod.newField.type),h=`ALTER TYPE ${n} MODIFY ATTRIBUTE ${E} ${l};`;return Gs.getInstance([h],!0,!1)});return[...i,...a]},"getModifyColumnOfTypeScriptDtos");hp.exports={getCreateUdtScriptDto:hg,getDeleteUdtScriptDto:Ag,getAddColumnToTypeScriptDtos:dg,getDeleteColumnFromTypeScriptDtos:pg,getModifyColumnOfTypeScriptDtos:mg}});var mp=R((wY,pp)=>{"use strict";var{DualityViewPropertiesType:dp}=YT(),fg=_(r=>e=>{let{getEntityName:t,getBucketName:s}=Te()(r),n=r.get(e,"role",{}),i=r.get(n,"compMod.bucketProperties",{}),a=r.get(n,"compMod.collectionData.entityData[0]",{}),c=t(a),T=s(i);return{code:n.code,tableName:c,name:n.name,tableTagsClause:n.tableTagsClause,schemaName:T,rootTableAlias:n.rootTableAlias,orReplace:n.or_replace}},"mapToFeView"),Pg=_(r=>(e,t,s)=>{let n=s==null?void 0:s[t.refId],i=(n==null?void 0:n.definition)||{},a=i.code||i.name||"";return{code:e,ref:t.ref,refId:t.refId,refIdPath:[t.refId,t.ref],refType:dp.COLLECTION_REFERENCE,columnTagsClause:t.columnTagsClause,referencedColumnName:a}},"mapRegularField"),Rg=_((r,e,t)=>{if(!t[e.GUID]){let s=r||e.title;throw s?s=`<u>${s}</u>`:s="a",new Error(`Could not find referenced collection for ${s} subquery. Check if all the subqueries have the "child table" property set`)}},"assertSubqueryIsValid"),Ig=_(r=>(e,t,s)=>{Rg(e,t,s);let n={code:e,type:t.type,name:t.title,subtype:t.subtype,sqlJsonFunction:t.sqlJsonFunction,whereClause:t.whereClause,joinedCollectionRefIdPath:[t.GUID],childTableAlias:t.childTableAlias,tableTagsClause:t.tableTagsClause,items:void 0,properties:void 0,unnestSubquery:void 0};if(t.subtype==="array"){let i=r.get(t,"items.properties",{});n.items={properties:kT(r)(i,s)}}else if(t.subtype==="object"){n.unnestSubquery=t.unnestSubquery;let i=r.get(t,"properties",{});n.properties=kT(r)(i,s)}return n},"mapSubquery"),kT=_(r=>(e,t)=>{let n=r.toPairs(e).map(([i,a])=>{if(a.type===dp.JOIN_SUBQUERY_TYPE){let T=Ig(r)(i,a,t);return[i,T]}let c=Pg(r)(i,a,t);return[i,c]});return r.fromPairs(n)},"recursivelyParseProperties"),Dg=_(r=>e=>{let t=r.get(e,"role.properties",{}),s=r.get(e,"role.compMod.collectionData.collectionRefsDefinitionsMap",{});return kT(r)(t,s)},"parseProperties"),Cg=_(r=>e=>{let{getEntityName:t}=Te()(r),s=r.get(e,"role",{}),n=r.get(s,"compMod.collectionData.entityData[0]",{}),i=t(n),a=Dg(r)(e);return{rootTableAlias:s.rootTableAlias,tableName:i,properties:a,duality:s.duality,editionable:s.editionable,force:s.force,viewOn:s.viewOn}},"mapToFeJsonSchema"),gg=_(r=>e=>{let t=r.get(e,"role.compMod.collectionData.collectionRefsDefinitionsMap",{}),n=r.toPairs(t).map(([i,a])=>{let c=r.get(a,"bucket[0].name",""),T=r.get(a,"collection[0]",""),E=a.definition||{},h={properties:{[E.code||E.name]:{GUID:a.definitionId}},bucketName:c,code:T.code,collectionName:T.collectionName};return[i,h]});return r.fromPairs(n)},"mapToFeRelatedSchemas"),Og=_(r=>e=>{let t=fg(r)(e),s=Cg(r)(e),n=gg(r)(e);return{view:t,jsonSchema:s,relatedSchemas:n}},"mapDeltaDualityViewToFeDualityView");pp.exports={mapDeltaDualityViewToFeDualityView:Og}});var Rp=R((MY,Pp)=>{"use strict";var{AlterScriptDto:qT}=wt(),{mapDeltaDualityViewToFeDualityView:yg}=mp(),fp=require("lodash"),Lg=_((r,e)=>t=>{let s=Gt()(null,{targetScriptOptions:{keyword:e}},r),n={name:t.code||t.name,keys:[],schemaData:{schemaName:""}},i=s.hydrateView({viewData:n,entityData:[t]}),a=s.createView(i,{},t.isActivated);return qT.getInstance([a],!0,!1)},"getAddRegularViewScriptDto"),Bg=_((r,e)=>t=>{let s=Gt()(null,{targetScriptOptions:{keyword:e}},r),n=yg(fp)(t),i=s.createDualityView(n);return qT.getInstance([i],!0,!1)},"getDualityViewScriptDto"),Yg=_((r,e)=>t=>{if(t.duality)return Bg(r,e)(t);if(t.selectStatement)return Lg(r,e)(t)},"getAddViewScriptDto"),wg=_((r,e)=>t=>{let{prepareNameForScriptFormat:s}=Te()(fp),i=`DROP VIEW ${s(e)(t.code||t.name)};`;return qT.getInstance([i],!0,!0)},"getDeleteViewScriptDto");Pp.exports={getAddViewScriptDto:Yg,getDeleteViewScriptDto:wg}});var Dp=R((xY,Ip)=>{"use strict";var XT=class XT{isActivated;name};_(XT,"AlterRelationshipFKField");var GT=XT,jT=class jT{bucket;collection};_(jT,"AlterRelationshipParentDto");var HT=jT,QT=class QT{bucket;collection};_(QT,"AlterRelationshipChildDto");var vT=QT,JT=class JT{relationshipOnDelete;relationshipOnUpdate;relationshipMatch};_(JT,"AlterRelationshipCustomProperties");var KT=JT,ZT=class ZT{created;deleted;modified;parent;child;name;description;customProperties;isActivated};_(ZT,"AlterRelationshipRoleCompModDto");var WT=ZT,el=class el{id;name;relationshipType;parentField;parentCardinality;childField;isActivated;childCardinality;parentCollection;childCollection;hackoladeStyles;compMod;roleType};_(el,"AlterRelationshipRoleDto");var $T=el,tl=class tl{type;isActivated;unique;subtype;compositeKey;compositePartitionKey;compositePrimaryKey;compositeUniqueKey;triggerUpdateColumns;role;GUID};_(tl,"AlterRelationshipDto");var zT=tl;Ip.exports={AlterRelationshipRoleCompModDto:WT,AlterRelationshipRoleDto:$T,AlterRelationshipDto:zT,AlterRelationshipFKField:GT,AlterRelationshipParentDto:HT,AlterRelationshipChildDto:vT,AlterRelationshipCustomProperties:KT}});var Bp=R((kY,Lp)=>{"use strict";var{AlterScriptDto:sl}=wt(),{AlterRelationshipDto:FY}=Dp(),Ti=_(r=>r.role.name,"getRelationshipName"),Ug=_((r,e)=>t=>{let{getNamePrefixedWithSchemaNameForScriptFormat:s}=Te()(r),n=t.role.compMod,i=n.child.bucket.name,a=n.child.collection.name;return s(e)(a,i)},"getFullChildTableName"),Cp=_((r,e)=>t=>{var i,a;let s=t.role.compMod,n=((i=s.name)==null?void 0:i.new)||Ti(t)||"";return r.createForeignKey({name:n,foreignKey:s.child.collection.fkFields,primaryKey:s.parent.collection.fkFields,customProperties:(a=s.customProperties)==null?void 0:a.new,foreignTable:s.child.collection.name,foreignSchemaName:s.child.bucket.name,foreignTableActivated:s.child.collection.isActivated,primaryTable:s.parent.collection.name,primarySchemaName:s.parent.bucket.name,primaryTableActivated:s.parent.collection.isActivated})},"getAddSingleForeignKeyStatementDto"),gp=_(r=>{var t,s,n,i,a,c,T,E,l,h,d;let e=r.role.compMod;return e?[((t=e.name)==null?void 0:t.new)||Ti(r),(s=e.parent)==null?void 0:s.bucket,(n=e.parent)==null?void 0:n.collection,(c=(a=(i=e.parent)==null?void 0:i.collection)==null?void 0:a.fkFields)==null?void 0:c.length,(T=e.child)==null?void 0:T.bucket,(E=e.child)==null?void 0:E.collection,(d=(h=(l=e.child)==null?void 0:l.collection)==null?void 0:h.fkFields)==null?void 0:d.length].every(A=>!!A):!1},"canRelationshipBeAdded"),Mg=_((r,e)=>t=>t.filter(s=>gp(s)).map(s=>{let n=Cp(r,e)(s);return sl.getInstance([n.statement],n.isActivated,!1)}).filter(Boolean).filter(s=>s.scripts.some(n=>!!n.script)),"getAddForeignKeyScriptDtos"),Op=_((r,e,t)=>s=>{var d,A,u,N;let{prepareNameForScriptFormat:n}=Te()(e),i=s.role.compMod,a=Ug(e,t)(s),c=((d=i.name)==null?void 0:d.old)||Ti(s)||"",T=n(t)(c),E=r.dropForeignKey(a,T),l=!!((N=(u=(A=s.role)==null?void 0:A.compMod)==null?void 0:u.isActivated)!=null&&N.new),h=i.child.collection.isActivated;return{statement:E,isActivated:l&&h}},"getDeleteSingleForeignKeyStatementDto"),yp=_(r=>{var t,s,n;let e=r.role.compMod;return e?[((t=e.name)==null?void 0:t.old)||Ti(r),(s=e.child)==null?void 0:s.bucket,(n=e.child)==null?void 0:n.collection].every(i=>!!i):!1},"canRelationshipBeDeleted"),Vg=_((r,e,t)=>s=>s.filter(n=>yp(n)).map(n=>{let i=Op(r,e,t)(n);return sl.getInstance([i.statement],i.isActivated,!0)}).filter(Boolean).filter(n=>n.scripts.some(i=>!!i.script)),"getDeleteForeignKeyScriptDtos"),xg=_((r,e,t)=>s=>s.filter(n=>gp(n)&&yp(n)).map(n=>{let i=Op(r,e,t)(n),a=Cp(r,e)(n),c=a.isActivated&&i.isActivated;return sl.getDropAndRecreateInstance(i.statement,a.statement,c)}).filter(Boolean).filter(n=>n.scripts.some(i=>!!i.script)),"getModifyForeignKeyScriptDtos");Lp.exports={getDeleteForeignKeyScriptDtos:Vg,getModifyForeignKeyScriptDtos:xg,getAddForeignKeyScriptDtos:Mg}});var ll=R((GY,Yp)=>{"use strict";var al=class al{message;stack};_(al,"PluginError");var rl=al,_l=class _l{require};_(_l,"App");var nl=_l,cl=class cl{log;clear};_(cl,"Logger");var il=cl,Tl=class Tl{jsonSchema;modelDefinitions;internalDefinitions;externalDefinitions;containerData;entityData;entities;views;viewData;relationships;collectionRefsDefinitionsMap;isUpdateScript;level;host;clusterId;accessToken;applyToInstanceQueryRequestTimeout;script;hiddenKeys;options;modelData};_(Tl,"CoreData");var ol=Tl;Yp.exports={App:nl,CoreData:ol,Logger:il,PluginError:rl}});var Up=R((vY,wp)=>{"use strict";var ml=class ml{name;isActivated};_(ml,"ContainerJsonSchema");var El=ml,fl=class fl{backgroundColor};_(fl,"ContainerStyles");var ul=fl,Pl=class Pl{collectionName;isActivated;bucketId;additionalProperties;tableIfNotExists};_(Pl,"EntityData");var Nl=Pl,Rl=class Rl{$schema;type;GUID};_(Rl,"InternalDefinitions");var Sl=Rl,Il=class Il{$schema;type;GUID};_(Il,"ModelDefinitions");var hl=Il,Dl=class Dl{$schema;type;GUID};_(Dl,"ExternalDefinitions");var Al=Dl,Cl=class Cl{type;isActivated;mode;subtype;compositeKey;compositePartitionKey;compositeClusteringKey;compositePrimaryKey;compositeUniqueKey;GUID};_(Cl,"FieldJsonSchema");var dl=Cl,gl=class gl{$schema;type;title;properties;isActivated;additionalProperties;tableIfNotExists;GUID};_(gl,"EntityJsonSchema");var pl=gl;wp.exports={ContainerJsonSchema:El,ContainerStyles:ul,EntityData:Nl,InternalDefinitions:Sl,ModelDefinitions:hl,ExternalDefinitions:Al,FieldJsonSchema:dl,EntityJsonSchema:pl}});var li=R((WY,Mp)=>{"use strict";Mp.exports=Gt()});var xp=R((zY,Vp)=>{"use strict";var{AlterScriptDto:vr}=wt(),{App:$Y}=ll(),bg="sequences",Ei=require("lodash"),Fg=_(({app:r})=>({container:e,dbVersion:t})=>{var a;let s=li()(null,{dbVersion:t},r),{getDbName:n}=Te()(Ei),i=n([e.role]);return(((a=e.role)==null?void 0:a.sequences)||[]).map(c=>{let T=s.createSchemaSequence({schemaName:i,sequence:c});return vr.getInstance([T],!0,!1)}).filter(Boolean)},"getAddContainerSequencesScriptDtos"),kg=_(({app:r})=>({container:e,dbVersion:t})=>{var m,S;let s=li()(null,{dbVersion:t},r),{getDbName:n,getGroupItemsByCompMode:i}=Te()(Ei),a=n([e.role]),c=((S=(m=e.role)==null?void 0:m.compMod)==null?void 0:S[bg])||{},{new:T=[],old:E=[]}=c,{removed:l,added:h,modified:d}=i({newItems:T,oldItems:E}),A=l.map(I=>{let f=s.dropSchemaSequence({schemaName:a,sequence:I});return vr.getInstance([f],!0,!0)}),u=h.map(I=>{let f=s.createSchemaSequence({schemaName:a,sequence:I});return vr.getInstance([f],!0,!1)});return[...d.map(I=>{let f=Ei.find(E,{id:I.id})||{},g=s.alterSchemaSequence({schemaName:a,sequence:I,oldSequence:f}),w=g.startsWith("DROP");return vr.getInstance([g],!0,w)}),...A,...u].filter(Boolean)},"getModifyContainerSequencesScriptDtos"),qg=_(({app:r})=>({container:e,dbVersion:t})=>{var a;let s=li()(null,{dbVersion:t},r),{getDbName:n}=Te()(Ei),i=n([e.role]);return(((a=e.role)==null?void 0:a.sequences)||[]).map(c=>{let T=s.dropSchemaSequence({schemaName:i,sequence:c});return vr.getInstance([T],!0,!0)}).filter(Boolean)},"getDeleteContainerSequencesScriptDtos");Vp.exports={getAddContainerSequencesScriptDtos:Fg,getModifyContainerSequencesScriptDtos:kg,getDeleteContainerSequencesScriptDtos:qg}});var Fp=R((rw,bp)=>{"use strict";var{getAddContainerScriptDto:Gg,getDeleteContainerScriptDto:Hg}=hd(),{getAddCollectionScriptDto:vg,getDeleteCollectionScriptDto:Kg,getModifyCollectionScriptDtos:Wg,getAddColumnScriptDtos:$g,getDeleteColumnScriptDtos:zg,getModifyColumnScriptDtos:Xg}=Np(),{getDeleteUdtScriptDto:jg,getCreateUdtScriptDto:Qg,getAddColumnToTypeScriptDtos:Jg,getDeleteColumnFromTypeScriptDtos:Zg,getModifyColumnOfTypeScriptDtos:eO}=Ap(),{getAddViewScriptDto:tO,getDeleteViewScriptDto:sO}=Rp(),{getModifyForeignKeyScriptDtos:rO,getDeleteForeignKeyScriptDtos:nO,getAddForeignKeyScriptDtos:iO}=Bp(),{AlterScriptDto:jY,ModificationScript:QY}=wt(),{App:JY,CoreData:ZY}=ll(),{InternalDefinitions:ew,ModelDefinitions:tw,ExternalDefinitions:sw}=Up(),{getModifyContainerSequencesScriptDtos:oO,getDeleteContainerSequencesScriptDtos:aO,getAddContainerSequencesScriptDtos:_O}=xp(),Os=require("lodash"),cO=_(({collection:r,app:e,scriptFormat:t})=>{var c,T,E,l,h,d,A,u;let s=(l=(E=(T=(c=r.properties)==null?void 0:c.containers)==null?void 0:T.properties)==null?void 0:E.added)==null?void 0:l.items,n=(u=(A=(d=(h=r.properties)==null?void 0:h.containers)==null?void 0:d.properties)==null?void 0:A.deleted)==null?void 0:u.items,i=[].concat(s).filter(Boolean).map(N=>Gg(e,t)(Object.keys(N.properties)[0])),a=[].concat(n).filter(Boolean).map(N=>Hg(e,t)(Object.keys(N.properties)[0]));return[...i,...a].filter(Boolean)},"getAlterContainersScriptDtos"),TO=_(({collection:r,app:e,dbVersion:t,modelDefinitions:s,internalDefinitions:n,externalDefinitions:i,scriptFormat:a})=>{var m,S,I,f,g,w,V,q,K,D,F,P;let c=[].concat((f=(I=(S=(m=r.properties)==null?void 0:m.entities)==null?void 0:S.properties)==null?void 0:I.added)==null?void 0:f.items).filter(Boolean).map(L=>Object.values(L.properties)[0]),T=[].concat((q=(V=(w=(g=r.properties)==null?void 0:g.entities)==null?void 0:w.properties)==null?void 0:V.deleted)==null?void 0:q.items).filter(Boolean).map(L=>Object.values(L.properties)[0]),E=[].concat((P=(F=(D=(K=r.properties)==null?void 0:K.entities)==null?void 0:D.properties)==null?void 0:F.modified)==null?void 0:P.items).filter(Boolean).map(L=>Object.values(L.properties)[0]),l=c.filter(L=>{var x;return(x=L.compMod)==null?void 0:x.created}).map(vg({app:e,dbVersion:t,modelDefinitions:s,internalDefinitions:n,externalDefinitions:i,scriptFormat:a})),h=T.filter(L=>{var x;return(x=L.compMod)==null?void 0:x.deleted}).map(Kg(e,a)),d=E.filter(L=>{var x;return(x=L.compMod)==null?void 0:x.modified}).flatMap(Wg({app:e,dbVersion:t,scriptFormat:a})),A=c.filter(L=>{var x;return!((x=L==null?void 0:L.compMod)!=null&&x.created)}).flatMap($g({app:e,dbVersion:t,modelDefinitions:s,internalDefinitions:n,externalDefinitions:i,scriptFormat:a})),u=T.filter(L=>{var x;return!((x=L==null?void 0:L.compMod)!=null&&x.deleted)}).flatMap(zg(e,a)),N=E.flatMap(Xg(e,t,a));return[...l,...h,...d,...A,...u,...N].filter(Boolean)},"getAlterCollectionsScriptDtos"),lO=_((r,e,t,s)=>{var a,c,T,E,l,h,d,A;let n=[].concat((E=(T=(c=(a=r.properties)==null?void 0:a.views)==null?void 0:c.properties)==null?void 0:T.added)==null?void 0:E.items).filter(Boolean).map(u=>Object.values(u.properties)[0]).map(u=>({...u,...u.role||{}})).filter(u=>{var N;return(N=u.compMod)==null?void 0:N.created}).map(tO(e,s));return[...[].concat((A=(d=(h=(l=r.properties)==null?void 0:l.views)==null?void 0:h.properties)==null?void 0:d.deleted)==null?void 0:A.items).filter(Boolean).map(u=>Object.values(u.properties)[0]).map(u=>({...u,...u.role||{}})).map(sO(e,s)),...n].filter(Boolean)},"getAlterViewScriptDtos"),EO=_(({collection:r,app:e,dbVersion:t,modelDefinitions:s,internalDefinitions:n,externalDefinitions:i,scriptFormat:a})=>{var d,A,u,N,m,S,I,f,g,w,V,q,K,D,F,P,L,x,Z,te;let c=[].concat((N=(u=(A=(d=r.properties)==null?void 0:d.modelDefinitions)==null?void 0:A.properties)==null?void 0:u.added)==null?void 0:N.items).filter(Boolean).map(k=>Object.values(k.properties)[0]).map(k=>({...k,...Os.omit(k.role,"properties")||{}})).filter(k=>{var ie;return(ie=k.compMod)==null?void 0:ie.created}).map(Qg({app:e,dbVersion:t,modelDefinitions:s,internalDefinitions:n,externalDefinitions:i,scriptFormat:a})),T=[].concat((f=(I=(S=(m=r.properties)==null?void 0:m.modelDefinitions)==null?void 0:S.properties)==null?void 0:I.deleted)==null?void 0:f.items).filter(Boolean).map(k=>Object.values(k.properties)[0]).map(k=>({...k,...Os.omit(k.role,"properties")||{}})).filter(k=>{var ie;return(ie=k.compMod)==null?void 0:ie.deleted}).map(jg(e,a)),E=[].concat((q=(V=(w=(g=r.properties)==null?void 0:g.modelDefinitions)==null?void 0:w.properties)==null?void 0:V.added)==null?void 0:q.items).filter(Boolean).map(k=>Object.values(k.properties)[0]).filter(k=>!k.compMod).map(k=>({...k,...Os.omit(k.role,"properties")||{}})).filter(k=>k.childType==="object_udt").flatMap(Jg({app:e,dbVersion:t,modelDefinitions:s,internalDefinitions:n,externalDefinitions:i,scriptFormat:a})),l=[].concat((P=(F=(D=(K=r.properties)==null?void 0:K.modelDefinitions)==null?void 0:D.properties)==null?void 0:F.deleted)==null?void 0:P.items).filter(Boolean).map(k=>Object.values(k.properties)[0]).filter(k=>!k.compMod).map(k=>({...k,...Os.omit(k.role,"properties")||{}})).filter(k=>k.childType==="object_udt").flatMap(Zg(e,a)),h=[].concat((te=(Z=(x=(L=r.properties)==null?void 0:L.modelDefinitions)==null?void 0:x.properties)==null?void 0:Z.modified)==null?void 0:te.items).filter(Boolean).map(k=>Object.values(k.properties)[0]).filter(k=>!k.compMod).map(k=>({...k,...Os.omit(k.role,"properties")||{}})).filter(k=>k.childType==="object_udt").flatMap(eO(e,a));return[...T,...c,...E,...l,...h].filter(Boolean)},"getAlterModelDefinitionsScriptDtos"),uO=_(({collection:r,app:e,scriptFormat:t})=>{var l,h,d,A,u,N,m,S,I,f,g,w;let s=Gt()(null,{targetScriptOptions:{keyword:t}},e),n=[].concat((A=(d=(h=(l=r.properties)==null?void 0:l.relationships)==null?void 0:h.properties)==null?void 0:d.added)==null?void 0:A.items).filter(Boolean).map(V=>Object.values(V.properties)[0]).filter(V=>{var q,K;return(K=(q=V==null?void 0:V.role)==null?void 0:q.compMod)==null?void 0:K.created}),i=[].concat((S=(m=(N=(u=r.properties)==null?void 0:u.relationships)==null?void 0:N.properties)==null?void 0:m.deleted)==null?void 0:S.items).filter(Boolean).map(V=>Object.values(V.properties)[0]).filter(V=>{var q,K;return(K=(q=V==null?void 0:V.role)==null?void 0:q.compMod)==null?void 0:K.deleted}),a=[].concat((w=(g=(f=(I=r.properties)==null?void 0:I.relationships)==null?void 0:f.properties)==null?void 0:g.modified)==null?void 0:w.items).filter(Boolean).map(V=>Object.values(V.properties)[0]).filter(V=>{var q,K;return(K=(q=V==null?void 0:V.role)==null?void 0:q.compMod)==null?void 0:K.modified}),c=nO(s,Os,t)(i),T=iO(s,Os)(n),E=rO(s,Os,t)(a);return[...c,...T,...E].filter(Boolean)},"getAlterRelationshipsScriptDtos"),NO=_(r=>{if(!r)return;let e=r.scripts.map(t=>({...t,script:(t.script||"").trim()})).filter(t=>!!t.script);if(e.length)return{...r,scripts:e}},"prettifyAlterScriptDto"),SO=_(({collection:r,app:e,dbVersion:t})=>{var E,l,h,d,A,u,N,m,S,I,f,g;let s=(d=(h=(l=(E=r.properties)==null?void 0:E.containers)==null?void 0:l.properties)==null?void 0:h.added)==null?void 0:d.items,n=(m=(N=(u=(A=r.properties)==null?void 0:A.containers)==null?void 0:u.properties)==null?void 0:N.deleted)==null?void 0:m.items,i=(g=(f=(I=(S=r.properties)==null?void 0:S.containers)==null?void 0:I.properties)==null?void 0:f.modified)==null?void 0:g.items,a=[].concat(s).filter(Boolean).map(w=>Object.values(w.properties)[0]).flatMap(w=>_O({app:e})({container:w,dbVersion:t})),c=[].concat(n).filter(Boolean).map(w=>Object.values(w.properties)[0]).flatMap(w=>aO({app:e})({container:w,dbVersion:t})),T=[].concat(i).filter(Boolean).map(w=>Object.values(w.properties)[0]).flatMap(w=>oO({app:e})({container:w,dbVersion:t}));return[...a,...c,...T].filter(Boolean)},"getAlterContainersSequencesScriptDtos"),hO=_((r,e)=>{var u,N,m;let t=JSON.parse(r.jsonSchema);if(!t)throw new Error('"comparisonModelCollection" is not found. Alter script can be generated only from Delta model');let s=(N=(u=r.options)==null?void 0:u.targetScriptOptions)==null?void 0:N.keyword,n=JSON.parse(r.modelDefinitions),i=JSON.parse(r.internalDefinitions),a=JSON.parse(r.externalDefinitions),c=(m=r.modelData[0])==null?void 0:m.dbVersion,T=cO({collection:t,app:e,scriptFormat:s}),E=TO({collection:t,app:e,dbVersion:c,modelDefinitions:n,internalDefinitions:i,externalDefinitions:a,scriptFormat:s}),l=lO(t,e,c,s),h=EO({collection:t,app:e,dbVersion:c,modelDefinitions:n,internalDefinitions:i,externalDefinitions:a,scriptFormat:s}),d=uO({collection:t,app:e,scriptFormat:s}),A=SO({collection:t,app:e,dbVersion:c});return[...T,...A,...h,...E,...l,...d].filter(Boolean).map(S=>NO(S)).filter(Boolean)},"getAlterScriptDtos");bp.exports={getAlterScriptDtos:hO}});var vp=R((ow,Hp)=>{"use strict";var{getAlterScriptDtos:ui}=Fp(),{AlterScriptDto:iw}=wt(),kp=require("lodash"),qp=_(r=>(e,t)=>{let{commentIfDeactivated:s}=Te()(r);return e.map(n=>n.isActivated===!1?n.scripts.map(i=>s(i.script,{isActivated:!1,isPartOfLine:!1})):t?n.scripts.map(i=>i.script):n.scripts.map(i=>s(i.script,{isActivated:!i.isDropScript,isPartOfLine:!1}))).flat().filter(Boolean).map(n=>n.trim()).filter(Boolean).join(`

`)},"joinAlterScriptDtosIntoScript"),AO=_((r,e)=>{var n,i;let t=ui(r,e),s=(i=(n=r.options)==null?void 0:n.additionalOptions)==null?void 0:i.some(a=>a.id==="applyDropStatements"&&a.value);return qp(kp)(t,s)},"buildEntityLevelAlterScript"),dO=_((r,e)=>ui(r,e).some(s=>s.isActivated&&s.scripts.some(n=>n.isDropScript)),"doesEntityLevelAlterScriptContainDropStatements"),Gp=_(r=>({...r,jsonSchema:r.collections[0],internalDefinitions:Object.values(r.internalDefinitions)[0]}),"mapCoreDataForContainerLevelScripts"),pO=_((r,e)=>{var i,a;let t=Gp(r),s=ui(t,e),n=(a=(i=t.options)==null?void 0:i.additionalOptions)==null?void 0:a.some(c=>c.id==="applyDropStatements"&&c.value);return qp(kp)(s,n)},"buildContainerLevelAlterScript"),mO=_((r,e)=>{let t=Gp(r);return ui(t,e).some(n=>n.isActivated&&n.scripts.some(i=>i.isDropScript))},"doesContainerLevelAlterScriptContainDropStatements");Hp.exports={buildEntityLevelAlterScript:AO,doesEntityLevelAlterScriptContainDropStatements:dO,buildContainerLevelAlterScript:pO,doesContainerLevelAlterScriptContainDropStatements:mO}});var Kp=_d(),fO=Td(),{doesContainerLevelAlterScriptContainDropStatements:PO,doesEntityLevelAlterScriptContainDropStatements:RO,buildContainerLevelAlterScript:IO,buildEntityLevelAlterScript:DO}=vp();module.exports={generateScript(r,e,t,s){try{let n=DO(r,s);t(null,n)}catch(n){e.log("error",{message:n.message,stack:n.stack},"Oracle Forward-Engineering Error"),t({message:n.message,stack:n.stack})}},generateViewScript(r,e,t,s){t(new Error("Forward-Engineering of delta model on view level is not supported"))},generateContainerScript(r,e,t,s){try{let n=IO(r,s);t(null,n)}catch(n){e.log("error",{message:n.message,stack:n.stack},"Oracle Forward-Engineering Error"),t({message:n.message,stack:n.stack})}},getDatabases(r,e,t,s){e.progress({message:"Find all schemas"}),Kp.getSchemaNames(r,e,t,s)},applyToInstance(r,e,t,s){e.clear(),e.log("info",r,"connectionInfo",r.hiddenKeys),fO.applyToInstance(r,e,s).then(n=>{t(null,n)}).catch(n=>{let i={message:n.message,stack:n.stack};e.log("error",i,"Error when applying to instance"),t(i)})},testConnection(r,e,t,s){Kp.testConnection(r,e,t,s)},isDropInStatements(r,e,t,s){try{if(r.level==="container"){let n=PO(r,s);t(null,n)}else{let n=RO(r,s);t(null,n)}}catch(n){t({message:n.message,stack:n.stack})}}};
