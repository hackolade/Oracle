"use strict";var Mt=Object.defineProperty;var t=(s,e)=>Mt(s,"name",{value:e,configurable:!0});var j=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var Je=j((ln,We)=>{"use strict";We.exports={number:"numeric",string:"nvarchar2",date:"date",timestamp:"timestamp",binary:"raw",boolean:"numeric",document:"bfile",array:"json",objectId:"char",default:"nvarchar2"}});var Qe=j((mn,ze)=>{"use strict";ze.exports={character:{type:"char"},"character varying":{type:"varchar"},"char varying":{type:"varchar"},"national char":{type:"nchar"},"national character":{type:"nchar"},"national char varying":{type:"nvarchar2"},"national character varying":{type:"nvarchar2"},"nchar varying":{type:"nvarchar2"},tinyint:{type:"number",precision:5},"small int":{type:"number",precision:5},shortinteger:{type:"number",precision:5},shortint:{type:"number",precision:5},smallint:{type:"number",precision:5},int:{type:"number",precision:10},integer:{type:"number",precision:10},shortdecimal:{type:"number",precision:5,scale:0},decimal:{type:"number",precision:5,scale:0},longinteger:{type:"number",precision:20},bigint:{type:"number",precision:20},int8:{type:"number",precision:20},bit:{type:"number",precision:1},real:{type:"float",length:23},"double precision":{type:"number"},"small money":{type:"float",precision:16,scale:2},money:{type:"float",precision:16,scale:2},"long varchar":{type:"long"},text:{type:"long"},ntext:{type:"long"},uniqueidentifier:{type:"char",length:36},uuid:{type:"char",length:36},datetime:{type:"date"},"small datetime":{type:"date"},image:{type:"long raw"},binary:{type:"raw"},varbinary:{type:"raw"},string:{type:"nvarchar2"}}});var Ze=j((un,Xe)=>{"use strict";Xe.exports={createSchema:"CREATE USER${ifNotExists} ${schemaName} NO AUTHENTICATION",comment:"\nCOMMENT ON ${object} ${objectName} IS ${comment};\n",createTable:"CREATE${tableType} TABLE${ifNotExists} ${name}        ${tableProps}        \n${options}",createTableProps:"${columnDefinitions}${keyConstraints}${checkConstraints}${foreignKeyConstraints}",columnDefinition:"${name}${type}${default}${encrypt}${constraints}",createKeyConstraint:"${constraintName}${keyType}${columns}${options}",createForeignKeyConstraint:"${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${onDelete}",checkConstraint:"${name}CHECK (${expression})",createForeignKey:"ALTER TABLE ${foreignTable} ADD CONSTRAINT ${name} FOREIGN KEY (${foreignKey}) REFERENCES ${primaryTable} (${primaryKey})${onDelete};",dropForeignKey:"ALTER TABLE ${tableName} DROP CONSTRAINT ${fkConstraintName};",createIndex:"CREATE${indexType} INDEX${ifNotExists}${name} ON ${tableName}${keys}${options};\n",dropIndex:"DROP INDEX ${name};",alterIndexRename:"ALTER INDEX ${oldName} RENAME TO ${newName};",alterIndexRebuild:"ALTER INDEX ${name} REBUILD ${options};",createView:"CREATE${orReplace}${force}${viewType}${materialized} VIEW${ifNotExists} ${name} ${sharing}${viewProperties}\n	AS ${selectStatement}",viewSelectStatement:"SELECT ${keys}\n	FROM ${tableName}",createObjectType:`CREATE OR REPLACE TYPE \${name} AS OBJECT 
(
	\${properties}
);
`,objectTypeColumnDefinition:"${name} ${type}",createCollectionType:"CREATE OR REPLACE TYPE ${name} IS ${collectionType}${size} OF (${datatype})${notPersistable};\n",ifNotExists:`DECLARE
BEGIN
	EXECUTE IMMEDIATE '\${statement}';
	EXCEPTION WHEN OTHERS THEN
		IF SQLCODE = -\${errorCode} THEN NULL; ELSE RAISE; END IF;
END;
/
`,createSynonym:"CREATE${orReplace}${editionable}${public} SYNONYM ${name}\n	FOR ${objectName};\n",renameColumn:"ALTER TABLE ${tableName} RENAME COLUMN ${oldColumnName} TO ${newColumnName};",createSequence:"CREATE SEQUENCE${ifNotExists} ${name}${sharing}${options}",dropSequence:"DROP SEQUENCE${ifExists} ${name};\n",renameSequence:"RENAME ${name} TO ${newName};\n",alterSequence:"ALTER SEQUENCE${ifExists} ${name}${options};\n",dualityView:{createJsonRelationalDualityViewHeading:"CREATE${orReplaceStatement}${forceStatement}${editionableStatement} JSON RELATIONAL DUALITY VIEW ${viewName} AS",sql:{tableTagsStatement:"WITH${checkStatement}${etagStatement}${insertStatement}${updateStatement}${deleteStatement}",columnTagsStatement:"WITH${checkStatement}${etagStatement}${updateStatement}",fromTableStatement:"FROM ${tableName}${tableAlias}${tableTagsStatement}"}}}});var Ce=j((dn,et)=>{"use strict";var Wt=Object.freeze({SQL:"SQL",GRAPHQL:"GRAPHQL"});et.exports={DualityViewSyntaxType:Wt}});var nt=j((pn,tt)=>{"use strict";var Jt=Object.freeze({JOIN_SUBQUERY_TYPE:"joinSubquery",COLLECTION_REFERENCE:"collectionReference"});tt.exports={DualityViewPropertiesType:Jt}});var oe=j((gn,rt)=>{"use strict";var yn=require("lodash");rt.exports=s=>{let e=t(n=>s.get(n,"[0].code")||s.get(n,"[0].name",""),"getDbName"),a=t(n=>n&&(n.code||n.collectionName)||"","getEntityName"),l=t(n=>n&&(n.code||n.name)||"","getViewName"),p=t(n=>n&&(n.code||n.name)||"","getBucketName"),d=t(n=>({...s.get(n,"[0]",{}),name:e(n)}),"getDbData"),o=t(n=>s.get(n,"[0].viewOn"),"getViewOn"),T=t(n=>u=>u.primaryTableId===n&&u.primaryTableId!==u.foreignTableId,"isRecursiveRelationship"),y=t(n=>Object.keys(n).reduce((u,E)=>{let R=n[E].filter(K=>{let k=n[K.primaryTableId];return Array.isArray(k)?!k.some(T(E)):!0});return s.isEmpty(R)?u:{...u,[E]:R}},{}),"rejectRecursiveRelationships"),I=t(n=>Object.keys(n).reduce((u,E)=>{let R=n[E].filter(K=>{let k=n[K.primaryTableId];return Array.isArray(k)?k.some(T(E)):!1});return u.concat(R)},[]),"filterRecursiveRelationships"),h=t((n,u="	")=>n.split(`
`).map(E=>u+E).join(`
`),"tab"),O=t((n,u)=>Object.keys(n).map(s.toLower).includes(s.toLower(u)),"hasType"),U=t(n=>Object.entries(n).filter(([u,E])=>!s.isNil(E)).reduce((u,[E,R])=>({...u,[E]:R}),{}),"clean"),H=t(n=>n.every(u=>s.get(u,"isActivated",!0)),"checkAllKeysActivated"),Q=t(n=>n.length?n.every(u=>!s.get(u,"isActivated",!0)):!1,"checkAllKeysDeactivated"),g=t((n,u)=>{let E=n.filter(K=>s.get(K,"isActivated",!0)).map(u),R=n.filter(K=>!s.get(K,"isActivated",!0)).map(u);return{activatedItems:E,deactivatedItems:R}},"divideIntoActivatedAndDeactivated"),f=t((n,{isActivated:u,isPartOfLine:E,inlineComment:R="--"})=>u!==!1?n:E?"/* "+n+" */":n.includes(`
`)?`/*
`+n+` */
`:R+" "+n,"commentIfDeactivated"),S=t((n,u="'",E="'")=>{let R=n[0];return n[n.length-1]===u&&R===E?n:`${u}${n}${E}`},"wrap"),F=t(n=>`"${n}"`,"wrapInQuotes"),N=t(n=>u=>n==="nonquotedIdentifier"?u:F(u),"prepareNameForScriptFormat"),P=t(n=>`'${n}'`,"wrapComment"),q=t(n=>(u,E)=>E?`${N(n)(E)}.${N(n)(u)}`:N(n)(u),"getNamePrefixedWithSchemaNameForScriptFormat"),D=t((n,u)=>u.some(E=>(n==null?void 0:n.oldField[E])!==(n==null?void 0:n.newField[E])),"checkFieldPropertiesChanged"),J=t(({name:n})=>F(n),"columnMapToString");return{getDbName:e,getBucketName:p,getDbData:d,getEntityName:a,getViewName:l,getViewOn:o,rejectRecursiveRelationships:y,filterRecursiveRelationships:I,tab:h,hasType:O,clean:U,checkAllKeysActivated:H,checkAllKeysDeactivated:Q,divideIntoActivatedAndDeactivated:g,commentIfDeactivated:f,wrap:S,wrapComment:P,wrapInQuotes:F,getNamePrefixedWithSchemaNameForScriptFormat:q,checkFieldPropertiesChanged:D,getColumnsList:t((n,u,E,R=J)=>{var G;let K=g(n,R),k=(G=K==null?void 0:K.deactivatedItems)!=null&&G.length?f(K.deactivatedItems.join(", "),{isActivated:!1,isPartOfLine:!0}):"";return!u&&E?" ("+K.activatedItems.join(", ")+k+")":" ("+n.map(R).join(", ")+")"},"getColumnsList"),escapeSingleQuote:t(n=>n.replaceAll("'","''"),"escapeSingleQuote"),getGroupItemsByCompMode:t(({newItems:n=[],oldItems:u=[]})=>{let E=n.filter(k=>!u.some(G=>G.id===k.id)),R=[],K=[];return u.forEach(k=>{let G=n.find(m=>m.id===k.id);G?s.isEqual(G,k)||K.push(G):R.push(k)}),{added:E,removed:R,modified:K}},"getGroupItemsByCompMode"),prepareNameForScriptFormat:N}}});var at=j((Nn,it)=>{"use strict";var{DualityViewPropertiesType:st}=nt(),re=class re{constructor(e,a,l,p,d){if(this.constructor===re)throw new Error("Abstract classes can't be instantiated.");this._ddlTemplates=e,this._assignTemplates=a,this._lodash=l,this._prepareName=p,this._getNamePrefixedWithSchemaName=d}static padInFront(e){return` ${e}`}static padInFrontAndUppercaseIfExists(e){return e?re.padInFront(e).toUpperCase():""}static isDualityView(e={}){return e.viewOn&&e.duality}static isJoinSubquery(e={}){return(e==null?void 0:e.type)===st.JOIN_SUBQUERY_TYPE}static isFlexColumn(e={}){return e.flexColumn}static isRegularDualityViewFieldOnRootLevelOrInObjectSubquery(e={}){let{ref:a,refIdPath:l,refType:p}=e;return a&&(l||[]).length===2&&p===st.COLLECTION_REFERENCE}static isRegularDualityViewFieldInArraySubquery(e={}){let{ref:a,refId:l}=e;return a&&l}static isRegularDualityViewField(e={}){return re.isRegularDualityViewFieldOnRootLevelOrInObjectSubquery(e)||re.isRegularDualityViewFieldInArraySubquery(e)}static getPathToReferencedColumn(e,a){let l=[];return re.isRegularDualityViewFieldOnRootLevelOrInObjectSubquery(e)?l=e.refIdPath:re.isRegularDualityViewFieldInArraySubquery(e)&&(l=[...a.joinedCollectionRefIdPath||[],e.ref]),l}static getRegularFieldNameFromCollection(e,a){if(e.length<2)throw new Error("Cannot extract referenced column name");let l=e[0],p=e[1],d=a[l],o=(d==null?void 0:d.properties)||{};for(let T of Object.keys(o))if(o[T].GUID===p)return T;return""}static getKeyValueFrontPadding(e){return"	".repeat(e)}_getForceStatement(e){return re.padInFrontAndUppercaseIfExists(e.force)}_getOrReplaceStatement(e){return e.orReplace?" OR REPLACE":""}_getEditionableStatement(e){return re.padInFrontAndUppercaseIfExists(e.editionable)}static getRegularFieldName(e,a){return a.code||e||a.referencedColumnName}getCreateJsonRelationalDualityViewHeadingDdl(e){var U,H;let{jsonSchema:a,view:l}=e,{getViewName:p}=oe()(this._lodash),d=((H=(U=this._ddlTemplates)==null?void 0:U.dualityView)==null?void 0:H.createJsonRelationalDualityViewHeading)||"",o=this._getOrReplaceStatement(l),T=this._getForceStatement(a),y=this._getEditionableStatement(a),I=p(l),h=this._getNamePrefixedWithSchemaName(I,l.schemaName),O={orReplaceStatement:o,forceStatement:T,editionableStatement:y,viewName:h};return this._assignTemplates(d,O)}getDualityViewBodyDdl(e){throw new Error("Not implemented")}convertDualityViewToDdl(e){let a=this.getCreateJsonRelationalDualityViewHeadingDdl(e),l=this.getDualityViewBodyDdl(e);return a+`
`+l+`
`}};t(re,"AbstractDualityViewFeDdlCreator");var Oe=re;it.exports={AbstractDualityViewFeDdlCreator:Oe}});var ct=j((En,ot)=>{"use strict";var{AbstractDualityViewFeDdlCreator:L}=at(),Pe=class Pe extends L{_getFromRootTableAliasStatement(e){if(e.rootTableAlias){let a=this._prepareName(e.rootTableAlias);return L.padInFront(a)}return""}_getFromChildTableAliasStatement(e){if(e.childTableAlias){let a=this._prepareName(e.childTableAlias);return L.padInFront(a)}return""}_getCheckStatement(e){return L.padInFrontAndUppercaseIfExists(e.check)}_getEtagStatement(e){let a=e.etag?"etag":"";return L.padInFrontAndUppercaseIfExists(a)}_getDeleteStatement(e){return L.padInFrontAndUppercaseIfExists(e.delete)}_getInsertStatement(e){return L.padInFrontAndUppercaseIfExists(e.insert)}_getUpdateStatement(e){return L.padInFrontAndUppercaseIfExists(e.update)}_getTableTagsStatement(e){let a=e.tableTagsClause||{},l=this._getCheckStatement(a),p="";l&&(p=this._getEtagStatement(a));let d=this._getInsertStatement(a),o=this._getUpdateStatement(a),T=this._getDeleteStatement(a),y={checkStatement:l,etagStatement:p,insertStatement:d,updateStatement:o,deleteStatement:T};if(Object.values(y).some(h=>h==null?void 0:h.length)){let h=this._ddlTemplates.dualityView.sql.tableTagsStatement,O=this._assignTemplates(h,y);return L.padInFront(O)}return""}_getColumnTagsStatement(e){let a=e.columnTagsClause||{},l=this._getCheckStatement(a),p="";l&&(p=this._getEtagStatement(a));let d=this._getUpdateStatement(a),o={checkStatement:l,etagStatement:p,updateStatement:d};if(Object.values(o).some(y=>y==null?void 0:y.length)){let y=this._ddlTemplates.dualityView.sql.columnTagsStatement,I=this._assignTemplates(y,o);return L.padInFront(I)}return""}_getFromRootTableStatement(e){let a=this._getNamePrefixedWithSchemaName(e.tableName,e.schemaName),l=this._getFromRootTableAliasStatement(e),p=this._getTableTagsStatement(e),d=this._ddlTemplates.dualityView.sql.fromTableStatement;return this._assignTemplates(d,{tableName:a,tableAlias:l,tableTagsStatement:p})}_getFromChildTableStatement({joinSubqueryJsonSchema:e,relatedSchemas:a,bodyPadding:l}){let p=this._lodash.first(e.joinedCollectionRefIdPath);if(!p)throw new Error("Specify child table for all join subqueries");let d=a[p],{getEntityName:o}=oe()(this._lodash),T=o(d),y=d.bucketName,I=this._getNamePrefixedWithSchemaName(T,y),h=this._getFromChildTableAliasStatement(e),O=this._getTableTagsStatement(e),U=this._ddlTemplates.dualityView.sql.fromTableStatement,Q=[this._assignTemplates(U,{tableName:I,tableAlias:h,tableTagsStatement:O})];return e.whereClause&&Q.push(`WHERE ${e.whereClause}`),Q.map(g=>`${l}${g}`).join(`
`)}_getNameOfReferencedColumnForDdl(e,a,l){let{getEntityName:p}=oe()(this._lodash);if(L.isDualityView(e)){let d=e.rootTableAlias||e.tableName;return this._getNamePrefixedWithSchemaName(a,d)}if(L.isJoinSubquery(e)){if(e.childTableAlias){let o=e.childTableAlias;return this._getNamePrefixedWithSchemaName(a,o)}let d=this._lodash.first(e.joinedCollectionRefIdPath);if(d){let o=l[d],T=p(o);return this._getNamePrefixedWithSchemaName(a,T)}}return""}_getRegularFieldKeyValueStatement({propertyName:e,propertyJsonSchema:a,parent:l,paddingFactor:p,relatedSchemas:d}){let{wrap:o}=oe()(this._lodash),T=L.getKeyValueFrontPadding(p),y=L.getRegularFieldName(e,a),I=o(y,"'","'"),h=L.getPathToReferencedColumn(a,l),O=L.getRegularFieldNameFromCollection(h,d),U=this._getNameOfReferencedColumnForDdl(l,O,d),H=this._getColumnTagsStatement(a);return`${T}${I}: ${U}${H}`}_getJoinSubqueryValueStatement({propertyJsonSchema:e,paddingFactor:a,relatedSchemas:l}){let p=a+1,d=a+2,o=this._getObjectGenStatement({paddingFactor:d,relatedSchemas:l,jsonSchema:e}),T=L.getKeyValueFrontPadding(p),I=[`${T}SELECT${o}`],h=this._getFromChildTableStatement({joinSubqueryJsonSchema:e,relatedSchemas:l,bodyPadding:T});return I.push(h),I.join(`
`)}_shouldUnnestJoinSubquery(e){let a=this._lodash.toUpper(e.sqlJsonFunction),l=this._lodash.toLower(e.subtype);return a==="JSON_OBJECT"||l==="object"?!!e.unnestSubquery:!1}_getJoinSubqueryKeyValueStatement({propertyName:e,propertyJsonSchema:a,paddingFactor:l,relatedSchemas:p}){let{wrap:d}=oe()(this._lodash),o=this._getJoinSubqueryValueStatement({relatedSchemas:p,paddingFactor:l,propertyJsonSchema:a}),T=L.getKeyValueFrontPadding(l),y=this._getObjectGenStatementJsonKeywordConfig(a),I=y.surroundingBrackets[0],h=y.surroundingBrackets[1];if(this._shouldUnnestJoinSubquery(a))return`${T}UNNEST ${I}
${o}
${T}${h}`;let U=this._getJoinSubqueryName(e,a),H=d(U,"'","'");return`${T}${H} : ${I}
${o}
${T}${h}`}_getJoinSubqueryName(e,a){return a.name||e}_buildKeyValueStatement({propertyName:e,propertyJsonSchema:a,parent:l,paddingFactor:p,relatedSchemas:d}){return L.isFlexColumn(a)?this._getFlexColumnStatement({propertyName:e,propertyJsonSchema:a,paddingFactor:p}):L.isRegularDualityViewField(a)?this._getRegularFieldKeyValueStatement({propertyName:e,propertyJsonSchema:a,parent:l,paddingFactor:p,relatedSchemas:d}):L.isJoinSubquery(a)?this._getJoinSubqueryKeyValueStatement({propertyName:e,propertyJsonSchema:a,paddingFactor:p,relatedSchemas:d}):""}_getKeyValueStatement({jsonSchema:e,relatedSchemas:a,paddingFactor:l}){var y;let p=[],d=e.properties||((y=e.items)==null?void 0:y.properties)||{},o=this._lodash.toPairs(d);for(let[I,h]of o){let O=this._buildKeyValueStatement({propertyName:I,propertyJsonSchema:h,parent:e,paddingFactor:l,relatedSchemas:a});p.push(O)}return`
${p.join(`,
`)}
`}_getObjectGenStatementJsonKeywordConfig(e){if(!L.isJoinSubquery(e))return{jsonKeyword:"JSON",surroundingBrackets:["",""],jsonKeywordBrackets:["{","}"]};let a=this._lodash.toUpper(e.sqlJsonFunction);return a==="JSON_OBJECT"?{jsonKeyword:a,surroundingBrackets:["(",")"],jsonKeywordBrackets:["(",")"]}:a==="JSON_ARRAYAGG"?{jsonKeyword:a,surroundingBrackets:["(",")"],jsonKeywordBrackets:["( JSON {","})"]}:this._lodash.toLower(e.subtype)==="array"?{jsonKeyword:"JSON",surroundingBrackets:["[","]"],jsonKeywordBrackets:["{","}"]}:{jsonKeyword:"JSON",surroundingBrackets:["(",")"],jsonKeywordBrackets:["{","}"]}}_getObjectGenStatement({relatedSchemas:e,paddingFactor:a,jsonSchema:l}){let p=this._getKeyValueStatement({relatedSchemas:e,paddingFactor:a,jsonSchema:l}),d=L.getKeyValueFrontPadding(a-1),o=this._getObjectGenStatementJsonKeywordConfig(l),T=o.jsonKeywordBrackets[0],y=o.jsonKeywordBrackets[1],I=`${o.jsonKeyword} ${T}\${keyValueStatement}${d}${y}`,h=this._assignTemplates(I,{keyValueStatement:p});return L.padInFront(h)}getDualityViewBodyDdl(e){let{view:a,jsonSchema:l,relatedSchemas:p}=e,T=[`SELECT${this._getObjectGenStatement({jsonSchema:l,paddingFactor:1,relatedSchemas:p})}`],y=this._getFromRootTableStatement(a);return T.push(y+";"),T.join(`
`)}_getFlexColumnStatement({propertyName:e,propertyJsonSchema:a,paddingFactor:l}){let{wrap:p}=oe()(this._lodash),d=L.getKeyValueFrontPadding(l),o=L.getRegularFieldName(e,a),T=p(o,'"','"');return`${d}${T} AS FLEX COLUMN`}};t(Pe,"SqlDualityViewDdlCreator");var Re=Pe;ot.exports={SqlDualityViewDdlCreator:Re}});var mt=j(($n,lt)=>{"use strict";var{DualityViewSyntaxType:zt}=Ce(),{SqlDualityViewDdlCreator:Qt}=ct(),xe=class xe{static getCreatorInstance(e,{ddlTemplates:a,assignTemplates:l,lodash:p,prepareName:d,getNamePrefixedWithSchemaName:o}){switch(e==null?void 0:e.toUpperCase()){case zt.SQL:return new Qt(a,l,p,d,o);default:throw new Error(`Unknown syntax config: ${e}`)}}};t(xe,"DualityViewDdlCreatorFactory");var Ke=xe;lt.exports={DualityViewDdlCreatorFactory:Ke}});var Ve=j((hn,ut)=>{"use strict";var Xt=Object.freeze({IF_NOT_EXISTS_SINCE:23,JSON_TYPE_SINCE:21});ut.exports={DbVersion:Xt}});var pt=j((An,dt)=>{"use strict";var Le=class Le{type;keyId};t(Le,"AlterIndexKeyDto");var qe=Le,Ue=class Ue{id;indxName;isActivated;ifNotExist;indxType;indxKey;column_expression;tablespace;index_properties;index_attributes;index_compression;logging_clause;indxComments};t(Ue,"AlterIndexDto");var Fe=Ue;dt.exports={AlterIndexDto:Fe,AlterIndexKeyDto:qe}});var ve=j((Cn,yt)=>{"use strict";var ke=class ke{cache;cacheValue;cycle;ifNotExist;increment;maxValue;minValue;sequenceName;start;sharing;order;keep;scale;scaleExtend;shard;shardExtend;type};t(ke,"Sequence");var we=ke,_e=class _e{sharing;ddlScript;sequenceName;minValue;maxValue;increment;cycle;order;cacheValue;scale;extend;shard;type;keep};t(_e,"SequenceDto");var Be=_e;yt.exports={Sequence:we,SequenceDto:Be}});var Nt=j((Rn,Tt)=>{"use strict";var gt=t((s="")=>new RegExp("\\$\\{(.*?)\\}",s),"template"),Zt=t(s=>s.match(gt("gi"))||[],"getAllTemplates"),en=t(s=>(s.match(gt("i"))||[])[1],"parseTemplate");Tt.exports=({_:s})=>({assignTemplates:t((a,l)=>Zt(a).reduce((p,d)=>{let o=en(d);return p.replace(d,()=>l[o]||l[o]===0?l[o]:"")},a),"assignTemplates")})});var Et=j((xn,ft)=>{"use strict";var Kn=require("lodash");ft.exports=(s,e)=>{let a=t((g,f)=>Object.entries(g.properties).map(f),"mapProperties"),l=t(g=>g.compositeUniqueKey?!1:!!g.unique,"isUniqueKey"),p=t(g=>{var f;return l(g)&&!((f=g.uniqueKeyOptions)!=null&&f.constraintName)},"isInlineUnique"),d=t(g=>g.compositeUniqueKey||g.compositePrimaryKey?!1:!!g.primaryKey,"isPrimaryKey"),o=t(g=>{var f;return d(g)&&!((f=g.primaryKeyOptions)!=null&&f.constraintName)},"isInlinePrimaryKey"),T=t((g,f,S)=>e({keyType:"UNIQUE",columns:[{name:f,isActivated:S}],...g}),"hydrateUniqueOptions"),y=t((g,f,S)=>e({keyType:"PRIMARY KEY",columns:[{name:f,isActivated:S}],...g}),"hydratePrimaryKeyOptions"),I=t((g,f)=>Object.keys(f).find(S=>f[S].GUID===g),"findName"),h=t((g,f)=>s.get(Object.values(f).find(S=>S.GUID===g),"isActivated",!0),"checkIfActivated"),O=t((g,f)=>s.map(g,S=>({name:I(S.keyId,f.properties),isActivated:h(S.keyId,f.properties)})),"getKeys"),U=t(g=>Array.isArray(g.primaryKey)?g.primaryKey.filter(f=>!s.isEmpty(f.compositePrimaryKey)).map(f=>({...y(f,null,null),columns:O(f.compositePrimaryKey,g)})):[],"getCompositePrimaryKeys"),H=t(g=>Array.isArray(g.uniqueKey)?g.uniqueKey.filter(f=>!s.isEmpty(f.compositeUniqueKey)).map(f=>({...T(f,null,null),columns:O(f.compositeUniqueKey,g)})):[],"getCompositeUniqueKeys");return{getTableKeyConstraints:t(g=>{if(!g.properties)return[];let f=a(g,([F,N])=>{if(!(!l(N)||p(N)))return T(N.uniqueKeyOptions,F,N.isActivated)}).filter(Boolean);return[...a(g,([F,N])=>{if(!(!d(N)||o(N)))return y(N.primaryKeyOptions,F,N.isActivated)}).filter(Boolean),...U(g),...f,...H(g)]},"getTableKeyConstraints"),isInlineUnique:p,isInlinePrimaryKey:o,getKeys:O}}});var De=j((Fn,St)=>{"use strict";var qn=require("lodash");St.exports=({prepareName:s,_:e})=>({getOptionsString:t(({constraintName:l,deferClause:p,rely:d,validate:o,indexClause:T,exceptionClause:y})=>{let I=l?` CONSTRAINT ${s(e.trim(l))}`:"",h=[p,d,T,o,y].filter(Boolean).join(" ");return{constraintString:I,statement:h&&` ${h}`}},"getOptionsString")})});var bt=j((wn,$t)=>{"use strict";var Un=require("lodash"),{DbVersion:tn}=Ve(),nn=t(s=>Number.parseInt(s,10)<tn.JSON_TYPE_SINCE,"shouldUseClobForJsonColumns");$t.exports=({_:s,wrap:e,assignTemplates:a,templates:l,commentIfDeactivated:p,wrapComment:d,prepareName:o})=>{let{getOptionsString:T}=De()({_:s,prepareName:o}),y=t((m,A)=>s.chain(A).filter("comment").map(x=>{let _=a(l.comment,{object:"COLUMN",objectName:`${m}.${o(x.name)}`,comment:d(x.comment)});return p(_,x)}).join(`
`).value(),"getColumnComments"),I=t(({nullable:m,unique:A,primaryKey:x,primaryKeyOptions:_,uniqueKeyOptions:W})=>{let{constraintString:z,statement:ne}=T(h({primaryKey:x,unique:A,primaryKeyOptions:_,uniqueKeyOptions:W}));return`${m?"":" NOT NULL"}${z}${x?" PRIMARY KEY":""}${A?" UNIQUE":""}${ne}`},"getColumnConstraints"),h=t(({primaryKey:m,unique:A,primaryKeyOptions:x,uniqueKeyOptions:_})=>m?x||{}:A?_||{}:{},"getOptions"),O=t((m,A)=>m==="JSON"&&nn(A)?"CLOB":m,"replaceTypeByVersion"),U=t(({default:m,identity:A})=>{if(!s.isEmpty(A)&&A.generated){let x=t(({generated:W,generatedOnNull:z})=>W==="BY DEFAULT"?` ${W} ${z?" ON NULL":""}`:" ALWAYS","getGenerated"),_=t(({identityStart:W,identityIncrement:z,numberToCache:ne})=>{let se=W?` START WITH ${W}`:"",ce=z?` INCREMENT BY ${z}`:"",ye=ne?` CACHE ${ne}`:" NOCACHE";return`${se}${ce}${ye}`},"getOptions");return` GENERATED${x(A)} AS IDENTITY (${s.trim(_(A))})`}else if(m)return` DEFAULT ${m}`;return""},"getColumnDefault"),H=t(({encryption:m})=>{if(s.isPlainObject(m)&&!s.isEmpty(s.omit(m,"id"))){let{ENCRYPTION_ALGORITHM:A,INTEGRITY_ALGORITHM:x,noSalt:_}=m,W=A?` USING '${A}'`:"",z=x?` '${x}'`:"";return` ENCRYPT${W}${z}${_?" NO SALT":""}`}return""},"getColumnEncrypt"),Q=t((m,A,x)=>` ${m}(${A} ${s.toUpper(x)})`,"addByteLength"),g=t((m,A)=>` ${m}(${A})`,"addLength"),f=t((m,A,x)=>s.isNumber(x)?` ${m}(${A||"*"},${x})`:s.isNumber(A)?` ${m}(${A})`:` ${m}`,"addScalePrecision"),S=t((m,A)=>s.isNumber(A)?` ${m}(${A})`:` ${m}`,"addPrecision"),F=t((m,A,x)=>` TIMESTAMP${s.isNumber(m)?`(${m})`:""}${A?` WITH${x?" LOCAL":""} TIME ZONE`:""}`,"timestamp"),N=t(m=>` INTERVAL YEAR${s.isNumber(m)?`(${m})`:""} TO MONTH`,"intervalYear"),P=t((m,A)=>{let x=s.isNumber(m)?`(${m})`:"",_=s.isNumber(A)?`(${A})`:"";return` INTERVAL DAY${x} TO SECOND${_}`},"intervalDay"),q=t((m,A,x)=>{let _={"vector<int8>":"int8","vector<float32>":"float32","vector<float64>":"float64"}[x],W=A||"*",z=s.toUpper(_||"*");return` ${m}(${W}, ${z})`},"decorateVector"),D=t((m,A)=>["object","array"].includes(A)?" "+m+"("+s.toUpper(A)+")":" "+m,"decorateJson"),J=t(m=>["CHAR","VARCHAR2"].includes(m),"canHaveByte"),X=t(m=>["CHAR","VARCHAR2","NCHAR","NVARCHAR2","RAW","UROWID"].includes(m),"canHaveLength"),i=t(m=>["NUMBER","FLOAT"].includes(m),"canHavePrecision"),$=t(m=>m==="NUMBER","canHaveScale"),n=t(m=>m==="INTERVAL YEAR","isIntervalYear"),u=t(m=>m==="INTERVAL DAY","isIntervalDay"),E=t(m=>m==="TIMESTAMP","isTimezone"),R=t((m,A,x)=>m==="VECTOR"&&(A||x),"canDecorateVector"),K=t(m=>m==="JSON","isJson");return{getColumnComments:y,getColumnConstraints:I,replaceTypeByVersion:O,getColumnDefault:U,getColumnEncrypt:H,decorateType:t((m,A)=>{let{lengthSemantics:x,length:_,precision:W,scale:z,fractSecPrecision:ne,withTimeZone:se,localTimeZone:ce,yearPrecision:ye,dayPrecision:he,isUDTRef:Ae,schemaName:fe,dimension:Ne,subtype:ge}=A;return x&&J(m)&&X(m)&&s.isNumber(_)?Q(m,_,x):X(m)&&s.isNumber(_)?g(m,_):i(m)&&$(m)?f(m,W,z):i(m)&&s.isNumber(W)?S(m,W):E(m)?F(ne,se,ce):n(m)?N(ye):u(m)?P(he,ne):Ae&&fe?` "${fe}"."${m}"`:R(m,Ne,ge)?q(m,Ne,ge):K(m)?D(m,ge):` ${m}`},"decorateType"),canHaveIdentity:t(m=>["number"].includes(m),"canHaveIdentity")}}});var At=j((_n,ht)=>{"use strict";var kn=require("lodash");ht.exports=({_:s,getColumnsList:e,checkAllKeysDeactivated:a,commentIfDeactivated:l,prepareName:p,assignTemplates:d})=>{let{getOptionsString:o}=De()({_:s,prepareName:p}),T=t(({duplicated:i,external:$,immutable:n,sharded:u,temporary:E,temporaryType:R,blockchain_table_clauses:K})=>{let k=!s.isEmpty(K);switch(!0){case E:return` ${s.toUpper(R)} TEMPORARY`;case u:return" SHARDED";case i:return" DUPLICATED";case n:return" IMMUTABLE";case k:return`${K.immutable?" IMMUTABLE":""} BLOCKCHAIN`;default:return""}},"getTableType"),y=t(i=>{let $=t(u=>u?`${u}
`:"","wrap"),n=[{key:"blockchain_table_clauses",getValue:I(i==null?void 0:i.tableProperties)},{key:"storage",getValue:h(i==null?void 0:i.tableProperties)},{key:"external_table_clause",getValue:O},{key:"partitioning",getValue:U},{key:"selectStatement",getValue:N("AS")},{key:"tableProperties",getValue:u=>u}].map(u=>i[u.key]?$(u.getValue(i[u.key],i)):"").filter(Boolean).join("");return s.trim(n)?` ${s.trim(n)}`:""},"getTableOptions"),I=t(i=>({blockchain_table_retention_clause:$,blockchain_row_retention_clause:n,blockchain_hash_and_data_format_clause:u})=>s.includes(i,$)||s.includes(i,n)||s.includes(i,u)?"":s.trim(` ${$||""} ${n||""} ${u||""}`),"getBlockChainClause"),h=t(i=>({organization:$,tablespace:n,logging:u})=>s.includes(i,"TABLESPACE")?"":$==="external"?"ORGANIZATION EXTERNAL":`ORGANIZATION ${s.toUpper($)||"HEAP"}${n?` TABLESPACE ${p(n)}`:""} ${u?"LOGGING":"NOLOGGING"}`,"getStorage"),O=t(i=>{if(!(i!=null&&i.access_driver_type))return"";let{access_driver_type:$,default_directory:n,access_parameter_type:u,opaque_format_spec:E,clob_subquery:R,reject_limit:K,location:k}=i,G=`(${s.map(k,({location_directory:x,location_specifier:_})=>`${x?`${x}:`:""}'${_}'`).join(", ")})`,m=u==="NONE"?"":`ACCESS PARAMETERS ${R?`USING CLOB ${R}`:E}`,A=`${n&&!s.isEmpty(n)?` DEFAULT DIRECTORY ${n}`:""}`+m+`${k&&!s.isEmpty(k)?` LOCATION ${G}`:""}`;return` (TYPE ${s.toUpper($)} ${A}) REJECT LIMIT ${K||"UNLIMITED"} `},"getExternalTableClause"),U=t((i,{isActivated:$})=>{if(i!=null&&i.partitionBy){let n=H(i,$),u=Q(i,$);return`PARTITION BY ${s.toUpper(s.startsWith(i.partitionBy,"composite")?s.last(i.partitionBy.split(" ")):i.partitionBy)} ${n}${u}`}return""},"getPartitioning"),H=t((i,$)=>{let n=a(i.partitionKey);return s.isEmpty(i.partitionKey)?"":e(i.partitionKey,n,$,({name:u})=>p(u))},"getPartitionKeys"),Q=t((i,$)=>{switch(i.partitionBy){case"range":return`${i.interval?`
INTERVAL (${i.interval})`:""}`+S(i.store_in_tablespaces)+g(i.range_partitions,"range_partition_clause");case"list":return`${i.automatic?" AUTOMATIC":""}`+S(i.store_in_tablespaces)+g(i.list_partitions,"list_partition_clause");case"hash":return F(i);case"reference":return`${i.constraint?` (${i.constraint})`:""}`+g(i.reference_partition_descs,"reference_partition_desc");case"system":return i.system_partitioning_quantity?` PARTITIONS ${i.system_partitioning_quantity}`:g(i.system_partition_descs,"system_partition_desc");case"composite range":{let n=f(i,$);return`${i.interval?` INTERVAL (${i.interval})`:""}`+S(i.store_in_tablespaces)+n+g(i.range_subpartition_descs,"range_subpartition_desc")}case"composite list":{let n=f(i,$);return S(i.store_in_tablespaces,"AUTOMATIC")+n+g(i.list_subpartition_descs,"list_subpartition_description")}case"composite hash":{let n=f(i,$),u=F(i);return`${n}${u}`}default:return""}},"getPartitionClause"),g=t((i,$)=>i&&s.isArray(i)&&!s.isEmpty(i)?`
(
	${($?s.map(i,n=>n[$]):i).join(`,
	`)}
)
`:"","partitionsToString"),f=t(({subpartitionType:i,subpartitionDescription:$,compositePartitionKey:n},u)=>{if(i){let E=a(n),R=$?`
${$}`:"";return` SUBPARTITION BY ${s.toUpper(i)} ${e(n,E,u,({name:K})=>p(K))} ${R}`}return""},"getSubpartition"),S=t((i,$,n="store_in_tablespace")=>s.isEmpty(i)?"":`${$?` ${$}`:""} STORE IN (${s.map(i,u=>u[n]).join(", ")})`,"getTablespaceList"),F=t(({hash_partition_quantity:i,store_in_tablespaces:$,overflow_store_in_tablespaces:n,individual_hash_partitions:u})=>i?` PARTITIONS ${i}`+S($)+S(n,"OVERFLOW","overflow_store_in_tablespace"):g(u,"individual_hash_partition"),"getHashPartition"),N=t(i=>$=>{if($)return`${i} ${$}`},"getBasicValue");return{getTableOptions:y,getTableType:T,generateConstraintsString:t((i,$)=>{var R,K;let n=l(((i==null?void 0:i.deactivatedItems)||[]).join(`,
	`),{isActivated:!$,isPartOfLine:!0}),u=(R=i==null?void 0:i.activatedItems)!=null&&R.length?`,
	`+i.activatedItems.join(`,
	`):"",E=(K=i==null?void 0:i.deactivatedItems)!=null&&K.length?`
	`+n:"";return u+E},"generateConstraintsString"),foreignKeysToString:t(i=>{if(Array.isArray(i)){let $=i.filter(E=>s.get(E,"isActivated",!0)).map(E=>p(s.trim(E.name))),n=i.filter(E=>!s.get(E,"isActivated",!0)).map(E=>p(s.trim(E.name))),u=n.length?l(n,{isActivated:!1,isPartOfLine:!0}):"";return $.join(", ")+u}return i},"foreignKeysToString"),foreignActiveKeysToString:t(i=>i.map($=>s.trim($.name)).join(", "),"foreignActiveKeysToString"),createKeyConstraint:t((i,$)=>n=>{let u=a(n.columns),E=e(n.columns,u,$,({name:K})=>p(K)),R=o(n).statement;return{statement:d(i.createKeyConstraint,{constraintName:n.constraintName?`CONSTRAINT ${p(n.constraintName)} `:"",keyType:n.keyType,columns:E,options:R}),isActivated:!u}},"createKeyConstraint"),customPropertiesForForeignKey:t(i=>({foreignOnDelete:s.get(i,"relationshipOnDelete","")}),"customPropertiesForForeignKey")}}});var Ct=j((jn,It)=>{"use strict";var Dn=require("lodash");It.exports=({_:s,assignTemplates:e,templates:a,getNamePrefixedWithSchemaName:l})=>{let p=["OBJECT_UDT","VARRAY","TABLE","COLLECTION_UDT"],d=t((y,I)=>{let h=l(y.name,y.schemaName);switch(y.type){case"OBJECT_UDT":return e(a.createObjectType,{name:h,properties:s.map(y.properties,O=>I(O,a.objectTypeColumnDefinition)).join(`,
	`)});case"VARRAY":case"TABLE":{let O=y.type==="VARRAY"?"(64)":"";return e(a.createCollectionType,{name:h,collectionType:y.type,size:s.isNumber(y.size)?`(${y.size})`:O,datatype:`${y.ofType}${y.nullable?"":" NOT NULL"}`,notPersistable:`${y.notPersistable?" NOT PERSISTABLE":""}`})}default:return""}},"getPlainUdt");return{getUserDefinedType:t((y,I)=>d(y,I),"getUserDefinedType"),isNotPlainType:t(y=>{let I=s.toUpper(y.mode||y.type);return p.includes(I)},"isNotPlainType")}}});var Rt=j((Hn,Ot)=>{"use strict";Ot.exports=({_:s,prepareName:e})=>{let a=t(({editioning:d,editionable:o})=>`${o?" EDITIONABLE":""}${d?" EDITIONING":""}`,"getViewType"),l=t(d=>d?d.alias?`${e(d.name)} as ${e(d.alias)}`:e(d.name):"","getKeyWithAlias");return{getViewType:a,getViewData:t(d=>Array.isArray(d)?d.reduce((o,T)=>{if(!T.tableName)return o.columns.push(l(T)),o;let y=`${e(T.dbName)}.${e(T.tableName)}`;return o.tables.includes(y)||o.tables.push(y),o.columns.push({statement:`${y}.${l(T)}`,isActivated:T.isActivated}),o},{tables:[],columns:[]}):{tables:[],columns:[]},"getViewData")}}});var Kt=j((Wn,Pt)=>{"use strict";var Mn=require("lodash");Pt.exports=({_:s,prepareName:e})=>({getIndexType:t(o=>o?` ${s.toUpper(o)}`:"","getIndexType"),getIndexKeys:t(({indxKey:o,column_expression:T})=>{let{escapeSingleQuote:y}=oe()();return T?`
(
	${y(T)}
)
	`:s.isArray(o)&&!s.isEmpty(o)?`
(
	${s.map(o,({name:h,type:O})=>`${e(h)} ${s.toUpper(O)}`).join(`,
	`)}
)
	`:""},"getIndexKeys"),getIndexOptions:t(({indxDescription:o,comments:T,tablespace:y,index_properties:I,index_attributes:h,index_compression:O,logging_clause:U,indxKey:H,column_expression:Q})=>{let g=U?` ${s.toUpper(U)}`:"",f=y?` TABLESPACE ${y}`:"",S=O?` ${O}`:"",F=`${g}${f}${S}`;return I?F=` ${I}`:h&&(F=` ${h}`),s.isEmpty(H)&&s.isEmpty(Q)?F:s.trim(F)},"getIndexOptions"),getIndexName:t(o=>o?` ${e(o)}`:"","getIndexName")})});var Vt=j((zn,xt)=>{"use strict";xt.exports=({prepareName:s,templates:e,assignTemplates:a,getNamePrefixedWithSchemaName:l})=>{let p=t(o=>{let T=l(o.synonymName,o.schemaName);return a(e.createSynonym,{name:o.synonymPublic?s(o.synonymName):T,orReplace:o.synonymOrReplace?" OR REPLACE":"",editionable:o.synonymEditionable?" "+o.synonymEditionable:"",public:o.synonymPublic?" PUBLIC":"",objectName:o.synonymEntityName})},"generateSynonymCreateStatement");return{generateSynonymStatements:t((o,T,y)=>o!=null&&o.length?`
`+o.map(I=>p({...I,synonymEntityName:T,schemaName:y})).join(`
`):"","generateSynonymStatements")}}});var Ft=j((er,qt)=>{"use strict";var Xn=require("lodash"),{Sequence:Zn}=ve();qt.exports=({_:s,templates:e,assignTemplates:a,getNamePrefixedWithSchemaName:l,wrapIfNotExists:p})=>{let d=t(({schemaName:N,sequences:P,usingTryCatchWrapper:q})=>s.map(P,D=>o({schemaName:N,sequence:D,usingTryCatchWrapper:q})).join(`

`),"getSequencesScript"),o=t(({schemaName:N,sequence:P,usingTryCatchWrapper:q})=>{let D=F({schemaName:N,sequence:P}),J=l(P.sequenceName,D),X=q?"":Q({sequence:P}),i=I({sequence:P,schemaName:N}),$=f({sequence:P}),n=a(e.createSequence,{name:J,ifNotExists:X,sharing:$,options:i});return q?p(n,P.ifNotExist):n+";"},"createSequenceScript"),T=t(({schemaName:N,sequence:P,oldSequence:q,usingTryCatchWrapper:D})=>{let J=q.sequenceName||P.sequenceName,X=F({schemaName:N,sequence:P}),i=l(J),$=l(J,X),n=S({sequence:P,oldSequence:q}),u=I({schemaName:N,sequence:n}),E=n.sequenceName?l(n.sequenceName):"",R=g({usingTryCatchWrapper:D});if(n.hasOwnProperty("sharing")){let G=y({schemaName:N,sequence:q,usingTryCatchWrapper:D}),m=o({schemaName:N,sequence:P,usingTryCatchWrapper:D});return G+`
`+m+`
`}return[{key:"options",value:u,name:$,template:e.alterSequence},{key:"newName",value:E,name:i,template:e.renameSequence}].filter(G=>G.value).map(G=>a(G.template,{[G.key]:G.value,name:G.name,ifExists:R})).join(`
`)},"alterSequenceScript"),y=t(({schemaName:N,sequence:P,usingTryCatchWrapper:q})=>{let D=F({schemaName:N,sequence:P}),J=l(P.sequenceName,D),X=g({usingTryCatchWrapper:q});return a(e.dropSequence,{name:J,ifExists:X})},"dropSequenceScript"),I=t(({schemaName:N,sequence:P})=>{let D=[{getOption:h,key:"increment",clause:"INCREMENT BY"},{getOption:h,key:"start",clause:"START WITH"},{getOption:h,key:"restart",clause:"RESTART WITH"},{getOption:h,key:"minValue",clause:"MINVALUE"},{getOption:h,key:"maxValue",clause:"MAXVALUE"},{getOption:O,key:"cache",extendedKey:"cacheValue"},{getOption:O,key:"cycle",extendedKey:""},{getOption:O,key:"order",extendedKey:""},{getOption:O,key:"keep",extendedKey:""},{getOption:O,key:"scale",extendedKey:"scaleExtend"},{getOption:O,key:"shard",extendedKey:"shardExtend"},{getOption:O,key:"type",extendedKey:""}].map(J=>{let X=J.getOption({sequence:P,schemaName:N,config:J});return U({option:X})}).filter(Boolean).join("");return D&&H({options:D})},"getSequenceOptions"),h=t(({sequence:N,config:P})=>{let q=Number(N[P.key]);return isNaN(q)?"":`${P.clause} ${q}`},"getNumberOption"),O=t(({sequence:N,config:P})=>{let q=s.toUpper(N[P.key]);return q?q.startsWith("NO")||!N[P.extendedKey]?q:q+" "+O({sequence:N,config:{key:P.extendedKey}}):""},"getLiteralOption"),U=t(({option:N})=>N?`	${N}
`:"","wrapOption"),H=t(({options:N})=>`
`+N.replace(/\n$/,""),"wrapOptionsBlock"),Q=t(({sequence:N})=>N.ifNotExist?" IF NOT EXISTS":"","getIfNotExists"),g=t(({usingTryCatchWrapper:N})=>N?"":" IF EXISTS","getIfExists"),f=t(({sequence:N})=>N.sharing?" SHARING="+s.toUpper(N.sharing):"","getSharing"),S=t(({sequence:N,oldSequence:P})=>{let q=s.omitBy(N,(D,J)=>s.isEqual(D,P[J]));return N.minValue>P.minValue?{...q,restart:N.start}:q},"getModifiedSequence"),F=t(({schemaName:N,sequence:P})=>P.type==="session"?"":N,"getSequenceSchemaName");return{getSequencesScript:d,createSequenceScript:o,alterSequenceScript:T,dropSequenceScript:y}}});var wt=j((sr,Ut)=>{"use strict";var rn=Je(),Lt=Qe(),B=Ze(),{DualityViewDdlCreatorFactory:sn}=mt(),{DualityViewSyntaxType:an}=Ce(),{DbVersion:on}=Ve(),{AlterIndexDto:nr}=pt(),{Sequence:rr}=ve(),V=require("lodash"),pe=t(s=>Number.parseInt(s,10)<on.IF_NOT_EXISTS_SINCE,"shouldUseTryCatchIfNotExistsWrapper");Ut.exports=(s,e,a)=>{var Ne,ge;let l=t(r=>V.isArray(r)?r:[r],"toArray"),{tab:p,commentIfDeactivated:d,checkAllKeysDeactivated:o,divideIntoActivatedAndDeactivated:T,hasType:y,wrap:I,clean:h,getNamePrefixedWithSchemaNameForScriptFormat:O,wrapComment:U,getColumnsList:H,prepareNameForScriptFormat:Q}=oe()(V),g=Q((Ne=e==null?void 0:e.targetScriptOptions)==null?void 0:Ne.keyword),f=O((ge=e==null?void 0:e.targetScriptOptions)==null?void 0:ge.keyword),{assignTemplates:S}=Nt()({_:V}),F=Et()(V,h),{getColumnComments:N,getColumnConstraints:P,replaceTypeByVersion:q,getColumnDefault:D,getColumnEncrypt:J,decorateType:X,canHaveIdentity:i}=bt()({_:V,wrap:I,assignTemplates:S,templates:B,commentIfDeactivated:d,wrapComment:U,prepareName:g}),{getTableType:$,getTableOptions:n,generateConstraintsString:u,foreignKeysToString:E,foreignActiveKeysToString:R,createKeyConstraint:K,customPropertiesForForeignKey:k}=At()({_:V,checkAllKeysDeactivated:o,getColumnsList:H,commentIfDeactivated:d,prepareName:g,assignTemplates:S}),{getUserDefinedType:G,isNotPlainType:m}=Ct()({_:V,commentIfDeactivated:d,assignTemplates:S,templates:B,getNamePrefixedWithSchemaName:f}),{getViewType:A,getViewData:x}=Rt()({_:V,prepareName:g}),{getIndexType:_,getIndexKeys:W,getIndexOptions:z,getIndexName:ne}=Kt()({_:V,prepareName:g}),se=t((r,c,b=955)=>{if(c){let C=p(p(r)),v=V.trim(C).replace(/;$/,"");return S(B.ifNotExists,{statement:v,errorCode:b})}return r+";"},"wrapIfNotExists"),{generateSynonymStatements:ce}=Vt()({prepareName:g,templates:B,assignTemplates:S,getNamePrefixedWithSchemaName:f}),{getSequencesScript:ye,createSequenceScript:he,dropSequenceScript:Ae,alterSequenceScript:fe}=Ft()({_:V,templates:B,assignTemplates:S,getNamePrefixedWithSchemaName:f,wrapIfNotExists:se});return{getDefaultType(r){return rn[r]},getTypesDescriptors(){return Lt},hasType(r){return y(Lt,r)},hydrateSchema(r,c){let b=V.get(c,"modelData.0.dbVersion");return{schemaName:r.name,ifNotExist:r.ifNotExist,dbVersion:b,synonyms:c.synonyms,sequences:c.sequences}},createSchema({schemaName:r,ifNotExist:c,dbVersion:b,sequences:C}){let w=pe(b),v=S(B.createSchema,{schemaName:g(r),ifNotExists:!w&&c?" IF NOT EXISTS":""}),Y=ye({schemaName:r,sequences:C,usingTryCatchWrapper:w}),M=Y?`

`+Y:"";return w?se(v,c,1920)+M:v+";"+M},hydrateColumn({columnDefinition:r,jsonSchema:c,schemaData:b,definitionJsonSchema:C={}}){var M;let w=b.dbVersion,v=!!c.$ref,Y=v?r.type:V.toUpper(c.mode||c.type);return{name:r.name,type:Y,ofType:c.ofType,notPersistable:c.notPersistable,size:c.size,primaryKey:F.isInlinePrimaryKey(c),primaryKeyOptions:c.primaryKeyOptions,unique:F.isInlineUnique(c),uniqueKeyOptions:c.uniqueKeyOptions,nullable:r.nullable,default:r.default,comment:c.refDescription||c.description||C.description,isActivated:r.isActivated,scale:r.scale,precision:r.precision,length:r.length,schemaName:b.schemaName,checkConstraints:c.checkConstraints,dbVersion:w,fractSecPrecision:c.fractSecPrecision,withTimeZone:c.withTimeZone,localTimeZone:c.localTimeZone,yearPrecision:c.yearPrecision,dayPrecision:c.dayPrecision,lengthSemantics:c.lengthSemantics,encryption:c.encryption,synonyms:((M=b==null?void 0:b.synonyms)==null?void 0:M.filter(Z=>Z.synonymEntityId===c.GUID))||[],isUDTRef:v,dimension:c.dimension,subtype:c.subtype,...i(c.mode)&&{identity:c.identity}}},hydrateJsonSchemaColumn(r,c){return!r.$ref||V.isEmpty(c)||m(c)?r:(r=V.omit(r,"$ref"),{...c,...r})},convertColumnDefinition(r,c=B.columnDefinition){let b=q(r.type,r.dbVersion);return d(S(c,{name:g(r.name),type:X(b,r),default:D(r),encrypt:J(r),constraints:P(r)}),{isActivated:r.isActivated})},hydrateCheckConstraint(r){return{name:r.chkConstrName,expression:r.constrExpression,comments:r.constrComments,description:r.constrDescription}},createCheckConstraint({name:r,expression:c,comments:b,description:C}){return S(B.checkConstraint,{name:r?`CONSTRAINT ${g(r)} `:"",expression:V.trim(c).replace(/^\(([\s\S]*)\)$/,"$1")})},createForeignKeyConstraint({name:r,foreignKey:c,primaryTable:b,primaryKey:C,primaryTableActivated:w,foreignTableActivated:v,foreignSchemaName:Y,primarySchemaName:M,customProperties:Z},ie,le){let ee=o(C),te=o(c),ae=!ee&&!te&&w&&v,me=l(c),ue=l(C),{foreignOnDelete:de}=k(Z),Te=S(B.createForeignKeyConstraint,{primaryTable:f(b,M||le.schemaName),name:r?`CONSTRAINT ${g(r)}`:"",foreignKey:ae?E(me):R(me),primaryKey:ae?E(ue):R(ue),onDelete:de?` ON DELETE ${de}`:""});return{statement:V.trim(Te),isActivated:ae}},createForeignKey({name:r,foreignTable:c,foreignKey:b,primaryTable:C,primaryKey:w,primaryTableActivated:v,foreignTableActivated:Y,foreignSchemaName:M,primarySchemaName:Z,customProperties:ie},le,ee){let te=o(w),ae=o(b),me=!te&&!ae&&v&&Y,ue=l(b),de=l(w),{foreignOnDelete:Te}=k(ie),Ee=S(B.createForeignKey,{primaryTable:f(C,Z||ee.schemaName),foreignTable:f(c,M||ee.schemaName),name:r?g(r):"",foreignKey:me?E(ue):R(ue),primaryKey:me?E(de):R(de),onDelete:Te?` ON DELETE ${Te}`:""});return{statement:V.trim(Ee)+`
`,isActivated:me}},dropForeignKey(r,c){let b={tableName:r,fkConstraintName:c};return S(B.dropForeignKey,b)},hydrateTable({tableData:r,entityData:c,jsonSchema:b}){var Y,M;let C=c[0],w=V.first(C.partitioning)||{},v=F.getKeys(w.compositePartitionKey,b);return{...r,keyConstraints:F.getTableKeyConstraints(b),selectStatement:V.trim(C.selectStatement),partitioning:V.assign({},w,{compositePartitionKey:v}),...V.pick(C,"blockchain_table_clauses","duplicated","external","external_table_clause","immutable","sharded","storage","temporary","temporaryType","description","ifNotExist","tableProperties"),synonyms:((M=(Y=r==null?void 0:r.schemaData)==null?void 0:Y.synonyms)==null?void 0:M.filter(Z=>Z.synonymEntityId===b.GUID))||[]}},createTable({blockchain_table_clauses:r,checkConstraints:c,columnDefinitions:b,columns:C,duplicated:w,external:v,external_table_clause:Y,foreignKeyConstraints:M,keyConstraints:Z,immutable:ie,name:le,partitioning:ee,schemaData:te,selectStatement:ae,sharded:me,storage:ue,temporary:de,temporaryType:Te,description:Ee,ifNotExist:je,tableProperties:Bt,synonyms:kt},Se){let $e=f(le,te.schemaName),Ge=Ee?S(B.comment,{object:"TABLE",objectName:$e,comment:U(Ee)}):"",_t=T(Z.map(K(B,Se)),Ie=>Ie.statement),vt=u(_t,Se),Dt=T(M,Ie=>Ie.statement),jt=u(Dt,Se),He=N($e,b),Ye=S(B.createTableProps,{columnDefinitions:V.join(C,`,
	`),foreignKeyConstraints:jt,keyConstraints:vt,checkConstraints:V.isEmpty(c)?"":`,
	`+V.join(c,`,
	`)}),Gt=ce(kt,$e,te.schemaName),Ht=Ge||He?`
`+Ge+He:"",Yt=te.dbVersion||"",Me=pe(Yt),be=S(B.createTable,{name:$e,ifNotExists:!Me&&je?" IF NOT EXISTS":"",tableProps:Ye?`
(
	${Ye}
)`:"",tableType:$({duplicated:w,external:v,immutable:ie,sharded:me,temporary:de,temporaryType:Te,blockchain_table_clauses:r}),options:n({blockchain_table_clauses:r,external_table_clause:Y,storage:ue,partitioning:ee,selectStatement:ae,tableProperties:Bt})});return Me?be=se(be,je):be+=";",d(be+`${Ht}
`+Gt,{isActivated:Se})},hydrateIndex(r,c,b){return{...r,schemaName:b.schemaName}},createIndex(r,c,b,C=!0){let w=ne(c.indxName),v=_(c.indxType),Y=W(c),M=z(c),Z=e.dbVersion||"",ie=pe(Z),le=c.ifNotExist&&!ie,ee=S(B.createIndex,{indexType:v,ifNotExists:le?" IF NOT EXISTS":"",name:w,keys:Y,options:M,tableName:f(r,c.schemaName)});return c.ifNotExist&&ie&&(ee=se(ee,!0)),ie?d(ee,{isActivated:c.isActivated}):d(ee,{isActivated:c.isActivated})},dropIndex({name:r}){return S(B.dropIndex,{name:r})},alterIndexRename({oldName:r,newName:c}){return S(B.alterIndexRename,{oldName:r,newName:c})},alterIndexRebuild({name:r,indexData:c}){let b=z(c);return S(B.alterIndexRebuild,{name:r,options:b})},hydrateViewColumn(r){return{name:r.name,tableName:r.entityName,alias:r.alias,isActivated:r.isActivated,dbName:r.dbName}},hydrateView({viewData:r,entityData:c,jsonSchema:b}){var w,v;let C=c[0];return{name:r.name,keys:r.keys,orReplace:C.or_replace,editionable:C.editionable,editioning:C.editioning,force:C.force,selectStatement:C.selectStatement,tableName:r.tableName,schemaName:r.schemaData.schemaName,description:C.description,ifNotExist:C.ifNotExist,materialized:C.materialized,sharing:C.sharing,duality:C.duality,rootTableAlias:C.rootTableAlias,tableTagsClause:C.tableTagsClause,viewProperties:C.materialized?C.mviewProperties:C.viewProperties,synonyms:((v=(w=r.schemaData)==null?void 0:w.synonyms)==null?void 0:v.filter(Y=>Y.synonymEntityId===b.GUID))||[],modelInfo:{dbVersion:V.get(r,"schemaData.dbVersion")}}},hydrateViewIndex(r,c,b){var C;return{...r,schemaName:c.schemaName,materialized:(C=V.first(b))==null?void 0:C.materialized}},createViewIndex(r,c,b,C){let w=ne(c.indxName),v=_(c.indxType),Y=W(c),M=z(c,C);if(c.materialized)return d(S(B.createIndex,{indexType:v,name:w,keys:Y,options:M,tableName:f(r,c.schemaName)}),{isActivated:c.isActivated})},createView(r,c,b){let C=f(r.name,r.schemaName),{columns:w,tables:v}=x(r.keys),Y=w.map(ae=>ae.statement).join(`,
		`),M=r.description?`
`+S(B.comment,{object:"TABLE",objectName:C,comment:U(r.description)})+`
`:`
`,Z=V.trim(r.selectStatement)?V.trim(p(r.selectStatement)):S(B.viewSelectStatement,{tableName:v.join(", "),keys:Y}),ie=ce(r.synonyms,C,r.schemaName),le=V.get(r,"modelInfo.dbVersion",""),ee=pe(le),te=S(B.createView,{name:C,ifNotExists:!ee&&r.ifNotExist?" IF NOT EXISTS":"",orReplace:r.orReplace&&!r.materialized?" OR REPLACE":"",force:r.force&&!r.materialized?" FORCE":"",materialized:r.materialized?" MATERIALIZED":"",viewType:r.materialized?"":A(r),viewProperties:r.viewProperties?` 
`+p(r.viewProperties):"",sharing:r.sharing&&!r.materialized?` SHARING=${r.sharing}`:"",selectStatement:Z});return ee?te=se(te,r.ifNotExist):te+=";",d(te+M+ie,{isActivated:b})},createDualityView({jsonSchema:r,view:c,relatedSchemas:b}){return sn.getCreatorInstance(an.SQL,{ddlTemplates:B,assignTemplates:S,lodash:V,prepareName:g,getNamePrefixedWithSchemaName:f}).convertDualityViewToDdl({view:c,jsonSchema:r,relatedSchemas:b})},createUdt(r){let c=ce(r.synonyms,f(r.name,r.schemaName),r.schemaName);return d(G(r,this.convertColumnDefinition)+c,{isActivated:r.isActivated})},commentIfDeactivated(r,c,b){return r},renameColumn(r,c,b){return S(B.renameColumn,{tableName:r,oldColumnName:c,newColumnName:b})},createSchemaSequence({schemaName:r,sequence:c}){let b=pe(e==null?void 0:e.dbVersion);return he({schemaName:r,sequence:c,usingTryCatchWrapper:b})},dropSchemaSequence({schemaName:r,sequence:c}){let b=pe(e==null?void 0:e.dbVersion);return Ae({schemaName:r,sequence:c,usingTryCatchWrapper:b})},alterSchemaSequence({schemaName:r,sequence:c,oldSequence:b}){let C=pe(e==null?void 0:e.dbVersion);return fe({schemaName:r,sequence:c,oldSequence:b,usingTryCatchWrapper:C})}}}});module.exports=wt();
